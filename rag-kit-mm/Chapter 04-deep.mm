# Компоненты системы RAG

## Индексация
- Предварительная обработка данных
- Загрузка данных
  - WebBaseLoader
  - PDF, Word документы
  - Неструктурированные данные
- Разбиение текста
  - SemanticChunker
  - RecursiveCharacterTextSplitter
  - Учет ограничений токенов
  - Перекрытие блоков (chunk_overlap)
- Векторизация
  - OpenAIEmbeddings
  - Ограничение 8191 токен
- Векторное хранилище
  - Chroma DB
  - Другие базы данных
- Создание ретривера
  - vectorstore.as_retriever()

## Извлечение
- Поиск релевантной информации
- Форматирование результатов
  - format_docs функция
- Векторный поиск
  - Преобразование запроса в эмбеддинг
  - Сравнение с векторной базой
- Мини-цепочка обработки
  - retriever | format_docs

## Генерация
- Использование LLM для ответа
- Два основных компонента:
  - Промты
  - Языковая модель

### Промтинг
- Источники промтов:
  - LangChain Hub
  - Пользовательские шаблоны
- Структура промта:
  - input_variables: ['context', 'question']
  - Шаблон с заполнителями
  - Системная роль ассистента
- Форматирование запроса для LLM

### Определение LLM
- Выбор модели:
  - ChatGPT (gpt-4o, gpt-3.5)
  - Temperature настройка
- Обработка промта:
  - invoke метод
  - Передача контекста и вопроса
- Парсинг ответа:
  - StrOutputParser
  - Преобразование в строку

## Пользовательский интерфейс
- Точка взаимодействия с пользователем
- Функциональность:
  - Ввод запросов
  - Отображение ответов
  - Обратная связь
- Типы интерфейсов:
  - Текстовые поля
  - Голосовые системы
  - Веб-интерфейсы
- Обработка запросов:
  - Предварительная обработка
  - Постобработка ответов

## Оценка системы
- Метрики оценки:
  - Точность
  - Релевантность
  - Время отклика
  - Удовлетворенность пользователей
- Сбор обратной связи:
  - Качественные данные
  - Количественные оценки
  - Палец вверх/вниз
- Непрерывное улучшение:
  - Анализ взаимодействий
  - Оптимизация компонентов

## Ключевые особенности
- Автономная индексация
- Реальное время извлечения
- Интеграция внешних данных
- Расширение знаний LLM
- Профессиональный UI/UX
- Постоянная оценка и улучшение
