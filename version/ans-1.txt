Отличный вопрос!  
Ваша задача — **показать в Grafana таблицу с сервисами, их текущей версией и версией 24 часа назад**.  
Допустим, ваша метрика называется `myservice_info` и содержит лейблы `name` (имя сервиса) и `version` (версия).

---

## Как это сделать

### 1. **Получить текущую версию**

Обычно метрика типа `info` — это gauge с value=1, где лейблы содержат нужную информацию.  
Чтобы получить текущую версию для каждого сервиса:

```promql
myservice_info == 1
```

или просто

```promql
myservice_info
```

(если метрика всегда равна 1)

### 2. **Получить версию 24 часа назад**

Prometheus не хранит "лейблы в прошлом", но можно получить значение метрики 24 часа назад с помощью функции [`@`](https://prometheus.io/docs/prometheus/latest/querying/basics/#explicit-time):

```promql
myservice_info @ end() - 24h
```

Однако, **Prometheus 2.31 не поддерживает синтаксис `@`** (он появился в 2.33).  
В вашей версии Prometheus (2.31) можно использовать функцию [`offset`](https://prometheus.io/docs/prometheus/latest/querying/basics/#offset-modifier):

```promql
myservice_info offset 24h
```

### 3. **Объединить данные в одну таблицу**

В Grafana 10 вы можете использовать **Transformations** для объединения результатов двух запросов по лейблу `name`.

#### **Пошаговая инструкция:**

---

### **A. В панели Table добавьте два запроса:**

#### **Запрос A (текущая версия):**
```promql
myservice_info
```
- В Columns: выберите `name` и `version`
- Переименуйте поле version в "Current Version" (можно через Transformations)

#### **Запрос B (версия 24 часа назад):**
```promql
myservice_info offset 24h
```
- В Columns: выберите `name` и `version`
- Переименуйте поле version в "Version 24h ago" (можно через Transformations)

---

### **B. Включите Transformations:**

1. **Join by field**  
   - В Transformations выберите **Join** (или "Merge" в старых версиях Grafana).
   - Join по полю `name`.
   - Включите поля: `name`, `Current Version`, `Version 24h ago`.

2. **(Опционально) Переименуйте поля**  
   - Используйте Transformation "Rename fields" для удобства.

---

### **C. Итоговая таблица будет выглядеть так:**

| name         | Current Version | Version 24h ago |
|--------------|----------------|-----------------|
| service1     | 1.2.3          | 1.2.2           |
| service2     | 2.0.0          | 1.9.9           |
| ...          | ...            | ...             |

---

## **Важные замечания:**

- Если версия сервиса не менялась за 24 часа, значения будут одинаковы.
- Если сервис появился менее 24 часов назад, в столбце "Version 24h ago" будет пусто.
- Если сервис исчез, он не появится в таблице.

---

## **Кратко:**

1. **Два запроса:**
   - `myservice_info` (текущая версия)
   - `myservice_info offset 24h` (версия 24 часа назад)
2. **Join по полю `name` в Transformations**
3. **Переименуйте столбцы для наглядности**

---

Если что-то не работает — покажите пример вашей метрики, я помогу скорректировать!
