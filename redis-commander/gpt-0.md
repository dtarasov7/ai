Ниже — функциональные требования (FR) к TUI‑утилите для работы с Redis в терминале. Целевая аудитория: разработчики, сопровождение, DevOps.

## 1) Подключения и контексты
**FR-1.1** Утилита должна поддерживать подключение к Redis по TCP (host/port) и по Unix socket.  
**FR-1.2** Утилита должна поддерживать аутентификацию: пароль (AUTH), username/password (ACL), выбор БД (SELECT).  
**FR-1.3** Утилита должна поддерживать TLS-подключение (вкл/выкл, CA, cert/key, verify mode).  
**FR-1.4** Утилита должна позволять хранить и выбирать профили подключений (dev/stage/prod), включая: адреса, TLS, ACL, DB, таймауты.  
**FR-1.5** Утилита должна поддерживать “контекст” сессии: текущий профиль, текущая БД, текущий namespace/prefix фильтр.  
**FR-1.6** Утилита должна поддерживать подключение через SSH‑туннель (создание/использование существующего).  
**FR-1.7** Утилита должна поддерживать работу с Redis Cluster (авто‑определение, перенаправления MOVED/ASK) и Redis Sentinel (выбор мастера по service name).

## 2) Обзор ключей и навигация
**FR-2.1** Утилита должна предоставлять экран/панель списка ключей с подгрузкой страницами (без блокирующего KEYS по умолчанию).  
**FR-2.2** Утилита должна уметь искать ключи по паттерну (SCAN с MATCH) и ограничивать выборку по COUNT.  
**FR-2.3** Утилита должна показывать для ключа метаданные: тип, TTL/PTTL, размер (если доступно/возможно), encoding (при наличии), время последнего изменения — если получаемо из Redis/модулей.  
**FR-2.4** Утилита должна позволять фильтровать/группировать ключи по префиксу и быстро переходить по “дереву” префиксов (виртуальная иерархия по разделителю `:`).  
**FR-2.5** Утилита должна поддерживать выбор нескольких ключей (multi‑select) для пакетных операций (см. раздел 4).

## 3) Просмотр и редактирование данных по типам
**FR-3.1** Утилита должна корректно определять тип ключа (string/hash/list/set/zset/stream) и открывать соответствующий viewer/editor.  
**FR-3.2** Для `string` утилита должна: показать значение (с лимитом по размеру и подгрузкой), поддерживать редактирование (SET), инкременты, просмотр как raw/UTF‑8/hex, копирование в буфер/STDOUT.  
**FR-3.3** Для `hash` утилита должна: листинг полей с пагинацией (HSCAN), поиск по полю, просмотр/редактирование значения поля, добавление/удаление полей.  
**FR-3.4** Для `list` утилита должна: просмотр диапазона (LRANGE с пагинацией), push/pop (L/R), вставка/удаление по индексу/значению (где применимо).  
**FR-3.5** Для `set` утилита должна: просмотр элементов (SSCAN), добавление/удаление, операции diff/inter/union (с выводом результата).  
**FR-3.6** Для `zset` утилита должна: просмотр по score (ZRANGE/ZREVRANGE), поиск элемента, изменение score, получение rank.  
**FR-3.7** Для `stream` утилита должна: просмотр записей (XRANGE/XREVRANGE), чтение групп/консьюмеров (XINFO), ack/claim (XACK/XCLAIM) при наличии прав.  
**FR-3.8** Утилита должна поддерживать просмотр/редактирование TTL: EXPIRE/PEXPIRE, PERSIST, установка TTL при записи.  
**FR-3.9** Утилита должна поддерживать “безопасный режим” редактирования: предпросмотр команды и подтверждение перед записью/удалением.

## 4) Операции над ключами (single и bulk)
**FR-4.1** Утилита должна поддерживать удаление ключа (DEL/UNLINK) с подтверждением.  
**FR-4.2** Утилита должна поддерживать rename/move (RENAME/RENAMENX, MOVE между DB если применимо).  
**FR-4.3** Утилита должна поддерживать копирование ключа (DUMP/RESTORE или COPY где доступно) с выбором целевой DB/prefix.  
**FR-4.4** Для multi‑select утилита должна поддерживать bulk операции: delete, set TTL, export значений, добавление префикса (copy/rename), оценка объема выбранного набора (приближенно).  
**FR-4.5** Утилита должна уметь выполнять операции с учетом кластерного режима (частичное выполнение, отчет по слотам/узлам).

## 5) Выполнение команд и история
**FR-5.1** Утилита должна предоставлять консоль выполнения произвольных Redis команд с подсветкой/валидацией (минимально: подсказки по командам).  
**FR-5.2** Утилита должна показывать результат команды в читаемом виде (таблицы/дерево для массивов), с переключением в raw RESP.  
**FR-5.3** Утилита должна хранить историю выполненных команд в рамках сессии и (опционально) на диске по профилю подключения.  
**FR-5.4** Утилита должна поддерживать сохранение набора команд как “скрипт/макрос” и повторный запуск с подтверждением.

## 6) Экспорт/импорт и диагностика данных
**FR-6.1** Утилита должна поддерживать экспорт ключей/значений в файл (минимум: JSON/текстовый формат; опционально: RESP/Redis protocol).  
**FR-6.2** Утилита должна поддерживать импорт из файла с режимами: create only / overwrite / merge (для hash/set/zset — где возможно).  
**FR-6.3** Утилита должна поддерживать “diff” между двумя окружениями/подключениями по выбранным ключам (наличие, тип, TTL, значения — при настройках).

## 7) Операционные экраны (для сопровождения/DevOps)
**FR-7.1** Утилита должна показывать INFO (server/clients/memory/persistence/stats/replication/cpu/keyspace) в структурированном виде.  
**FR-7.2** Утилита должна отображать показатели памяти: used_memory, fragmentation, maxmemory, eviction policy, top ключи (если доступно через sampling/scan).  
**FR-7.3** Утилита должна показывать список клиентов (CLIENT LIST) с фильтрацией, и поддерживать отключение клиента (CLIENT KILL) с подтверждением и ограничениями прав.  
**FR-7.4** Утилита должна поддерживать просмотр SLOWLOG (получение, очистка с подтверждением).  
**FR-7.5** Утилита должна поддерживать MONITOR (live‑просмотр команд) с возможностью фильтрации по DB/командам/клиентам и ограничением объема.  
**FR-7.6** Утилита должна показывать состояние persistence: RDB/AOF, прогресс rewrite, и позволять запускать BGREWRITEAOF/BGSAVE с подтверждением.  
**FR-7.7** Утилита должна поддерживать просмотр и изменение CONFIG (get/set) в режиме “только разрешенные параметры” (настраиваемый allowlist).

## 8) Репликация, Cluster, Sentinel
**FR-8.1** Для master/replica утилита должна показывать состояние репликации, lag, role, connected replicas.  
**FR-8.2** Для Cluster утилита должна отображать карту узлов/слотов, роли, миграции/недоступности, и выполнять базовые команды диагностики (CLUSTER INFO/NODES).  
**FR-8.3** Для Sentinel утилита должна показывать monitored masters, текущего master, failover состояние, и позволять переключаться на актуальный master.

## 9) Pub/Sub (для разработчиков и эксплуатации)
**FR-9.1** Утилита должна позволять подписываться на канал(ы) и паттерны (SUBSCRIBE/PSUBSCRIBE) с отображением потока сообщений.  
**FR-9.2** Утилита должна поддерживать публикацию сообщений (PUBLISH) и просмотр статистики pub/sub (PUBSUB CHANNELS/NUMSUB/NUMPAT).

## 10) Lua/транзакции/пайплайнинг (по необходимости)
**FR-10.1** Утилита должна поддерживать выполнение Lua скриптов (EVAL/EVALSHA), включая управление loaded scripts (SCRIPT LOAD/EXISTS/FLUSH) с подтверждением.  
**FR-10.2** Утилита должна поддерживать транзакции (MULTI/EXEC/DISCARD) в интерактивном режиме.  
**FR-10.3** Утилита должна поддерживать режим пайплайна для пакетных команд (с лимитами и отчетом об ошибках).

## 11) ACL и безопасность
**FR-11.1** Утилита должна отображать текущего пользователя и его разрешения (ACL WHOAMI, ACL GETUSER) при наличии прав.  
**FR-11.2** Утилита должна поддерживать управление пользователями/ACL (list/get/set/del) в отдельном экране, с обязательным подтверждением для изменений.  
**FR-11.3** Утилита должна поддерживать “read‑only mode” на уровне приложения (запрет команд записи/админских) с возможностью включения по профилю/флагу запуска.  
**FR-11.4** Утилита должна маскировать секреты в UI/логах (пароли, токены, приватные ключи), но позволять явное раскрытие по действию пользователя.

## 12) Логи, аудит действий, воспроизводимость
**FR-12.1** Утилита должна вести журнал действий пользователя (выполненные команды/операции UI) с привязкой к профилю подключения и timestamp.  
**FR-12.2** Утилита должна позволять экспортировать аудит в файл (для инцидентов/разбора).  
**FR-12.3** Утилита должна поддерживать “dry‑run” для bulk операций: показать план, количество затронутых ключей, пример команд, и только затем выполнять.

## 13) UX‑функции TUI (как функциональность интерфейса)
**FR-13.1** Утилита должна иметь основные экраны: Connections, Keys, Key Detail, Command Console, Ops/Monitoring, Cluster/Sentinel, Pub/Sub, Settings/Help.  
**FR-13.2** Утилита должна поддерживать горячие клавиши для навигации, поиска, обновления, копирования значения/ключа, переключения DB/профиля.  
**FR-13.3** Утилита должна поддерживать обновление данных по таймеру (auto‑refresh) на операционных экранах с настраиваемым интервалом.  
**FR-13.4** Утилита должна иметь встроенную справку по командам/горячим клавишам и контекстные подсказки.

Если нужно, могу:  
1) разложить требования по ролям (dev vs ops vs devops) и сценариям;  
2) оформить в виде SRS с приоритизацией (Must/Should/Could) и критериями приемки.
