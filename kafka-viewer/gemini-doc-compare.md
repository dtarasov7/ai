Это описание можно использовать для `README.md` или документации проекта.

***

# Kafka TUI Viewer — Функциональный обзор

**Kafka TUI Viewer** — это консольное приложение с графическим интерфейсом (TUI) для мониторинга и администрирования кластеров Apache Kafka. Инструмент ориентирован на инженеров и администраторов, которым необходимо быстро диагностировать проблемы, просматривать данные и управлять Consumer Groups без необходимости запоминать длинные команды CLI.

### Текущий функционал

#### 1. Просмотр Топиков (Topic Browser)
*   **Список топиков:** Отображение списка всех топиков с количеством партиций.
*   **Живой мониторинг:** При выборе топика в реальном времени отображаются поступающие сообщения.
*   **Фильтрация сообщений:**
    *   Поиск по подстроке в полях: `Key`, `Value`, `Partition`, `Offset`.
    *   Фильтрация происходит на лету (клиентская сторона).
*   **Просмотр деталей сообщения:**
    *   Полноэкранный просмотр Key, Value, Headers, Timestamp.
    *   Режимы просмотра: Text (UTF-8) / Hex (шестнадцатеричный дамп) / JSON (автоматическое форматирование).
    *   **Экспорт:** Сохранение сообщения в файл (`.json` для структур или `.bin` для сырых данных).

#### 2. Мониторинг Consumer Groups (Lag Monitoring)
*   **Сводная таблица:** Список всех групп с их статусом (`Stable`, `Empty`, `Dead`) и агрегированными метриками (`Total Lag`).
*   **Цветовая индикация:** Подсветка проблемных групп (желтый/красный) в зависимости от величины лага.
*   **Детальный анализ (Drill-down):**
    *   Просмотр состояния каждой партиции внутри группы.
    *   Отображение `Current Offset`, `Log End Offset`, `Lag` для каждой партиции.

#### 3. Управление Оффсетами (Offset Reset)
*   **Гибкий сброс (Reset Offsets):** Возможность изменить позицию чтения (offset) для группы потребителей.
*   **Стратегии сброса:**
    *   `Earliest`: Перечитать с начала.
    *   `Latest`: Пропустить всё (перейти в конец).
    *   `DateTime`: Откатить на конкретную дату и время (ISO 8601).
    *   `Duration`: Откатить на "1 час назад" (Duration).
*   **Область действия (Scope):**
    *   **Reset ALL:** Сброс оффсетов для всех топиков группы.
    *   **Reset Topic:** Сброс только для выбранного топика.
*   **Безопасность:** Режим **Dry Run** (предпросмотр изменений "Было -> Стало") перед применением.

***

### Сравнение: Kafka TUI Viewer vs Стандартные CLI утилиты

В стандартной поставке Kafka (или Confluent Platform) есть набор скриптов: `kafka-console-consumer`, `kafka-consumer-groups`, `kafka-topics` и др.

| Функция | Kafka TUI Viewer | Standard CLI (`kafka-*`) | Преимущества TUI |
| :--- | :--- | :--- | :--- |
| **Просмотр сообщений** | **Интерактивный список.** Можно листать, выбирать, открывать детали, переключать Hex/Text на лету. | `kafka-console-consumer`. Потоковый вывод. Нельзя "вернуться назад" или кликнуть на сообщение для деталей без перезапуска. | Удобство навигации и анализа структуры (JSON/Headers). |
| **Поиск / Фильтр** | **Форма фильтрации.** Ввод полей (Key/Value) в UI, применение без перезапуска подключения. | `kafka-console-consumer --grep` (или `grep` в pipe). Требует перезапуска процесса для смены фильтра. | Быстрая смена условий поиска. |
| **Мониторинг Lag** | **Таблица в реальном времени.** Быстрый переход от списка групп к деталям партиций. | `kafka-consumer-groups --describe`. Выводит статичную таблицу. Для обновления нужно запускать команду снова (или `watch`). | Наглядность, цветовая индикация проблем, drill-down. |
| **Сброс Offset** | **Мастер (Wizard).** Выбор стратегии (время, начало, конец), предпросмотр (Dry Run) с таблицей изменений. | `kafka-consumer-groups --reset-offsets`. Требует сложного синтаксиса аргументов (`--to-datetime`, `--execute`). Ошибка в дате может сломать прод. | **Dry Run таблица** прямо перед глазами. Меньше риск ошибки (опечатки). |
| **Аутентификация** | Единая конфигурация при старте (SSL/SASL). | Нужно передавать `--consumer.config client.properties` в каждую команду. | Меньше настройки при каждом действии. |
| **Экспорт данных** | Кнопка **Save** (JSON/Bin) для конкретного сообщения. | Перенаправление вывода `> file`. Сложно сохранить *одно* конкретное сообщение из потока. | Точечное сохранение сэмплов для отладки. |

#### Вывод
**Standard CLI** незаменимы для скриптов автоматизации (CI/CD, cron) и разовых простых проверок.
**Kafka TUI Viewer** значительно выигрывает при **интерактивной диагностике** инцидентов (Troubleshooting), когда инженеру нужно быстро прыгать между топиками, искать конкретные ошибки в JSON, оценивать лаг и безопасно откатывать оффсеты, видя контекст.
