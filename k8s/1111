Развернут кластер k8s:
- три master nodes
- два ingress nodes
- несколько worker nodes
На кластере развернут istio.
ingress контролер - nginx.
Запросы в кластер поступают через внешний балансировщик (lb)
lb - это два сервера с keepalived . На каждом сервере развернут nginx, который в зависимости от поля host в запросе 
отправляет запрос либо на один из master, либо на один из ingress.
В кластере настроен внутрений мониторинг всех компонент на основе promethus и grafana.

Однако есть внешняя служба мониторинга (дежурная смена), которая использует zabbix версии 6.4 (версия - важно)
и не имеет доступа к promethus и grafana в кластере. 
На каждом хосте установлен zabbix agent version 1 (версия агента - это важно).

Необходимо настроить в zabbix мониторинг основных параметров развернутого кластера, чтобы дежурная смена могла оперативно понять, 
что с кластером ( или балансировщиками) имеются проблемы и проэскалировать на поддержку кластера

Проверки должны как миниму включать: 
- недоступность kube api через lb
- проблемы сетевой связанности между узлами 
- проблемы сетевой связанности между подами на разных узлах
- отказ одного или нескольких master (с разными уровнями критичности)
- отказ одной или нескольких узлов  кластера etcd (с разными уровнями критичности)
- истекает срок сертификатов
- недоступность корпоративных DNS серверов
- недоступность корпоративных LDAP серверов
- недоступность корпоративного репозитория контейнеров
- срабатывание OOM killer

Составь список метрик (проверок), которые имеет смысл настроить в zabbix, чтобы с одной стороны не перегружать 
дежурную сменую излишними алертами, а с другой стороны не пропустить важные события.

Список должен включать указанные выше проверки и дополнительно те проверки, которые ты считаешь необходимо добавить. 
Для добавленных тобой проверок укажи причину их добавления.

Исключи инфраструктурные метрики, то есть метрики хостов ( процессор, RAM, диски и т.д.).

Для каждой метрики укажи как ее эффективней получать - через запрос от сервера zabbix к API k8s 
или через zabbix agent (скрипты). Если проверка через скрипт , то приведи текст скрипта и конфиг zabbix agent.

Для каждой метрики укажи рекумендуемые пороги , чтобы минимизировать ложные срабатывания.

Приведи код шаблонов (формат - YAML) с указанием -  к каким узлам применять тот или иной шаблон.


