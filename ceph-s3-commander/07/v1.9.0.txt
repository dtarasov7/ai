czMtY29tbWFuZGVyLXYxLjkuMC5weQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAwMDA3NzAAMDAwMDAw
MAAwMDAxNzM0ADAwMDAwNzYyMzMwADE1MTMxMjA1NDUzADAxMzYyNAAgMAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB1c3RhciAgAHJvb3QAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAdmJveHNmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAj
IS91c3IvYmluL2VudiBweXRob24zCiMgLSotIGNvZGluZzogdXRmLTggLSotCiIiIgrQlNCy0YPR
hdC/0LDQvdC10LvRjNC90YvQuSDRhNCw0LnQu9C+0LLRi9C5INC80LXQvdC10LTQttC10YAg0LTQ
u9GPIFMzIENlcGgg0YEg0L/QvtC00LTQtdGA0LbQutC+0Lkg0LzQvdC+0LbQtdGB0YLQstC10L3Q
vdGL0YUgZW5kcG9pbnRzCiIiIgoKaW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHJlCmltcG9y
dCBmbm1hdGNoCmltcG9ydCB1cndpZAppbXBvcnQgYm90bzMKaW1wb3J0IGJhc2U2NApmcm9tIGJv
dG9jb3JlLmV4Y2VwdGlvbnMgaW1wb3J0IENsaWVudEVycm9yCmZyb20gYm90b2NvcmUuY29uZmln
IGltcG9ydCBDb25maWcKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IHRlbXBm
aWxlCmltcG9ydCBzaHV0aWwKaW1wb3J0IGpzb24KaW1wb3J0IHRocmVhZGluZwppbXBvcnQgdGlt
ZQppbXBvcnQgcGxhdGZvcm0KCmltcG9ydCBhcmdwYXJzZQppbXBvcnQgZ2V0cGFzcwppbXBvcnQg
cmVxdWVzdHMgICMg0JTQu9GPIFZhdWx0ICjQvdGD0LbQtdC9IHBpcCBpbnN0YWxsIHJlcXVlc3Rz
LCDQvtCx0YvRh9C90L4g0LXRgdGC0Ywg0LLQtdC30LTQtSkKIyDQlNC70Y8g0YjQuNGE0YDQvtCy
0LDQvdC40Y8gKNC90YPQttC10L0gcGlwIGluc3RhbGwgY3J5cHRvZ3JhcGh5KQp0cnk6CiAgICBm
cm9tIGNyeXB0b2dyYXBoeS5mZXJuZXQgaW1wb3J0IEZlcm5ldAogICAgZnJvbSBjcnlwdG9ncmFw
aHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGhhc2hlcwogICAgZnJvbSBjcnlwdG9ncmFwaHku
aGF6bWF0LnByaW1pdGl2ZXMua2RmLnBia2RmMiBpbXBvcnQgUEJLREYySE1BQwogICAgZnJvbSBj
cnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzIGltcG9ydCBkZWZhdWx0X2JhY2tlbmQKICAgIEhB
U19DUllQVE8gPSBUcnVlCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIEhBU19DUllQVE8gPSBGYWxz
ZQppbXBvcnQgc29ja2V0CmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCB1cmxwYXJzZQojIGltcG9y
dCBmdW5jdG9vbHMKZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgT3JkZXJlZERpY3QKCl9fVkVSU0lP
Tl9fID0gIjEuOS4wIgpfX0FVVEhPUl9fID0gItCi0LDRgNCw0YHQvtCyINCU0LzQuNGC0YDQuNC5
IgoKCmNsYXNzIEJvb2ttYXJrc0RpYWxvZyh1cndpZC5XaWRnZXRXcmFwKToKICAgIGRlZiBfX2lu
aXRfXyhzZWxmLCBib29rbWFya3MsIGNhbGxiYWNrLCByZW1vdmVfY2FsbGJhY2s9Tm9uZSk6CiAg
ICAgICAgc2VsZi5jYWxsYmFjayA9IGNhbGxiYWNrCiAgICAgICAgc2VsZi5yZW1vdmVfY2FsbGJh
Y2sgPSByZW1vdmVfY2FsbGJhY2sKICAgICAgICBzZWxmLmJvb2ttYXJrcyA9IGJvb2ttYXJrcwoK
ICAgICAgICBzZWxmLmJvZHkgPSB1cndpZC5TaW1wbGVGb2N1c0xpc3RXYWxrZXIoW10pCiAgICAg
ICAgc2VsZi5fcG9wdWxhdGVfbGlzdCgpCgogICAgICAgIHNlbGYubGlzdGJveCA9IHVyd2lkLkxp
c3RCb3goc2VsZi5ib2R5KQogICAgICAgIGRvd25fdGV4dCA9IHVyd2lkLlRleHQoIkVudGVyOiBj
aG9vc2UgYm9va21hcmsgfCBkZWwgLSByZW1vdmUgYm9va21hcmsgfCBlc2MgLSBleGl0IikKCiAg
ICAgICAgY2xvc2VfYnRuID0gdXJ3aWQuQnV0dG9uKCJDbG9zZSIpCiAgICAgICAgdXJ3aWQuY29u
bmVjdF9zaWduYWwoY2xvc2VfYnRuLCAnY2xpY2snLCBzZWxmLm9uX2NhbmNlbCkKCiAgICAgICAg
IyDQmtC+0LzQv9C+0L3QvtCy0LrQsCDQutC90L7Qv9C+0LoKICAgICAgICBidXR0b25zX2NvbCA9
IHVyd2lkLkNvbHVtbnMoWwogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycp
KSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcChjbG9zZV9idG4sICdidXR0b24n
LCBmb2N1c19tYXA9J2J1dHRvbl9mb2N1cycpKSwKICAgICAgICAgICAgKCd3ZWlnaHQnLCAxLCB1
cndpZC5UZXh0KCcnKSksCiAgICAgICAgXSwgZGl2aWRlY2hhcnM9MCkKCiAgICAgICAgbGF5b3V0
ID0gdXJ3aWQuUGlsZShbCiAgICAgICAgICAgICgnd2VpZ2h0JywgMSwgc2VsZi5saXN0Ym94KSwK
ICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAgICAgKCdwYWNr
JywgYnV0dG9uc19jb2wpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAog
ICAgICAgICAgICAoJ3BhY2snLCBkb3duX3RleHQpLAogICAgICAgIF0pCgogICAgICAgIGNvbnRl
bnRfYmx1ZSA9IHVyd2lkLkF0dHJNYXAobGF5b3V0LCAnYm9keScpCiAgICAgICAgc2VsZi5mcmFt
ZSA9IHVyd2lkLkxpbmVCb3goY29udGVudF9ibHVlLCB0aXRsZT0iQm9va21hcmtzIikKICAgICAg
ICBzdXBlcigpLl9faW5pdF9fKHVyd2lkLkF0dHJNYXAoc2VsZi5mcmFtZSwgJ2JvZHknKSkKCiAg
ICBkZWYgX3BvcHVsYXRlX2xpc3Qoc2VsZik6CiAgICAgICAgc2VsZi5ib2R5LmNsZWFyKCkKICAg
ICAgICBmb3IgYm0gaW4gc2VsZi5ib29rbWFya3M6CiAgICAgICAgICAgIGlmIGJtWyd0eXBlJ10g
PT0gJ2ZzJzoKICAgICAgICAgICAgICAgIGRlc2MgPSBmIltGU10iCiAgICAgICAgICAgIGVsc2U6
CiAgICAgICAgICAgICAgICBkZXNjID0gZiJbUzNdIgoKICAgICAgICAgICAgYnRuX2xhYmVsID0g
ZiJ7ZGVzY306IHtibVsnbmFtZSddfSIKICAgICAgICAgICAgYnRuID0gdXJ3aWQuQnV0dG9uKGJ0
bl9sYWJlbCkKCiAgICAgICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFsKGJ0biwgJ2NsaWNrJywg
bGFtYmRhIGIsIGRhdGE9Ym06IHNlbGYub25fYm9va21hcmtfY2xpY2soZGF0YSkpCiAgICAgICAg
ICAgIHNlbGYuYm9keS5hcHBlbmQodXJ3aWQuQXR0ck1hcChidG4sICdib2R5JywgZm9jdXNfbWFw
PSdidXR0b25fZm9jdXMnKSkKCiAgICBkZWYgb25fYm9va21hcmtfY2xpY2soc2VsZiwgYm1fZGF0
YSk6CiAgICAgICAgc2VsZi5jYWxsYmFjayhibV9kYXRhKQoKICAgIGRlZiBvbl9jYW5jZWwoc2Vs
ZiwgYnRuPU5vbmUpOgogICAgICAgIHNlbGYuY2FsbGJhY2soTm9uZSkKCiAgICBkZWYga2V5cHJl
c3Moc2VsZiwgc2l6ZSwga2V5KToKICAgICAgICBpZiBrZXkgPT0gJ2RlbGV0ZSc6CiAgICAgICAg
ICAgIHBpbGUgPSBzZWxmLmZyYW1lLm9yaWdpbmFsX3dpZGdldC5vcmlnaW5hbF93aWRnZXQKICAg
ICAgICAgICAgaWYgcGlsZS5mb2N1c19wb3NpdGlvbiA9PSAwOgogICAgICAgICAgICAgICAgZm9j
dXNfd2lkZ2V0LCBmb2N1c19pZHggPSBzZWxmLmxpc3Rib3guZ2V0X2ZvY3VzKCkKICAgICAgICAg
ICAgICAgIGlmIGZvY3VzX3dpZGdldCBhbmQgc2VsZi5yZW1vdmVfY2FsbGJhY2s6CiAgICAgICAg
ICAgICAgICAgICAgc2VsZi5yZW1vdmVfY2FsbGJhY2soZm9jdXNfaWR4KQogICAgICAgICAgICBy
ZXR1cm4gTm9uZQoKICAgICAgICBpZiBrZXkgPT0gJ2VzYyc6CiAgICAgICAgICAgIHNlbGYub25f
Y2FuY2VsKCkKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICByZXR1cm4gc3VwZXIoKS5r
ZXlwcmVzcyhzaXplLCBrZXkpCgoKY2xhc3MgQm9va21hcmtzTWFuYWdlcjoKICAgIGRlZiBfX2lu
aXRfXyhzZWxmLCBmaWxlcGF0aD0iYm9va21hcmtzLmpzb24iKToKICAgICAgICBzZWxmLmZpbGVw
YXRoID0gZmlsZXBhdGgKICAgICAgICBzZWxmLmJvb2ttYXJrcyA9IHNlbGYubG9hZCgpCgogICAg
ZGVmIGxvYWQoc2VsZik6CiAgICAgICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKHNlbGYuZmlsZXBh
dGgpOgogICAgICAgICAgICByZXR1cm4gW10KICAgICAgICB0cnk6CiAgICAgICAgICAgIHdpdGgg
b3BlbihzZWxmLmZpbGVwYXRoLCAncicsIGVuY29kaW5nPSd1dGYtOCcpIGFzIGY6CiAgICAgICAg
ICAgICAgICByZXR1cm4ganNvbi5sb2FkKGYpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBy
ZXR1cm4gW10KCiAgICBkZWYgc2F2ZShzZWxmKToKICAgICAgICB3aXRoIG9wZW4oc2VsZi5maWxl
cGF0aCwgJ3cnLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmOgogICAgICAgICAgICBqc29uLmR1bXAo
c2VsZi5ib29rbWFya3MsIGYsIGluZGVudD0yKQoKICAgIGRlZiBhZGQoc2VsZiwgbmFtZSwgcGFu
ZWxfaW5mbyk6CiAgICAgICAgIiIiCiAgICAgICAgcGFuZWxfaW5mbzogZGljdCDRgSDQutC70Y7R
h9Cw0LzQuCAndHlwZScsICdwYXRoJyAo0LTQu9GPIGZzKSwKICAgICAgICAgICAgICAgICAgICAn
ZW5kcG9pbnQnLCAnYnVja2V0JywgJ3ByZWZpeCcgKNC00LvRjyBzMykKICAgICAgICAiIiIKICAg
ICAgICBzZWxmLmJvb2ttYXJrcy5hcHBlbmQoewogICAgICAgICAgICAibmFtZSI6IG5hbWUsCiAg
ICAgICAgICAgICoqcGFuZWxfaW5mbwogICAgICAgIH0pCiAgICAgICAgc2VsZi5zYXZlKCkKCiAg
ICBkZWYgcmVtb3ZlKHNlbGYsIGluZGV4KToKICAgICAgICBpZiAwIDw9IGluZGV4IDwgbGVuKHNl
bGYuYm9va21hcmtzKToKICAgICAgICAgICAgc2VsZi5ib29rbWFya3MucG9wKGluZGV4KQogICAg
ICAgICAgICBzZWxmLnNhdmUoKQoKZGVmIGNoZWNrX3MzX2VuZHBvaW50X2Nvbm5lY3Rpdml0eShl
bmRwb2ludF91cmwsIHRpbWVvdXQ9Mik6CiAgICAiIiIKICAgINCR0YvRgdGC0YDQsNGPINC/0YDQ
vtCy0LXRgNC60LAg0LTQvtGB0YLRg9C/0L3QvtGB0YLQuCBTMyBlbmRwb2ludC4KICAgIEFyZ3M6
CiAgICAgICAgZW5kcG9pbnRfdXJsOiBVUkwg0Y3QvdC00L/QvtC40L3RgtCwICjQvdCw0L/RgNC4
0LzQtdGALCAnaHR0cDovLzEwLjAuMC4xOjc0ODAnKQogICAgICAgIHRpbWVvdXQ6INGC0LDQudC8
0LDRg9GCINC/0L7QtNC60LvRjtGH0LXQvdC40Y8g0LIg0YHQtdC60YPQvdC00LDRhQogICAgUmV0
dXJuczoKICAgICAgICB0dXBsZTogKHN1Y2Nlc3M6IGJvb2wsIGVycm9yX21lc3NhZ2U6IHN0ciBv
ciBOb25lKQogICAgIiIiCiAgICB0cnk6CiAgICAgICAgcGFyc2VkID0gdXJscGFyc2UoZW5kcG9p
bnRfdXJsKQogICAgICAgIGhvc3QgPSBwYXJzZWQuaG9zdG5hbWUKICAgICAgICBwb3J0ID0gcGFy
c2VkLnBvcnQKCiAgICAgICAgIyDQntC/0YDQtdC00LXQu9GP0LXQvCDQv9C+0YDRgiDQv9C+INGD
0LzQvtC70YfQsNC90LjRjgogICAgICAgIGlmIHBvcnQgaXMgTm9uZToKICAgICAgICAgICAgcG9y
dCA9IDQ0MyBpZiBwYXJzZWQuc2NoZW1lID09ICdodHRwcycgZWxzZSA4MAoKICAgICAgICAjIFRD
UCDQv9GA0L7QstC10YDQutCwINC/0L7QtNC60LvRjtGH0LXQvdC40Y8KICAgICAgICBzb2NrID0g
c29ja2V0LnNvY2tldChzb2NrZXQuQUZfSU5FVCwgc29ja2V0LlNPQ0tfU1RSRUFNKQogICAgICAg
IHNvY2suc2V0dGltZW91dCh0aW1lb3V0KQoKICAgICAgICByZXN1bHQgPSBzb2NrLmNvbm5lY3Rf
ZXgoKGhvc3QsIHBvcnQpKQogICAgICAgIHNvY2suY2xvc2UoKQoKICAgICAgICBpZiByZXN1bHQg
PT0gMDoKICAgICAgICAgICAgcmV0dXJuIChUcnVlLCBOb25lKQogICAgICAgIGVsc2U6CiAgICAg
ICAgICAgIHJldHVybiAoRmFsc2UsIGYiQ2Fubm90IGNvbm5lY3QgdG8ge2hvc3R9Ontwb3J0fSIp
CgogICAgZXhjZXB0IHNvY2tldC5nYWllcnJvcjoKICAgICAgICByZXR1cm4gKEZhbHNlLCBmIkNh
bm5vdCByZXNvbHZlIGhvc3RuYW1lOiB7cGFyc2VkLmhvc3RuYW1lfSIpCiAgICBleGNlcHQgc29j
a2V0LnRpbWVvdXQ6CiAgICAgICAgcmV0dXJuIChGYWxzZSwgZiJDb25uZWN0aW9uIHRpbWVvdXQg
dG8ge3BhcnNlZC5ob3N0bmFtZX06e3BvcnR9IikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToK
ICAgICAgICByZXR1cm4gKEZhbHNlLCBmIkNvbm5lY3Rpb24gZXJyb3I6IHtzdHIoZSl9IikKCmRl
ZiBnZXRfZm9jdXNfYnV0dG9uKHcpOgogICAgIyDQoNCw0LfQstC+0YDQsNGH0LjQstCw0LXQvCDQ
tNC+INGC0LXQu9CwIChQaWxlKQogICAgaWYgaXNpbnN0YW5jZSh3LCB1cndpZC5BdHRyTWFwKToK
ICAgICAgICB3ID0gdy5vcmlnaW5hbF93aWRnZXQgICMgTGluZUJveAogICAgaWYgaXNpbnN0YW5j
ZSh3LCB1cndpZC5MaW5lQm94KToKICAgICAgICB3ID0gdy5vcmlnaW5hbF93aWRnZXQgICMgRmls
bGVyCiAgICBpZiBpc2luc3RhbmNlKHcsIHVyd2lkLkZpbGxlcik6CiAgICAgICAgdyA9IHcuYm9k
eSAgIyBQaWxlCgogICAgIyDQldGB0LvQuCDRjdGC0L4gUGlsZSDigJQg0L/RgNC+0LHRg9C10Lwg
0L/QvtC90Y/RgtGMLCDQs9C00LUg0YTQvtC60YPRgQogICAgaWYgaXNpbnN0YW5jZSh3LCB1cndp
ZC5QaWxlKToKICAgICAgICBmb2N1c19yZXN1bHQgPSB3LmdldF9mb2N1cygpCiAgICAgICAgIyDQ
kiDRgNCw0LfQvdGL0YUg0LLQtdGA0YHQuNGP0YUgdXJ3aWQg0Y3RgtC+INC70LjQsdC+ICh3aWRn
ZXQsIGluZGV4KSwg0LvQuNCx0L4g0L/RgNC+0YHRgtC+IHdpZGdldAogICAgICAgIGlmIGlzaW5z
dGFuY2UoZm9jdXNfcmVzdWx0LCB0dXBsZSk6CiAgICAgICAgICAgIGZvY3VzZWRfd2lkZ2V0ID0g
Zm9jdXNfcmVzdWx0WzBdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZm9jdXNlZF93aWRnZXQg
PSBmb2N1c19yZXN1bHQKCiAgICAgICAgIyDQkiDRgdGC0YDQvtC60LUg0YEg0LrQvdC+0L/QutCw
0LzQuCDRgyDQvdCw0YEgQ29sdW1ucwogICAgICAgIGlmIGlzaW5zdGFuY2UoZm9jdXNlZF93aWRn
ZXQsIHVyd2lkLkNvbHVtbnMpOgogICAgICAgICAgICBjb2xfZm9jdXMgPSBmb2N1c2VkX3dpZGdl
dC5nZXRfZm9jdXMoKQogICAgICAgICAgICAjINCQ0L3QsNC70L7Qs9C40YfQvdC+OiDQu9C40LHQ
viAod2lkZ2V0LCBpbmRleCksINC70LjQsdC+IHdpZGdldAogICAgICAgICAgICBpZiBpc2luc3Rh
bmNlKGNvbF9mb2N1cywgdHVwbGUpOgogICAgICAgICAgICAgICAgZm9jdXNfdyA9IGNvbF9mb2N1
c1swXQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZm9jdXNfdyA9IGNvbF9mb2N1
cwoKICAgICAgICAgICAgIyBmb2N1c193INC+0LHRi9GH0L3QviBBdHRyTWFwKGJ1dHRvbiwgJ2J1
dHRvbicsIGZvY3VzX21hcD0uLi4pCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZm9jdXNfdywg
dXJ3aWQuQXR0ck1hcCk6CiAgICAgICAgICAgICAgICBidG4gPSBmb2N1c193Lm9yaWdpbmFsX3dp
ZGdldAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYnRuID0gZm9jdXNfdwogICAg
ICAgICAgICByZXR1cm4gYnRuCiAgICByZXR1cm4gTm9uZQoKCmNsYXNzIFMzQ29uZmlnOgogICAg
IiIiCiAgICDQo9C/0YDQsNCy0LvQtdC90LjQtSDQutC+0L3RhNC40LPRg9GA0LDRhtC40LXQuSBT
MyBlbmRwb2ludHMuCiAgICDQn9C+0LTQtNC10YDQttC40LLQsNC10YIgMyDRgNC10LbQuNC80LA6
CiAgICAxLiBQbGFpbnRleHQgSlNPTiAo0YTQsNC50LspCiAgICAyLiBFbmNyeXB0ZWQgKNGE0LDQ
udC7ICsg0L/QsNGA0L7Qu9GMKQogICAgMy4gSGFzaGlDb3JwIFZhdWx0IChBUEkpCiAgICAiIiIK
ICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhcmdzKToKICAgICAgICBzZWxmLmVuZHBvaW50cyA9IFtd
CiAgICAgICAgc2VsZi5hcmdzID0gYXJncwogICAgICAgIHNlbGYubG9hZF9jb25maWcoKQoKICAg
IGRlZiBfZXhpdF9lcnJvcihzZWxmLCBtZXNzYWdlKToKICAgICAgICAiIiLQktGL0LLQvtC0INC+
0YjQuNCx0LrQuCDQuCDQt9Cw0LLQtdGA0YjQtdC90LjQtSDQv9GA0L7Qs9GA0LDQvNC80YsiIiIK
ICAgICAgICBwcmludChmIlxuQ1JJVElDQUwgRVJST1I6IHttZXNzYWdlfSIpCiAgICAgICAgc3lz
LmV4aXQoMSkKCiAgICBkZWYgbG9hZF9jb25maWcoc2VsZik6CiAgICAgICAgIiIi0JzQsNGA0YjR
gNGD0YLQuNC30LDRhtC40Y8g0LfQsNCz0YDRg9C30LrQuCDQsiDQt9Cw0LLQuNGB0LjQvNC+0YHR
gtC4INC+0YIg0LDRgNCz0YPQvNC10L3RgtC+0LIiIiIKICAgICAgICBpZiBzZWxmLmFyZ3MudmF1
bHRfdXJsOgogICAgICAgICAgICBzZWxmLl9sb2FkX2Zyb21fdmF1bHQoKQogICAgICAgIGVsaWYg
c2VsZi5hcmdzLmVuY3J5cHRlZF9jb25maWc6CiAgICAgICAgICAgIHNlbGYuX2xvYWRfZnJvbV9l
bmNyeXB0ZWRfZmlsZSgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5fbG9hZF9mcm9t
X3BsYWluX2ZpbGUoKQoKICAgICMgLS0tINCg0JXQltCY0JwgMTog0J7QsdGL0YfQvdGL0Lkg0YTQ
sNC50LsgLS0tCiAgICBkZWYgX2xvYWRfZnJvbV9wbGFpbl9maWxlKHNlbGYpOgogICAgICAgIGNv
bmZpZ19maWxlID0gc2VsZi5hcmdzLmNvbmZpZwogICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0
cyhjb25maWdfZmlsZSk6CiAgICAgICAgICAgIHNlbGYuX2V4aXRfZXJyb3IoZiJDb25maWcgZmls
ZSAne2NvbmZpZ19maWxlfScgbm90IGZvdW5kLlxuIgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICJSdW4gd2l0aCBkZWZhdWx0IHNldHRpbmdzIG9yIGNyZWF0ZSBjb25maWcgZmlsZSBtYW51
YWxseS4iKQogICAgICAgIAogICAgICAgIHRyeToKICAgICAgICAgICAgd2l0aCBvcGVuKGNvbmZp
Z19maWxlLCAncicpIGFzIGY6CiAgICAgICAgICAgICAgICBkYXRhID0ganNvbi5sb2FkKGYpCiAg
ICAgICAgICAgICAgICBzZWxmLmVuZHBvaW50cyA9IGRhdGEuZ2V0KCdlbmRwb2ludHMnLCBbXSkK
ICAgICAgICBleGNlcHQganNvbi5KU09ORGVjb2RlRXJyb3IgYXMgZToKICAgICAgICAgICAgc2Vs
Zi5fZXhpdF9lcnJvcihmIlN5bnRheCBlcnJvciBpbiAne2NvbmZpZ19maWxlfSc6IHtlfSIpCiAg
ICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLl9leGl0X2Vycm9y
KGYiQ2Fubm90IHJlYWQgY29uZmlnICd7Y29uZmlnX2ZpbGV9Jzoge2V9IikKCiAgICAgICAgaWYg
bm90IHNlbGYuZW5kcG9pbnRzOgogICAgICAgICAgICBzZWxmLl9leGl0X2Vycm9yKCJDb25maWcg
ZmlsZSBpcyBlbXB0eSBvciBoYXMgbm8gJ2VuZHBvaW50cycgbGlzdC4iKQoKICAgICMgLS0tINCg
0JXQltCY0JwgMjog0JfQsNGI0LjRhNGA0L7QstCw0L3QvdGL0Lkg0YTQsNC50LsgLS0tCiAgICBk
ZWYgX2xvYWRfZnJvbV9lbmNyeXB0ZWRfZmlsZShzZWxmKToKICAgICAgICBpZiBub3QgSEFTX0NS
WVBUTzoKICAgICAgICAgICAgc2VsZi5fZXhpdF9lcnJvcigiTW9kdWxlICdjcnlwdG9ncmFwaHkn
IGlzIG1pc3NpbmcuIEluc3RhbGwgaXQ6IHBpcCBpbnN0YWxsIGNyeXB0b2dyYXBoeSIpCiAgICAg
ICAgICAgIAogICAgICAgIGVuY19maWxlID0gc2VsZi5hcmdzLmVuY3J5cHRlZF9jb25maWcKICAg
ICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMoZW5jX2ZpbGUpOgogICAgICAgICAgICBzZWxmLl9l
eGl0X2Vycm9yKGYiRW5jcnlwdGVkIGNvbmZpZyAne2VuY19maWxlfScgbm90IGZvdW5kLiIpCgog
ICAgICAgIHRyeToKICAgICAgICAgICAgIyDQp9C40YLQsNC10Lwg0JLQodCVINCx0LDQudGC0YsK
ICAgICAgICAgICAgd2l0aCBvcGVuKGVuY19maWxlLCAncmInKSBhcyBmOgogICAgICAgICAgICAg
ICAgZmlsZV9jb250ZW50ID0gZi5yZWFkKCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGxl
bihmaWxlX2NvbnRlbnQpIDwgNDA6ICAjIDE2IChzYWx0KSArIH4yMCAobWluIGZlcm5ldCBvdmVy
aGVhZCkKICAgICAgICAgICAgICAgIHNlbGYuX2V4aXRfZXJyb3IoIkVuY3J5cHRlZCBmaWxlIGlz
IHRvbyBzaG9ydC9jb3JydXB0ZWQuIikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICBzYWx0
ID0gZmlsZV9jb250ZW50WzoxNl0KICAgICAgICAgICAgZW5jcnlwdGVkX2RhdGEgPSBmaWxlX2Nv
bnRlbnRbMTY6XQogICAgICAgICAgICAKICAgICAgICAgICAgIyDQktCQ0JbQndCeOiBnZXRwYXNz
INC80L7QttC10YIg0LLQtdGA0L3Rg9GC0Ywg0YHRgtGA0L7QutGDINGBINC/0YDQvtCx0LXQu9Cw
0LzQuCDQsiDQutC+0L3RhtC1INC90LAg0L3QtdC60L7RgtC+0YDRi9GFINGC0LXRgNC80LjQvdCw
0LvQsNGFCiAgICAgICAgICAgIHByaW50KGYiUmVhZGluZyBlbmNyeXB0ZWQgY29uZmlnOiB7ZW5j
X2ZpbGV9IikKICAgICAgICAgICAgcGFzc3dvcmQgPSBnZXRwYXNzLmdldHBhc3MoIkVudGVyIGRl
Y3J5cHRpb24gcGFzc3dvcmQ6ICIpCiAgICAgICAgICAgIAogICAgICAgICAgICAjINCj0LHQuNGA
0LDQtdC8INC/0YDQvtCx0LXQu9GM0L3Ri9C1INGB0LjQvNCy0L7Qu9GLINGC0L7Qu9GM0LrQviDQ
tdGB0LvQuCDRjdGC0L4g0YHQu9GD0YfQsNC50L3QviDQv9C+0L/QsNCy0YjQuNC5IFxyINC40LvQ
uCBcbiwgCiAgICAgICAgICAgICMg0L3QviDQtNC70Y8g0LHQtdC30L7Qv9Cw0YHQvdC+0YHRgtC4
INC/0LDRgNC+0LvRjyDQu9GD0YfRiNC1INCx0YDQsNGC0Ywg0LrQsNC6INC10YHRgtGMLgogICAg
ICAgICAgICAjINCV0YHQu9C4INCy0Ysg0YHQvtC30LTQsNCy0LDQu9C4INC/0LDRgNC+0LvRjCDR
gSDQv9GA0L7QsdC10LvQvtC8INCyINC60L7QvdGG0LUgLSDQvtC9INCy0LDQttC10L0hCiAgICAg
ICAgICAgIAogICAgICAgICAgICAjINCT0LXQvdC10YDQuNGA0YPQtdC8INC60LvRjtGHICjQv9Cw
0YDQsNC80LXRgtGA0Ysg0JTQntCb0JbQndCrINGB0L7QstC/0LDQtNCw0YLRjCDRgSBlbmNyeXB0
b3IucHkpCiAgICAgICAgICAgIGtkZiA9IFBCS0RGMkhNQUMoCiAgICAgICAgICAgICAgICBhbGdv
cml0aG09aGFzaGVzLlNIQTI1NigpLAogICAgICAgICAgICAgICAgbGVuZ3RoPTMyLAogICAgICAg
ICAgICAgICAgc2FsdD1zYWx0LAogICAgICAgICAgICAgICAgaXRlcmF0aW9ucz0xMDAwMDAsCiAg
ICAgICAgICAgICAgICBiYWNrZW5kPWRlZmF1bHRfYmFja2VuZCgpIAogICAgICAgICAgICAgICAg
IyBiYWNrZW5kIGRlZmF1bHQgaXMgT0sKICAgICAgICAgICAgKQogICAgICAgICAgICBrZXkgPSBi
YXNlNjQudXJsc2FmZV9iNjRlbmNvZGUoa2RmLmRlcml2ZShwYXNzd29yZC5lbmNvZGUoJ3V0Zi04
JykpKQogICAgICAgICAgICAKICAgICAgICAgICAgZiA9IEZlcm5ldChrZXkpCiAgICAgICAgICAg
IAogICAgICAgICAgICAjINCf0YvRgtCw0LXQvNGB0Y8g0YDQsNGB0YjQuNGE0YDQvtCy0LDRgtGM
CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGRlY3J5cHRlZF9kYXRhID0gZi5kZWNy
eXB0KGVuY3J5cHRlZF9kYXRhKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAg
ICAgICAgICAgIyBGZXJuZXQg0LrQuNC00LDQtdGCIEludmFsaWRUb2tlbiDQtdGB0LvQuCDQv9Cw
0YDQvtC70Ywg0L3QtSDQv9C+0LTQvtGI0LXQuwogICAgICAgICAgICAgICAgc2VsZi5fZXhpdF9l
cnJvcigiRGVjcnlwdGlvbiBmYWlsZWQhIEludmFsaWQgcGFzc3dvcmQgb3IgY29ycnVwdGVkIGZp
bGUuIikKICAgICAgICAgICAgCiAgICAgICAgICAgICMg0JTQtdC60L7QtNC40YDRg9C10LwgSlNP
TgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBqc29uX3N0ciA9IGRlY3J5cHRlZF9k
YXRhLmRlY29kZSgndXRmLTgnKQogICAgICAgICAgICAgICAgZGF0YSA9IGpzb24ubG9hZHMoanNv
bl9zdHIpCiAgICAgICAgICAgICAgICBzZWxmLmVuZHBvaW50cyA9IGRhdGEuZ2V0KCdlbmRwb2lu
dHMnLCBbXSkKICAgICAgICAgICAgZXhjZXB0IGpzb24uSlNPTkRlY29kZUVycm9yOgogICAgICAg
ICAgICAgICAgc2VsZi5fZXhpdF9lcnJvcigiRGVjcnlwdGVkIGRhdGEgaXMgbm90IHZhbGlkIEpT
T04uIENoZWNrIHNvdXJjZSBmaWxlIGludGVncml0eS4iKQogICAgICAgICAgICAgICAgCiAgICAg
ICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAjINCb0L7QstC40Lwg0LvRjtCx
0YvQtSDQtNGA0YPQs9C40LUg0L3QtdC+0LbQuNC00LDQvdC90YvQtSDQvtGI0LjQsdC60LgKICAg
ICAgICAgICAgc2VsZi5fZXhpdF9lcnJvcihmIlVuZXhwZWN0ZWQgZXJyb3IgZHVyaW5nIGRlY3J5
cHRpb246IHtzdHIoZSl9IikKCiAgICAjIC0tLSDQoNCV0JbQmNCcIDM6IEhhc2hpQ29ycCBWYXVs
dCAtLS0KICAgIGRlZiBfbG9hZF9mcm9tX3ZhdWx0KHNlbGYpOgogICAgICAgIHZhdWx0X3VybCA9
IHNlbGYuYXJncy52YXVsdF91cmwucnN0cmlwKCcvJykKICAgICAgICB2YXVsdF9wYXRoID0gc2Vs
Zi5hcmdzLnZhdWx0X3BhdGgKICAgICAgICB2YXVsdF91c2VyID0gc2VsZi5hcmdzLnZhdWx0X3Vz
ZXIKCiAgICAgICAgaWYgbm90IHZhdWx0X3VzZXI6CiAgICAgICAgICAgIHByaW50KGYiQ29ubmVj
dGluZyB0byBWYXVsdDoge3ZhdWx0X3VybH0iKQogICAgICAgICAgICB2YXVsdF91c2VyID0gaW5w
dXQoIlZhdWx0IFVzZXJuYW1lOiAiKS5zdHJpcCgpCgogICAgICAgIHZhdWx0X3Bhc3MgPSBzZWxm
LmFyZ3MudmF1bHRfcGFzcwogICAgICAgIGlmIG5vdCB2YXVsdF9wYXNzOgogICAgICAgICAgICB2
YXVsdF9wYXNzID0gZ2V0cGFzcy5nZXRwYXNzKCJWYXVsdCBQYXNzd29yZDogIikKCiAgICAgICAg
dHJ5OgogICAgICAgICAgICAjIDEuINCQ0LLRgtC+0YDQuNC30LDRhtC40Y8gKFVzZXJwYXNzIGF1
dGggbWV0aG9kKQogICAgICAgICAgICBsb2dpbl91cmwgPSBmInt2YXVsdF91cmx9L3YxL2F1dGgv
dXNlcnBhc3MvbG9naW4ve3ZhdWx0X3VzZXJ9IgogICAgICAgICAgICByZXNwID0gcmVxdWVzdHMu
cG9zdChsb2dpbl91cmwsIGpzb249eyJwYXNzd29yZCI6IHZhdWx0X3Bhc3N9LCB0aW1lb3V0PTUp
CgogICAgICAgICAgICBpZiByZXNwLnN0YXR1c19jb2RlICE9IDIwMDoKICAgICAgICAgICAgICAg
IHNlbGYuX2V4aXRfZXJyb3IoZiJWYXVsdCBsb2dpbiBmYWlsZWQ6IHtyZXNwLnRleHR9IikKICAg
ICAgICAgICAgICAgIAogICAgICAgICAgICBjbGllbnRfdG9rZW4gPSByZXNwLmpzb24oKVsnYXV0
aCddWydjbGllbnRfdG9rZW4nXQogICAgICAgICAgICAKICAgICAgICAgICAgIyAyLiDQp9GC0LXQ
vdC40LUg0YHQtdC60YDQtdGC0LAKICAgICAgICAgICAgIyDQn9C+0LTQtNC10YDQttC60LAgS1Yg
VmVyc2lvbiAyICjQv9GD0YLRjCDQtNC+0LvQttC10L0g0YHQvtC00LXRgNC20LDRgtGMIC9kYXRh
LyDQuNC70Lgg0LzRiyDRgdCw0LzQuCDQtdCz0L4g0LTQvtCx0LDQstC40Lw/KQogICAgICAgICAg
ICAjINCU0LvRjyDQv9GA0L7RgdGC0L7RgtGLINGB0YfQuNGC0LDQtdC8LCDRh9GC0L4g0L/QvtC7
0YzQt9C+0LLQsNGC0LXQu9GMINC00LDQtdGCINC/0L7Qu9C90YvQuSDQv9GD0YLRjCDQuiBBUEks
IAogICAgICAgICAgICAjINC90L4g0YfQsNGB0YLQviDQsiBLViB2MiDQv9GD0YLRjCAnc2VjcmV0
L215Y29uZicg0L/RgNC10LLRgNCw0YnQsNC10YLRgdGPINCyICdzZWNyZXQvZGF0YS9teWNvbmYn
CiAgICAgICAgICAgIAogICAgICAgICAgICByZWFkX3VybCA9IGYie3ZhdWx0X3VybH0vdjEve3Zh
dWx0X3BhdGh9IgogICAgICAgICAgICBoZWFkZXJzID0geyJYLVZhdWx0LVRva2VuIjogY2xpZW50
X3Rva2VufQogICAgICAgICAgICAKICAgICAgICAgICAgcmVzcCA9IHJlcXVlc3RzLmdldChyZWFk
X3VybCwgaGVhZGVycz1oZWFkZXJzLCB0aW1lb3V0PTUpCiAgICAgICAgICAgIAogICAgICAgICAg
ICBpZiByZXNwLnN0YXR1c19jb2RlICE9IDIwMDoKICAgICAgICAgICAgICAgIHNlbGYuX2V4aXRf
ZXJyb3IoZiJDYW5ub3QgcmVhZCBzZWNyZXQgJ3t2YXVsdF9wYXRofSc6IHtyZXNwLnN0YXR1c19j
b2RlfSB7cmVzcC50ZXh0fSIpCiAgICAgICAgICAgIAogICAgICAgICAgICBqc29uX3Jlc3AgPSBy
ZXNwLmpzb24oKQogICAgICAgICAgICAKICAgICAgICAgICAgIyDQn9GL0YLQsNC10LzRgdGPINC0
0L7RgdGC0LDRgtGMINC00LDQvdC90YvQtS4KICAgICAgICAgICAgIyBLViB2MjogZGF0YSAtPiBk
YXRhIC0+IGtleQogICAgICAgICAgICAjIEtWIHYxOiBkYXRhIC0+IGtleQogICAgICAgICAgICAK
ICAgICAgICAgICAgcGF5bG9hZCA9IHt9CiAgICAgICAgICAgIGlmICdkYXRhJyBpbiBqc29uX3Jl
c3A6CiAgICAgICAgICAgICAgICBpbm5lciA9IGpzb25fcmVzcFsnZGF0YSddCiAgICAgICAgICAg
ICAgICBpZiAnZGF0YScgaW4gaW5uZXIgYW5kIGlzaW5zdGFuY2UoaW5uZXJbJ2RhdGEnXSwgZGlj
dCk6CiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCA9IGlubmVyWydkYXRhJ10gICMgS1YgdjIg
c3RydWN0dXJlCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHBheWxv
YWQgPSBpbm5lciAgIyBLViB2MSBzdHJ1Y3R1cmUKICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgIHNlbGYuX2V4aXRfZXJyb3IoIlZhdWx0IHJlc3BvbnNlIGZvcm1hdCBub3QgcmVjb2du
aXplZCAobm8gJ2RhdGEnIGZpZWxkKS4iKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICMg
0JjRidC10Lwg0LrQu9GO0YcgJ3MzX2NvbmZpZ19qc29uJyDQuNC70Lgg0L/QsNGA0YHQuNC8INCy
0LXRgdGMIHBheWxvYWQg0LXRgdC70Lgg0Y3RgtC+INGD0LbQtSDRgdGC0YDRg9C60YLRg9GA0LAK
ICAgICAgICAgICAgaWYgJ2VuZHBvaW50cycgaW4gcGF5bG9hZDoKICAgICAgICAgICAgICAgICMg
0KHRgtGA0YPQutGC0YPRgNCwINC70LXQttC40YIg0L/RgNGP0LzQviDQsiDRgdC10LrRgNC10YLQ
tQogICAgICAgICAgICAgICAgc2VsZi5lbmRwb2ludHMgPSBwYXlsb2FkWydlbmRwb2ludHMnXQog
ICAgICAgICAgICBlbGlmICdjb250ZW50JyBpbiBwYXlsb2FkOgogICAgICAgICAgICAgICAgIyDQ
odGC0YDRg9C60YLRg9GA0LAg0LvQtdC20LjRgiDQsiDQv9C+0LvQtSAnY29udGVudCcg0YHRgtGA
0L7QutC+0Lkg0LjQu9C4INC+0LHRitC10LrRgtC+0LwKICAgICAgICAgICAgICAgIGNvbnRlbnQg
PSBwYXlsb2FkWydjb250ZW50J10KICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoY29udGVu
dCwgc3RyKToKICAgICAgICAgICAgICAgICAgICBzZWxmLmVuZHBvaW50cyA9IGpzb24ubG9hZHMo
Y29udGVudCkuZ2V0KCdlbmRwb2ludHMnLCBbXSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICAgICAgICAgc2VsZi5lbmRwb2ludHMgPSBjb250ZW50LmdldCgnZW5kcG9pbnRzJywg
W10pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjINCf0L7RgdC70LXQtNC90LjQ
uSDRiNCw0L3RgSAtINC80L7QttC10YIg0LLQtdGB0YwgcGF5bG9hZCDQuCDQtdGB0YLRjCDQutC+
0L3RhNC40LM/CiAgICAgICAgICAgICAgICBzZWxmLmVuZHBvaW50cyA9IHBheWxvYWQuZ2V0KCdl
bmRwb2ludHMnLCBbXSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICBpZiBub3Qgc2VsZi5l
bmRwb2ludHM6CiAgICAgICAgICAgICAgICBzZWxmLl9leGl0X2Vycm9yKGYiU2VjcmV0ICd7dmF1
bHRfcGF0aH0nIHJlYWQsIGJ1dCBubyAnZW5kcG9pbnRzJyBmb3VuZCBpbnNpZGUuIikKCiAgICAg
ICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuUmVxdWVzdEV4Y2VwdGlvbiBhcyBlOgogICAg
ICAgICAgICBzZWxmLl9leGl0X2Vycm9yKGYiTmV0d29yayBlcnJvciBjb25uZWN0aW5nIHRvIFZh
dWx0OiB7ZX0iKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2Vs
Zi5fZXhpdF9lcnJvcihmIlZhdWx0IGVycm9yOiB7ZX0iKQoKICAgIGRlZiBzYXZlX2NvbmZpZyhz
ZWxmKToKICAgICAgICAiIiLQodC+0YXRgNCw0L3QtdC90LjQtSDQvtGC0LrQu9GO0YfQtdC90L4g
0LIg0LHQtdC30L7Qv9Cw0YHQvdGL0YUg0YDQtdC20LjQvNCw0YUiIiIKICAgICAgICBpZiBzZWxm
LmFyZ3MudmF1bHRfdXJsIG9yIHNlbGYuYXJncy5lbmNyeXB0ZWRfY29uZmlnOgogICAgICAgICAg
ICAjINCSINC30LDRidC40YnQtdC90L3Ri9GFINGA0LXQttC40LzQsNGFINC80Ysg0L3QtSDRgdC+
0YXRgNCw0L3Rj9C10Lwg0LrQvtC90YTQuNCzINC+0LHRgNCw0YLQvdC+INC90LAg0LTQuNGB0Log
0LIgcGxhaW4gdGV4dAogICAgICAgICAgICByZXR1cm4KICAgICAgICAKICAgICAgICAjINCb0L7Q
s9C40LrQsCDQtNC70Y8gcGxhaW4gdGV4dCAo0LXRgdC70Lgg0L3Rg9C20L3QvikKICAgICAgICBw
YXNzIAoKICAgIGRlZiBnZXRfZW5kcG9pbnRzKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmVu
ZHBvaW50cwoKICAgIGRlZiBnZXRfZW5kcG9pbnQoc2VsZiwgbmFtZSk6CiAgICAgICAgZm9yIGVw
IGluIHNlbGYuZW5kcG9pbnRzOgogICAgICAgICAgICBpZiBlcFsnbmFtZSddID09IG5hbWU6CiAg
ICAgICAgICAgICAgICByZXR1cm4gZXAKICAgICAgICByZXR1cm4gTm9uZQoKCmNsYXNzIExSVUNh
Y2hlOgogICAgIiIi0J/RgNC+0YHRgtC+0LkgTFJVINC60LXRiCDQtNC70Y8g0YXRgNCw0L3QtdC9
0LjRjyDRgNC10LfRg9C70YzRgtCw0YLQvtCyINC30LDQv9GA0L7RgdC+0LIg0LogUzMiIiIKCiAg
ICBkZWYgX19pbml0X18oc2VsZiwgbWF4c2l6ZT0xMDAwKToKICAgICAgICBzZWxmLmNhY2hlID0g
T3JkZXJlZERpY3QoKQogICAgICAgIHNlbGYubWF4c2l6ZSA9IG1heHNpemUKCiAgICBkZWYgZ2V0
KHNlbGYsIGtleSk6CiAgICAgICAgaWYga2V5IG5vdCBpbiBzZWxmLmNhY2hlOgogICAgICAgICAg
ICByZXR1cm4gTm9uZQogICAgICAgIHNlbGYuY2FjaGUubW92ZV90b19lbmQoa2V5KQogICAgICAg
IHJldHVybiBzZWxmLmNhY2hlW2tleV0KCiAgICBkZWYgcHV0KHNlbGYsIGtleSwgdmFsdWUpOgog
ICAgICAgIGlmIGtleSBpbiBzZWxmLmNhY2hlOgogICAgICAgICAgICBzZWxmLmNhY2hlLm1vdmVf
dG9fZW5kKGtleSkKICAgICAgICBzZWxmLmNhY2hlW2tleV0gPSB2YWx1ZQogICAgICAgIGlmIGxl
bihzZWxmLmNhY2hlKSA+IHNlbGYubWF4c2l6ZToKICAgICAgICAgICAgc2VsZi5jYWNoZS5wb3Bp
dGVtKGxhc3Q9RmFsc2UpCgogICAgZGVmIGludmFsaWRhdGUoc2VsZiwgcGF0dGVybj1Ob25lKToK
ICAgICAgICAiIiLQmNC90LLQsNC70LjQtNCw0YbQuNGPINC60LXRiNCwINC/0L4g0L/QsNGC0YLQ
tdGA0L3RgyIiIgogICAgICAgIGlmIHBhdHRlcm4gaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5j
YWNoZS5jbGVhcigpCiAgICAgICAgZWxzZToKICAgICAgICAgICAga2V5c190b19yZW1vdmUgPSBb
ayBmb3IgayBpbiBzZWxmLmNhY2hlLmtleXMoKSBpZiBwYXR0ZXJuIGluIGtdCiAgICAgICAgICAg
IGZvciBrZXkgaW4ga2V5c190b19yZW1vdmU6CiAgICAgICAgICAgICAgICBkZWwgc2VsZi5jYWNo
ZVtrZXldCgoKY2xhc3MgUzNNYW5hZ2VyOgogICAgIiIi0JzQtdC90LXQtNC20LXRgCDQtNC70Y8g
0YDQsNCx0L7RgtGLINGBIFMzIENlcGgiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgZW5kcG9p
bnRfY29uZmlnKToKICAgICAgICBzZWxmLmVuZHBvaW50X25hbWUgPSBlbmRwb2ludF9jb25maWdb
J25hbWUnXQogICAgICAgIHNlbGYuZW5kcG9pbnRfdXJsID0gZW5kcG9pbnRfY29uZmlnWyd1cmwn
XQogICAgICAgIHNlbGYuYWNjZXNzX2tleSA9IGVuZHBvaW50X2NvbmZpZ1snYWNjZXNzX2tleSdd
CiAgICAgICAgc2VsZi5zZWNyZXRfa2V5ID0gZW5kcG9pbnRfY29uZmlnWydzZWNyZXRfa2V5J10K
ICAgICAgICBzZWxmLmlzX2Nvbm5lY3RlZCA9IEZhbHNlCiAgICAgICAgc2VsZi5jb25uZWN0aW9u
X2Vycm9yID0gTm9uZQogICAgICAgIHNlbGYudmVyc2lvbmluZ19zdGF0dXNfY2FjaGUgPSB7fQog
ICAgICAgIHNlbGYuczNfbmVlZHNfcmVmcmVzaCA9IFRydWUKCiAgICAgICAgc2VsZi5idWNrZXRf
bGlzdF9jYWNoZSA9IE5vbmUKICAgICAgICBzZWxmLmJ1Y2tldF9saXN0X2NhY2hlX3RzID0gTm9u
ZQoKICAgICAgICAjINCa0LXRiCDQtNC70Y8g0YHQv9C40YHQutC+0LIg0L7QsdGK0LXQutGC0L7Q
sgogICAgICAgIHNlbGYub2JqZWN0X2NhY2hlID0gTFJVQ2FjaGUobWF4c2l6ZT0xMDAwKQogICAg
ICAgIHNlbGYuYnVja2V0X2NhY2hlID0gTFJVQ2FjaGUobWF4c2l6ZT0xMCkKCiAgICAgICAgIyDQ
kdCr0KHQotCg0JDQryDQn9Cg0J7QktCV0KDQmtCQOiDQtNC+0YHRgtGD0L/QtdC9INC70LggZW5k
cG9pbnQg0L/QtdGA0LXQtCDRgdC+0LfQtNCw0L3QuNC10Lwg0LrQu9C40LXQvdGC0LAKICAgICAg
ICBjYW5fY29ubmVjdCwgZXJyb3JfbXNnID0gY2hlY2tfczNfZW5kcG9pbnRfY29ubmVjdGl2aXR5
KHNlbGYuZW5kcG9pbnRfdXJsLCB0aW1lb3V0PTIpCgogICAgICAgIGNhX2J1bmRsZSA9IGVuZHBv
aW50X2NvbmZpZy5nZXQoImNhX2J1bmRsZSIpCgogICAgICAgIGlmIG5vdCBjYW5fY29ubmVjdDoK
ICAgICAgICAgICAgc2VsZi5zM19jbGllbnQgPSBOb25lCiAgICAgICAgICAgIHNlbGYuY29ubmVj
dGlvbl9lcnJvciA9IGVycm9yX21zZwogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgdHJ5Ogog
ICAgICAgICAgICAjINCd0LDRgdGC0YDQvtC50LrQsCDQutC+0YDQvtGC0LrQuNGFINGC0LDQudC8
0LDRg9GC0L7QsiDQtNC70Y8gYm90bzMKICAgICAgICAgICAgY29uZmlnID0gQ29uZmlnKAogICAg
ICAgICAgICAgICAgY29ubmVjdF90aW1lb3V0PTMsCiAgICAgICAgICAgICAgICByZWFkX3RpbWVv
dXQ9MTAsCiAgICAgICAgICAgICAgICByZXRyaWVzPXsnbWF4X2F0dGVtcHRzJzogMX0gICMg0KLQ
vtC70YzQutC+IDEg0L/QvtC/0YvRgtC60LAKICAgICAgICAgICAgKQoKICAgICAgICAgICAgc2Vs
Zi5zM19jbGllbnQgPSBib3RvMy5jbGllbnQoCiAgICAgICAgICAgICAgICAnczMnLAogICAgICAg
ICAgICAgICAgZW5kcG9pbnRfdXJsPXNlbGYuZW5kcG9pbnRfdXJsLAogICAgICAgICAgICAgICAg
YXdzX2FjY2Vzc19rZXlfaWQ9c2VsZi5hY2Nlc3Nfa2V5LAogICAgICAgICAgICAgICAgYXdzX3Nl
Y3JldF9hY2Nlc3Nfa2V5PXNlbGYuc2VjcmV0X2tleSwKICAgICAgICAgICAgICAgIGNvbmZpZz1j
b25maWcsCiAgICAgICAgICAgICAgICB2ZXJpZnk9Y2FfYnVuZGxlIGlmIGNhX2J1bmRsZSBlbHNl
IFRydWUsCiAgICAgICAgICAgICkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAg
ICAgICAgIHNlbGYuczNfY2xpZW50ID0gTm9uZQogICAgICAgICAgICBzZWxmLmNvbm5lY3Rpb25f
ZXJyb3IgPSBzdHIoZSkKCiAgICBkZWYgX3JlYWRfYnVja2V0X3NlZWRzX2ZpbGUoc2VsZiwgZmls
ZXBhdGg9InMzX2J1Y2tldHMudHh0Iik6CiAgICAgICAgIyDQpNC+0YDQvNCw0YI6ICI8YnVja2V0
PiA8ZXBvY2g+IiDQuNC70Lgg0L/RgNC+0YHRgtC+ICI8YnVja2V0PiIKICAgICAgICAjINCa0L7Q
vNC80LXQvdGC0LDRgNC40Lg6INGB0YLRgNC+0LrQsCDQvdCw0YfQuNC90LDQtdGC0YHRjyDRgSAn
IycKICAgICAgICByZXN1bHQgPSB7fQogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgbm90IG9z
LnBhdGguZXhpc3RzKGZpbGVwYXRoKToKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQKICAg
ICAgICAgICAgd2l0aCBvcGVuKGZpbGVwYXRoLCAiciIsIGVuY29kaW5nPSJ1dGYtOCIsIGVycm9y
cz0iaWdub3JlIikgYXMgZjoKICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIGY6CiAgICAgICAg
ICAgICAgICAgICAgcyA9IGxpbmUuc3RyaXAoKQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBz
IG9yIHMuc3RhcnRzd2l0aCgiIyIpOgogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQog
ICAgICAgICAgICAgICAgICAgIHBhcnRzID0gcy5zcGxpdCgpCiAgICAgICAgICAgICAgICAgICAg
bmFtZSA9IHBhcnRzWzBdCiAgICAgICAgICAgICAgICAgICAgZXBvY2ggPSBOb25lCiAgICAgICAg
ICAgICAgICAgICAgaWYgbGVuKHBhcnRzKSA+PSAyOgogICAgICAgICAgICAgICAgICAgICAgICB0
cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcG9jaCA9IGludChwYXJ0c1sxXSkKICAg
ICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBlcG9jaCA9IE5vbmUKICAgICAgICAgICAgICAgICAgICByZXN1bHRbbmFtZV0g
PSBlcG9jaAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIHJldHVybiByZXN1
bHQKICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIF9idWNrZXRfcmVhZGFibGUoc2VsZiwg
YnVja2V0bmFtZSk6CiAgICAgICAgIyDQnNC40L3QuNC80LDQu9GM0L3QsNGPINC/0YDQvtCy0LXR
gNC60LAgItC80L7Qs9GDINGH0LjRgtCw0YLRjCDRgdC+0LTQtdGA0LbQuNC80L7QtSI6IGxpc3Rf
b2JqZWN0c192MihNYXhLZXlzPTEpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnMzX2Ns
aWVudC5saXN0X29iamVjdHNfdjIoQnVja2V0PWJ1Y2tldG5hbWUsIE1heEtleXM9MSkKICAgICAg
ICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICBy
ZXR1cm4gRmFsc2UKCiAgICBkZWYgX2dldF9idWNrZXRfb3duZXJfc3RyKHNlbGYsIGJ1Y2tldG5h
bWUpOgogICAgICAgICMg0J/Ri9GC0LDQtdC80YHRjyDQv9C+0LvRg9GH0LjRgtGMIG93bmVyICjQ
vNC+0LbQtdGCINGC0YDQtdCx0L7QstCw0YLRjCDQtNC+0L/QvtC70L3QuNGC0LXQu9GM0L3Ri9GF
INC/0YDQsNCyKQogICAgICAgIHRyeToKICAgICAgICAgICAgYWNsID0gc2VsZi5zM19jbGllbnQu
Z2V0X2J1Y2tldF9hY2woQnVja2V0PWJ1Y2tldG5hbWUpCiAgICAgICAgICAgIG93bmVyID0gYWNs
LmdldCgiT3duZXIiLCB7fSkgaWYgaXNpbnN0YW5jZShhY2wsIGRpY3QpIGVsc2Uge30KICAgICAg
ICAgICAgIyDQn9GL0YLQsNC10LzRgdGPINCy0YvRgtCw0YnQuNGC0Ywg0YfRgtC+LdGC0L4g0YfQ
tdC70L7QstC10LrQvtGH0LjRgtCw0LXQvNC+0LUKICAgICAgICAgICAgZG4gPSBvd25lci5nZXQo
IkRpc3BsYXlOYW1lIikKICAgICAgICAgICAgb2lkID0gb3duZXIuZ2V0KCJJRCIpCiAgICAgICAg
ICAgIHJldHVybiBkbiBvciBvaWQKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAg
ICByZXR1cm4gTm9uZQoKICAgIGRlZiBsaXN0X2J1Y2tldHMoc2VsZiwgZm9yY2U9RmFsc2UsIHN0
YXR1c19jYj1Ob25lKToKICAgICAgICBpZiBzZWxmLnMzX2NsaWVudCBpcyBOb25lOgogICAgICAg
ICAgICByZXR1cm4gW10KCiAgICAgICAgaWYgbm90IGZvcmNlIGFuZCBzZWxmLmJ1Y2tldF9saXN0
X2NhY2hlIGlzIG5vdCBOb25lIGFuZCBub3Qgc2VsZi5zM19uZWVkc19yZWZyZXNoOgogICAgICAg
ICAgICByZXR1cm4gc2VsZi5idWNrZXRfbGlzdF9jYWNoZQoKICAgICAgICBidWNrZXRzID0gW10K
ICAgICAgICB0cnk6CiAgICAgICAgICAgIHJlc3AgPSBzZWxmLnMzX2NsaWVudC5saXN0X2J1Y2tl
dHMoKQogICAgICAgICAgICBzZWxmLmlzX2Nvbm5lY3RlZCA9IFRydWUKICAgICAgICAgICAgYnVj
a2V0cyA9IHJlc3AuZ2V0KCJCdWNrZXRzIiwgW10pIGlmIGlzaW5zdGFuY2UocmVzcCwgZGljdCkg
ZWxzZSBbXQogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJyb3IsIEV4Y2VwdGlvbikgYXMgZToKICAg
ICAgICAgICAgc2VsZi5pc19jb25uZWN0ZWQgPSBGYWxzZQogICAgICAgICAgICBzZWxmLmNvbm5l
Y3Rpb25fZXJyb3IgPSBzdHIoZSkKICAgICAgICAgICAgYnVja2V0cyA9IFtdCgogICAgICAgIGZv
ciBiIGluIGJ1Y2tldHM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG5hbWUgPSBi
LmdldCgiTmFtZSIpIGlmIGlzaW5zdGFuY2UoYiwgZGljdCkgZWxzZSBOb25lCiAgICAgICAgICAg
ICAgICBpZiBub3QgbmFtZToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAg
ICAgICAgIGlmIHN0YXR1c19jYjoKICAgICAgICAgICAgICAgICAgICBzdGF0dXNfY2IoZiJHZXQg
b3duZXI6IHtuYW1lfSIpCgogICAgICAgICAgICAgICAgb3duZXIgPSBzZWxmLl9nZXRfYnVja2V0
X293bmVyX3N0cihuYW1lKQogICAgICAgICAgICAgICAgaWYgb3duZXI6CiAgICAgICAgICAgICAg
ICAgICAgYlsiX093bmVySGludCJdID0gb3duZXIKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlv
bjoKICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgIyDQmNC90LTQtdC60YEg0YPQttC1INC9
0LDQudC00LXQvdC90YvRhQogICAgICAgIGV4aXN0aW5nID0ge2IuZ2V0KCJOYW1lIikgZm9yIGIg
aW4gYnVja2V0cyBpZiBpc2luc3RhbmNlKGIsIGRpY3QpfQoKICAgICAgICAjINCU0L7Qv9C+0LvQ
vdGP0LXQvCDQuNC3IHMzX2J1Y2tldHMudHhyCiAgICAgICAgc2VlZHMgPSBzZWxmLl9yZWFkX2J1
Y2tldF9zZWVkc19maWxlKCJzM19idWNrZXRzLnR4dCIpCiAgICAgICAgZm9yIG5hbWUsIGVwb2No
IGluIHNlZWRzLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIG5hbWUgaW4gZXhpc3Rpbmc6CiAgICAg
ICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBpZiBub3Qgc2VsZi5fYnVja2V0X3JlYWRh
YmxlKG5hbWUpOgogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgIG93bmVyID0g
c2VsZi5fZ2V0X2J1Y2tldF9vd25lcl9zdHIobmFtZSkKCiAgICAgICAgICAgIGlmIHN0YXR1c19j
YjoKICAgICAgICAgICAgICAgIHN0YXR1c19jYihmIkdldCBvd25lcjoge25hbWV9IikKCiAgICAg
ICAgICAgICMg0KHQvtC30LTQsNGR0Lwg0L7QsdGK0LXQutGCINCyINGE0L7RgNC80LDRgtC1INC6
0LDQuiDRgyBsaXN0X2J1Y2tldHMKICAgICAgICAgICAgZXh0cmEgPSB7Ik5hbWUiOiBuYW1lfQog
ICAgICAgICAgICBpZiBlcG9jaCBhbmQgZXBvY2ggPiAwOgogICAgICAgICAgICAgICAgIyBib3Rv
My9saXN0X2J1Y2tldHMg0L7RgtC00LDRkdGCIENyZWF0aW9uRGF0ZSDQutCw0LogZGF0ZXRpbWUK
ICAgICAgICAgICAgICAgIGZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lLCB0aW1lem9uZQog
ICAgICAgICAgICAgICAgZXh0cmFbIkNyZWF0aW9uRGF0ZSJdID0gZGF0ZXRpbWUuZnJvbXRpbWVz
dGFtcChlcG9jaCwgdHo9dGltZXpvbmUudXRjKQoKICAgICAgICAgICAgaWYgb3duZXI6CiAgICAg
ICAgICAgICAgICBleHRyYVsiX093bmVySGludCJdID0gb3duZXIgICMg0L3QsNGI0LUg0L/QvtC7
0LUg0LTQu9GPIFVJCiAgICAgICAgICAgIGJ1Y2tldHMuYXBwZW5kKGV4dHJhKQogICAgICAgICAg
ICBleGlzdGluZy5hZGQobmFtZSkKCiAgICAgICAgZm9yIGksIGIgaW4gZW51bWVyYXRlKGJ1Y2tl
dHMsIDEpOgogICAgICAgICAgICBuYW1lID0gYi5nZXQoIk5hbWUiKQogICAgICAgICAgICBpZiBu
b3QgbmFtZToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIHN0YXR1c19j
YjoKICAgICAgICAgICAgICAgIHN0YXR1c19jYihmIlZlcnNpb25pbmc6IHtpfS97bGVuKGJ1Y2tl
dHMpfSB7bmFtZX0iKQoKICAgICAgICAgICAgdnMgPSBzZWxmLmdldF92ZXJzaW9uaW5nX3N0YXR1
c19jYWNoZWQobmFtZSkgICMg0LfQsNC/0L7Qu9C90LjRgiBzZWxmLnZlcnNpb25pbmdfc3RhdHVz
X2NhY2hlCiAgICAgICAgICAgIGJbIl9WZXJzaW9uaW5nU3RhdHVzIl0gPSB2cwogICAgICAgICAg
ICBpZiB2cyA9PSAiRW5hYmxlZCI6CiAgICAgICAgICAgICAgICBiWyJfVmVyc2lvbmluZ01hcmsi
XSA9ICJWIgogICAgICAgICAgICBlbGlmIHZzID09ICJTdXNwZW5kZWQiOgogICAgICAgICAgICAg
ICAgYlsiX1ZlcnNpb25pbmdNYXJrIl0gPSAiUyIKICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgIGJbIl9WZXJzaW9uaW5nTWFyayJdID0gIiAiCgogICAgICAgIHNlbGYuYnVja2V0X2xp
c3RfY2FjaGUgPSBidWNrZXRzCiAgICAgICAgc2VsZi5idWNrZXRfbGlzdF9jYWNoZV90cyA9IGRh
dGV0aW1lLm5vdygpCiAgICAgICAgc2VsZi5zM19uZWVkc19yZWZyZXNoID0gRmFsc2UKCiAgICAg
ICAgcmV0dXJuIGJ1Y2tldHMKCiAgICBkZWYgY3JlYXRlX2J1Y2tldChzZWxmLCBidWNrZXRfbmFt
ZSk6CiAgICAgICAgaWYgc2VsZi5zM19jbGllbnQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJu
IEZhbHNlCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnMzX2NsaWVudC5jcmVhdGVfYnVj
a2V0KEJ1Y2tldD1idWNrZXRfbmFtZSkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBl
eGNlcHQgKENsaWVudEVycm9yLCBFeGNlcHRpb24pOgogICAgICAgICAgICByZXR1cm4gRmFsc2UK
CiAgICBkZWYgZGVsZXRlX2J1Y2tldChzZWxmLCBidWNrZXRfbmFtZSk6CiAgICAgICAgaWYgc2Vs
Zi5zM19jbGllbnQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgdHJ5
OgogICAgICAgICAgICBzZWxmLnMzX2NsaWVudC5kZWxldGVfYnVja2V0KEJ1Y2tldD1idWNrZXRf
bmFtZSkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQgKENsaWVudEVycm9y
LCBFeGNlcHRpb24pOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgbGlzdF9vYmpl
Y3RzKHNlbGYsIGJ1Y2tldF9uYW1lLCBwcmVmaXg9JycpOgogICAgICAgIGlmIHNlbGYuczNfY2xp
ZW50IGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBbXSwgW10KICAgICAgICB0cnk6CiAgICAg
ICAgICAgIHBhZ2luYXRvciA9IHNlbGYuczNfY2xpZW50LmdldF9wYWdpbmF0b3IoJ2xpc3Rfb2Jq
ZWN0c192MicpCiAgICAgICAgICAgIHBhZ2VzID0gcGFnaW5hdG9yLnBhZ2luYXRlKEJ1Y2tldD1i
dWNrZXRfbmFtZSwgUHJlZml4PXByZWZpeCwgRGVsaW1pdGVyPScvJykKCiAgICAgICAgICAgIGZv
bGRlcnMgPSBbXQogICAgICAgICAgICBmaWxlcyA9IFtdCgogICAgICAgICAgICBmb3IgcGFnZSBp
biBwYWdlczoKICAgICAgICAgICAgICAgIGlmICdDb21tb25QcmVmaXhlcycgaW4gcGFnZToKICAg
ICAgICAgICAgICAgICAgICBmb3Igb2JqIGluIHBhZ2VbJ0NvbW1vblByZWZpeGVzJ106CiAgICAg
ICAgICAgICAgICAgICAgICAgIGZvbGRlcnMuYXBwZW5kKHsnS2V5Jzogb2JqWydQcmVmaXgnXX0p
CgogICAgICAgICAgICAgICAgaWYgJ0NvbnRlbnRzJyBpbiBwYWdlOgogICAgICAgICAgICAgICAg
ICAgIGZvciBvYmogaW4gcGFnZVsnQ29udGVudHMnXToKICAgICAgICAgICAgICAgICAgICAgICAg
aWYgbm90IG9ialsnS2V5J10uZW5kc3dpdGgoJy8nKSBhbmQgb2JqWydLZXknXSAhPSBwcmVmaXg6
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlcy5hcHBlbmQob2JqKQoKICAgICAgICAg
ICAgcmV0dXJuIGZvbGRlcnMsIGZpbGVzCiAgICAgICAgZXhjZXB0IChDbGllbnRFcnJvciwgRXhj
ZXB0aW9uKToKICAgICAgICAgICAgcmV0dXJuIFtdLCBbXQoKICAgIGRlZiBsaXN0X2FsbF9vYmpl
Y3RzKHNlbGYsIGJ1Y2tldF9uYW1lLCBwcmVmaXg9JycpOgogICAgICAgIGlmIHNlbGYuczNfY2xp
ZW50IGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBbXQogICAgICAgIHRyeToKICAgICAgICAg
ICAgcGFnaW5hdG9yID0gc2VsZi5zM19jbGllbnQuZ2V0X3BhZ2luYXRvcignbGlzdF9vYmplY3Rz
X3YyJykKICAgICAgICAgICAgcGFnZXMgPSBwYWdpbmF0b3IucGFnaW5hdGUoQnVja2V0PWJ1Y2tl
dF9uYW1lLCBQcmVmaXg9cHJlZml4KQoKICAgICAgICAgICAgb2JqZWN0cyA9IFtdCiAgICAgICAg
ICAgIGZvciBwYWdlIGluIHBhZ2VzOgogICAgICAgICAgICAgICAgaWYgJ0NvbnRlbnRzJyBpbiBw
YWdlOgogICAgICAgICAgICAgICAgICAgIGZvciBvYmogaW4gcGFnZVsnQ29udGVudHMnXToKICAg
ICAgICAgICAgICAgICAgICAgICAgaWYgb2JqWydLZXknXSAhPSBwcmVmaXg6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBvYmplY3RzLmFwcGVuZChvYmopCgogICAgICAgICAgICByZXR1cm4g
b2JqZWN0cwogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJyb3IsIEV4Y2VwdGlvbik6CiAgICAgICAg
ICAgIHJldHVybiBbXQoKICAgIGRlZiBjb3VudF9vYmplY3RzKHNlbGYsIGJ1Y2tldF9uYW1lLCBw
cmVmaXg9JycpOgogICAgICAgICIiItCR0YvRgdGC0YDRi9C5INC/0L7QtNGB0YfQtdGCINC60L7Q
u9C40YfQtdGB0YLQstCwINC+0LHRitC10LrRgtC+0LIg0LHQtdC3INC30LDQs9GA0YPQt9C60Lgg
0LTQsNC90L3Ri9GFCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGJ1Y2tldF9uYW1lOiDQuNC8
0Y8g0LHQsNC60LXRgtCwCiAgICAgICAgICAgIHByZWZpeDog0L/RgNC10YTQuNC60YEg0LTQu9GP
INGE0LjQu9GM0YLRgNCw0YbQuNC4CgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIHR1cGxl
OiAodG90YWxfb2JqZWN0cywgdG90YWxfc2l6ZSkg0LjQu9C4IChOb25lLCBOb25lKSDQv9GA0Lgg
0L7RiNC40LHQutC1CiAgICAgICAgIiIiCiAgICAgICAgaWYgc2VsZi5zM19jbGllbnQgaXMgTm9u
ZToKICAgICAgICAgICAgcmV0dXJuIE5vbmUsIE5vbmUKCiAgICAgICAgIyDQn9GA0L7QstC10YDR
j9C10Lwg0LrQtdGICiAgICAgICAgY2FjaGVfa2V5ID0gZiJjb3VudDp7YnVja2V0X25hbWV9Ontw
cmVmaXh9IgogICAgICAgIGNhY2hlZCA9IHNlbGYub2JqZWN0X2NhY2hlLmdldChjYWNoZV9rZXkp
CiAgICAgICAgaWYgY2FjaGVkIGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXR1cm4gY2FjaGVk
CgogICAgICAgIHRyeToKICAgICAgICAgICAgdG90YWxfb2JqZWN0cyA9IDAKICAgICAgICAgICAg
dG90YWxfc2l6ZSA9IDAKCiAgICAgICAgICAgIHBhZ2luYXRvciA9IHNlbGYuczNfY2xpZW50Lmdl
dF9wYWdpbmF0b3IoJ2xpc3Rfb2JqZWN0c192MicpCiAgICAgICAgICAgIHBhZ2VzID0gcGFnaW5h
dG9yLnBhZ2luYXRlKEJ1Y2tldD1idWNrZXRfbmFtZSwgUHJlZml4PXByZWZpeCkKCiAgICAgICAg
ICAgIGZvciBwYWdlIGluIHBhZ2VzOgogICAgICAgICAgICAgICAgaWYgJ0NvbnRlbnRzJyBpbiBw
YWdlOgogICAgICAgICAgICAgICAgICAgIHRvdGFsX29iamVjdHMgKz0gbGVuKHBhZ2VbJ0NvbnRl
bnRzJ10pCiAgICAgICAgICAgICAgICAgICAgdG90YWxfc2l6ZSArPSBzdW0ob2JqLmdldCgnU2l6
ZScsIDApIGZvciBvYmogaW4gcGFnZVsnQ29udGVudHMnXSkKCiAgICAgICAgICAgIHJlc3VsdCA9
ICh0b3RhbF9vYmplY3RzLCB0b3RhbF9zaXplKQogICAgICAgICAgICBzZWxmLm9iamVjdF9jYWNo
ZS5wdXQoY2FjaGVfa2V5LCByZXN1bHQpCiAgICAgICAgICAgIHJldHVybiByZXN1bHQKCiAgICAg
ICAgZXhjZXB0IChDbGllbnRFcnJvciwgRXhjZXB0aW9uKToKICAgICAgICAgICAgcmV0dXJuIE5v
bmUsIE5vbmUKCiAgICBkZWYgbGlzdF9vYmplY3RzX2xhenkoc2VsZiwgYnVja2V0X25hbWUsIHBy
ZWZpeD0nJywgcGFnZV9zaXplPTEwMDAsIHVzZV92ZXJzaW9uaW5nPUZhbHNlKToKICAgICAgICAi
IiIKICAgICAgICDQk9C10L3QtdGA0LDRgtC+0YAg0LTQu9GPINC70LXQvdC40LLQvtC5ICjQv9C+
0YHRgtGA0LDQvdC40YfQvdC+0LkpINC30LDQs9GA0YPQt9C60Lgg0L7QsdGK0LXQutGC0L7QsiDQ
uNC3IFMzLgogICAgICAgINCf0L7Qt9Cy0L7Qu9GP0LXRgiDQuNGC0LXRgNC40YDQvtCy0LDRgtGM
0YHRjyDQv9C+INGB0L7QtNC10YDQttC40LzQvtC80YMg0LHQsNC60LXRgtCwINCx0LXQtyDQt9Cw
0LPRgNGD0LfQutC4INCy0YHQtdCz0L4g0YHQv9C40YHQutCwINCyINC/0LDQvNGP0YLRjC4KCiAg
ICAgICAg0JDRgNCz0YPQvNC10L3RgtGLOgogICAgICAgICAgICBidWNrZXRfbmFtZSAoc3RyKTog
0JjQvNGPIFMzINCx0LDQutC10YLQsC4KICAgICAgICAgICAgcHJlZml4IChzdHIpOiDQn9GA0LXR
hNC40LrRgSAo0LLQuNGA0YLRg9Cw0LvRjNC90LDRjyDQv9Cw0L/QutCwKSDQtNC70Y8g0YTQuNC7
0YzRgtGA0LDRhtC40Lgg0L7QsdGK0LXQutGC0L7Qsi4KICAgICAgICAgICAgcGFnZV9zaXplIChp
bnQpOiDQmtC+0LvQuNGH0LXRgdGC0LLQviDQvtCx0YrQtdC60YLQvtCyINCyINC+0LTQvdC+0Lwg
0LfQsNC/0YDQvtGB0LUg0LogQVBJIChNYXhLZXlzKS4KICAgICAgICAgICAgdXNlX3ZlcnNpb25p
bmcgKGJvb2wpOiDQldGB0LvQuCBUcnVlLCDQuNGB0L/QvtC70YzQt9GD0LXRgiBBUEkgbGlzdF9v
YmplY3RfdmVyc2lvbnMg0LTQu9GPINC/0L7Qu9GD0YfQtdC90LjRjyDQstGB0LXRhSDQstC10YDR
gdC40Lkg0L7QsdGK0LXQutGC0L7Qsi4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICDQldGB0LvQuCBGYWxzZSwg0LjRgdC/0L7Qu9GM0LfRg9C10YIg0YHRgtCw0L3QtNCw0YDRgtC9
0YvQuSBsaXN0X29iamVjdHNfdjIuCgogICAgICAgINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCOgogICAg
ICAgICAgICBHZW5lcmF0b3I6INCY0YLQtdGA0LDRgtC+0YAsINCy0L7Qt9Cy0YDQsNGJ0LDRjtGJ
0LjQuSDRgdGC0YDQsNC90LjRhtGLICjQvtGC0LLQtdGC0YsgQVBJKSDRgSDQvtCx0YrQtdC60YLQ
sNC80Lgg0LjQu9C4INCy0LXRgNGB0LjRj9C80LguCiAgICAgICAgIiIiCiAgICAgICAgaWYgc2Vs
Zi5zM19jbGllbnQgaXMgTm9uZToKICAgICAgICAgICAgeWllbGQgW10sIFtdCiAgICAgICAgICAg
IHJldHVybgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIG5vdCB1c2VfdmVyc2lvbmluZzoK
ICAgICAgICAgICAgICAgICMg0KHQotCQ0J3QlNCQ0KDQotCd0KvQmSDQoNCV0JbQmNCcICjQsdGL
0YHRgtGA0YvQuSwg0LHQtdC3INCy0LXRgNGB0LjQuSkKICAgICAgICAgICAgICAgIHBhZ2luYXRv
ciA9IHNlbGYuczNfY2xpZW50LmdldF9wYWdpbmF0b3IoJ2xpc3Rfb2JqZWN0c192MicpCiAgICAg
ICAgICAgICAgICBwYWdlX2l0ZXJhdG9yID0gcGFnaW5hdG9yLnBhZ2luYXRlKAogICAgICAgICAg
ICAgICAgICAgIEJ1Y2tldD1idWNrZXRfbmFtZSwKICAgICAgICAgICAgICAgICAgICBQcmVmaXg9
cHJlZml4LAogICAgICAgICAgICAgICAgICAgIERlbGltaXRlcj0nLycsCiAgICAgICAgICAgICAg
ICAgICAgUGFnaW5hdGlvbkNvbmZpZz17J1BhZ2VTaXplJzogcGFnZV9zaXplfQogICAgICAgICAg
ICAgICAgKQoKICAgICAgICAgICAgICAgIGZvciBwYWdlIGluIHBhZ2VfaXRlcmF0b3I6CiAgICAg
ICAgICAgICAgICAgICAgZm9sZGVycyA9IFtdCiAgICAgICAgICAgICAgICAgICAgZmlsZXMgPSBb
XQogICAgICAgICAgICAgICAgICAgIGlmICdDb21tb25QcmVmaXhlcycgaW4gcGFnZToKICAgICAg
ICAgICAgICAgICAgICAgICAgZm9yIG9iaiBpbiBwYWdlWydDb21tb25QcmVmaXhlcyddOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZm9sZGVycy5hcHBlbmQoeydLZXknOiBvYmpbJ1ByZWZp
eCddfSkKICAgICAgICAgICAgICAgICAgICBpZiAnQ29udGVudHMnIGluIHBhZ2U6CiAgICAgICAg
ICAgICAgICAgICAgICAgIGZvciBvYmogaW4gcGFnZVsnQ29udGVudHMnXToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGlmIG5vdCBvYmpbJ0tleSddLmVuZHN3aXRoKCcvJykgYW5kIG9ialsn
S2V5J10gIT0gcHJlZml4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMg0JTQu9GP
INGB0L7QstC80LXRgdGC0LjQvNC+0YHRgtC4INGB0YLQsNCy0LjQvCAxINCy0LXRgNGB0LjRjgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialsndmVyc2lvbl9jb3VudCddID0gMQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVzLmFwcGVuZChvYmopCiAgICAgICAg
ICAgICAgICAgICAgeWllbGQgZm9sZGVycywgZmlsZXMKCiAgICAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICAgICAjINCg0JXQltCY0Jwg0KEg0J/QntCU0KHQp9CV0KLQntCcINCS0JXQoNCh0JjQ
mSAo0LzQtdC00LvQtdC90L3QtdC1LCDQsNCz0YDQtdCz0LDRhtC40Y8g0LTQsNC90L3Ri9GFKQog
ICAgICAgICAgICAgICAgcGFnaW5hdG9yID0gc2VsZi5zM19jbGllbnQuZ2V0X3BhZ2luYXRvcign
bGlzdF9vYmplY3RfdmVyc2lvbnMnKQogICAgICAgICAgICAgICAgcGFnZV9pdGVyYXRvciA9IHBh
Z2luYXRvci5wYWdpbmF0ZSgKICAgICAgICAgICAgICAgICAgICBCdWNrZXQ9YnVja2V0X25hbWUs
CiAgICAgICAgICAgICAgICAgICAgUHJlZml4PXByZWZpeCwKICAgICAgICAgICAgICAgICAgICBE
ZWxpbWl0ZXI9Jy8nLAogICAgICAgICAgICAgICAgICAgIFBhZ2luYXRpb25Db25maWc9eydQYWdl
U2l6ZSc6IHBhZ2Vfc2l6ZX0KICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICBmb3Ig
cGFnZSBpbiBwYWdlX2l0ZXJhdG9yOgogICAgICAgICAgICAgICAgICAgIGZvbGRlcnMgPSBbXQog
ICAgICAgICAgICAgICAgICAgICMg0KHQu9C+0LLQsNGA0Ywg0LTQu9GPINCw0LPRgNC10LPQsNGG
0LjQuCDQstC10YDRgdC40Lkg0L/QviDQutC70Y7Rh9GDINGE0LDQudC70LAKICAgICAgICAgICAg
ICAgICAgICAjIEtleSAtPiB7T2JqRGljdCwgY291bnR9CiAgICAgICAgICAgICAgICAgICAgZmls
ZXNfbWFwID0gT3JkZXJlZERpY3QoKQoKICAgICAgICAgICAgICAgICAgICBpZiAnQ29tbW9uUHJl
Zml4ZXMnIGluIHBhZ2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBvYmogaW4gcGFnZVsn
Q29tbW9uUHJlZml4ZXMnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlcnMuYXBw
ZW5kKHsnS2V5Jzogb2JqWydQcmVmaXgnXX0pCgogICAgICAgICAgICAgICAgICAgICMg0J7QsdGA
0LDQsdCw0YLRi9Cy0LDQtdC8INCy0LXRgNGB0LjQuCAoVmVyc2lvbnMpCiAgICAgICAgICAgICAg
ICAgICAgaWYgJ1ZlcnNpb25zJyBpbiBwYWdlOgogICAgICAgICAgICAgICAgICAgICAgICBmb3Ig
diBpbiBwYWdlWydWZXJzaW9ucyddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0g
dlsnS2V5J10KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGtleSA9PSBwcmVmaXggb3Ig
a2V5LmVuZHN3aXRoKCcvJyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGlu
dWUKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBrZXkgbm90IGluIGZpbGVzX21hcDoK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjINCh0L7RhdGA0LDQvdGP0LXQvCDQv9C1
0YDQstGD0Y4g0LLRgdGC0YDQtdGH0LXQvdC90YPRjiDQstC10YDRgdC40Y4g0LrQsNC6ICLQvtGB
0L3QvtCy0L3Rg9GOIiDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjwogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICMgKFMzINC+0LHRi9GH0L3QviDQvtGC0LTQsNC10YIg0L/QvtGB
0LvQtdC00L3RjtGOINCy0LXRgNGB0LjRjiDQv9C10YDQstC+0LksINC10YHQu9C4INC+0L3QsCDQ
tdGB0YLRjCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlc19tYXBba2V5XSA9
IHYuY29weSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXNfbWFwW2tleV1b
J3ZlcnNpb25fY291bnQnXSA9IDAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlc19t
YXBba2V5XVsndmVyc2lvbl9jb3VudCddICs9IDEKCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAjINCV0YHQu9C4INGC0LXQutGD0YnQsNGPINCy0LXRgNGB0LjRjyDQv9C+0LzQtdGH0LXQvdCw
INC60LDQuiBMYXRlc3QsINC+0LHQvdC+0LLQu9GP0LXQvCDQvNC10YLQsNC00LDQvdC90YvQtSwK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICMg0YfRgtC+0LHRiyDQvtGC0L7QsdGA0LDQttCw
0YLRjCDQsNC60YLRg9Cw0LvRjNC90YvQuSDRgNCw0LfQvNC10YAg0Lgg0LTQsNGC0YMKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGlmIHYuZ2V0KCdJc0xhdGVzdCcpOgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGZpbGVzX21hcFtrZXldLnVwZGF0ZSh2KQoKICAgICAgICAgICAg
ICAgICAgICAjINCf0YDQtdCy0YDQsNGJ0LDQtdC8INC60LDRgNGC0YMg0L7QsdGA0LDRgtC90L4g
0LIg0YHQv9C40YHQvtC6INGE0LDQudC70L7QsgogICAgICAgICAgICAgICAgICAgIGZpbGVzID0g
bGlzdChmaWxlc19tYXAudmFsdWVzKCkpCiAgICAgICAgICAgICAgICAgICAgeWllbGQgZm9sZGVy
cywgZmlsZXMKCiAgICAgICAgZXhjZXB0IChDbGllbnRFcnJvciwgRXhjZXB0aW9uKToKICAgICAg
ICAgICAgeWllbGQgW10sIFtdCgogICAgZGVmIGludmFsaWRhdGVfY2FjaGUoc2VsZiwgYnVja2V0
X25hbWU9Tm9uZSwgcHJlZml4PU5vbmUpOgogICAgICAgICIiItCY0L3QstCw0LvQuNC00LDRhtC4
0Y8g0LrQtdGI0LAg0L/QvtGB0LvQtSDQvtC/0LXRgNCw0YbQuNC5INC40LfQvNC10L3QtdC90LjR
jyIiIgogICAgICAgIGlmIGJ1Y2tldF9uYW1lIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYub2Jq
ZWN0X2NhY2hlLmludmFsaWRhdGUoKQogICAgICAgICAgICBzZWxmLmJ1Y2tldF9jYWNoZS5pbnZh
bGlkYXRlKCkKICAgICAgICAgICAgc2VsZi52ZXJzaW9uaW5nX3N0YXR1c19jYWNoZS5jbGVhcigp
ICAjINCe0YfQuNGB0YLQuNGC0Ywg0LrQtdGIINCy0LXRgNGB0LjQvtC90LjRgNC+0LLQsNC90LjR
jwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHBhdHRlcm4gPSBmIntidWNrZXRfbmFtZX06Igog
ICAgICAgICAgICBpZiBwcmVmaXg6CiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IHByZWZpeAog
ICAgICAgICAgICBzZWxmLm9iamVjdF9jYWNoZS5pbnZhbGlkYXRlKHBhdHRlcm4pCiAgICAgICAg
ICAgICMg0J/RgNC4INC40LfQvNC10L3QtdC90LjRj9GFINCyINCx0LDQutC10YLQtSAtINGB0LHR
gNC+0YHQuNGC0Ywg0LXQs9C+INGB0YLQsNGC0YPRgSDQstC10YDRgdC40L7QvdC40YDQvtCy0LDQ
vdC40Y8KICAgICAgICAgICAgaWYgYnVja2V0X25hbWUgaW4gc2VsZi52ZXJzaW9uaW5nX3N0YXR1
c19jYWNoZToKICAgICAgICAgICAgICAgIGRlbCBzZWxmLnZlcnNpb25pbmdfc3RhdHVzX2NhY2hl
W2J1Y2tldF9uYW1lXQoKICAgIGRlZiBvYmplY3RfZXhpc3RzKHNlbGYsIGJ1Y2tldF9uYW1lLCBr
ZXkpOgogICAgICAgICIiItCf0YDQvtCy0LXRgNC40YLRjCDRgdGD0YnQtdGB0YLQstC+0LLQsNC9
0LjQtSDQvtCx0YrQtdC60YLQsCDQuCDQstC10YDQvdGD0YLRjCDQtdCz0L4g0LzQtdGC0LDQtNCw
0L3QvdGL0LUiIiIKICAgICAgICBpZiBzZWxmLnMzX2NsaWVudCBpcyBOb25lOgogICAgICAgICAg
ICByZXR1cm4gTm9uZQogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzcG9uc2UgPSBzZWxmLnMz
X2NsaWVudC5oZWFkX29iamVjdChCdWNrZXQ9YnVja2V0X25hbWUsIEtleT1rZXkpCiAgICAgICAg
ICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAnU2l6ZSc6IHJlc3BvbnNlWydDb250ZW50TGVu
Z3RoJ10sCiAgICAgICAgICAgICAgICAnTGFzdE1vZGlmaWVkJzogcmVzcG9uc2VbJ0xhc3RNb2Rp
ZmllZCddCiAgICAgICAgICAgIH0KICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJldHVybiBO
b25lCgogICAgZGVmIGxpc3Rfb2JqZWN0X3ZlcnNpb25zKHNlbGYsIGJ1Y2tldF9uYW1lLCBrZXkp
OgogICAgICAgICIiItCf0L7Qu9GD0YfQuNGC0Ywg0YHQv9C40YHQvtC6INCy0LXRgNGB0LjQuSDQ
vtCx0YrQtdC60YLQsCIiIgogICAgICAgIGlmIHNlbGYuczNfY2xpZW50IGlzIE5vbmU6CiAgICAg
ICAgICAgIHJldHVybiBbXQoKICAgICAgICB2ZXJzaW9uaW5nX3N0YXR1cyA9IHNlbGYuZ2V0X3Zl
cnNpb25pbmdfc3RhdHVzX2NhY2hlZChidWNrZXRfbmFtZSkKCiAgICAgICAgIyDQldGB0LvQuCDQ
stC10YDRgdC40L7QvdC40YDQvtCy0LDQvdC40LUg0L3QuNC60L7Qs9C00LAg0L3QtSDQstC60LvR
jtGH0LDQu9C+0YHRjCAtINC90LUg0LfQsNC/0YDQsNGI0LjQstCw0LXQvAogICAgICAgIGlmIHZl
cnNpb25pbmdfc3RhdHVzIGlzIE5vbmUgb3IgdmVyc2lvbmluZ19zdGF0dXMgPT0gJ0Rpc2FibGVk
JzoKICAgICAgICAgICAgcmV0dXJuIFtdCgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzcG9u
c2UgPSBzZWxmLnMzX2NsaWVudC5saXN0X29iamVjdF92ZXJzaW9ucyhCdWNrZXQ9YnVja2V0X25h
bWUsIFByZWZpeD1rZXkpCiAgICAgICAgICAgIHZlcnNpb25zID0gW10KICAgICAgICAgICAgaWYg
J1ZlcnNpb25zJyBpbiByZXNwb25zZToKICAgICAgICAgICAgICAgIGZvciB2IGluIHJlc3BvbnNl
WydWZXJzaW9ucyddOgogICAgICAgICAgICAgICAgICAgIGlmIHZbJ0tleSddID09IGtleToKICAg
ICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbnMuYXBwZW5kKHYpCiAgICAgICAgICAgIHJldHVy
biB2ZXJzaW9ucwogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJyb3IsIEV4Y2VwdGlvbikgYXMgZToK
ICAgICAgICAgICAgc2VsZi5jb25uZWN0aW9uX2Vycm9yID0gZiJsaXN0IHZlcnNpb24gZXJyb3I6
IHtzdHIoZSl9IgogICAgICAgICAgICByZXR1cm4gW10KCiAgICBkZWYgZG93bmxvYWRfb2JqZWN0
KHNlbGYsIGJ1Y2tldF9uYW1lLCBrZXksIGxvY2FsX3BhdGgsIHZlcnNpb25faWQ9Tm9uZSwgY2Fs
bGJhY2s9Tm9uZSk6CiAgICAgICAgIiIiCiAgICAgICAg0KHQutCw0YfQuNCy0LDQtdGCINC+0LHR
itC10LrRgiDQuNC3IFMzINCyINC70L7QutCw0LvRjNC90YPRjiDRhNCw0LnQu9C+0LLRg9GOINGB
0LjRgdGC0LXQvNGDLgoKICAgICAgICDQkNGA0LPRg9C80LXQvdGC0Ys6CiAgICAgICAgICAgIGJ1
Y2tldF9uYW1lIChzdHIpOiDQmNC80Y8g0LHQsNC60LXRgtCwLdC40YHRgtC+0YfQvdC40LrQsC4K
ICAgICAgICAgICAga2V5IChzdHIpOiDQmtC70Y7RhyAo0L/Rg9GC0YwpINC+0LHRitC10LrRgtCw
INCyIFMzLgogICAgICAgICAgICBsb2NhbF9wYXRoIChzdHIpOiDQn9C+0LvQvdGL0Lkg0LvQvtC6
0LDQu9GM0L3Ri9C5INC/0YPRgtGMINC90LDQt9C90LDRh9C10L3QuNGPICjQstC60LvRjtGH0LDR
jyDQuNC80Y8g0YTQsNC50LvQsCkuCiAgICAgICAgICAgIHZlcnNpb25faWQgKHN0ciwgb3B0aW9u
YWwpOiBJRCDQutC+0L3QutGA0LXRgtC90L7QuSDQstC10YDRgdC40Lgg0L7QsdGK0LXQutGC0LAg
0LTQu9GPINGB0LrQsNGH0LjQstCw0L3QuNGPLiDQldGB0LvQuCBOb25lIOKAlCDRgdC60LDRh9C4
0LLQsNC10YLRgdGPINC/0L7RgdC70LXQtNC90Y/RjyAo0YLQtdC60YPRidCw0Y8pINCy0LXRgNGB
0LjRjy4KICAgICAgICAgICAgY2FsbGJhY2sgKGNhbGxhYmxlLCBvcHRpb25hbCk6INCk0YPQvdC6
0YbQuNGPINC+0LHRgNCw0YLQvdC+0LPQviDQstGL0LfQvtCy0LAg0LTQu9GPINC+0YLRgdC70LXQ
ttC40LLQsNC90LjRjyDQv9GA0L7Qs9GA0LXRgdGB0LAgKNC/0YDQuNC90LjQvNCw0LXRgiDQutC+
0LvQuNGH0LXRgdGC0LLQviDQsdCw0LnRgikuCgogICAgICAgINCS0L7Qt9Cy0YDQsNGJ0LDQtdGC
OgogICAgICAgICAgICBib29sOiBUcnVlINCyINGB0LvRg9GH0LDQtSDRg9GB0L/QtdGI0L3QvtCz
0L4g0YHQutCw0YfQuNCy0LDQvdC40Y8sINC40L3QsNGH0LUgRmFsc2UuCiAgICAgICAgIiIiCiAg
ICAgICAgaWYgc2VsZi5zM19jbGllbnQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNl
CiAgICAgICAgdHJ5OgogICAgICAgICAgICBleHRyYV9hcmdzID0ge30KICAgICAgICAgICAgaWYg
dmVyc2lvbl9pZDoKICAgICAgICAgICAgICAgIGV4dHJhX2FyZ3NbJ1ZlcnNpb25JZCddID0gdmVy
c2lvbl9pZAogICAgICAgICAgICBzZWxmLnMzX2NsaWVudC5kb3dubG9hZF9maWxlKGJ1Y2tldF9u
YW1lLCBrZXksIGxvY2FsX3BhdGgsIEV4dHJhQXJncz1leHRyYV9hcmdzLCBDYWxsYmFjaz1jYWxs
YmFjaykKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQgKENsaWVudEVycm9y
LCBFeGNlcHRpb24pIGFzIGU6CiAgICAgICAgICAgIHNlbGYuY29ubmVjdGlvbl9lcnJvciA9IGYi
RG93bmxvYWQgZXJyb3I6IHtzdHIoZSl9IgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAj
INCe0JHQndCe0JLQm9CV0J3QmNCVIFMzINGC0L7Qu9GM0LrQviDQv9GA0Lgg0LjQt9C80LXQvdC1
0L3QuNGP0YUKICAgIGRlZiBtYXJrX3MzX2Zvcl9yZWZyZXNoKHNlbGYpOgogICAgICAgICIiItCe
0YLQvNC10YLQuNGC0Ywg0YfRgtC+IFMzINC90YPQttC90L4g0L7QsdC90L7QstC40YLRjCIiIgog
ICAgICAgIHNlbGYuczNfbmVlZHNfcmVmcmVzaCA9IFRydWUKCiAgICBkZWYgdXBsb2FkX2ZpbGUo
c2VsZiwgbG9jYWxfcGF0aCwgYnVja2V0X25hbWUsIGtleSk6CiAgICAgICAgaWYgc2VsZi5zM19j
bGllbnQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgdHJ5OgogICAg
ICAgICAgICBzZWxmLnMzX2NsaWVudC51cGxvYWRfZmlsZShsb2NhbF9wYXRoLCBidWNrZXRfbmFt
ZSwga2V5KQogICAgICAgICAgICBzZWxmLmludmFsaWRhdGVfY2FjaGUoYnVja2V0X25hbWUpCiAg
ICAgICAgICAgIHNlbGYubWFya19zM19mb3JfcmVmcmVzaCgpCiAgICAgICAgICAgIHJldHVybiBU
cnVlCiAgICAgICAgZXhjZXB0IChDbGllbnRFcnJvciwgRXhjZXB0aW9uKSBhcyBlOgogICAgICAg
ICAgICBzZWxmLmNvbm5lY3Rpb25fZXJyb3IgPSBmIlVwbG9hZCBlcnJvcjoge3N0cihlKX0iCiAg
ICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBjb3B5X29iamVjdChzZWxmLCBzb3VyY2Vf
YnVja2V0LCBzb3VyY2Vfa2V5LCBkZXN0X2J1Y2tldCwgZGVzdF9rZXksIHZlcnNpb25faWQ9Tm9u
ZSk6CiAgICAgICAgIiIiCiAgICAgICAg0JLRi9C/0L7Qu9C90Y/QtdGCINC60L7Qv9C40YDQvtCy
0LDQvdC40LUg0L7QsdGK0LXQutGC0LAg0LLQvdGD0YLRgNC4IFMzIChTZXJ2ZXItc2lkZSBjb3B5
KSDQsdC10Lcg0YHQutCw0YfQuNCy0LDQvdC40Y8g0L3QsCDQu9C+0LrQsNC70YzQvdGD0Y4g0LzQ
sNGI0LjQvdGDLgoKICAgICAgICDQkNGA0LPRg9C80LXQvdGC0Ys6CiAgICAgICAgICAgIHNvdXJj
ZV9idWNrZXQgKHN0cik6INCY0LzRjyDQuNGB0YXQvtC00L3QvtCz0L4g0LHQsNC60LXRgtCwLgog
ICAgICAgICAgICBzb3VyY2Vfa2V5IChzdHIpOiDQmtC70Y7RhyDQuNGB0YXQvtC00L3QvtCz0L4g
0L7QsdGK0LXQutGC0LAuCiAgICAgICAgICAgIGRlc3RfYnVja2V0IChzdHIpOiDQmNC80Y8g0YbQ
tdC70LXQstC+0LPQviDQsdCw0LrQtdGC0LAuCiAgICAgICAgICAgIGRlc3Rfa2V5IChzdHIpOiDQ
mtC70Y7RhyDRhtC10LvQtdCy0L7Qs9C+INC+0LHRitC10LrRgtCwLgogICAgICAgICAgICB2ZXJz
aW9uX2lkIChzdHIsIG9wdGlvbmFsKTogSUQg0LrQvtC90LrRgNC10YLQvdC+0Lkg0LLQtdGA0YHQ
uNC4INC40YHRhdC+0LTQvdC+0LPQviDQvtCx0YrQtdC60YLQsC4g0JXRgdC70Lgg0YPQutCw0LfQ
sNC9LCDQutC+0L/QuNGA0YPQtdGC0YHRjyDQuNC80LXQvdC90L4g0Y3RgtCwINCy0LXRgNGB0LjR
jy4KCiAgICAgICAg0JLQvtC30LLRgNCw0YnQsNC10YI6CiAgICAgICAgICAgIGJvb2w6IFRydWUs
INC10YHQu9C4INC+0L/QtdGA0LDRhtC40Y8g0LrQvtC/0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7R
iNC70LAg0YPRgdC/0LXRiNC90L4sINC40L3QsNGH0LUgRmFsc2UuCiAgICAgICAgIiIiCiAgICAg
ICAgaWYgc2VsZi5zM19jbGllbnQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAg
ICAgICAgdHJ5OgogICAgICAgICAgICBjb3B5X3NvdXJjZSA9IHsnQnVja2V0Jzogc291cmNlX2J1
Y2tldCwgJ0tleSc6IHNvdXJjZV9rZXl9CiAgICAgICAgICAgIGlmIHZlcnNpb25faWQ6CiAgICAg
ICAgICAgICAgICBjb3B5X3NvdXJjZVsnVmVyc2lvbklkJ10gPSB2ZXJzaW9uX2lkCiAgICAgICAg
ICAgIHNlbGYuczNfY2xpZW50LmNvcHlfb2JqZWN0KENvcHlTb3VyY2U9Y29weV9zb3VyY2UsIEJ1
Y2tldD1kZXN0X2J1Y2tldCwgS2V5PWRlc3Rfa2V5KQogICAgICAgICAgICBzZWxmLmludmFsaWRh
dGVfY2FjaGUoZGVzdF9idWNrZXQpCiAgICAgICAgICAgIHNlbGYubWFya19zM19mb3JfcmVmcmVz
aCgpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IChDbGllbnRFcnJvciwg
RXhjZXB0aW9uKSBhcyBlOgogICAgICAgICAgICBzZWxmLmNvbm5lY3Rpb25fZXJyb3IgPSBmIkNv
cHkgZXJyb3I6IHtzdHIoZSl9IgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgZGVs
ZXRlX29iamVjdChzZWxmLCBidWNrZXRfbmFtZSwga2V5LCB2ZXJzaW9uX2lkPU5vbmUpOgogICAg
ICAgIGlmIHNlbGYuczNfY2xpZW50IGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQog
ICAgICAgIHRyeToKICAgICAgICAgICAgZXh0cmFfYXJncyA9IHt9CiAgICAgICAgICAgIGlmIHZl
cnNpb25faWQ6CiAgICAgICAgICAgICAgICBleHRyYV9hcmdzWydWZXJzaW9uSWQnXSA9IHZlcnNp
b25faWQKICAgICAgICAgICAgc2VsZi5zM19jbGllbnQuZGVsZXRlX29iamVjdChCdWNrZXQ9YnVj
a2V0X25hbWUsIEtleT1rZXksICoqZXh0cmFfYXJncykKICAgICAgICAgICAgc2VsZi5pbnZhbGlk
YXRlX2NhY2hlKGJ1Y2tldF9uYW1lKQogICAgICAgICAgICBzZWxmLm1hcmtfczNfZm9yX3JlZnJl
c2goKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJyb3Is
IEV4Y2VwdGlvbikgYXMgZToKICAgICAgICAgICAgc2VsZi5jb25uZWN0aW9uX2Vycm9yID0gZiJE
ZWxldGUgZXJyb3I6IHtzdHIoZSl9IgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYg
ZGVsZXRlX29sZF92ZXJzaW9ucyhzZWxmLCBidWNrZXRfbmFtZSwga2V5KToKICAgICAgICAiIiLQ
o9C00LDQu9C40YLRjCDQstGB0LUg0LLQtdGA0YHQuNC4INC60YDQvtC80LUg0L/QvtGB0LvQtdC0
0L3QtdC5IiIiCiAgICAgICAgaWYgc2VsZi5zM19jbGllbnQgaXMgTm9uZToKICAgICAgICAgICAg
cmV0dXJuIDAKICAgICAgICB0cnk6CiAgICAgICAgICAgIHZlcnNpb25zID0gc2VsZi5saXN0X29i
amVjdF92ZXJzaW9ucyhidWNrZXRfbmFtZSwga2V5KQogICAgICAgICAgICBpZiBsZW4odmVyc2lv
bnMpIDw9IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gMAoKICAgICAgICAgICAgdmVyc2lvbnMu
c29ydChrZXk9bGFtYmRhIHg6IHguZ2V0KCdMYXN0TW9kaWZpZWQnLCBkYXRldGltZS5taW4pLCBy
ZXZlcnNlPVRydWUpCgogICAgICAgICAgICBkZWxldGVkX2NvdW50ID0gMAogICAgICAgICAgICBm
b3IgdmVyc2lvbiBpbiB2ZXJzaW9uc1sxOl06CiAgICAgICAgICAgICAgICBpZiBzZWxmLmRlbGV0
ZV9vYmplY3QoYnVja2V0X25hbWUsIGtleSwgdmVyc2lvblsnVmVyc2lvbklkJ10pOgogICAgICAg
ICAgICAgICAgICAgIGRlbGV0ZWRfY291bnQgKz0gMQoKICAgICAgICAgICAgc2VsZi5tYXJrX3Mz
X2Zvcl9yZWZyZXNoKCkKICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZWRfY291bnQKICAgICAgICBl
eGNlcHQgKENsaWVudEVycm9yLCBFeGNlcHRpb24pIGFzIGU6CiAgICAgICAgICAgIHNlbGYuY29u
bmVjdGlvbl9lcnJvciA9IGYiRGVsZXRlIG9sZCB2ZXJzaW9uIGVycm9yOiB7c3RyKGUpfSIKICAg
ICAgICAgICAgcmV0dXJuIDAKCiAgICBkZWYgZW5hYmxlX3ZlcnNpb25pbmcoc2VsZiwgYnVja2V0
X25hbWUpOgogICAgICAgICIiItCS0LrQu9GO0YfQuNGC0Ywg0LLQtdGA0YHQuNC+0L3QuNGA0L7Q
stCw0L3QuNC1INC00LvRjyDQsdCw0LrQtdGC0LAiIiIKICAgICAgICBpZiBzZWxmLnMzX2NsaWVu
dCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICB0cnk6CiAgICAgICAg
ICAgIHNlbGYuczNfY2xpZW50LnB1dF9idWNrZXRfdmVyc2lvbmluZygKICAgICAgICAgICAgICAg
IEJ1Y2tldD1idWNrZXRfbmFtZSwKICAgICAgICAgICAgICAgIFZlcnNpb25pbmdDb25maWd1cmF0
aW9uPXsnU3RhdHVzJzogJ0VuYWJsZWQnfQogICAgICAgICAgICApCiAgICAgICAgICAgIHJldHVy
biBUcnVlCiAgICAgICAgZXhjZXB0IChDbGllbnRFcnJvciwgRXhjZXB0aW9uKSBhcyBlOgogICAg
ICAgICAgICBzZWxmLmNvbm5lY3Rpb25fZXJyb3IgPSBmIkVuYWJsZSBWZXJzaW9uaW5nIGVycm9y
OiB7c3RyKGUpfSIKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGRpc2FibGVfdmVy
c2lvbmluZyhzZWxmLCBidWNrZXRfbmFtZSk6CiAgICAgICAgIiIi0J7RgtC60LvRjtGH0LjRgtGM
INCy0LXRgNGB0LjQvtC90LjRgNC+0LLQsNC90LjQtSDQtNC70Y8g0LHQsNC60LXRgtCwICjRg9GB
0YLQsNC90L7QstC40YLRjCDQsiBTdXNwZW5kZWQpIiIiCiAgICAgICAgaWYgc2VsZi5zM19jbGll
bnQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgdHJ5OgogICAgICAg
ICAgICBzZWxmLnMzX2NsaWVudC5wdXRfYnVja2V0X3ZlcnNpb25pbmcoCiAgICAgICAgICAgICAg
ICBCdWNrZXQ9YnVja2V0X25hbWUsCiAgICAgICAgICAgICAgICBWZXJzaW9uaW5nQ29uZmlndXJh
dGlvbj17J1N0YXR1cyc6ICdTdXNwZW5kZWQnfQogICAgICAgICAgICApCiAgICAgICAgICAgIHJl
dHVybiBUcnVlCiAgICAgICAgZXhjZXB0IChDbGllbnRFcnJvciwgRXhjZXB0aW9uKSBhcyBlOgog
ICAgICAgICAgICBzZWxmLmNvbm5lY3Rpb25fZXJyb3IgPSBmIkRpc2FibGUgVmVzcnNpb25pbmcg
ZXJyb3I6IHtzdHIoZSl9IgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgZ2V0X3Zl
cnNpb25pbmdfc3RhdHVzX2NhY2hlZChzZWxmLCBidWNrZXRfbmFtZSk6CiAgICAgICAgIiIi0J/Q
vtC70YPRh9C40YLRjCDRgdGC0LDRgtGD0YEg0LLQtdGA0YHQuNC+0L3QuNGA0L7QstCw0L3QuNGP
INGBINC60LXRiNC40YDQvtCy0LDQvdC40LXQvCIiIgogICAgICAgIGlmIGJ1Y2tldF9uYW1lIG5v
dCBpbiBzZWxmLnZlcnNpb25pbmdfc3RhdHVzX2NhY2hlOgogICAgICAgICAgICAjINCX0LDQv9GA
0LDRiNC40LLQsNC10Lwg0YLQvtC70YzQutC+INC+0LTQuNC9INGA0LDQtwogICAgICAgICAgICBz
ZWxmLnZlcnNpb25pbmdfc3RhdHVzX2NhY2hlW2J1Y2tldF9uYW1lXSA9IHNlbGYuZ2V0X3ZlcnNp
b25pbmdfc3RhdHVzKGJ1Y2tldF9uYW1lKQogICAgICAgIHJldHVybiBzZWxmLnZlcnNpb25pbmdf
c3RhdHVzX2NhY2hlW2J1Y2tldF9uYW1lXQoKICAgIGRlZiBnZXRfdmVyc2lvbmluZ19zdGF0dXMo
c2VsZiwgYnVja2V0X25hbWUpOgogICAgICAgICIiItCf0L7Qu9GD0YfQuNGC0Ywg0YHRgtCw0YLR
g9GBINCy0LXRgNGB0LjQvtC90LjRgNC+0LLQsNC90LjRjyDQsdCw0LrQtdGC0LAiIiIKICAgICAg
ICBpZiBzZWxmLnMzX2NsaWVudCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAg
ICAgIHRyeToKICAgICAgICAgICAgcmVzcG9uc2UgPSBzZWxmLnMzX2NsaWVudC5nZXRfYnVja2V0
X3ZlcnNpb25pbmcoQnVja2V0PWJ1Y2tldF9uYW1lKQogICAgICAgICAgICByZXR1cm4gcmVzcG9u
c2UuZ2V0KCdTdGF0dXMnLCAnRGlzYWJsZWQnKQogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJyb3Is
IEV4Y2VwdGlvbikgYXMgZToKICAgICAgICAgICAgc2VsZi5jb25uZWN0aW9uX2Vycm9yID0gZiJH
ZXQgVmVyIFNhdHVzIGVycm9yOiB7c3RyKGUpfSIKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCgpj
bGFzcyBGaWxlU3lzdGVtQnJvd3NlcjoKICAgICIiItCR0YDQsNGD0LfQtdGAINC70L7QutCw0LvR
jNC90L7QuSDRhNCw0LnQu9C+0LLQvtC5INGB0LjRgdGC0LXQvNGLIiIiCgogICAgZGVmIF9faW5p
dF9fKHNlbGYpOgogICAgICAgIHNlbGYuY3VycmVudF9wYXRoID0gb3MucGF0aC5leHBhbmR1c2Vy
KCd+JykKCiAgICBkZWYgbGlzdF9kaXJlY3Rvcnkoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAg
ICAgICBpdGVtcyA9IFtdCiAgICAgICAgICAgIGlmIHNlbGYuY3VycmVudF9wYXRoICE9ICcvJzoK
ICAgICAgICAgICAgICAgIGl0ZW1zLmFwcGVuZCh7J25hbWUnOiAnLi4nLCAnaXNfZGlyJzogVHJ1
ZSwgJ3NpemUnOiAwLCAnbXRpbWUnOiBOb25lfSkKCiAgICAgICAgICAgIGZvciBpdGVtIGluIHNv
cnRlZChvcy5saXN0ZGlyKHNlbGYuY3VycmVudF9wYXRoKSk6CiAgICAgICAgICAgICAgICBmdWxs
X3BhdGggPSBvcy5wYXRoLmpvaW4oc2VsZi5jdXJyZW50X3BhdGgsIGl0ZW0pCiAgICAgICAgICAg
ICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgc3RhdCA9IG9zLnN0YXQoZnVsbF9wYXRoKQog
ICAgICAgICAgICAgICAgICAgIGlzX2RpciA9IG9zLnBhdGguaXNkaXIoZnVsbF9wYXRoKQogICAg
ICAgICAgICAgICAgICAgIGl0ZW1zLmFwcGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICdu
YW1lJzogaXRlbSwKICAgICAgICAgICAgICAgICAgICAgICAgJ2lzX2Rpcic6IGlzX2RpciwKICAg
ICAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiAwIGlmIGlzX2RpciBlbHNlIHN0YXQuc3Rfc2l6
ZSwKICAgICAgICAgICAgICAgICAgICAgICAgJ210aW1lJzogZGF0ZXRpbWUuZnJvbXRpbWVzdGFt
cChzdGF0LnN0X210aW1lKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBl
eGNlcHQgKFBlcm1pc3Npb25FcnJvciwgT1NFcnJvcik6CiAgICAgICAgICAgICAgICAgICAgY29u
dGludWUKCiAgICAgICAgICAgIHJldHVybiBpdGVtcwogICAgICAgIGV4Y2VwdCAoUGVybWlzc2lv
bkVycm9yLCBPU0Vycm9yKToKICAgICAgICAgICAgcmV0dXJuIFtdCgogICAgZGVmIGxpc3RfYWxs
X2ZpbGVzKHNlbGYsIHBhdGgpOgogICAgICAgIGFsbF9maWxlcyA9IFtdCiAgICAgICAgdHJ5Ogog
ICAgICAgICAgICBmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2FsayhwYXRoKToKICAgICAg
ICAgICAgICAgIGZvciBmaWxlIGluIGZpbGVzOgogICAgICAgICAgICAgICAgICAgIGZ1bGxfcGF0
aCA9IG9zLnBhdGguam9pbihyb290LCBmaWxlKQogICAgICAgICAgICAgICAgICAgIHRyeToKICAg
ICAgICAgICAgICAgICAgICAgICAgc3RhdCA9IG9zLnN0YXQoZnVsbF9wYXRoKQogICAgICAgICAg
ICAgICAgICAgICAgICByZWxfcGF0aCA9IG9zLnBhdGgucmVscGF0aChmdWxsX3BhdGgsIHBhdGgp
CiAgICAgICAgICAgICAgICAgICAgICAgIGFsbF9maWxlcy5hcHBlbmQoewogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgJ3BhdGgnOiBmdWxsX3BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAncmVsX3BhdGgnOiByZWxfcGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdz
aXplJzogc3RhdC5zdF9zaXplCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAg
ICAgICAgICAgZXhjZXB0IChQZXJtaXNzaW9uRXJyb3IsIE9TRXJyb3IpOgogICAgICAgICAgICAg
ICAgICAgICAgICBjb250aW51ZQogICAgICAgIGV4Y2VwdCAoUGVybWlzc2lvbkVycm9yLCBPU0Vy
cm9yKToKICAgICAgICAgICAgcGFzcwogICAgICAgIHJldHVybiBhbGxfZmlsZXMKCiAgICBkZWYg
ZmlsZV9leGlzdHMoc2VsZiwgZmlsZV9wYXRoKToKICAgICAgICAiIiLQn9GA0L7QstC10YDQuNGC
0Ywg0YHRg9GJ0LXRgdGC0LLQvtCy0LDQvdC40LUg0YTQsNC50LvQsCDQuCDQstC10YDQvdGD0YLR
jCDQtdCz0L4g0LzQtdGC0LDQtNCw0L3QvdGL0LUiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAg
IGlmIG9zLnBhdGguZXhpc3RzKGZpbGVfcGF0aCk6CiAgICAgICAgICAgICAgICBzdGF0ID0gb3Mu
c3RhdChmaWxlX3BhdGgpCiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAg
ICAgICdzaXplJzogc3RhdC5zdF9zaXplLAogICAgICAgICAgICAgICAgICAgICdtdGltZSc6IGRh
dGV0aW1lLmZyb210aW1lc3RhbXAoc3RhdC5zdF9tdGltZSkKICAgICAgICAgICAgICAgIH0KICAg
ICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRl
ZiBjcmVhdGVfZGlyZWN0b3J5KHNlbGYsIGRpcl9uYW1lKToKICAgICAgICB0cnk6CiAgICAgICAg
ICAgIGZ1bGxfcGF0aCA9IG9zLnBhdGguam9pbihzZWxmLmN1cnJlbnRfcGF0aCwgZGlyX25hbWUp
CiAgICAgICAgICAgIG9zLm1ha2VkaXJzKGZ1bGxfcGF0aCwgZXhpc3Rfb2s9RmFsc2UpCiAgICAg
ICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICAgIHJl
dHVybiBGYWxzZQoKCmRlZiBpc19iaW5hcnlfZmlsZShmaWxlX3BhdGgpOgogICAgdHJ5OgogICAg
ICAgIHdpdGggb3BlbihmaWxlX3BhdGgsICdyYicpIGFzIGY6CiAgICAgICAgICAgIGNodW5rID0g
Zi5yZWFkKDEwMjQpCiAgICAgICAgICAgIGlmIGInXHgwMCcgaW4gY2h1bms6CiAgICAgICAgICAg
ICAgICByZXR1cm4gVHJ1ZQoKICAgICAgICAgICAgbm9uX3ByaW50YWJsZSA9IHN1bSgxIGZvciBi
eXRlIGluIGNodW5rIGlmIGJ5dGUgPCAzMiBhbmQgYnl0ZSBub3QgaW4gKDksIDEwLCAxMykpCiAg
ICAgICAgICAgIGlmIGxlbihjaHVuaykgPiAwIGFuZCBub25fcHJpbnRhYmxlIC8gbGVuKGNodW5r
KSA+IDAuMzoKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICAgICAgICByZXR1cm4g
RmFsc2UKICAgIGV4Y2VwdDoKICAgICAgICByZXR1cm4gVHJ1ZQoKCmRlZiBmb3JtYXRfc2l6ZShz
aXplKToKICAgIGZvciB1bml0IGluIFsnQicsICdLQicsICdNQicsICdHQicsICdUQiddOgogICAg
ICAgIGlmIHNpemUgPCAxMDI0LjA6CiAgICAgICAgICAgIHJldHVybiBmJ3tzaXplOi4xZn0ge3Vu
aXR9JwogICAgICAgIHNpemUgLz0gMTAyNC4wCiAgICByZXR1cm4gZid7c2l6ZTouMWZ9IFBCJwoK
CmNsYXNzIFNjcm9sbEJhcih1cndpZC5XaWRnZXREZWNvcmF0aW9uKToKICAgICIiItCS0LXRgNGC
0LjQutCw0LvRjNC90YvQuSBzY3JvbGxiYXIg0LTQu9GPIHVyd2lkIExpc3RCb3giIiIKCiAgICBk
ZWYgX19pbml0X18oc2VsZiwgd2lkZ2V0KToKICAgICAgICAiIiIKICAgICAgICBBcmdzOgogICAg
ICAgICAgICB3aWRnZXQ6INCx0LDQt9C+0LLRi9C5INCy0LjQtNC20LXRgiAo0L7QsdGL0YfQvdC+
IExpc3RCb3gpCiAgICAgICAgIiIiCiAgICAgICAgIyBzZWxmLl9fc3VwZXIuX19pbml0X18od2lk
Z2V0KQogICAgICAgIHN1cGVyKCkuX19pbml0X18od2lkZ2V0KQogICAgICAgIHNlbGYuc2Nyb2xs
YmFyX3dpZHRoID0gMQoKICAgIGRlZiByZW5kZXIoc2VsZiwgc2l6ZSwgZm9jdXM9RmFsc2UpOgog
ICAgICAgIG1heGNvbCwgbWF4cm93ID0gc2l6ZQoKICAgICAgICAjINCS0YvRh9C40YHQu9GP0LXQ
vCDRgNCw0LfQvNC10YAg0LTQu9GPINC+0YHQvdC+0LLQvdC+0LPQviDQstC40LTQttC10YLQsAog
ICAgICAgIGNvbnRlbnRfd2lkdGggPSBtYXhjb2wgLSBzZWxmLnNjcm9sbGJhcl93aWR0aAogICAg
ICAgIGlmIGNvbnRlbnRfd2lkdGggPCAxOgogICAgICAgICAgICBjb250ZW50X3dpZHRoID0gMQoK
ICAgICAgICAjINCg0LXQvdC00LXRgNC40Lwg0L7RgdC90L7QstC90L7QuSDQstC40LTQttC10YIg
0YEg0L/RgNCw0LLQuNC70YzQvdGL0Lwg0YDQsNC30LzQtdGA0L7QvAogICAgICAgIGNhbnZhcyA9
IHNlbGYuX29yaWdpbmFsX3dpZGdldC5yZW5kZXIoKGNvbnRlbnRfd2lkdGgsIG1heHJvdyksIGZv
Y3VzKQoKICAgICAgICAjINCf0L7Qu9GD0YfQsNC10Lwg0LjQvdGE0L7RgNC80LDRhtC40Y4g0L4g
0L/QvtC30LjRhtC40Lgg0YHQutGA0L7Qu9C70LAKICAgICAgICBpZiBoYXNhdHRyKHNlbGYuX29y
aWdpbmFsX3dpZGdldCwgJ2JvZHknKToKICAgICAgICAgICAgIyDQlNC70Y8gTGlzdEJveAogICAg
ICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBtaWRkbGUsIHRvcCwgYm90dG9tID0gc2VsZi5f
b3JpZ2luYWxfd2lkZ2V0LmNhbGN1bGF0ZV92aXNpYmxlKAogICAgICAgICAgICAgICAgICAgIChj
b250ZW50X3dpZHRoLCBtYXhyb3cpLCBmb2N1cwogICAgICAgICAgICAgICAgKQogICAgICAgICAg
ICBleGNlcHQ6CiAgICAgICAgICAgICAgICAjINCV0YHQu9C4IGNhbGN1bGF0ZV92aXNpYmxlINC9
0LUg0YDQsNCx0L7RgtCw0LXRgiwg0LLQvtC30LLRgNCw0YnQsNC10LwgY2FudmFzINCx0LXQtyBz
Y3JvbGxiYXIKICAgICAgICAgICAgICAgIHJldHVybiBjYW52YXMKCiAgICAgICAgICAgIGlmIG1p
ZGRsZSBpcyBOb25lOgogICAgICAgICAgICAgICAgcmV0dXJuIGNhbnZhcwoKICAgICAgICAgICAg
IyDQn9C+0LvRg9GH0LDQtdC8INC+0LHRidC10LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0Y3Qu9C1
0LzQtdC90YLQvtCyCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHRvdGFsX3Jvd3Mg
PSBsZW4oc2VsZi5fb3JpZ2luYWxfd2lkZ2V0LmJvZHkpCiAgICAgICAgICAgIGV4Y2VwdDoKICAg
ICAgICAgICAgICAgIHRvdGFsX3Jvd3MgPSBtYXhyb3cKCiAgICAgICAgICAgIGlmIHRvdGFsX3Jv
d3MgPT0gMDoKICAgICAgICAgICAgICAgIHJldHVybiBjYW52YXMKCiAgICAgICAgICAgICMg0JLR
i9GH0LjRgdC70Y/QtdC8INC/0LDRgNCw0LzQtdGC0YDRiyBzY3JvbGxiYXIKICAgICAgICAgICAg
dmlzaWJsZV9yb3dzID0gbWF4cm93CiAgICAgICAgICAgIGlmIHRvdGFsX3Jvd3MgPD0gdmlzaWJs
ZV9yb3dzOgogICAgICAgICAgICAgICAgdGh1bWJfaGVpZ2h0ID0gbWF4cm93CiAgICAgICAgICAg
ICAgICB0aHVtYl90b3AgPSAwCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB0aHVt
Yl9oZWlnaHQgPSBtYXgoMSwgaW50KHZpc2libGVfcm93cyAqIHZpc2libGVfcm93cyAvIHRvdGFs
X3Jvd3MpKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGZvY3VzX3Bv
c2l0aW9uID0gc2VsZi5fb3JpZ2luYWxfd2lkZ2V0LmJvZHkuZm9jdXMKICAgICAgICAgICAgICAg
ICAgICBpZiBmb2N1c19wb3NpdGlvbiBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICBm
b2N1c19wb3NpdGlvbiA9IDAKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAg
ICAgICBmb2N1c19wb3NpdGlvbiA9IDAKCiAgICAgICAgICAgICAgICBzY3JvbGxhYmxlX2FyZWEg
PSBtYXhyb3cgLSB0aHVtYl9oZWlnaHQKICAgICAgICAgICAgICAgIGlmIHRvdGFsX3Jvd3MgPiB2
aXNpYmxlX3Jvd3M6CiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsX3JhdGlvID0gZm9jdXNfcG9z
aXRpb24gLyAodG90YWxfcm93cyAtIDEpIGlmIHRvdGFsX3Jvd3MgPiAxIGVsc2UgMAogICAgICAg
ICAgICAgICAgICAgIHRodW1iX3RvcCA9IGludChzY3JvbGxfcmF0aW8gKiBzY3JvbGxhYmxlX2Fy
ZWEpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHRodW1iX3RvcCA9
IDAKCiAgICAgICAgICAgICMg0KHQvtC30LTQsNC10Lwgc2Nyb2xsYmFyCiAgICAgICAgICAgIHNj
cm9sbGJhcl9jYW52YXMgPSBzZWxmLl9jcmVhdGVfc2Nyb2xsYmFyKG1heHJvdywgdGh1bWJfdG9w
LCB0aHVtYl9oZWlnaHQpCgogICAgICAgICAgICAjINCY0YHQv9C+0LvRjNC30YPQtdC8IENhbnZh
c0pvaW4g0L3QviDRg9Cx0LXQttC00LDQtdC80YHRjyDRh9GC0L4g0L7QsdGJ0LDRjyDRiNC40YDQ
uNC90LAgPSBtYXhjb2wKICAgICAgICAgICAgY29tYmluZWQgPSB1cndpZC5DYW52YXNKb2luKFsK
ICAgICAgICAgICAgICAgIChjYW52YXMsIE5vbmUsIEZhbHNlLCBjb250ZW50X3dpZHRoKSwKICAg
ICAgICAgICAgICAgIChzY3JvbGxiYXJfY2FudmFzLCBOb25lLCBGYWxzZSwgc2VsZi5zY3JvbGxi
YXJfd2lkdGgpCiAgICAgICAgICAgIF0pCgogICAgICAgICAgICByZXR1cm4gY29tYmluZWQKCiAg
ICAgICAgcmV0dXJuIGNhbnZhcwoKICAgIGRlZiBfY3JlYXRlX3Njcm9sbGJhcihzZWxmLCBoZWln
aHQsIHRodW1iX3RvcCwgdGh1bWJfaGVpZ2h0KToKICAgICAgICAiIiLQodC+0LfQtNCw0YLRjCBj
YW52YXMg0LTQu9GPIHNjcm9sbGJhciIiIgogICAgICAgIHBhcnRzID0gW10KCiAgICAgICAgIyDQ
ktC10YDRhdC90LjQuSDRgtGA0LXQugogICAgICAgIGlmIHRodW1iX3RvcCA+IDA6CiAgICAgICAg
ICAgIHRyYWNrX3RvcCA9IHVyd2lkLlNvbGlkQ2FudmFzKCfilIInLCAxLCB0aHVtYl90b3ApCiAg
ICAgICAgICAgIHRyYWNrX3RvcCA9IHVyd2lkLkNvbXBvc2l0ZUNhbnZhcyh0cmFja190b3ApCiAg
ICAgICAgICAgIHRyYWNrX3RvcC5maWxsX2F0dHIoJ3Njcm9sbGJhcl90cmFjaycpCiAgICAgICAg
ICAgIHBhcnRzLmFwcGVuZCgodHJhY2tfdG9wLCBOb25lLCBGYWxzZSkpCgogICAgICAgICMg0J/Q
vtC70LfRg9C90L7QugogICAgICAgIGlmIHRodW1iX2hlaWdodCA+IDA6CiAgICAgICAgICAgIHRo
dW1iID0gdXJ3aWQuU29saWRDYW52YXMoJ+KWiCcsIDEsIHRodW1iX2hlaWdodCkKICAgICAgICAg
ICAgdGh1bWIgPSB1cndpZC5Db21wb3NpdGVDYW52YXModGh1bWIpCiAgICAgICAgICAgIHRodW1i
LmZpbGxfYXR0cignc2Nyb2xsYmFyX3RodW1iJykKICAgICAgICAgICAgcGFydHMuYXBwZW5kKCh0
aHVtYiwgTm9uZSwgRmFsc2UpKQoKICAgICAgICAjINCd0LjQttC90LjQuSDRgtGA0LXQugogICAg
ICAgIHRyYWNrX2JvdHRvbV9oZWlnaHQgPSBoZWlnaHQgLSB0aHVtYl90b3AgLSB0aHVtYl9oZWln
aHQKICAgICAgICBpZiB0cmFja19ib3R0b21faGVpZ2h0ID4gMDoKICAgICAgICAgICAgdHJhY2tf
Ym90dG9tID0gdXJ3aWQuU29saWRDYW52YXMoJ+KUgicsIDEsIHRyYWNrX2JvdHRvbV9oZWlnaHQp
CiAgICAgICAgICAgIHRyYWNrX2JvdHRvbSA9IHVyd2lkLkNvbXBvc2l0ZUNhbnZhcyh0cmFja19i
b3R0b20pCiAgICAgICAgICAgIHRyYWNrX2JvdHRvbS5maWxsX2F0dHIoJ3Njcm9sbGJhcl90cmFj
aycpCiAgICAgICAgICAgIHBhcnRzLmFwcGVuZCgodHJhY2tfYm90dG9tLCBOb25lLCBGYWxzZSkp
CgogICAgICAgIGlmIG5vdCBwYXJ0czoKICAgICAgICAgICAgIyDQldGB0LvQuCDQvdC10YIg0YfQ
sNGB0YLQtdC5LCDRgdC+0LfQtNCw0LXQvCDQv9GD0YHRgtC+0LkgY2FudmFzCiAgICAgICAgICAg
IHJldHVybiB1cndpZC5Tb2xpZENhbnZhcygnICcsIDEsIGhlaWdodCkKCiAgICAgICAgcmV0dXJu
IHVyd2lkLkNhbnZhc0NvbWJpbmUocGFydHMpCgogICAgZGVmIHNlbGVjdGFibGUoc2VsZik6CiAg
ICAgICAgcmV0dXJuIHNlbGYuX29yaWdpbmFsX3dpZGdldC5zZWxlY3RhYmxlKCkKCiAgICBkZWYg
a2V5cHJlc3Moc2VsZiwgc2l6ZSwga2V5KToKICAgICAgICBtYXhjb2wsIG1heHJvdyA9IHNpemUK
ICAgICAgICBjb250ZW50X3dpZHRoID0gbWF4Y29sIC0gc2VsZi5zY3JvbGxiYXJfd2lkdGgKICAg
ICAgICBpZiBjb250ZW50X3dpZHRoIDwgMToKICAgICAgICAgICAgY29udGVudF93aWR0aCA9IDEK
ICAgICAgICByZXR1cm4gc2VsZi5fb3JpZ2luYWxfd2lkZ2V0LmtleXByZXNzKChjb250ZW50X3dp
ZHRoLCBtYXhyb3cpLCBrZXkpCgogICAgZGVmIG1vdXNlX2V2ZW50KHNlbGYsIHNpemUsIGV2ZW50
LCBidXR0b24sIGNvbCwgcm93LCBmb2N1cyk6CiAgICAgICAgbWF4Y29sLCBtYXhyb3cgPSBzaXpl
CiAgICAgICAgY29udGVudF93aWR0aCA9IG1heGNvbCAtIHNlbGYuc2Nyb2xsYmFyX3dpZHRoCiAg
ICAgICAgaWYgY29udGVudF93aWR0aCA8IDE6CiAgICAgICAgICAgIGNvbnRlbnRfd2lkdGggPSAx
CgogICAgICAgIGlmIGNvbCA8IGNvbnRlbnRfd2lkdGg6CiAgICAgICAgICAgIHJldHVybiBzZWxm
Ll9vcmlnaW5hbF93aWRnZXQubW91c2VfZXZlbnQoCiAgICAgICAgICAgICAgICAoY29udGVudF93
aWR0aCwgbWF4cm93KSwgZXZlbnQsIGJ1dHRvbiwgY29sLCByb3csIGZvY3VzCiAgICAgICAgICAg
ICkKICAgICAgICByZXR1cm4gRmFsc2UKCgpjbGFzcyBTZWxlY3RhYmxlVGV4dCh1cndpZC5UZXh0
KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0ZXh0LCBkYXRhLCBwYW5lbCk6CiAgICAgICAgc3Vw
ZXIoKS5fX2luaXRfXyh0ZXh0KQogICAgICAgIHNlbGYuZGF0YSA9IGRhdGEKICAgICAgICBzZWxm
LnBhbmVsID0gcGFuZWwKICAgICAgICBzZWxmLnNlbGVjdGVkID0gRmFsc2UKCiAgICBkZWYgc2Vs
ZWN0YWJsZShzZWxmKToKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGRlZiBrZXlwcmVzcyhzZWxm
LCBzaXplLCBrZXkpOgogICAgICAgIGlmIGtleSA9PSAnZW50ZXInOgogICAgICAgICAgICBzZWxm
LnBhbmVsLm9uX2l0ZW1fYWN0aXZhdGVkKHNlbGYuZGF0YSkKICAgICAgICAgICAgcmV0dXJuIE5v
bmUKICAgICAgICBlbGlmIGtleSA9PSAnaW5zZXJ0JyBhbmQgc2VsZi5kYXRhLmdldCgnY2FuX3Nl
bGVjdCcpOgogICAgICAgICAgICBzZWxmLnNlbGVjdGVkID0gbm90IHNlbGYuc2VsZWN0ZWQKICAg
ICAgICAgICAgc2VsZi5wYW5lbC51cGRhdGVfaXRlbV9kaXNwbGF5KHNlbGYpCiAgICAgICAgICAg
IHJldHVybiAnZG93bicKICAgICAgICBlbGlmIGtleSA9PSAnICcgYW5kIHNlbGYuZGF0YS5nZXQo
J2Nhbl9zZWxlY3QnKToKICAgICAgICAgICAgc2VsZi5zZWxlY3RlZCA9IG5vdCBzZWxmLnNlbGVj
dGVkCiAgICAgICAgICAgIHNlbGYucGFuZWwudXBkYXRlX2l0ZW1fZGlzcGxheShzZWxmKQogICAg
ICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIHJldHVybiBrZXkKCgpjbGFzcyBGaWxlVmlld2Vy
RGlhbG9nKHVyd2lkLldpZGdldFdyYXApOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHRpdGxlLCBj
b250ZW50LCBjYWxsYmFjayk6CiAgICAgICAgc2VsZi5jYWxsYmFjayA9IGNhbGxiYWNrCgogICAg
ICAgIHRleHRfd2lkZ2V0ID0gdXJ3aWQuVGV4dChjb250ZW50KQogICAgICAgIGxpc3Rib3ggPSB1
cndpZC5MaXN0Qm94KHVyd2lkLlNpbXBsZUZvY3VzTGlzdFdhbGtlcihbdGV4dF93aWRnZXRdKSkK
CiAgICAgICAgY2xvc2VfYnV0dG9uID0gdXJ3aWQuQnV0dG9uKCdDbG9zZSAoRVNDKScpCiAgICAg
ICAgdXJ3aWQuY29ubmVjdF9zaWduYWwoY2xvc2VfYnV0dG9uLCAnY2xpY2snLCBzZWxmLm9uX2Ns
b3NlKQoKICAgICAgICBwaWxlID0gdXJ3aWQuUGlsZShbCiAgICAgICAgICAgICgnd2VpZ2h0Jywg
MSwgdXJ3aWQuTGluZUJveChsaXN0Ym94LCB0aXRsZSkpLAogICAgICAgICAgICAoJ3BhY2snLCB1
cndpZC5BdHRyTWFwKGNsb3NlX2J1dHRvbiwgTm9uZSwgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKQog
ICAgICAgIF0pCgogICAgICAgIHN1cGVyKCkuX19pbml0X18odXJ3aWQuQXR0ck1hcChwaWxlLCAn
ZGlhbG9nJykpCgogICAgZGVmIG9uX2Nsb3NlKHNlbGYsIGJ1dHRvbik6CiAgICAgICAgc2VsZi5j
YWxsYmFjaygpCgogICAgZGVmIGtleXByZXNzKHNlbGYsIHNpemUsIGtleSk6CiAgICAgICAgaWYg
a2V5ID09ICdlc2MnOgogICAgICAgICAgICBzZWxmLmNhbGxiYWNrKCkKICAgICAgICAgICAgcmV0
dXJuIE5vbmUKICAgICAgICByZXR1cm4gc3VwZXIoKS5rZXlwcmVzcyhzaXplLCBrZXkpCgoKY2xh
c3MgVmVyc2lvblNlbGVjdERpYWxvZyh1cndpZC5XaWRnZXRXcmFwKToKICAgICIiItCU0LjQsNC7
0L7QsyDQstGL0LHQvtGA0LAg0LLQtdGA0YHQuNC4INGE0LDQudC70LAg0LTQu9GPINC/0YDQvtGB
0LzQvtGC0YDQsCDQuNC70Lgg0LTQtdC50YHRgtCy0LjQuSIiIgoKICAgIGRlZiBfX2luaXRfXyhz
ZWxmLCBmaWxlX2RhdGEsIHZlcnNpb25zLCBjYWxsYmFjayk6CiAgICAgICAgc2VsZi5jYWxsYmFj
ayA9IGNhbGxiYWNrCiAgICAgICAgc2VsZi52ZXJzaW9ucyA9IHZlcnNpb25zCiAgICAgICAgc2Vs
Zi5maWxlX2RhdGEgPSBmaWxlX2RhdGEKCiAgICAgICAgIyDQk9GA0YPQv9C/0LAg0YDQsNC00LjQ
vtC60L3QvtC/0L7QugogICAgICAgIHNlbGYucmFkaW9fZ3JvdXAgPSBbXQogICAgICAgIHZlcnNp
b25faXRlbXMgPSBbXQoKICAgICAgICBmb3IgaWR4LCB2IGluIGVudW1lcmF0ZSh2ZXJzaW9ucyk6
CiAgICAgICAgICAgIGlzX2xhdGVzdCA9IHYuZ2V0KCdJc0xhdGVzdCcsIEZhbHNlKQogICAgICAg
ICAgICBsYXRlc3RfbWFyayA9ICJbTEFURVNUXSAiIGlmIGlzX2xhdGVzdCBlbHNlICIgICAgICAg
ICAiCgogICAgICAgICAgICBzaXplID0gZm9ybWF0X3NpemUodi5nZXQoJ1NpemUnLCAwKSkKICAg
ICAgICAgICAgbXRpbWUgPSB2LmdldCgnTGFzdE1vZGlmaWVkJykuc3RyZnRpbWUoJyVZLSVtLSVk
ICVIOiVNOiVTJykgaWYgdi5nZXQoJ0xhc3RNb2RpZmllZCcpIGVsc2UgJ04vQScKICAgICAgICAg
ICAgdmVyc2lvbl9pZCA9IHYuZ2V0KCdWZXJzaW9uSWQnLCAnJylbOjEyXQoKICAgICAgICAgICAg
IyBsYWJlbCA9IGYie2xhdGVzdF9tYXJrfXt2ZXJzaW9uX2lkfSAge3NpemU6PjEwfSAge210aW1l
fSIKICAgICAgICAgICAgIyDQmNGB0L/QvtC70YzQt9GD0LXQvCDQvNC+0L3QvtGI0LjRgNC40L3Q
vdGL0Lkg0YjRgNC40YTRgiDQtNC70Y8g0YLQsNCx0LvQuNGG0YsKICAgICAgICAgICAgbGFiZWwg
PSBmIntsYXRlc3RfbWFya30ge3ZlcnNpb25faWQ6PDEyfSB7c2l6ZTo+MTB9IHttdGltZX0iCgog
ICAgICAgICAgICAjINCf0LXRgNCy0LDRjyDQstC10YDRgdC40Y8g0LLRi9Cx0YDQsNC90LAg0L/Q
viDRg9C80L7Qu9GH0LDQvdC40Y4KICAgICAgICAgICAgcmIgPSB1cndpZC5SYWRpb0J1dHRvbihz
ZWxmLnJhZGlvX2dyb3VwLCBsYWJlbCwgc3RhdGU9KGlkeCA9PSAwKSkKICAgICAgICAgICAgcmIu
dmVyc2lvbl9kYXRhID0gdiAgIyDQodC+0YXRgNCw0L3Rj9C10Lwg0LTQsNC90L3Ri9C1INCy0LXR
gNGB0LjQuCDQv9GA0Y/QvNC+INCyINC+0LHRitC10LrRgiDQutC90L7Qv9C60LgKCiAgICAgICAg
ICAgICMg0J7QsdC+0YDQsNGH0LjQstCw0LXQvCDQsiBBdHRyTWFwINC00LvRjyDQv9C+0LTRgdCy
0LXRgtC60LgKICAgICAgICAgICAgdmVyc2lvbl9pdGVtcy5hcHBlbmQodXJ3aWQuQXR0ck1hcChy
YiwgTm9uZSwgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKQoKICAgICAgICAjINCh0L/QuNGB0L7QuiDQ
stC10YDRgdC40Lkg0LIgTGlzdEJveAogICAgICAgIHNlbGYubGlzdGJveCA9IHVyd2lkLkxpc3RC
b3godXJ3aWQuU2ltcGxlRm9jdXNMaXN0V2Fsa2VyKHZlcnNpb25faXRlbXMpKQoKICAgICAgICAj
INCa0L3QvtC/0LrQuCDQtNC10LnRgdGC0LLQuNC5CiAgICAgICAgdmlld19idG4gPSB1cndpZC5C
dXR0b24oJ1sgVmlldyBdJykKICAgICAgICBkZWxfYnRuID0gdXJ3aWQuQnV0dG9uKCdbIERlbGV0
ZSBdJykKICAgICAgICBjb3B5X2J0biA9IHVyd2lkLkJ1dHRvbignWyBDb3B5IF0nKQogICAgICAg
IG1vdmVfYnRuID0gdXJ3aWQuQnV0dG9uKCdbIE1vdmUgXScpCiAgICAgICAgY2FuY2VsX2J0biA9
IHVyd2lkLkJ1dHRvbignWyBDYW5jZWwgXScpCiAgICAgICAgZG93bl90ZXh0ID0gdXJ3aWQuVGV4
dCgiVXNlIEYzIHRvIHZpZXcsIEY1IHRvIGNvcHksIEY2IHRvIG1vdmUsIEY4IHRvIGRlbGV0ZSBz
ZWxlY3RlZCB2ZXJzaW9uIikKICAgICAgICAKICAgICAgICAjINCe0LHRgNCw0LHQvtGC0YfQuNC6
INC90LDQttCw0YLQuNGPINC90LAg0LrQvdC+0L/QutC4INC00LXQudGB0YLQstC40LkKICAgICAg
ICBkZWYgb25fYWN0aW9uKGFjdGlvbik6CiAgICAgICAgICAgICMg0JjRidC10Lwg0LLRi9Cx0YDQ
sNC90L3Rg9GOINGA0LDQtNC40L7QutC90L7Qv9C60YMKICAgICAgICAgICAgZm9yIHJiIGluIHNl
bGYucmFkaW9fZ3JvdXA6CiAgICAgICAgICAgICAgICBpZiByYi5zdGF0ZToKICAgICAgICAgICAg
ICAgICAgICAjINCd0LDRiNC70Lgg4oCUINCy0YvQt9GL0LLQsNC10Lwg0Lgg0YHRgNCw0LfRgyDQ
stGL0YXQvtC00LjQvCDQuNC3INGE0YPQvdC60YbQuNC4CiAgICAgICAgICAgICAgICAgICAgcmV0
dXJuIHNlbGYuY2FsbGJhY2soYWN0aW9uLCByYi52ZXJzaW9uX2RhdGEpCgogICAgICAgICAgICAj
INCV0YHQu9C4INGG0LjQutC7INC30LDQutC+0L3Rh9C40LvRgdGPINC4INC90LjRh9C10LPQviDQ
vdC1INC90LDRiNC70Lgg4oCUINC+0YLQvNC10L3QsAogICAgICAgICAgICBzZWxmLmNhbGxiYWNr
KCdjYW5jZWwnLCBOb25lKQoKICAgICAgICAjINCf0YDQuNCy0Y/Qt9GL0LLQsNC10Lwg0YHQuNCz
0L3QsNC70YsKICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbCh2aWV3X2J0biwgJ2NsaWNrJywg
bGFtYmRhIGI6IG9uX2FjdGlvbigndmlldycpKQogICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFs
KGRlbF9idG4sICdjbGljaycsIGxhbWJkYSBiOiBvbl9hY3Rpb24oJ2RlbGV0ZScpKQogICAgICAg
IHVyd2lkLmNvbm5lY3Rfc2lnbmFsKGNvcHlfYnRuLCAnY2xpY2snLCBsYW1iZGEgYjogb25fYWN0
aW9uKCdjb3B5JykpCiAgICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwobW92ZV9idG4sICdjbGlj
aycsIGxhbWJkYSBiOiBvbl9hY3Rpb24oJ21vdmUnKSkKICAgICAgICB1cndpZC5jb25uZWN0X3Np
Z25hbChjYW5jZWxfYnRuLCAnY2xpY2snLCBsYW1iZGEgYjogc2VsZi5jYWxsYmFjaygnY2FuY2Vs
JywgTm9uZSkpCgogICAgICAgICMg0JrQvtC80L/QvtC90L7QstC60LAg0LrQvdC+0L/QvtC6CiAg
ICAgICAgYnV0dG9uc19jb2wgPSB1cndpZC5Db2x1bW5zKFsKICAgICAgICAgICAgKCd3ZWlnaHQn
LCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAo
dmlld19idG4sICdidXR0b24nLCBmb2N1c19tYXA9J2J1dHRvbl9mb2N1cycpKSwKICAgICAgICAg
ICAgKCdmaXhlZCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3
aWQuQXR0ck1hcChjb3B5X2J0biwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uX2ZvY3VzJykp
LAogICAgICAgICAgICAoJ2ZpeGVkJywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgICAgICAo
J3BhY2snLCB1cndpZC5BdHRyTWFwKG1vdmVfYnRuLCAnYnV0dG9uJywgZm9jdXNfbWFwPSdidXR0
b25fZm9jdXMnKSksCiAgICAgICAgICAgICgnZml4ZWQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAg
ICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAoZGVsX2J0biwgJ2J1dHRvbicsIGZvY3Vz
X21hcD0nYnV0dG9uX2ZvY3VzJykpLAogICAgICAgICAgICAoJ2ZpeGVkJywgMSwgdXJ3aWQuVGV4
dCgnJykpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKGNhbmNlbF9idG4sICdi
dXR0b24nLCBmb2N1c19tYXA9J2J1dHRvbl9mb2N1cycpKSwKICAgICAgICAgICAgKCd3ZWlnaHQn
LCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgXSwgZGl2aWRlY2hhcnM9MCkKCiAgICAgICAg
cGlsZSA9IHVyd2lkLlBpbGUoWwogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkp
LAogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHNlbGYubGlzdGJveCksCiAgICAgICAgICAgICgn
cGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgICAgICgncGFjaycsIGJ1dHRvbnNfY29s
KSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAgICAgKCdw
YWNrJywgZG93bl90ZXh0KSwKICAgICAgICBdKQoKICAgICAgICBmaWxsID0gdXJ3aWQuRmlsbGVy
KHBpbGUsIHZhbGlnbj0ndG9wJywgaGVpZ2h0PSgncmVsYXRpdmUnLCAxMDApKQoKICAgICAgICB0
aXRsZSA9IGYiU2VsZWN0IHZlcnNpb24gZm9yICd7ZmlsZV9kYXRhWyduYW1lJ119JyIKICAgICAg
ICBsaW5lYm94ID0gdXJ3aWQuTGluZUJveChmaWxsLCB0aXRsZT10aXRsZSkKCiAgICAgICAgc3Vw
ZXIoKS5fX2luaXRfXyh1cndpZC5BdHRyTWFwKGxpbmVib3gsICdkaWFsb2cnKSkKCiAgICBkZWYg
a2V5cHJlc3Moc2VsZiwgc2l6ZSwga2V5KToKICAgICAgICBpZiBrZXkgPT0gJ2VzYyc6CiAgICAg
ICAgICAgIHNlbGYuY2FsbGJhY2soJ2NhbmNlbCcsIE5vbmUpCiAgICAgICAgICAgIHJldHVybiBO
b25lCiAgICAgICAgIyBFbnRlciDQv9C+INGD0LzQvtC70YfQsNC90LjRjiDQtNC10LvQsNC10YIg
VmlldyDQtNC70Y8g0LLRi9Cx0YDQsNC90L3QvtC5INCy0LXRgNGB0LjQuAogICAgICAgIGZvciBy
YiBpbiBzZWxmLnJhZGlvX2dyb3VwOgogICAgICAgICAgICBpZiByYi5zdGF0ZToKICAgICAgICAg
ICAgICAgIGlmIGtleSA9PSAnZW50ZXInOgogICAgICAgICAgICAgICAgICAgIGJ0biA9IGdldF9m
b2N1c19idXR0b24oc2VsZi5fdykKICAgICAgICAgICAgICAgICAgICBpZiBidG4gaXMgbm90IE5v
bmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYnRuLCB1cndpZC5CdXR0
b24pIGFuZCBidG4uZ2V0X2xhYmVsKCkgPT0gJ1sgQ2FuY2VsIF0nOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIyBFbnRlciDQvdCwIENhbmNlbCAtPiDQvtGC0LzQtdC90LAKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsbGJhY2soJ2NhbmNlbCcsIE5vbmUpCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAgICAgICAgICAgICBp
ZiBpc2luc3RhbmNlKGJ0biwgdXJ3aWQuQnV0dG9uKSBhbmQgYnRuLmdldF9sYWJlbCgpID09ICdb
IERlbGV0ZSBdJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsbGJhY2soJ2Rl
bGV0ZScsIHJiLnZlcnNpb25fZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVy
biBOb25lCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYnRuLCB1cndpZC5C
dXR0b24pIGFuZCBidG4uZ2V0X2xhYmVsKCkgPT0gJ1sgTW92ZSBdJzoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHNlbGYuY2FsbGJhY2soJ21vdmUnLCByYi52ZXJzaW9uX2RhdGEpCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAgICAgICAgICAg
ICBpZiBpc2luc3RhbmNlKGJ0biwgdXJ3aWQuQnV0dG9uKSBhbmQgYnRuLmdldF9sYWJlbCgpID09
ICdbIENvcHkgXSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrKCdj
b3B5JywgcmIudmVyc2lvbl9kYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJu
IE5vbmUKICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrKCd2aWV3JywgcmIudmVyc2lv
bl9kYXRhKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgICAgICBp
ZiBrZXkgPT0gJ2YzJzoKICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrKCd2aWV3Jywg
cmIudmVyc2lvbl9kYXRhKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAg
ICAgICAgICBpZiBrZXkgPT0gJ2Y1JzoKICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNr
KCdjb3B5JywgcmIudmVyc2lvbl9kYXRhKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25l
CiAgICAgICAgICAgICAgICBpZiBrZXkgPT0gJ2Y2JzoKICAgICAgICAgICAgICAgICAgICBzZWxm
LmNhbGxiYWNrKCdtb3ZlJywgcmIudmVyc2lvbl9kYXRhKQogICAgICAgICAgICAgICAgICAgIHJl
dHVybiBOb25lCiAgICAgICAgICAgICAgICBpZiBrZXkgPT0gJ2Y4JzoKICAgICAgICAgICAgICAg
ICAgICBzZWxmLmNhbGxiYWNrKCdkZWxldGUnLCByYi52ZXJzaW9uX2RhdGEpCiAgICAgICAgICAg
ICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICByZXR1cm4gc3VwZXIoKS5rZXlwcmVzcyhzaXpl
LCBrZXkpCgoKY2xhc3MgT3ZlcndyaXRlRGlhbG9nKHVyd2lkLldpZGdldFdyYXApOgogICAgIiIi
0JTQuNCw0LvQvtCzINC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNGPINC/0LXRgNC10LfQsNC/0LjR
gdC4INGE0LDQudC70LAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgZmlsZW5hbWUsIHNvdXJj
ZV9pbmZvLCBkZXN0X2luZm8sIGNhbGxiYWNrLCBzaG93X3ZlcnNpb25fb3B0aW9ucz1GYWxzZSk6
CiAgICAgICAgc2VsZi5jYWxsYmFjayA9IGNhbGxiYWNrCgogICAgICAgIHRpdGxlX3RleHQgPSB1
cndpZC5UZXh0KCdGaWxlIGFscmVhZHkgZXhpc3RzIScsIGFsaWduPSdjZW50ZXInKQogICAgICAg
IGZpbGVfdGV4dCA9IHVyd2lkLlRleHQoZidGaWxlOiB7ZmlsZW5hbWV9JykKCiAgICAgICAgc3Jj
X3NpemUgPSBzb3VyY2VfaW5mby5nZXQoInNpemUiLCAwKQogICAgICAgIGRzdF9zaXplID0gZGVz
dF9pbmZvLmdldCgic2l6ZSIsIDApCgogICAgICAgIHNyY19tdGltZSA9IHNvdXJjZV9pbmZvLmdl
dCgibXRpbWUiKQogICAgICAgIGRzdF9tdGltZSA9IGRlc3RfaW5mby5nZXQoIm10aW1lIikKCiAg
ICAgICAgc3JjX3RpbWVfc3RyID0gc3JjX210aW1lLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSDolTTol
UyIpIGlmIHNyY19tdGltZSBlbHNlICJOL0EiCiAgICAgICAgZHN0X3RpbWVfc3RyID0gZHN0X210
aW1lLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSDolTTolUyIpIGlmIGRzdF9tdGltZSBlbHNlICJOL0Ei
CgogICAgICAgIHNvdXJjZV90ZXh0ID0gdXJ3aWQuVGV4dChmJ1NvdXJjZToge2Zvcm1hdF9zaXpl
KHNyY19zaXplKX0gfCB7c3JjX3RpbWVfc3RyfScpCiAgICAgICAgZGVzdF90ZXh0ID0gdXJ3aWQu
VGV4dChmJ1RhcmdldDoge2Zvcm1hdF9zaXplKGRzdF9zaXplKX0gfCB7ZHN0X3RpbWVfc3RyfScp
CgogICAgICAgIGJ1dHRvbnNfbGlzdCA9IFtdCgogICAgICAgIG92ZXJ3cml0ZV9idXR0b24gPSB1
cndpZC5CdXR0b24oJ1sgT3ZlcndyaXRlIF0nKQogICAgICAgIGFsbF9idXR0b24gPSB1cndpZC5C
dXR0b24oJ1sgQWxsIF0nKQogICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFsKG92ZXJ3cml0ZV9i
dXR0b24sICdjbGljaycsIGxhbWJkYSBiOiBzZWxmLm9uX2Nob2ljZSgnb3ZlcndyaXRlJykpCiAg
ICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwoYWxsX2J1dHRvbiwgJ2NsaWNrJywgbGFtYmRhIGI6
IHNlbGYub25fY2hvaWNlKCdhbGwnKSkKICAgICAgICBidXR0b25zX2xpc3QuZXh0ZW5kKFsKICAg
ICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcChvdmVyd3JpdGVfYnV0dG9uLCAnYnV0dG9u
JywgZm9jdXNfbWFwPSdidXR0b25fZm9jdXMnKSksCiAgICAgICAgICAgICgnZml4ZWQnLCAxLCB1
cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAoYWxsX2J1
dHRvbiwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uX2ZvY3VzJykpLAogICAgICAgICAgICAo
J2ZpeGVkJywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgIF0pCgogICAgICAgIGlmIHNob3df
dmVyc2lvbl9vcHRpb25zOgogICAgICAgICAgICB2ZXJzaW9uX2J1dHRvbiA9IHVyd2lkLkJ1dHRv
bignWyBOZXcgVmVyc2lvbiBdJykKICAgICAgICAgICAgdmVyc2lvbl9hbGxfYnV0dG9uID0gdXJ3
aWQuQnV0dG9uKCdbIFZlcnNpb24gQWxsIF0nKQogICAgICAgICAgICB1cndpZC5jb25uZWN0X3Np
Z25hbCh2ZXJzaW9uX2J1dHRvbiwgJ2NsaWNrJywgbGFtYmRhIGI6IHNlbGYub25fY2hvaWNlKCd2
ZXJzaW9uJykpCiAgICAgICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFsKHZlcnNpb25fYWxsX2J1
dHRvbiwgJ2NsaWNrJywgbGFtYmRhIGI6IHNlbGYub25fY2hvaWNlKCd2ZXJzaW9uX2FsbCcpKQog
ICAgICAgICAgICBidXR0b25zX2xpc3QuZXh0ZW5kKFsKICAgICAgICAgICAgICAgICgncGFjaycs
IHVyd2lkLkF0dHJNYXAodmVyc2lvbl9idXR0b24sICdidXR0b24nLCBmb2N1c19tYXA9J2J1dHRv
bl9mb2N1cycpKSwKICAgICAgICAgICAgICAgICgnZml4ZWQnLCAxLCB1cndpZC5UZXh0KCcnKSks
CiAgICAgICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKHZlcnNpb25fYWxsX2J1dHRv
biwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uX2ZvY3VzJykpLAogICAgICAgICAgICAgICAg
KCdmaXhlZCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICAgICAgXSkKCiAgICAgICAgc2tp
cF9idXR0b24gPSB1cndpZC5CdXR0b24oJ1sgU2tpcCBdJykKICAgICAgICBza2lwX2FsbF9idXR0
b24gPSB1cndpZC5CdXR0b24oJ1sgU2tpcCBBbGwgXScpCiAgICAgICAgY2FuY2VsX2J1dHRvbiA9
IHVyd2lkLkJ1dHRvbignWyBDYW5jZWwgXScpCiAgICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwo
c2tpcF9idXR0b24sICdjbGljaycsIGxhbWJkYSBiOiBzZWxmLm9uX2Nob2ljZSgnc2tpcCcpKQog
ICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFsKHNraXBfYWxsX2J1dHRvbiwgJ2NsaWNrJywgbGFt
YmRhIGI6IHNlbGYub25fY2hvaWNlKCdza2lwX2FsbCcpKQogICAgICAgIHVyd2lkLmNvbm5lY3Rf
c2lnbmFsKGNhbmNlbF9idXR0b24sICdjbGljaycsIGxhbWJkYSBiOiBzZWxmLm9uX2Nob2ljZSgn
Y2FuY2VsJykpCiAgICAgICAgYnV0dG9uc19saXN0LmV4dGVuZChbCiAgICAgICAgICAgICgncGFj
aycsIHVyd2lkLkF0dHJNYXAoc2tpcF9idXR0b24sICdidXR0b24nLCBmb2N1c19tYXA9J2J1dHRv
bl9mb2N1cycpKSwKICAgICAgICAgICAgKCdmaXhlZCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAg
ICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcChza2lwX2FsbF9idXR0b24sICdidXR0b24n
LCBmb2N1c19tYXA9J2J1dHRvbl9mb2N1cycpKSwKICAgICAgICAgICAgKCdmaXhlZCcsIDEsIHVy
d2lkLlRleHQoJycpKSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcChjYW5jZWxf
YnV0dG9uLCAnYnV0dG9uJywgZm9jdXNfbWFwPSdidXR0b25fZm9jdXMnKSksCiAgICAgICAgXSkK
CiAgICAgICAgYnV0dG9uc19saXN0Lmluc2VydCgwLCAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQo
JycpKSkKICAgICAgICBidXR0b25zX2xpc3QuYXBwZW5kKCgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4
dCgnJykpKQoKICAgICAgICBidXR0b25zID0gdXJ3aWQuQ29sdW1ucyhidXR0b25zX2xpc3QsIGRp
dmlkZWNoYXJzPTApCgogICAgICAgIHBpbGUgPSB1cndpZC5QaWxlKFsKICAgICAgICAgICAgKCdw
YWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAgICAgKCdwYWNrJywgdGl0bGVfdGV4dCks
CiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgICAgICgncGFj
aycsIGZpbGVfdGV4dCksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAg
ICAgICAgICAgICgncGFjaycsIHNvdXJjZV90ZXh0KSwKICAgICAgICAgICAgKCdwYWNrJywgZGVz
dF90ZXh0KSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAg
ICAgKCdwYWNrJywgYnV0dG9ucyksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIo
KSksCiAgICAgICAgXSkKICAgICAgICBmaWxsID0gdXJ3aWQuRmlsbGVyKHBpbGUsIHZhbGlnbj0n
dG9wJykKICAgICAgICBsaW5lYm94ID0gdXJ3aWQuTGluZUJveChmaWxsKQoKICAgICAgICBzdXBl
cigpLl9faW5pdF9fKHVyd2lkLkF0dHJNYXAobGluZWJveCwgJ2RpYWxvZycpKQoKICAgIGRlZiBv
bl9jaG9pY2Uoc2VsZiwgY2hvaWNlKToKICAgICAgICBzZWxmLmNhbGxiYWNrKGNob2ljZSkKCiAg
ICBkZWYga2V5cHJlc3Moc2VsZiwgc2l6ZSwga2V5KToKICAgICAgICBpZiBrZXkgPT0gJ2VzYyc6
CiAgICAgICAgICAgIHNlbGYuY2FsbGJhY2soJ2NhbmNlbCcpCiAgICAgICAgICAgIHJldHVybiBO
b25lCiAgICAgICAgcmV0dXJuIHN1cGVyKCkua2V5cHJlc3Moc2l6ZSwga2V5KQoKCmNsYXNzIFBy
b2dyZXNzRGlhbG9nKHVyd2lkLldpZGdldFdyYXApOgogICAgIiIi0JTQuNCw0LvQvtCzINC/0YDQ
vtCz0YDQtdGB0YHQsCDQvtC/0LXRgNCw0YbQuNC5INCyINGB0YLQuNC70LUgTUMiIiIKCiAgICBk
ZWYgX19pbml0X18oc2VsZiwgdGl0bGUsIGNhbGxiYWNrPU5vbmUpOgogICAgICAgIHNlbGYuY2Fs
bGJhY2sgPSBjYWxsYmFjawogICAgICAgIHNlbGYudGl0bGVfdGV4dCA9IHVyd2lkLlRleHQodGl0
bGUsIGFsaWduPSdjZW50ZXInKQogICAgICAgIHNlbGYucHJvZ3Jlc3NfdGV4dCA9IHVyd2lkLlRl
eHQoJycsIGFsaWduPSdsZWZ0JykKICAgICAgICBzZWxmLmZpbGVfdGV4dCA9IHVyd2lkLlRleHQo
JycsIGFsaWduPSdsZWZ0JykKICAgICAgICBzZWxmLnN0YXRzX3RleHQgPSB1cndpZC5UZXh0KCcn
LCBhbGlnbj0nbGVmdCcpCiAgICAgICAgc2VsZi5ieXRlc190ZXh0ID0gdXJ3aWQuVGV4dCgnJywg
YWxpZ249J2xlZnQnKQoKICAgICAgICBzZWxmLnRvdGFsX2ZpbGVzID0gMAogICAgICAgIHNlbGYu
cHJvY2Vzc2VkX2ZpbGVzID0gMAogICAgICAgIHNlbGYuc3VjY2Vzc19jb3VudCA9IDAKICAgICAg
ICBzZWxmLmZhaWxfY291bnQgPSAwCiAgICAgICAgc2VsZi5jdXJyZW50X2ZpbGUgPSAnJwogICAg
ICAgIHNlbGYudG90YWxfYnl0ZXMgPSAwCiAgICAgICAgc2VsZi5wcm9jZXNzZWRfYnl0ZXMgPSAw
CiAgICAgICAgc2VsZi5zdGFydF90aW1lID0gdGltZS50aW1lKCkKCiAgICAgICAgc2tpcF9idXR0
b24gPSB1cndpZC5CdXR0b24oJ1sgU2tpcCBdJykKICAgICAgICBjYW5jZWxfYnV0dG9uID0gdXJ3
aWQuQnV0dG9uKCdbIENhbmNlbCBdJykKCiAgICAgICAgc2VsZi5jYW5jZWxsZWQgPSBGYWxzZQoK
ICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChza2lwX2J1dHRvbiwgJ2NsaWNrJywgbGFtYmRh
IGI6IE5vbmUpCiAgICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwoY2FuY2VsX2J1dHRvbiwgJ2Ns
aWNrJywgc2VsZi5vbl9jYW5jZWwpCgogICAgICAgIGJ1dHRvbnMgPSB1cndpZC5Db2x1bW5zKFsK
ICAgICAgICAgICAgKCd3ZWlnaHQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICgn
cGFjaycsIHVyd2lkLkF0dHJNYXAoc2tpcF9idXR0b24sICdidXR0b24nLCBmb2N1c19tYXA9J2J1
dHRvbl9mb2N1cycpKSwKICAgICAgICAgICAgKCdmaXhlZCcsIDIsIHVyd2lkLlRleHQoJycpKSwK
ICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcChjYW5jZWxfYnV0dG9uLCAnYnV0dG9u
JywgZm9jdXNfbWFwPSdidXR0b25fZm9jdXMnKSksCiAgICAgICAgICAgICgnd2VpZ2h0JywgMSwg
dXJ3aWQuVGV4dCgnJykpLAogICAgICAgIF0sIGRpdmlkZWNoYXJzPTApCgogICAgICAgIHBpbGUg
PSB1cndpZC5QaWxlKFsKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAg
ICAgICAgICAgKCdwYWNrJywgc2VsZi50aXRsZV90ZXh0KSwKICAgICAgICAgICAgKCdwYWNrJywg
dXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAgICAgKCdwYWNrJywgc2VsZi5wcm9ncmVzc190ZXh0
KSwKICAgICAgICAgICAgKCdwYWNrJywgc2VsZi5maWxlX3RleHQpLAogICAgICAgICAgICAoJ3Bh
Y2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAoJ3BhY2snLCBzZWxmLnN0YXRzX3Rl
eHQpLAogICAgICAgICAgICAoJ3BhY2snLCBzZWxmLmJ5dGVzX3RleHQpLAogICAgICAgICAgICAo
J3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAoJ3BhY2snLCBidXR0b25zKSwK
ICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICBdKQoKICAgICAg
ICBmaWxsID0gdXJ3aWQuRmlsbGVyKHBpbGUsIHZhbGlnbj0ndG9wJykKICAgICAgICBsaW5lYm94
ID0gdXJ3aWQuTGluZUJveChmaWxsKQoKICAgICAgICBzdXBlcigpLl9faW5pdF9fKHVyd2lkLkF0
dHJNYXAobGluZWJveCwgJ2RpYWxvZycpKQoKICAgIGRlZiBvbl9jYW5jZWwoc2VsZiwgYnV0dG9u
KToKICAgICAgICBzZWxmLmNhbmNlbGxlZCA9IFRydWUKICAgICAgICBpZiBzZWxmLmNhbGxiYWNr
OgogICAgICAgICAgICBzZWxmLmNhbGxiYWNrKCkKCiAgICBkZWYga2V5cHJlc3Moc2VsZiwgc2l6
ZSwga2V5KToKICAgICAgICBpZiBrZXkgPT0gJ2VzYyc6CiAgICAgICAgICAgIHNlbGYub25fY2Fu
Y2VsKE5vbmUpCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgcmV0dXJuIHN1cGVyKCku
a2V5cHJlc3Moc2l6ZSwga2V5KQoKICAgIGRlZiBnZXRfc3BlZWRfc3RyKHNlbGYpOgogICAgICAg
ICIiItCf0L7Qu9GD0YfQuNGC0Ywg0YHRgtGA0L7QutGDINGB0LrQvtGA0L7RgdGC0Lgg0L/QtdGA
0LXQtNCw0YfQuCIiIgogICAgICAgIGVsYXBzZWQgPSB0aW1lLnRpbWUoKSAtIHNlbGYuc3RhcnRf
dGltZQogICAgICAgIGlmIGVsYXBzZWQgPiAwOgogICAgICAgICAgICBzcGVlZCA9IHNlbGYucHJv
Y2Vzc2VkX2J5dGVzIC8gZWxhcHNlZAogICAgICAgICAgICByZXR1cm4gZid7Zm9ybWF0X3NpemUo
c3BlZWQpfS9zJwogICAgICAgIHJldHVybiAnMCBCL3MnCgogICAgZGVmIHVwZGF0ZShzZWxmLCBj
dXJyZW50X2ZpbGU9JycsIGZpbGVfc2l6ZT0wKToKICAgICAgICBpZiBjdXJyZW50X2ZpbGU6CiAg
ICAgICAgICAgIHNlbGYuY3VycmVudF9maWxlID0gY3VycmVudF9maWxlCiAgICAgICAgICAgIHNl
bGYucHJvY2Vzc2VkX2ZpbGVzICs9IDEKICAgICAgICAgICAgc2VsZi5wcm9jZXNzZWRfYnl0ZXMg
Kz0gZmlsZV9zaXplCgogICAgICAgIGlmIHNlbGYudG90YWxfZmlsZXMgPiAwOgogICAgICAgICAg
ICBwZXJjZW50ID0gaW50KChzZWxmLnByb2Nlc3NlZF9maWxlcyAvIHNlbGYudG90YWxfZmlsZXMp
ICogMTAwKQogICAgICAgICAgICBiYXJfd2lkdGggPSA0MAogICAgICAgICAgICBmaWxsZWQgPSBp
bnQoKHNlbGYucHJvY2Vzc2VkX2ZpbGVzIC8gc2VsZi50b3RhbF9maWxlcykgKiBiYXJfd2lkdGgp
CiAgICAgICAgICAgIGJhciA9ICfilognICogZmlsbGVkICsgJ+KWkScgKiAoYmFyX3dpZHRoIC0g
ZmlsbGVkKQogICAgICAgICAgICBzZWxmLnByb2dyZXNzX3RleHQuc2V0X3RleHQoZidbe2Jhcn1d
IHtwZXJjZW50fSUnKQoKICAgICAgICBpZiBzZWxmLmN1cnJlbnRfZmlsZToKICAgICAgICAgICAg
ZGlzcGxheV9maWxlID0gc2VsZi5jdXJyZW50X2ZpbGUKICAgICAgICAgICAgaWYgbGVuKGRpc3Bs
YXlfZmlsZSkgPiA2MDoKICAgICAgICAgICAgICAgIGRpc3BsYXlfZmlsZSA9ICcuLi4nICsgZGlz
cGxheV9maWxlWy01NzpdCiAgICAgICAgICAgIHNlbGYuZmlsZV90ZXh0LnNldF90ZXh0KGYnRmls
ZToge2Rpc3BsYXlfZmlsZX0nKQoKICAgICAgICBzZWxmLnN0YXRzX3RleHQuc2V0X3RleHQoCiAg
ICAgICAgICAgIGYnVG90YWw6IHtzZWxmLnRvdGFsX2ZpbGVzfSB8IFByb2Nlc3NlZDoge3NlbGYu
cHJvY2Vzc2VkX2ZpbGVzfSB8ICcKICAgICAgICAgICAgZidTdWNjZXNzOiB7c2VsZi5zdWNjZXNz
X2NvdW50fSB8IEZhaWxlZDoge3NlbGYuZmFpbF9jb3VudH0nCiAgICAgICAgKQoKICAgICAgICBp
ZiBzZWxmLnRvdGFsX2J5dGVzID4gMDoKICAgICAgICAgICAgYnl0ZXNfcGVyY2VudCA9IGludCgo
c2VsZi5wcm9jZXNzZWRfYnl0ZXMgLyBzZWxmLnRvdGFsX2J5dGVzKSAqIDEwMCkgaWYgc2VsZi50
b3RhbF9ieXRlcyA+IDAgZWxzZSAwCiAgICAgICAgICAgIHNwZWVkX3N0ciA9IHNlbGYuZ2V0X3Nw
ZWVkX3N0cigpCiAgICAgICAgICAgIHNlbGYuYnl0ZXNfdGV4dC5zZXRfdGV4dCgKICAgICAgICAg
ICAgICAgIGYnQnl0ZXM6IHtmb3JtYXRfc2l6ZShzZWxmLnByb2Nlc3NlZF9ieXRlcyl9IC8ge2Zv
cm1hdF9zaXplKHNlbGYudG90YWxfYnl0ZXMpfSAoe2J5dGVzX3BlcmNlbnR9JSkgfCBTcGVlZDog
e3NwZWVkX3N0cn0nCiAgICAgICAgICAgICkKCiAgICBkZWYgc2V0X3RvdGFsKHNlbGYsIHRvdGFs
X2ZpbGVzLCB0b3RhbF9ieXRlcz0wKToKICAgICAgICBzZWxmLnRvdGFsX2ZpbGVzID0gdG90YWxf
ZmlsZXMKICAgICAgICBzZWxmLnRvdGFsX2J5dGVzID0gdG90YWxfYnl0ZXMKICAgICAgICBzZWxm
LnN0YXJ0X3RpbWUgPSB0aW1lLnRpbWUoKQogICAgICAgIHNlbGYudXBkYXRlKCkKCiAgICBkZWYg
YWRkX3N1Y2Nlc3Moc2VsZik6CiAgICAgICAgc2VsZi5zdWNjZXNzX2NvdW50ICs9IDEKICAgICAg
ICBzZWxmLnVwZGF0ZSgpCgogICAgZGVmIGFkZF9mYWlsdXJlKHNlbGYpOgogICAgICAgIHNlbGYu
ZmFpbF9jb3VudCArPSAxCiAgICAgICAgc2VsZi51cGRhdGUoKQoKCmNsYXNzIFNvcnREaWFsb2co
dXJ3aWQuV2lkZ2V0V3JhcCk6CiAgICAiIiLQlNC40LDQu9C+0LMg0LLRi9Cx0L7RgNCwINGA0LXQ
ttC40LzQsCDRgdC+0YDRgtC40YDQvtCy0LrQuCIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBj
dXJyZW50X21vZGUsIGN1cnJlbnRfcmV2ZXJzZSwgY2FsbGJhY2spOgogICAgICAgIHNlbGYuY2Fs
bGJhY2sgPSBjYWxsYmFjawogICAgICAgIHNlbGYuY3VycmVudF9tb2RlID0gY3VycmVudF9tb2Rl
CiAgICAgICAgc2VsZi5jdXJyZW50X3JldmVyc2UgPSBjdXJyZW50X3JldmVyc2UKCiAgICAgICAg
IyDQo9Cx0LjRgNCw0LXQvCB0aXRsZV90ZXh0INC40Lcg0LrQvtC90YLQtdC90YLQsCwg0L7QvSDQ
sdGD0LTQtdGCINCyINGA0LDQvNC60LUKICAgICAgICAjIHRpdGxlX3RleHQgPSB1cndpZC5UZXh0
KCdTb3J0IGJ5OicsIGFsaWduPSdjZW50ZXInKQoKICAgICAgICBzZWxmLnJhZGlvX2dyb3VwID0g
W10KICAgICAgICBtb2RlcyA9IFsKICAgICAgICAgICAgKCdub25lJywgJ1Vuc29ydGVkJyksCiAg
ICAgICAgICAgICgnbmFtZScsICdOYW1lJyksCiAgICAgICAgICAgICgnZXh0JywgJ0V4dGVuc2lv
bicpLAogICAgICAgICAgICAoJ3NpemUnLCAnU2l6ZScpLAogICAgICAgICAgICAoJ3RpbWUnLCAn
VGltZScpCiAgICAgICAgXQoKICAgICAgICByYWRpb19idXR0b25zID0gW10KICAgICAgICBmb3Ig
bW9kZSwgbGFiZWwgaW4gbW9kZXM6CiAgICAgICAgICAgIGlzX3NlbGVjdGVkID0gKG1vZGUgPT0g
Y3VycmVudF9tb2RlKQogICAgICAgICAgICByYiA9IHVyd2lkLlJhZGlvQnV0dG9uKHNlbGYucmFk
aW9fZ3JvdXAsIGxhYmVsLCBzdGF0ZT1pc19zZWxlY3RlZCkKICAgICAgICAgICAgcmIubW9kZSA9
IG1vZGUKICAgICAgICAgICAgcmFkaW9fYnV0dG9ucy5hcHBlbmQodXJ3aWQuQXR0ck1hcChyYiwg
Tm9uZSwgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKQoKICAgICAgICBzZWxmLnJldmVyc2VfY2hlY2ti
b3ggPSB1cndpZC5DaGVja0JveCgiUmV2ZXJzZSBvcmRlciIsIHN0YXRlPWN1cnJlbnRfcmV2ZXJz
ZSkKCiAgICAgICAgb2tfYnV0dG9uID0gdXJ3aWQuQnV0dG9uKCdbIE9LIF0nKQogICAgICAgIGNh
bmNlbF9idXR0b24gPSB1cndpZC5CdXR0b24oJ1sgQ2FuY2VsIF0nKQoKICAgICAgICB1cndpZC5j
b25uZWN0X3NpZ25hbChva19idXR0b24sICdjbGljaycsIHNlbGYub25fb2spCiAgICAgICAgdXJ3
aWQuY29ubmVjdF9zaWduYWwoY2FuY2VsX2J1dHRvbiwgJ2NsaWNrJywgc2VsZi5vbl9jYW5jZWwp
CgogICAgICAgIGJ1dHRvbnMgPSB1cndpZC5Db2x1bW5zKFsKICAgICAgICAgICAgKCd3ZWlnaHQn
LCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAo
b2tfYnV0dG9uLCAnYnV0dG9uJywgZm9jdXNfbWFwPSdidXR0b25fZm9jdXMnKSksCiAgICAgICAg
ICAgICgnZml4ZWQnLCAyLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICgncGFjaycsIHVy
d2lkLkF0dHJNYXAoY2FuY2VsX2J1dHRvbiwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uX2Zv
Y3VzJykpLAogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAg
ICBdLCBkaXZpZGVjaGFycz0wKQoKICAgICAgICBjb250ZW50ID0gWwogICAgICAgICAgICAoJ3Bh
Y2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAjICgncGFjaycsIHRpdGxlX3RleHQp
LCAjINCj0LTQsNC70LXQvdC+CiAgICAgICAgICAgICMgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigp
KSwgIyDQo9C00LDQu9C10L3QvgogICAgICAgIF0KCiAgICAgICAgY29udGVudC5leHRlbmQoWygn
cGFjaycsIHJiKSBmb3IgcmIgaW4gcmFkaW9fYnV0dG9uc10pCgogICAgICAgIGNvbnRlbnQuZXh0
ZW5kKFsKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAgICAg
KCdwYWNrJywgdXJ3aWQuQXR0ck1hcChzZWxmLnJldmVyc2VfY2hlY2tib3gsIE5vbmUsIGZvY3Vz
X21hcD0nc2VsZWN0ZWQnKSksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSks
CiAgICAgICAgICAgICgncGFjaycsIGJ1dHRvbnMpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndp
ZC5EaXZpZGVyKCkpLAogICAgICAgIF0pCgogICAgICAgIHBpbGUgPSB1cndpZC5QaWxlKGNvbnRl
bnQpCiAgICAgICAgZmlsbCA9IHVyd2lkLkZpbGxlcihwaWxlLCB2YWxpZ249J3RvcCcpCgogICAg
ICAgICMgRklYOiDQl9Cw0LPQvtC70L7QstC+0Log0L/QtdGA0LXQvdC10YHQtdC9INCyIHRpdGxl
INGA0LDQvNC60LgKICAgICAgICBsaW5lYm94ID0gdXJ3aWQuTGluZUJveChmaWxsLCB0aXRsZT0i
U29ydCBieSIpCgogICAgICAgIHN1cGVyKCkuX19pbml0X18odXJ3aWQuQXR0ck1hcChsaW5lYm94
LCAnZGlhbG9nJykpCgogICAgZGVmIG9uX29rKHNlbGYsIGJ1dHRvbik6CiAgICAgICAgcmV2ZXJz
ZSA9IHNlbGYucmV2ZXJzZV9jaGVja2JveC5nZXRfc3RhdGUoKQogICAgICAgIGZvciByYiBpbiBz
ZWxmLnJhZGlvX2dyb3VwOgogICAgICAgICAgICBpZiByYi5zdGF0ZToKICAgICAgICAgICAgICAg
IHNlbGYuY2FsbGJhY2soVHJ1ZSwgcmIubW9kZSwgcmV2ZXJzZSkKICAgICAgICAgICAgICAgIHJl
dHVybgogICAgICAgIHNlbGYuY2FsbGJhY2soRmFsc2UsIE5vbmUsIEZhbHNlKQoKICAgIGRlZiBv
bl9jYW5jZWwoc2VsZiwgYnV0dG9uKToKICAgICAgICBzZWxmLmNhbGxiYWNrKEZhbHNlLCBOb25l
LCBGYWxzZSkKCiAgICBkZWYga2V5cHJlc3Moc2VsZiwgc2l6ZSwga2V5KToKICAgICAgICBpZiBr
ZXkgPT0gJ2VudGVyJzoKICAgICAgICAgICAgc2VsZi5vbl9vayhOb25lKQogICAgICAgICAgICBy
ZXR1cm4gTm9uZQogICAgICAgIGVsaWYga2V5ID09ICdlc2MnOgogICAgICAgICAgICBzZWxmLm9u
X2NhbmNlbChOb25lKQogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIHJldHVybiBzdXBl
cigpLmtleXByZXNzKHNpemUsIGtleSkKCgpjbGFzcyBDb3B5TW92ZURpYWxvZyh1cndpZC5XaWRn
ZXRXcmFwKToKICAgICIiItCU0LjQsNC70L7QsyDQutC+0L/QuNGA0L7QstCw0L3QuNGPL9C/0LXR
gNC10LzQtdGJ0LXQvdC40Y8g0LIg0YHRgtC40LvQtSBNQyIiIgoKICAgIGRlZiBfX2luaXRfXyhz
ZWxmLCB0aXRsZSwgc291cmNlX2Rlc2MsIGRlc3RfcGF0aCwgY2FsbGJhY2spOgogICAgICAgIHNl
bGYuY2FsbGJhY2sgPSBjYWxsYmFjawoKICAgICAgICAjIHRpdGxlX3RleHQgPSB1cndpZC5UZXh0
KCgnZGlhbG9nX3RpdGxlJywgdGl0bGUpLCBhbGlnbj0nY2VudGVyJykKICAgICAgICBzb3VyY2Vf
dGV4dCA9IHVyd2lkLlRleHQoc291cmNlX2Rlc2MpCiAgICAgICAgdG9fdGV4dCA9IHVyd2lkLlRl
eHQoIlRvOiAiKQogICAgICAgIGZyb21fdGV4dCA9IHVyd2lkLlRleHQoIkZyb206ICIpCiAgICAg
ICAgc2VsZi5kZXN0X2VkaXQgPSB1cndpZC5FZGl0KCcnLCBkZXN0X3BhdGgpCgogICAgICAgIG9r
X2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBPSyBdJykKICAgICAgICBjYW5jZWxfYnV0dG9uID0g
dXJ3aWQuQnV0dG9uKCdbIENhbmNlbCBdJykKCiAgICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwo
b2tfYnV0dG9uLCAnY2xpY2snLCBzZWxmLm9uX29rKQogICAgICAgIHVyd2lkLmNvbm5lY3Rfc2ln
bmFsKGNhbmNlbF9idXR0b24sICdjbGljaycsIHNlbGYub25fY2FuY2VsKQoKICAgICAgICBidXR0
b25zID0gdXJ3aWQuQ29sdW1ucyhbCiAgICAgICAgICAgICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4
dCgnJykpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKG9rX2J1dHRvbiwgJ2J1
dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uX2ZvY3VzJykpLAogICAgICAgICAgICAoJ2ZpeGVkJywg
MiwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKGNh
bmNlbF9idXR0b24sICdidXR0b24nLCBmb2N1c19tYXA9J2J1dHRvbl9mb2N1cycpKSwKICAgICAg
ICAgICAgKCd3ZWlnaHQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgXSwgZGl2aWRlY2hh
cnM9MCkKCiAgICAgICAgcGlsZSA9IHVyd2lkLlBpbGUoWwogICAgICAgICAgICAoJ3BhY2snLCB1
cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAoJ3BhY2snLCBmcm9tX3RleHQpLAogICAgICAg
ICAgICAoJ3BhY2snLCBzb3VyY2VfdGV4dCksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRp
dmlkZXIoKSksCiAgICAgICAgICAgICgncGFjaycsIHRvX3RleHQpLAogICAgICAgICAgICAoJ3Bh
Y2snLCB1cndpZC5BdHRyTWFwKHNlbGYuZGVzdF9lZGl0LCAnZWRpdCcsIGZvY3VzX21hcD0nZWRp
dF9mb2N1cycpKSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAg
ICAgICAgKCdwYWNrJywgYnV0dG9ucyksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlk
ZXIoKSksCiAgICAgICAgXSkKCiAgICAgICAgZmlsbCA9IHVyd2lkLkZpbGxlcihwaWxlLCB2YWxp
Z249J3RvcCcpCiAgICAgICAgbGluZWJveCA9IHVyd2lkLkxpbmVCb3goZmlsbCwgdGl0bGU9dGl0
bGUpCgogICAgICAgIHN1cGVyKCkuX19pbml0X18odXJ3aWQuQXR0ck1hcChsaW5lYm94LCAnZGlh
bG9nJykpCgogICAgZGVmIGtleXByZXNzKHNlbGYsIHNpemUsIGtleSk6CiAgICAgICAgaWYga2V5
ID09ICdlbnRlcic6CiAgICAgICAgICAgIGJ0biA9IGdldF9mb2N1c19idXR0b24oc2VsZi5fdykK
ICAgICAgICAgICAgaWYgYnRuIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgaWYgaXNpbnN0
YW5jZShidG4sIHVyd2lkLkJ1dHRvbikgYW5kIGJ0bi5nZXRfbGFiZWwoKSA9PSAnWyBDYW5jZWwg
XSc6CiAgICAgICAgICAgICAgICAgICAgIyBFbnRlciDQvdCwIENhbmNlbCAtPiDQvtGC0LzQtdC9
0LAKICAgICAgICAgICAgICAgICAgICBzZWxmLm9uX2NhbmNlbChOb25lKQogICAgICAgICAgICAg
ICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgICMg0JLRgdC1INC+0YHRgtCw0LvRjNC90YvQ
tSDRgdC70YPRh9Cw0Lg6IEVudGVyIC0+IE9LCiAgICAgICAgICAgIHNlbGYub25fb2soTm9uZSkK
ICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgZWxpZiBrZXkgPT0gJ2VzYyc6CiAgICAg
ICAgICAgIHNlbGYub25fY2FuY2VsKE5vbmUpCiAgICAgICAgICAgIHJldHVybiBOb25lCgogICAg
ICAgIHJldHVybiBzdXBlcigpLmtleXByZXNzKHNpemUsIGtleSkKCiAgICBkZWYgb25fb2soc2Vs
ZiwgYnV0dG9uKToKICAgICAgICBkZXN0ID0gc2VsZi5kZXN0X2VkaXQuZ2V0X2VkaXRfdGV4dCgp
CiAgICAgICAgc2VsZi5jYWxsYmFjayhUcnVlLCBkZXN0KQoKICAgIGRlZiBvbl9jYW5jZWwoc2Vs
ZiwgYnV0dG9uKToKICAgICAgICBzZWxmLmNhbGxiYWNrKEZhbHNlLCBOb25lKQoKCmNsYXNzIFBh
bmVsV2lkZ2V0KHVyd2lkLldpZGdldFdyYXApOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0aXRs
ZSwgcGFuZWxfdHlwZT0nZnMnLCBzM19jb25maWc9Tm9uZSwgYXBwPU5vbmUpOgogICAgICAgIHNl
bGYudGl0bGUgPSB0aXRsZQogICAgICAgIHNlbGYucGFuZWxfdHlwZSA9IHBhbmVsX3R5cGUKICAg
ICAgICBzZWxmLnJlc3RvcmVfZm9jdXNfaW5kZXggPSBOb25lCiAgICAgICAgc2VsZi5zM19jb25m
aWcgPSBzM19jb25maWcKICAgICAgICBzZWxmLnMzX21hbmFnZXIgPSBOb25lCiAgICAgICAgc2Vs
Zi5mc19icm93c2VyID0gRmlsZVN5c3RlbUJyb3dzZXIoKSBpZiBwYW5lbF90eXBlID09ICdmcycg
ZWxzZSBOb25lCiAgICAgICAgc2VsZi5hcHAgPSBhcHAKCiAgICAgICAgIyDRhNC40LvRjNGC0YAg
0LTQu9GPINGB0L/QuNGB0LrQsCDQsdCw0LrQtdGC0L7QsiAo0LrQvtCz0LTQsCBzZWxmLmN1cnJl
bnRfYnVja2V0IGlzIE5vbmUpCiAgICAgICAgc2VsZi5idWNrZXRfZmlsdGVyX3BhdHRlcm4gPSBO
b25lCiAgICAgICAgc2VsZi5idWNrZXRfZmlsdGVyX21vZGUgPSBGYWxzZQoKICAgICAgICAjINGE
0LjQu9GM0YLRgCDQtNC70Y8g0L7QsdGK0LXQutGC0L7QsiDQstC90YPRgtGA0Lgg0LHQsNC60LXR
gtCwICjQutC+0LPQtNCwIHNlbGYuY3VycmVudF9idWNrZXQgaXMgbm90IE5vbmUpCiAgICAgICAg
c2VsZi5vYmplY3RfZmlsdGVyX3BhdHRlcm4gPSBOb25lCiAgICAgICAgc2VsZi5vYmplY3RfZmls
dGVyX21vZGUgPSBGYWxzZQoKICAgICAgICAjINCS0LjQtNC20LXRgiDQstCy0L7QtNCwINGE0LjQ
u9GM0YLRgNCwICjQv9C+0Y/QstC70Y/QtdGC0YHRjyDQstC90LjQt9GDKQogICAgICAgIHNlbGYu
ZmlsdGVyX2VkaXQgPSB1cndpZC5FZGl0KGNhcHRpb249Ii8iKQogICAgICAgICMg0J7QsdC+0YDQ
sNGH0LjQstCw0LXQvCDQsiDRgdGC0LjQu9GMICdzdGF0dXMnICjQuNC70Lgg0LvRjtCx0L7QuSDQ
tNGA0YPQs9C+0Lkg0LrQvtC90YLRgNCw0YHRgtC90YvQuSkKICAgICAgICBzZWxmLmZpbHRlcl93
aWRnZXQgPSB1cndpZC5BdHRyTWFwKHNlbGYuZmlsdGVyX2VkaXQsICdzdGF0dXMnKQoKICAgICAg
ICBzZWxmLmN1cnJlbnRfZW5kcG9pbnQgPSBOb25lCiAgICAgICAgc2VsZi5jdXJyZW50X2J1Y2tl
dCA9IE5vbmUKICAgICAgICBzZWxmLmN1cnJlbnRfcHJlZml4ID0gJycKICAgICAgICBzZWxmLm1v
ZGUgPSBwYW5lbF90eXBlCgogICAgICAgICMg0J3QsNGB0YLRgNC+0LnQutC4INGB0L7RgNGC0LjR
gNC+0LLQutC4CiAgICAgICAgc2VsZi5zb3J0X21vZGUgPSAnbmFtZScgaWYgcGFuZWxfdHlwZSA9
PSAnZnMnIGVsc2UgJ25vbmUnCiAgICAgICAgc2VsZi5zb3J0X3JldmVyc2UgPSBGYWxzZQoKICAg
ICAgICBzZWxmLndhbGtlciA9IHVyd2lkLlNpbXBsZUZvY3VzTGlzdFdhbGtlcihbXSkKCiAgICAg
ICAgIyDQn9C+0LTQtNC10YDQttC60LAg0LvQtdC90LjQstC+0Lkg0LfQsNCz0YDRg9C30LrQuAog
ICAgICAgIHNlbGYubG9hZGluZ19pbl9wcm9ncmVzcyA9IEZhbHNlCiAgICAgICAgc2VsZi5sb2Fk
aW5nX3RocmVhZCA9IE5vbmUKICAgICAgICBzZWxmLmxhenlfZ2VuZXJhdG9yID0gTm9uZQogICAg
ICAgIHNlbGYubGlzdGJveCA9IHVyd2lkLkxpc3RCb3goc2VsZi53YWxrZXIpCgogICAgICAgICMg
0KHQvtGF0YDQsNC90Y/QtdC8INGB0YHRi9C70LrRgyDQvdCwINCy0LjQtNC20LXRgiDRgtC10LrR
gdGC0LAsINGH0YLQvtCx0Ysg0LzQtdC90Y/RgtGMINC10LPQviDQv9C+0LfQttC1CiAgICAgICAg
c2VsZi5oZWFkZXJfdGV4dCA9IHVyd2lkLlRleHQodGl0bGUsIGFsaWduPSdjZW50ZXInKQogICAg
ICAgICMgaGVhZGVyX3dpZGdldCA9IHVyd2lkLkF0dHJNYXAoc2VsZi5oZWFkZXJfdGV4dCwgJ2hl
YWRlcicpCgogICAgICAgICMg0J/Rg9GC0YwgKEZTOiAvaG9tZS91c2VyINC40LvQuCBTMzogL2Nl
cGgvYnVja2V0LykKICAgICAgICBzZWxmLnBhdGhfdGV4dCA9IHVyd2lkLlRleHQoJycpCiAgICAg
ICAgcGF0aF93aWRnZXQgPSB1cndpZC5BdHRyTWFwKHNlbGYucGF0aF90ZXh0LCAncGF0aCcpCgog
ICAgICAgICMg0J7QsdC+0YDQsNGH0LjQstCw0LXQvCBsaXN0Ym94INCyIFNjcm9sbEJhcgogICAg
ICAgIHNlbGYuc2Nyb2xsYmFyID0gU2Nyb2xsQmFyKHNlbGYubGlzdGJveCkKCiAgICAgICAgIyDQ
odC+0LfQtNCw0LXQvCBGcmFtZSDQvtGC0LTQtdC70YzQvdC+LCDRh9GC0L7QsdGLINGB0L7RhdGA
0LDQvdC40YLRjCDRgdGB0YvQu9C60YMg0Lgg0LzQtdC90Y/RgtGMIGZvb3RlcgogICAgICAgIHNl
bGYuZnJhbWUgPSB1cndpZC5GcmFtZSgKICAgICAgICAgICAgdXJ3aWQuQXR0ck1hcChzZWxmLnNj
cm9sbGJhciwgJ2JvZHknKSwKICAgICAgICAgICAgaGVhZGVyPXBhdGhfd2lkZ2V0LAogICAgICAg
ICAgICBmb290ZXI9Tm9uZSAgIyDQmNC30L3QsNGH0LDQu9GM0L3QviDRhNGD0YLQtdGA0LAg0L3Q
tdGCICjRhNC40LvRjNGC0YAg0YHQutGA0YvRgikKICAgICAgICApCgogICAgICAgIHNlbGYubGlu
ZWJveCA9IHVyd2lkLkxpbmVCb3goc2VsZi5mcmFtZSkKCiAgICAgICAgc3VwZXIoKS5fX2luaXRf
XyhzZWxmLmxpbmVib3gpICAjINCe0LHQvtGA0LDRh9C40LLQsNC10Lwg0LIgTGluZUJveCAo0LXR
gdC70Lgg0L3Rg9C20L3QvikKCiAgICAgICAgc2VsZi5yZWZyZXNoKCkKCiAgICBkZWYgX3N5bmNf
ZmlsdGVyX2Zvb3Rlcl9mb3JfdmlldyhzZWxmKToKICAgICAgICAjINCf0L7QutCw0LfQsNGC0Ywg
Zm9vdGVyINGC0L7Qu9GM0LrQviDQtdGB0LvQuCDQsNC60YLQuNCy0LXQvSDRgNC10LbQuNC8INGE
0LjQu9GM0YLRgNCwINCyINGC0LXQutGD0YnQtdC8IHZpZXcKICAgICAgICBpZiBzZWxmLmZpbHRl
cl9tb2RlOgogICAgICAgICAgICBzZWxmLmZyYW1lLmZvb3RlciA9IHNlbGYuZmlsdGVyX3dpZGdl
dAogICAgICAgICAgICBzZWxmLmZyYW1lLmZvY3VzX3Bvc2l0aW9uID0gJ2Zvb3RlcicKICAgICAg
ICAgICAgc2VsZi5maWx0ZXJfZWRpdC5zZXRfZWRpdF90ZXh0KHNlbGYuZmlsdGVyX3BhdHRlcm4g
b3IgIiIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5mcmFtZS5mb290ZXIgPSBOb25l
CiAgICAgICAgICAgIHNlbGYuZnJhbWUuZm9jdXNfcG9zaXRpb24gPSAnYm9keScKICAgICAgICAg
ICAgc2VsZi5maWx0ZXJfZWRpdC5zZXRfZWRpdF90ZXh0KCIiKQoKICAgIGRlZiBfaXNfYnVja2V0
X2xpc3RfdmlldyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5tb2RlID09ICdzMycgYW5kIHNl
bGYuY3VycmVudF9lbmRwb2ludCBpcyBub3QgTm9uZSBhbmQgc2VsZi5jdXJyZW50X2J1Y2tldCBp
cyBOb25lCgogICAgQHByb3BlcnR5CiAgICBkZWYgZmlsdGVyX21vZGUoc2VsZik6CiAgICAgICAg
cmV0dXJuIHNlbGYuYnVja2V0X2ZpbHRlcl9tb2RlIGlmIHNlbGYuX2lzX2J1Y2tldF9saXN0X3Zp
ZXcoKSBlbHNlIHNlbGYub2JqZWN0X2ZpbHRlcl9tb2RlCgogICAgQGZpbHRlcl9tb2RlLnNldHRl
cgogICAgZGVmIGZpbHRlcl9tb2RlKHNlbGYsIHZhbHVlKToKICAgICAgICBpZiBzZWxmLl9pc19i
dWNrZXRfbGlzdF92aWV3KCk6CiAgICAgICAgICAgIHNlbGYuYnVja2V0X2ZpbHRlcl9tb2RlID0g
Ym9vbCh2YWx1ZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLm9iamVjdF9maWx0ZXJf
bW9kZSA9IGJvb2wodmFsdWUpCgogICAgQHByb3BlcnR5CiAgICBkZWYgZmlsdGVyX3BhdHRlcm4o
c2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuYnVja2V0X2ZpbHRlcl9wYXR0ZXJuIGlmIHNlbGYu
X2lzX2J1Y2tldF9saXN0X3ZpZXcoKSBlbHNlIHNlbGYub2JqZWN0X2ZpbHRlcl9wYXR0ZXJuCgog
ICAgQGZpbHRlcl9wYXR0ZXJuLnNldHRlcgogICAgZGVmIGZpbHRlcl9wYXR0ZXJuKHNlbGYsIHZh
bHVlKToKICAgICAgICBpZiBzZWxmLl9pc19idWNrZXRfbGlzdF92aWV3KCk6CiAgICAgICAgICAg
IHNlbGYuYnVja2V0X2ZpbHRlcl9wYXR0ZXJuID0gdmFsdWUKICAgICAgICBlbHNlOgogICAgICAg
ICAgICBzZWxmLm9iamVjdF9maWx0ZXJfcGF0dGVybiA9IHZhbHVlCgogICAgZGVmIF9nZXRfYWN0
aXZlX2ZpbHRlcl9wYXR0ZXJuKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmJ1Y2tldF9maWx0
ZXJfcGF0dGVybiBpZiBzZWxmLl9pc19idWNrZXRfbGlzdF92aWV3KCkgZWxzZSBzZWxmLm9iamVj
dF9maWx0ZXJfcGF0dGVybgoKICAgIGRlZiBfc2V0X2FjdGl2ZV9maWx0ZXJfcGF0dGVybihzZWxm
LCB2YWx1ZSk6CiAgICAgICAgaWYgc2VsZi5faXNfYnVja2V0X2xpc3RfdmlldygpOgogICAgICAg
ICAgICBzZWxmLmJ1Y2tldF9maWx0ZXJfcGF0dGVybiA9IHZhbHVlCiAgICAgICAgZWxzZToKICAg
ICAgICAgICAgc2VsZi5vYmplY3RfZmlsdGVyX3BhdHRlcm4gPSB2YWx1ZQoKICAgIGRlZiBfZ2V0
X2FjdGl2ZV9maWx0ZXJfbW9kZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5idWNrZXRfZmls
dGVyX21vZGUgaWYgc2VsZi5faXNfYnVja2V0X2xpc3RfdmlldygpIGVsc2Ugc2VsZi5vYmplY3Rf
ZmlsdGVyX21vZGUKCiAgICBkZWYgX3NldF9hY3RpdmVfZmlsdGVyX21vZGUoc2VsZiwgdmFsdWUp
OgogICAgICAgIGlmIHNlbGYuX2lzX2J1Y2tldF9saXN0X3ZpZXcoKToKICAgICAgICAgICAgc2Vs
Zi5idWNrZXRfZmlsdGVyX21vZGUgPSB2YWx1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNl
bGYub2JqZWN0X2ZpbHRlcl9tb2RlID0gdmFsdWUKCiAgICBkZWYgdG9nZ2xlX2ZpbHRlcl9tb2Rl
KHNlbGYpOgogICAgICAgICIiItCS0LrQu9GO0YfQuNGC0Ywv0LLRi9C60LvRjtGH0LjRgtGMINGA
0LXQttC40Lwg0LLQstC+0LTQsCDRhNC40LvRjNGC0YDQsCIiIgogICAgICAgIGlmIHNlbGYuX2dl
dF9hY3RpdmVfZmlsdGVyX21vZGUoKToKICAgICAgICAgICAgc2VsZi5fc2V0X2FjdGl2ZV9maWx0
ZXJfbW9kZShGYWxzZSkKICAgICAgICAgICAgc2VsZi5mcmFtZS5mb2N1c19wb3NpdGlvbiA9ICdi
b2R5JwogICAgICAgICAgICBpZiBub3Qgc2VsZi5fZ2V0X2FjdGl2ZV9maWx0ZXJfcGF0dGVybigp
OgogICAgICAgICAgICAgICAgc2VsZi5mcmFtZS5mb290ZXIgPSBOb25lCiAgICAgICAgICAgIHNl
bGYuZnJhbWUuZm9vdGVyID0gTm9uZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX3Nl
dF9hY3RpdmVfZmlsdGVyX21vZGUoVHJ1ZSkKICAgICAgICAgICAgc2VsZi5mcmFtZS5mb290ZXIg
PSBzZWxmLmZpbHRlcl93aWRnZXQKICAgICAgICAgICAgc2VsZi5mcmFtZS5mb2N1c19wb3NpdGlv
biA9ICdmb290ZXInCgogICAgICAgICAgICAjINC/0YDQuCDQstGF0L7QtNC1INCyINGA0LXQttC4
0Lwg0YTQuNC70YzRgtGA0LAg0L/QvtC60LDQt9GL0LLQsNC10Lwg0YLQtdC60YPRidC40Lkg0YjQ
sNCx0LvQvtC9INC00LvRjyDRjdGC0L7Qs9C+IHZpZXcKICAgICAgICAgICAgcCA9IHNlbGYuX2dl
dF9hY3RpdmVfZmlsdGVyX3BhdHRlcm4oKSBvciAiIgogICAgICAgICAgICBzZWxmLmZpbHRlcl9l
ZGl0LnNldF9lZGl0X3RleHQocCkKCiAgICBkZWYgY2xlYXJfZmlsdGVyKHNlbGYpOgogICAgICAg
ICIiItCf0L7Qu9C90L7RgdGC0YzRjiDRgdCx0YDQvtGB0LjRgtGMINGE0LjQu9GM0YLRgCIiIgog
ICAgICAgIHNlbGYuX3NldF9hY3RpdmVfZmlsdGVyX3BhdHRlcm4oIiIpCiAgICAgICAgc2VsZi5m
aWx0ZXJfZWRpdC5zZXRfZWRpdF90ZXh0KCIiKQogICAgICAgIHNlbGYuX3NldF9hY3RpdmVfZmls
dGVyX21vZGUoRmFsc2UpCiAgICAgICAgc2VsZi5mcmFtZS5mb2N1c19wb3NpdGlvbiA9ICdib2R5
JwogICAgICAgIHNlbGYuZnJhbWUuZm9vdGVyID0gTm9uZQogICAgICAgIHNlbGYucmVmcmVzaCgp
CgogICAgIyBkZWYgc2hvd19maWx0ZXJfZGlhbG9nKHNlbGYpOgogICAgIyAgICAgIiIi0JLRi9C3
0YvQstCw0LXRgtGB0Y8g0L/QviDQvdCw0LbQsNGC0LjRjiDQutC70LDQstC40YjQuCAnLycgIiIi
CiAgICAjCiAgICAjICAgICBkZWYgY2FsbGJhY2sodGV4dCk6CiAgICAjICAgICAgICAgc2VsZi5h
cHAuY2xvc2VfZGlhbG9nKCkKICAgICMgICAgICAgICAjINCb0L7Qs9C40LrQsCDRgdCx0YDQvtGB
0LAg0L/QviAiLy8iINC40LvQuCDQv9C+INC/0YPRgdGC0L7QuSDRgdGC0YDQvtC60LUKICAgICMg
ICAgICAgICBpZiBub3QgdGV4dCBvciB0ZXh0ID09ICIvLyI6CiAgICAjICAgICAgICAgICAgIHNl
bGYuZmlsdGVyX3BhdHRlcm4gPSBOb25lCiAgICAjICAgICAgICAgZWxzZToKICAgICMgICAgICAg
ICAgICAgc2VsZi5maWx0ZXJfcGF0dGVybiA9IHRleHQKICAgICMKICAgICMgICAgICAgICAjINCf
0LXRgNC10YDQuNGB0L7QstGL0LLQsNC10Lwg0L/QsNC90LXQu9GMINGBINGD0YfQtdGC0L7QvCDQ
vdC+0LLQvtCz0L4g0YTQuNC70YzRgtGA0LAKICAgICMgICAgICAgICBzZWxmLnJlZnJlc2goKQog
ICAgIwogICAgIyAgICAgIyDQldGB0LvQuCDRhNC40LvRjNGC0YAg0YPQttC1INC10YHRgtGMLCDQ
v9C+0LrQsNC30YvQstCw0LXQvCDQtdCz0L4g0LIg0L/QvtC70LUg0LLQstC+0LTQsAogICAgIyAg
ICAgZGVmYXVsdF90ZXh0ID0gc2VsZi5maWx0ZXJfcGF0dGVybiBpZiBzZWxmLmZpbHRlcl9wYXR0
ZXJuIGVsc2UgIiIKICAgICMKICAgICMgICAgIGRpYWxvZyA9IElucHV0RGlhbG9nKAogICAgIyAg
ICAgICAgICJGaWx0ZXIiLAogICAgIyAgICAgICAgICJFbnRlciBwYXR0ZXJuICgvLyB0byByZXNl
dCk6IiwKICAgICMgICAgICAgICBsYW1iZGEgY29uZmlybWVkLCB0ZXh0OiBjYWxsYmFjayh0ZXh0
KSBpZiBjb25maXJtZWQgZWxzZSBzZWxmLmFwcC5jbG9zZV9kaWFsb2coKSwKICAgICMgICAgICAg
ICBkZWZhdWx0X3RleHQ9ZGVmYXVsdF90ZXh0CiAgICAjICAgICApCiAgICAjICAgICBzZWxmLmFw
cC5zaG93X2RpYWxvZyhkaWFsb2cpCgogICAgZGVmIGtleXByZXNzKHNlbGYsIHNpemUsIGtleSk6
CiAgICAgICAgaWYgbm90IHNlbGYuZmlsdGVyX21vZGU6CiAgICAgICAgICAgICMgLS0tINCe0JHQ
q9Cn0J3Qq9CZINCg0JXQltCY0JwgKNCk0L7QutGD0YEg0L3QsCDRgdC/0LjRgdC60LUpIC0tLQog
ICAgICAgICAgICBpZiBrZXkgPT0gJy8nOgogICAgICAgICAgICAgICAgc2VsZi50b2dnbGVfZmls
dGVyX21vZGUoKQogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgICAgIHJlc3Vs
dCA9IHN1cGVyKCkua2V5cHJlc3Moc2l6ZSwga2V5KQoKICAgICAgICAgICAgIyDQldGB0LvQuCDQ
vdCw0LbQsNGC0LAg0LrQu9Cw0LLQuNGI0LAg0L3QsNCy0LjQs9Cw0YbQuNC4INC4INCy0LrQu9GO
0YfQtdC9IFByZXZpZXcgTW9kZSwg0L7QsdC90L7QstC70Y/QtdC8CiAgICAgICAgICAgIGlmIHNl
bGYuYXBwLnByZXZpZXdfbW9kZSBhbmQga2V5IGluICgndXAnLCAnZG93bicsICdwYWdlIHVwJywg
J3BhZ2UgZG93bicsICdob21lJywgJ2VuZCcpOgogICAgICAgICAgICAgICAgIyDQktGL0LfRi9Cy
0LDQtdC8INC+0LHQvdC+0LLQu9C10L3QuNC1INGBINC90LXQsdC+0LvRjNGI0L7QuSDQt9Cw0LTQ
tdGA0LbQutC+0LkgKGRlYm91bmNlKSwg0YfRgtC+0LHRiyDQvdC1INCz0YDRg9C30LjRgtGMINC/
0YDQuCDQsdGL0YHRgtGA0L7QuSDQv9GA0L7QutGA0YPRgtC60LUKICAgICAgICAgICAgICAgICMg
0J3QviDQtNC70Y8g0L/RgNC+0YHRgtC+0YLRiyDQvNC+0LbQvdC+INGB0YDQsNC30YMKICAgICAg
ICAgICAgICAgIHNlbGYuYXBwLnVwZGF0ZV9wcmV2aWV3KCkKCiAgICAgICAgICAgIHJldHVybiBy
ZXN1bHQKCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyAtLS0g0KDQldCW0JjQnCDQktCS0J7Q
lNCQINCk0JjQm9Cs0KLQoNCQICjQpNC+0LrRg9GBINC90LAgZm9vdGVyKSAtLS0KCiAgICAgICAg
ICAgICMg0JLRi9GF0L7QtCDQuNC3INGA0LXQttC40LzQsCAo0YHQvtGF0YDQsNC90LXQvdC40LUg
0YLQtdC60YPRidC10LPQviDRhNC40LvRjNGC0YDQsCkKICAgICAgICAgICAgaWYga2V5IGluICgn
ZW50ZXInLCAnZXNjJyk6CiAgICAgICAgICAgICAgICBzZWxmLnRvZ2dsZV9maWx0ZXJfbW9kZSgp
CiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICAgICAgIyDQktGL0YXQvtC0INC/
0L4g0L/QvtCy0YLQvtGA0L3QvtC80YMg0L3QsNC20LDRgtC40Y4gJy8nICjQutCw0Log0LIgdmlt
INC/0L7QuNGB0LopCiAgICAgICAgICAgIGlmIGtleSA9PSAnLyc6CiAgICAgICAgICAgICAgICBz
ZWxmLnRvZ2dsZV9maWx0ZXJfbW9kZSgpCiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoKICAg
ICAgICAgICAgIyDQn9C10YDQtdC00LDQtdC8INC90LDQttCw0YLQuNC1INCyINC/0L7Qu9C1INCy
0LLQvtC00LAKICAgICAgICAgICAgIyDQndCw0Lwg0L3Rg9C20L3QviDRj9Cy0L3QviDQstGL0LfQ
stCw0YLRjCBrZXlwcmVzcyDRgyBFZGl0LCDRgtCw0Log0LrQsNC6INC80YsgItC/0LXRgNC10YXQ
stCw0YLQuNC70LgiINGD0L/RgNCw0LLQu9C10L3QuNC1CiAgICAgICAgICAgICMg0KDQsNC30LzQ
tdGAINGE0YPRgtC10YDQsCAoMSDRgdGC0YDQvtC60LApCiAgICAgICAgICAgIHJlcyA9IHNlbGYu
ZmlsdGVyX2VkaXQua2V5cHJlc3MoKHNpemVbMF0sKSwga2V5KQoKICAgICAgICAgICAgIyDQn9C+
0YHQu9C1INC90LDQttCw0YLQuNGPINC/0YDQvtCy0LXRgNGP0LXQvCwg0LjQt9C80LXQvdC40LvR
gdGPINC70Lgg0YLQtdC60YHRggogICAgICAgICAgICAjIG5ld190ZXh0ID0gc2VsZi5maWx0ZXJf
ZWRpdC5nZXRfZWRpdF90ZXh0KCkKICAgICAgICAgICAgIyBpZiBuZXdfdGV4dCAhPSBzZWxmLmZp
bHRlcl9wYXR0ZXJuOgogICAgICAgICAgICAjICAgICBzZWxmLmZpbHRlcl9wYXR0ZXJuID0gbmV3
X3RleHQKICAgICAgICAgICAgIyAgICAgIyDQktGL0LfRi9Cy0LDQtdC8IHJlZnJlc2gg0LTQu9GP
INC+0LHQvdC+0LLQu9C10L3QuNGPINGB0L/QuNGB0LrQsCDRhNCw0LnQu9C+0LIg0YEg0L3QvtCy
0YvQvCDRhNC40LvRjNGC0YDQvtC8CiAgICAgICAgICAgICMgICAgIHNlbGYucmVmcmVzaCgpCiAg
ICAgICAgICAgIG5ld190ZXh0ID0gc2VsZi5maWx0ZXJfZWRpdC5nZXRfZWRpdF90ZXh0KCkKICAg
ICAgICAgICAgaWYgbmV3X3RleHQgIT0gKHNlbGYuX2dldF9hY3RpdmVfZmlsdGVyX3BhdHRlcm4o
KSBvciAiIik6CiAgICAgICAgICAgICAgICBzZWxmLl9zZXRfYWN0aXZlX2ZpbHRlcl9wYXR0ZXJu
KG5ld190ZXh0KQogICAgICAgICAgICAgICAgc2VsZi5yZWZyZXNoKCkKICAgICAgICAgICAgcmV0
dXJuIHJlcwoKICAgIGRlZiBnZXRfY3VycmVudF9mb2N1c19pbmZvKHNlbGYpOgogICAgICAgICIi
ItCf0L7Qu9GD0YfQuNGC0Ywg0LjQvdGE0L7RgNC80LDRhtC40Y4g0L4g0YLQtdC60YPRidC10Lwg
0YTQvtC60YPRgdC1INC00LvRjyDQv9C+0YHQu9C10LTRg9GO0YnQtdCz0L4g0LLQvtGB0YHRgtCw
0L3QvtCy0LvQtdC90LjRjyIiIgogICAgICAgIHRyeToKICAgICAgICAgICAgZm9jdXNfd2lkZ2V0
LCBmb2N1c19wb3MgPSBzZWxmLmxpc3Rib3guZ2V0X2ZvY3VzKCkKICAgICAgICAgICAgaWYgZm9j
dXNfd2lkZ2V0OgogICAgICAgICAgICAgICAgdyA9IGZvY3VzX3dpZGdldC5vcmlnaW5hbF93aWRn
ZXQgaWYgaXNpbnN0YW5jZShmb2N1c193aWRnZXQsIHVyd2lkLkF0dHJNYXApIGVsc2UgZm9jdXNf
d2lkZ2V0CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHcsIFNlbGVjdGFibGVUZXh0KToK
ICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAncG9z
aXRpb24nOiBmb2N1c19wb3MsCiAgICAgICAgICAgICAgICAgICAgICAgICduYW1lJzogdy5kYXRh
LmdldCgnbmFtZScpLAogICAgICAgICAgICAgICAgICAgICAgICAna2V5Jzogdy5kYXRhLmdldCgn
a2V5JyksCiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogdy5kYXRhLmdldCgndHlwZScp
CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwog
ICAgICAgIHJldHVybiBOb25lCgogICAgZGVmIHJlZnJlc2goc2VsZiwgZm9jdXNfb249Tm9uZSwg
Zm9jdXNfaW5mbz1Ob25lLCBpdGVtX2RlbGV0ZWQ9RmFsc2UpOgogICAgICAgICIiIgogICAgICAg
INCe0LHQvdC+0LLQuNGC0Ywg0YHQvtC00LXRgNC20LjQvNC+0LUg0L/QsNC90LXQu9C4LgoKICAg
ICAgICBBcmdzOgogICAgICAgICAgICBmb2N1c19vbiAoc3RyKTog0JjQvNGPINGN0LvQtdC80LXQ
vdGC0LAgKNGE0LDQudC70LAv0L/QsNC/0LrQuC/QsdCw0LrQtdGC0LApLCDQvdCwINC60L7RgtC+
0YDRi9C5INC90YPQttC90L4g0YPRgdGC0LDQvdC+0LLQuNGC0Ywg0YTQvtC60YPRgS4KICAgICAg
ICAgICAgZm9jdXNfaW5mbyAoZGljdCk6INCh0LvQvtCy0LDRgNGMINGBINC40L3RhNC+0YDQvNCw
0YbQuNC10Lkg0L4g0L/RgNC10LTRi9C00YPRidC10Lwg0YTQvtC60YPRgdC1ICjQuNC90LTQtdC6
0YEsINC40LzRjywg0LrQu9GO0YcpLgogICAgICAgICAgICBpdGVtX2RlbGV0ZWQgKGJvb2wpOiDQ
pNC70LDQsywg0YPQutCw0LfRi9Cy0LDRjtGJ0LjQuSwg0YfRgtC+INGC0LXQutGD0YnQuNC5INGN
0LvQtdC80LXQvdGCINCx0YvQuyDRg9C00LDQu9C10L0gKNC90YPQttC90L4g0YHQvtGF0YDQsNC9
0LjRgtGMINC40L3QtNC10LrRgSkuCiAgICAgICAgIiIiCgogICAgICAgICMgMS4g0JvQvtCz0LjQ
utCwINGB0L7RhdGA0LDQvdC10L3QuNGPINC/0LDRgNCw0LzQtdGC0YDQvtCyINGE0L7QutGD0YHQ
sCDQtNC70Y8g0JDQodCY0J3QpdCg0J7QndCd0J7QmSDQt9Cw0LPRgNGD0LfQutC4IChTMykKICAg
ICAgICAjINCV0YHQu9C4INC80Ysg0LIg0YDQtdC20LjQvNC1IFMzINC4INCy0YvQsdGA0LDQvSDR
jdC90LTQv9C+0LjQvdGCLCDQt9Cw0LPRgNGD0LfQutCwICjQsdCw0LrQtdGC0L7QsiDQuNC70Lgg
0L7QsdGK0LXQutGC0L7Qsikg0LHRg9C00LXRgiDQuNC00YLQuCDQsiDRhNC+0L3QtS4KICAgICAg
ICAjINCf0L7RjdGC0L7QvNGDINC80Ysg0L3QtSDQvNC+0LbQtdC8INGD0YHRgtCw0L3QvtCy0LjR
gtGMINGE0L7QutGD0YEg0YHRgNCw0LfRgyDQsiDQutC+0L3RhtC1INGE0YPQvdC60YbQuNC4LCDQ
vdGD0LbQvdC+INGB0L7RhdGA0LDQvdC40YLRjCDQtdCz0L4g0LIgc2VsZi4KICAgICAgICBpc19z
M19hc3luYyA9IChzZWxmLm1vZGUgPT0gJ3MzJyBhbmQgc2VsZi5jdXJyZW50X2VuZHBvaW50IGlz
IG5vdCBOb25lKQoKICAgICAgICBpZiBpc19zM19hc3luYzoKICAgICAgICAgICAgaWYgZm9jdXNf
b246CiAgICAgICAgICAgICAgICAjINCh0L7RhdGA0LDQvdGP0LXQvCDQuNC80Y8g0LTQu9GPINCy
0L7RgdGB0YLQsNC90L7QstC70LXQvdC40Y8g0LIgX2ZpbmFsaXplX2xvYWRpbmcKICAgICAgICAg
ICAgICAgIHNlbGYuX3BlbmRpbmdfZm9jdXNfbmFtZSA9IGZvY3VzX29uCgogICAgICAgICAgICAj
INCV0YHQu9C4INC/0LXRgNC10LTQsNC90LAg0YHQu9C+0LbQvdCw0Y8g0LjQvdGE0L4g0L4g0YTQ
vtC60YPRgdC1CiAgICAgICAgICAgIGlmIGZvY3VzX2luZm86CiAgICAgICAgICAgICAgICAjINCV
0YHQu9C4INGN0LvQtdC80LXQvdGCINGD0LTQsNC70LXQvSwg0L/Ri9GC0LDQtdC80YHRjyDQvtGB
0YLQsNGC0YzRgdGPINC90LAg0YLQvtC8INC20LUg0LjQvdC00LXQutGB0LUKICAgICAgICAgICAg
ICAgICMg0JXRgdC70Lgg0L3QtSDRg9C00LDQu9C10L0gKNC/0YDQvtGB0YLQviByZWZyZXNoKSwg
0YLQvtC20LUg0YHQvtGF0YDQsNC90Y/QtdC8INC40L3QtNC10LrRgSDQutCw0Log0LfQsNC/0LDR
gdC90L7QuSDQstCw0YDQuNCw0L3RggogICAgICAgICAgICAgICAgc2VsZi5yZXN0b3JlX2ZvY3Vz
X2luZGV4ID0gZm9jdXNfaW5mby5nZXQoJ3Bvc2l0aW9uJykKICAgICAgICAgICAgZWxpZiBpdGVt
X2RlbGV0ZWQ6CiAgICAgICAgICAgICAgICAjINCV0YHQu9C4INC/0YDQvtGB0YLQviDRgdC60LDQ
t9Cw0L3QviDRh9GC0L4g0YPQtNCw0LvQtdC9LCDQvdC+IGluZm8g0L3QtdGCICjRgNC10LTQutC+
KSwg0YHQvtGF0YDQsNC90Y/QtdC8INGC0LXQutGD0YnQuNC5PwogICAgICAgICAgICAgICAgIyDQ
ntCx0YvRh9C90L4gaW5mbyDQv9C10YDQtdC00LDQtdGC0YHRjy4g0JXRgdC70Lgg0L3QtdGCLCDQ
v9C+0LvQsNCz0LDQtdC80YHRjyDQvdCwINGC0L4g0YfRgtC+INGD0LbQtSDQtdGB0YLRjCDQsiBy
ZXN0b3JlX2ZvY3VzX2luZGV4CiAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICMgMi4g0J7R
h9C40YHRgtC60LAg0YHQv9C40YHQutCwINC/0LXRgNC10LQg0L7QsdC90L7QstC70LXQvdC40LXQ
vAogICAgICAgIHNlbGYud2Fsa2VyLmNsZWFyKCkKCiAgICAgICAgIyDQodCx0YDQvtGBINGE0LjQ
u9GM0YLRgNCwINC/0YDQuCDRgdC80LXQvdC1INC60L7QvdGC0LXQutGB0YLQsD8gKNCe0L/RhtC4
0L7QvdCw0LvRjNC90L4pCiAgICAgICAgIyBzZWxmLmZpbHRlcl9wYXR0ZXJuID0gIiIKICAgICAg
ICAjIHNlbGYuZmlsdGVyX2VkaXQuc2V0X2VkaXRfdGV4dCgiIikKCiAgICAgICAgIyAzLiDQnNCw
0YDRiNGA0YPRgtC40LfQsNGG0LjRjyDQvtCx0L3QvtCy0LvQtdC90LjRjyDQv9C+INGA0LXQttC4
0LzQsNC8CiAgICAgICAgaWYgc2VsZi5tb2RlID09ICdyb290X21lbnUnOgogICAgICAgICAgICBz
ZWxmLl9yZWZyZXNoX3Jvb3RfbWVudSgpCiAgICAgICAgICAgICMg0KHQuNC90YXRgNC+0L3QvdC+
0LUg0LLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90LjQtQogICAgICAgICAgICBpZiBmb2N1c19pbmZv
OgogICAgICAgICAgICAgICAgc2VsZi5yZXN0b3JlX2ZvY3VzX2FmdGVyX29wZXJhdGlvbihmb2N1
c19pbmZvLCBpdGVtX2RlbGV0ZWQpCiAgICAgICAgICAgIGVsaWYgZm9jdXNfb246CiAgICAgICAg
ICAgICAgICBzZWxmLnNldF9mb2N1c19vbl9pdGVtKGZvY3VzX29uKQoKICAgICAgICBlbGlmIHNl
bGYubW9kZSA9PSAnczMnOgogICAgICAgICAgICBpZiBzZWxmLmN1cnJlbnRfZW5kcG9pbnQgaXMg
Tm9uZToKICAgICAgICAgICAgICAgICMg0KHQv9C40YHQvtC6INGN0L3QtNC/0L7QuNC90YLQvtCy
ICjQvtCx0YvRh9C90L4g0YHQuNC90YXRgNC+0L3QvdC+INC40Lcg0LrQvtC90YTQuNCz0LApCiAg
ICAgICAgICAgICAgICBzZWxmLl9yZWZyZXNoX2VuZHBvaW50cygpCgogICAgICAgICAgICAgICAg
aWYgZm9jdXNfaW5mbzoKICAgICAgICAgICAgICAgICAgICBzZWxmLnJlc3RvcmVfZm9jdXNfYWZ0
ZXJfb3BlcmF0aW9uKGZvY3VzX2luZm8sIGl0ZW1fZGVsZXRlZCkKICAgICAgICAgICAgICAgIGVs
aWYgZm9jdXNfb246CiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRfZm9jdXNfb25faXRlbShm
b2N1c19vbikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMg0JLQvdGD0YLRgNC4
INGN0L3QtNC/0L7QuNC90YLQsDog0KHQv9C40YHQvtC6INCx0LDQutC10YLQvtCyINCY0JvQmCDQ
odC/0LjRgdC+0Log0L7QsdGK0LXQutGC0L7QsgogICAgICAgICAgICAgICAgIyDQrdGC0L4g0LLR
i9C/0L7Qu9C90Y/QtdGC0YHRjyDQkNCh0JjQndCl0KDQntCd0J3QniDRh9C10YDQtdC3INC/0L7R
gtC+0LouCiAgICAgICAgICAgICAgICAjINCk0L7QutGD0YEg0LHRg9C00LXRgiDQstC+0YHRgdGC
0LDQvdC+0LLQu9C10L0g0LIgX2ZpbmFsaXplX2xvYWRpbmcg0YEg0LjRgdC/0L7Qu9GM0LfQvtCy
0LDQvdC40LXQvAogICAgICAgICAgICAgICAgIyBfcGVuZGluZ19mb2N1c19uYW1lINC40LvQuCBy
ZXN0b3JlX2ZvY3VzX2luZGV4CiAgICAgICAgICAgICAgICBzZWxmLl9yZWZyZXNoX3MzKCkKICAg
ICAgICAgICAgICAgIGlmIGZvY3VzX2luZm86CiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXN0
b3JlX2ZvY3VzX2FmdGVyX29wZXJhdGlvbihmb2N1c19pbmZvLCBpdGVtX2RlbGV0ZWQpCiAgICAg
ICAgICAgICAgICBlbGlmIGZvY3VzX29uOgogICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0X2Zv
Y3VzX29uX2l0ZW0oZm9jdXNfb24pCgogICAgICAgIGVsc2U6ICAjIG1vZGUgPT0gJ2ZzJwogICAg
ICAgICAgICBzZWxmLl9yZWZyZXNoX2ZzKCkKICAgICAgICAgICAgIyDQodC40L3RhdGA0L7QvdC9
0L7QtSDQstC+0YHRgdGC0LDQvdC+0LLQu9C10L3QuNC1CiAgICAgICAgICAgIGlmIGZvY3VzX2lu
Zm86CiAgICAgICAgICAgICAgICBzZWxmLnJlc3RvcmVfZm9jdXNfYWZ0ZXJfb3BlcmF0aW9uKGZv
Y3VzX2luZm8sIGl0ZW1fZGVsZXRlZCkKICAgICAgICAgICAgZWxpZiBmb2N1c19vbjoKICAgICAg
ICAgICAgICAgIHNlbGYuc2V0X2ZvY3VzX29uX2l0ZW0oZm9jdXNfb24pCgogICAgZGVmIHNob3df
aXRlbV9pbmZvKHNlbGYpOgogICAgICAgICIiItCf0L7QutCw0LfQsNGC0Ywg0LjQvdGE0L7RgNC8
0LDRhtC40Y4g0L4g0YLQtdC60YPRidC10Lwg0Y3Qu9C10LzQtdC90YLQtSAoRjQpIiIiCiAgICAg
ICAgaXRlbSA9IHNlbGYuZ2V0X2ZvY3VzZWRfaXRlbSgpCiAgICAgICAgaWYgbm90IGl0ZW06CiAg
ICAgICAgICAgIHJldHVybgoKICAgICAgICBpbmZvID0gT3JkZXJlZERpY3QoKQogICAgICAgIHRp
dGxlID0gIkluZm8iCgogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgc2VsZi5tb2RlID09ICdm
cyc6CiAgICAgICAgICAgICAgICBwYXRoID0gaXRlbS5nZXQoJ3BhdGgnKSAgIyDQldGB0LvQuCDQ
tdGB0YLRjCDQv9C+0LvQvdGL0Lkg0L/Rg9GC0YwKICAgICAgICAgICAgICAgIGlmIG5vdCBwYXRo
OgogICAgICAgICAgICAgICAgICAgICMg0J/Ri9GC0LDQtdC80YHRjyDQstC+0YHRgdGC0LDQvdC+
0LLQuNGC0Ywg0L/Rg9GC0YwKICAgICAgICAgICAgICAgICAgICBuYW1lID0gaXRlbVsnbmFtZSdd
CiAgICAgICAgICAgICAgICAgICAgaWYgbmFtZSA9PSAnLi4nOgogICAgICAgICAgICAgICAgICAg
ICAgICByZXR1cm4KICAgICAgICAgICAgICAgICAgICBwYXRoID0gb3MucGF0aC5qb2luKHNlbGYu
ZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIG5hbWUpCgogICAgICAgICAgICAgICAgdGl0bGUgPSBm
IkZpbGUgSW5mbzoge2l0ZW1bJ25hbWUnXX0iCiAgICAgICAgICAgICAgICBpbmZvID0gc2VsZi5f
Z2V0X2ZzX2luZm8ocGF0aCkKCiAgICAgICAgICAgIGVsaWYgc2VsZi5tb2RlID09ICdzMyc6CiAg
ICAgICAgICAgICAgICBpdHlwZSA9IGl0ZW0uZ2V0KCd0eXBlJykKCiAgICAgICAgICAgICAgICBp
ZiBpdHlwZSA9PSAnYnVja2V0JzoKICAgICAgICAgICAgICAgICAgICB0aXRsZSA9IGYiQnVja2V0
IEluZm86IHtpdGVtWyduYW1lJ119IgogICAgICAgICAgICAgICAgICAgIGluZm8gPSBzZWxmLl9n
ZXRfczNfYnVja2V0X2luZm8oaXRlbVsnbmFtZSddKQoKICAgICAgICAgICAgICAgIGVsaWYgaXR5
cGUgaW4gWydzM19maWxlJywgJ3MzX2RpciddOgogICAgICAgICAgICAgICAgICAgICMg0JTQu9GP
INGE0LDQudC70L7QsiDQuCDQv9Cw0L/QvtC6CiAgICAgICAgICAgICAgICAgICAga2V5ID0gaXRl
bVsna2V5J10KICAgICAgICAgICAgICAgICAgICBuYW1lID0gaXRlbVsnbmFtZSddCiAgICAgICAg
ICAgICAgICAgICAgdGl0bGUgPSBmIk9iamVjdCBJbmZvOiB7bmFtZX0iCiAgICAgICAgICAgICAg
ICAgICAgaW5mbyA9IHNlbGYuX2dldF9zM19vYmplY3RfaW5mbyhzZWxmLmN1cnJlbnRfYnVja2V0
LCBrZXksIGl0eXBlKQoKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAg
IHNlbGYuYXBwLnNob3dfcmVzdWx0KGYiRXJyb3IgZ2V0dGluZyBpbmZvOiB7ZX0iKQogICAgICAg
ICAgICByZXR1cm4KCiAgICAgICAgaWYgaW5mbzoKICAgICAgICAgICAgZGlhbG9nID0gRmlsZUlu
Zm9EaWFsb2codGl0bGUsIGluZm8sIHNlbGYuYXBwLmNsb3NlX2RpYWxvZykKICAgICAgICAgICAg
c2VsZi5hcHAuc2hvd19kaWFsb2coZGlhbG9nLCB3aWR0aD0oJ3JlbGF0aXZlJywgNjApLCBoZWln
aHQ9KCdyZWxhdGl2ZScsIDcwKSkKCiAgICBkZWYgX2dldF9mc19pbmZvKHNlbGYsIHBhdGgpOgog
ICAgICAgICIiItCh0LHQvtGAINC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC70L7QutCw0LvRjNC9
0L7QvCDRhNCw0LnQu9C1IiIiCiAgICAgICAgaW1wb3J0IHN0YXQKICAgICAgICBpbXBvcnQgcHdk
CiAgICAgICAgaW1wb3J0IGdycAogICAgICAgIGluZm8gPSBPcmRlcmVkRGljdCgpCgogICAgICAg
IHRyeToKICAgICAgICAgICAgc3QgPSBvcy5zdGF0KHBhdGgpCgogICAgICAgICAgICBpbmZvWydO
YW1lJ10gPSBvcy5wYXRoLmJhc2VuYW1lKHBhdGgpCiAgICAgICAgICAgIGluZm9bJ1BhdGgnXSA9
IHBhdGgKICAgICAgICAgICAgaW5mb1snU2l6ZSddID0gZm9ybWF0X3NpemUoc3Quc3Rfc2l6ZSkg
KyBmIiAoe3N0LnN0X3NpemV9IGJ5dGVzKSIKCiAgICAgICAgICAgICMg0KLQuNC/INGE0LDQudC7
0LAKICAgICAgICAgICAgaWYgc3RhdC5TX0lTRElSKHN0LnN0X21vZGUpOgogICAgICAgICAgICAg
ICAgdHlwZV9zdHIgPSAiRGlyZWN0b3J5IgogICAgICAgICAgICBlbGlmIHN0YXQuU19JU0xOSyhz
dC5zdF9tb2RlKToKICAgICAgICAgICAgICAgIHR5cGVfc3RyID0gIlN5bWxpbmsiCiAgICAgICAg
ICAgIGVsaWYgc3RhdC5TX0lTUkVHKHN0LnN0X21vZGUpOgogICAgICAgICAgICAgICAgdHlwZV9z
dHIgPSAiUmVndWxhciBGaWxlIgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdHlw
ZV9zdHIgPSAiT3RoZXIiCiAgICAgICAgICAgIGluZm9bJ1R5cGUnXSA9IHR5cGVfc3RyCgogICAg
ICAgICAgICAjINCf0YDQsNCy0LAg0LTQvtGB0YLRg9C/0LAKICAgICAgICAgICAgaW5mb1snTW9k
ZSddID0gc3RhdC5maWxlbW9kZShzdC5zdF9tb2RlKQogICAgICAgICAgICBpbmZvWydPY3RhbCdd
ID0gb2N0KHN0LnN0X21vZGUpWy0zOl0KCiAgICAgICAgICAgICMg0JLQu9Cw0LTQtdC70LXRhi/Q
k9GA0YPQv9C/0LAKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgb3duZXIgPSBwd2Qu
Z2V0cHd1aWQoc3Quc3RfdWlkKS5wd19uYW1lCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAg
ICAgICAgIG93bmVyID0gc3RyKHN0LnN0X3VpZCkKCiAgICAgICAgICAgIHRyeToKICAgICAgICAg
ICAgICAgIGdyb3VwID0gZ3JwLmdldGdyZ2lkKHN0LnN0X2dpZCkuZ3JfbmFtZQogICAgICAgICAg
ICBleGNlcHQ6CiAgICAgICAgICAgICAgICBncm91cCA9IHN0cihzdC5zdF9naWQpCgogICAgICAg
ICAgICBpbmZvWydPd25lciddID0gZiJ7b3duZXJ9ICh7c3Quc3RfdWlkfSkiCiAgICAgICAgICAg
IGluZm9bJ0dyb3VwJ10gPSBmIntncm91cH0gKHtzdC5zdF9naWR9KSIKCiAgICAgICAgICAgICMg
0JLRgNC10LzQtdC90L3Ri9C1INC80LXRgtC60LgKICAgICAgICAgICAgaW5mb1snQWNjZXNzJ10g
PSBkYXRldGltZS5mcm9tdGltZXN0YW1wKHN0LnN0X2F0aW1lKS5zdHJmdGltZSgnJVktJW0tJWQg
JUg6JU06JVMnKQogICAgICAgICAgICBpbmZvWydNb2RpZnknXSA9IGRhdGV0aW1lLmZyb210aW1l
c3RhbXAoc3Quc3RfbXRpbWUpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpCiAgICAgICAg
ICAgIGluZm9bJ0NoYW5nZSddID0gZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChzdC5zdF9jdGltZSku
c3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVTJykKCiAgICAgICAgICAgICMg0KLQtdGF0L3QuNGH
0LXRgdC60LDRjyDQuNC90YTQsAogICAgICAgICAgICBpbmZvWydEZXZpY2UnXSA9IHN0LnN0X2Rl
dgogICAgICAgICAgICBpbmZvWydJbm9kZSddID0gc3Quc3RfaW5vCiAgICAgICAgICAgIGluZm9b
J0xpbmtzJ10gPSBzdC5zdF9ubGluawoKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAg
ICAgICAgICAgIGluZm9bJ0Vycm9yJ10gPSBzdHIoZSkKCiAgICAgICAgcmV0dXJuIGluZm8KCiAg
ICBkZWYgX2dldF9zM19idWNrZXRfaW5mbyhzZWxmLCBidWNrZXRfbmFtZSk6CiAgICAgICAgIiIi
0J/QvtC70L3QsNGPINC40L3RhNC+0YDQvNCw0YbQuNGPINC+INCx0LDQutC10YLQtSIiIgogICAg
ICAgIGluZm8gPSBPcmRlcmVkRGljdCgpCiAgICAgICAgaW5mb1snTmFtZSddID0gYnVja2V0X25h
bWUKCiAgICAgICAgY2xpZW50ID0gc2VsZi5zM19tYW5hZ2VyLnMzX2NsaWVudAoKICAgICAgICB0
cnk6CiAgICAgICAgICAgICMgMS4gUmVnaW9uCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAg
ICAgIGxvYyA9IGNsaWVudC5nZXRfYnVja2V0X2xvY2F0aW9uKEJ1Y2tldD1idWNrZXRfbmFtZSkK
ICAgICAgICAgICAgICAgIHJlZ2lvbiA9IGxvYy5nZXQoJ0xvY2F0aW9uQ29uc3RyYWludCcpCiAg
ICAgICAgICAgICAgICBpbmZvWydSZWdpb24nXSA9IHJlZ2lvbiBpZiByZWdpb24gZWxzZSAndXMt
ZWFzdC0xJwogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBpbmZvWydSZWdpb24n
XSA9ICdVbmtub3duJwoKICAgICAgICAgICAgIyAyLiBWZXJzaW9uaW5nCiAgICAgICAgICAgIHRy
eToKICAgICAgICAgICAgICAgIHZlciA9IGNsaWVudC5nZXRfYnVja2V0X3ZlcnNpb25pbmcoQnVj
a2V0PWJ1Y2tldF9uYW1lKQogICAgICAgICAgICAgICAgaW5mb1snVmVyc2lvbmluZyddID0gdmVy
LmdldCgnU3RhdHVzJywgJ0Rpc2FibGVkJykKICAgICAgICAgICAgICAgIGlmICdNRkFEZWxldGUn
IGluIHZlcjoKICAgICAgICAgICAgICAgICAgICBpbmZvWydNRkEgRGVsZXRlJ10gPSB2ZXJbJ01G
QURlbGV0ZSddCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHBhc3MKCiAgICAg
ICAgICAgICMgMy4gRW5jcnlwdGlvbiAoRGVmYXVsdCkKICAgICAgICAgICAgdHJ5OgogICAgICAg
ICAgICAgICAgZW5jID0gY2xpZW50LmdldF9idWNrZXRfZW5jcnlwdGlvbihCdWNrZXQ9YnVja2V0
X25hbWUpCiAgICAgICAgICAgICAgICBydWxlcyA9IGVuYy5nZXQoJ1NlcnZlclNpZGVFbmNyeXB0
aW9uQ29uZmlndXJhdGlvbicsIHt9KS5nZXQoJ1J1bGVzJywgW10pCiAgICAgICAgICAgICAgICBp
ZiBydWxlczoKICAgICAgICAgICAgICAgICAgICBhbGdvID0gcnVsZXNbMF0uZ2V0KCdBcHBseVNl
cnZlclNpZGVFbmNyeXB0aW9uQnlEZWZhdWx0Jywge30pLmdldCgnU1NFQWxnb3JpdGhtJywgJ05v
bmUnKQogICAgICAgICAgICAgICAgICAgIGluZm9bJ0RlZmF1bHQgRW5jJ10gPSBhbGdvCiAgICAg
ICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIGluZm9bJ0RlZmF1bHQgRW5jJ10gPSAnTm9u
ZScKCiAgICAgICAgICAgICMgNC4gTGlmZWN5Y2xlIENvbmZpZ3VyYXRpb24KICAgICAgICAgICAg
dHJ5OgogICAgICAgICAgICAgICAgbGMgPSBjbGllbnQuZ2V0X2J1Y2tldF9saWZlY3ljbGVfY29u
ZmlndXJhdGlvbihCdWNrZXQ9YnVja2V0X25hbWUpCiAgICAgICAgICAgICAgICBydWxlcyA9IGxj
LmdldCgnUnVsZXMnLCBbXSkKICAgICAgICAgICAgICAgIGluZm9bJ0xpZmVjeWNsZSddID0gZiJ7
bGVuKHJ1bGVzKX0gcnVsZShzKSBjb25maWd1cmVkIgogICAgICAgICAgICBleGNlcHQgQ2xpZW50
RXJyb3IgYXMgZToKICAgICAgICAgICAgICAgICMg0KfQsNGB0YLQviDQstC+0LfQstGA0LDRidCw
0LXRgiDQvtGI0LjQsdC60YMsINC10YHQu9C4INC/0YDQsNCy0LjQuyDQvdC10YIKICAgICAgICAg
ICAgICAgIGlmICJOb1N1Y2hMaWZlY3ljbGVDb25maWd1cmF0aW9uIiBpbiBzdHIoZSk6CiAgICAg
ICAgICAgICAgICAgICAgaW5mb1snTGlmZWN5Y2xlJ10gPSAiTm9uZSIKICAgICAgICAgICAgICAg
IGVsc2U6CiAgICAgICAgICAgICAgICAgICAgaW5mb1snTGlmZWN5Y2xlJ10gPSAiRXJyb3IvTm9u
ZSIKCiAgICAgICAgICAgICMgNS4gQ09SUwogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAg
ICBjb3JzID0gY2xpZW50LmdldF9idWNrZXRfY29ycyhCdWNrZXQ9YnVja2V0X25hbWUpCiAgICAg
ICAgICAgICAgICBpbmZvWydDT1JTJ10gPSAiQ29uZmlndXJlZCIKICAgICAgICAgICAgZXhjZXB0
OgogICAgICAgICAgICAgICAgaW5mb1snQ09SUyddID0gIk5vbmUiCgogICAgICAgICAgICAjIDYu
IEFDTCAvIE93bmVyCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGFjbCA9IGNsaWVu
dC5nZXRfYnVja2V0X2FjbChCdWNrZXQ9YnVja2V0X25hbWUpCiAgICAgICAgICAgICAgICBvd25l
ciA9IGFjbC5nZXQoJ093bmVyJywge30pCiAgICAgICAgICAgICAgICBpbmZvWyctLS0gQWNjZXNz
IC0tLSddID0gJycKICAgICAgICAgICAgICAgIGluZm9bJ093bmVyJ10gPSBvd25lci5nZXQoJ0Rp
c3BsYXlOYW1lJywgb3duZXIuZ2V0KCdJRCcsICdOL0EnKSkKICAgICAgICAgICAgZXhjZXB0Ogog
ICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgIyA3LiBVc2FnZSAvIFF1b3RhcyAo0KHQ
v9C10YbQuNGE0LjRh9C90L4g0LTQu9GPIENlcGgsINGH0LDRgdGC0L4g0L3QtdC00L7RgdGC0YPQ
v9C90L4g0YfQtdGA0LXQtyDRgdGC0LDQvdC00LDRgNGC0L3Ri9C5IEFQSSkKICAgICAgICAgICAg
IyDQlNC70Y8gQ2VwaCDQvNC+0LbQvdC+INC/0L7Qv9GA0L7QsdC+0LLQsNGC0Ywg0L/QvtC70YPR
h9C40YLRjCDRh9C10YDQtdC3IEdldEJ1Y2tldEFjY2VsZXJhdGVDb25maWd1cmF0aW9uINC40LvQ
uCDQtNGA0YPQs9C40LUg0YXQsNC60LgsIAogICAgICAgICAgICAjINC90L4g0L3QsNC00LXQttC9
0LXQtSDQv9GA0L7RgdGC0L4g0L/RgNC+0LLQtdGA0LjRgtGMINC00L7RgdGC0YPQv9C90L7RgdGC
0YwuCgogICAgICAgICAgICAjIFBheWVyCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAg
IHBheSA9IGNsaWVudC5nZXRfYnVja2V0X3JlcXVlc3RfcGF5bWVudChCdWNrZXQ9YnVja2V0X25h
bWUpCiAgICAgICAgICAgICAgICBpbmZvWydQYXllciddID0gcGF5LmdldCgnUGF5ZXInLCAnQnVj
a2V0T3duZXInKQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNzCgogICAg
ICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgaW5mb1snRXJyb3InXSA9IHN0
cihlKQoKICAgICAgICByZXR1cm4gaW5mbwoKICAgIGRlZiBfZ2V0X3MzX29iamVjdF9pbmZvKHNl
bGYsIGJ1Y2tldCwga2V5LCBpdHlwZSk6CiAgICAgICAgIiIi0J/QvtC70L3QsNGPINC40L3RhNC+
0YDQvNCw0YbQuNGPINC+0LEg0L7QsdGK0LXQutGC0LUgUzMiIiIKICAgICAgICBpbmZvID0gT3Jk
ZXJlZERpY3QoKQogICAgICAgIGluZm9bJ05hbWUnXSA9IGtleS5zcGxpdCgnLycpWy0xXQogICAg
ICAgIGluZm9bJ0J1Y2tldCddID0gYnVja2V0CiAgICAgICAgaW5mb1snS2V5J10gPSBrZXkKICAg
ICAgICBpbmZvWydTMyBVUkknXSA9IGYiczM6Ly97YnVja2V0fS97a2V5fSIKCiAgICAgICAgaWYg
aXR5cGUgPT0gJ3MzX2Rpcic6CiAgICAgICAgICAgIGluZm9bJ1R5cGUnXSA9ICJGb2xkZXIgKFBy
ZWZpeCkiCiAgICAgICAgICAgIHJldHVybiBpbmZvCgogICAgICAgIHRyeToKICAgICAgICAgICAg
Y2xpZW50ID0gc2VsZi5zM19tYW5hZ2VyLnMzX2NsaWVudAogICAgICAgICAgICBvYmogPSBjbGll
bnQuaGVhZF9vYmplY3QoQnVja2V0PWJ1Y2tldCwgS2V5PWtleSkKCiAgICAgICAgICAgICMgLS0t
INCe0YHQvdC+0LLQvdGL0LUg0YHQstC+0LnRgdGC0LLQsCAtLS0KICAgICAgICAgICAgaW5mb1sn
U2l6ZSddID0gZm9ybWF0X3NpemUob2JqLmdldCgnQ29udGVudExlbmd0aCcsIDApKSArIGYiICh7
b2JqLmdldCgnQ29udGVudExlbmd0aCcsIDApfSkiCiAgICAgICAgICAgIGluZm9bJ0xhc3QgTW9k
J10gPSBvYmouZ2V0KCdMYXN0TW9kaWZpZWQnKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMn
KQogICAgICAgICAgICBpbmZvWydNSU1FIFR5cGUnXSA9IG9iai5nZXQoJ0NvbnRlbnRUeXBlJywg
J04vQScpCiAgICAgICAgICAgIGluZm9bJ1N0b3JhZ2UnXSA9IG9iai5nZXQoJ1N0b3JhZ2VDbGFz
cycsICdTVEFOREFSRCcpCiAgICAgICAgICAgIGluZm9bJ0VUYWcnXSA9IG9iai5nZXQoJ0VUYWcn
LCAnJykucmVwbGFjZSgnIicsICcnKQoKICAgICAgICAgICAgIyAtLS0gV2ViIEhlYWRlcnMgLS0t
CiAgICAgICAgICAgIHdlYl9oZWFkZXJzID0ge30KICAgICAgICAgICAgaWYgJ0NhY2hlQ29udHJv
bCcgaW4gb2JqOgogICAgICAgICAgICAgICAgd2ViX2hlYWRlcnNbJ0NhY2hlLUNvbnRyb2wnXSA9
IG9ialsnQ2FjaGVDb250cm9sJ10KICAgICAgICAgICAgaWYgJ0NvbnRlbnRFbmNvZGluZycgaW4g
b2JqOgogICAgICAgICAgICAgICAgd2ViX2hlYWRlcnNbJ0NvbnRlbnQtRW5jb2RpbmcnXSA9IG9i
alsnQ29udGVudEVuY29kaW5nJ10KICAgICAgICAgICAgaWYgJ0NvbnRlbnREaXNwb3NpdGlvbicg
aW4gb2JqOgogICAgICAgICAgICAgICAgd2ViX2hlYWRlcnNbJ0Rpc3Bvc2l0aW9uJ10gPSBvYmpb
J0NvbnRlbnREaXNwb3NpdGlvbiddCiAgICAgICAgICAgIGlmICdXZWJzaXRlUmVkaXJlY3RMb2Nh
dGlvbicgaW4gb2JqOgogICAgICAgICAgICAgICAgd2ViX2hlYWRlcnNbJ1JlZGlyZWN0J10gPSBv
YmpbJ1dlYnNpdGVSZWRpcmVjdExvY2F0aW9uJ10KCiAgICAgICAgICAgIGlmIHdlYl9oZWFkZXJz
OgogICAgICAgICAgICAgICAgaW5mb1snLS0tIFdlYiBIZWFkZXJzIC0tLSddID0gJycKICAgICAg
ICAgICAgICAgIGZvciBrLCB2IGluIHdlYl9oZWFkZXJzLml0ZW1zKCk6CiAgICAgICAgICAgICAg
ICAgICAgaW5mb1trXSA9IHYKCiAgICAgICAgICAgICMgLS0tIERhdGEgTWFuYWdlbWVudCAoTGlm
ZWN5Y2xlLCBSZXBsaWNhdGlvbiwgUmVzdG9yZSkgLS0tCiAgICAgICAgICAgIGxpZmVjeWNsZV9p
bmZvID0ge30KICAgICAgICAgICAgIyBpZiAnRXhwaXJhdGlvbicgaW4gb2JqOiBsaWZlY3ljbGVf
aW5mb1snRXhwaXJhdGlvbiddID0gb2JqWydFeHBpcmF0aW9uJ10KICAgICAgICAgICAgaWYgJ0V4
cGlyYXRpb24nIGluIG9iajoKICAgICAgICAgICAgICAgIGxpZmVjeWNsZV9pbmZvWydFeHBpcmF0
aW9uJ10gPSBvYmpbJ0V4cGlyYXRpb24nXQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAg
ICAgIyBGSVg6INCV0YHQu9C4INC30LDQs9C+0LvQvtCy0LrQsCDQvdC10YIsINC/0YDQvtCy0LXR
gNC40Lwg0L/RgNCw0LLQuNC70LAg0LLRgNGD0YfQvdGD0Y4gKNC00LvRjyDQuNC90YTQvtGA0LzQ
uNGA0L7QstCw0L3QuNGPKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAg
IGxjID0gY2xpZW50LmdldF9idWNrZXRfbGlmZWN5Y2xlX2NvbmZpZ3VyYXRpb24oQnVja2V0PWJ1
Y2tldCkKICAgICAgICAgICAgICAgICAgICBtYXRjaGVkX3J1bGVzID0gW10KICAgICAgICAgICAg
ICAgICAgICBmb3IgcnVsZSBpbiBsYy5nZXQoJ1J1bGVzJywgW10pOgogICAgICAgICAgICAgICAg
ICAgICAgICBpZiBydWxlLmdldCgnU3RhdHVzJykgPT0gJ0VuYWJsZWQnOgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgcHJlZml4ID0gcnVsZS5nZXQoJ0ZpbHRlcicsIHt9KS5nZXQoJ1ByZWZp
eCcsIHJ1bGUuZ2V0KCdQcmVmaXgnLCAnJykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAj
INCf0YDQvtCy0LXRgNGP0LXQvCDRgdC+0LLQv9Cw0LTQtdC90LjQtSDQv9GA0LXRhNC40LrRgdCw
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBrZXkuc3RhcnRzd2l0aChwcmVmaXgpOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVfaWQgPSBydWxlLmdldCgnSUQnLCAn
VW5rbm93bicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyDQnNC+0LbQvdC+INC0
0L7QsdCw0LLQuNGC0Ywg0LTQtdGC0LDQu9C4IChEYXlzPTMwINC4INGCLtC0LiksINC90L4gSUQg
0LTQvtGB0YLQsNGC0L7Rh9C90L4g0LTQu9GPINC/0L7QtNGB0LrQsNC30LrQuAogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZWRfcnVsZXMuYXBwZW5kKGYiJ3tydWxlX2lkfSci
KQoKICAgICAgICAgICAgICAgICAgICBpZiBtYXRjaGVkX3J1bGVzOgogICAgICAgICAgICAgICAg
ICAgICAgICBsaWZlY3ljbGVfaW5mb1snUG90ZW50aWFsIFJ1bGUnXSA9IGYieycsICcuam9pbiht
YXRjaGVkX3J1bGVzKX0gKFBlbmRpbmcgYXBwbGljYXRpb24pIgogICAgICAgICAgICAgICAgZXhj
ZXB0OgogICAgICAgICAgICAgICAgICAgIHBhc3MgICMg0J/RgNCw0LLQuNC7INC90LXRgiDQuNC7
0Lgg0L3QtdGCINC/0YDQsNCyCgogICAgICAgICAgICBpZiAnUmVwbGljYXRpb25TdGF0dXMnIGlu
IG9iajoKICAgICAgICAgICAgICAgIGxpZmVjeWNsZV9pbmZvWydSZXBsaWNhdGlvbiddID0gb2Jq
WydSZXBsaWNhdGlvblN0YXR1cyddCiAgICAgICAgICAgIGlmICdSZXN0b3JlJyBpbiBvYmo6CiAg
ICAgICAgICAgICAgICBsaWZlY3ljbGVfaW5mb1snUmVzdG9yZSddID0gb2JqWydSZXN0b3JlJ10K
CiAgICAgICAgICAgIGlmIGxpZmVjeWNsZV9pbmZvOgogICAgICAgICAgICAgICAgaW5mb1snLS0t
IExpZmVjeWNsZSAtLS0nXSA9ICcnCiAgICAgICAgICAgICAgICBmb3IgaywgdiBpbiBsaWZlY3lj
bGVfaW5mby5pdGVtcygpOgogICAgICAgICAgICAgICAgICAgIGluZm9ba10gPSB2CgogICAgICAg
ICAgICAjIC0tLSBPYmplY3QgTG9jayAmIFNlY3VyaXR5IC0tLQogICAgICAgICAgICBzZWN1cml0
eV9pbmZvID0ge30KICAgICAgICAgICAgaWYgJ09iamVjdExvY2tNb2RlJyBpbiBvYmo6CiAgICAg
ICAgICAgICAgICBzZWN1cml0eV9pbmZvWydMb2NrIE1vZGUnXSA9IG9ialsnT2JqZWN0TG9ja01v
ZGUnXQogICAgICAgICAgICBpZiAnT2JqZWN0TG9ja1JldGFpblVudGlsRGF0ZScgaW4gb2JqOgog
ICAgICAgICAgICAgICAgc2VjdXJpdHlfaW5mb1snUmV0YWluIFVudGlsJ10gPSBzdHIob2JqWydP
YmplY3RMb2NrUmV0YWluVW50aWxEYXRlJ10pCiAgICAgICAgICAgIGlmICdPYmplY3RMb2NrTGVn
YWxIb2xkU3RhdHVzJyBpbiBvYmo6CiAgICAgICAgICAgICAgICBzZWN1cml0eV9pbmZvWydMZWdh
bCBIb2xkJ10gPSBvYmpbJ09iamVjdExvY2tMZWdhbEhvbGRTdGF0dXMnXQogICAgICAgICAgICBp
ZiAnU2VydmVyU2lkZUVuY3J5cHRpb24nIGluIG9iajoKICAgICAgICAgICAgICAgIHNlY3VyaXR5
X2luZm9bJ0VuY3J5cHRpb24nXSA9IG9ialsnU2VydmVyU2lkZUVuY3J5cHRpb24nXQogICAgICAg
ICAgICBpZiAnU1NFS01TS2V5SWQnIGluIG9iajoKICAgICAgICAgICAgICAgIHNlY3VyaXR5X2lu
Zm9bJ0tNUyBLZXkgSUQnXSA9IG9ialsnU1NFS01TS2V5SWQnXQoKICAgICAgICAgICAgaWYgc2Vj
dXJpdHlfaW5mbzoKICAgICAgICAgICAgICAgIGluZm9bJy0tLSBTZWN1cml0eSAtLS0nXSA9ICcn
CiAgICAgICAgICAgICAgICBmb3IgaywgdiBpbiBzZWN1cml0eV9pbmZvLml0ZW1zKCk6CiAgICAg
ICAgICAgICAgICAgICAgaW5mb1trXSA9IHYKCiAgICAgICAgICAgICMgLS0tIE1ldGFkYXRhIC0t
LQogICAgICAgICAgICBpZiAnTWV0YWRhdGEnIGluIG9iaiBhbmQgb2JqWydNZXRhZGF0YSddOgog
ICAgICAgICAgICAgICAgaW5mb1snLS0tIE1ldGFkYXRhIC0tLSddID0gJycKICAgICAgICAgICAg
ICAgIGZvciBrLCB2IGluIG9ialsnTWV0YWRhdGEnXS5pdGVtcygpOgogICAgICAgICAgICAgICAg
ICAgIGluZm9bZiJNZXRhLXtrfSJdID0gdgoKICAgICAgICAgICAgIyAtLS0gVGFncyAtLS0KICAg
ICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgdGFnc19yZXNwID0gY2xpZW50LmdldF9vYmpl
Y3RfdGFnZ2luZyhCdWNrZXQ9YnVja2V0LCBLZXk9a2V5KQogICAgICAgICAgICAgICAgdGFncyA9
IHRhZ3NfcmVzcC5nZXQoJ1RhZ1NldCcsIFtdKQogICAgICAgICAgICAgICAgaWYgdGFnczoKICAg
ICAgICAgICAgICAgICAgICBpbmZvWyctLS0gVGFncyAtLS0nXSA9ICcnCiAgICAgICAgICAgICAg
ICAgICAgZm9yIHRhZyBpbiB0YWdzOgogICAgICAgICAgICAgICAgICAgICAgICBpbmZvW2YiVGFn
OiB7dGFnWydLZXknXX0iXSA9IHRhZ1snVmFsdWUnXQogICAgICAgICAgICBleGNlcHQgQ2xpZW50
RXJyb3I6CiAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAgICAgICAgIyAtLS0gQUNMIC0t
LQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBhY2wgPSBjbGllbnQuZ2V0X29iamVj
dF9hY2woQnVja2V0PWJ1Y2tldCwgS2V5PWtleSkKICAgICAgICAgICAgICAgIG93bmVyID0gYWNs
LmdldCgnT3duZXInLCB7fSkKICAgICAgICAgICAgICAgIGluZm9bJy0tLSBQZXJtaXNzaW9ucyAt
LS0nXSA9ICcnCiAgICAgICAgICAgICAgICBpbmZvWydPd25lciddID0gZiJ7b3duZXIuZ2V0KCdE
aXNwbGF5TmFtZScsICdOL0EnKX0gKHtvd25lci5nZXQoJ0lEJywgJ04vQScpfSkiCgogICAgICAg
ICAgICAgICAgIyDQmtGA0LDRgtC60LDRjyDRgdCy0L7QtNC60LAg0L/RgNCw0LIKICAgICAgICAg
ICAgICAgIGdyYW50cyA9IFtdCiAgICAgICAgICAgICAgICBmb3IgZyBpbiBhY2wuZ2V0KCdHcmFu
dHMnLCBbXSk6CiAgICAgICAgICAgICAgICAgICAgcGVybSA9IGcuZ2V0KCdQZXJtaXNzaW9uJykK
ICAgICAgICAgICAgICAgICAgICBncmFudGVlID0gZy5nZXQoJ0dyYW50ZWUnLCB7fSkKICAgICAg
ICAgICAgICAgICAgICBpZiBncmFudGVlLmdldCgnVHlwZScpID09ICdHcm91cCc6CiAgICAgICAg
ICAgICAgICAgICAgICAgIHdobyA9IGdyYW50ZWUuZ2V0KCdVUkknLCAnJykuc3BsaXQoJy8nKVst
MV0KICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB3aG8g
PSBncmFudGVlLmdldCgnRGlzcGxheU5hbWUnLCAnSUQ9JyArIGdyYW50ZWUuZ2V0KCdJRCcsICcn
KVs6NF0pCiAgICAgICAgICAgICAgICAgICAgZ3JhbnRzLmFwcGVuZChmInt3aG99OntwZXJtfSIp
CgogICAgICAgICAgICAgICAgaWYgZ3JhbnRzOgogICAgICAgICAgICAgICAgICAgIGluZm9bJ0FD
TCddID0gIiwgIi5qb2luKGdyYW50c1s6M10pICAjINCf0L7QutCw0LfRi9Cy0LDQtdC8INC/0LXR
gNCy0YvQtSAzINC60L7QvNC/0LDQutGC0L3QvgogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAg
ICAgICAgICBwYXNzCgogICAgICAgICAgICAjIC0tLSBWZXJzaW9ucyAtLS0KICAgICAgICAgICAg
dHJ5OgogICAgICAgICAgICAgICAgdmVyc2lvbnMgPSBjbGllbnQubGlzdF9vYmplY3RfdmVyc2lv
bnMoQnVja2V0PWJ1Y2tldCwgUHJlZml4PWtleSkKICAgICAgICAgICAgICAgIGlmICdWZXJzaW9u
cycgaW4gdmVyc2lvbnM6CiAgICAgICAgICAgICAgICAgICAgb2JqX3ZlcnNpb25zID0gW3YgZm9y
IHYgaW4gdmVyc2lvbnNbJ1ZlcnNpb25zJ10gaWYgdlsnS2V5J10gPT0ga2V5XQogICAgICAgICAg
ICAgICAgICAgIGlmIGxlbihvYmpfdmVyc2lvbnMpID4gMDoKICAgICAgICAgICAgICAgICAgICAg
ICAgaW5mb1snLS0tIFZlcnNpb25zIC0tLSddID0gJycKICAgICAgICAgICAgICAgICAgICAgICAg
aW5mb1snQ291bnQnXSA9IGxlbihvYmpfdmVyc2lvbnMpCiAgICAgICAgICAgICAgICAgICAgICAg
IGZvciBpLCB2IGluIGVudW1lcmF0ZShvYmpfdmVyc2lvbnNbOjVdKToKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHZpZCA9IHYuZ2V0KCdWZXJzaW9uSWQnLCAnbnVsbCcpWzo4XQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgaXNfY3VyID0gIiAqIiBpZiB2LmdldCgnSXNMYXRlc3QnKSBl
bHNlICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlID0gdi5nZXQoJ0xhc3RNb2Rp
ZmllZCcpLnN0cmZ0aW1lKCclbS0lZCAlSDolTScpCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzaXplID0gZm9ybWF0X3NpemUodi5nZXQoJ1NpemUnLCAwKSkKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGluZm9bZiJ2e2kgKyAxfSJdID0gZiJ7dmlkOjw4fSB7ZGF0ZX0ge3NpemV9e2lz
X2N1cn0iCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAg
ICAgICMgLS0tIFByZXNpZ25lZCBVUkwgLS0tCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAg
ICAgIHVybCA9IGNsaWVudC5nZW5lcmF0ZV9wcmVzaWduZWRfdXJsKCdnZXRfb2JqZWN0JywgUGFy
YW1zPXsnQnVja2V0JzogYnVja2V0LCAnS2V5Jzoga2V5fSwgRXhwaXJlc0luPTM2MDApCiAgICAg
ICAgICAgICAgICBpbmZvWydVUkxfRlVMTCddID0gdXJsICAjINCa0LvRjtGHINC00LvRjyBGaWxl
SW5mb0RpYWxvZwogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNzCgogICAg
ICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgaW5mb1snRXJyb3InXSA9IHN0
cihlKQoKICAgICAgICByZXR1cm4gaW5mbwoKICAgIGRlZiBjb3B5X3ZlcnNpb24oc2VsZiwgZmls
ZV9kYXRhLCB2ZXJzaW9uX2RhdGEsIG1vdmU9RmFsc2UsIGNhbGxiYWNrPU5vbmUpOgogICAgICAg
ICIiIgogICAgICAgINCa0L7Qv9C40YDRg9C10YIg0LjQu9C4INC/0LXRgNC10LzQtdGJ0LDQtdGC
INC60L7QvdC60YDQtdGC0L3Rg9GOINCy0LXRgNGB0LjRjiDRhNCw0LnQu9CwINCyINC90LXQsNC6
0YLQuNCy0L3Rg9GOICjRhtC10LvQtdCy0YPRjikg0L/QsNC90LXQu9GMLgoKICAgICAgICDQkNGA
0LPRg9C80LXQvdGC0Ys6CiAgICAgICAgICAgIGZpbGVfZGF0YSAoZGljdCk6INCh0LvQvtCy0LDR
gNGMINGBINC00LDQvdC90YvQvNC4INC+0YHQvdC+0LLQvdC+0LPQviDRhNCw0LnQu9CwICjRgdC+
0LTQtdGA0LbQuNGCINC40LzRjywg0YLQuNC/LCDQutC70Y7RhyDQuCDRgi7QtC4pLgogICAgICAg
ICAgICB2ZXJzaW9uX2RhdGEgKGRpY3QpOiDQodC70L7QstCw0YDRjCDRgSDQtNCw0L3QvdGL0LzQ
uCDQutC+0L3QutGA0LXRgtC90L7QuSDQstC10YDRgdC40LggKFZlcnNpb25JZCwgSXNMYXRlc3Qs
IFNpemUsIExhc3RNb2RpZmllZCkuCiAgICAgICAgICAgIG1vdmUgKGJvb2wpOiDQoNC10LbQuNC8
INC+0L/QtdGA0LDRhtC40LguCiAgICAgICAgICAgICAgICAgICAgICAgICDQldGB0LvQuCBUcnVl
IOKAlCDQstGL0L/QvtC70L3Rj9C10YLRgdGPINC/0LXRgNC10LzQtdGJ0LXQvdC40LUgKNC60L7Q
v9C40YDQvtCy0LDQvdC40LUgKyDRg9C00LDQu9C10L3QuNC1INC40YHRhdC+0LTQvdC+0Lkg0LLQ
tdGA0YHQuNC4KS4KICAgICAgICAgICAgICAgICAgICAgICAgINCV0YHQu9C4IEZhbHNlICjQv9C+
INGD0LzQvtC70YfQsNC90LjRjikg4oCUINC+0LHRi9GH0L3QvtC1INC60L7Qv9C40YDQvtCy0LDQ
vdC40LUuCiAgICAgICAgICAgIGNhbGxiYWNrIChjYWxsYWJsZSk6INCk0YPQvdC60YbQuNGPINC+
0LHRgNCw0YLQvdC+0LPQviDQstGL0LfQvtCy0LAsINC60L7RgtC+0YDQsNGPINCx0YPQtNC10YIg
0LLRi9C/0L7Qu9C90LXQvdCwINC/0L7RgdC70LUg0LfQsNCy0LXRgNGI0LXQvdC40Y8KICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAg0L7Qv9C10YDQsNGG0LjQuCDQutC+0L/QuNGA0L7Q
stCw0L3QuNGPL9C/0LXRgNC10LzQtdGJ0LXQvdC40Y8g0Lgg0LfQsNC60YDRi9GC0LjRjyDQtNC4
0LDQu9C+0LPQsCDQv9GA0L7Qs9GA0LXRgdGB0LAuCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgINCY0YHQv9C+0LvRjNC30YPQtdGC0YHRjyDQtNC70Y8g0LLQvtGB0YHRgtCw0L3QvtCy
0LvQtdC90LjRjyDQtNC40LDQu9C+0LPQsCDQstGL0LHQvtGA0LAg0LLQtdGA0YHQuNC5LgogICAg
ICAgICIiIgogICAgICAgIHRhcmdldF9wYW5lbCA9IHNlbGYuYXBwLmdldF9pbmFjdGl2ZV9wYW5l
bCgpCgogICAgICAgICMg0KHQvtGF0YDQsNC90Y/QtdC8INGC0LXQutGD0YnQuNC5INGE0L7QutGD
0YEsINGH0YLQvtCx0Ysg0LLQvtGB0YHRgtCw0L3QvtCy0LjRgtGMINC10LPQviwg0LXRgdC70Lgg
0L/QsNC90LXQu9GMINC+0LHQvdC+0LLQuNGC0YHRjwogICAgICAgIHRyeToKICAgICAgICAgICAg
Y3VycmVudF9pbmRleCA9IHNlbGYubGlzdGJveC5mb2N1c19wb3NpdGlvbgogICAgICAgIGV4Y2Vw
dDoKICAgICAgICAgICAgY3VycmVudF9pbmRleCA9IE5vbmUKCiAgICAgICAgaXRlbV90b19jb3B5
ID0gZmlsZV9kYXRhLmNvcHkoKQogICAgICAgIGl0ZW1fdG9fY29weVsnVmVyc2lvbklkJ10gPSB2
ZXJzaW9uX2RhdGFbJ1ZlcnNpb25JZCddCiAgICAgICAgaXRlbV90b19jb3B5WydTaXplJ10gPSB2
ZXJzaW9uX2RhdGFbJ1NpemUnXQoKICAgICAgICBpdGVtcyA9IFtpdGVtX3RvX2NvcHldCiAgICAg
ICAgb3BlcmF0aW9uID0gIm1vdmUiIGlmIG1vdmUgZWxzZSAiY29weSIKICAgICAgICB0aXRsZSA9
ICJNb3ZlIFZlcnNpb24iIGlmIG1vdmUgZWxzZSAiQ29weSBWZXJzaW9uIgoKICAgICAgICBpZiB0
YXJnZXRfcGFuZWwubW9kZSA9PSAnZnMnOgogICAgICAgICAgICBiYXNlX3BhdGggPSB0YXJnZXRf
cGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgKICAgICAgICAgICAgZGVzdF9wYXRoID0gb3Mu
cGF0aC5qb2luKGJhc2VfcGF0aCwgZmlsZV9kYXRhWyduYW1lJ10pCiAgICAgICAgICAgIGRlc3Rf
ZGVzYyA9IGYiRlM6IHtkZXN0X3BhdGh9IgogICAgICAgICAgICAjINCQINCy0L7RgiDQsiDQtNC4
0LDQu9C+0LMg0L/QtdGA0LXQtNCw0LXQvCDQuNC80LXQvdC90L4g0L/Rg9GC0Ywg0LTQu9GPINGA
0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8KICAgICAgICAgICAgZWRpdF9wYXRoID0gZGVzdF9w
YXRoCiAgICAgICAgZWxpZiB0YXJnZXRfcGFuZWwubW9kZSA9PSAnczMnOgogICAgICAgICAgICBp
ZiBub3QgdGFyZ2V0X3BhbmVsLmN1cnJlbnRfYnVja2V0OgogICAgICAgICAgICAgICAgc2VsZi5h
cHAuc2hvd19yZXN1bHQoIlRhcmdldCBwYW5lbCBpcyBub3QgaW4gYSBidWNrZXQiKQogICAgICAg
ICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIHByZWZpeCA9IHRhcmdldF9wYW5lbC5jdXJyZW50
X3ByZWZpeCBpZiB0YXJnZXRfcGFuZWwuY3VycmVudF9wcmVmaXggZWxzZSAiIgoKICAgICAgICAg
ICAgaWYgdGFyZ2V0X3BhbmVsLmN1cnJlbnRfYnVja2V0OgogICAgICAgICAgICAgICAgZWRpdF9w
YXRoID0gcHJlZml4ICsgZmlsZV9kYXRhWyduYW1lJ10KICAgICAgICAgICAgICAgIGRlc3RfZGVz
YyA9IGYiUzM6IHt0YXJnZXRfcGFuZWwuY3VycmVudF9idWNrZXR9L3tlZGl0X3BhdGh9IgogICAg
ICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZWRpdF9wYXRoID0gZmlsZV9kYXRhWyduYW1l
J10KICAgICAgICAgICAgICAgIGRlc3RfZGVzYyA9IGYiUzM6IHtlZGl0X3BhdGh9IgogICAgICAg
IGVsc2U6CiAgICAgICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KCJJbnZhbGlkIHRhcmdldCIp
CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBkZWYgb25fY29uZmlybShjb25maXJtZWQsIHRh
cmdldF9wYXRoX2Zyb21fZGlhbG9nKToKICAgICAgICAgICAgc2VsZi5hcHAuY2xvc2VfZGlhbG9n
KCkKICAgICAgICAgICAgaWYgY29uZmlybWVkOgogICAgICAgICAgICAgICAgdGFyZ2V0X3BhdGgg
PSB0YXJnZXRfcGF0aF9mcm9tX2RpYWxvZyBpZiB0YXJnZXRfcGF0aF9mcm9tX2RpYWxvZyAhPSAi
IiBlbHNlIGVkaXRfcGF0aAoKICAgICAgICAgICAgICAgIGFuYWx5emVkX2l0ZW0gPSB7CiAgICAg
ICAgICAgICAgICAgICAgJ3R5cGUnOiBmaWxlX2RhdGFbJ3R5cGUnXSwKICAgICAgICAgICAgICAg
ICAgICAnaXRlbSc6IGl0ZW1fdG9fY29weSwKICAgICAgICAgICAgICAgICAgICAnZmlsZXMnOiBb
aXRlbV90b19jb3B5XQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYW5hbHl6ZWQg
PSBbYW5hbHl6ZWRfaXRlbV0KCiAgICAgICAgICAgICAgICB0b3RhbF9ieXRlcyA9IGl0ZW1fdG9f
Y29weVsnU2l6ZSddCgogICAgICAgICAgICAgICAgc2VsZi5hcHAub3ZlcndyaXRlX2FsbCA9IEZh
bHNlCiAgICAgICAgICAgICAgICBzZWxmLmFwcC52ZXJzaW9uX2FsbCA9IEZhbHNlCiAgICAgICAg
ICAgICAgICBzZWxmLmFwcC5za2lwX2FsbCA9IEZhbHNlCgogICAgICAgICAgICAgICAgIyDQn9C1
0YDQtdC00LDQtdC8IHJlc3RvcmVfaW5kZXgg0LggY2FsbGJhY2sgKG9uX2NvbXBsZXRlKQogICAg
ICAgICAgICAgICAgc2VsZi5hcHAuX2RvX2NvcHlfd2l0aF9wcm9ncmVzcygKICAgICAgICAgICAg
ICAgICAgICBhbmFseXplZCwKICAgICAgICAgICAgICAgICAgICBzZWxmLAogICAgICAgICAgICAg
ICAgICAgIHRhcmdldF9wYW5lbCwKICAgICAgICAgICAgICAgICAgICB0YXJnZXRfcGF0aCwKICAg
ICAgICAgICAgICAgICAgICBpdGVtX3RvX2NvcHlbJ25hbWUnXSwKICAgICAgICAgICAgICAgICAg
ICBpc19tb3ZlPW1vdmUsCiAgICAgICAgICAgICAgICAgICAgdG90YWxfYnl0ZXM9dG90YWxfYnl0
ZXMsCiAgICAgICAgICAgICAgICAgICAgcmVzdG9yZV9pbmRleD1jdXJyZW50X2luZGV4LCAgIyDQ
ktC+0YHRgdGC0LDQvdC+0LLQuNGCINC60YPRgNGB0L7RgAogICAgICAgICAgICAgICAgICAgIG9u
X2NvbXBsZXRlPWNhbGxiYWNrICAjINCS0YvQt9C+0LLQtdGCINC00LjQsNC70L7QsyDQstC10YDR
gdC40Lkg0L/QvtGB0LvQtSDQt9Cw0LLQtdGA0YjQtdC90LjRjwogICAgICAgICAgICAgICAgKQog
ICAgICAgICAgICAjINCV0YHQu9C4INC+0YLQvNC10L3QsCDQuNC70Lgg0L/QvtC00YLQstC10YDQ
ttC00LXQvdC40LUgLSDQsiDQu9GO0LHQvtC8INGB0LvRg9GH0LDQtSDQstC+0LfQstGA0LDRidCw
0LXQvNGB0Y8sINC10YHQu9C4INC10YHRgtGMIGNhbGxiYWNrCiAgICAgICAgICAgIGlmIGNhbGxi
YWNrOgogICAgICAgICAgICAgICAgIyDQndC10LHQvtC70YzRiNCw0Y8g0LfQsNC00LXRgNC20LrQ
sCwg0YfRgtC+0LHRiyBVSSDRg9GB0L/QtdC7INC+0YLRgNCw0LHQvtGC0LDRgtGMINC30LDQutGA
0YvRgtC40LUg0L/RgNC10LTRi9C00YPRidC10LPQviDQtNC40LDQu9C+0LPQsAogICAgICAgICAg
ICAgICAgc2VsZi5hcHAubG9vcC5zZXRfYWxhcm1faW4oMC4yLCBsYW1iZGEgKmE6IGNhbGxiYWNr
KCkpCgogICAgICAgIHZlcnNpb25faWQgPSB2ZXJzaW9uX2RhdGEuZ2V0KCdWZXJzaW9uSWQnLCAn
JylbOjEyXQogICAgICAgIGlzX2xhdGVzdCA9IHZlcnNpb25fZGF0YS5nZXQoJ0lzTGF0ZXN0Jywg
RmFsc2UpCiAgICAgICAgbGF0ZXN0X3dhcm4gPSAiIFtUSElTIElTIFRIRSBMQVRFU1QgVkVSU0lP
TiFdIiBpZiBpc19sYXRlc3QgZWxzZSAiIgogICAgICAgIHNpemUgPSBzZWxmLmZvcm1hdF9zaXpl
KHZlcnNpb25fZGF0YS5nZXQoJ1NpemUnLCAwKSkgICMgc2VsZi5mb3JtYXRfc2l6ZSDQuNGB0L/R
gNCw0LLQuNC7CiAgICAgICAgbXRpbWUgPSB2ZXJzaW9uX2RhdGEuZ2V0KCdMYXN0TW9kaWZpZWQn
LCAnJykuc3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVTJykgaWYgdmVyc2lvbl9kYXRhLmdldCgK
ICAgICAgICAgICAgJ0xhc3RNb2RpZmllZCcpIGVsc2UgJ04vQScKCiAgICAgICAgZnJvbV9kZXNj
ID0gZiJ7ZmlsZV9kYXRhWyduYW1lJ119IChWZXJzaW9uIElEOiB7dmVyc2lvbl9kYXRhLmdldCgn
VmVyc2lvbklkJywgJycpWzoxMF19ICBTaXplOiB7c2l6ZX0gTW9kaWZpZWQ6IHttdGltZX0gIHts
YXRlc3Rfd2Fybn0pICIKICAgICAgICBkaWFsb2cgPSBDb3B5TW92ZURpYWxvZyh0aXRsZSwgZnJv
bV9kZXNjLCBlZGl0X3BhdGgsIG9uX2NvbmZpcm0pCiAgICAgICAgc2VsZi5hcHAuc2hvd19kaWFs
b2coZGlhbG9nKQoKICAgIGRlZiBzaG93X3NvcnRfZGlhbG9nKHNlbGYpOgogICAgICAgICIiItCf
0L7QutCw0LfQsNGC0Ywg0LTQuNCw0LvQvtCzINCy0YvQsdC+0YDQsCDRgdC+0YDRgtC40YDQvtCy
0LrQuCIiIgoKICAgICAgICBkZWYgY2FsbGJhY2soY29uZmlybWVkLCBtb2RlLCByZXZlcnNlKToK
ICAgICAgICAgICAgc2VsZi5hcHAuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgaWYgY29uZmly
bWVkIGFuZCBtb2RlOgogICAgICAgICAgICAgICAgc2VsZi5zb3J0X21vZGUgPSBtb2RlCiAgICAg
ICAgICAgICAgICBzZWxmLnNvcnRfcmV2ZXJzZSA9IHJldmVyc2UgICMg0KHQvtGF0YDQsNC90Y/Q
tdC8INCy0YvQsdC+0YAKCiAgICAgICAgICAgICAgICAjINCU0LvRjyBTMzog0L/QtdGA0LXRgdC+
0YDRgtC40YDQvtCy0YvQstCw0LXQvCDRgtC+0LvRjNC60L4g0LXRgdC70Lgg0LTQsNC90L3Ri9C1
INGD0LbQtSDQt9Cw0LPRgNGD0LbQtdC90YsKICAgICAgICAgICAgICAgIGlmIHNlbGYubW9kZSA9
PSAnczMnIGFuZCBub3Qgc2VsZi5sb2FkaW5nX2luX3Byb2dyZXNzOgogICAgICAgICAgICAgICAg
ICAgIHNlbGYuX3Jlc29ydF9jdXJyZW50X3ZpZXcoKQogICAgICAgICAgICAgICAgZWxzZToKICAg
ICAgICAgICAgICAgICAgICBzZWxmLnJlZnJlc2goKQoKICAgICAgICAgICAgICAgIHJldl9tYXJr
ID0gIiAoUmV2KSIgaWYgcmV2ZXJzZSBlbHNlICIiCiAgICAgICAgICAgICAgICBzZWxmLmFwcC5z
aG93X3Jlc3VsdChmJ1NvcnQgYnk6IHttb2RlfXtyZXZfbWFya30nKQoKICAgICAgICAgICAgICAg
IGlmIHNlbGYubW9kZSA9PSAnczMnOgogICAgICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlX2hl
YWRlcihmJ1tTMyBNb2RlIC0ge3NlbGYuY3VycmVudF9lbmRwb2ludH1dIFNvcnQ6IHtzZWxmLnNv
cnRfbW9kZX17cmV2X21hcmt9JykKCiAgICAgICAgIyDQn9C10YDQtdC00LDQtdC8INGC0LXQutGD
0YnQuNC5INGA0LXQttC40Lwg0Lgg0YTQu9Cw0LMgcmV2ZXJzZQogICAgICAgIGRpYWxvZyA9IFNv
cnREaWFsb2coc2VsZi5zb3J0X21vZGUsIHNlbGYuc29ydF9yZXZlcnNlLCBjYWxsYmFjaykKICAg
ICAgICBzZWxmLmFwcC5zaG93X2RpYWxvZyhkaWFsb2cpCgogICAgZGVmIF9yZXNvcnRfY3VycmVu
dF92aWV3KHNlbGYpOgogICAgICAgICIiItCf0LXRgNC10YHQvtGA0YLQuNGA0L7QstCw0YLRjCDR
gtC10LrRg9GJ0LjQuSDQstC40LQg0LHQtdC3INC/0LXRgNC10LfQsNCz0YDRg9C30LrQuCDQuNC3
INGB0LXRgtC4IiIiCiAgICAgICAgZm9sZGVycyA9IFtdCiAgICAgICAgZmlsZXMgPSBbXQoKICAg
ICAgICAjIDEuINCY0LfQstC70LXQutCw0LXQvCDQtNCw0L3QvdGL0LUg0LjQtyDRgtC10LrRg9GJ
0LjRhSDQstC40LTQttC10YLQvtCyIHdhbGtlcgogICAgICAgIGZvciB3aWRnZXQgaW4gc2VsZi53
YWxrZXI6CiAgICAgICAgICAgIHcgPSB3aWRnZXQub3JpZ2luYWxfd2lkZ2V0IGlmIGlzaW5zdGFu
Y2Uod2lkZ2V0LCB1cndpZC5BdHRyTWFwKSBlbHNlIHdpZGdldAogICAgICAgICAgICBpZiBpc2lu
c3RhbmNlKHcsIFNlbGVjdGFibGVUZXh0KToKICAgICAgICAgICAgICAgIGRhdGEgPSB3LmRhdGEK
ICAgICAgICAgICAgICAgIGR0eXBlID0gZGF0YS5nZXQoJ3R5cGUnKQoKICAgICAgICAgICAgICAg
ICMgRklYOiDQmNGB0L/QvtC70YzQt9GD0LXQvCDQvdC+0LLRi9C1INGC0LjQv9GLICdzM19kaXIn
INC4ICdzM19maWxlJwogICAgICAgICAgICAgICAgaWYgZHR5cGUgPT0gJ3MzX2Rpcic6CiAgICAg
ICAgICAgICAgICAgICAgZm9sZGVycy5hcHBlbmQoeydLZXknOiBkYXRhWydrZXknXX0pCiAgICAg
ICAgICAgICAgICBlbGlmIGR0eXBlID09ICdzM19maWxlJzoKICAgICAgICAgICAgICAgICAgICAj
INCS0L7RgdGB0YLQsNC90LDQstC70LjQstCw0LXQvCDRgdGC0YDRg9C60YLRg9GA0YMsINC60L7R
gtC+0YDRg9GOINC+0LbQuNC00LDQtdGCIF9jcmVhdGVfZGlzcGxheV9pdGVtcwogICAgICAgICAg
ICAgICAgICAgIGZpbGVzLmFwcGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICdLZXknOiBk
YXRhWydrZXknXSwKICAgICAgICAgICAgICAgICAgICAgICAgJ1NpemUnOiBkYXRhLmdldCgnc2l6
ZScsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAnTGFzdE1vZGlmaWVkJzogZGF0YS5nZXQo
J210aW1lJyksCiAgICAgICAgICAgICAgICAgICAgICAgICd2ZXJzaW9uX2NvdW50JzogZGF0YS5n
ZXQoJ3ZlcnNpb25fY291bnQnLCAxKSAgIyDQodC+0YXRgNCw0L3Rj9C10Lwg0LrQvtC7LdCy0L4g
0LLQtdGA0YHQuNC5CiAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgIyAyLiDQntGH0LjR
idCw0LXQvCB3YWxrZXIsINC+0YHRgtCw0LLQu9GP0Y8g0YLQvtC70YzQutC+INC90LDQstC40LPQ
sNGG0LjRjgogICAgICAgIGtlZXBfY291bnQgPSAwCiAgICAgICAga2VlcF90eXBlcyA9IFsndG9f
cm9vdF9tZW51JywgJ3BhcmVudCcsICdzM19wYXJlbnQnLCAnczNfYmFjayddCgogICAgICAgIGZv
ciB3aWRnZXQgaW4gc2VsZi53YWxrZXI6CiAgICAgICAgICAgIHcgPSB3aWRnZXQub3JpZ2luYWxf
d2lkZ2V0IGlmIGlzaW5zdGFuY2Uod2lkZ2V0LCB1cndpZC5BdHRyTWFwKSBlbHNlIHdpZGdldAog
ICAgICAgICAgICBpZiBpc2luc3RhbmNlKHcsIFNlbGVjdGFibGVUZXh0KToKICAgICAgICAgICAg
ICAgIGlmIHcuZGF0YS5nZXQoJ3R5cGUnKSBpbiBrZWVwX3R5cGVzOgogICAgICAgICAgICAgICAg
ICAgIGtlZXBfY291bnQgKz0gMQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
ICAgICBicmVhawoKICAgICAgICBkZWwgc2VsZi53YWxrZXJba2VlcF9jb3VudDpdCgogICAgICAg
ICMgMy4g0J/QtdGA0LXRgdC+0LfQtNCw0LXQvCDQstC40LTQttC10YLRiyDRgSDRg9GH0LXRgtC+
0Lwg0L3QvtCy0L7QuSDRgdC+0YDRgtC40YDQvtCy0LrQuAogICAgICAgICMgc2VsZi5zb3J0X21v
ZGUg0YPQttC1INCx0YvQuyDQvtCx0L3QvtCy0LvQtdC9INC00LjQsNC70L7Qs9C+0Lwg0L/QtdGA
0LXQtCDQstGL0LfQvtCy0L7QvCDRjdGC0L7Qs9C+INC80LXRgtC+0LTQsAogICAgICAgIGl0ZW1z
ID0gc2VsZi5fY3JlYXRlX2Rpc3BsYXlfaXRlbXMoZm9sZGVycywgZmlsZXMsIGRvX3NvcnQ9VHJ1
ZSkKCiAgICAgICAgZm9yIGl0ZW0gaW4gaXRlbXM6CiAgICAgICAgICAgIHNlbGYud2Fsa2VyLmFw
cGVuZChpdGVtKQoKICAgICAgICAjIDQuINCe0LHQvdC+0LLQu9GP0LXQvCDRjdC60YDQsNC9CiAg
ICAgICAgaWYgc2VsZi5hcHAgYW5kIGhhc2F0dHIoc2VsZi5hcHAsICdsb29wJykgYW5kIHNlbGYu
YXBwLmxvb3A6CiAgICAgICAgICAgIHNlbGYuYXBwLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICMg
0J7QkdCd0J7QktCb0JXQndCY0JUgUzMg0YLQvtC70YzQutC+INC/0YDQuCDQuNC30LzQtdC90LXQ
vdC40Y/RhQogICAgZGVmIG1hcmtfczNfZm9yX3JlZnJlc2goc2VsZik6CiAgICAgICAgIiIi0J7R
gtC80LXRgtC40YLRjCDRh9GC0L4gUzMg0L3Rg9C20L3QviDQvtCx0L3QvtCy0LjRgtGMIiIiCiAg
ICAgICAgc2VsZi5zM19uZWVkc19yZWZyZXNoID0gVHJ1ZQoKICAgIGRlZiBzb3J0X2l0ZW1zKHNl
bGYsIGl0ZW1zKToKICAgICAgICAiIiLQodC+0YDRgtC40YDQvtCy0LDRgtGMINGN0LvQtdC80LXQ
vdGC0Ysg0YEg0YPRh9C10YLQvtC8INGE0LvQsNCz0LAgUmV2ZXJzZSIiIgoKICAgICAgICBkZWYg
Z2V0X3R5cGVfcHJpb3JpdHkoaXRlbSk6CiAgICAgICAgICAgIHQgPSBpdGVtLmdldCgndHlwZScs
ICcnKQogICAgICAgICAgICBpZiB0IGluIFsnZm9sZGVyJywgJ3MzX2RpcicsICdmc19kaXInLCAn
cGFyZW50JywgJ3MzX3BhcmVudCddOgogICAgICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICAg
ICAgcmV0dXJuIDEKCiAgICAgICAgIyDQn9C+0LvRg9GH0LDQtdC8INGB0L/QuNGB0LrQuAogICAg
ICAgIGRpcnMgPSBbeCBmb3IgeCBpbiBpdGVtcyBpZiBnZXRfdHlwZV9wcmlvcml0eSh4KSA9PSAw
XQogICAgICAgIGZpbGVzID0gW3ggZm9yIHggaW4gaXRlbXMgaWYgZ2V0X3R5cGVfcHJpb3JpdHko
eCkgPT0gMV0KCiAgICAgICAgIyDQpNGD0L3QutGG0LjRjy3QutC70Y7RhyDQtNC70Y8g0YHQvtGA
0YLQuNGA0L7QstC60Lgg0YTQsNC50LvQvtCyCiAgICAgICAga2V5X2Z1bmMgPSBOb25lCiAgICAg
ICAgcmV2ZXJzZV9maWxlcyA9IHNlbGYuc29ydF9yZXZlcnNlCgogICAgICAgIGlmIHNlbGYuc29y
dF9tb2RlID09ICduYW1lJzoKICAgICAgICAgICAga2V5X2Z1bmMgPSBsYW1iZGEgeDogeC5nZXQo
J25hbWUnLCB4LmdldCgna2V5JywgJycpKS5sb3dlcigpCiAgICAgICAgICAgICMg0JTQu9GPINC4
0LzQtdC90LggcmV2ZXJzZSDRgNCw0LHQvtGC0LDQtdGCICLQutCw0Log0L7QttC40LTQsNC10YLR
gdGPIiAoWi1BKQoKICAgICAgICBlbGlmIHNlbGYuc29ydF9tb2RlID09ICdleHQnOgogICAgICAg
ICAgICBkZWYgZ2V0X2V4dChpdGVtKToKICAgICAgICAgICAgICAgIG5hbWUgPSBpdGVtLmdldCgn
bmFtZScsIGl0ZW0uZ2V0KCdrZXknLCAnJykpCiAgICAgICAgICAgICAgICBpZiAnLicgaW4gbmFt
ZToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZS5yc3BsaXQoJy4nLCAxKVsxXS5sb3dl
cigpCiAgICAgICAgICAgICAgICByZXR1cm4gJycKCiAgICAgICAgICAgIGtleV9mdW5jID0gZ2V0
X2V4dAoKICAgICAgICBlbGlmIHNlbGYuc29ydF9tb2RlID09ICdzaXplJzoKICAgICAgICAgICAg
a2V5X2Z1bmMgPSBsYW1iZGEgeDogeC5nZXQoJ3NpemUnLCB4LmdldCgnU2l6ZScsIDApKQogICAg
ICAgICAgICAjINCf0L4g0YPQvNC+0LvRh9Cw0L3QuNGOIChyZXZlcnNlPUZhbHNlKSBzaXplINGB
0L7RgNGC0LjRgNGD0LXRgiDQv9C+INGD0LHRi9Cy0LDQvdC40Y4gKNCx0L7Qu9GM0YjQuNC1INGB
0LLQtdGA0YXRgyk/IAogICAgICAgICAgICAjINCe0LHRi9GH0L3QviDQsiDRhNCw0LnQuy3QvNC1
0L3QtdC00LbQtdGA0LDRhSBzaXplIGFzYyA9INC80LDQu9C10L3RjNC60LjQtSDRgdCy0LXRgNGF
0YMuCiAgICAgICAgICAgICMg0JTQsNCy0LDQudGC0LUg0YHQtNC10LvQsNC10Lwg0YHRgtCw0L3Q
tNCw0YDRgtC90L46IEZhbHNlID0gYXNjICgwLi45KSwgVHJ1ZSA9IGRlc2MgKDkuLjApCiAgICAg
ICAgICAgICMg0J3QniDQstGL0YjQtSDQsiDQutC+0LTQtSDQsdGL0LvQviBmaWxlcy5zb3J0KC4u
LiwgcmV2ZXJzZT1UcnVlKSDQtNC70Y8gc2l6ZS4KICAgICAgICAgICAgIyDQl9C90LDRh9C40YIs
INC10YHQu9C4IHNvcnRfcmV2ZXJzZSDQstC60LvRjtGH0LXQvSwg0LzRiyDQtNC+0LvQttC90Ysg
0LTQtdC70LDRgtGMIHJldmVyc2U9RmFsc2UuCiAgICAgICAgICAgIHJldmVyc2VfZmlsZXMgPSBu
b3Qgc2VsZi5zb3J0X3JldmVyc2UgICMg0JjQvdCy0LXRgNGC0LjRgNGD0LXQvCDQu9C+0LPQuNC6
0YMg0LTQu9GPIHNpemUvdGltZQoKICAgICAgICBlbGlmIHNlbGYuc29ydF9tb2RlID09ICd0aW1l
JzoKICAgICAgICAgICAga2V5X2Z1bmMgPSBsYW1iZGEgeDogeC5nZXQoJ210aW1lJywgeC5nZXQo
J0xhc3RNb2RpZmllZCcsIGRhdGV0aW1lLm1pbikpIG9yIGRhdGV0aW1lLm1pbgogICAgICAgICAg
ICAjINCQ0L3QsNC70L7Qs9C40YfQvdC+IHNpemU6INC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOINC9
0L7QstGL0LUg0YHQstC10YDRhdGDIChkZXNjKSwgcmV2ZXJzZSAtPiDRgdGC0LDRgNGL0LUg0YHQ
stC10YDRhdGDIChhc2MpCiAgICAgICAgICAgIHJldmVyc2VfZmlsZXMgPSBub3Qgc2VsZi5zb3J0
X3JldmVyc2UKCiAgICAgICAgIyDQodC+0YDRgtC40YDRg9C10Lwg0L/QsNC/0LrQuCAo0LLRgdC1
0LPQtNCwINC/0L4g0LjQvNC10L3QuCkKICAgICAgICAjINCf0LDQv9C60Lgg0YLQvtC20LUg0LzQ
vtC20L3QviDRgNC10LLQtdGA0YHQuNGA0L7QstCw0YLRjCwg0LXRgdC70Lgg0L/QvtC70YzQt9C+
0LLQsNGC0LXQu9GMINCy0YvQsdGA0LDQuyBSZXZlcnNlCiAgICAgICAgZGlycy5zb3J0KGtleT1s
YW1iZGEgeDogeC5nZXQoJ25hbWUnLCAnJykubG93ZXIoKSwgcmV2ZXJzZT1zZWxmLnNvcnRfcmV2
ZXJzZSkKCiAgICAgICAgaWYga2V5X2Z1bmM6CiAgICAgICAgICAgIGZpbGVzLnNvcnQoa2V5PWtl
eV9mdW5jLCByZXZlcnNlPXJldmVyc2VfZmlsZXMpCgogICAgICAgICMg0JTQu9GPICdub25lJyDQ
stC+0LfQstGA0LDRidCw0LXQvCDQutCw0Log0LXRgdGC0YwKICAgICAgICBpZiBzZWxmLnNvcnRf
bW9kZSA9PSAnbm9uZSc6CiAgICAgICAgICAgIHJldHVybiBpdGVtcwoKICAgICAgICByZXR1cm4g
ZGlycyArIGZpbGVzCgogICAgZGVmIGlzX3Jvb3RfbWVudShzZWxmKToKICAgICAgICByZXR1cm4g
c2VsZi5tb2RlID09ICdyb290X21lbnUnCgogICAgZGVmIGlzX2VuZHBvaW50X2xpc3Qoc2VsZik6
CiAgICAgICAgcmV0dXJuIHNlbGYubW9kZSA9PSAnczMnIGFuZCBzZWxmLmN1cnJlbnRfZW5kcG9p
bnQgaXMgTm9uZQoKICAgIGRlZiBpc19idWNrZXRfbGlzdChzZWxmKToKICAgICAgICByZXR1cm4g
c2VsZi5tb2RlID09ICdzMycgYW5kIHNlbGYuY3VycmVudF9lbmRwb2ludCBpcyBub3QgTm9uZSBh
bmQgc2VsZi5jdXJyZW50X2J1Y2tldCBpcyBOb25lCgogICAgZGVmIGlzX2ZzX3Jvb3Qoc2VsZik6
CiAgICAgICAgcmV0dXJuIHNlbGYubW9kZSA9PSAnZnMnIGFuZCBzZWxmLmZzX2Jyb3dzZXIuY3Vy
cmVudF9wYXRoID09ICcvJwoKICAgIGRlZiBnZXRfY3VycmVudF9wYXRoKHNlbGYpOgogICAgICAg
ICIiItCf0L7Qu9GD0YfQuNGC0Ywg0YLQtdC60YPRidC40Lkg0L/Rg9GC0Ywg0LTQu9GPINC60L7Q
v9C40YDQvtCy0LDQvdC40Y8iIiIKICAgICAgICBpZiBzZWxmLm1vZGUgPT0gJ3MzJzoKICAgICAg
ICAgICAgaWYgc2VsZi5jdXJyZW50X2J1Y2tldDoKICAgICAgICAgICAgICAgIHJldHVybiBzZWxm
LmN1cnJlbnRfcHJlZml4IGlmIHNlbGYuY3VycmVudF9wcmVmaXggZWxzZSAnJwogICAgICAgICAg
ICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuICcnCiAgICAgICAgZWxpZiBzZWxmLm1vZGUg
PT0gJ2ZzJzoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgK
ICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gJycKCiAgICBkZWYgdXBkYXRlX2hlYWRl
cihzZWxmLCBpbmZvKToKICAgICAgICBpZiBpbmZvOgogICAgICAgICAgICBzZWxmLmxpbmVib3gu
c2V0X3RpdGxlKGYie3NlbGYudGl0bGV9IHtpbmZvfSIpCiAgICAgICAgZWxzZToKICAgICAgICAg
ICAgc2VsZi5saW5lYm94LnNldF90aXRsZShzZWxmLnRpdGxlKQoKICAgIGRlZiBzZXRfZm9jdXNf
b25faXRlbShzZWxmLCBpdGVtX25hbWUpOgogICAgICAgIGZvciBpZHgsIHdpZGdldCBpbiBlbnVt
ZXJhdGUoc2VsZi53YWxrZXIpOgogICAgICAgICAgICB3ID0gd2lkZ2V0Lm9yaWdpbmFsX3dpZGdl
dAogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHcsIFNlbGVjdGFibGVUZXh0KToKICAgICAgICAg
ICAgICAgIGRhdGEgPSB3LmRhdGEKICAgICAgICAgICAgICAgIGlmIGRhdGEuZ2V0KCduYW1lJykg
PT0gaXRlbV9uYW1lIG9yIGRhdGEuZ2V0KCdrZXknLCAnJykucnN0cmlwKCcvJykuc3BsaXQoJy8n
KVstMV0gPT0gaXRlbV9uYW1lOgogICAgICAgICAgICAgICAgICAgIHNlbGYubGlzdGJveC5zZXRf
Zm9jdXMoaWR4KQogICAgICAgICAgICAgICAgICAgIHJldHVybgoKICAgIGRlZiBfcmVmcmVzaF9y
b290X21lbnUoc2VsZik6CiAgICAgICAgc2VsZi51cGRhdGVfaGVhZGVyKCdbUm9vdCBNZW51XScp
CiAgICAgICAgc2VsZi5wYXRoX3RleHQuc2V0X3RleHQoJ1NlbGVjdCBzb3VyY2UgdHlwZTonKQoK
ICAgICAgICBsYWJlbCA9ICdbRlNdIExvY2FsIEZpbGUgU3lzdGVtJwogICAgICAgIGRhdGEgPSB7
J3R5cGUnOiAncm9vdF9mcycsICdjYW5fc2VsZWN0JzogRmFsc2V9CiAgICAgICAgdGV4dCA9IFNl
bGVjdGFibGVUZXh0KGYnICB7bGFiZWx9JywgZGF0YSwgc2VsZikKICAgICAgICBzZWxmLndhbGtl
ci5hcHBlbmQodXJ3aWQuQXR0ck1hcCh0ZXh0LCBOb25lLCBmb2N1c19tYXA9J3NlbGVjdGVkJykp
CgogICAgICAgIHNlbGYud2Fsa2VyLmFwcGVuZCh1cndpZC5EaXZpZGVyKCkpCgogICAgICAgIGVu
ZHBvaW50cyA9IHNlbGYuczNfY29uZmlnLmdldF9lbmRwb2ludHMoKQogICAgICAgIGZvciBlcCBp
biBlbmRwb2ludHM6CiAgICAgICAgICAgIGxhYmVsID0gZidbUzNdIHtlcFsibmFtZSJdOjM1fSB7
ZXBbInVybCJdfScKICAgICAgICAgICAgZGF0YSA9IHsndHlwZSc6ICdyb290X2VuZHBvaW50Jywg
J25hbWUnOiBlcFsnbmFtZSddLCAnY29uZmlnJzogZXAsICdjYW5fc2VsZWN0JzogRmFsc2V9CiAg
ICAgICAgICAgIHRleHQgPSBTZWxlY3RhYmxlVGV4dChmJyAge2xhYmVsfScsIGRhdGEsIHNlbGYp
CiAgICAgICAgICAgIHNlbGYud2Fsa2VyLmFwcGVuZCh1cndpZC5BdHRyTWFwKHRleHQsIE5vbmUs
IGZvY3VzX21hcD0nc2VsZWN0ZWQnKSkKCiAgICBkZWYgdmlld19zM19maWxlX3ZlcnNpb24oc2Vs
ZiwgZmlsZV9kYXRhLCB2ZXJzaW9uX2RhdGE9Tm9uZSwgY2xvc2VfY2FsbGJhY2s9Tm9uZSk6CiAg
ICAgICAgIiIi0J/RgNC+0YHQvNC+0YLRgCBTMyDRhNCw0LnQu9CwINGBINGD0LrQsNC30LDQvdC9
0L7QuSDQstC10YDRgdC40LXQuSIiIgogICAgICAgIHZlcnNpb25faWQgPSB2ZXJzaW9uX2RhdGEu
Z2V0KCdWZXJzaW9uSWQnKSBpZiB2ZXJzaW9uX2RhdGEgZWxzZSBOb25lCiAgICAgICAgZmlsZW5h
bWUgPSBmaWxlX2RhdGFbJ25hbWUnXQoKICAgICAgICBpZiB2ZXJzaW9uX2lkOgogICAgICAgICAg
ICBzZWxmLmFwcC5zaG93X3Jlc3VsdChmIkRvd25sb2FkaW5nIHtmaWxlbmFtZX0gKHZlcnNpb24g
e3ZlcnNpb25faWRbOjhdfSkuLi4iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuYXBw
LnNob3dfcmVzdWx0KGYiRG93bmxvYWRpbmcge2ZpbGVuYW1lfS4uLiIpCgogICAgICAgIHdpdGgg
dGVtcGZpbGUuTmFtZWRUZW1wb3JhcnlGaWxlKGRlbGV0ZT1GYWxzZSkgYXMgdG1wOgogICAgICAg
ICAgICB0bXBwYXRoID0gdG1wLm5hbWUKCiAgICAgICAgICAgIGlmIHNlbGYuczNfbWFuYWdlci5k
b3dubG9hZF9vYmplY3QoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50X2J1Y2tldCwK
ICAgICAgICAgICAgICAgICAgICBmaWxlX2RhdGFbJ2tleSddLAogICAgICAgICAgICAgICAgICAg
IHRtcHBhdGgsCiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbl9pZD12ZXJzaW9uX2lkKToKICAg
ICAgICAgICAgICAgIHNlbGYuX3ZpZXdfZmlsZSh0bXBwYXRoLCBmaWxlbmFtZSwgY2xvc2VfY2Fs
bGJhY2s9Y2xvc2VfY2FsbGJhY2spCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAg
ICAgICAgb3MudW5saW5rKHRtcHBhdGgpCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAg
ICAgICAgICAgICAgcGFzcwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5h
cHAuc2hvd19yZXN1bHQoZiJGYWlsZWQgdG8gZG93bmxvYWQge2ZpbGVuYW1lfSIpCgogICAgZGVm
IHNob3dfdmVyc2lvbl9zZWxlY3RfZGlhbG9nKHNlbGYsIGZpbGVfZGF0YSwgcmVmcmVzaF9vbl9l
eGl0PUZhbHNlKToKICAgICAgICAjINCf0L7Qu9GD0YfQsNC10Lwg0LDQutGC0YPQsNC70YzQvdGL
0LUg0LLQtdGA0YHQuNC4CiAgICAgICAgdmVyc2lvbnMgPSBzZWxmLnMzX21hbmFnZXIubGlzdF9v
YmplY3RfdmVyc2lvbnMoc2VsZi5jdXJyZW50X2J1Y2tldCwgZmlsZV9kYXRhWydrZXknXSkKCiAg
ICAgICAgIyDQldGB0LvQuCDQstC10YDRgdC40Lkg0L3QtdGCICjQvdCw0L/RgNC40LzQtdGALCDQ
v9C10YDQtdC80LXRgdGC0LjQu9C4INC/0L7RgdC70LXQtNC90Y7RjiksINC+0LHQvdC+0LLQu9GP
0LXQvCDQv9Cw0L3QtdC70Ywg0Lgg0LLRi9GF0L7QtNC40LwKICAgICAgICBpZiBub3QgdmVyc2lv
bnM6CiAgICAgICAgICAgICMg0JXRgdC70Lgg0YLRgNC10LHQvtCy0LDQu9C+0YHRjCDQvtCx0L3Q
vtCy0LvQtdC90LjQtSDQuNC70Lgg0LLQtdGA0YHQuNC5INGB0L7QstGB0LXQvCDQvdC10YIgLT4g
0L7QsdC90L7QstC70Y/QtdC8INC/0LDQvdC10LvRjAogICAgICAgICAgICB0cnk6CiAgICAgICAg
ICAgICAgICBzZWxmLnJlc3RvcmVfZm9jdXNfaW5kZXggPSBzZWxmLmxpc3Rib3guZm9jdXNfcG9z
aXRpb24KICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAg
ICBzZWxmLnJlZnJlc2goKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgZGVmIGNhbGxiYWNr
KGFjdGlvbiwgdmVyc2lvbl9kYXRhKToKICAgICAgICAgICAgaWYgYWN0aW9uID09ICdjYW5jZWwn
OgogICAgICAgICAgICAgICAgc2VsZi5hcHAuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgICAg
ICMg0JXRgdC70Lgg0LHRi9C70Lgg0L7Qv9C10YDQsNGG0LjQuCDQv9C10YDQtdC80LXRidC10L3Q
uNGPIChtb3ZlKSwg0L7QsdC90L7QstC70Y/QtdC8INC/0LDQvdC10LvRjCDQv9GA0Lgg0LLRi9GF
0L7QtNC1CiAgICAgICAgICAgICAgICBpZiByZWZyZXNoX29uX2V4aXQ6CiAgICAgICAgICAgICAg
ICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlc3RvcmVfZm9jdXNfaW5k
ZXggPSBzZWxmLmxpc3Rib3guZm9jdXNfcG9zaXRpb24KICAgICAgICAgICAgICAgICAgICBleGNl
cHQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgICAgICBzZWxm
LnJlZnJlc2goKQogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICBpZiBhY3Rpb24g
PT0gJ3ZpZXcnIGFuZCB2ZXJzaW9uX2RhdGE6CiAgICAgICAgICAgICAgICBzZWxmLmFwcC5jbG9z
ZV9kaWFsb2coKQogICAgICAgICAgICAgICAgc2VsZi52aWV3X3MzX2ZpbGVfdmVyc2lvbigKICAg
ICAgICAgICAgICAgICAgICBmaWxlX2RhdGEsCiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbl9k
YXRhLAogICAgICAgICAgICAgICAgICAgIGNsb3NlX2NhbGxiYWNrPWxhbWJkYTogc2VsZi5zaG93
X3ZlcnNpb25fc2VsZWN0X2RpYWxvZyhmaWxlX2RhdGEsIHJlZnJlc2hfb25fZXhpdCkKICAgICAg
ICAgICAgICAgICkKICAgICAgICAgICAgZWxpZiBhY3Rpb24gPT0gJ2RlbGV0ZScgYW5kIHZlcnNp
b25fZGF0YToKICAgICAgICAgICAgICAgIHNlbGYuYXBwLmNsb3NlX2RpYWxvZygpCiAgICAgICAg
ICAgICAgICAjINCf0LXRgNC10LTQsNC10Lwg0YTQu9Cw0LMsINGH0YLQviDQvtCx0L3QvtCy0LvQ
tdC90LjQtSDRg9C20LUg0L3Rg9C20L3QviAo0YLQsNC6INC60LDQuiDRg9C00LDQu9C10L3QuNC1
INC80LXQvdGP0LXRgiDQutC+0Lst0LLQvikKICAgICAgICAgICAgICAgIHNlbGYuY29uZmlybV9k
ZWxldGVfdmVyc2lvbihmaWxlX2RhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdmVyc2lvbl9kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHJlZnJlc2hfcGVuZGluZz1UcnVlKQoKICAgICAgICAgICAgZWxpZiBhY3Rp
b24gPT0gJ2NvcHknIGFuZCB2ZXJzaW9uX2RhdGE6CiAgICAgICAgICAgICAgICBzZWxmLmFwcC5j
bG9zZV9kaWFsb2coKQogICAgICAgICAgICAgICAgIyDQlNC70Y8gQ29weSDQvtCx0L3QvtCy0LvQ
tdC90LjQtSDQv9Cw0L3QtdC70Lgg0L3QtSDRgtGA0LXQsdGD0LXRgtGB0Y8sINC90L4g0LLQvtC3
0LLRgNCw0YnQsNC10Lwg0YTQu9Cw0LMg0LrQsNC6INCx0YvQuwogICAgICAgICAgICAgICAgc2Vs
Zi5jb3B5X3ZlcnNpb24oZmlsZV9kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdmVyc2lvbl9kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZT1G
YWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrPWxhbWJkYTog
c2VsZi5zaG93X3ZlcnNpb25fc2VsZWN0X2RpYWxvZyhmaWxlX2RhdGEsIHJlZnJlc2hfb25fZXhp
dCkpCgogICAgICAgICAgICBlbGlmIGFjdGlvbiA9PSAnbW92ZScgYW5kIHZlcnNpb25fZGF0YToK
ICAgICAgICAgICAgICAgIHNlbGYuYXBwLmNsb3NlX2RpYWxvZygpCiAgICAgICAgICAgICAgICAj
INCU0LvRjyBNb3ZlINC+0LHQvdC+0LLQu9C10L3QuNC1INC/0L7RgtGA0LXQsdGD0LXRgtGB0Y8g
KNGE0LvQsNCzIFRydWUpCiAgICAgICAgICAgICAgICBzZWxmLmNvcHlfdmVyc2lvbihmaWxlX2Rh
dGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uX2RhdGEsCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlPVRydWUsCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBjYWxsYmFjaz1sYW1iZGE6IHNlbGYuc2hvd192ZXJzaW9uX3NlbGVj
dF9kaWFsb2coZmlsZV9kYXRhLCByZWZyZXNoX29uX2V4aXQpKQoKICAgICAgICBkaWFsb2cgPSBW
ZXJzaW9uU2VsZWN0RGlhbG9nKGZpbGVfZGF0YSwgdmVyc2lvbnMsIGNhbGxiYWNrKQogICAgICAg
IHNlbGYuYXBwLnNob3dfZGlhbG9nKGRpYWxvZywgaGVpZ2h0PTUwKQoKICAgIGRlZiBjb25maXJt
X2RlbGV0ZV92ZXJzaW9uKHNlbGYsIGZpbGVfZGF0YSwgdmVyc2lvbl9kYXRhLCBjbG9zZV9jYWxs
YmFjaz1Ob25lLCByZWZyZXNoX3BlbmRpbmc9RmFsc2UpOgogICAgICAgICIiIgogICAgICAgINCf
0L7QutCw0LfRi9Cy0LDQtdGCINC00LjQsNC70L7QsyDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjR
jyDRg9C00LDQu9C10L3QuNGPINC60L7QvdC60YDQtdGC0L3QvtC5INCy0LXRgNGB0LjQuCDRhNCw
0LnQu9CwLgoKICAgICAgICDQkNGA0LPRg9C80LXQvdGC0Ys6CiAgICAgICAgICAgIGZpbGVfZGF0
YSAoZGljdCk6INCU0LDQvdC90YvQtSDQviDRhNCw0LnQu9C1ICjQuNC80Y8sINC60LvRjtGHINC4
INGCLtC0LikuCiAgICAgICAgICAgIHZlcnNpb25fZGF0YSAoZGljdCk6INCU0LDQvdC90YvQtSDR
g9C00LDQu9GP0LXQvNC+0Lkg0LLQtdGA0YHQuNC4IChJRCwg0YDQsNC30LzQtdGALCDQtNCw0YLQ
sCDQuNC30LzQtdC90LXQvdC40Y8pLgogICAgICAgICAgICBjbG9zZV9jYWxsYmFjayAoY2FsbGFi
bGUsIG9wdGlvbmFsKTog0KTRg9C90LrRhtC40Y8sINCy0YvQt9GL0LLQsNC10LzQsNGPINC/0YDQ
uCDQt9Cw0LrRgNGL0YLQuNC4INC00LjQsNC70L7Qs9CwICjQvdC10LfQsNCy0LjRgdC40LzQviDQ
vtGCINGA0LXQt9GD0LvRjNGC0LDRgtCwKS4KICAgICAgICAgICAgcmVmcmVzaF9wZW5kaW5nIChi
b29sKTog0KTQu9Cw0LMsINGD0LrQsNC30YvQstCw0Y7RidC40LksINC90YPQttC90L4g0LvQuCDQ
vtCx0L3QvtCy0LvRj9GC0Ywg0YHQv9C40YHQvtC6INCy0LXRgNGB0LjQuSDQv9GA0Lgg0LLQvtC3
0LLRgNCw0YLQtSDQsiDQv9GA0LXQtNGL0LTRg9GJ0LXQtSDQvNC10L3Rji4KICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAg0J/QtdGA0LXQtNCw0LXRgtGB0Y8gVHJ1ZSwg0LXRgdC7
0Lgg0LIg0YHQtdGB0YHQuNC4INC00LjQsNC70L7Qs9CwINGD0LbQtSDQsdGL0LvQuCDRg9C00LDQ
u9C10L3RiyDQtNGA0YPQs9C40LUg0LLQtdGA0YHQuNC4LgogICAgICAgICIiIgogICAgICAgIGRl
ZiBjb25maXJtX2NhbGxiYWNrKGNvbmZpcm1lZCk6CiAgICAgICAgICAgIHNlbGYuYXBwLmNsb3Nl
X2RpYWxvZygpCiAgICAgICAgICAgIGlmIGNvbmZpcm1lZDoKICAgICAgICAgICAgICAgIHZlcnNp
b25faWRfZnVsbCA9IHZlcnNpb25fZGF0YS5nZXQoJ1ZlcnNpb25JZCcpCiAgICAgICAgICAgICAg
ICBpZiBzZWxmLnMzX21hbmFnZXIuZGVsZXRlX29iamVjdCgKICAgICAgICAgICAgICAgICAgICAg
ICAgc2VsZi5jdXJyZW50X2J1Y2tldCwKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZV9kYXRh
WydrZXknXSwKICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbl9pZD12ZXJzaW9uX2lkX2Z1
bGwKICAgICAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5hcHAuc2hvd19y
ZXN1bHQoZiJWZXJzaW9uIHt2ZXJzaW9uX2RhdGEuZ2V0KCdWZXJzaW9uSWQnKVs6OF19IGRlbGV0
ZWQgc3VjY2Vzc2Z1bGx5IikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAg
ICAgc2VsZi5hcHAuc2hvd19yZXN1bHQoZiJGYWlsZWQgdG8gZGVsZXRlIHZlcnNpb24iKQogICAg
ICAgICAgICAgICAgIyDQktGB0LXQs9C00LAg0LLQvtC30LLRgNCw0YnQsNC10LzRgdGPINCyINC0
0LjQsNC70L7Qsywg0YHRgtCw0LLQuNC8IHJlZnJlc2hfb25fZXhpdD1UcnVlINGCLtC6LiDRg9C0
0LDQu9C40LvQuAogICAgICAgICAgICAgICAgc2VsZi5zaG93X3ZlcnNpb25fc2VsZWN0X2RpYWxv
ZyhmaWxlX2RhdGEsIHJlZnJlc2hfb25fZXhpdD1UcnVlKQogICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgIyDQktC+0LfQstGA0LDRidCw0LXQvNGB0Y8g0LIg0LTQuNCw0LvQvtCzLCDR
gdC+0YXRgNCw0L3Rj9GPINGB0YLQsNGC0YPRgSDQvdC10L7QsdGF0L7QtNC40LzQvtGB0YLQuCDQ
vtCx0L3QvtCy0LvQtdC90LjRjyAo0LXRgdC70Lgg0LHRi9C7INC00L4g0Y3RgtC+0LPQvikKICAg
ICAgICAgICAgICAgIHNlbGYuc2hvd192ZXJzaW9uX3NlbGVjdF9kaWFsb2coZmlsZV9kYXRhLCBy
ZWZyZXNoX29uX2V4aXQ9cmVmcmVzaF9wZW5kaW5nKQoKICAgICAgICB2ZXJzaW9uX2lkID0gdmVy
c2lvbl9kYXRhLmdldCgnVmVyc2lvbklkJywgJycpWzoxMl0KICAgICAgICBpc19sYXRlc3QgPSB2
ZXJzaW9uX2RhdGEuZ2V0KCdJc0xhdGVzdCcsIEZhbHNlKQogICAgICAgIGxhdGVzdF93YXJuID0g
IiBbVEhJUyBJUyBUSEUgTEFURVNUIFZFUlNJT04hXSIgaWYgaXNfbGF0ZXN0IGVsc2UgIiIKICAg
ICAgICBzaXplID0gc2VsZi5mb3JtYXRfc2l6ZSh2ZXJzaW9uX2RhdGEuZ2V0KCdTaXplJywgMCkp
ICAjIHNlbGYuZm9ybWF0X3NpemUg0LjRgdC/0YDQsNCy0LjQuwogICAgICAgIG10aW1lID0gdmVy
c2lvbl9kYXRhLmdldCgnTGFzdE1vZGlmaWVkJywgJycpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDol
TTolUycpIGlmIHZlcnNpb25fZGF0YS5nZXQoCiAgICAgICAgICAgICdMYXN0TW9kaWZpZWQnKSBl
bHNlICdOL0EnCgogICAgICAgIG1lc3NhZ2UgPSBmIkRlbGV0ZSB2ZXJzaW9uIG9mICd7ZmlsZV9k
YXRhWyduYW1lJ119Jz97bGF0ZXN0X3dhcm59IgogICAgICAgIGl0ZW1zX2luZm8gPSBbCiAgICAg
ICAgICAgIGYiVmVyc2lvbiBJRDoge3ZlcnNpb25faWR9IiwKICAgICAgICAgICAgZiJTaXplOiB7
c2l6ZX0iLAogICAgICAgICAgICBmIk1vZGlmaWVkOiB7bXRpbWV9IgogICAgICAgIF0KICAgICAg
ICBkaWFsb2cgPSBDb25maXJtRGlhbG9nKCJDb25maXJtIERlbGV0ZSBWZXJzaW9uIiwgbWVzc2Fn
ZSwgaXRlbXNfaW5mbywgY29uZmlybV9jYWxsYmFjaykKICAgICAgICBzZWxmLmFwcC5zaG93X2Rp
YWxvZyhkaWFsb2cpCgogICAgZGVmIF9yZWZyZXNoX2VuZHBvaW50cyhzZWxmKToKICAgICAgICBz
ZWxmLnVwZGF0ZV9oZWFkZXIoJ1tTMyBNb2RlIC0gRW5kcG9pbnRzXScpCiAgICAgICAgc2VsZi5w
YXRoX3RleHQuc2V0X3RleHQoJ1MzOiAvJykKCiAgICAgICAgZGF0YSA9IHsndHlwZSc6ICd0b19y
b290X21lbnUnLCAnY2FuX3NlbGVjdCc6IEZhbHNlfQogICAgICAgIHRleHQgPSBTZWxlY3RhYmxl
VGV4dCgnICBbLi5dIEJhY2sgdG8gcm9vdCBtZW51JywgZGF0YSwgc2VsZikKICAgICAgICBzZWxm
LndhbGtlci5hcHBlbmQodXJ3aWQuQXR0ck1hcCh0ZXh0LCBOb25lLCBmb2N1c19tYXA9J3NlbGVj
dGVkJykpCgogICAgICAgIGVuZHBvaW50cyA9IHNlbGYuczNfY29uZmlnLmdldF9lbmRwb2ludHMo
KQoKICAgICAgICBmb3IgZXAgaW4gZW5kcG9pbnRzOgogICAgICAgICAgICBsYWJlbCA9IGYnW0VO
RFBPSU5UXSB7ZXBbIm5hbWUiXTozNX0ge2VwWyJ1cmwiXX0nCiAgICAgICAgICAgIGRhdGEgPSB7
J3R5cGUnOiAnZW5kcG9pbnQnLCAnbmFtZSc6IGVwWyduYW1lJ10sICdjb25maWcnOiBlcCwgJ2Nh
bl9zZWxlY3QnOiBGYWxzZX0KICAgICAgICAgICAgdGV4dCA9IFNlbGVjdGFibGVUZXh0KGYnICB7
bGFiZWx9JywgZGF0YSwgc2VsZikKICAgICAgICAgICAgc2VsZi53YWxrZXIuYXBwZW5kKHVyd2lk
LkF0dHJNYXAodGV4dCwgTm9uZSwgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKQoKICAgIGRlZiBfcmVm
cmVzaF9zM19vYmplY3RzX2xhenkoc2VsZik6CiAgICAgICAgIiIi0JvQtdC90LjQstCw0Y8g0LfQ
sNCz0YDRg9C30LrQsCDQvtCx0YrQtdC60YLQvtCyIFMzINGBINC/0L7RgdGC0LXQv9C10L3QvdGL
0Lwg0L7RgtC+0LHRgNCw0LbQtdC90LjQtdC8IiIiCiAgICAgICAgcHJlZml4ID0gc2VsZi5jdXJy
ZW50X3ByZWZpeAoKICAgICAgICAjINCS0JDQltCd0J46INCf0YDQuNC90YPQtNC40YLQtdC70YzQ
vdCw0Y8g0L/QtdGA0LXRgNC40YHQvtCy0LrQsAogICAgICAgIGlmIGhhc2F0dHIoc2VsZi5hcHAs
ICdsb29wJykgYW5kIHNlbGYuYXBwLmxvb3A6CiAgICAgICAgICAgIHNlbGYuYXBwLmxvb3AuZHJh
d19zY3JlZW4oKQoKICAgICAgICAjINCX0LDQv9GD0YHQutCw0LXQvCDRhNC+0L3QvtCy0YPRjiDQ
t9Cw0LPRgNGD0LfQutGDCiAgICAgICAgaWYgc2VsZi5sb2FkaW5nX3RocmVhZCBhbmQgc2VsZi5s
b2FkaW5nX3RocmVhZC5pc19hbGl2ZSgpOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc2Vs
Zi5sb2FkaW5nX2luX3Byb2dyZXNzID0gVHJ1ZQogICAgICAgIHNlbGYubG9hZGluZ190aHJlYWQg
PSB0aHJlYWRpbmcuVGhyZWFkKAogICAgICAgICAgICB0YXJnZXQ9c2VsZi5sb2FkX3MzX29iamVj
dHNfYmFja2dyb3VuZCwKICAgICAgICAgICAgYXJncz0oc2VsZi5jdXJyZW50X2J1Y2tldCwgcHJl
Zml4KSwKICAgICAgICAgICAgZGFlbW9uPVRydWUKICAgICAgICApCiAgICAgICAgc2VsZi5sb2Fk
aW5nX3RocmVhZC5zdGFydCgpCgogICAgZGVmIGxvYWRfczNfb2JqZWN0c19iYWNrZ3JvdW5kKHNl
bGYsIGJ1Y2tldF9uYW1lLCBwcmVmaXgpOgogICAgICAgICIiItCk0L7QvdC+0LLQsNGPINC30LDQ
s9GA0YPQt9C60LAg0L7QsdGK0LXQutGC0L7QsiDRgSDQvtCx0L3QvtCy0LvQtdC90LjQtdC8INGB
0YLQsNGC0YPRgdC90L7QuSDRgdGC0YDQvtC60LgiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAg
ICMg0KHRgNCw0LfRgyDQv9C+0LrQsNC30YvQstCw0LXQvCDRgdGC0LDRgtGD0YEKICAgICAgICAg
ICAgc2VsZi5hcHAubG9vcC5zZXRfYWxhcm1faW4oMCwgbGFtYmRhIG0sIHU6IHNlbGYuYXBwLnNo
b3dfcmVzdWx0KCJMb2FkaW5nLi4uIikpCiAgICAgICAgICAgIHNlbGYuYXBwLndha2V1cCgpCgog
ICAgICAgICAgICB1c2VfdmVyc2lvbmluZyA9IEZhbHNlCiAgICAgICAgICAgIGlmIHNlbGYuczNf
bWFuYWdlcjoKICAgICAgICAgICAgICAgIHN0YXR1cyA9IHNlbGYuczNfbWFuYWdlci5nZXRfdmVy
c2lvbmluZ19zdGF0dXNfY2FjaGVkKGJ1Y2tldF9uYW1lKQogICAgICAgICAgICAgICAgdXNlX3Zl
cnNpb25pbmcgPSBzdGF0dXMgaW4gWydFbmFibGVkJywgJ1N1c3BlbmRlZCddCgogICAgICAgICAg
ICBhbGxfZm9sZGVycyA9IFtdCiAgICAgICAgICAgIGFsbF9maWxlcyA9IFtdCgogICAgICAgICAg
ICBmb3IgZm9sZGVycywgZmlsZXMgaW4gc2VsZi5zM19tYW5hZ2VyLmxpc3Rfb2JqZWN0c19sYXp5
KGJ1Y2tldF9uYW1lLCBwcmVmaXgsIHBhZ2Vfc2l6ZT0xMDAwLAogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZV92ZXJz
aW9uaW5nPXVzZV92ZXJzaW9uaW5nKToKICAgICAgICAgICAgICAgIGFsbF9mb2xkZXJzLmV4dGVu
ZChmb2xkZXJzKQogICAgICAgICAgICAgICAgYWxsX2ZpbGVzLmV4dGVuZChmaWxlcykKCiAgICAg
ICAgICAgICAgICBjdXJyZW50X2ZvbGRlcnMgPSBsaXN0KGFsbF9mb2xkZXJzKQogICAgICAgICAg
ICAgICAgY3VycmVudF9maWxlcyA9IGxpc3QoYWxsX2ZpbGVzKQoKICAgICAgICAgICAgICAgICMg
0J7QsdC90L7QstC70Y/QtdC8INGB0L/QuNGB0L7QuiDRhNCw0LnQu9C+0LIKICAgICAgICAgICAg
ICAgIHNlbGYuYXBwLmxvb3Auc2V0X2FsYXJtX2luKDAsIGxhbWJkYSBtLCB1OiBzZWxmLl91cGRh
dGVfZGlzcGxheV9pbmNyZW1lbnRhbChjdXJyZW50X2ZvbGRlcnMsCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY3VycmVudF9maWxlcykpCgogICAgICAgICAgICAgICAgIyDQntCx
0L3QvtCy0LvRj9C10Lwg0YHRgtCw0YLRg9GB0L3Rg9GOINGB0YLRgNC+0LrRgzog0JbQtdC70YLR
i9C5INC90LAg0YHQuNC90LXQvCAo0YHRgtC40LvRjCAncmVzdWx0JyDQsiBEdWFsUGFuZUFwcCkK
ICAgICAgICAgICAgICAgIGNvdW50X21zZyA9IGYiTG9hZGluZy4uLiB7bGVuKGFsbF9mb2xkZXJz
KSArIGxlbihhbGxfZmlsZXMpfSBpdGVtcyIKICAgICAgICAgICAgICAgIHNlbGYuYXBwLmxvb3Au
c2V0X2FsYXJtX2luKDAsIGxhbWJkYSBtLCB1LCBtc2c9Y291bnRfbXNnOiBzZWxmLmFwcC5zaG93
X3Jlc3VsdChtc2cpKQoKICAgICAgICAgICAgICAgIHNlbGYuYXBwLndha2V1cCgpCgogICAgICAg
ICAgICAjINCk0LjQvdCw0LvRjNC90L7QtSDQvtCx0L3QvtCy0LvQtdC90LjQtQogICAgICAgICAg
ICBzZWxmLmFwcC5sb29wLnNldF9hbGFybV9pbigwLCBsYW1iZGEgbSwgdTogc2VsZi5fZmluYWxp
emVfbG9hZGluZyhhbGxfZm9sZGVycywgYWxsX2ZpbGVzKSkKICAgICAgICAgICAgc2VsZi5hcHAu
d2FrZXVwKCkKCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBlcnJv
cl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgc2VsZi5hcHAubG9vcC5zZXRfYWxhcm1faW4oMCwg
bGFtYmRhIG0sIHUsIGVycj1lcnJvcl9tc2c6CiAgICAgICAgICAgIHNlbGYuYXBwLnNob3dfcmVz
dWx0KGYiRXJyb3IgbG9hZGluZyBvYmplY3RzOiB7ZXJyfSIsIGlzX2Vycm9yPVRydWUpKQogICAg
ICAgICAgICBzZWxmLmFwcC53YWtldXAoKQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIHNl
bGYubG9hZGluZ19pbl9wcm9ncmVzcyA9IEZhbHNlCgogICAgZGVmIF91cGRhdGVfZGlzcGxheV9p
bmNyZW1lbnRhbChzZWxmLCBmb2xkZXJzLCBmaWxlcyk6CiAgICAgICAgIiIi0JjQvdC60YDQtdC8
0LXQvdGC0LDQu9GM0L3QvtC1INC+0LHQvdC+0LLQu9C10L3QuNC1ICjQsdC10Lcg0LLQuNC00LbQ
tdGC0LAgbG9hZGluZyDQsiDRgdC/0LjRgdC60LUpIiIiCiAgICAgICAgIyDQodC+0LfQtNCw0LXQ
vCDRjdC70LXQvNC10L3RgtGLICjQsdC10Lcg0YHQvtGA0YLQuNGA0L7QstC60Lgg0LTQu9GPINGB
0LrQvtGA0L7RgdGC0Lgg0LLQviDQstGA0LXQvNGPINC30LDQs9GA0YPQt9C60LgpCiAgICAgICAg
IyDQodC+0YDRgtC40YDQvtCy0LrQsCDQsdGD0LTQtdGCINC/0YDQuNC80LXQvdC10L3QsCDRgtC+
0LvRjNC60L4g0LIg0LrQvtC90YbQtSwg0LIgZmluYWxpemUKICAgICAgICBpdGVtcyA9IHNlbGYu
X2NyZWF0ZV9kaXNwbGF5X2l0ZW1zKGZvbGRlcnMsIGZpbGVzLCBkb19zb3J0PUZhbHNlKQoKICAg
ICAgICAjINCh0L7RhdGA0LDQvdGP0LXQvCDQvdCw0LLQuNCz0LDRhtC40Y4gKFsuLl0pCiAgICAg
ICAga2VlcF9jb3VudCA9IDAKICAgICAgICBrZWVwX3R5cGVzID0gWyd0b19yb290X21lbnUnLCAn
cGFyZW50JywgJ3MzX3BhcmVudCcsICdzM19iYWNrJ10KCiAgICAgICAgZm9yIHdpZGdldCBpbiBz
ZWxmLndhbGtlcjoKICAgICAgICAgICAgdyA9IHdpZGdldC5vcmlnaW5hbF93aWRnZXQgaWYgaXNp
bnN0YW5jZSh3aWRnZXQsIHVyd2lkLkF0dHJNYXApIGVsc2Ugd2lkZ2V0CiAgICAgICAgICAgIGlm
IGlzaW5zdGFuY2UodywgU2VsZWN0YWJsZVRleHQpOgogICAgICAgICAgICAgICAgaWYgdy5kYXRh
LmdldCgndHlwZScpIGluIGtlZXBfdHlwZXM6CiAgICAgICAgICAgICAgICAgICAga2VlcF9jb3Vu
dCArPSAxCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCgog
ICAgICAgICMg0JfQsNC80LXQvdGP0LXQvCDRgdGC0LDRgNGL0LUg0YTQsNC50LvRiyDQvdC+0LLR
i9C80LgKICAgICAgICBkZWwgc2VsZi53YWxrZXJba2VlcF9jb3VudDpdCiAgICAgICAgZm9yIGl0
ZW1fd2lkZ2V0IGluIGl0ZW1zOgogICAgICAgICAgICBzZWxmLndhbGtlci5hcHBlbmQoaXRlbV93
aWRnZXQpCgogICAgICAgICMg0JLQvtGB0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INGE0L7QutGD
0YEKICAgICAgICBpZiBsZW4oc2VsZi53YWxrZXIpID4gMDoKICAgICAgICAgICAgdHJ5OgogICAg
ICAgICAgICAgICAgIyDQpNC+0LrRg9GBINC90LAg0L/QtdGA0LLRi9C5INGN0LvQtdC80LXQvdGC
INC/0L7RgdC70LUgWy4uXQogICAgICAgICAgICAgICAgZm9jdXNfcG9zID0gbWluKGtlZXBfY291
bnQsIGxlbihzZWxmLndhbGtlcikgLSAxKQogICAgICAgICAgICAgICAgIyDQldGB0LvQuCDQutGD
0YDRgdC+0YAg0YPQttC1INCx0YvQuyDQvdC40LbQtSwg0L/Ri9GC0LDQtdC80YHRjyDRgdC+0YXR
gNCw0L3QuNGC0Ywg0L/QvtC30LjRhtC40Y4gKNC+0L/RhtC40L7QvdCw0LvRjNC90L4sINC90L4g
0YHQu9C+0LbQvdC+INC/0YDQuCDQuNC90LrRgNC10LzQtdC90YLQtSkKICAgICAgICAgICAgICAg
IHNlbGYubGlzdGJveC5zZXRfZm9jdXMoZm9jdXNfcG9zKQogICAgICAgICAgICBleGNlcHQ6CiAg
ICAgICAgICAgICAgICBwYXNzCgogICAgICAgIGlmIHNlbGYuYXBwIGFuZCBoYXNhdHRyKHNlbGYu
YXBwLCAnbG9vcCcpIGFuZCBzZWxmLmFwcC5sb29wOgogICAgICAgICAgICBzZWxmLmFwcC5sb29w
LmRyYXdfc2NyZWVuKCkKCiAgICBkZWYgX2ZpbmFsaXplX2xvYWRpbmcoc2VsZiwgZm9sZGVycywg
ZmlsZXMpOgogICAgICAgICIiItCX0LDQstC10YDRiNC10L3QuNC1INC30LDQs9GA0YPQt9C60Lgi
IiIKICAgICAgICBzZWxmLmxvYWRpbmdfaW5fcHJvZ3Jlc3MgPSBGYWxzZQoKICAgICAgICAjINCk
0LjQvdCw0LvRjNC90LDRjyDQv9C10YDQtdGB0YLRgNC+0LnQutCwINGB0L/QuNGB0LrQsC4gCiAg
ICAgICAgIyDQldGB0LvQuCBzb3J0X21vZGUg0LfQsNC00LDQvSAo0L3QsNC/0YDQuNC80LXRgCAn
c2l6ZScpLCDQt9C00LXRgdGMINC/0YDQvtC40LfQvtC50LTQtdGCINGB0L7RgNGC0LjRgNC+0LLQ
utCwLgogICAgICAgIGlmIHNlbGYuc29ydF9tb2RlICE9ICdub25lJzoKICAgICAgICAgICAgaXRl
bXMgPSBzZWxmLl9jcmVhdGVfZGlzcGxheV9pdGVtcyhmb2xkZXJzLCBmaWxlcywgZG9fc29ydD1U
cnVlKQoKICAgICAgICAgICAga2VlcF9jb3VudCA9IDAKICAgICAgICAgICAga2VlcF90eXBlcyA9
IFsndG9fcm9vdF9tZW51JywgJ3BhcmVudCcsICdzM19wYXJlbnQnLCAnczNfYmFjayddCiAgICAg
ICAgICAgIGZvciB3aWRnZXQgaW4gc2VsZi53YWxrZXI6CiAgICAgICAgICAgICAgICB3ID0gd2lk
Z2V0Lm9yaWdpbmFsX3dpZGdldCBpZiBpc2luc3RhbmNlKHdpZGdldCwgdXJ3aWQuQXR0ck1hcCkg
ZWxzZSB3aWRnZXQKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UodywgU2VsZWN0YWJsZVRl
eHQpOgogICAgICAgICAgICAgICAgICAgIGlmIHcuZGF0YS5nZXQoJ3R5cGUnKSBpbiBrZWVwX3R5
cGVzOgogICAgICAgICAgICAgICAgICAgICAgICBrZWVwX2NvdW50ICs9IDEKICAgICAgICAgICAg
ICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAg
ZGVsIHNlbGYud2Fsa2VyW2tlZXBfY291bnQ6XQogICAgICAgICAgICBmb3IgaXRlbV93aWRnZXQg
aW4gaXRlbXM6CiAgICAgICAgICAgICAgICBzZWxmLndhbGtlci5hcHBlbmQoaXRlbV93aWRnZXQp
CgogICAgICAgICMg0J7QsdC90L7QstC70Y/QtdC8INGB0YLQsNGC0YPRgdC90YPRjiDRgdGC0YDQ
vtC60YMg0YTQuNC90LDQu9GM0L3Ri9C8INGB0L7QvtCx0YnQtdC90LjQtdC8CiAgICAgICAgc29y
dF9pbmZvID0gZiIoc29ydGVkIGJ5IHtzZWxmLnNvcnRfbW9kZX0pIiBpZiBzZWxmLnNvcnRfbW9k
ZSAhPSAnbm9uZScgZWxzZSAiKHVuc29ydGVkKSIKICAgICAgICBtc2cgPSBmIkxvYWRlZDoge2xl
bihmb2xkZXJzKX0gZm9sZGVycywge2xlbihmaWxlcyl9IGZpbGVzIHtzb3J0X2luZm99IgogICAg
ICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KG1zZykKCiAgICAgICAgaWYgbGVuKHNlbGYud2Fsa2Vy
KSA+IDA6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICMgLS0tINCd0J7QktCQ0K8g
0JvQntCT0JjQmtCQINCk0J7QmtCj0KHQmNCg0J7QktCa0JggLS0tCiAgICAgICAgICAgICAgICAj
IDEuINCh0L3QsNGH0LDQu9CwINC/0YDQvtCy0LXRgNGP0LXQvCwg0LXRgdGC0Ywg0LvQuCDQt9Cw
0L/RgNC+0YEg0L3QsCDRhNC+0LrRg9GBINC/0L4g0LjQvNC10L3QuCAo0LTQu9GPINC90LDQstC4
0LPQsNGG0LjQuCAiLi4iKQogICAgICAgICAgICAgICAgZm9jdXNfc2V0ID0gRmFsc2UKICAgICAg
ICAgICAgICAgIHRhcmdldF9uYW1lID0gZ2V0YXR0cihzZWxmLCAnX3BlbmRpbmdfZm9jdXNfbmFt
ZScsIE5vbmUpCgogICAgICAgICAgICAgICAgaWYgdGFyZ2V0X25hbWU6CiAgICAgICAgICAgICAg
ICAgICAgZm9yIGksIHdpZGdldCBpbiBlbnVtZXJhdGUoc2VsZi53YWxrZXIpOgogICAgICAgICAg
ICAgICAgICAgICAgICB3ID0gd2lkZ2V0Lm9yaWdpbmFsX3dpZGdldCBpZiBpc2luc3RhbmNlKHdp
ZGdldCwgdXJ3aWQuQXR0ck1hcCkgZWxzZSB3aWRnZXQKICAgICAgICAgICAgICAgICAgICAgICAg
aWYgaXNpbnN0YW5jZSh3LCBTZWxlY3RhYmxlVGV4dCk6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAjINCf0YDQvtCy0LXRgNGP0LXQvCDRgdC+0LLQv9Cw0LTQtdC90LjQtSDQuNC80LXQvdC4
LgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIyDQoyDQv9Cw0L/QvtC6IFMzINC40LzRjyDQ
vNC+0LbQtdGCINCx0YvRgtGMINCx0LXQtyDRgdC70Y3RiNCwINCyINC00LDQvdC90YvRhSwg0L3Q
viDRgSDQvdC40Lwg0LIgS2V5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB3LmRhdGEu
Z2V0KCduYW1lJykgPT0gdGFyZ2V0X25hbWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2VsZi5saXN0Ym94LnNldF9mb2N1cyhpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGZvY3VzX3NldCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVh
awogICAgICAgICAgICAgICAgICAgICMg0KHQsdGA0LDRgdGL0LLQsNC10LwgcGVuZGluZyBuYW1l
CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGVuZGluZ19mb2N1c19uYW1lID0gTm9uZQoKICAg
ICAgICAgICAgICAgICMgMi4g0JXRgdC70Lgg0YTQvtC60YPRgSDQv9C+INC40LzQtdC90Lgg0L3Q
tSDRg9GB0YLQsNC90L7QstC70LXQvSwg0L/RgNC+0LHRg9C10Lwg0L/QviDQuNC90LTQtdC60YHR
gwogICAgICAgICAgICAgICAgaWYgbm90IGZvY3VzX3NldCBhbmQgc2VsZi5yZXN0b3JlX2ZvY3Vz
X2luZGV4IGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIG5ld19pZHggPSBtaW4oc2Vs
Zi5yZXN0b3JlX2ZvY3VzX2luZGV4LCBsZW4oc2VsZi53YWxrZXIpIC0gMSkKICAgICAgICAgICAg
ICAgICAgICBzZWxmLmxpc3Rib3guc2V0X2ZvY3VzKG5ld19pZHgpCiAgICAgICAgICAgICAgICAg
ICAgc2VsZi5yZXN0b3JlX2ZvY3VzX2luZGV4ID0gTm9uZQogICAgICAgICAgICAgICAgICAgIGZv
Y3VzX3NldCA9IFRydWUKCiAgICAgICAgICAgICAgICAjIDMuINCV0YHQu9C4INC90LjRh9C10LPQ
viDQvdC1INC30LDQtNCw0L3Qviwg0YHRgtCw0LLQuNC8INC90LAgMCAo0L3QviDQsNC60LrRg9GA
0LDRgtC90L4sINGH0YLQvtCx0Ysg0L3QtSDRgdCx0LjRgtGMLCDQtdGB0LvQuCDRg9C20LUg0YHR
gtC+0LjRgikKICAgICAgICAgICAgICAgIGlmIG5vdCBmb2N1c19zZXQ6CiAgICAgICAgICAgICAg
ICAgICAgIyDQldGB0LvQuCDQuNC90LTQtdC60YEg0L3QtSDQsdGL0Lsg0YPRgdGC0LDQvdC+0LLQ
u9C10L0g0Y/QstC90L4sIExpc3RCb3gg0LzQvtC20LXRgiDRgdCw0Lwg0LTQtdGA0LbQsNGC0Ywg
0YHRgtCw0YDRi9C5INGE0L7QutGD0YEgKNC10YHQu9C4INGB0L/QuNGB0L7QuiDQvdC1INC/0LXR
gNC10YHQvtC30LTQsNC9INC/0L7Qu9C90L7RgdGC0YzRjikKICAgICAgICAgICAgICAgICAgICAj
INCd0L4g0LXRgdC70Lgg0LzRiyDQtNC10LvQsNC70LggZGVsL2FwcGVuZCwg0YTQvtC60YPRgSDQ
vNC+0LMg0YHRitC10YXQsNGC0YwuCiAgICAgICAgICAgICAgICAgICAgIyDQntCx0YvRh9C90L4g
0L/RgNC4INCy0YXQvtC00LUg0LIg0L3QvtCy0YPRjiDQv9Cw0L/QutGDINC80Ysg0YXQvtGC0LjQ
vCAwICjQtdGB0LvQuCDRjdGC0L4g0L3QtSByZXN0b3JlKQogICAgICAgICAgICAgICAgICAgICMg
0JXRgdC70LggcmVzdG9yZV9mb2N1c19pbmRleCDQsdGL0LsgTm9uZSwg0LfQvdCw0YfQuNGCINGN
0YLQviDQstGF0L7QtCDQstCz0LvRg9Cx0YwgLT4gMAogICAgICAgICAgICAgICAgICAgIHNlbGYu
bGlzdGJveC5zZXRfZm9jdXMoMCkKCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToK
ICAgICAgICAgICAgICAgICMgc2VsZi5hcHAuc2hvd19yZXN1bHQoZiJGb2N1cyBlcnJvcjoge2V9
IiwgImVycm9yIikgIyDQtNC70Y8g0L7RgtC70LDQtNC60LgKICAgICAgICAgICAgICAgIHBhc3MK
CiAgICAgICAgaWYgc2VsZi5hcHAgYW5kIGhhc2F0dHIoc2VsZi5hcHAsICdsb29wJykgYW5kIHNl
bGYuYXBwLmxvb3A6CiAgICAgICAgICAgIHNlbGYuYXBwLmxvb3AuZHJhd19zY3JlZW4oKQoKICAg
IGRlZiBfY3JlYXRlX2Rpc3BsYXlfaXRlbXMoc2VsZiwgZm9sZGVycywgZmlsZXMsIGRvX3NvcnQ9
VHJ1ZSk6CiAgICAgICAgIiIi0KHQvtC30LTQsNGC0Ywg0LLQuNC00LbQtdGC0Ysg0LTQu9GPINC+
0YLQvtCx0YDQsNC20LXQvdC40Y8g0L/QsNC/0L7QuiDQuCDRhNCw0LnQu9C+0LIgUzMiIiIKICAg
ICAgICBpdGVtcyA9IFtdCiAgICAgICAgY29tYmluZWQgPSBbXQoKICAgICAgICAjINCf0YDQvtCy
0LXRgNGP0LXQvCDRgdGC0LDRgtGD0YEg0LLQtdGA0YHQuNC+0L3QuNGA0L7QstCw0L3QuNGPINCe
0JTQmNCdINCg0JDQlyDQtNC70Y8g0LHQsNC60LXRgtCwCiAgICAgICAgIyAo0J7RgdGC0LDQstC7
0Y/QtdC8INC00LvRjyDQv9C10YDQtdC00LDRh9C4INCyINGB0LLQvtC50YHRgtCy0LAg0YTQsNC5
0LvQsCwg0LXRgdC70Lgg0L/QvtC90LDQtNC+0LHQuNGC0YHRjyDQu9C+0LPQuNC60LUsINC90L4g
0L3QtSDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjykKICAgICAgICB2ZXJzaW9uaW5nX2Vu
YWJsZWRfYnVja2V0ID0gRmFsc2UKICAgICAgICBpZiBzZWxmLmN1cnJlbnRfYnVja2V0IGFuZCBz
ZWxmLnMzX21hbmFnZXI6CiAgICAgICAgICAgIHZzID0gc2VsZi5zM19tYW5hZ2VyLmdldF92ZXJz
aW9uaW5nX3N0YXR1c19jYWNoZWQoc2VsZi5jdXJyZW50X2J1Y2tldCkKICAgICAgICAgICAgdmVy
c2lvbmluZ19lbmFibGVkX2J1Y2tldCA9IHZzIGluIFsnRW5hYmxlZCcsICdTdXNwZW5kZWQnXQoK
ICAgICAgICAjINCf0L7QtNCz0L7RgtC+0LLQutCwINGB0L/QuNGB0LrQsCDQv9Cw0L/QvtC6CiAg
ICAgICAgZm9yIGZvbGRlciBpbiBmb2xkZXJzOgogICAgICAgICAgICBrZXkgPSBmb2xkZXJbJ0tl
eSddCiAgICAgICAgICAgIGZvbGRlcl9uYW1lID0ga2V5LnJzdHJpcCgnLycpLnNwbGl0KCcvJylb
LTFdCiAgICAgICAgICAgIGNvbWJpbmVkLmFwcGVuZCh7CiAgICAgICAgICAgICAgICAndHlwZSc6
ICdzM19kaXInLAogICAgICAgICAgICAgICAgJ25hbWUnOiBmb2xkZXJfbmFtZSwKICAgICAgICAg
ICAgICAgICdrZXknOiBrZXksCiAgICAgICAgICAgICAgICAnc2l6ZSc6IDAsCiAgICAgICAgICAg
ICAgICAnbXRpbWUnOiBOb25lCiAgICAgICAgICAgIH0pCgogICAgICAgICMg0J/QvtC00LPQvtGC
0L7QstC60LAg0YHQv9C40YHQutCwINGE0LDQudC70L7QsgogICAgICAgIGZvciBmaWxlIGluIGZp
bGVzOgogICAgICAgICAgICBrZXkgPSBmaWxlWydLZXknXQogICAgICAgICAgICBmaWxlX25hbWUg
PSBrZXkuc3BsaXQoJy8nKVstMV0KCiAgICAgICAgICAgICMg0J/QvtC70YPRh9Cw0LXQvCDQutC+
0LvQuNGH0LXRgdGC0LLQviDQstC10YDRgdC40LkgKNC10YHQu9C4INC+0L3QviDQsdGL0LvQviDQ
v9C+0LTRgdGH0LjRgtCw0L3QviDQsiBsaXN0X29iamVjdHNfbGF6eSkKICAgICAgICAgICAgdl9j
b3VudCA9IGZpbGUuZ2V0KCd2ZXJzaW9uX2NvdW50JywgMSkKCiAgICAgICAgICAgIGNvbWJpbmVk
LmFwcGVuZCh7CiAgICAgICAgICAgICAgICAndHlwZSc6ICdzM19maWxlJywKICAgICAgICAgICAg
ICAgICduYW1lJzogZmlsZV9uYW1lLAogICAgICAgICAgICAgICAgJ2tleSc6IGtleSwKICAgICAg
ICAgICAgICAgICdzaXplJzogZmlsZS5nZXQoJ1NpemUnLCAwKSwKICAgICAgICAgICAgICAgICdt
dGltZSc6IGZpbGUuZ2V0KCdMYXN0TW9kaWZpZWQnKSwKICAgICAgICAgICAgICAgICd2ZXJzaW9u
X2NvdW50Jzogdl9jb3VudCwKICAgICAgICAgICAgICAgICd2ZXJzaW9uaW5nX2VuYWJsZWQnOiB2
ZXJzaW9uaW5nX2VuYWJsZWRfYnVja2V0CiAgICAgICAgICAgIH0pCgogICAgICAgICMgLS0tINCd
0JDQp9CQ0JvQniDQkdCb0J7QmtCQINCk0JjQm9Cs0KLQoNCQ0KbQmNCYIC0tLQogICAgICAgIGlm
IHNlbGYuZmlsdGVyX3BhdHRlcm46CiAgICAgICAgICAgIGZpbHRlcmVkX2NvbWJpbmVkID0gW10K
ICAgICAgICAgICAgcGF0dGVybl9sb3dlciA9IHNlbGYuZmlsdGVyX3BhdHRlcm4ubG93ZXIoKQoK
ICAgICAgICAgICAgZm9yIGl0ZW0gaW4gY29tYmluZWQ6CiAgICAgICAgICAgICAgICAjINCS0YHQ
tdCz0LTQsCDQvtGB0YLQsNCy0LvRj9C10Lwg0YHRgdGL0LvQutGDINC90LAg0YPRgNC+0LLQtdC9
0Ywg0LLRi9GI0LUgKNC10YHQu9C4INC+0L3QsCDQsdGD0LTQtdGCINCyINGB0L/QuNGB0LrQtSDQ
utCw0Log0L/QsNC/0LrQsCkKICAgICAgICAgICAgICAgIGlmIGl0ZW1bJ25hbWUnXSA9PSAnLi4n
OgogICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkX2NvbWJpbmVkLmFwcGVuZChpdGVtKQogICAg
ICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgIyDQpNC40LvRjNGC0YDR
g9C10Lwg0L/QviDQstGF0L7QttC00LXQvdC40Y4g0YHRgtGA0L7QutC4IChjYXNlLWluc2Vuc2l0
aXZlKQogICAgICAgICAgICAgICAgaWYgcGF0dGVybl9sb3dlciBpbiBpdGVtWyduYW1lJ10ubG93
ZXIoKToKICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZF9jb21iaW5lZC5hcHBlbmQoaXRlbSkK
CiAgICAgICAgICAgIGNvbWJpbmVkID0gZmlsdGVyZWRfY29tYmluZWQKCiAgICAgICAgICAgICMg
0J7QsdC90L7QstC70Y/QtdC8INC30LDQs9C+0LvQvtCy0L7Quiwg0YfRgtC+0LHRiyDQsdGL0LvQ
viDQstC40LTQvdC+LCDRh9GC0L4g0YTQuNC70YzRgtGAINGA0LDQsdC+0YLQsNC10YIKICAgICAg
ICAgICAgIyAo0J7Qv9GG0LjQvtC90LDQu9GM0L3Qviwg0LXRgdC70Lgg0YMg0LLQsNGBINC10YHR
gtGMINC80LXRgtC+0LQgdXBkYXRlX2hlYWRlcikKICAgICAgICAgICAgc2VsZi51cGRhdGVfaGVh
ZGVyKGYiIFtGSUxURVI6IHtzZWxmLmZpbHRlcl9wYXR0ZXJufV0iKQogICAgICAgICMgLS0tINCa
0J7QndCV0KYg0JHQm9Ce0JrQkCDQpNCY0JvQrNCi0KDQkNCm0JjQmCAtLS0KCiAgICAgICAgIyDQ
odC+0YDRgtC40YDQvtCy0LrQsAogICAgICAgIGlmIGRvX3NvcnQgYW5kIHNlbGYuc29ydF9tb2Rl
ICE9ICdub25lJzoKICAgICAgICAgICAgY29tYmluZWQgPSBzZWxmLnNvcnRfaXRlbXMoY29tYmlu
ZWQpCgogICAgICAgICMg0KHQvtC30LTQsNC90LjQtSDQstC40LTQttC10YLQvtCyCiAgICAgICAg
Zm9yIGl0ZW0gaW4gY29tYmluZWQ6CiAgICAgICAgICAgIGlmIGl0ZW1bJ3R5cGUnXSA9PSAnczNf
ZGlyJzoKICAgICAgICAgICAgICAgIGxhYmVsID0gZiIve2l0ZW1bJ25hbWUnXX0iCiAgICAgICAg
ICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ3MzX2RpcicsCiAg
ICAgICAgICAgICAgICAgICAgJ25hbWUnOiBpdGVtWyduYW1lJ10sCiAgICAgICAgICAgICAgICAg
ICAgJ2tleSc6IGl0ZW1bJ2tleSddLAogICAgICAgICAgICAgICAgICAgICdjYW5fc2VsZWN0Jzog
RmFsc2UKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGF0dHIgPSBOb25lCiAgICAg
ICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzaXplX3N0ciA9IHNlbGYuZnNfYnJvd3Nlci5m
b3JtYXRfc2l6ZShpdGVtWydzaXplJ10pIGlmIGhhc2F0dHIoc2VsZi5mc19icm93c2VyLAogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICdmb3JtYXRfc2l6ZScpIGVsc2UgZm9ybWF0X3NpemUoCiAgICAg
ICAgICAgICAgICAgICAgaXRlbVsnc2l6ZSddKQogICAgICAgICAgICAgICAgdGltZV9zdHIgPSBp
dGVtWydtdGltZSddLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTScpIGlmIGl0ZW1bJ210aW1lJ10g
ZWxzZSAnJwoKICAgICAgICAgICAgICAgICMg0JvQvtCz0LjQutCwINC+0YLQvtCx0YDQsNC20LXQ
vdC40Y8g0LLQtdGA0YHQuNC5OiDQn9Ce0JrQkNCX0KvQktCQ0KLQrCDQotCe0JvQrNCa0J4g0JXQ
odCb0JggPiAxCiAgICAgICAgICAgICAgICB2X2NvdW50ID0gaXRlbS5nZXQoJ3ZlcnNpb25fY291
bnQnLCAxKQogICAgICAgICAgICAgICAgaWYgdl9jb3VudCA+IDE6CiAgICAgICAgICAgICAgICAg
ICAgdmVyc2lvbl9oaW50ID0gZicgW3t2X2NvdW50fV0nCiAgICAgICAgICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgICAgICAgIHZlcnNpb25faGludCA9ICcnICAjIFt2XSDQsdC+0LvRjNGI0LUg
0L3QtSDQvtGC0L7QsdGA0LDQttCw0LXRgtGB0Y8KCiAgICAgICAgICAgICAgICAjIGxhYmVsID0g
ZiIge2l0ZW1bJ25hbWUnXTo1MH0ge3NpemVfc3RyOj4xMH0ge3RpbWVfc3RyfXt2ZXJzaW9uX2hp
bnR9IgogICAgICAgICAgICAgICAgbmFtZSA9IGl0ZW1bIm5hbWUiXQogICAgICAgICAgICAgICAg
IyDQldGB0LvQuCDQuNC80Y8g0LTQu9C40L3QvdC10LUgNDAsINCx0LXRgNC10LwgMzkg0YHQuNC8
0LLQvtC70L7QsiDQuCDQtNC+0LHQsNCy0LvRj9C10LwgJz4nLCDQuNC90LDRh9C1INC+0YHRgtCw
0LLQu9GP0LXQvCDQutCw0Log0LXRgdGC0YwKICAgICAgICAgICAgICAgIGRpc3BsYXlfbmFtZSA9
IG5hbWUgaWYgbGVuKG5hbWUpIDw9IDUwIGVsc2UgbmFtZVs6NDldICsgIj4iCiAgICAgICAgICAg
ICAgICBsYWJlbCA9IGYiIHtkaXNwbGF5X25hbWU6NTB9IHtzaXplX3N0cjo+MTB9IHt0aW1lX3N0
cn17dmVyc2lvbl9oaW50fSIKCiAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAg
ICAgICAgICd0eXBlJzogJ3MzX2ZpbGUnLAogICAgICAgICAgICAgICAgICAgICduYW1lJzogaXRl
bVsnbmFtZSddLAogICAgICAgICAgICAgICAgICAgICdrZXknOiBpdGVtWydrZXknXSwKICAgICAg
ICAgICAgICAgICAgICAnc2l6ZSc6IGl0ZW1bJ3NpemUnXSwKICAgICAgICAgICAgICAgICAgICAn
bXRpbWUnOiBpdGVtWydtdGltZSddLAogICAgICAgICAgICAgICAgICAgICdjYW5fc2VsZWN0Jzog
VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAndmVyc2lvbl9jb3VudCc6IHZfY291bnQgICMg0KHQ
vtGF0YDQsNC90Y/QtdC8INC60L7Quy3QstC+INCy0LXRgNGB0LjQuSDQsiDQvtCx0YrQtdC60YLQ
tQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYXR0ciA9ICdmaWxlJwoKICAgICAg
ICAgICAgdGV4dCA9IFNlbGVjdGFibGVUZXh0KGYnICB7bGFiZWx9JywgZGF0YSwgc2VsZikKICAg
ICAgICAgICAgaXRlbXMuYXBwZW5kKHVyd2lkLkF0dHJNYXAodGV4dCwgYXR0ciwgZm9jdXNfbWFw
PSdzZWxlY3RlZCcpKQoKICAgICAgICByZXR1cm4gaXRlbXMKCiAgICBkZWYgX3JlZnJlc2hfczMo
c2VsZik6CiAgICAgICAgaWYgc2VsZi5jdXJyZW50X2J1Y2tldCBpcyBOb25lOgogICAgICAgICAg
ICBzZWxmLnVwZGF0ZV9oZWFkZXIoZidbUzMgTW9kZSAtIHtzZWxmLmN1cnJlbnRfZW5kcG9pbnR9
XSBTb3J0OiB7c2VsZi5zb3J0X21vZGV9JykKICAgICAgICAgICAgc2VsZi5wYXRoX3RleHQuc2V0
X3RleHQoZidTMzogL3tzZWxmLmN1cnJlbnRfZW5kcG9pbnR9LycpCgogICAgICAgICAgICBmaWx0
ZXJfcGF0dGVybiA9IHNlbGYuYnVja2V0X2ZpbHRlcl9wYXR0ZXJuCgogICAgICAgICAgICBkYXRh
ID0geyd0eXBlJzogJ3RvX3Jvb3RfbWVudScsICdjYW5fc2VsZWN0JzogRmFsc2V9CiAgICAgICAg
ICAgIHRleHQgPSBTZWxlY3RhYmxlVGV4dCgnICBbLi5dIEJhY2sgdG8gcm9vdCBtZW51JywgZGF0
YSwgc2VsZikKICAgICAgICAgICAgc2VsZi53YWxrZXIuYXBwZW5kKHVyd2lkLkF0dHJNYXAodGV4
dCwgTm9uZSwgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKQoKICAgICAgICAgICAgc2VsZi5hcHAuc2hv
d19yZXN1bHQoIkxvYWRpbmcgYnVja2V0cy4uLiAodGhpcyBtYXkgdGFrZSBhIHdoaWxlKSIpCiAg
ICAgICAgICAgIHNlbGYuYXBwLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICAgICAgYnVja2V0
cyA9IHNlbGYuczNfbWFuYWdlci5saXN0X2J1Y2tldHMoZm9yY2U9RmFsc2UpCgogICAgICAgICAg
ICBpZiBub3QgYnVja2V0cyBhbmQgc2VsZi5zM19tYW5hZ2VyLmNvbm5lY3Rpb25fZXJyb3I6CiAg
ICAgICAgICAgICAgICBlcnJvcl9tc2cgPSBmJ1tFUlJPUl0gQ29ubmVjdGlvbiBmYWlsZWQ6IHtz
ZWxmLnMzX21hbmFnZXIuY29ubmVjdGlvbl9lcnJvcls6NjBdfScKICAgICAgICAgICAgICAgIGRh
dGEgPSB7J3R5cGUnOiAnZXJyb3InLCAnY2FuX3NlbGVjdCc6IEZhbHNlfQogICAgICAgICAgICAg
ICAgdGV4dCA9IFNlbGVjdGFibGVUZXh0KGYnICB7ZXJyb3JfbXNnfScsIGRhdGEsIHNlbGYpCiAg
ICAgICAgICAgICAgICBzZWxmLndhbGtlci5hcHBlbmQodXJ3aWQuQXR0ck1hcCh0ZXh0LCAnZXJy
b3InKSkKICAgICAgICAgICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KAogICAgICAgICAgICAg
ICAgICAgIGYnQ2Fubm90IGNvbm5lY3QgdG8ge3NlbGYuY3VycmVudF9lbmRwb2ludH06IHtzZWxm
LnMzX21hbmFnZXIuY29ubmVjdGlvbl9lcnJvcls6ODBdfScpCiAgICAgICAgICAgICAgICByZXR1
cm4KCiAgICAgICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KCIiKQogICAgICAgICAgICBzZWxm
LmFwcC5sb29wLmRyYXdfc2NyZWVuKCkKCiAgICAgICAgICAgIGJ1Y2tldF9pdGVtcyA9IFtdCiAg
ICAgICAgICAgIGZvciBidWNrZXQgaW4gYnVja2V0czoKCiAgICAgICAgICAgICAgICAjINCf0L7Q
u9GD0YfQsNC10Lwg0YHRgtCw0YLRg9GBINCy0LXRgNGB0LjQvtC90LjRgNC+0LLQsNC90LjRjyDQ
tNC70Y8g0LrQsNC20LTQvtCz0L4g0LHQsNC60LXRgtCwCiAgICAgICAgICAgICAgICB2ZXJzaW9u
aW5nX3N0YXR1cyA9IGJ1Y2tldC5nZXQoIl9WZXJzaW9uaW5nU3RhdHVzIikKICAgICAgICAgICAg
ICAgIHZlcnNpb25pbmdfbWFyayA9IGJ1Y2tldC5nZXQoIl9WZXJzaW9uaW5nTWFyayIsICIiKQoK
ICAgICAgICAgICAgICAgIGJ1Y2tldF9pdGVtcy5hcHBlbmQoewogICAgICAgICAgICAgICAgICAg
ICduYW1lJzogYnVja2V0WydOYW1lJ10sCiAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnYnVj
a2V0JywKICAgICAgICAgICAgICAgICAgICAnQ3JlYXRpb25EYXRlJzogYnVja2V0LmdldCgnQ3Jl
YXRpb25EYXRlJyksCiAgICAgICAgICAgICAgICAgICAgJ210aW1lJzogYnVja2V0LmdldCgnQ3Jl
YXRpb25EYXRlJyksCiAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiAwLAogICAgICAgICAgICAg
ICAgICAgICd2ZXJzaW9uaW5nJzogdmVyc2lvbmluZ19zdGF0dXMsCiAgICAgICAgICAgICAgICAg
ICAgJ3ZlcnNpb25pbmdfbWFyayc6IHZlcnNpb25pbmdfbWFyaywKICAgICAgICAgICAgICAgICAg
ICAnY2FuX3NlbGVjdCc6IFRydWUsCiAgICAgICAgICAgICAgICAgICAgJ293bmVyJzogYnVja2V0
LmdldCgiX093bmVySGludCIpCiAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgYnVja2V0
X2l0ZW1zID0gc29ydGVkKGJ1Y2tldF9pdGVtcywga2V5PWxhbWJkYSBiOiAoYi5nZXQoIm5hbWUi
KSBvciAiIikubG93ZXIoKSkKCiAgICAgICAgICAgIHNlbGYuX3N5bmNfZmlsdGVyX2Zvb3Rlcl9m
b3JfdmlldygpCgogICAgICAgICAgICBmaWx0ZXJfcGF0dGVybiA9IHNlbGYuYnVja2V0X2ZpbHRl
cl9wYXR0ZXJuCgogICAgICAgICAgICBpZiBmaWx0ZXJfcGF0dGVybjoKICAgICAgICAgICAgICAg
IHNlbGYudXBkYXRlX2hlYWRlcihmIiBbRklMVEVSOiB7c2VsZi5maWx0ZXJfcGF0dGVybn1dIikK
ICAgICAgICAgICAgICAgIHBhdCA9IGZpbHRlcl9wYXR0ZXJuCiAgICAgICAgICAgICAgICBpZiAi
KiIgbm90IGluIHBhdCBhbmQgIj8iIG5vdCBpbiBwYXQ6CiAgICAgICAgICAgICAgICAgICAgcGF0
ID0gZiIqe3BhdH0qIgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHJ4
ID0gcmUuY29tcGlsZShmbm1hdGNoLnRyYW5zbGF0ZShwYXQpLCByZS5JR05PUkVDQVNFKQogICAg
ICAgICAgICAgICAgICAgIGJ1Y2tldF9pdGVtcyA9IFtiIGZvciBiIGluIGJ1Y2tldF9pdGVtcyBp
ZiByeC5tYXRjaChiLmdldCgibmFtZSIsICIiKSldCiAgICAgICAgICAgICAgICBleGNlcHQgcmUu
ZXJyb3I6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5hcHAuc2hvd19yZXN1bHQoIkludmFsaWQg
YnVja2V0IGZpbHRlciBwYXR0ZXJuIiwgc2V2ZXJpdHk9Indhcm5pbmciKQoKICAgICAgICAgICAg
Zm9yIGJ1Y2tldCBpbiBidWNrZXRfaXRlbXM6CiAgICAgICAgICAgICAgICBjcmVhdGlvbl9kYXRl
ID0gYnVja2V0LmdldCgnQ3JlYXRpb25EYXRlJykKICAgICAgICAgICAgICAgIGRhdGVfc3RyID0g
Y3JlYXRpb25fZGF0ZS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKSBpZiBjcmVhdGlvbl9k
YXRlIGVsc2UgJyAnICogMTkKCiAgICAgICAgICAgICAgICAjIGxhYmVsID0gZidbQlVDS0VUXSB7
YnVja2V0WyJuYW1lIl06NDB9IHtkYXRlX3N0cn0nCiAgICAgICAgICAgICAgICBsYWJlbCA9IGYn
KntidWNrZXRbIm5hbWUiXTo0MH0ge2RhdGVfc3RyfSB7YnVja2V0WyJ2ZXJzaW9uaW5nX21hcmsi
XX0gW3tidWNrZXRbIm93bmVyIl19XScKCiAgICAgICAgICAgICAgICBkYXRhID0geyd0eXBlJzog
J2J1Y2tldCcsICduYW1lJzogYnVja2V0WyduYW1lJ10sICdjYW5fc2VsZWN0JzogVHJ1ZX0KICAg
ICAgICAgICAgICAgIHRleHQgPSBTZWxlY3RhYmxlVGV4dChmJyAge2xhYmVsfScsIGRhdGEsIHNl
bGYpCiAgICAgICAgICAgICAgICBzZWxmLndhbGtlci5hcHBlbmQodXJ3aWQuQXR0ck1hcCh0ZXh0
LCBOb25lLCBmb2N1c19tYXA9J3NlbGVjdGVkJykpCiAgICAgICAgZWxzZToKICAgICAgICAgICAg
IyAxLiDQodC90LDRh9Cw0LvQsCDRgdGH0LjRgtCw0LXQvCDQvtCx0YrQtdC60YLRiyAo0Y3RgtC+
INCx0YvRgdGC0YDQviwg0YIu0LouINC00LDQvdC90YvQtSDQsdC10YDRg9GC0YHRjyDQuNC3IGNh
Y2hlINC40LvQuCBIRUFEINC30LDQv9GA0L7RgdCwKQogICAgICAgICAgICB0b3RhbF9jb3VudCwg
dG90YWxfc2l6ZSA9IHNlbGYuczNfbWFuYWdlci5jb3VudF9vYmplY3RzKHNlbGYuY3VycmVudF9i
dWNrZXQsIHNlbGYuY3VycmVudF9wcmVmaXgpCgogICAgICAgICAgICAjIDIuINCb0L7Qs9C40LrQ
sCDRgdCx0YDQvtGB0LAg0YHQvtGA0YLQuNGA0L7QstC60Lg6CiAgICAgICAgICAgICMg0JXRgdC7
0Lgg0L7QsdGK0LXQutGC0L7QsiDQvNC90L7Qs9C+ICg+MTAwMCksINC/0YDQuNC90YPQtNC40YLQ
tdC70YzQvdC+INC+0YLQutC70Y7Rh9Cw0LXQvCDRgdC+0YDRgtC40YDQvtCy0LrRgyDQtNC70Y8g
0YHQutC+0YDQvtGB0YLQuAogICAgICAgICAgICBpZiB0b3RhbF9jb3VudCBpcyBub3QgTm9uZSBh
bmQgdG90YWxfY291bnQgPiAxMDAwOgogICAgICAgICAgICAgICAgc2VsZi5zb3J0X21vZGUgPSAn
bm9uZScKICAgICAgICAgICAgIyDQmNC90LDRh9C1IC0g0L7RgdGC0LDQstC70Y/QtdC8INGC0L7R
giDRgNC10LbQuNC8LCDQutC+0YLQvtGA0YvQuSDQstGL0LHRgNCw0Lsg0L/QvtC70YzQt9C+0LLQ
sNGC0LXQu9GMICjQvdCw0L/RgNC40LzQtdGALCAnc2l6ZScpCgogICAgICAgICAgICBzZWxmLnVw
ZGF0ZV9oZWFkZXIoZidbUzMgTW9kZSAtIHtzZWxmLmN1cnJlbnRfZW5kcG9pbnR9XSBTb3J0OiB7
c2VsZi5zb3J0X21vZGV9JykKCiAgICAgICAgICAgICMg0KTQvtGA0LzQuNGA0YPQtdC8INC/0YPR
gtGMINCyINC30LDQs9C+0LvQvtCy0LrQtQogICAgICAgICAgICBkaXNwbGF5X3ByZWZpeCA9IHNl
bGYuY3VycmVudF9wcmVmaXgKICAgICAgICAgICAgIyBpZiBzZWxmLmN1cnJlbnRfcHJlZml4IGVs
c2UgJy8nCgogICAgICAgICAgICBpZiB0b3RhbF9jb3VudCBpcyBub3QgTm9uZToKICAgICAgICAg
ICAgICAgIGNvdW50X2luZm8gPSBmJyBbe3RvdGFsX2NvdW50fSBvYmplY3RzLCB7Zm9ybWF0X3Np
emUodG90YWxfc2l6ZSl9XScKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGNvdW50
X2luZm8gPSAnJwoKICAgICAgICAgICAgc2VsZi5wYXRoX3RleHQuc2V0X3RleHQoZidTMzogL3tz
ZWxmLmN1cnJlbnRfZW5kcG9pbnR9L3tzZWxmLmN1cnJlbnRfYnVja2V0fS97ZGlzcGxheV9wcmVm
aXh9e2NvdW50X2luZm99JykKCiAgICAgICAgICAgICMgMy4g0JTQvtCx0LDQstC70Y/QtdC8INC9
0LDQstC40LPQsNGG0LjQvtC90L3Ri9C1INC60L3QvtC/0LrQuAogICAgICAgICAgICBkYXRhID0g
eyd0eXBlJzogJ3BhcmVudCcsICdjYW5fc2VsZWN0JzogRmFsc2V9CiAgICAgICAgICAgIGlmIHNl
bGYuY3VycmVudF9wcmVmaXg6CiAgICAgICAgICAgICAgICBkYXRhID0geyd0eXBlJzogJ3MzX3Bh
cmVudCcsICdjYW5fc2VsZWN0JzogRmFsc2V9CiAgICAgICAgICAgICAgICB0ZXh0ID0gU2VsZWN0
YWJsZVRleHQoJyBbLi5dIFBhcmVudCcsIGRhdGEsIHNlbGYpCiAgICAgICAgICAgIGVsc2U6CiAg
ICAgICAgICAgICAgICBkYXRhID0geyd0eXBlJzogJ3MzX2JhY2snLCAnY2FuX3NlbGVjdCc6IEZh
bHNlfQogICAgICAgICAgICAgICAgdGV4dCA9IFNlbGVjdGFibGVUZXh0KCcgWy4uXSBCYWNrIHRv
IGJ1Y2tldHMnLCBkYXRhLCBzZWxmKQoKICAgICAgICAgICAgc2VsZi53YWxrZXIuYXBwZW5kKHVy
d2lkLkF0dHJNYXAodGV4dCwgTm9uZSwgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKQoKICAgICAgICAg
ICAgIyA0LiDQl9CQ0J/Qo9Ch0JrQkNCV0Jwg0JvQldCd0JjQktCj0K4g0JfQkNCT0KDQo9CX0JrQ
owogICAgICAgICAgICBzZWxmLl9yZWZyZXNoX3MzX29iamVjdHNfbGF6eSgpCgogICAgICAgICAg
ICByZXR1cm4gICMg0JLRi9GF0L7QtCAtINC+0YHRgtCw0LvRjNC90L7QtSDQsiDRhNC+0L3QvtCy
0L7QvCDQv9C+0YLQvtC60LUKCiAgICBkZWYgX3JlZnJlc2hfZnMoc2VsZik6CiAgICAgICAgc2Vs
Zi51cGRhdGVfaGVhZGVyKGYnW0ZTIE1vZGVdIFNvcnQ6IHtzZWxmLnNvcnRfbW9kZX0nKQoKICAg
ICAgICAjINCf0L7QtNGB0YfQuNGC0YvQstCw0LXQvCDQutC+0LvQuNGH0LXRgdGC0LLQviDRjdC7
0LXQvNC10L3RgtC+0LIg0LIg0YLQtdC60YPRidC10Lkg0LTQuNGA0LXQutGC0L7RgNC40LgKICAg
ICAgICBpdGVtcyA9IHNlbGYuZnNfYnJvd3Nlci5saXN0X2RpcmVjdG9yeSgpCiAgICAgICAgZGly
X2NvdW50ID0gc3VtKDEgZm9yIGl0ZW0gaW4gaXRlbXMgaWYgaXRlbS5nZXQoJ2lzX2RpcicsIEZh
bHNlKSBhbmQgaXRlbS5nZXQoJ25hbWUnKSAhPSAnLi4nKQogICAgICAgIGZpbGVfY291bnQgPSBz
dW0oMSBmb3IgaXRlbSBpbiBpdGVtcyBpZiBub3QgaXRlbS5nZXQoJ2lzX2RpcicsIEZhbHNlKSkK
ICAgICAgICBjb3VudF9pbmZvID0gZicgW3tkaXJfY291bnR9IGRpcnMsIHtmaWxlX2NvdW50fSBm
aWxlc10nCgogICAgICAgIHNlbGYucGF0aF90ZXh0LnNldF90ZXh0KGYnRlM6IHtzZWxmLmZzX2Jy
b3dzZXIuY3VycmVudF9wYXRofXtjb3VudF9pbmZvfScpCgogICAgICAgIGlmIHNlbGYuaXNfZnNf
cm9vdCgpOgogICAgICAgICAgICBkYXRhID0geyd0eXBlJzogJ3RvX3Jvb3RfbWVudScsICdjYW5f
c2VsZWN0JzogRmFsc2V9CiAgICAgICAgICAgIHRleHQgPSBTZWxlY3RhYmxlVGV4dCgnICBbLi5d
IEJhY2sgdG8gcm9vdCBtZW51JywgZGF0YSwgc2VsZikKICAgICAgICAgICAgc2VsZi53YWxrZXIu
YXBwZW5kKHVyd2lkLkF0dHJNYXAodGV4dCwgTm9uZSwgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKQoK
ICAgICAgICBpdGVtcyA9IHNlbGYuZnNfYnJvd3Nlci5saXN0X2RpcmVjdG9yeSgpCgogICAgICAg
IGRpcnMgPSBbaXRlbSBmb3IgaXRlbSBpbiBpdGVtcyBpZiBpdGVtWydpc19kaXInXSBhbmQgaXRl
bVsnbmFtZSddICE9ICcuLiddCiAgICAgICAgZmlsZXMgPSBbaXRlbSBmb3IgaXRlbSBpbiBpdGVt
cyBpZiBub3QgaXRlbVsnaXNfZGlyJ11dCiAgICAgICAgcGFyZW50ID0gW2l0ZW0gZm9yIGl0ZW0g
aW4gaXRlbXMgaWYgaXRlbVsnbmFtZSddID09ICcuLiddCgogICAgICAgIGRpcnMgPSBzZWxmLnNv
cnRfaXRlbXMoZGlycykKICAgICAgICBmaWxlcyA9IHNlbGYuc29ydF9pdGVtcyhmaWxlcykKCiAg
ICAgICAgZm9yIGl0ZW1fZGF0YSBpbiBwYXJlbnQ6CiAgICAgICAgICAgIGxhYmVsID0gJy8uLicK
ICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICd0eXBlJzogJ2ZzX2RpcicsCiAg
ICAgICAgICAgICAgICAnbmFtZSc6IGl0ZW1fZGF0YVsnbmFtZSddLAogICAgICAgICAgICAgICAg
J3NpemUnOiBpdGVtX2RhdGFbJ3NpemUnXSwKICAgICAgICAgICAgICAgICdjYW5fc2VsZWN0Jzog
RmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgICB0ZXh0ID0gU2VsZWN0YWJsZVRleHQoZicg
IHtsYWJlbH0nLCBkYXRhLCBzZWxmKQogICAgICAgICAgICBzZWxmLndhbGtlci5hcHBlbmQodXJ3
aWQuQXR0ck1hcCh0ZXh0LCBOb25lLCBmb2N1c19tYXA9J3NlbGVjdGVkJykpCgogICAgICAgIGZv
ciBpdGVtX2RhdGEgaW4gZGlyczoKICAgICAgICAgICAgbXRpbWUgPSBpdGVtX2RhdGFbJ210aW1l
J10uc3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVTJykgaWYgaXRlbV9kYXRhWydtdGltZSddIGVs
c2UgJyAnICogMTkKICAgICAgICAgICAgIyBsYWJlbCA9IGYnW0RJUiBdIHtpdGVtX2RhdGFbIm5h
bWUiXTo0MH0gIDxESVI+ICAgICAgICAgICB7bXRpbWV9JwogICAgICAgICAgICAjIGxhYmVsID0g
Zicve2l0ZW1fZGF0YVsibmFtZSJdOjQwfSAgICAgICAgICAgIHttdGltZX0nCiAgICAgICAgICAg
IG5hbWUgPSBpdGVtX2RhdGFbIm5hbWUiXQogICAgICAgICAgICAjINCV0YHQu9C4INC40LzRjyDQ
tNC70LjQvdC90LXQtSA0MCwg0LHQtdGA0LXQvCAzOSDRgdC40LzQstC+0LvQvtCyINC4INC00L7Q
sdCw0LLQu9GP0LXQvCAnPicsINC40L3QsNGH0LUg0L7RgdGC0LDQstC70Y/QtdC8INC60LDQuiDQ
tdGB0YLRjAogICAgICAgICAgICBkaXNwbGF5X25hbWUgPSBuYW1lIGlmIGxlbihuYW1lKSA8PSA0
MCBlbHNlIG5hbWVbOjM5XSArICI+IgogICAgICAgICAgICBsYWJlbCA9IGYnL3tkaXNwbGF5X25h
bWU6NDB9ICAgICAgICAgICAge210aW1lfScKCiAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAg
ICAgICAgICAndHlwZSc6ICdmc19kaXInLAogICAgICAgICAgICAgICAgJ25hbWUnOiBpdGVtX2Rh
dGFbJ25hbWUnXSwKICAgICAgICAgICAgICAgICdzaXplJzogaXRlbV9kYXRhWydzaXplJ10sCiAg
ICAgICAgICAgICAgICAnbXRpbWUnOiBpdGVtX2RhdGFbJ210aW1lJ10sCiAgICAgICAgICAgICAg
ICAnY2FuX3NlbGVjdCc6IFRydWUKICAgICAgICAgICAgfQogICAgICAgICAgICB0ZXh0ID0gU2Vs
ZWN0YWJsZVRleHQoZicgIHtsYWJlbH0nLCBkYXRhLCBzZWxmKQogICAgICAgICAgICAjIHNlbGYu
d2Fsa2VyLmFwcGVuZCh1cndpZC5BdHRyTWFwKHRleHQsIE5vbmUsIGZvY3VzX21hcD0nc2VsZWN0
ZWQnKSkKICAgICAgICAgICAgc2VsZi53YWxrZXIuYXBwZW5kKHVyd2lkLkF0dHJNYXAodGV4dCwg
J2JvZHknLCBmb2N1c19tYXA9J3NlbGVjdGVkJykpCgogICAgICAgIGZvciBpdGVtX2RhdGEgaW4g
ZmlsZXM6CiAgICAgICAgICAgIG10aW1lID0gaXRlbV9kYXRhWydtdGltZSddLnN0cmZ0aW1lKCcl
WS0lbS0lZCAlSDolTTolUycpIGlmIGl0ZW1fZGF0YVsnbXRpbWUnXSBlbHNlICcgJyAqIDE5CiAg
ICAgICAgICAgICMgbGFiZWwgPSBmJ1tGSUxFXSB7aXRlbV9kYXRhWyJuYW1lIl06NDB9IHtzZWxm
LmZvcm1hdF9zaXplKGl0ZW1fZGF0YVsic2l6ZSJdKTo+MTB9ICAgICAgICAge210aW1lfScKICAg
ICAgICAgICAgIyBsYWJlbCA9IGYnIHtpdGVtX2RhdGFbIm5hbWUiXTo0MH0ge3NlbGYuZm9ybWF0
X3NpemUoaXRlbV9kYXRhWyJzaXplIl0pOj4xMH0ge210aW1lfScKICAgICAgICAgICAgbmFtZSA9
IGl0ZW1fZGF0YVsibmFtZSJdCiAgICAgICAgICAgICMg0JXRgdC70Lgg0LjQvNGPINC00LvQuNC9
0L3QtdC1IDQwLCDQsdC10YDQtdC8IDM5INGB0LjQvNCy0L7Qu9C+0LIg0Lgg0LTQvtCx0LDQstC7
0Y/QtdC8ICc+Jywg0LjQvdCw0YfQtSDQvtGB0YLQsNCy0LvRj9C10Lwg0LrQsNC6INC10YHRgtGM
CiAgICAgICAgICAgIGRpc3BsYXlfbmFtZSA9IG5hbWUgaWYgbGVuKG5hbWUpIDw9IDQwIGVsc2Ug
bmFtZVs6MzldICsgIj4iCiAgICAgICAgICAgIGxhYmVsID0gZicge2Rpc3BsYXlfbmFtZTo0MH0g
e3NlbGYuZm9ybWF0X3NpemUoaXRlbV9kYXRhWyJzaXplIl0pOj4xMH0ge210aW1lfScKCiAgICAg
ICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAndHlwZSc6ICdmc19maWxlJywKICAgICAg
ICAgICAgICAgICduYW1lJzogaXRlbV9kYXRhWyduYW1lJ10sCiAgICAgICAgICAgICAgICAnc2l6
ZSc6IGl0ZW1fZGF0YVsnc2l6ZSddLAogICAgICAgICAgICAgICAgJ210aW1lJzogaXRlbV9kYXRh
WydtdGltZSddLAogICAgICAgICAgICAgICAgJ2Nhbl9zZWxlY3QnOiBUcnVlCiAgICAgICAgICAg
IH0KICAgICAgICAgICAgdGV4dCA9IFNlbGVjdGFibGVUZXh0KGYnICB7bGFiZWx9JywgZGF0YSwg
c2VsZikKICAgICAgICAgICAgIyBzZWxmLndhbGtlci5hcHBlbmQodXJ3aWQuQXR0ck1hcCh0ZXh0
LCBOb25lLCBmb2N1c19tYXA9J3NlbGVjdGVkJykpCiAgICAgICAgICAgIHNlbGYud2Fsa2VyLmFw
cGVuZCh1cndpZC5BdHRyTWFwKHRleHQsICdmaWxlJywgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKQoK
ICAgIGRlZiBmb3JtYXRfc2l6ZShzZWxmLCBzaXplKToKICAgICAgICBmb3IgdW5pdCBpbiBbJ0Ig
ICcsICdLQiAnLCAnTUIgJywgJ0dCICddOgogICAgICAgICAgICBpZiBzaXplIDwgMTAyNC4wOgog
ICAgICAgICAgICAgICAgcmV0dXJuIGYne3NpemU6LjFmfXt1bml0fScKICAgICAgICAgICAgc2l6
ZSAvPSAxMDI0LjAKICAgICAgICByZXR1cm4gZid7c2l6ZTouMWZ9VEInCgogICAgZGVmIG9uX2l0
ZW1fYWN0aXZhdGVkKHNlbGYsIGRhdGEpOgogICAgICAgIGl0ZW1fdHlwZSA9IGRhdGEuZ2V0KCd0
eXBlJykKCiAgICAgICAgaWYgaXRlbV90eXBlID09ICd0b19yb290X21lbnUnOgogICAgICAgICAg
ICBzZWxmLm1vZGUgPSAncm9vdF9tZW51JwogICAgICAgICAgICBzZWxmLmN1cnJlbnRfZW5kcG9p
bnQgPSBOb25lCiAgICAgICAgICAgIHNlbGYuY3VycmVudF9idWNrZXQgPSBOb25lCiAgICAgICAg
ICAgIHNlbGYuY3VycmVudF9wcmVmaXggPSAnJwogICAgICAgICAgICBzZWxmLnMzX21hbmFnZXIg
PSBOb25lCiAgICAgICAgICAgIHNlbGYucmVmcmVzaCgpCgogICAgICAgIGVsaWYgaXRlbV90eXBl
ID09ICdyb290X2ZzJzoKICAgICAgICAgICAgc2VsZi5tb2RlID0gJ2ZzJwogICAgICAgICAgICBp
ZiBzZWxmLmZzX2Jyb3dzZXIgaXMgTm9uZToKICAgICAgICAgICAgICAgIHNlbGYuZnNfYnJvd3Nl
ciA9IEZpbGVTeXN0ZW1Ccm93c2VyKCkKICAgICAgICAgICAgIyBGSVg6INCU0LvRjyDRhNCw0LnQ
u9C+0LLQvtC5INGB0LjRgdGC0LXQvNGLINGB0L7RgNGC0LjRgNC+0LLQutCwINC/0L4g0YPQvNC+
0LvRh9Cw0L3QuNGOIC0gTmFtZQogICAgICAgICAgICBzZWxmLnNvcnRfbW9kZSA9ICduYW1lJwog
ICAgICAgICAgICBzZWxmLnJlZnJlc2goKQoKICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAncm9v
dF9lbmRwb2ludCc6CiAgICAgICAgICAgIHNlbGYubW9kZSA9ICdzMycKICAgICAgICAgICAgc2Vs
Zi5jdXJyZW50X2VuZHBvaW50ID0gZGF0YVsnbmFtZSddCiAgICAgICAgICAgIGVuZHBvaW50X2Nv
bmZpZyA9IGRhdGFbJ2NvbmZpZyddCiAgICAgICAgICAgIHNlbGYuczNfbWFuYWdlciA9IFMzTWFu
YWdlcihlbmRwb2ludF9jb25maWcpCiAgICAgICAgICAgIHNlbGYuY3VycmVudF9idWNrZXQgPSBO
b25lCiAgICAgICAgICAgIHNlbGYuY3VycmVudF9wcmVmaXggPSAnJwogICAgICAgICAgICAjIEZJ
WDog0JTQu9GPIFMzINC+0YLQutC70Y7Rh9Cw0LXQvCDRgdC+0YDRgtC40YDQvtCy0LrRgyDQv9C+
INGD0LzQvtC70YfQsNC90LjRjiAo0LPRgNGD0LfQuNC8INC60LDQuiDQtdGB0YLRjCkKICAgICAg
ICAgICAgc2VsZi5zb3J0X21vZGUgPSAnbm9uZScKICAgICAgICAgICAgc2VsZi5yZWZyZXNoKCkK
CiAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ2VuZHBvaW50JzoKICAgICAgICAgICAgc2VsZi5j
dXJyZW50X2VuZHBvaW50ID0gZGF0YVsnbmFtZSddCiAgICAgICAgICAgIGVuZHBvaW50X2NvbmZp
ZyA9IGRhdGFbJ2NvbmZpZyddCiAgICAgICAgICAgIHNlbGYuczNfbWFuYWdlciA9IFMzTWFuYWdl
cihlbmRwb2ludF9jb25maWcpCiAgICAgICAgICAgIHNlbGYuY3VycmVudF9idWNrZXQgPSBOb25l
CiAgICAgICAgICAgIHNlbGYuY3VycmVudF9wcmVmaXggPSAnJwogICAgICAgICAgICBzZWxmLnNv
cnRfbW9kZSA9ICdub25lJyAgIyBGSVg6INCi0L4g0LbQtSDRgdCw0LzQvtC1INC00LvRjyDQv9GA
0Y/QvNC+0LPQviDQstGL0LHQvtGA0LAg0Y3QvdC00L/QvtC40L3RgtCwCiAgICAgICAgICAgIHNl
bGYucmVmcmVzaCgpCgogICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdidWNrZXQnOgogICAgICAg
ICAgICBzZWxmLmN1cnJlbnRfYnVja2V0ID0gZGF0YVsnbmFtZSddCiAgICAgICAgICAgIHNlbGYu
Y3VycmVudF9wcmVmaXggPSAnJwogICAgICAgICAgICBzZWxmLnJlZnJlc2goKQoKICAgICAgICBl
bGlmIGl0ZW1fdHlwZSA9PSAnczNfYmFjayc6CiAgICAgICAgICAgIGZvY3VzX2J1Y2tldCA9IHNl
bGYuY3VycmVudF9idWNrZXQKICAgICAgICAgICAgc2VsZi5jdXJyZW50X2J1Y2tldCA9IE5vbmUK
ICAgICAgICAgICAgc2VsZi5jdXJyZW50X3ByZWZpeCA9ICcnCiAgICAgICAgICAgIHNlbGYucmVm
cmVzaChmb2N1c19vbj1mb2N1c19idWNrZXQpCgogICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdz
M19wYXJlbnQnOgogICAgICAgICAgICBpZiBzZWxmLmN1cnJlbnRfcHJlZml4OgogICAgICAgICAg
ICAgICAgIyBwYXJ0cyA9IHNlbGYuY3VycmVudF9wcmVmaXgucnN0cmlwKCcvJykuc3BsaXQoJy8n
KQogICAgICAgICAgICAgICAgIyBmb2N1c19vbiA9IHBhcnRzWy0xXQogICAgICAgICAgICAgICAg
IyBzZWxmLmN1cnJlbnRfcHJlZml4ID0gJy8nLmpvaW4ocGFydHNbOi0xXSkgKyAnLycgaWYgbGVu
KHBhcnRzKSA+IDEgZWxzZSAnJwogICAgICAgICAgICAgICAgIyBzZWxmLnJlZnJlc2goZm9jdXNf
b249Zm9jdXNfb24pCiAgICAgICAgICAgICAgICAjIGN1cnJlbnRfcHJlZml4INC+0LHRi9GH0L3Q
viDQt9Cw0LrQsNC90YfQuNCy0LDQtdGC0YHRjyDQvdCwICcvJywg0L3QsNC/0YDQuNC80LXRgCAn
Zm9sZGVyMS9mb2xkZXIyLycKICAgICAgICAgICAgICAgICMgcnN0cmlwKCcvJykgLT4gJ2ZvbGRl
cjEvZm9sZGVyMicKICAgICAgICAgICAgICAgICMgc3BsaXQoJy8nKSAtPiBbJ2ZvbGRlcjEnLCAn
Zm9sZGVyMiddCiAgICAgICAgICAgICAgICBwYXJ0cyA9IHNlbGYuY3VycmVudF9wcmVmaXgucnN0
cmlwKCcvJykuc3BsaXQoJy8nKQoKICAgICAgICAgICAgICAgIGlmIGxlbihwYXJ0cykgPiAwOgog
ICAgICAgICAgICAgICAgICAgICMg0JjQvNGPINC/0LDQv9C60LgsINC40Lcg0LrQvtGC0L7RgNC+
0Lkg0LzRiyDQstGL0YXQvtC00LjQvCAo0L3QsCDQvdC10ZEg0L3QsNC00L4g0L/QvtGB0YLQsNCy
0LjRgtGMINGE0L7QutGD0YEpCiAgICAgICAgICAgICAgICAgICAgZm9jdXNfb24gPSBwYXJ0c1st
MV0gICMgJ2ZvbGRlcjInCgogICAgICAgICAgICAgICAgICAgICMg0J3QvtCy0YvQuSDQv9GA0LXR
hNC40LrRgSAo0YDQvtC00LjRgtC10LvRjNGB0LrQuNC5KQogICAgICAgICAgICAgICAgICAgIGlm
IGxlbihwYXJ0cykgPiAxOgogICAgICAgICAgICAgICAgICAgICAgICAjIEpvaW4g0LLRgdC10YUg
0YfQsNGB0YLQtdC5INC60YDQvtC80LUg0L/QvtGB0LvQtdC00L3QtdC5ICsgJy8nCiAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudF9wcmVmaXggPSAnLycuam9pbihwYXJ0c1s6LTFd
KSArICcvJwogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAg
ICMg0JXRgdC70Lgg0LHRi9C70LAg0L7QtNC90LAg0L/QsNC/0LrQsCwg0YHRgtCw0L3QvtCy0LjQ
vNGB0Y8g0LIg0LrQvtGA0LXQvdGMINCx0LDQutC10YLQsAogICAgICAgICAgICAgICAgICAgICAg
ICBzZWxmLmN1cnJlbnRfcHJlZml4ID0gJycKCiAgICAgICAgICAgICAgICAgICAgIyDQntCR0J3Q
ntCS0JvQldCd0JjQlTog0J/QtdGA0LXQtNCw0LXQvCBmb2N1c19vbiDQsiByZWZyZXNoCiAgICAg
ICAgICAgICAgICAgICAgIyDQktCw0LbQvdC+OiDQuNC80Y8g0L/QsNC/0LrQuCDQsiDRgdC/0LjR
gdC60LUg0L7QsdGL0YfQvdC+INC+0YLQvtCx0YDQsNC20LDQtdGC0YHRjyDQsdC10Lcg0YHQu9GN
0YjQtdC5INC40LvQuCDRgSDQvdC40LzQuCwKICAgICAgICAgICAgICAgICAgICAjINCyINC30LDQ
stC40YHQuNC80L7RgdGC0Lgg0L7RgiDRgtC+0LPQviwg0LrQsNC6IGNyZWF0ZV9kaXNwbGF5X2l0
ZW1zINGE0L7RgNC80LjRgNGD0LXRgiDQuNC80LXQvdCwLgogICAgICAgICAgICAgICAgICAgICMg
0J7QsdGL0YfQvdC+INGN0YLQviDQv9GA0L7RgdGC0L4g0LjQvNGPINC/0LDQv9C60LguCiAgICAg
ICAgICAgICAgICAgICAgc2VsZi5yZWZyZXNoKGZvY3VzX29uPWZvY3VzX29uKQogICAgICAgICAg
ICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAjINCV0YHQu9C4IHBhcnRzINC/0YPRgdGC
LCDQt9C90LDRh9C40YIg0LzRiyDQsiDQutC+0YDQvdC1ICjRgdGC0YDQsNC90L3QviDQtNC70Y8g
czNfcGFyZW50LCDQvdC+INCx0YvQstCw0LXRgikKICAgICAgICAgICAgICAgICAgICBzZWxmLmN1
cnJlbnRfcHJlZml4ID0gJycKICAgICAgICAgICAgICAgICAgICBzZWxmLnJlZnJlc2goKQoKICAg
ICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnczNfZGlyJzoKICAgICAgICAgICAgc2VsZi5jdXJyZW50
X3ByZWZpeCA9IGRhdGFbJ2tleSddCiAgICAgICAgICAgIHNlbGYucmVmcmVzaCgpCgogICAgICAg
IGVsaWYgaXRlbV90eXBlID09ICdzM19maWxlJzoKICAgICAgICAgICAgaWYgZGF0YS5nZXQoJ3Zl
cnNpb25fY291bnQnLCAxKSA+IDE6CiAgICAgICAgICAgICAgICBzZWxmLnNob3dfdmVyc2lvbnMo
ZGF0YSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYudmlld19pdGVtKCkK
CiAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ2ZzX2Rpcic6CiAgICAgICAgICAgIGlmIGRhdGFb
J25hbWUnXSA9PSAnLi4nOgogICAgICAgICAgICAgICAgZm9jdXNfb24gPSBvcy5wYXRoLmJhc2Vu
YW1lKHNlbGYuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgpCiAgICAgICAgICAgICAgICBzZWxmLmZz
X2Jyb3dzZXIuY3VycmVudF9wYXRoID0gb3MucGF0aC5kaXJuYW1lKHNlbGYuZnNfYnJvd3Nlci5j
dXJyZW50X3BhdGgpCiAgICAgICAgICAgICAgICBzZWxmLnJlZnJlc2goZm9jdXNfb249Zm9jdXNf
b24pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmZzX2Jyb3dzZXIuY3Vy
cmVudF9wYXRoID0gb3MucGF0aC5qb2luKHNlbGYuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIGRh
dGFbJ25hbWUnXSkKICAgICAgICAgICAgICAgIHNlbGYucmVmcmVzaCgpCgogICAgICAgIGVsaWYg
aXRlbV90eXBlID09ICdmc19maWxlJzoKICAgICAgICAgICAgc2VsZi52aWV3X2l0ZW0oKQoKICAg
IGRlZiBzaG93X3ZlcnNpb25zKHNlbGYsIGZpbGVfZGF0YSk6CiAgICAgICAgdmVyc2lvbnMgPSBz
ZWxmLnMzX21hbmFnZXIubGlzdF9vYmplY3RfdmVyc2lvbnMoc2VsZi5jdXJyZW50X2J1Y2tldCwg
ZmlsZV9kYXRhWydrZXknXSkKICAgICAgICBpZiBub3QgdmVyc2lvbnM6CiAgICAgICAgICAgIHNl
bGYuYXBwLnNob3dfcmVzdWx0KCdObyB2ZXJzaW9ucyBmb3VuZCcpCiAgICAgICAgICAgIHJldHVy
bgoKICAgICAgICB2ZXJzaW9uX2xpbmVzID0gW2YiVmVyc2lvbnMgb2Y6IHtmaWxlX2RhdGFbJ25h
bWUnXX1cbiJdCiAgICAgICAgZm9yIGlkeCwgdiBpbiBlbnVtZXJhdGUodmVyc2lvbnMpOgogICAg
ICAgICAgICBpc19sYXRlc3QgPSB2LmdldCgnSXNMYXRlc3QnLCBGYWxzZSkKICAgICAgICAgICAg
bGF0ZXN0X21hcmsgPSAnW0xBVEVTVF0gJyBpZiBpc19sYXRlc3QgZWxzZSAnICAgICAgICAnCiAg
ICAgICAgICAgIHNpemUgPSBzZWxmLmZvcm1hdF9zaXplKHYuZ2V0KCdTaXplJywgMCkpCiAgICAg
ICAgICAgIG10aW1lID0gdi5nZXQoJ0xhc3RNb2RpZmllZCcsICcnKS5zdHJmdGltZSgnJVktJW0t
JWQgJUg6JU06JVMnKSBpZiB2LmdldCgnTGFzdE1vZGlmaWVkJykgZWxzZSAnJwogICAgICAgICAg
ICB2ZXJzaW9uX2lkID0gdi5nZXQoJ1ZlcnNpb25JZCcsICcnKVs6MTJdCiAgICAgICAgICAgIHZl
cnNpb25fbGluZXMuYXBwZW5kKGYie2lkeCArIDF9LiB7bGF0ZXN0X21hcmt9e3ZlcnNpb25faWR9
IHtzaXplOj4xMH0ge210aW1lfSIpCgogICAgICAgIGNvbnRlbnQgPSAnXG4nLmpvaW4odmVyc2lv
bl9saW5lcykKICAgICAgICBjb250ZW50ICs9ICdcblxuVXNlIEYzIHRvIHZpZXcsIEY1IHRvIGNv
cHksIEY4IHRvIGRlbGV0ZSBzZWxlY3RlZCB2ZXJzaW9uJwoKICAgICAgICB2aWV3ZXIgPSBGaWxl
Vmlld2VyRGlhbG9nKGYnVmVyc2lvbnM6IHtmaWxlX2RhdGFbIm5hbWUiXX0nLCBjb250ZW50LCBz
ZWxmLmFwcC5jbG9zZV9kaWFsb2cpCiAgICAgICAgc2VsZi5hcHAuc2hvd19kaWFsb2codmlld2Vy
KQoKICAgIGRlZiBzZWxlY3RfYnlfcGF0dGVybihzZWxmLCBwYXR0ZXJuLCBzZWxlY3Q9VHJ1ZSk6
CiAgICAgICAgIiIi0JLRi9Cx0YDQsNGC0Ywv0YHQvdGP0YLRjCDQstGL0LHQvtGAINGN0LvQtdC8
0LXQvdGC0L7QsiDQv9C+IGdsb2IgcGF0dGVybiAo0YLQvtC70YzQutC+INGE0LDQudC70YspIiIi
CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZWdleF9wYXR0ZXJuID0gZm5tYXRjaC50cmFuc2xh
dGUocGF0dGVybikKICAgICAgICAgICAgcmVnZXggPSByZS5jb21waWxlKHJlZ2V4X3BhdHRlcm4s
IHJlLklHTk9SRUNBU0UpCiAgICAgICAgICAgIGNvdW50ID0gMAoKICAgICAgICAgICAgZm9yIHdp
ZGdldCBpbiBzZWxmLndhbGtlcjoKICAgICAgICAgICAgICAgIHcgPSB3aWRnZXQub3JpZ2luYWxf
d2lkZ2V0CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHcsIFNlbGVjdGFibGVUZXh0KSBh
bmQgdy5kYXRhLmdldCgnY2FuX3NlbGVjdCcpOgogICAgICAgICAgICAgICAgICAgIGl0ZW1fdHlw
ZSA9IHcuZGF0YS5nZXQoJ3R5cGUnKQogICAgICAgICAgICAgICAgICAgIGlmIGl0ZW1fdHlwZSBp
biAoJ2ZzX2ZpbGUnLCAnczNfZmlsZScpOgogICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0g
dy5kYXRhLmdldCgnbmFtZScsICcnKQogICAgICAgICAgICAgICAgICAgICAgICBpZiByZWdleC5t
YXRjaChuYW1lKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcuc2VsZWN0ZWQgPSBzZWxl
Y3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlX2l0ZW1fZGlzcGxheSh3
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gMQoKICAgICAgICAgICAgYWN0
aW9uID0gJ1NlbGVjdGVkJyBpZiBzZWxlY3QgZWxzZSAnVW5zZWxlY3RlZCcKICAgICAgICAgICAg
c2VsZi5hcHAuc2hvd19yZXN1bHQoZid7YWN0aW9ufSB7Y291bnR9IGZpbGVzJykKICAgICAgICBl
eGNlcHQgcmUuZXJyb3I6CiAgICAgICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KCdJbnZhbGlk
IHBhdHRlcm4nKQoKICAgIGRlZiBpbnZlcnRfc2VsZWN0aW9uKHNlbGYpOgogICAgICAgICIiItCY
0L3QstC10YDRgtC40YDQvtCy0LDRgtGMINCy0YvQsdC+0YAgKNGC0L7Qu9GM0LrQviDRhNCw0LnQ
u9GLKSIiIgogICAgICAgIGNvdW50ID0gMAogICAgICAgIGZvciB3aWRnZXQgaW4gc2VsZi53YWxr
ZXI6CiAgICAgICAgICAgIHcgPSB3aWRnZXQub3JpZ2luYWxfd2lkZ2V0CiAgICAgICAgICAgIGlm
IGlzaW5zdGFuY2UodywgU2VsZWN0YWJsZVRleHQpIGFuZCB3LmRhdGEuZ2V0KCdjYW5fc2VsZWN0
Jyk6CiAgICAgICAgICAgICAgICBpdGVtX3R5cGUgPSB3LmRhdGEuZ2V0KCd0eXBlJykKICAgICAg
ICAgICAgICAgIGlmIGl0ZW1fdHlwZSBpbiAoJ2ZzX2ZpbGUnLCAnczNfZmlsZScpOgogICAgICAg
ICAgICAgICAgICAgIHcuc2VsZWN0ZWQgPSBub3Qgdy5zZWxlY3RlZAogICAgICAgICAgICAgICAg
ICAgIHNlbGYudXBkYXRlX2l0ZW1fZGlzcGxheSh3KQogICAgICAgICAgICAgICAgICAgIGlmIHcu
c2VsZWN0ZWQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ICs9IDEKCiAgICAgICAgc2Vs
Zi5hcHAuc2hvd19yZXN1bHQoZidTZWxlY3RlZCB7Y291bnR9IGZpbGVzJykKCiAgICBkZWYgdXBk
YXRlX2l0ZW1fZGlzcGxheShzZWxmLCB0ZXh0X3dpZGdldCk6CiAgICAgICAgaWYgdGV4dF93aWRn
ZXQuc2VsZWN0ZWQ6CiAgICAgICAgICAgIHRleHRfd2lkZ2V0LnNldF90ZXh0KCcqICcgKyB0ZXh0
X3dpZGdldC5nZXRfdGV4dCgpWzBdWzI6XSkKICAgICAgICBlbHNlOgogICAgICAgICAgICB0ZXh0
X3dpZGdldC5zZXRfdGV4dCgnICAnICsgdGV4dF93aWRnZXQuZ2V0X3RleHQoKVswXVsyOl0pCgog
ICAgZGVmIGdldF9zZWxlY3RlZF9pdGVtcyhzZWxmKToKICAgICAgICBzZWxlY3RlZCA9IFtdCiAg
ICAgICAgZm9yIHdpZGdldCBpbiBzZWxmLndhbGtlcjoKICAgICAgICAgICAgdyA9IHdpZGdldC5v
cmlnaW5hbF93aWRnZXQKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh3LCBTZWxlY3RhYmxlVGV4
dCkgYW5kIHcuc2VsZWN0ZWQ6CiAgICAgICAgICAgICAgICBzZWxlY3RlZC5hcHBlbmQody5kYXRh
KQogICAgICAgIHJldHVybiBzZWxlY3RlZAoKICAgIGRlZiBnZXRfZm9jdXNlZF9pdGVtKHNlbGYp
OgogICAgICAgIHRyeToKICAgICAgICAgICAgZm9jdXNfd2lkZ2V0LCBwb3MgPSBzZWxmLmxpc3Ri
b3guZ2V0X2ZvY3VzKCkKICAgICAgICAgICAgaWYgbm90IGZvY3VzX3dpZGdldDoKICAgICAgICAg
ICAgICAgIHJldHVybiBOb25lCgogICAgICAgICAgICAjINCg0LDQt9Cy0L7RgNCw0YfQuNCy0LDQ
tdC8IEF0dHJNYXAg0LXRgdC70Lgg0LXRgdGC0YwKICAgICAgICAgICAgdyA9IGZvY3VzX3dpZGdl
dAogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHcsIHVyd2lkLkF0dHJNYXApOgogICAgICAgICAg
ICAgICAgdyA9IHcub3JpZ2luYWxfd2lkZ2V0CgogICAgICAgICAgICAjINCf0YDQvtCy0LXRgNGP
0LXQvCwg0LXRgdGC0Ywg0LvQuCDRgyDQstC40LTQttC10YLQsCDQsNGC0YDQuNCx0YPRgiBkYXRh
IChTZWxlY3RhYmxlVGV4dCkKICAgICAgICAgICAgIyDQkiDRgNC10LbQuNC80LUg0L/RgNC10LLR
jNGOINGC0LDQvCDQu9C10LbQuNGCIHVyd2lkLlRleHQg0LHQtdC3IGRhdGEKICAgICAgICAgICAg
aWYgaXNpbnN0YW5jZSh3LCBTZWxlY3RhYmxlVGV4dCkgYW5kIGhhc2F0dHIodywgJ2RhdGEnKToK
ICAgICAgICAgICAgICAgIHJldHVybiB3LmRhdGEKCiAgICAgICAgICAgIHJldHVybiBOb25lCiAg
ICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYg
dmlld19pdGVtKHNlbGYpOgogICAgICAgIGZvY3VzZWQgPSBzZWxmLmdldF9mb2N1c2VkX2l0ZW0o
KQogICAgICAgIGlmIG5vdCBmb2N1c2VkOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaXRl
bV90eXBlID0gZm9jdXNlZFsndHlwZSddCgogICAgICAgIGlmIGl0ZW1fdHlwZSA9PSAnZnNfZmls
ZSc6CiAgICAgICAgICAgIGZpbGVfcGF0aCA9IG9zLnBhdGguam9pbihzZWxmLmZzX2Jyb3dzZXIu
Y3VycmVudF9wYXRoLCBmb2N1c2VkWyduYW1lJ10pCiAgICAgICAgICAgIHNlbGYuX3ZpZXdfZmls
ZShmaWxlX3BhdGgsIGZvY3VzZWRbJ25hbWUnXSkKCiAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0g
J3MzX2ZpbGUnOgogICAgICAgICAgICAjINCf0YDQvtCy0LXRgNGP0LXQvCDQutC+0LvQuNGH0LXR
gdGC0LLQviDQstC10YDRgdC40LkKICAgICAgICAgICAgaWYgZm9jdXNlZC5nZXQoJ3ZlcnNpb25f
Y291bnQnLCAxKSA+IDE6CiAgICAgICAgICAgICAgICAjINCf0L7QutCw0LfRi9Cy0LDQtdC8INC0
0LjQsNC70L7QsyDQstGL0LHQvtGA0LAg0LLQtdGA0YHQuNC4CiAgICAgICAgICAgICAgICBzZWxm
LnNob3dfdmVyc2lvbl9zZWxlY3RfZGlhbG9nKGZvY3VzZWQpCiAgICAgICAgICAgIGVsc2U6CiAg
ICAgICAgICAgICAgICAjINCf0YDQvtGB0LzQsNGC0YDQuNCy0LDQtdC8INC10LTQuNC90YHRgtCy
0LXQvdC90YPRjiDQstC10YDRgdC40Y4KICAgICAgICAgICAgICAgIHNlbGYudmlld19zM19maWxl
X3ZlcnNpb24oZm9jdXNlZCkKCiAgICAgICAgZWxpZiBpdGVtX3R5cGUgaW4gKCdmc19kaXInLCAn
czNfZGlyJywgJ2J1Y2tldCcpOgogICAgICAgICAgICBzZWxmLl9jYWxjdWxhdGVfc2l6ZShmb2N1
c2VkKQoKICAgIGRlZiBfdmlld19maWxlKHNlbGYsIGZpbGVfcGF0aCwgdGl0bGUsIGNsb3NlX2Nh
bGxiYWNrPU5vbmUpOgogICAgICAgIHRyeToKICAgICAgICAgICAgY29udGVudCA9ICIiCgogICAg
ICAgICAgICAjINCf0YDQvtCy0LXRgNGP0LXQvCDQvdCwINCx0LjQvdCw0YDQvdC+0YHRgtGMCiAg
ICAgICAgICAgIGlmIGlzX2JpbmFyeV9maWxlKGZpbGVfcGF0aCk6CiAgICAgICAgICAgICAgICAj
INCn0LjRgtCw0LXQvCDQsiDQsdC40L3QsNGA0L3QvtC8INGA0LXQttC40LzQtSDQtNC70Y8gSEVY
INC/0YDQvtGB0LzQvtGC0YDQsAogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAg
ICAgIGZpbGVfc2l6ZSA9IG9zLnBhdGguZ2V0c2l6ZShmaWxlX3BhdGgpCiAgICAgICAgICAgICAg
ICAgICAgY29udGVudCA9IGYiW0JpbmFyeSBmaWxlOiB7dGl0bGV9XVxuRmlsZSBzaXplOiB7Zmls
ZV9zaXplfSBieXRlc1xuXG4iCgogICAgICAgICAgICAgICAgICAgICMg0KfQuNGC0LDQtdC8INC9
0LDRh9Cw0LvQviDRhNCw0LnQu9CwICjQvdCw0L/RgNC40LzQtdGALCDQv9C10YDQstGL0LUgNEtC
INC00LvRjyDQv9GA0L7RgdC80L7RgtGA0LApCiAgICAgICAgICAgICAgICAgICAgcmVhZF9saW1p
dCA9IDQwOTYKICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4oZmlsZV9wYXRoLCAncmInKSBh
cyBmOgogICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gZi5yZWFkKHJlYWRfbGltaXQpCiAg
ICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gc2VsZi5hcHAuZm9ybWF0X2hleF9jb250
ZW50KGRhdGEpCgogICAgICAgICAgICAgICAgICAgIGlmIGZpbGVfc2l6ZSA+IHJlYWRfbGltaXQ6
CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gIlxuXG5bLi4uIEJpbmFyeSBjb250
ZW50IHRydW5jYXRlZCAuLi5dIgoKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMg
ZToKICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gZiJFcnJvciByZWFkaW5nIGJpbmFyeSBm
aWxlOiB7c3RyKGUpfSIKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMg0KLQtdC6
0YHRgtC+0LLRi9C5INGA0LXQttC40LwgKNC60LDQuiDQsdGL0LvQvikKICAgICAgICAgICAgICAg
IHRyeToKICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4oZmlsZV9wYXRoLCAncicsIGVuY29k
aW5nPSd1dGYtOCcsIGVycm9ycz0ncmVwbGFjZScpIGFzIGY6CiAgICAgICAgICAgICAgICAgICAg
ICAgIGNvbnRlbnQgPSBmLnJlYWQoNTAwMDApCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxl
bihjb250ZW50KSA9PSA1MDAwMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQg
Kz0gIlxuXG5bLi4uIEZpbGUgdHJ1bmNhdGVkIC4uLl0iCiAgICAgICAgICAgICAgICBleGNlcHQg
RXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGYiRXJyb3IgcmVh
ZGluZyBmaWxlOiB7c3RyKGUpfSIKCiAgICAgICAgICAgIGRlZiBvbl92aWV3ZXJfY2xvc2UoKToK
ICAgICAgICAgICAgICAgIHNlbGYuYXBwLmNsb3NlX2RpYWxvZygpCiAgICAgICAgICAgICAgICBp
ZiBjbG9zZV9jYWxsYmFjazoKICAgICAgICAgICAgICAgICAgICBjbG9zZV9jYWxsYmFjaygpCgog
ICAgICAgICAgICAjINCY0YHQv9C+0LvRjNC30YPQtdC8INC80L7QvdC+0YjQuNGA0LjQvdC90YvQ
uSDRiNGA0LjRhNGCICjQvtCx0YvRh9C90L4g0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4g0LIg0YLQ
tdGA0LzQuNC90LDQu9C1KQogICAgICAgICAgICB2aWV3ZXIgPSBGaWxlVmlld2VyRGlhbG9nKGYn
Vmlldzoge3RpdGxlfScsIGNvbnRlbnQsIG9uX3ZpZXdlcl9jbG9zZSkKICAgICAgICAgICAgc2Vs
Zi5hcHAuc2hvd19kaWFsb2codmlld2VyLCBoZWlnaHQ9KCdyZWxhdGl2ZScsIDgwKSkKCiAgICAg
ICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmFwcC5zaG93X3Jlc3Vs
dChmJ0Vycm9yIHZpZXdpbmcgZmlsZToge3N0cihlKX0nKQoKICAgIGRlZiBfY2FsY3VsYXRlX3Np
emUoc2VsZiwgaXRlbSk6CiAgICAgICAgIiIi0J/QvtC00YHRh9C10YIg0YDQsNC30LzQtdGA0LAg
0LTQuNGA0LXQutGC0L7RgNC40Lgv0LHQsNC60LXRgtCwL9C/0YHQtdCy0LTQvtC00LjRgNC10LrR
gtC+0YDQuNC4IiIiCiAgICAgICAgaXRlbV90eXBlID0gaXRlbVsndHlwZSddCgogICAgICAgIGRl
ZiBjYWxjdWxhdGVfaW5fdGhyZWFkKCk6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAg
IHRvdGFsX3NpemUgPSAwCiAgICAgICAgICAgICAgICBmaWxlX2NvdW50ID0gMAoKICAgICAgICAg
ICAgICAgIGlmIGl0ZW1fdHlwZSA9PSAnZnNfZGlyJzoKICAgICAgICAgICAgICAgICAgICBkaXJf
cGF0aCA9IG9zLnBhdGguam9pbihzZWxmLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCBpdGVtWydu
YW1lJ10pCiAgICAgICAgICAgICAgICAgICAgZmlsZXMgPSBzZWxmLmZzX2Jyb3dzZXIubGlzdF9h
bGxfZmlsZXMoZGlyX3BhdGgpCiAgICAgICAgICAgICAgICAgICAgZmlsZV9jb3VudCA9IGxlbihm
aWxlcykKICAgICAgICAgICAgICAgICAgICB0b3RhbF9zaXplID0gc3VtKGZbJ3NpemUnXSBmb3Ig
ZiBpbiBmaWxlcykKCiAgICAgICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnczNfZGlyJzoK
ICAgICAgICAgICAgICAgICAgICBvYmplY3RzID0gc2VsZi5zM19tYW5hZ2VyLmxpc3RfYWxsX29i
amVjdHMoc2VsZi5jdXJyZW50X2J1Y2tldCwgaXRlbVsna2V5J10pCiAgICAgICAgICAgICAgICAg
ICAgZmlsZV9jb3VudCA9IGxlbihvYmplY3RzKQogICAgICAgICAgICAgICAgICAgIHRvdGFsX3Np
emUgPSBzdW0ob2JqLmdldCgnU2l6ZScsIDApIGZvciBvYmogaW4gb2JqZWN0cykKCiAgICAgICAg
ICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnYnVja2V0JzoKICAgICAgICAgICAgICAgICAgICBv
YmplY3RzID0gc2VsZi5zM19tYW5hZ2VyLmxpc3RfYWxsX29iamVjdHMoaXRlbVsnbmFtZSddLCAn
JykKICAgICAgICAgICAgICAgICAgICBmaWxlX2NvdW50ID0gbGVuKG9iamVjdHMpCiAgICAgICAg
ICAgICAgICAgICAgdG90YWxfc2l6ZSA9IHN1bShvYmouZ2V0KCdTaXplJywgMCkgZm9yIG9iaiBp
biBvYmplY3RzKQoKICAgICAgICAgICAgICAgIHNlbGYuYXBwLmxvb3AuZHJhd19zY3JlZW4oKQog
ICAgICAgICAgICAgICAgcmVzdWx0X21zZyA9IGYnU2l6ZToge2Zvcm1hdF9zaXplKHRvdGFsX3Np
emUpfSAoe2ZpbGVfY291bnR9IGZpbGVzKScKCiAgICAgICAgICAgICAgICAjINCe0LHQvdC+0LLQ
u9GP0LXQvCBVSSDQuCDQv9GA0LjQvdGD0LTQuNGC0LXQu9GM0L3QviDRgNC40YHRg9C10Lwg0Y3Q
utGA0LDQvQogICAgICAgICAgICAgICAgZGVmIHVwZGF0ZV9yZXN1bHQobG9vcCwgdXNlcl9kYXRh
KToKICAgICAgICAgICAgICAgICAgICBzZWxmLmFwcC5zaG93X3Jlc3VsdChyZXN1bHRfbXNnKQog
ICAgICAgICAgICAgICAgICAgIHNlbGYuYXBwLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICAg
ICAgICAgIHNlbGYuYXBwLmxvb3Auc2V0X2FsYXJtX2luKDAsIHVwZGF0ZV9yZXN1bHQpCgogICAg
ICAgICAgICAgICAgIyDQk9Cb0JDQktCd0J7QlTog0JHRg9C00LjQvCDQvtGB0L3QvtCy0L3QvtC5
INGG0LjQutC7IQogICAgICAgICAgICAgICAgc2VsZi5hcHAud2FrZV91cCgpCgogICAgICAgICAg
ICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBkZWYgc2hvd19lcnJvcihs
b29wPU5vbmUsIHVzZXJfZGF0YT1Ob25lKToKICAgICAgICAgICAgICAgICAgICBzZWxmLmFwcC5z
aG93X3Jlc3VsdChmJ0Vycm9yIGNhbGN1bGF0aW5nIHNpemU6IHtzdHIoZSl9JykKICAgICAgICAg
ICAgICAgICAgICAjIHNlbGYuYXBwLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICAgICAgICAg
IHNlbGYuYXBwLmxvb3Auc2V0X2FsYXJtX2luKDAsIHNob3dfZXJyb3IpCiAgICAgICAgICAgICAg
ICBzZWxmLmFwcC53YWtlX3VwKCkgICMg0JHRg9C00LjQvCDRhtC40LrQuyDQuCDQv9GA0Lgg0L7R
iNC40LHQutC1CgogICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KCdDYWxjdWxhdGluZyBzaXpl
Li4uJykKICAgICAgICB0aHJlYWQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jYWxjdWxhdGVf
aW5fdGhyZWFkKQogICAgICAgIHRocmVhZC5kYWVtb24gPSBUcnVlCiAgICAgICAgdGhyZWFkLnN0
YXJ0KCkKCgpjbGFzcyBJbnB1dERpYWxvZyh1cndpZC5XaWRnZXRXcmFwKToKICAgIGRlZiBfX2lu
aXRfXyhzZWxmLCB0aXRsZSwgcHJvbXB0LCBjYWxsYmFjaywgZGVmYXVsdF90ZXh0PScnKToKICAg
ICAgICBzZWxmLmNhbGxiYWNrID0gY2FsbGJhY2sKICAgICAgICBzZWxmLmVkaXQgPSB1cndpZC5F
ZGl0KHByb21wdCwgZGVmYXVsdF90ZXh0KQoKICAgICAgICBva19idXR0b24gPSB1cndpZC5CdXR0
b24oJ1sgT0sgXScpCiAgICAgICAgY2FuY2VsX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBDYW5j
ZWwgXScpCgogICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFsKG9rX2J1dHRvbiwgJ2NsaWNrJywg
c2VsZi5vbl9vaykKICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChjYW5jZWxfYnV0dG9uLCAn
Y2xpY2snLCBzZWxmLm9uX2NhbmNlbCkKCiAgICAgICAgYnV0dG9ucyA9IHVyd2lkLkNvbHVtbnMo
WwogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICAgICAg
KCdwYWNrJywgdXJ3aWQuQXR0ck1hcChva19idXR0b24sICdidXR0b24nLCBmb2N1c19tYXA9J2J1
dHRvbmZvY3VzJykpLAogICAgICAgICAgICAoJ2ZpeGVkJywgMSwgdXJ3aWQuVGV4dCgnJykpLAog
ICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKGNhbmNlbF9idXR0b24sICdidXR0b24n
LCBmb2N1c19tYXA9J2J1dHRvbmZvY3VzJykpLAogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVy
d2lkLlRleHQoJycpKSwKICAgICAgICBdLCBkaXZpZGVjaGFycz0wKQoKICAgICAgICBjb250ZW50
ID0gWwogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAo
J3BhY2snLCBzZWxmLmVkaXQpLAogICAgICAgIF0KCiAgICAgICAgY29udGVudC5leHRlbmQoWwog
ICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAoJ3BhY2sn
LCBidXR0b25zKSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAg
ICBdKQoKICAgICAgICBwaWxlID0gdXJ3aWQuUGlsZShjb250ZW50KQoKICAgICAgICBmaWxsID0g
dXJ3aWQuRmlsbGVyKHBpbGUpCiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyh1cndpZC5BdHRyTWFw
KHVyd2lkLkxpbmVCb3goZmlsbCwgdGl0bGU9dGl0bGUpLCAnZGlhbG9nJykpCgogICAgZGVmIGtl
eXByZXNzKHNlbGYsIHNpemUsIGtleSk6CiAgICAgICAgaWYga2V5ID09ICdlbnRlcic6CiAgICAg
ICAgICAgIGJ0biA9IGdldF9mb2N1c19idXR0b24oc2VsZi5fdykKICAgICAgICAgICAgaWYgYnRu
IGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShidG4sIHVyd2lkLkJ1
dHRvbikgYW5kIGJ0bi5nZXRfbGFiZWwoKSA9PSAnWyBDYW5jZWwgXSc6CiAgICAgICAgICAgICAg
ICAgICAgIyBFbnRlciDQvdCwIENhbmNlbCAtPiDQvtGC0LzQtdC90LAKICAgICAgICAgICAgICAg
ICAgICBzZWxmLm9uX2NhbmNlbChOb25lKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25l
CiAgICAgICAgICAgICMg0JLRgdC1INC+0YHRgtCw0LvRjNC90YvQtSDRgdC70YPRh9Cw0Lg6IEVu
dGVyIC0+IE9LCiAgICAgICAgICAgIHNlbGYub25fb2soTm9uZSkKICAgICAgICAgICAgcmV0dXJu
IE5vbmUKICAgICAgICBlbGlmIGtleSA9PSAnZXNjJzoKICAgICAgICAgICAgc2VsZi5vbl9jYW5j
ZWwoTm9uZSkKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICByZXR1cm4gc3VwZXIoKS5r
ZXlwcmVzcyhzaXplLCBrZXkpCgogICAgZGVmIG9uX29rKHNlbGYsIGJ1dHRvbik6CiAgICAgICAg
dGV4dCA9IHNlbGYuZWRpdC5nZXRfZWRpdF90ZXh0KCkKICAgICAgICBpZiB0ZXh0LnN0cmlwKCk6
CiAgICAgICAgICAgIHNlbGYuY2FsbGJhY2soVHJ1ZSwgdGV4dC5zdHJpcCgpKQoKICAgIGRlZiBv
bl9jYW5jZWwoc2VsZiwgYnV0dG9uKToKICAgICAgICBzZWxmLmNhbGxiYWNrKEZhbHNlLCBOb25l
KQoKCmNsYXNzIENvbmZpcm1EaWFsb2codXJ3aWQuV2lkZ2V0V3JhcCk6CiAgICBkZWYgX19pbml0
X18oc2VsZiwgdGl0bGUsIG1lc3NhZ2UsIGl0ZW1zX2luZm8sIGNhbGxiYWNrLCBmb2N1c195ZXM9
RmFsc2UpOgogICAgICAgIHNlbGYuY2FsbGJhY2sgPSBjYWxsYmFjawogICAgICAgIHNlbGYuZm9j
dXNfeWVzID0gZm9jdXNfeWVzCgogICAgICAgIHllc19idXR0b24gPSB1cndpZC5CdXR0b24oJ1sg
WWVzIF0nKQogICAgICAgIG5vX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBObyBdJykKCiAgICAg
ICAgdXJ3aWQuY29ubmVjdF9zaWduYWwoeWVzX2J1dHRvbiwgJ2NsaWNrJywgc2VsZi5vbl95ZXMp
CiAgICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwobm9fYnV0dG9uLCAnY2xpY2snLCBzZWxmLm9u
X25vKQoKICAgICAgICBpZiBmb2N1c195ZXM6CiAgICAgICAgICAgIGJ1dHRvbnMgPSB1cndpZC5D
b2x1bW5zKFsKICAgICAgICAgICAgICAgICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4dCgnJykpLAog
ICAgICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcCh5ZXNfYnV0dG9uLCAnYnV0dG9u
JywgZm9jdXNfbWFwPSdidXR0b25mb2N1cycpKSwKICAgICAgICAgICAgICAgICgnZml4ZWQnLCAx
LCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFw
KG5vX2J1dHRvbiwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uZm9jdXMnKSksCiAgICAgICAg
ICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICAgICAgXSwgZGl2
aWRlY2hhcnM9MCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBidXR0b25zID0gdXJ3aWQuQ29s
dW1ucyhbCiAgICAgICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAg
ICAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAobm9fYnV0dG9uLCAnYnV0dG9uJywg
Zm9jdXNfbWFwPSdidXR0b25mb2N1cycpKSwKICAgICAgICAgICAgICAgICgnZml4ZWQnLCAxLCB1
cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKHll
c19idXR0b24sICdidXR0b24nLCBmb2N1c19tYXA9J2J1dHRvbmZvY3VzJykpLAogICAgICAgICAg
ICAgICAgKCd3ZWlnaHQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgIF0sIGRpdmlk
ZWNoYXJzPTApCgogICAgICAgIGNvbnRlbnQgPSBbCiAgICAgICAgICAgICgncGFjaycsIHVyd2lk
LlRleHQobWVzc2FnZSkpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAog
ICAgICAgIF0KCiAgICAgICAgaWYgaXRlbXNfaW5mbzoKICAgICAgICAgICAgY29udGVudC5hcHBl
bmQoKCdwYWNrJywgdXJ3aWQuVGV4dCgiSXRlbXM6IiwgYWxpZ249J2xlZnQnKSkpCiAgICAgICAg
ICAgIG1heF9kaXNwbGF5ID0gMTAKCiAgICAgICAgICAgIGZvciBpdGVtX2luZm8gaW4gaXRlbXNf
aW5mb1s6bWF4X2Rpc3BsYXldOgogICAgICAgICAgICAgICAgY29udGVudC5hcHBlbmQoKCdwYWNr
JywgdXJ3aWQuVGV4dChmIiAge2l0ZW1faW5mb30iKSkpCgogICAgICAgICAgICBpZiBsZW4oaXRl
bXNfaW5mbykgPiBtYXhfZGlzcGxheToKICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kKCgn
cGFjaycsIHVyd2lkLlRleHQoZiIgIC4uLiBhbmQge2xlbihpdGVtc19pbmZvKSAtIG1heF9kaXNw
bGF5fSBtb3JlIikpKQoKICAgICAgICAgICAgY29udGVudC5hcHBlbmQoKCdwYWNrJywgdXJ3aWQu
RGl2aWRlcigpKSkKICAgICAgICBjb250ZW50LmV4dGVuZChbCiAgICAgICAgICAgICgncGFjaycs
IHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgICAgICgncGFjaycsIGJ1dHRvbnMpLAogICAgICAg
ICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgIF0pCgogICAgICAgIHBpbGUg
PSB1cndpZC5QaWxlKGNvbnRlbnQpCgogICAgICAgIGZpbGwgPSB1cndpZC5GaWxsZXIocGlsZSwg
dmFsaWduPSd0b3AnKQogICAgICAgICMgc3VwZXIoKS5fX2luaXRfXyh1cndpZC5BdHRyTWFwKHVy
d2lkLkxpbmVCb3goZmlsbCksICdkaWFsb2cnKSkKICAgICAgICBzdXBlcigpLl9faW5pdF9fKHVy
d2lkLkF0dHJNYXAodXJ3aWQuTGluZUJveChmaWxsLCB0aXRsZT10aXRsZSksICdkaWFsb2cnKSkK
CiAgICBkZWYga2V5cHJlc3Moc2VsZiwgc2l6ZSwga2V5KToKICAgICAgICBpZiBrZXkgPT0gJ2Vu
dGVyJzoKICAgICAgICAgICAgYnRuID0gZ2V0X2ZvY3VzX2J1dHRvbihzZWxmLl93KQogICAgICAg
ICAgICBpZiBidG4gaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGJ0
biwgdXJ3aWQuQnV0dG9uKSBhbmQgYnRuLmdldF9sYWJlbCgpID09ICdbIFllcyBdJzoKICAgICAg
ICAgICAgICAgICAgICBzZWxmLm9uX3llcyhOb25lKQogICAgICAgICAgICAgICAgICAgIHJldHVy
biBOb25lCiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGJ0biwgdXJ3aWQuQnV0dG9uKSBh
bmQgYnRuLmdldF9sYWJlbCgpID09ICdbIE5vIF0nOgogICAgICAgICAgICAgICAgICAgIHNlbGYu
b25fbm8oTm9uZSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAj
INCS0YHQtSDQvtGB0YLQsNC70YzQvdGL0LUg0YHQu9GD0YfQsNC4OiBFbnRlciAtPiBObwogICAg
ICAgICAgICBzZWxmLm9uX25vKE5vbmUpCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAg
ZWxpZiBrZXkgPT0gJ2VzYyc6CiAgICAgICAgICAgIHNlbGYub25fbm8oTm9uZSkKICAgICAgICAg
ICAgcmV0dXJuIE5vbmUKICAgICAgICByZXR1cm4gc3VwZXIoKS5rZXlwcmVzcyhzaXplLCBrZXkp
CgogICAgZGVmIG9uX3llcyhzZWxmLCBidXR0b24pOgogICAgICAgIHNlbGYuY2FsbGJhY2soVHJ1
ZSkKCiAgICBkZWYgb25fbm8oc2VsZiwgYnV0dG9uKToKICAgICAgICBzZWxmLmNhbGxiYWNrKEZh
bHNlKQoKCmNsYXNzIER1YWxQYW5lQXBwOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHMzX2NvbmZp
Zyk6CiAgICAgICAgc2VsZi5zM19jb25maWcgPSBzM19jb25maWcKICAgICAgICBzZWxmLmJvb2tt
YXJrc19tYW5hZ2VyID0gQm9va21hcmtzTWFuYWdlcigpICAjIDwtLS0g0JjQvdC40YbQuNCw0LvQ
uNC30LDRhtC40Y8KCiAgICAgICAgc2VsZi5wcmV2aWV3X21vZGUgPSBGYWxzZQogICAgICAgIHNl
bGYucHJldmlld19jYWNoZSA9IHt9ICMg0JrQtdGIINC00LvRjyDQstC10YDRgdC40LkgUzMge2tl
eTogW3ZlcnNpb25zXX0KICAgICAgICBzZWxmLnByZXZpZXdfdmVyc2lvbl9pbmRleCA9IDAKCiAg
ICAgICAgc2VsZi5sZWZ0X3BhbmVsID0gUGFuZWxXaWRnZXQoJycsIHBhbmVsX3R5cGU9J3Jvb3Rf
bWVudScsIHMzX2NvbmZpZz1zM19jb25maWcsIGFwcD1zZWxmKQogICAgICAgIHNlbGYucmlnaHRf
cGFuZWwgPSBQYW5lbFdpZGdldCgnJywgcGFuZWxfdHlwZT0ncm9vdF9tZW51JywgczNfY29uZmln
PXMzX2NvbmZpZywgYXBwPXNlbGYpCgogICAgICAgIHNlbGYuY29sdW1ucyA9IHVyd2lkLkNvbHVt
bnMoWwogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHNlbGYubGVmdF9wYW5lbCksCiAgICAgICAg
ICAgICgnd2VpZ2h0JywgMSwgc2VsZi5yaWdodF9wYW5lbCkKICAgICAgICBdLCBkaXZpZGVjaGFy
cz0xLCBmb2N1c19jb2x1bW49MCkKCiAgICAgICAgc2VsZi5ob3RrZXlfdGV4dCA9IHVyd2lkLlRl
eHQoCiAgICAgICAgICAgICdGMjpzb3J0IHwgRjM6dmlldyB8IEY0OmluZm8gfCBGNTpjb3B5IHwg
RjY6bW92ZSB8IEY3Om1rZGlyIHwgRjg6ZGVsIHwgRjk6cHVyZ2UgfCBGMTA6cXVpdGUgfCBGMTE6
dmVyc2lvbmluZyB8IC86ZmlsdGVyIHxJTlM6c2VsIHwgKzpzZWxlY3QgfCAtOnVuc2VsIHwgKjpp
bnZlcnQgfCBDdHJsK1Y6UXVpY2sgVmlldyB8IEN0cmwrQjpzYXZlIGJtIHwgQWx0K0I6bG9hZCBi
bScKICAgICAgICApCiAgICAgICAgc2VsZi5yZXN1bHRfdGV4dCA9IHVyd2lkLlRleHQoJycpCgog
ICAgICAgICMg0KHQvtC30LTQsNC10LwgQXR0ck1hcCDQuCDRgdC+0YXRgNCw0L3Rj9C10Lwg0YHR
gdGL0LvQutGDINCyIHNlbGYucmVzdWx0X21hcAogICAgICAgIHNlbGYucmVzdWx0X21hcCA9IHVy
d2lkLkF0dHJNYXAoc2VsZi5yZXN1bHRfdGV4dCwgJ3Jlc3VsdCcpCgogICAgICAgICMg0JjRgdC/
0L7Qu9GM0LfRg9C10Lwg0YHQvtGF0YDQsNC90LXQvdC90YPRjiDQv9C10YDQtdC80LXQvdC90YPR
jiDQv9GA0Lgg0YHQvtC30LTQsNC90LjQuCBQaWxlCiAgICAgICAgc3RhdHVzX2NvbnRlbnQgPSB1
cndpZC5QaWxlKFsKICAgICAgICAgICAgKCdwYWNrJywgc2VsZi5yZXN1bHRfbWFwKSwKICAgICAg
ICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcChzZWxmLmhvdGtleV90ZXh0LCAnc3RhdHVzJykp
CiAgICAgICAgXSkKCiAgICAgICAgIyBzdGF0dXNfY29udGVudCA9IHVyd2lkLlBpbGUoWwogICAg
ICAgICMgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAoc2VsZi5yZXN1bHRfdGV4dCwgJ3Jlc3Vs
dCcpKSwKICAgICAgICAjICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKHNlbGYuaG90a2V5X3Rl
eHQsICdzdGF0dXMnKSkKICAgICAgICAjIF0pCgogICAgICAgIHNlbGYuZnJhbWUgPSB1cndpZC5G
cmFtZSgKICAgICAgICAgICAgdXJ3aWQuQXR0ck1hcChzZWxmLmNvbHVtbnMsICdib2R5JyksCiAg
ICAgICAgICAgIGZvb3Rlcj1zdGF0dXNfY29udGVudAogICAgICAgICkKCiAgICAgICAgc2VsZi5t
YWluX3dpZGdldCA9IHNlbGYuZnJhbWUKCiAgICAgICAgc2VsZi5wYWxldHRlID0gWwogICAgICAg
ICAgICAoJ2hlYWRlcicsICdibGFjaycsICdsaWdodCBjeWFuJywgJ2JvbGQnKSwKICAgICAgICAg
ICAgKCdwYXRoJywgJ3doaXRlJywgJ2RhcmsgY3lhbicpLAogICAgICAgICAgICAoJ21vZGUnLCAn
YmxhY2snLCAnbGlnaHQgY3lhbicpLAogICAgICAgICAgICAoJ2JvZHknLCAnd2hpdGUnLCAnZGFy
ayBibHVlJyksCiAgICAgICAgICAgICgnZmlsZScsICdsaWdodCBncmF5JywgJ2RhcmsgYmx1ZScp
LAogICAgICAgICAgICAoJ3NlbGVjdGVkJywgJ2JsYWNrJywgJ2xpZ2h0IGN5YW4nKSwKICAgICAg
ICAgICAgKCdzdGF0dXMnLCAnYmxhY2snLCAnbGlnaHQgY3lhbicpLAogICAgICAgICAgICAoJ3Jl
c3VsdCcsICd5ZWxsb3cnLCAnZGFyayBibHVlJyksICAjINCe0LHRi9GH0L3Ri9C5CiAgICAgICAg
ICAgICgncmVzdWx0X2Vycm9yJywgJ3doaXRlJywgJ2RhcmsgcmVkJyksICAjINCe0YjQuNCx0LrQ
sAogICAgICAgICAgICAoJ3Jlc3VsdF93YXJuJywgJ2JsYWNrJywgJ3llbGxvdycpLCAgIyDQn9GA
0LXQtNGD0L/RgNC10LbQtNC10L3QuNC1CiAgICAgICAgICAgICgnZGlhbG9nJywgJ2JsYWNrJywg
J2xpZ2h0IGdyYXknKSwKICAgICAgICAgICAgKCdkaWFsb2dmNCcsICd3aGl0ZScsICdkYXJrIGJs
dWUnKSwKICAgICAgICAgICAgKCdkaWFsb2dfdGl0bGUnLCAnYmxhY2snLCAnbGlnaHQgY3lhbicp
LAogICAgICAgICAgICAoJ2VkaXQnLCAnYmxhY2snLCAnbGlnaHQgY3lhbicpLAogICAgICAgICAg
ICAoJ2VkaXRfZm9jdXMnLCAnd2hpdGUnLCAnZGFyayBjeWFuJyksCiAgICAgICAgICAgICgnYnV0
dG9uJywgJ2JsYWNrJywgJ2xpZ2h0IGdyYXknKSwKICAgICAgICAgICAgKCdidXR0b25fZm9jdXMn
LCAnd2hpdGUnLCAnZGFyayBjeWFuJyksCiAgICAgICAgICAgICgnZXJyb3InLCAnbGlnaHQgcmVk
JywgJ2RhcmsgYmx1ZScpLAogICAgICAgICAgICAoJ2luZm9fbmFtZScsICd5ZWxsb3cnLCAnZGFy
ayBibHVlJyksCiAgICAgICAgICAgICgnaW5mb192YWx1ZScsICd3aGl0ZScsICdkYXJrIGJsdWUn
KSwKICAgICAgICBdCgogICAgICAgICMg0J/QtdGA0LXQvNC10L3QvdCw0Y8g0LTQu9GPINGA0LXQ
ttC40LzQsCAi0L/QtdGA0LXQt9Cw0L/QuNGB0LDRgtGMINCy0YHQtSIKICAgICAgICBzZWxmLm92
ZXJ3cml0ZV9hbGwgPSBGYWxzZQogICAgICAgIHNlbGYudmVyc2lvbl9hbGwgPSBGYWxzZQogICAg
ICAgIHNlbGYuc2tpcF9hbGwgPSBGYWxzZQogICAgICAgIGlmIHBsYXRmb3JtLnN5c3RlbSgpICE9
ICdXaW5kb3dzJzoKICAgICAgICAgICAgc2VsZi5waXBlX3IsIHNlbGYucGlwZV93ID0gb3MucGlw
ZSgpCiAgICAgICAgICAgIHNlbGYudXNlX3BpcGUgPSBUcnVlCiAgICAgICAgZWxzZToKICAgICAg
ICAgICAgc2VsZi51c2VfcGlwZSA9IEZhbHNlCgogICAgZGVmIHdha2V1cChzZWxmKToKICAgICAg
ICAiIiLQn9GA0LjQvdGD0LTQuNGC0LXQu9GM0L3QviDRgNCw0LfQsdGD0LTQuNGC0YwgTWFpbkxv
b3Ag0LjQtyDQtNGA0YPQs9C+0LPQviDQv9C+0YLQvtC60LAiIiIKICAgICAgICBpZiBzZWxmLnVz
ZV9waXBlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBvcy53cml0ZShzZWxmLnBp
cGVfdywgYichJykKICAgICAgICAgICAgZXhjZXB0IChPU0Vycm9yLCBBdHRyaWJ1dGVFcnJvcik6
CiAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBGYWxsYmFj
ayDQtNC70Y8gV2luZG93cyDQuNC70Lgg0LXRgdC70LggcGlwZSDQvdC1INC90LDRgdGC0YDQvtC1
0L0KICAgICAgICAgICAgIyDQrdGC0L4g0LzQtdC90LXQtSDRjdGE0YTQtdC60YLQuNCy0L3Qviwg
0L3QviDQu9GD0YfRiNC1LCDRh9C10Lwg0L3QuNGH0LXQs9C+CiAgICAgICAgICAgIHBhc3MKCiAg
ICBkZWYgcnVuKHNlbGYpOgogICAgICAgICMg0KHQvtC30LTQsNC10Lwg0Y3QutGA0LDQvSDRgSDR
j9Cy0L3QvtC5INC/0L7QtNC00LXRgNC20LrQvtC5IFVURi04CiAgICAgICAgc2NyZWVuID0gdXJ3
aWQucmF3X2Rpc3BsYXkuU2NyZWVuKCkKICAgICAgICBzY3JlZW4uc2V0X3Rlcm1pbmFsX3Byb3Bl
cnRpZXMoY29sb3JzPTI1NikKCiAgICAgICAgdXJ3aWQuc2V0X2VuY29kaW5nKCd1dGYtOCcpCgog
ICAgICAgIHNlbGYubG9vcCA9IHVyd2lkLk1haW5Mb29wKAogICAgICAgICAgICBzZWxmLm1haW5f
d2lkZ2V0LAogICAgICAgICAgICBwYWxldHRlPXNlbGYucGFsZXR0ZSwKICAgICAgICAgICAgdW5o
YW5kbGVkX2lucHV0PXNlbGYuaGFuZGxlX2lucHV0LAogICAgICAgICAgICBzY3JlZW49c2NyZWVu
CiAgICAgICAgKQogICAgICAgIGlmIHBsYXRmb3JtLnN5c3RlbSgpID09ICdXaW5kb3dzJzoKICAg
ICAgICAgICAgIyDQktC60LvRjtGH0LDQtdC8ICLRgdC10YDQtNGG0LXQsdC40LXQvdC40LUiINC0
0LvRjyBXaW5kb3dzLCDRh9GC0L7QsdGLINC40L3RgtC10YDRhNC10LnRgSDQvdC1INC30LDQstC4
0YHQsNC7CiAgICAgICAgICAgIHNlbGYubG9vcC5zZXRfYWxhcm1faW4oMC4xLCBzZWxmLl93aW5k
b3dzX2hlYXJ0YmVhdCkKICAgICAgICAjINCf0YvRgtCw0LXQvNGB0Y8g0LjRgdC/0L7Qu9GM0LfQ
vtCy0LDRgtGMINC/0LDQudC/ICjQtNC70Y8gTGludXgpLCDQvdC+INC40LPQvdC+0YDQuNGA0YPQ
tdC8INC+0YjQuNCx0LrQuCDQvdCwIFdpbmRvd3MKICAgICAgICBpZiBzZWxmLnVzZV9waXBlOgog
ICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzZWxmLmxvb3Aud2F0Y2hfZmlsZShzZWxm
LnBpcGVfciwgc2VsZi5sb29wX3dha2V1cF9jYWxsYmFjaykKICAgICAgICAgICAgZXhjZXB0IEV4
Y2VwdGlvbjoKICAgICAgICAgICAgICAgIHBhc3MgICMg0J3QsCBXaW5kb3dzIHdhdGNoX2ZpbGUg
0LTQu9GPINC/0LDQudC/0L7QsiDQvdC1INGA0LDQsdC+0YLQsNC10YIsINGB0YDQsNCx0L7RgtCw
0LXRgiBoZWFydGJlYXQKCiAgICAgICAgc2VsZi5sb29wLnJ1bigpCgogICAgZGVmIGNvbmZpcm1f
ZXhpdChzZWxmKToKICAgICAgICAiIiLQn9C+0LrQsNC30YvQstCw0LXRgiDQtNC40LDQu9C+0LMg
0L/QvtC00YLQstC10YDQttC00LXQvdC40Y8g0LLRi9GF0L7QtNCwINC40Lcg0L/RgNC+0LPRgNCw
0LzQvNGLLiIiIgogICAgICAgIGRlZiBjYWxsYmFjayhjb25maXJtZWQpOgogICAgICAgICAgICBz
ZWxmLmNsb3NlX2RpYWxvZygpCiAgICAgICAgICAgIGlmIGNvbmZpcm1lZDoKICAgICAgICAgICAg
ICAgIHJhaXNlIHVyd2lkLkV4aXRNYWluTG9vcCgpCgogICAgICAgIGRpYWxvZyA9IENvbmZpcm1E
aWFsb2coCiAgICAgICAgICAgICJRdWl0IiwKICAgICAgICAgICAgIkRvIHlvdSByZWFsbHkgd2Fu
dCB0byBxdWl0PyIsCiAgICAgICAgICAgIFtdLAogICAgICAgICAgICBjYWxsYmFjaywKICAgICAg
ICAgICAgZm9jdXNfeWVzPVRydWUKICAgICAgICApCiAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhk
aWFsb2csIHdpZHRoPSgncmVsYXRpdmUnLCA0MCksIGhlaWdodD0oJ3JlbGF0aXZlJywgMTApKQoK
ICAgIGRlZiB0b2dnbGVfcHJldmlld19tb2RlKHNlbGYpOgogICAgICAgIHNlbGYucHJldmlld19t
b2RlID0gbm90IHNlbGYucHJldmlld19tb2RlCiAgICAgICAgaWYgc2VsZi5wcmV2aWV3X21vZGU6
CiAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoIlByZXZpZXcgTW9kZTogT04iKQogICAgICAg
ICAgICBzZWxmLnVwZGF0ZV9wcmV2aWV3KCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxm
LnNob3dfcmVzdWx0KCJQcmV2aWV3IE1vZGU6IE9GRiIpCiAgICAgICAgICAgICMg0J7Rh9C40YnQ
sNC10Lwg0L3QtdCw0LrRgtC40LLQvdGD0Y4g0L/QsNC90LXQu9GMICjQuNC70Lgg0LLQvtGB0YHR
gtCw0L3QsNCy0LvQuNCy0LDQtdC8INC10ZEg0YHQvtGB0YLQvtGP0L3QuNC1PykKICAgICAgICAg
ICAgIyDQntCx0YvRh9C90L4gUXVpY2tMb29rINC/0YDQvtGB0YLQviDQv9C10YDQtdC60YDRi9Cy
0LDQtdGCINC90LXQsNC60YLQuNCy0L3Rg9GOINC/0LDQvdC10LvRjCDQuNC70Lgg0LjRgdC/0L7Q
u9GM0LfRg9C10YIg0LXRkS4KICAgICAgICAgICAgIyDQldGB0LvQuCDQvNGLINC40YHQv9C+0LvR
jNC30YPQtdC8INC90LXQsNC60YLQuNCy0L3Rg9GOINC/0LDQvdC10LvRjCwg0L3QsNC8INC90YPQ
ttC90L4g0LXQtSAi0LfQsNC80L7RgNC+0LfQuNGC0YwiINC40LvQuCDQstGA0LXQvNC10L3QvdC+
INC30LDQvNC10L3QuNGC0Ywg0LrQvtC90YLQtdC90YIuCgogICAgICAgICAgICAjINCf0YDQvtGB
0YLQtdC50YjQuNC5INCy0LDRgNC40LDQvdGCOiDQstC10YDQvdGD0YLRjCDQvdC10LDQutGC0LjQ
stC90YPRjiDQv9Cw0L3QtdC70Ywg0LIg0L3QvtGA0LzQsNC70YzQvdGL0Lkg0YDQtdC20LjQvCAo
0L7QsdC90L7QstC40YLRjCkKICAgICAgICAgICAgaW5hY3RpdmUgPSBzZWxmLmdldF9pbmFjdGl2
ZV9wYW5lbCgpCiAgICAgICAgICAgIGluYWN0aXZlLnJlZnJlc2goKSAgIyDQktC+0YHRgdGC0LDQ
vdC+0LLQuNGCINGB0L/QuNGB0L7QuiDRhNCw0LnQu9C+0LIKCiAgICBkZWYgdXBkYXRlX3ByZXZp
ZXcoc2VsZik6CiAgICAgICAgaWYgbm90IHNlbGYucHJldmlld19tb2RlOgogICAgICAgICAgICBy
ZXR1cm4KCiAgICAgICAgYWN0aXZlX3BhbmVsID0gc2VsZi5nZXRfYWN0aXZlX3BhbmVsKCkKICAg
ICAgICBpbmFjdGl2ZV9wYW5lbCA9IHNlbGYuZ2V0X2luYWN0aXZlX3BhbmVsKCkKCiAgICAgICAg
aXRlbSA9IGFjdGl2ZV9wYW5lbC5nZXRfZm9jdXNlZF9pdGVtKCkKICAgICAgICBpZiBub3QgaXRl
bToKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgbm90IGl0ZW0gb3IgaXRlbVsndHlwZSdd
IG5vdCBpbiAoJ2ZzX2ZpbGUnLCAnczNfZmlsZScpOgogICAgICAgICAgICBzZWxmLl9zaG93X3By
ZXZpZXdfdGV4dChpbmFjdGl2ZV9wYW5lbCwgIiIsIHRpdGxlPSJQcmV2aWV3IikKICAgICAgICAg
ICAgcmV0dXJuCgogICAgICAgIHRyeToKICAgICAgICAgICAgc2l6ZSA9IGludChpdGVtLmdldCgn
c2l6ZScsIDApKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgc2l6ZSA9IDAKCiAgICAgICAg
aWYgc2l6ZSA+IDEwMjQgKiAxMDA6CiAgICAgICAgICAgIHNlbGYuX3Nob3dfcHJldmlld190ZXh0
KGluYWN0aXZlX3BhbmVsLCAiRmlsZSB0b28gbGFyZ2UgZm9yIHByZXZpZXciLCB0aXRsZT0iUHJl
dmlldyIpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBjb250ZW50ID0gIiIKICAgICAgICBp
bmZvX3RleHQgPSBmIlBSRVZJRVc6IHtpdGVtWyduYW1lJ119IgogICAgICAgIGxvY2FsX3BhdGgg
PSBOb25lCiAgICAgICAgdGVtcF9maWxlX3BhdGggPSBOb25lCgogICAgICAgIHRyeToKICAgICAg
ICAgICAgIyAxLiDQn9C+0LvRg9GH0LDQtdC8INC/0YPRgtGMINC6INGE0LDQudC70YMKICAgICAg
ICAgICAgaWYgaXRlbVsndHlwZSddID09ICdmc19maWxlJzoKICAgICAgICAgICAgICAgIGxvY2Fs
X3BhdGggPSBvcy5wYXRoLmpvaW4oYWN0aXZlX3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRo
LCBpdGVtWyduYW1lJ10pCgogICAgICAgICAgICBlbGlmIGl0ZW1bJ3R5cGUnXSA9PSAnczNfZmls
ZSc6CiAgICAgICAgICAgICAgICBpbXBvcnQgdGVtcGZpbGUKICAgICAgICAgICAgICAgICMg0KHQ
vtC30LTQsNC10Lwg0LLRgNC10LzQtdC90L3Ri9C5INGE0LDQudC7CiAgICAgICAgICAgICAgICBm
ZCwgdGVtcF9maWxlX3BhdGggPSB0ZW1wZmlsZS5ta3N0ZW1wKCkKICAgICAgICAgICAgICAgIG9z
LmNsb3NlKGZkKQoKICAgICAgICAgICAgICAgIGFjdGl2ZV9wYW5lbC5zM19tYW5hZ2VyLmRvd25s
b2FkX29iamVjdCgKICAgICAgICAgICAgICAgICAgICBhY3RpdmVfcGFuZWwuY3VycmVudF9idWNr
ZXQsCiAgICAgICAgICAgICAgICAgICAgaXRlbVsna2V5J10sCiAgICAgICAgICAgICAgICAgICAg
dGVtcF9maWxlX3BhdGgKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGxvY2FsX3Bh
dGggPSB0ZW1wX2ZpbGVfcGF0aAogICAgICAgICAgICAgICAgaW5mb190ZXh0ID0gZiJQUkVWSUVX
IChTMyk6IHtpdGVtWyduYW1lJ119IgoKICAgICAgICAgICAgIyAyLiDQp9C40YLQsNC10Lwg0LrQ
vtC90YLQtdC90YIKICAgICAgICAgICAgaWYgbG9jYWxfcGF0aCBhbmQgb3MucGF0aC5leGlzdHMo
bG9jYWxfcGF0aCk6CiAgICAgICAgICAgICAgICAjINCf0YDQvtCy0LXRgNGP0LXQvCDQvdCwINCx
0LjQvdCw0YDQvdC+0YHRgtGMICjRhNGD0L3QutGG0LjRjyDQs9C70L7QsdCw0LvRjNC90LDRjyDQ
uNC70Lgg0LzQtdGC0L7QtNCwINC60LvQsNGB0YHQsCkKICAgICAgICAgICAgICAgIGlmIGlzX2Jp
bmFyeV9maWxlKGxvY2FsX3BhdGgpOgogICAgICAgICAgICAgICAgICAgIHdpdGggb3Blbihsb2Nh
bF9wYXRoLCAncmInKSBhcyBmOgogICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gZi5yZWFk
KDIwNDgpCiAgICAgICAgICAgICAgICAgICAgICAgICMg0JLQq9CX0J7QkiDQpNCj0J3QmtCm0JjQ
mCDQpNCe0KDQnNCQ0KLQmNCg0J7QktCQ0J3QmNCvCiAgICAgICAgICAgICAgICAgICAgICAgICMg
0JXRgdC70LggZm9ybWF0X2hleF9jb250ZW50INGN0YLQviDQvNC10YLQvtC0INC60LvQsNGB0YHQ
sCBEdWFsUGFuZUFwcDoKICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IHNlbGYuZm9y
bWF0X2hleF9jb250ZW50KGRhdGEpCgogICAgICAgICAgICAgICAgICAgICAgICBpZiBzaXplID4g
MjA0ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gIlxuLi4uIFRydW5j
YXRlZCAuLi4iCiAgICAgICAgICAgICAgICAgICAgaW5mb190ZXh0ICs9ICIgW0hFWF0iCiAgICAg
ICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMg0KLQtdC60YHRgtC+0LLRi9C5
INGA0LXQttC40LwKICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4obG9jYWxfcGF0aCwgJ3In
LCBlbmNvZGluZz0ndXRmLTgnLCBlcnJvcnM9J3JlcGxhY2UnKSBhcyBmOgogICAgICAgICAgICAg
ICAgICAgICAgICBjb250ZW50ID0gZi5yZWFkKDIwMDApCgogICAgICAgIGV4Y2VwdCBFeGNlcHRp
b24gYXMgZToKICAgICAgICAgICAgY29udGVudCA9IGYiRXJyb3IgZ2VuZXJhdGluZyBwcmV2aWV3
OiB7ZX0iCgogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICMg0KPQtNCw0LvRj9C10Lwg0LLR
gNC10LzQtdC90L3Ri9C5INGE0LDQudC7CiAgICAgICAgICAgIGlmIHRlbXBfZmlsZV9wYXRoIGFu
ZCBvcy5wYXRoLmV4aXN0cyh0ZW1wX2ZpbGVfcGF0aCk6CiAgICAgICAgICAgICAgICB0cnk6CiAg
ICAgICAgICAgICAgICAgICAgb3MudW5saW5rKHRlbXBfZmlsZV9wYXRoKQogICAgICAgICAgICAg
ICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgc2VsZi5fc2hvd19w
cmV2aWV3X3RleHQoaW5hY3RpdmVfcGFuZWwsIGNvbnRlbnQsIHRpdGxlPWluZm9fdGV4dCkKCiAg
ICBkZWYgZm9ybWF0X2hleF9jb250ZW50KHNlbGYsIGRhdGEsIG9mZnNldD0wKToKICAgICAgICAi
IiLQpNC+0YDQvNCw0YLQuNGA0YPQtdGCINCx0LDQudGC0Ysg0LIgaGV4LdCy0LjQtCAo0LrQsNC6
INCyIG1jKSIiIgogICAgICAgIGxpbmVzID0gW10KICAgICAgICBmb3IgaSBpbiByYW5nZSgwLCBs
ZW4oZGF0YSksIDE2KToKICAgICAgICAgICAgY2h1bmsgPSBkYXRhW2k6aSArIDE2XQoKICAgICAg
ICAgICAgIyAxLiDQodC80LXRidC10L3QuNC1CiAgICAgICAgICAgIGxpbmVfb2Zmc2V0ID0gZiJ7
b2Zmc2V0ICsgaTowOFh9IgoKICAgICAgICAgICAgIyAyLiBIRVgg0YfQsNGB0YLRjCAo0LPRgNGD
0L/Qv9Cw0LzQuCDQv9C+IDQg0LHQsNC50YLQsCwg0LrQsNC6INCyINC/0YDQuNC80LXRgNC1KQog
ICAgICAgICAgICBoZXhfcGFydHMgPSBbXQogICAgICAgICAgICBmb3IgaiBpbiByYW5nZSgwLCBs
ZW4oY2h1bmspLCA0KToKICAgICAgICAgICAgICAgIGdyb3VwID0gY2h1bmtbajpqICsgNF0KICAg
ICAgICAgICAgICAgIGhleF9ncm91cCA9ICIgIi5qb2luKGYie2I6MDJYfSIgZm9yIGIgaW4gZ3Jv
dXApCiAgICAgICAgICAgICAgICBoZXhfcGFydHMuYXBwZW5kKGhleF9ncm91cCkKCiAgICAgICAg
ICAgICMg0KHQvtCx0LjRgNCw0LXQvCBoZXgg0YHRgtGA0L7QutGDINC4INC00L7Qv9C+0LvQvdGP
0LXQvCDQv9GA0L7QsdC10LvQsNC80Lgg0LTQviDRhNC40LrRgdC40YDQvtCy0LDQvdC90L7QuSDR
iNC40YDQuNC90YsgKDQg0LPRgNGD0L/Qv9GLINC/0L4gfjExINGB0LjQvNCy0L7Qu9C+0LIgKyDQ
vtGC0YHRgtGD0L/RiykKICAgICAgICAgICAgIyAxNiDQsdCw0LnRgiA9IDQg0LPRgNGD0L/Qv9GL
LiDQlNC70LjQvdCwINC/0L7Qu9C90L7QuSDRgdGC0YDQvtC60Lg6IDExKjQgKyAzKjIgKNC/0YDQ
vtCx0LXQu9GLKSA9IDUwPwogICAgICAgICAgICAjINCf0YDQvtGJ0LUg0LjRgdC/0L7Qu9GM0LfQ
vtCy0LDRgtGMINGE0LjQutGB0LjRgNC+0LLQsNC90L3Ri9C5INC+0YLRgdGC0YPQvy4KICAgICAg
ICAgICAgaGV4X3N0ciA9ICIgICIuam9pbihoZXhfcGFydHMpCgogICAgICAgICAgICAjIDMuIEFT
Q0lJINGH0LDRgdGC0YwKICAgICAgICAgICAgYXNjaWlfc3RyID0gIiIKICAgICAgICAgICAgZm9y
IGIgaW4gY2h1bms6CiAgICAgICAgICAgICAgICBpZiAzMiA8PSBiIDw9IDEyNjogICMg0J/QtdGH
0LDRgtC90YvQtSDRgdC40LzQstC+0LvRiwogICAgICAgICAgICAgICAgICAgIGFzY2lpX3N0ciAr
PSBjaHIoYikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYXNjaWlf
c3RyICs9ICIuIgoKICAgICAgICAgICAgIyDQpNC+0YDQvNC40YDRg9C10Lwg0YHRgtGA0L7QutGD
OiBPZmZzZXQgIEhleCAgQXNjaWkKICAgICAgICAgICAgIyA8NDkg0LPQsNGA0LDQvdGC0LjRgNGD
0LXRgiDQstGL0YDQsNCy0L3QuNCy0LDQvdC40LUsINC10YHQu9C4INGB0YLRgNC+0LrQsCDQutC+
0YDQvtGH0LUgMTYg0LHQsNC50YIKICAgICAgICAgICAgbGluZXMuYXBwZW5kKGYie2xpbmVfb2Zm
c2V0fSB7aGV4X3N0cjo8NDl9IHthc2NpaV9zdHJ9IikKCiAgICAgICAgcmV0dXJuICJcbiIuam9p
bihsaW5lcykKCiAgICBkZWYgX3Nob3dfcHJldmlld190ZXh0KHNlbGYsIHBhbmVsLCB0ZXh0LCB0
aXRsZT0iUHJldmlldyIpOgogICAgICAgICMg0JfQsNC80LXQvdGP0LXQvCDRgdC+0LTQtdGA0LbQ
uNC80L7QtSDQv9Cw0L3QtdC70Lgg0L3QsCDRgtC10LrRgdGCCiAgICAgICAgIyDQnNGLINC90LUg
0YXQvtGC0LjQvCDQu9C+0LzQsNGC0YwgUGFuZWxXaWRnZXQsINC/0L7RjdGC0L7QvNGDINC/0YDQ
vtGB0YLQviDQv9C+0LTQvNC10L3QuNC8INGB0L/QuNGB0L7QuiDQvdCwIFRleHRXaWRnZXQKICAg
ICAgICAjINCd0L4gUGFuZWxXaWRnZXQg0L7QttC40LTQsNC10YIgTGlzdEJveC4KCiAgICAgICAg
IyDQodC+0LfQtNCw0LXQvCDQstGA0LXQvNC10L3QvdGL0Lkgd2Fsa2VyINGBINC+0LTQvdC40Lwg
0Y3Qu9C10LzQtdC90YLQvtC8IFRleHQKICAgICAgICBwcmV2aWV3X3dpZGdldCA9IHVyd2lkLlRl
eHQodGV4dCkKICAgICAgICAjINCe0LHQvtGA0LDRh9C40LLQsNC10Lwg0LIgTGlzdEJveCwg0YfR
gtC+0LHRiyBQYW5lbFdpZGdldCDQvdC1INGD0L/QsNC7INC/0YDQuCDRgNC10YHQsNC50LfQtSDQ
uNC70Lgg0YTQvtC60YPRgdC1CiAgICAgICAgcGFuZWwud2Fsa2VyLmNsZWFyKCkKICAgICAgICBw
YW5lbC53YWxrZXIuYXBwZW5kKHByZXZpZXdfd2lkZ2V0KQogICAgICAgIHBhbmVsLmhlYWRlcl90
ZXh0LnNldF90ZXh0KHRpdGxlKQoKICAgICAgICBwYW5lbC5wYXRoX3RleHQuc2V0X3RleHQoIiIp
ICAjINCe0YfQuNGJ0LDQtdC8INC/0YPRgtGMLCDRh9GC0L7QsdGLINC90LUg0YHQsdC40LLQsNC7
0L4KCiAgICBkZWYgYWRkX2N1cnJlbnRfdG9fYm9va21hcmtzKHNlbGYpOgogICAgICAgIGlmIHNl
bGYubG9vcC53aWRnZXQgIT0gc2VsZi5tYWluX3dpZGdldDoKICAgICAgICAgICAgcmV0dXJuCgog
ICAgICAgIHBhbmVsID0gc2VsZi5nZXRfYWN0aXZlX3BhbmVsKCkKCiAgICAgICAgYm9va21hcmtf
ZGF0YSA9IHt9CiAgICAgICAgZGVmYXVsdF9uYW1lID0gIiIKCiAgICAgICAgaWYgcGFuZWwubW9k
ZSA9PSAnZnMnOgogICAgICAgICAgICBwYXRoID0gcGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3Bh
dGgKICAgICAgICAgICAgYm9va21hcmtfZGF0YSA9IHsndHlwZSc6ICdmcycsICdwYXRoJzogcGF0
aH0KICAgICAgICAgICAgIyBkZWZhdWx0X25hbWUgPSBvcy5wYXRoLmJhc2VuYW1lKHBhdGgpIG9y
IHBhdGgKICAgICAgICAgICAgZGVmYXVsdF9uYW1lID0gcGF0aAogICAgICAgIGVsaWYgcGFuZWwu
bW9kZSA9PSAnczMnOgogICAgICAgICAgICBpZiBub3QgcGFuZWwuY3VycmVudF9lbmRwb2ludDoK
ICAgICAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoIkNhbm5vdCBib29rbWFyayByb290IGxp
c3QiLCAiZXJyb3IiKQogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICBib29rbWFy
a19kYXRhID0gewogICAgICAgICAgICAgICAgJ3R5cGUnOiAnczMnLAogICAgICAgICAgICAgICAg
J2VuZHBvaW50JzogcGFuZWwuY3VycmVudF9lbmRwb2ludCwgICMg0JjQvNGPINGN0L3QtNC/0L7Q
uNC90YLQsAogICAgICAgICAgICAgICAgJ2J1Y2tldCc6IHBhbmVsLmN1cnJlbnRfYnVja2V0LAog
ICAgICAgICAgICAgICAgJ3ByZWZpeCc6IHBhbmVsLmN1cnJlbnRfcHJlZml4CiAgICAgICAgICAg
IH0KICAgICAgICAgICAgIyDQpNC+0YDQvNC40YDRg9C10Lwg0LrRgNCw0YHQuNCy0L7QtSDQuNC8
0Y8KICAgICAgICAgICAgaWYgcGFuZWwuY3VycmVudF9idWNrZXQ6CiAgICAgICAgICAgICAgICBk
ZWZhdWx0X25hbWUgPSBmIlt7cGFuZWwuY3VycmVudF9lbmRwb2ludH1dIC97cGFuZWwuY3VycmVu
dF9idWNrZXR9IgogICAgICAgICAgICAgICAgaWYgcGFuZWwuY3VycmVudF9wcmVmaXg6CiAgICAg
ICAgICAgICAgICAgICAgZGVmYXVsdF9uYW1lICs9IGYiL3twYW5lbC5jdXJyZW50X3ByZWZpeH0i
CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBkZWZhdWx0X25hbWUgPSBmIlt7cGFu
ZWwuY3VycmVudF9lbmRwb2ludH1dIgoKICAgICAgICBkZWYgb25fY29uZmlybShjb25maXJtZWQs
IG5hbWUpOgogICAgICAgICAgICBzZWxmLmNsb3NlX2RpYWxvZygpCiAgICAgICAgICAgIGlmIGNv
bmZpcm1lZCBhbmQgbmFtZToKICAgICAgICAgICAgICAgIHNlbGYuYm9va21hcmtzX21hbmFnZXIu
YWRkKG5hbWUsIGJvb2ttYXJrX2RhdGEpCiAgICAgICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0
KGYiQm9va21hcmsgJ3tuYW1lfScgYWRkZWQiKQoKICAgICAgICBkaWFsb2cgPSBJbnB1dERpYWxv
ZygiQWRkIEJvb2ttYXJrIiwgIk5hbWU6Iiwgb25fY29uZmlybSwgZGVmYXVsdF90ZXh0PWRlZmF1
bHRfbmFtZSkKICAgICAgICBzZWxmLnNob3dfZGlhbG9nKGRpYWxvZykKCiAgICBkZWYgc2hvd19i
b29rbWFya3NfZGlhbG9nKHNlbGYpOgogICAgICAgIGlmIHNlbGYubG9vcC53aWRnZXQgIT0gc2Vs
Zi5tYWluX3dpZGdldDoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICMg0J/QvtC70YPRh9Cw
0LXQvCDQsNC60YLRg9Cw0LvRjNC90YvQuSDRgdC/0LjRgdC+0LogKNC+0L0g0LzQvtC20LXRgiDQ
vNC10L3Rj9GC0YzRgdGPKQogICAgICAgIGJvb2ttYXJrcyA9IHNlbGYuYm9va21hcmtzX21hbmFn
ZXIuYm9va21hcmtzCiAgICAgICAgaWYgbm90IGJvb2ttYXJrczoKICAgICAgICAgICAgc2VsZi5z
aG93X3Jlc3VsdCgiTm8gYm9va21hcmtzIGZvdW5kIiwgIndhcm5pbmciKQogICAgICAgICAgICBy
ZXR1cm4KCiAgICAgICAgZGVmIHNlbGVjdF9jYWxsYmFjayhibV9kYXRhKToKICAgICAgICAgICAg
c2VsZi5jbG9zZV9kaWFsb2coKQogICAgICAgICAgICBpZiBibV9kYXRhOgogICAgICAgICAgICAg
ICAgc2VsZi5qdW1wX3RvX2Jvb2ttYXJrKGJtX2RhdGEpCgogICAgICAgIGRlZiByZW1vdmVfaGFu
ZGxlcihpbmRleCk6CiAgICAgICAgICAgICMgMS4g0JfQsNC/0L7QvNC40L3QsNC10LwsINC60LDQ
utGD0Y4g0LfQsNC60LvQsNC00LrRgyDRg9C00LDQu9GP0LXQvAogICAgICAgICAgICBibV90b19k
ZWxldGUgPSBib29rbWFya3NbaW5kZXhdCgogICAgICAgICAgICAjIDIuINCe0L/RgNC10LTQtdC7
0Y/QtdC8INGE0YPQvdC60YbQuNGOINC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNGPCiAgICAgICAg
ICAgIGRlZiBjb25maXJtX2NhbGxiYWNrKGNvbmZpcm1lZCk6CiAgICAgICAgICAgICAgICBzZWxm
LmNsb3NlX2RpYWxvZygpICAjINCX0LDQutGA0YvQstCw0LXQvCBDb25maXJtRGlhbG9nCgogICAg
ICAgICAgICAgICAgaWYgY29uZmlybWVkOgogICAgICAgICAgICAgICAgICAgIHNlbGYuYm9va21h
cmtzX21hbmFnZXIucmVtb3ZlKGluZGV4KQogICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd19y
ZXN1bHQoZiJCb29rbWFyayAne2JtX3RvX2RlbGV0ZVsnbmFtZSddfScgZGVsZXRlZCIpCgogICAg
ICAgICAgICAgICAgIyAzLiDQkiDQm9Cu0JHQntCcINCh0JvQo9Cn0JDQlSDRgdC90L7QstCwINC+
0YLQutGA0YvQstCw0LXQvCDQtNC40LDQu9C+0LMg0LfQsNC60LvQsNC00L7QugogICAgICAgICAg
ICAgICAgIyAo0YfRgtC+0LHRiyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LzQvtCzINC/0YDQ
vtC00L7Qu9C20LjRgtGMINGA0LDQsdC+0YLRgyDQuNC70Lgg0YPQstC40LTQtdGC0Ywg0L7QsdC9
0L7QstC70LXQvdC90YvQuSDRgdC/0LjRgdC+0LopCiAgICAgICAgICAgICAgICAjINCY0YHQv9C+
0LvRjNC30YPQtdC8IGFsYXJtLCDRh9GC0L7QsdGLINC00LDRgtGMIFVJINC+0YLQtNC+0YXQvdGD
0YLRjCAo0L7Qv9GG0LjQvtC90LDQu9GM0L3Qviwg0L3QviDQvdCw0LTQtdC20L3QtdC1KQogICAg
ICAgICAgICAgICAgc2VsZi5sb29wLnNldF9hbGFybV9pbigwLCBsYW1iZGEgKmE6IHNlbGYuc2hv
d19ib29rbWFya3NfZGlhbG9nKCkpCgogICAgICAgICAgICAjIDMuINCX0LDQutGA0YvQstCw0LXQ
vCDRgtC10LrRg9GJ0LjQuSDQtNC40LDQu9C+0LMg0LfQsNC60LvQsNC00L7QugogICAgICAgICAg
ICBzZWxmLmNsb3NlX2RpYWxvZygpCgogICAgICAgICAgICAjIDQuINCf0L7QutCw0LfRi9Cy0LDQ
tdC8INC00LjQsNC70L7QsyDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjRjwogICAgICAgICAgICBj
b25maXJtX2RsZyA9IENvbmZpcm1EaWFsb2coCiAgICAgICAgICAgICAgICAiRGVsZXRlIEJvb2tt
YXJrIiwKICAgICAgICAgICAgICAgIGYiRGVsZXRlIGJvb2ttYXJrICd7Ym1fdG9fZGVsZXRlWydu
YW1lJ119Jz8iLAogICAgICAgICAgICAgICAgW10sCiAgICAgICAgICAgICAgICBjb25maXJtX2Nh
bGxiYWNrLAogICAgICAgICAgICAgICAgZm9jdXNfeWVzPUZhbHNlICAjINCR0LXQt9C+0L/QsNGB
0L3Qvjog0YTQvtC60YPRgSDQvdCwIE5vCiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZi5z
aG93X2RpYWxvZyhjb25maXJtX2RsZykKCiAgICAgICAgIyDQodC+0LfQtNCw0LXQvCDQuCDQv9C+
0LrQsNC30YvQstCw0LXQvCDQtNC40LDQu9C+0LMKICAgICAgICBkaWFsb2cgPSBCb29rbWFya3NE
aWFsb2coYm9va21hcmtzLCBzZWxlY3RfY2FsbGJhY2ssIHJlbW92ZV9jYWxsYmFjaz1yZW1vdmVf
aGFuZGxlcikKICAgICAgICBzZWxmLnNob3dfZGlhbG9nKGRpYWxvZywgd2lkdGg9KCdyZWxhdGl2
ZScsIDcwKSwgaGVpZ2h0PSgncmVsYXRpdmUnLCA2MCkpCgogICAgZGVmIGp1bXBfdG9fYm9va21h
cmsoc2VsZiwgYm1fZGF0YSk6CiAgICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQogICAgICAgIHBh
bmVsID0gc2VsZi5nZXRfYWN0aXZlX3BhbmVsKCkKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBp
ZiBibV9kYXRhWyd0eXBlJ10gPT0gJ2ZzJzoKCiAgICAgICAgICAgICAgICAjINCY0L3QuNGG0LjQ
sNC70LjQt9C40YDRg9C10LwgZnNfYnJvd3Nlciwg0LXRgdC70Lgg0LXQs9C+INC90LXRggogICAg
ICAgICAgICAgICAgaWYgcGFuZWwuZnNfYnJvd3NlciBpcyBOb25lOgogICAgICAgICAgICAgICAg
ICAgICMg0KPQsdC10LTQuNGC0LXRgdGMLCDRh9GC0L4g0LrQu9Cw0YHRgSBGaWxlU3lzdGVtQnJv
d3NlciDQuNC80L/QvtGA0YLQuNGA0L7QstCw0L0g0LjQu9C4INC00L7RgdGC0YPQv9C10L0KICAg
ICAgICAgICAgICAgICAgICBwYW5lbC5mc19icm93c2VyID0gRmlsZVN5c3RlbUJyb3dzZXIoKQoK
ICAgICAgICAgICAgICAgIHBhbmVsLm1vZGUgPSAnZnMnCiAgICAgICAgICAgICAgICAjINCf0YDQ
vtCy0LXRgNC60LAg0YHRg9GJ0LXRgdGC0LLQvtCy0LDQvdC40Y8g0L/Rg9GC0LgKICAgICAgICAg
ICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKGJtX2RhdGFbJ3BhdGgnXSk6CiAgICAgICAgICAgICAg
ICAgICAgIyDQodCx0YDQsNGB0YvQstCw0LXQvCBTMyDRgdC/0LXRhtC40YTQuNGH0L3Ri9C1INC/
0L7Qu9GPINC00LvRjyDRh9C40YHRgtC+0YLRiyAo0L7Qv9GG0LjQvtC90LDQu9GM0L3QvikKICAg
ICAgICAgICAgICAgICAgICBwYW5lbC5jdXJyZW50X2J1Y2tldCA9IE5vbmUKICAgICAgICAgICAg
ICAgICAgICBwYW5lbC5jdXJyZW50X3ByZWZpeCA9ICIiCiAgICAgICAgICAgICAgICAgICAgcGFu
ZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGggPSBibV9kYXRhWydwYXRoJ10KICAgICAgICAgICAg
ICAgICAgICBwYW5lbC5yZWZyZXNoKCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
ICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdChmIlBhdGggbm90IGZvdW5kOiB7Ym1fZGF0YVsncGF0
aCddfSIsICJlcnJvciIpCgogICAgICAgICAgICBlbGlmIGJtX2RhdGFbJ3R5cGUnXSA9PSAnczMn
OgogICAgICAgICAgICAgICAgIyDQn9GA0L7QstC10YDRj9C10LwsINC10YHRgtGMINC70Lgg0YLQ
sNC60L7QuSDRjdC90LTQv9C+0LjQvdGCINCyINGC0LXQutGD0YnQtdC8INC60L7QvdGE0LjQs9C1
CiAgICAgICAgICAgICAgICBlcF9jb25maWcgPSBzZWxmLnMzX2NvbmZpZy5nZXRfZW5kcG9pbnQo
Ym1fZGF0YVsnZW5kcG9pbnQnXSkKICAgICAgICAgICAgICAgIGlmIG5vdCBlcF9jb25maWc6CiAg
ICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdChmIkVuZHBvaW50ICd7Ym1fZGF0YVsn
ZW5kcG9pbnQnXX0nIG5vdCBmb3VuZCBpbiBjb25maWciLCAiZXJyb3IiKQogICAgICAgICAgICAg
ICAgICAgIHJldHVybgoKICAgICAgICAgICAgICAgIHBhbmVsLm1vZGUgPSAnczMnCiAgICAgICAg
ICAgICAgICBwYW5lbC5jdXJyZW50X2VuZHBvaW50ID0gYm1fZGF0YVsnZW5kcG9pbnQnXQogICAg
ICAgICAgICAgICAgcGFuZWwuZW5kcG9pbnRfY29uZmlnID0gZXBfY29uZmlnCiAgICAgICAgICAg
ICAgICAjINCY0L3QuNGG0LjQsNC70LjQt9C40YDRg9C10Lwg0LzQtdC90LXQtNC20LXRgCwg0LXR
gdC70Lgg0YHQvNC10L3QuNC70YHRjyDRjdC90LTQv9C+0LjQvdGCCiAgICAgICAgICAgICAgICBw
YW5lbC5zM19tYW5hZ2VyID0gUzNNYW5hZ2VyKGVwX2NvbmZpZykKCiAgICAgICAgICAgICAgICBw
YW5lbC5jdXJyZW50X2J1Y2tldCA9IGJtX2RhdGEuZ2V0KCdidWNrZXQnKQogICAgICAgICAgICAg
ICAgcGFuZWwuY3VycmVudF9wcmVmaXggPSBibV9kYXRhLmdldCgncHJlZml4JywgJycpCgogICAg
ICAgICAgICAgICAgcGFuZWwucmVmcmVzaCgpCgogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMg
ZToKICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdChmIkVycm9yIGp1bXBpbmcgdG8gYm9va21h
cms6IHtzdHIoZSl9IiwgImVycm9yIikKCiAgICBkZWYgX3dpbmRvd3NfaGVhcnRiZWF0KHNlbGYs
IGxvb3A9Tm9uZSwgdXNlcl9kYXRhPU5vbmUpOgogICAgICAgICIiItCf0LXRgNC40L7QtNC40YfQ
tdGB0LrQvtC1INC+0LHQvdC+0LLQu9C10L3QuNC1INGN0LrRgNCw0L3QsCDQtNC70Y8gV2luZG93
cyIiIgogICAgICAgIHNlbGYubG9vcC5kcmF3X3NjcmVlbigpCiAgICAgICAgIyDQn9C10YDQtdC3
0LDQv9GD0YHQutCw0LXQvCDRgtCw0LnQvNC10YAg0LrQsNC20LTRi9C1IDAuMSDRgdC10LrRg9C9
0LTRiwogICAgICAgIHNlbGYubG9vcC5zZXRfYWxhcm1faW4oMC4xLCBzZWxmLl93aW5kb3dzX2hl
YXJ0YmVhdCkKCiAgICBkZWYgbG9vcF93YWtldXBfY2FsbGJhY2soc2VsZik6CiAgICAgICAgIiIi
Q2FsbGJhY2sg0LTQu9GPINC/0YDQvtCx0YPQttC00LXQvdC40Y8gZXZlbnQgbG9vcCDRh9C10YDQ
tdC3IHBpcGUiIiIKICAgICAgICBvcy5yZWFkKHNlbGYucGlwZV9yLCAxKQoKICAgIGRlZiB3YWtl
X3VwKHNlbGYpOgogICAgICAgICIiItCc0LXRgtC+0LQg0LTQu9GPINCy0YvQt9C+0LLQsCDQuNC3
INC00YDRg9Cz0LjRhSDQv9C+0YLQvtC60L7QsiIiIgogICAgICAgIGlmIHNlbGYudXNlX3BpcGU6
CiAgICAgICAgICAgIG9zLndyaXRlKHNlbGYucGlwZV93LCBiJyEnKQogICAgICAgIGVsc2U6CiAg
ICAgICAgICAgIHNlbGYubG9vcC5zZXRfYWxhcm1faW4oMCwgbGFtYmRhIGxvb3AsIGRhdGE6IE5v
bmUpCgogICAgZGVmIGhhbmRsZV9pbnB1dChzZWxmLCBrZXkpOgogICAgICAgIGlmIGtleSBpbiAo
J3EnLCAnUScsICfQuScsICfQmScpOgogICAgICAgICAgICByYWlzZSB1cndpZC5FeGl0TWFpbkxv
b3AoKQogICAgICAgIGVsaWYga2V5ID09ICdmMTAnOgogICAgICAgICAgICBzZWxmLmNvbmZpcm1f
ZXhpdCgpCiAgICAgICAgZWxpZiBrZXkgPT0gJ3RhYic6CiAgICAgICAgICAgIGN1cnJlbnRfZm9j
dXMgPSBzZWxmLmNvbHVtbnMuZm9jdXNfcG9zaXRpb24KICAgICAgICAgICAgc2VsZi5jb2x1bW5z
LmZvY3VzX3Bvc2l0aW9uID0gMSAtIGN1cnJlbnRfZm9jdXMKICAgICAgICBlbGlmIGtleSA9PSAn
ZjMnOgogICAgICAgICAgICBhY3RpdmVfcGFuZWwgPSBzZWxmLmdldF9hY3RpdmVfcGFuZWwoKQog
ICAgICAgICAgICBhY3RpdmVfcGFuZWwudmlld19pdGVtKCkKICAgICAgICBlbGlmIGtleSA9PSAn
ZjQnOgogICAgICAgICAgICBhY3RpdmVfcGFuZWwgPSBzZWxmLmdldF9hY3RpdmVfcGFuZWwoKQog
ICAgICAgICAgICBpZiBhY3RpdmVfcGFuZWw6CiAgICAgICAgICAgICAgICBhY3RpdmVfcGFuZWwu
c2hvd19pdGVtX2luZm8oKQogICAgICAgIGVsaWYga2V5ID09ICdmNSc6CiAgICAgICAgICAgIHNl
bGYuY29weV9pdGVtcygpCiAgICAgICAgZWxpZiBrZXkgPT0gJ2Y2JzoKICAgICAgICAgICAgc2Vs
Zi5tb3ZlX2l0ZW1zKCkKICAgICAgICBlbGlmIGtleSA9PSAnZjcnOgogICAgICAgICAgICBzZWxm
LmNyZWF0ZV9kaXJlY3RvcnkoKQogICAgICAgIGVsaWYga2V5ID09ICdmOCc6CiAgICAgICAgICAg
IHNlbGYuZGVsZXRlX2l0ZW1zKCkKICAgICAgICBlbGlmIGtleSA9PSAnZjknOgogICAgICAgICAg
ICBzZWxmLmRlbGV0ZV9vbGRfdmVyc2lvbnMoKQogICAgICAgIGVsaWYga2V5ID09ICdmMic6CiAg
ICAgICAgICAgIGFjdGl2ZV9wYW5lbCA9IHNlbGYuZ2V0X2FjdGl2ZV9wYW5lbCgpCiAgICAgICAg
ICAgIGFjdGl2ZV9wYW5lbC5zaG93X3NvcnRfZGlhbG9nKCkKICAgICAgICBlbGlmIGtleSA9PSAn
ZjExJzoKICAgICAgICAgICAgc2VsZi50b2dnbGVfdmVyc2lvbmluZygpCiAgICAgICAgZWxpZiBr
ZXkgPT0gJysnOgogICAgICAgICAgICBzZWxmLnNlbGVjdF9ieV9wYXR0ZXJuKCkKICAgICAgICBl
bGlmIGtleSA9PSAnLSc6CiAgICAgICAgICAgIHNlbGYudW5zZWxlY3RfYnlfcGF0dGVybigpCiAg
ICAgICAgZWxpZiBrZXkgPT0gJyonOgogICAgICAgICAgICBhY3RpdmVfcGFuZWwgPSBzZWxmLmdl
dF9hY3RpdmVfcGFuZWwoKQogICAgICAgICAgICBhY3RpdmVfcGFuZWwuaW52ZXJ0X3NlbGVjdGlv
bigpCiAgICAgICAgZWxpZiBrZXkgPT0gJ2N0cmwgdic6CiAgICAgICAgICAgIHNlbGYudG9nZ2xl
X3ByZXZpZXdfbW9kZSgpCiAgICAgICAgIyDQlNC+0LHQsNCy0LvQtdC90LjQtSDQt9Cw0LrQu9Cw
0LTQutC4IChDdHJsK2IpCiAgICAgICAgZWxpZiBrZXkgPT0gJ2N0cmwgYic6CiAgICAgICAgICAg
IHNlbGYuYWRkX2N1cnJlbnRfdG9fYm9va21hcmtzKCkKICAgICAgICAjINCf0YDQvtGB0LzQvtGC
0YAg0LfQsNC60LvQsNC00L7QuiAoQWx0K2IpCiAgICAgICAgZWxpZiBrZXkgPT0gJ21ldGEgYic6
CiAgICAgICAgICAgIHNlbGYuc2hvd19ib29rbWFya3NfZGlhbG9nKCkKICAgICAgICBpZiBzZWxm
LnByZXZpZXdfbW9kZToKICAgICAgICAgICAgaWYga2V5ID09ICcrJzoKICAgICAgICAgICAgICAg
IHNlbGYuY2hhbmdlX3ByZXZpZXdfdmVyc2lvbigxKQogICAgICAgICAgICAgICAgcmV0dXJuCiAg
ICAgICAgICAgIGVsaWYga2V5ID09ICctJzoKICAgICAgICAgICAgICAgIHNlbGYuY2hhbmdlX3By
ZXZpZXdfdmVyc2lvbigtMSkKICAgICAgICAgICAgICAgIHJldHVybgoKICAgIGRlZiBjaGFuZ2Vf
cHJldmlld192ZXJzaW9uKHNlbGYsIGRlbHRhKToKICAgICAgICAjINCb0L7Qs9C40LrQsCDRgdC8
0LXQvdGLINC40L3QtNC10LrRgdCwINC4INCy0YvQt9C+0LLQsCB1cGRhdGVfcHJldmlldygpCiAg
ICAgICAgIyDQotGA0LXQsdGD0LXRgiDRhdGA0LDQvdC10L3QuNGPINGC0LXQutGD0YnQtdCz0L4g
0YHQv9C40YHQutCwINCy0LXRgNGB0LjQuSDQsiBzZWxmLmN1cnJlbnRfcHJldmlld192ZXJzaW9u
cwogICAgICAgIHBhc3MKCiAgICBkZWYgc2VsZWN0X2J5X3BhdHRlcm4oc2VsZik6CiAgICAgICAg
ZGVmIGNhbGxiYWNrKGNvbmZpcm1lZCwgcGF0dGVybik6CiAgICAgICAgICAgIHNlbGYuY2xvc2Vf
ZGlhbG9nKCkKICAgICAgICAgICAgaWYgY29uZmlybWVkOgogICAgICAgICAgICAgICAgYWN0aXZl
X3BhbmVsID0gc2VsZi5nZXRfYWN0aXZlX3BhbmVsKCkKICAgICAgICAgICAgICAgIGFjdGl2ZV9w
YW5lbC5zZWxlY3RfYnlfcGF0dGVybihwYXR0ZXJuLCBzZWxlY3Q9VHJ1ZSkKCiAgICAgICAgZGlh
bG9nID0gSW5wdXREaWFsb2coJ1NlbGVjdCBmaWxlcyBieSBwYXR0ZXJuJywgJ1BhdHRlcm46ICcs
IGNhbGxiYWNrLCBkZWZhdWx0X3RleHQ9JyonKQogICAgICAgIHNlbGYuc2hvd19kaWFsb2coZGlh
bG9nKQoKICAgIGRlZiB1bnNlbGVjdF9ieV9wYXR0ZXJuKHNlbGYpOgogICAgICAgIGRlZiBjYWxs
YmFjayhjb25maXJtZWQsIHBhdHRlcm4pOgogICAgICAgICAgICBzZWxmLmNsb3NlX2RpYWxvZygp
CiAgICAgICAgICAgIGlmIGNvbmZpcm1lZDoKICAgICAgICAgICAgICAgIGFjdGl2ZV9wYW5lbCA9
IHNlbGYuZ2V0X2FjdGl2ZV9wYW5lbCgpCiAgICAgICAgICAgICAgICBhY3RpdmVfcGFuZWwuc2Vs
ZWN0X2J5X3BhdHRlcm4ocGF0dGVybiwgc2VsZWN0PUZhbHNlKQoKICAgICAgICBkaWFsb2cgPSBJ
bnB1dERpYWxvZygnVW5zZWxlY3QgZmlsZXMgYnkgcGF0dGVybicsICdQYXR0ZXJuOiAnLCBjYWxs
YmFjaywgZGVmYXVsdF90ZXh0PScqJykKICAgICAgICBzZWxmLnNob3dfZGlhbG9nKGRpYWxvZykK
CiAgICBkZWYgZGVsZXRlX29sZF92ZXJzaW9ucyhzZWxmKToKICAgICAgICBhY3RpdmVfcGFuZWwg
PSBzZWxmLmdldF9hY3RpdmVfcGFuZWwoKQoKICAgICAgICBpZiBhY3RpdmVfcGFuZWwubW9kZSAh
PSAnczMnIG9yIG5vdCBhY3RpdmVfcGFuZWwuY3VycmVudF9idWNrZXQ6CiAgICAgICAgICAgIHNl
bGYuc2hvd19yZXN1bHQoJ1RoaXMgZnVuY3Rpb24gd29ya3Mgb25seSB3aXRoIFMzIG9iamVjdHMn
KQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc2VsZWN0ZWRfaXRlbXMgPSBhY3RpdmVfcGFu
ZWwuZ2V0X3NlbGVjdGVkX2l0ZW1zKCkKICAgICAgICBpZiBub3Qgc2VsZWN0ZWRfaXRlbXM6CiAg
ICAgICAgICAgIGZvY3VzZWQgPSBhY3RpdmVfcGFuZWwuZ2V0X2ZvY3VzZWRfaXRlbSgpCiAgICAg
ICAgICAgIGlmIGZvY3VzZWQgYW5kIGZvY3VzZWRbJ3R5cGUnXSA9PSAnczNfZmlsZSc6CiAgICAg
ICAgICAgICAgICBzZWxlY3RlZF9pdGVtcyA9IFtmb2N1c2VkXQoKICAgICAgICBpZiBub3Qgc2Vs
ZWN0ZWRfaXRlbXM6CiAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoJ05vIGl0ZW1zIHNlbGVj
dGVkJykKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHZlcnNpb25lZF9pdGVtcyA9IFtdCiAg
ICAgICAgZm9yIGl0ZW0gaW4gc2VsZWN0ZWRfaXRlbXM6CiAgICAgICAgICAgIGlmIGl0ZW1bJ3R5
cGUnXSA9PSAnczNfZmlsZScgYW5kIGl0ZW0uZ2V0KCd2ZXJzaW9uX2NvdW50JywgMSkgPiAxOgog
ICAgICAgICAgICAgICAgdmVyc2lvbmVkX2l0ZW1zLmFwcGVuZChpdGVtKQoKICAgICAgICBpZiBu
b3QgdmVyc2lvbmVkX2l0ZW1zOgogICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KCdObyB2ZXJz
aW9uZWQgZmlsZXMgc2VsZWN0ZWQnKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaXRlbXNf
aW5mbyA9IFtmIntpdGVtWyduYW1lJ119ICh7aXRlbVsndmVyc2lvbl9jb3VudCddfSB2ZXJzaW9u
cykiIGZvciBpdGVtIGluIHZlcnNpb25lZF9pdGVtc10KCiAgICAgICAgZGVmIGNhbGxiYWNrKGNv
bmZpcm1lZCk6CiAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgaWYg
Y29uZmlybWVkOgogICAgICAgICAgICAgICAgZm9jdXNfaW5kZXggPSBhY3RpdmVfcGFuZWwubGlz
dGJveC5mb2N1c19wb3NpdGlvbgoKICAgICAgICAgICAgICAgIHByb2dyZXNzID0gUHJvZ3Jlc3NE
aWFsb2coJ0RlbGV0aW5nIG9sZCB2ZXJzaW9ucy4uLicsIGNhbGxiYWNrPXNlbGYuY2xvc2VfZGlh
bG9nKQogICAgICAgICAgICAgICAgcHJvZ3Jlc3Muc2V0X3RvdGFsKGxlbih2ZXJzaW9uZWRfaXRl
bXMpKQogICAgICAgICAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhwcm9ncmVzcykKCiAgICAgICAg
ICAgICAgICBkZWYgZGVsZXRlX3RocmVhZCgpOgogICAgICAgICAgICAgICAgICAgIGZvciBpdGVt
IGluIHZlcnNpb25lZF9pdGVtczoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgcHJvZ3Jlc3Mu
Y2FuY2VsbGVkOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAg
ICAgICAgICAgICAgIHNlbGYubG9vcC5kcmF3X3NjcmVlbigpCiAgICAgICAgICAgICAgICAgICAg
ICAgIHByb2dyZXNzLnVwZGF0ZShpdGVtWyduYW1lJ10pCgogICAgICAgICAgICAgICAgICAgICAg
ICBkZWxldGVkID0gYWN0aXZlX3BhbmVsLnMzX21hbmFnZXIuZGVsZXRlX29sZF92ZXJzaW9ucygK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9wYW5lbC5jdXJyZW50X2J1Y2tldCwK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1bJ2tleSddCiAgICAgICAgICAgICAgICAg
ICAgICAgICkKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRlbGV0ZWQgPiAwOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX3N1Y2Nlc3MoKQogICAgICAgICAgICAg
ICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRk
X2ZhaWx1cmUoKQoKICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAg
ICAgICAgICAgICBzZWxmLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICAgICAgICAgIHRocmVh
ZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWRlbGV0ZV90aHJlYWQpCiAgICAgICAgICAgICAg
ICB0aHJlYWQuZGFlbW9uID0gVHJ1ZQogICAgICAgICAgICAgICAgdGhyZWFkLnN0YXJ0KCkKCiAg
ICAgICAgICAgICAgICBkZWYgY2hlY2tfdGhyZWFkKCk6CiAgICAgICAgICAgICAgICAgICAgaWYg
dGhyZWFkLmlzX2FsaXZlKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9vcC5zZXRf
YWxhcm1faW4oMC4xLCBsYW1iZGEgKmFyZ3M6IGNoZWNrX3RocmVhZCgpKQogICAgICAgICAgICAg
ICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkK
ICAgICAgICAgICAgICAgICAgICAgICAgaWYgZm9jdXNfaW5kZXggaXMgbm90IE5vbmU6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVfcGFuZWwucmVzdG9yZV9mb2N1c19pbmRleCA9
IGZvY3VzX2luZGV4CgogICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVfcGFuZWwucmVmcmVz
aCgpCgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KAogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZidEZWxldGVkIG9sZCB2ZXJzaW9uczoge3Byb2dyZXNzLnN1Y2Nl
c3NfY291bnR9LCBGYWlsZWQ6IHtwcm9ncmVzcy5mYWlsX2NvdW50fScpCgogICAgICAgICAgICAg
ICAgc2VsZi5sb29wLnNldF9hbGFybV9pbigwLjEsIGxhbWJkYSAqYXJnczogY2hlY2tfdGhyZWFk
KCkpCgogICAgICAgIG1lc3NhZ2UgPSBmJ0RlbGV0ZSBvbGQgdmVyc2lvbnMgb2Yge2xlbih2ZXJz
aW9uZWRfaXRlbXMpfSBmaWxlKHMpP1xuVGhpcyB3aWxsIGtlZXAgb25seSB0aGUgbGF0ZXN0IHZl
cnNpb24hJwogICAgICAgIGRpYWxvZyA9IENvbmZpcm1EaWFsb2coJ0NvbmZpcm0gRGVsZXRlIE9s
ZCBWZXJzaW9ucycsIG1lc3NhZ2UsIGl0ZW1zX2luZm8sIGNhbGxiYWNrKQogICAgICAgIHNlbGYu
c2hvd19kaWFsb2coZGlhbG9nKQoKICAgICMg0JTQvtCx0LDQstC70Y/QtdC8INCw0YDQs9GD0LzQ
tdC90YLRiyB3aWR0aCDQuCBoZWlnaHQg0YEg0LTQtdGE0L7Qu9GC0L3Ri9C80Lgg0LfQvdCw0YfQ
tdC90LjRj9C80LgKICAgIGRlZiBzaG93X2RpYWxvZyhzZWxmLCBkaWFsb2csIHdpZHRoPSgncmVs
YXRpdmUnLCA3MCksIGhlaWdodD0oJ3JlbGF0aXZlJywgMjApKToKICAgICAgICBvdmVybGF5ID0g
dXJ3aWQuT3ZlcmxheSgKICAgICAgICAgICAgZGlhbG9nLAogICAgICAgICAgICBzZWxmLmZyYW1l
LAogICAgICAgICAgICBhbGlnbj0nY2VudGVyJywKICAgICAgICAgICAgd2lkdGg9d2lkdGgsCiAg
ICAgICAgICAgIHZhbGlnbj0nbWlkZGxlJywKICAgICAgICAgICAgaGVpZ2h0PWhlaWdodAogICAg
ICAgICkKICAgICAgICBzZWxmLmxvb3Aud2lkZ2V0ID0gb3ZlcmxheQoKICAgIGRlZiBjbG9zZV9k
aWFsb2coc2VsZik6CiAgICAgICAgc2VsZi5sb29wLndpZGdldCA9IHNlbGYubWFpbl93aWRnZXQK
CiAgICAjIGRlZiBzaG93X3Jlc3VsdChzZWxmLCBtZXNzYWdlKToKICAgICMgICAgIHNlbGYucmVz
dWx0X3RleHQuc2V0X3RleHQobWVzc2FnZSkKCiAgICBkZWYgc2hvd19yZXN1bHQoc2VsZiwgbWVz
c2FnZSwgc2V2ZXJpdHk9J2luZm8nKToKICAgICAgICAiIiIKICAgICAgICBzZXZlcml0eTogJ2lu
Zm8nIChkZWZhdWx0KSwgJ2Vycm9yJywgJ3dhcm5pbmcnCiAgICAgICAgIiIiCiAgICAgICAgc2Vs
Zi5yZXN1bHRfdGV4dC5zZXRfdGV4dChtZXNzYWdlKQoKICAgICAgICAjINCh0LvQvtCy0LDRgNGM
INGB0L7QvtGC0LLQtdGC0YHRgtCy0LjRjyDRgtC40L/QvtCyINGB0L7QvtCx0YnQtdC90LjQuSDQ
uCDRgdGC0LjQu9C10Lkg0L/QsNC70LjRgtGA0YsKICAgICAgICBzdHlsZV9tYXAgPSB7CiAgICAg
ICAgICAgICdpbmZvJzogJ3Jlc3VsdCcsCiAgICAgICAgICAgICdlcnJvcic6ICdyZXN1bHRfZXJy
b3InLAogICAgICAgICAgICAnd2FybmluZyc6ICdyZXN1bHRfd2FybicKICAgICAgICB9CgogICAg
ICAgIHRhcmdldF9zdHlsZSA9IHN0eWxlX21hcC5nZXQoc2V2ZXJpdHksICdyZXN1bHQnKQoKICAg
ICAgICAjIHtOb25lOiB0YXJnZXRfc3R5bGV9INC+0LfQvdCw0YfQsNC10YIgItC/0YDQuNC80LXQ
vdC40YLRjCDRjdGC0L7RgiDRgdGC0LjQu9GMINC60L4g0LLRgdC10LzRgyDRgdC+0LTQtdGA0LbQ
uNC80L7QvNGDLAogICAgICAgICMg0YMg0LrQvtGC0L7RgNC+0LPQviDQvdC10YIg0YHQstC+0LXQ
s9C+INC20LXRgdGC0LrQviDQt9Cw0LTQsNC90L3QvtCz0L4g0YHRgtC40LvRjyIKICAgICAgICBz
ZWxmLnJlc3VsdF9tYXAuc2V0X2F0dHJfbWFwKHtOb25lOiB0YXJnZXRfc3R5bGV9KQoKICAgIGRl
ZiBnZXRfYWN0aXZlX3BhbmVsKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmxlZnRfcGFuZWwg
aWYgc2VsZi5jb2x1bW5zLmZvY3VzX3Bvc2l0aW9uID09IDAgZWxzZSBzZWxmLnJpZ2h0X3BhbmVs
CgogICAgZGVmIGdldF9pbmFjdGl2ZV9wYW5lbChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5y
aWdodF9wYW5lbCBpZiBzZWxmLmNvbHVtbnMuZm9jdXNfcG9zaXRpb24gPT0gMCBlbHNlIHNlbGYu
bGVmdF9wYW5lbAoKICAgIGRlZiBjcmVhdGVfZGlyZWN0b3J5KHNlbGYpOgogICAgICAgIGFjdGl2
ZV9wYW5lbCA9IHNlbGYuZ2V0X2FjdGl2ZV9wYW5lbCgpCgogICAgICAgIGlmIGFjdGl2ZV9wYW5l
bC5pc19yb290X21lbnUoKToKICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdCgnU2VsZWN0IEZT
IG9yIFMzIGVuZHBvaW50IGZpcnN0JykKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIGFj
dGl2ZV9wYW5lbC5tb2RlID09ICdzMyc6CiAgICAgICAgICAgIGlmIGFjdGl2ZV9wYW5lbC5pc19i
dWNrZXRfbGlzdCgpOgogICAgICAgICAgICAgICAgZGVmIGNhbGxiYWNrKGNvbmZpcm1lZCwgYnVj
a2V0X25hbWUpOgogICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAg
ICAgICAgICAgICAgICBpZiBjb25maXJtZWQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFj
dGl2ZV9wYW5lbC5zM19tYW5hZ2VyLmNyZWF0ZV9idWNrZXQoYnVja2V0X25hbWUpOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdChmJ0NyZWF0ZWQgYnVja2V0OiB7
YnVja2V0X25hbWV9JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9wYW5lbC5y
ZWZyZXNoKGZvY3VzX29uPWJ1Y2tldF9uYW1lKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNl
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdChmJ0ZhaWxlZCB0
byBjcmVhdGUgYnVja2V0OiB7YnVja2V0X25hbWV9JykKCiAgICAgICAgICAgICAgICBkaWFsb2cg
PSBJbnB1dERpYWxvZygnQ3JlYXRlIE5ldyBCdWNrZXQnLCAnQnVja2V0IG5hbWU6ICcsIGNhbGxi
YWNrKQogICAgICAgICAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhkaWFsb2cpCiAgICAgICAgICAg
IGVsaWYgYWN0aXZlX3BhbmVsLmlzX2VuZHBvaW50X2xpc3QoKToKICAgICAgICAgICAgICAgIHNl
bGYuc2hvd19yZXN1bHQoJ0Nhbm5vdCBjcmVhdGUgZGlyZWN0b3J5IGF0IGVuZHBvaW50IGxldmVs
JykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoJ0Nh
bm5vdCBjcmVhdGUgZGlyZWN0b3J5IGluIFMzICh1c2UgcHJlZml4IHdoZW4gY29weWluZyknKQog
ICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRlZiBjYWxsYmFjayhjb25maXJtZWQsIGRpcl9uYW1l
KToKICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgICAgIGlm
IGNvbmZpcm1lZDoKICAgICAgICAgICAgICAgICAgICBpZiBhY3RpdmVfcGFuZWwuZnNfYnJvd3Nl
ci5jcmVhdGVfZGlyZWN0b3J5KGRpcl9uYW1lKToKICAgICAgICAgICAgICAgICAgICAgICAgc2Vs
Zi5zaG93X3Jlc3VsdChmJ0NyZWF0ZWQgZGlyZWN0b3J5OiB7ZGlyX25hbWV9JykKICAgICAgICAg
ICAgICAgICAgICAgICAgYWN0aXZlX3BhbmVsLnJlZnJlc2goZm9jdXNfb249ZGlyX25hbWUpCiAg
ICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93
X3Jlc3VsdChmJ0ZhaWxlZCB0byBjcmVhdGUgZGlyZWN0b3J5OiB7ZGlyX25hbWV9JykKCiAgICAg
ICAgICAgIGRpYWxvZyA9IElucHV0RGlhbG9nKCdDcmVhdGUgTmV3IERpcmVjdG9yeScsICdEaXJl
Y3RvcnkgbmFtZTogJywgY2FsbGJhY2spCiAgICAgICAgICAgIHNlbGYuc2hvd19kaWFsb2coZGlh
bG9nKQoKICAgIGRlZiBhbmFseXplX2l0ZW1zKHNlbGYsIGl0ZW1zLCBzb3VyY2VfcGFuZWwpOgog
ICAgICAgIGFuYWx5emVkID0gW10KICAgICAgICBpdGVtc19pbmZvID0gW10KICAgICAgICB0b3Rh
bF9ieXRlcyA9IDAKCiAgICAgICAgZm9yIGl0ZW0gaW4gaXRlbXM6CiAgICAgICAgICAgIGl0ZW1f
dHlwZSA9IGl0ZW1bJ3R5cGUnXQoKICAgICAgICAgICAgaWYgaXRlbV90eXBlID09ICdmc19maWxl
JzoKICAgICAgICAgICAgICAgIGFuYWx5emVkLmFwcGVuZCh7J3R5cGUnOiAnZnNfZmlsZScsICdp
dGVtJzogaXRlbSwgJ2ZpbGVzJzogW2l0ZW1dfSkKICAgICAgICAgICAgICAgICMgaXRlbXNfaW5m
by5hcHBlbmQoZiJbRklMRV0ge2l0ZW1bJ25hbWUnXX0iKQogICAgICAgICAgICAgICAgaXRlbXNf
aW5mby5hcHBlbmQoZiIge2l0ZW1bJ25hbWUnXX0iKQogICAgICAgICAgICAgICAgdG90YWxfYnl0
ZXMgKz0gaXRlbS5nZXQoJ3NpemUnLCAwKQoKICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0g
J2ZzX2Rpcic6CiAgICAgICAgICAgICAgICBkaXJfcGF0aCA9IG9zLnBhdGguam9pbihzb3VyY2Vf
cGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIGl0ZW1bJ25hbWUnXSkKICAgICAgICAgICAg
ICAgIGFsbF9maWxlcyA9IHNvdXJjZV9wYW5lbC5mc19icm93c2VyLmxpc3RfYWxsX2ZpbGVzKGRp
cl9wYXRoKQogICAgICAgICAgICAgICAgYW5hbHl6ZWQuYXBwZW5kKHsndHlwZSc6ICdmc19kaXIn
LCAnaXRlbSc6IGl0ZW0sICdmaWxlcyc6IGFsbF9maWxlcywgJ2Rpcl9wYXRoJzogZGlyX3BhdGh9
KQogICAgICAgICAgICAgICAgIyBpdGVtc19pbmZvLmFwcGVuZChmIltESVIgXSB7aXRlbVsnbmFt
ZSddfSAoe2xlbihhbGxfZmlsZXMpfSBmaWxlcykiKQogICAgICAgICAgICAgICAgaXRlbXNfaW5m
by5hcHBlbmQoZiIve2l0ZW1bJ25hbWUnXX0gKHtsZW4oYWxsX2ZpbGVzKX0gZmlsZXMpIikKICAg
ICAgICAgICAgICAgIHRvdGFsX2J5dGVzICs9IHN1bShmWydzaXplJ10gZm9yIGYgaW4gYWxsX2Zp
bGVzKQoKICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ3MzX2ZpbGUnOgogICAgICAgICAg
ICAgICAgYW5hbHl6ZWQuYXBwZW5kKHsndHlwZSc6ICdzM19maWxlJywgJ2l0ZW0nOiBpdGVtLCAn
ZmlsZXMnOiBbaXRlbV19KQogICAgICAgICAgICAgICAgIyBpdGVtc19pbmZvLmFwcGVuZChmIltG
SUxFXSB7aXRlbVsnbmFtZSddfSIpCiAgICAgICAgICAgICAgICBpdGVtc19pbmZvLmFwcGVuZChm
IiB7aXRlbVsnbmFtZSddfSIpCiAgICAgICAgICAgICAgICB0b3RhbF9ieXRlcyArPSBpdGVtLmdl
dCgnc2l6ZScsIDApCgogICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnczNfZGlyJzoKICAg
ICAgICAgICAgICAgIGFsbF9vYmplY3RzID0gc291cmNlX3BhbmVsLnMzX21hbmFnZXIubGlzdF9h
bGxfb2JqZWN0cyhzb3VyY2VfcGFuZWwuY3VycmVudF9idWNrZXQsIGl0ZW1bJ2tleSddKQogICAg
ICAgICAgICAgICAgYW5hbHl6ZWQuYXBwZW5kKHsndHlwZSc6ICdzM19kaXInLCAnaXRlbSc6IGl0
ZW0sICdmaWxlcyc6IGFsbF9vYmplY3RzfSkKICAgICAgICAgICAgICAgICMgaXRlbXNfaW5mby5h
cHBlbmQoZiJbRElSIF0ge2l0ZW1bJ25hbWUnXX0gKHtsZW4oYWxsX29iamVjdHMpfSBvYmplY3Rz
KSIpCiAgICAgICAgICAgICAgICBpdGVtc19pbmZvLmFwcGVuZChmIi97aXRlbVsnbmFtZSddfSAo
e2xlbihhbGxfb2JqZWN0cyl9IG9iamVjdHMpIikKICAgICAgICAgICAgICAgIHRvdGFsX2J5dGVz
ICs9IHN1bShvYmouZ2V0KCdTaXplJywgMCkgZm9yIG9iaiBpbiBhbGxfb2JqZWN0cykKCiAgICAg
ICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdidWNrZXQnOgogICAgICAgICAgICAgICAgYWxsX29i
amVjdHMgPSBzb3VyY2VfcGFuZWwuczNfbWFuYWdlci5saXN0X2FsbF9vYmplY3RzKGl0ZW1bJ25h
bWUnXSwgJycpCiAgICAgICAgICAgICAgICBhbmFseXplZC5hcHBlbmQoeyd0eXBlJzogJ2J1Y2tl
dCcsICdpdGVtJzogaXRlbSwgJ2ZpbGVzJzogYWxsX29iamVjdHN9KQogICAgICAgICAgICAgICAg
aXRlbXNfaW5mby5hcHBlbmQoZiIqe2l0ZW1bJ25hbWUnXX0gKHtsZW4oYWxsX29iamVjdHMpfSBv
YmplY3RzKSIpCiAgICAgICAgICAgICAgICB0b3RhbF9ieXRlcyArPSBzdW0ob2JqLmdldCgnU2l6
ZScsIDApIGZvciBvYmogaW4gYWxsX29iamVjdHMpCgogICAgICAgIHJldHVybiBhbmFseXplZCwg
aXRlbXNfaW5mbywgdG90YWxfYnl0ZXMKCiAgICBkZWYgY29weV9pdGVtcyhzZWxmKToKICAgICAg
ICBzb3VyY2VfcGFuZWwgPSBzZWxmLmdldF9hY3RpdmVfcGFuZWwoKQogICAgICAgIGRlc3RfcGFu
ZWwgPSBzZWxmLmdldF9pbmFjdGl2ZV9wYW5lbCgpCgogICAgICAgIGlmIHNvdXJjZV9wYW5lbC5p
c19yb290X21lbnUoKSBvciBzb3VyY2VfcGFuZWwuaXNfZW5kcG9pbnRfbGlzdCgpOgogICAgICAg
ICAgICBzZWxmLnNob3dfcmVzdWx0KCdDYW5ub3QgY29weSBmcm9tIHRoaXMgbGV2ZWwnKQogICAg
ICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgZGVzdF9wYW5lbC5pc19yb290X21lbnUoKSBvciBk
ZXN0X3BhbmVsLmlzX2VuZHBvaW50X2xpc3QoKToKICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3Vs
dCgnU2VsZWN0IGRlc3RpbmF0aW9uIGZpcnN0JykKICAgICAgICAgICAgcmV0dXJuCgogICAgICAg
IHNlbGVjdGVkX2l0ZW1zID0gc291cmNlX3BhbmVsLmdldF9zZWxlY3RlZF9pdGVtcygpCiAgICAg
ICAgaWYgbm90IHNlbGVjdGVkX2l0ZW1zOgogICAgICAgICAgICBmb2N1c2VkID0gc291cmNlX3Bh
bmVsLmdldF9mb2N1c2VkX2l0ZW0oKQogICAgICAgICAgICBpZiBmb2N1c2VkIGFuZCBmb2N1c2Vk
Wyd0eXBlJ10gaW4gKCdmc19maWxlJywgJ3MzX2ZpbGUnLCAnZnNfZGlyJywgJ3MzX2RpcicsICdi
dWNrZXQnKToKICAgICAgICAgICAgICAgIHNlbGVjdGVkX2l0ZW1zID0gW2ZvY3VzZWRdCgogICAg
ICAgIGlmIG5vdCBzZWxlY3RlZF9pdGVtczoKICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdCgn
Tm8gaXRlbXMgdG8gY29weScpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpZiBkZXN0X3Bh
bmVsLmlzX2J1Y2tldF9saXN0KCk6CiAgICAgICAgICAgIGhhc19maWxlcyA9IGFueShpdGVtWyd0
eXBlJ10gaW4gKCdmc19maWxlJywgJ3MzX2ZpbGUnKSBmb3IgaXRlbSBpbiBzZWxlY3RlZF9pdGVt
cykKICAgICAgICAgICAgaWYgaGFzX2ZpbGVzOgogICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jl
c3VsdCgnQ2Fubm90IGNvcHkgZmlsZXMgZGlyZWN0bHkgdG8gYnVja2V0IGxpc3QhJykKICAgICAg
ICAgICAgICAgIHJldHVybgogICAgICAgIGZvY3VzX2luZGV4ID0gc291cmNlX3BhbmVsLmxpc3Ri
b3guZm9jdXNfcG9zaXRpb24KICAgICAgICBhbmFseXplZCwgaXRlbXNfaW5mbywgdG90YWxfYnl0
ZXMgPSBzZWxmLmFuYWx5emVfaXRlbXMoc2VsZWN0ZWRfaXRlbXMsIHNvdXJjZV9wYW5lbCkKICAg
ICAgICBzZWxmLl9zaG93X2NvcHlfZGlhbG9nKGFuYWx5emVkLCBzb3VyY2VfcGFuZWwsIGRlc3Rf
cGFuZWwsIGlzX21vdmU9RmFsc2UsIHRvdGFsX2J5dGVzPXRvdGFsX2J5dGVzLCByZXN0b3JlX2lu
ZGV4PWZvY3VzX2luZGV4KQoKICAgIGRlZiBtb3ZlX2l0ZW1zKHNlbGYpOgogICAgICAgIHNvdXJj
ZV9wYW5lbCA9IHNlbGYuZ2V0X2FjdGl2ZV9wYW5lbCgpCiAgICAgICAgZGVzdF9wYW5lbCA9IHNl
bGYuZ2V0X2luYWN0aXZlX3BhbmVsKCkKCiAgICAgICAgaWYgc291cmNlX3BhbmVsLmlzX3Jvb3Rf
bWVudSgpIG9yIHNvdXJjZV9wYW5lbC5pc19lbmRwb2ludF9saXN0KCk6CiAgICAgICAgICAgIHNl
bGYuc2hvd19yZXN1bHQoJ0Nhbm5vdCBtb3ZlIGZyb20gdGhpcyBsZXZlbCcpCiAgICAgICAgICAg
IHJldHVybgoKICAgICAgICBpZiBkZXN0X3BhbmVsLmlzX3Jvb3RfbWVudSgpIG9yIGRlc3RfcGFu
ZWwuaXNfZW5kcG9pbnRfbGlzdCgpOgogICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KCdTZWxl
Y3QgZGVzdGluYXRpb24gZmlyc3QnKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc2VsZWN0
ZWRfaXRlbXMgPSBzb3VyY2VfcGFuZWwuZ2V0X3NlbGVjdGVkX2l0ZW1zKCkKICAgICAgICBpZiBu
b3Qgc2VsZWN0ZWRfaXRlbXM6CiAgICAgICAgICAgIGZvY3VzZWQgPSBzb3VyY2VfcGFuZWwuZ2V0
X2ZvY3VzZWRfaXRlbSgpCiAgICAgICAgICAgIGlmIGZvY3VzZWQgYW5kIGZvY3VzZWRbJ3R5cGUn
XSBpbiAoJ2ZzX2ZpbGUnLCAnczNfZmlsZScsICdmc19kaXInLCAnczNfZGlyJywgJ2J1Y2tldCcp
OgogICAgICAgICAgICAgICAgc2VsZWN0ZWRfaXRlbXMgPSBbZm9jdXNlZF0KCiAgICAgICAgaWYg
bm90IHNlbGVjdGVkX2l0ZW1zOgogICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KCdObyBpdGVt
cyB0byBtb3ZlJykKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIGRlc3RfcGFuZWwuaXNf
YnVja2V0X2xpc3QoKToKICAgICAgICAgICAgaGFzX2ZpbGVzID0gYW55KGl0ZW1bJ3R5cGUnXSBp
biAoJ2ZzX2ZpbGUnLCAnczNfZmlsZScpIGZvciBpdGVtIGluIHNlbGVjdGVkX2l0ZW1zKQogICAg
ICAgICAgICBpZiBoYXNfZmlsZXM6CiAgICAgICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KCdD
YW5ub3QgbW92ZSBmaWxlcyBkaXJlY3RseSB0byBidWNrZXQgbGlzdCEnKQogICAgICAgICAgICAg
ICAgcmV0dXJuCiAgICAgICAgZm9jdXNfaW5kZXggPSBzb3VyY2VfcGFuZWwubGlzdGJveC5mb2N1
c19wb3NpdGlvbgogICAgICAgIGFuYWx5emVkLCBpdGVtc19pbmZvLCB0b3RhbF9ieXRlcyA9IHNl
bGYuYW5hbHl6ZV9pdGVtcyhzZWxlY3RlZF9pdGVtcywgc291cmNlX3BhbmVsKQogICAgICAgIHNl
bGYuX3Nob3dfY29weV9kaWFsb2coYW5hbHl6ZWQsIHNvdXJjZV9wYW5lbCwgZGVzdF9wYW5lbCwg
aXNfbW92ZT1UcnVlLCB0b3RhbF9ieXRlcz10b3RhbF9ieXRlcywgcmVzdG9yZV9pbmRleD1mb2N1
c19pbmRleCkKCiAgICBkZWYgX3Nob3dfY29weV9kaWFsb2coc2VsZiwgYW5hbHl6ZWQsIHNvdXJj
ZV9wYW5lbCwgZGVzdF9wYW5lbCwgaXNfbW92ZT1GYWxzZSwgdG90YWxfYnl0ZXM9MCwgcmVzdG9y
ZV9pbmRleD1Ob25lKToKICAgICAgICAiIiIKICAgICAgICDQntGC0L7QsdGA0LDQttCw0LXRgiDQ
tNC40LDQu9C+0LPQvtCy0L7QtSDQvtC60L3QviDQtNC70Y8g0L/QvtC00YLQstC10YDQttC00LXQ
vdC40Y8g0L/Rg9GC0Lgg0L3QsNC30L3QsNGH0LXQvdC40Y8g0L/QtdGA0LXQtCDQvtC/0LXRgNCw
0YbQuNC10Lkg0LrQvtC/0LjRgNC+0LLQsNC90LjRjyDQuNC70Lgg0L/QtdGA0LXQvNC10YnQtdC9
0LjRjy4KCiAgICAgICAg0JDRgNCz0YPQvNC10L3RgtGLOgogICAgICAgICAgICBhbmFseXplZCAo
bGlzdCk6INCh0L/QuNGB0L7QuiDQv9GA0L7QsNC90LDQu9C40LfQuNGA0L7QstCw0L3QvdGL0YUg
0Y3Qu9C10LzQtdC90YLQvtCyICjRhNCw0LnQu9C+0LIv0L/QsNC/0L7Quikg0LTQu9GPINC+0LHR
gNCw0LHQvtGC0LrQuC4KICAgICAgICAgICAgc291cmNlX3BhbmVsIChQYW5lbFdpZGdldCk6INCf
0LDQvdC10LvRjC3QuNGB0YLQvtGH0L3QuNC6LCDQvtGC0LrRg9C00LAg0LjQvdC40YbQuNC40YDQ
vtCy0LDQvdCwINC+0L/QtdGA0LDRhtC40Y8uCiAgICAgICAgICAgIGRlc3RfcGFuZWwgKFBhbmVs
V2lkZ2V0KTog0J/QsNC90LXQu9GMLdC90LDQt9C90LDRh9C10L3QuNC1ICh0YXJnZXQpLgogICAg
ICAgICAgICBpc19tb3ZlIChib29sKTog0KTQu9Cw0LMg0YDQtdC20LjQvNCwINC/0LXRgNC10LzQ
tdGJ0LXQvdC40Y8uINCV0YHQu9C4IFRydWUg4oCUINC00LDQvdC90YvQtSDQsdGD0LTRg9GCINGD
0LTQsNC70LXQvdGLINC40Lcg0LjRgdGC0L7Rh9C90LjQutCwINC/0L7RgdC70LUg0LrQvtC/0LjR
gNC+0LLQsNC90LjRjy4KICAgICAgICAgICAgdG90YWxfYnl0ZXMgKGludCk6INCe0LHRidC40Lkg
0YDQsNC30LzQtdGAINC00LDQvdC90YvRhSDQtNC70Y8g0L/QtdGA0LXQtNCw0YfQuCDQsiDQv9GA
0L7Qs9GA0LXRgdGBLdCx0LDRgC4KICAgICAgICAgICAgcmVzdG9yZV9pbmRleCAoaW50LCBvcHRp
b25hbCk6INCY0L3QtNC10LrRgSDRgdGC0YDQvtC60Lgg0LTQu9GPINCy0L7RgdGB0YLQsNC90L7Q
stC70LXQvdC40Y8g0YTQvtC60YPRgdCwINCyINC40YHRhdC+0LTQvdC+0Lkg0L/QsNC90LXQu9C4
INC/0L7RgdC70LUg0LfQsNCy0LXRgNGI0LXQvdC40Y8gKNC40YHQv9C+0LvRjNC30YPQtdGC0YHR
jyDQtNC70Y8g0LLQtdGA0YHQuNC5KS4KICAgICAgICAiIiIKICAgICAgICBvcGVyYXRpb24gPSAn
TW92ZScgaWYgaXNfbW92ZSBlbHNlICdDb3B5JwoKICAgICAgICBpZiBsZW4oYW5hbHl6ZWQpID09
IDE6CiAgICAgICAgICAgIGl0ZW0gPSBhbmFseXplZFswXVsnaXRlbSddCiAgICAgICAgICAgICMg
c291cmNlX2Rlc2MgPSBmJ3tvcGVyYXRpb259ICJ7aXRlbVsibmFtZSJdfSInCiAgICAgICAgICAg
IHNvdXJjZV9kZXNjID0gZicie2l0ZW1bIm5hbWUiXX0iJwogICAgICAgIGVsc2U6CiAgICAgICAg
ICAgICMgc291cmNlX2Rlc2MgPSBmJ3tvcGVyYXRpb259IHtsZW4oYW5hbHl6ZWQpfSBpdGVtcycK
ICAgICAgICAgICAgc291cmNlX2Rlc2MgPSBmJ3tsZW4oYW5hbHl6ZWQpfSBpdGVtcycKCiAgICAg
ICAgaWYgbGVuKGFuYWx5emVkKSA9PSAxOgogICAgICAgICAgICBpdGVtID0gYW5hbHl6ZWRbMF1b
J2l0ZW0nXQogICAgICAgICAgICBpZiBkZXN0X3BhbmVsLmlzX2J1Y2tldF9saXN0KCk6CiAgICAg
ICAgICAgICAgICBkZXN0X3BhdGggPSBpdGVtWyduYW1lJ10ubG93ZXIoKS5yZXBsYWNlKCdfJywg
Jy0nKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZGVzdF9iYXNlID0gZGVzdF9w
YW5lbC5nZXRfY3VycmVudF9wYXRoKCkKICAgICAgICAgICAgICAgIGlmIGRlc3RfYmFzZToKICAg
ICAgICAgICAgICAgICAgICBkZXN0X3BhdGggPSBkZXN0X2Jhc2UucnN0cmlwKCcvJykgKyAnLycg
KyBpdGVtWyduYW1lJ10KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAg
ZGVzdF9wYXRoID0gaXRlbVsnbmFtZSddCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGVzdF9w
YXRoID0gZGVzdF9wYW5lbC5nZXRfY3VycmVudF9wYXRoKCkKCiAgICAgICAgZGVmIGNhbGxiYWNr
KGNvbmZpcm1lZCwgdGFyZ2V0X25hbWUpOgogICAgICAgICAgICBzZWxmLmNsb3NlX2RpYWxvZygp
CiAgICAgICAgICAgIGlmIG5vdCBjb25maXJtZWQ6CiAgICAgICAgICAgICAgICByZXR1cm4KCiAg
ICAgICAgICAgIGlmIG5vdCB0YXJnZXRfbmFtZToKICAgICAgICAgICAgICAgIHRhcmdldF9uYW1l
ID0gZGVzdF9wYW5lbC5nZXRfY3VycmVudF9wYXRoKCkKCiAgICAgICAgICAgIGN1cnJlbnRfaXRl
bSA9IHNvdXJjZV9wYW5lbC5nZXRfZm9jdXNlZF9pdGVtKCkKICAgICAgICAgICAgZm9jdXNfbmFt
ZSA9IGN1cnJlbnRfaXRlbS5nZXQoJ25hbWUnKSBpZiBjdXJyZW50X2l0ZW0gZWxzZSBOb25lCgog
ICAgICAgICAgICAjINCh0LHRgNC+0YEg0YTQu9Cw0LPQsCAi0L/QtdGA0LXQt9Cw0L/QuNGB0LDR
gtGMINCy0YHQtSIKICAgICAgICAgICAgc2VsZi5vdmVyd3JpdGVfYWxsID0gRmFsc2UKICAgICAg
ICAgICAgc2VsZi52ZXJzaW9uX2FsbCA9IEZhbHNlCiAgICAgICAgICAgIHNlbGYuc2tpcF9hbGwg
PSBGYWxzZQoKICAgICAgICAgICAgc2VsZi5fZG9fY29weV93aXRoX3Byb2dyZXNzKGFuYWx5emVk
LCBzb3VyY2VfcGFuZWwsIGRlc3RfcGFuZWwsIHRhcmdldF9uYW1lLCBmb2N1c19uYW1lLCBpc19t
b3ZlPWlzX21vdmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3Rh
bF9ieXRlcz10b3RhbF9ieXRlcywgcmVzdG9yZV9pbmRleD1yZXN0b3JlX2luZGV4KQoKICAgICAg
ICBkaWFsb2cgPSBDb3B5TW92ZURpYWxvZyhvcGVyYXRpb24sIHNvdXJjZV9kZXNjLCBkZXN0X3Bh
dGgsIGNhbGxiYWNrKQogICAgICAgIHNlbGYuc2hvd19kaWFsb2coZGlhbG9nKQoKICAgIGRlZiBf
Y2hlY2tfb3ZlcndyaXRlKHNlbGYsIGZpbGVuYW1lLCBzb3VyY2VfaW5mbywgZGVzdF9pbmZvLCBj
YWxsYmFjaywgaXNfczNfZGVzdD1GYWxzZSk6CiAgICAgICAgIiIi0J/QvtC60LDQt9Cw0YLRjCDQ
tNC40LDQu9C+0LMg0L/QvtC00YLQstC10YDQttC00LXQvdC40Y8g0L/QtdGA0LXQt9Cw0L/QuNGB
0LgiIiIKICAgICAgICBkaWFsb2cgPSBPdmVyd3JpdGVEaWFsb2coZmlsZW5hbWUsIHNvdXJjZV9p
bmZvLCBkZXN0X2luZm8sIGNhbGxiYWNrLCBzaG93X3ZlcnNpb25fb3B0aW9ucz1pc19zM19kZXN0
KQogICAgICAgIHNlbGYuc2hvd19kaWFsb2coZGlhbG9nKQoKICAgIGRlZiBfZG9fY29weV93aXRo
X3Byb2dyZXNzKHNlbGYsIGFuYWx5emVkLCBzb3VyY2VfcGFuZWwsIGRlc3RfcGFuZWwsIHRhcmdl
dF9uYW1lLCBmb2N1c19uYW1lLCBpc19tb3ZlPUZhbHNlLAogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgdG90YWxfYnl0ZXM9MCwgcmVzdG9yZV9pbmRleD1Ob25lLCBvbl9jb21wbGV0ZT1O
b25lKToKICAgICAgICAiIiIKICAgICAgICDQktGL0L/QvtC70L3Rj9C10YIg0LrQvtC/0LjRgNC+
0LLQsNC90LjQtSDQuNC70Lgg0L/QtdGA0LXQvNC10YnQtdC90LjQtSDRhNCw0LnQu9C+0LIv0LLQ
tdGA0YHQuNC5INCyINGE0L7QvdC+0LLQvtC8INC/0L7RgtC+0LrQtSDRgSDQvtGC0L7QsdGA0LDQ
ttC10L3QuNC10Lwg0LzQvtC00LDQu9GM0L3QvtCz0L4g0L7QutC90LAg0L/RgNC+0LPRgNC10YHR
gdCwLgoKICAgICAgICDQkNGA0LPRg9C80LXQvdGC0Ys6CiAgICAgICAgICAgIGFuYWx5emVkIChs
aXN0KTog0KHQv9C40YHQvtC6INGB0YLRgNGD0LrRgtGD0YAg0LTQsNC90L3Ri9GFICjRhNCw0LnQ
u9C+0LIv0L/QsNC/0L7QuiksINC/0L7QtNCz0L7RgtC+0LLQu9C10L3QvdGL0YUg0LTQu9GPINC6
0L7Qv9C40YDQvtCy0LDQvdC40Y8uCiAgICAgICAgICAgIHNvdXJjZV9wYW5lbCAoUGFuZWxXaWRn
ZXQpOiDQkNC60YLQuNCy0L3QsNGPINC/0LDQvdC10LvRjCAo0LjRgdGC0L7Rh9C90LjQuiksINC+
0YLQutGD0LTQsCDQsdC10YDRg9GC0YHRjyDRhNCw0LnQu9GLLgogICAgICAgICAgICBkZXN0X3Bh
bmVsIChQYW5lbFdpZGdldCk6INCd0LXQsNC60YLQuNCy0L3QsNGPINC/0LDQvdC10LvRjCAo0L3Q
sNC30L3QsNGH0LXQvdC40LUpLCDQutGD0LTQsCDQutC+0L/QuNGA0YPRjtGC0YHRjyDQtNCw0L3Q
vdGL0LUuCiAgICAgICAgICAgIHRhcmdldF9uYW1lIChzdHIpOiDQndC+0LLQvtC1INC40LzRjyDQ
tNC70Y8g0YbQtdC70LXQstC+0LPQviDQvtCx0YrQtdC60YLQsCAo0LjRgdC/0L7Qu9GM0LfRg9C1
0YLRgdGPINC/0YDQuCDQv9C10YDQtdC40LzQtdC90L7QstCw0L3QuNC4L9C60L7Qv9C40YDQvtCy
0LDQvdC40Lgg0L7QtNC90L7Qs9C+INGE0LDQudC70LApINC40LvQuCDQv9GA0LXRhNC40LrRgS4K
ICAgICAgICAgICAgZm9jdXNfbmFtZSAoc3RyKTog0JjQvNGPINGE0LDQudC70LAg0LIg0LjRgdGF
0L7QtNC90L7QuSDQv9Cw0L3QtdC70LgsINC90LAg0LrQvtGC0L7RgNGL0Lkg0YHQu9C10LTRg9C1
0YIg0YPRgdGC0LDQvdC+0LLQuNGC0Ywg0LrRg9GA0YHQvtGAINC/0L7RgdC70LUg0LfQsNCy0LXR
gNGI0LXQvdC40Y8g0L7Qv9C10YDQsNGG0LjQuCAo0LXRgdC70LggcmVzdG9yZV9pbmRleCDQvdC1
INC30LDQtNCw0L0pLgogICAgICAgICAgICBpc19tb3ZlIChib29sKTog0KTQu9Cw0LMg0L7Qv9C1
0YDQsNGG0LjQuCDQv9C10YDQtdC80LXRidC10L3QuNGPLiDQldGB0LvQuCBUcnVlLCDQv9C+0YHQ
u9C1INGD0YHQv9C10YjQvdC+0LPQviDQutC+0L/QuNGA0L7QstCw0L3QuNGPINC40YHRhdC+0LTQ
vdGL0LUg0L7QsdGK0LXQutGC0Ysg0YPQtNCw0LvRj9GO0YLRgdGPLgogICAgICAgICAgICB0b3Rh
bF9ieXRlcyAoaW50KTog0J7QsdGJ0LjQuSDQvtCx0YrQtdC8INC00LDQvdC90YvRhSDQsiDQsdCw
0LnRgtCw0YUg0LTQu9GPINC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNC4INGI0LrQsNC70Ysg0L/R
gNC+0LPRgNC10YHRgdCwLgogICAgICAgICAgICByZXN0b3JlX2luZGV4IChpbnQpOiDQmNC90LTQ
tdC60YEg0L/QvtC30LjRhtC40Lgg0LrRg9GA0YHQvtGA0LAg0LIg0LjRgdGF0L7QtNC90L7QuSDQ
v9Cw0L3QtdC70LgsINC60L7RgtC+0YDRi9C5INC90YPQttC90L4g0LbQtdGB0YLQutC+INCy0L7R
gdGB0YLQsNC90L7QstC40YLRjCDQv9C+0YHQu9C1IHJlZnJlc2goKSAo0L/QvtC70LXQt9C90L4g
0LTQu9GPINCy0LXRgNGB0LjQuSkuCiAgICAgICAgICAgIG9uX2NvbXBsZXRlIChjYWxsYWJsZSk6
INCk0YPQvdC60YbQuNGPINC+0LHRgNCw0YLQvdC+0LPQviDQstGL0LfQvtCy0LAsINC60L7RgtC+
0YDQsNGPINCy0YvQv9C+0LvQvdGP0LXRgtGB0Y8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGP
INC+0LrQvdCwINC/0YDQvtCz0YDQtdGB0YHQsCAo0L3QsNC/0YDQuNC80LXRgCwg0LTQu9GPINC/
0LXRgNC10L7RgtC60YDRi9GC0LjRjyDQtNC40LDQu9C+0LPQsCDQstC10YDRgdC40LkpLgogICAg
ICAgICIiIgoKICAgICAgICB0b3RhbF9maWxlcyA9IHN1bShsZW4oYVsnZmlsZXMnXSkgZm9yIGEg
aW4gYW5hbHl6ZWQpCgogICAgICAgIG9wZXJhdGlvbiA9ICdNb3ZpbmcnIGlmIGlzX21vdmUgZWxz
ZSAnQ29weWluZycKICAgICAgICBwcm9ncmVzcyA9IFByb2dyZXNzRGlhbG9nKGYne29wZXJhdGlv
bn0gZmlsZXMuLi4nLCBjYWxsYmFjaz1zZWxmLmNsb3NlX2RpYWxvZykKICAgICAgICBwcm9ncmVz
cy5zZXRfdG90YWwodG90YWxfZmlsZXMsIHRvdGFsX2J5dGVzKQogICAgICAgIHNlbGYuc2hvd19k
aWFsb2cocHJvZ3Jlc3MpCgogICAgICAgIGl0ZW1zX3RvX2RlbGV0ZSA9IFtdCiAgICAgICAgdXNl
cl9jaG9pY2UgPSB7J3ZhbHVlJzogTm9uZX0KICAgICAgICBjaG9pY2VfZXZlbnQgPSB0aHJlYWRp
bmcuRXZlbnQoKQoKICAgICAgICBkZWYgY29weV90aHJlYWQoKToKICAgICAgICAgICAgZm9yIGl0
ZW1fZGF0YSBpbiBhbmFseXplZDoKICAgICAgICAgICAgICAgIGlmIHByb2dyZXNzLmNhbmNlbGxl
ZDoKICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgICAgIGl0ZW1fdHlwZSA9
IGl0ZW1fZGF0YVsndHlwZSddCiAgICAgICAgICAgICAgICBpdGVtID0gaXRlbV9kYXRhWydpdGVt
J10KCiAgICAgICAgICAgICAgICAjIEZTINGE0LDQudC7IC0+IFMzCiAgICAgICAgICAgICAgICBp
ZiBpdGVtX3R5cGUgPT0gJ2ZzX2ZpbGUnIGFuZCBkZXN0X3BhbmVsLm1vZGUgPT0gJ3MzJyBhbmQg
ZGVzdF9wYW5lbC5jdXJyZW50X2J1Y2tldDoKICAgICAgICAgICAgICAgICAgICBzb3VyY2VfcGF0
aCA9IG9zLnBhdGguam9pbihzb3VyY2VfcGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIGl0
ZW1bJ25hbWUnXSkKCiAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGFuYWx5emVkKSA9PSAxOgog
ICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2tleSA9IHRhcmdldF9uYW1lIGlmIHRhcmdldF9u
YW1lIGVsc2UgaXRlbVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgICAgICAgICAgaWYgdGFyZ2V0X25hbWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBkZXN0X2tleSA9IHRhcmdldF9uYW1lLnJzdHJpcCgnLycpICsgJy8nICsgaXRlbVsnbmFtZSdd
CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBkZXN0X2tleSA9IGl0ZW1bJ25hbWUnXQoKICAgICAgICAgICAgICAgICAgICAjINCf0YDQvtCy
0LXRgNC60LAg0YHRg9GJ0LXRgdGC0LLQvtCy0LDQvdC40Y8KICAgICAgICAgICAgICAgICAgICBp
ZiBub3Qgc2VsZi5vdmVyd3JpdGVfYWxsIGFuZCBub3Qgc2VsZi52ZXJzaW9uX2FsbCBhbmQgbm90
IHNlbGYuc2tpcF9hbGw6CiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gZGVzdF9w
YW5lbC5zM19tYW5hZ2VyLm9iamVjdF9leGlzdHMoZGVzdF9wYW5lbC5jdXJyZW50X2J1Y2tldCwg
ZGVzdF9rZXkpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGV4aXN0aW5nOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc291cmNlX2luZm8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2luZm8gPSB7CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiBleGlzdGluZy5nZXQoJ1NpemUnLCAwKSwK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbXRpbWUnOiBleGlzdGluZy5nZXQoJ0xh
c3RNb2RpZmllZCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZGVmIHNob3dfb3ZlcndyaXRlX2RpYWxvZygpOgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGRlZiBvbl9jaG9pY2UoY2hvaWNlKToKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPSBjaG9pY2UKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LnNldCgpCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhwcm9ncmVzcykKCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2hlY2tfb3ZlcndyaXRlKGl0ZW1b
J25hbWUnXSwgc291cmNlX2luZm8sIGRlc3RfaW5mbywgb25fY2hvaWNlLCBpc19zM19kZXN0PVRy
dWUpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLnNldF9hbGFybV9pbigw
LCBsYW1iZGEgKmFyZ3M6IHNob3dfb3ZlcndyaXRlX2RpYWxvZygpKQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgY2hvaWNlX2V2ZW50LndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgY2hvaWNlX2V2ZW50LmNsZWFyKCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB1
c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnY2FuY2VsJzoKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBwcm9ncmVzcy5jYW5jZWxsZWQgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9p
Y2VbJ3ZhbHVlJ10gPT0gJ2FsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vs
Zi5vdmVyd3JpdGVfYWxsID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1
c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAndmVyc2lvbl9hbGwnOgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHNlbGYudmVyc2lvbl9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdza2lwJzoKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoaXRlbVsnbmFtZSddLCAwKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdza2lwX2FsbCc6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5za2lwX2FsbCA9IFRydWUKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoaXRlbVsnbmFtZSddLCAwKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICd2ZXJzaW9uJzoKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBwYXNzICAjINCf0YDQvtGB0YLQviDQt9Cw0LPRgNGD0LbQ
sNC10LwsIFMzINGB0L7Qt9C00LDRgdGCINCy0LXRgNGB0LjRjgoKICAgICAgICAgICAgICAgICAg
ICBpZiBzZWxmLnNraXBfYWxsOgogICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRh
dGUoaXRlbVsnbmFtZSddLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAg
ICAgICAgICAgICAgICAgICBmaWxlX3NpemUgPSBpdGVtLmdldCgnc2l6ZScsIDApCiAgICAgICAg
ICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKGl0ZW1bJ25hbWUnXSwgZmlsZV9zaXplKQogICAg
ICAgICAgICAgICAgICAgIHNlbGYubG9vcC5kcmF3X3NjcmVlbigpCgogICAgICAgICAgICAgICAg
ICAgIGlmIGRlc3RfcGFuZWwuczNfbWFuYWdlci51cGxvYWRfZmlsZShzb3VyY2VfcGF0aCwgZGVz
dF9wYW5lbC5jdXJyZW50X2J1Y2tldCwgZGVzdF9rZXkpOgogICAgICAgICAgICAgICAgICAgICAg
ICBwcm9ncmVzcy5hZGRfc3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzX21v
dmU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtc190b19kZWxldGUuYXBwZW5kKGl0
ZW1fZGF0YSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAg
ICBwcm9ncmVzcy5hZGRfZmFpbHVyZSgpCgogICAgICAgICAgICAgICAgIyBGUyDQtNC40YDQtdC6
0YLQvtGA0LjRjyAtPiBTMwogICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ2ZzX2Rp
cicgYW5kIGRlc3RfcGFuZWwubW9kZSA9PSAnczMnIGFuZCBkZXN0X3BhbmVsLmN1cnJlbnRfYnVj
a2V0OgogICAgICAgICAgICAgICAgICAgIGFsbF9zdWNjZXNzID0gVHJ1ZQogICAgICAgICAgICAg
ICAgICAgIGZvciBmaWxlX2luZm8gaW4gaXRlbV9kYXRhWydmaWxlcyddOgogICAgICAgICAgICAg
ICAgICAgICAgICBpZiBwcm9ncmVzcy5jYW5jZWxsZWQ6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBicmVhawoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGFuYWx5emVkKSA9PSAx
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0X25hbWU6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZGVzdF9rZXkgPSB0YXJnZXRfbmFtZS5yc3RyaXAoJy8nKSAr
ICcvJyArIGZpbGVfaW5mb1sncmVsX3BhdGgnXS5yZXBsYWNlKG9zLnNlcCwgJy8nKQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBkZXN0X2tleSA9IGZpbGVfaW5mb1sncmVsX3BhdGgnXS5yZXBsYWNlKG9zLnNlcCwgJy8nKQog
ICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
aWYgdGFyZ2V0X25hbWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9rZXkg
PSB0YXJnZXRfbmFtZS5yc3RyaXAoJy8nKSArICcvJyArIGl0ZW1bJ25hbWUnXSArICcvJyArIGZp
bGVfaW5mb1sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3JlbF9wYXRoJ10u
cmVwbGFjZShvcy5zZXAsICcvJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9rZXkgPSBpdGVtWyduYW1lJ10gKyAn
LycgKyBmaWxlX2luZm9bJ3JlbF9wYXRoJ10ucmVwbGFjZShvcy5zZXAsICcvJykKCiAgICAgICAg
ICAgICAgICAgICAgICAgICMg0J/RgNC+0LLQtdGA0LrQsCDRgdGD0YnQtdGB0YLQstC+0LLQsNC9
0LjRjyDQtNC70Y8g0YTQsNC50LvQvtCyINCyINC00LjRgNC10LrRgtC+0YDQuNC4CiAgICAgICAg
ICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLm92ZXJ3cml0ZV9hbGwgYW5kIG5vdCBzZWxmLnZl
cnNpb25fYWxsIGFuZCBub3Qgc2VsZi5za2lwX2FsbDoKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGV4aXN0aW5nID0gZGVzdF9wYW5lbC5zM19tYW5hZ2VyLm9iamVjdF9leGlzdHMoZGVzdF9w
YW5lbC5jdXJyZW50X2J1Y2tldCwgZGVzdF9rZXkpCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBpZiBleGlzdGluZzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXQgPSBvcy5zdGF0KGZpbGVfaW5mb1sn
cGF0aCddKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfaW5mbyA9
IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplJzogc3RhdC5z
dF9zaXplLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ210aW1lJzog
ZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChzdGF0LnN0X210aW1lKQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRl
c3RfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaXpl
JzogZXhpc3RpbmcuZ2V0KCdTaXplJywgMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAnbXRpbWUnOiBleGlzdGluZy5nZXQoJ0xhc3RNb2RpZmllZCcpCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGRlZiBzaG93X292ZXJ3cml0ZV9kaWFsb2coKToKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGRlZiBvbl9jaG9pY2UoY2hvaWNlKToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2Nob2ljZVsndmFsdWUnXSA9IGNo
b2ljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9l
dmVudC5zZXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNl
bGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzZWxmLnNob3dfZGlhbG9nKHByb2dyZXNzKQoKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYuX2NoZWNrX292ZXJ3cml0ZShmaWxlX2luZm9bJ3JlbF9wYXRo
J10sIHNvdXJjZV9pbmZvLCBkZXN0X2luZm8sIG9uX2Nob2ljZSwKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zM19kZXN0PVRy
dWUpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvb3Auc2V0X2Fs
YXJtX2luKDAsIGxhbWJkYSAqYXJnczogc2hvd19vdmVyd3JpdGVfZGlhbG9nKCkpCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC53YWl0KCkKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LmNsZWFyKCkKCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdj
YW5jZWwnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3Mu
Y2FuY2VsbGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
YnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2lj
ZVsndmFsdWUnXSA9PSAnYWxsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHNlbGYub3ZlcndyaXRlX2FsbCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAndmVyc2lvbl9hbGwnOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi52ZXJzaW9uX2FsbCA9IFRy
dWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsn
dmFsdWUnXSA9PSAnc2tpcCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwcm9ncmVzcy51cGRhdGUoZmlsZV9pbmZvWydyZWxfcGF0aCddLCAwKQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnc2tpcF9hbGwnOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5za2lwX2FsbCA9IFRy
dWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0
ZShmaWxlX2luZm9bJ3JlbF9wYXRoJ10sIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2Vw
dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAg
ICAgICAgICAgICAgaWYgc2VsZi5za2lwX2FsbDoKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHByb2dyZXNzLnVwZGF0ZShmaWxlX2luZm9bJ3JlbF9wYXRoJ10sIDApCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZV9zaXpl
ID0gZmlsZV9pbmZvLmdldCgnc2l6ZScsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dy
ZXNzLnVwZGF0ZShmaWxlX2luZm9bJ3JlbF9wYXRoJ10sIGZpbGVfc2l6ZSkKICAgICAgICAgICAg
ICAgICAgICAgICAgc2VsZi5sb29wLmRyYXdfc2NyZWVuKCkKCiAgICAgICAgICAgICAgICAgICAg
ICAgIGlmIGRlc3RfcGFuZWwuczNfbWFuYWdlci51cGxvYWRfZmlsZShmaWxlX2luZm9bJ3BhdGgn
XSwgZGVzdF9wYW5lbC5jdXJyZW50X2J1Y2tldCwgZGVzdF9rZXkpOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX3N1Y2Nlc3MoKQogICAgICAgICAgICAgICAgICAgICAg
ICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX2ZhaWx1cmUo
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsX3N1Y2Nlc3MgPSBGYWxzZQoKICAgICAg
ICAgICAgICAgICAgICBpZiBhbGxfc3VjY2VzcyBhbmQgaXNfbW92ZToKICAgICAgICAgICAgICAg
ICAgICAgICAgaXRlbXNfdG9fZGVsZXRlLmFwcGVuZChpdGVtX2RhdGEpCgogICAgICAgICAgICAg
ICAgIyBTMyDRhNCw0LnQuyAtPiBGUwogICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0g
J3MzX2ZpbGUnIGFuZCBkZXN0X3BhbmVsLm1vZGUgPT0gJ2ZzJzoKICAgICAgICAgICAgICAgICAg
ICBpZiBsZW4oYW5hbHl6ZWQpID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9zLnBh
dGguaXNhYnModGFyZ2V0X25hbWUpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9w
YXRoID0gdGFyZ2V0X25hbWUKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGRlc3RfcGF0aCA9IG9zLnBhdGguam9pbihkZXN0X3BhbmVsLmZz
X2Jyb3dzZXIuY3VycmVudF9wYXRoLCB0YXJnZXRfbmFtZSkKICAgICAgICAgICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgICAgICAgICBpZiB0YXJnZXRfbmFtZToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGJhc2VfZGlyID0gb3MucGF0aC5qb2luKGRlc3RfcGFuZWwuZnNfYnJv
d3Nlci5jdXJyZW50X3BhdGgsIHRhcmdldF9uYW1lKQogICAgICAgICAgICAgICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9kaXIgPSBkZXN0X3BhbmVsLmZz
X2Jyb3dzZXIuY3VycmVudF9wYXRoCiAgICAgICAgICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJz
KGJhc2VfZGlyLCBleGlzdF9vaz1UcnVlKQogICAgICAgICAgICAgICAgICAgICAgICBkZXN0X3Bh
dGggPSBvcy5wYXRoLmpvaW4oYmFzZV9kaXIsIGl0ZW1bJ25hbWUnXSkKCiAgICAgICAgICAgICAg
ICAgICAgIyDQn9GA0L7QstC10YDQutCwINGB0YPRidC10YHRgtCy0L7QstCw0L3QuNGPCiAgICAg
ICAgICAgICAgICAgICAgaWYgbm90IHNlbGYub3ZlcndyaXRlX2FsbCBhbmQgbm90IHNlbGYuc2tp
cF9hbGw6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKGRlc3RfcGF0
aCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfaW5mbyA9IHsKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6IGl0ZW0uZ2V0KCdzaXplJywgMCksCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgJ210aW1lJzogaXRlbS5nZXQoJ210aW1lJykKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjICdzaXplJzogaXRlbVsnc2l6ZSddLAogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgJ210aW1lJzogaXRlbVsnbXRpbWUnXQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhp
c3Rpbmdfc3RhdCA9IG9zLnN0YXQoZGVzdF9wYXRoKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZGVzdF9pbmZvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplJzog
ZXhpc3Rpbmdfc3RhdC5zdF9zaXplLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdt
dGltZSc6IGRhdGV0aW1lLmZyb210aW1lc3RhbXAoZXhpc3Rpbmdfc3RhdC5zdF9tdGltZSkKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBk
ZWYgc2hvd19vdmVyd3JpdGVfZGlhbG9nKCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZGVmIG9uX2Nob2ljZShjaG9pY2UpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB1c2VyX2Nob2ljZVsndmFsdWUnXSA9IGNob2ljZQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQuc2V0KCkKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzZWxmLnNob3dfZGlhbG9nKHByb2dyZXNzKQoKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzZWxmLl9jaGVja19vdmVyd3JpdGUoaXRlbVsnbmFtZSddLCBzb3VyY2Vf
aW5mbywgZGVzdF9pbmZvLCBvbl9jaG9pY2UsIGlzX3MzX2Rlc3Q9RmFsc2UpCgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLnNldF9hbGFybV9pbigwLCBsYW1iZGEgKmFyZ3M6
IHNob3dfb3ZlcndyaXRlX2RpYWxvZygpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hv
aWNlX2V2ZW50LndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50
LmNsZWFyKCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB1c2VyX2Nob2ljZVsndmFs
dWUnXSA9PSAnY2FuY2VsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVz
cy5jYW5jZWxsZWQgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0g
J2FsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vdmVyd3JpdGVfYWxs
ID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFs
dWUnXSA9PSAnc2tpcCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3Mu
dXBkYXRlKGl0ZW1bJ25hbWUnXSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
b250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFs
dWUnXSA9PSAnc2tpcF9hbGwnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYu
c2tpcF9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3Mu
dXBkYXRlKGl0ZW1bJ25hbWUnXSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
b250aW51ZQoKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnNraXBfYWxsOgogICAgICAgICAg
ICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoaXRlbVsnbmFtZSddLCAwKQogICAgICAgICAg
ICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICBvcy5tYWtlZGlycyhv
cy5wYXRoLmRpcm5hbWUoZGVzdF9wYXRoKSwgZXhpc3Rfb2s9VHJ1ZSkKCiAgICAgICAgICAgICAg
ICAgICAgZmlsZV9zaXplID0gaXRlbS5nZXQoJ3NpemUnLCAwKQogICAgICAgICAgICAgICAgICAg
IHByb2dyZXNzLnVwZGF0ZShpdGVtWyduYW1lJ10sIGZpbGVfc2l6ZSkKICAgICAgICAgICAgICAg
ICAgICBzZWxmLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICAgICAgICAgICAgICBpZiBzb3Vy
Y2VfcGFuZWwuczNfbWFuYWdlci5kb3dubG9hZF9vYmplY3Qoc291cmNlX3BhbmVsLmN1cnJlbnRf
YnVja2V0LCBpdGVtWydrZXknXSwgZGVzdF9wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uX2lkPWl0ZW0uZ2V0
KCdWZXJzaW9uSWQnKSk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFkZF9zdWNj
ZXNzKCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaXNfbW92ZToKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGl0ZW1zX3RvX2RlbGV0ZS5hcHBlbmQoaXRlbV9kYXRhKQogICAgICAgICAg
ICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFkZF9mYWls
dXJlKCkKCiAgICAgICAgICAgICAgICAjIFMzINC00LjRgNC10LrRgtC+0YDQuNGPIC0+IEZTCiAg
ICAgICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnczNfZGlyJyBhbmQgZGVzdF9wYW5lbC5t
b2RlID09ICdmcyc6CiAgICAgICAgICAgICAgICAgICAgYWxsX3N1Y2Nlc3MgPSBUcnVlCiAgICAg
ICAgICAgICAgICAgICAgZm9yIG9iaiBpbiBpdGVtX2RhdGFbJ2ZpbGVzJ106CiAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIHByb2dyZXNzLmNhbmNlbGxlZDoKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgICAgICAgICByZWxfa2V5ID0gb2JqWydLZXkn
XVtsZW4oaXRlbVsna2V5J10pOl0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbihhbmFs
eXplZCkgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRhcmdldF9uYW1lOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RfcGF0aCA9IG9zLnBhdGguam9pbihk
ZXN0X3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCB0YXJnZXRfbmFtZSwKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsX2tleS5y
ZXBsYWNlKCcvJywgb3Muc2VwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9wYXRoID0gb3MucGF0aC5qb2luKGRl
c3RfcGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbF9rZXkucmVwbGFjZSgnLycsIG9z
LnNlcCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpZiB0YXJnZXRfbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBk
ZXN0X3BhdGggPSBvcy5wYXRoLmpvaW4oZGVzdF9wYW5lbC5mc19icm93c2VyLmN1cnJlbnRfcGF0
aCwgdGFyZ2V0X25hbWUsIGl0ZW1bJ25hbWUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsX2tleS5yZXBsYWNlKCcvJywgb3Muc2Vw
KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZGVzdF9wYXRoID0gb3MucGF0aC5qb2luKGRlc3RfcGFuZWwuZnNfYnJvd3Nl
ci5jdXJyZW50X3BhdGgsIGl0ZW1bJ25hbWUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsX2tleS5yZXBsYWNlKCcvJywgb3Muc2Vw
KSkKCiAgICAgICAgICAgICAgICAgICAgICAgICMg0J/RgNC+0LLQtdGA0LrQsCDRgdGD0YnQtdGB
0YLQstC+0LLQsNC90LjRjwogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc2VsZi5vdmVy
d3JpdGVfYWxsIGFuZCBub3Qgc2VsZi5za2lwX2FsbDoKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGlmIG9zLnBhdGguZXhpc3RzKGRlc3RfcGF0aCk6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc291cmNlX2luZm8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICdzaXplJzogb2JqLmdldCgnU2l6ZScsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAnbXRpbWUnOiBvYmouZ2V0KCdMYXN0TW9kaWZpZWQnLCBkYXRldGltZS5ub3co
KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZXhpc3Rpbmdfc3RhdCA9IG9zLnN0YXQoZGVzdF9wYXRoKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGRlc3RfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgJ3NpemUnOiBleGlzdGluZ19zdGF0LnN0X3NpemUsCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICdtdGltZSc6IGRhdGV0aW1lLmZyb210aW1lc3RhbXAo
ZXhpc3Rpbmdfc3RhdC5zdF9tdGltZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9
CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBzaG93X292ZXJ3cml0ZV9kaWFs
b2coKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG9uX2Nob2ljZShj
aG9pY2UpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9jaG9p
Y2VbJ3ZhbHVlJ10gPSBjaG9pY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGNob2ljZV9ldmVudC5zZXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhwcm9ncmVzcykKCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYuX2NoZWNrX292ZXJ3cml0ZShyZWxfa2V5LCBzb3VyY2VfaW5m
bywgZGVzdF9pbmZvLCBvbl9jaG9pY2UsIGlzX3MzX2Rlc3Q9RmFsc2UpCgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHNlbGYubG9vcC5zZXRfYWxhcm1faW4oMCwgbGFtYmRhICphcmdz
OiBzaG93X292ZXJ3cml0ZV9kaWFsb2coKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBjaG9pY2VfZXZlbnQud2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hv
aWNlX2V2ZW50LmNsZWFyKCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdXNl
cl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ2NhbmNlbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHByb2dyZXNzLmNhbmNlbGxlZCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlm
IHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdhbGwnOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzZWxmLm92ZXJ3cml0ZV9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnc2tpcCc6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShyZWxfa2V5LCAwKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXBfYWxs
JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5za2lwX2FsbCA9IFRy
dWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKHJl
bF9rZXksIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgog
ICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnNraXBfYWxsOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKHJlbF9rZXksIDApCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgb3MubWFrZWRpcnMo
b3MucGF0aC5kaXJuYW1lKGRlc3RfcGF0aCksIGV4aXN0X29rPVRydWUpCgogICAgICAgICAgICAg
ICAgICAgICAgICBmaWxlX3NpemUgPSBvYmouZ2V0KCdTaXplJywgMCkKICAgICAgICAgICAgICAg
ICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKHJlbF9rZXksIGZpbGVfc2l6ZSkKICAgICAgICAgICAg
ICAgICAgICAgICAgc2VsZi5sb29wLmRyYXdfc2NyZWVuKCkKCiAgICAgICAgICAgICAgICAgICAg
ICAgIGlmIHNvdXJjZV9wYW5lbC5zM19tYW5hZ2VyLmRvd25sb2FkX29iamVjdChzb3VyY2VfcGFu
ZWwuY3VycmVudF9idWNrZXQsIG9ialsnS2V5J10sIGRlc3RfcGF0aCk6CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfc3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAg
ICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfZmFpbHVy
ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxfc3VjY2VzcyA9IEZhbHNlCgogICAg
ICAgICAgICAgICAgICAgIGlmIGFsbF9zdWNjZXNzIGFuZCBpc19tb3ZlOgogICAgICAgICAgICAg
ICAgICAgICAgICBpdGVtc190b19kZWxldGUuYXBwZW5kKGl0ZW1fZGF0YSkKCiAgICAgICAgICAg
ICAgICAjIFMzINGE0LDQudC7IC0+IFMzCiAgICAgICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9
PSAnczNfZmlsZScgYW5kIGRlc3RfcGFuZWwubW9kZSA9PSAnczMnIGFuZCBkZXN0X3BhbmVsLmN1
cnJlbnRfYnVja2V0OgogICAgICAgICAgICAgICAgICAgIGlmIGxlbihhbmFseXplZCkgPT0gMToK
ICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9rZXkgPSB0YXJnZXRfbmFtZSBpZiB0YXJnZXRf
bmFtZSBlbHNlIGl0ZW1bJ25hbWUnXQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAg
ICAgICAgICAgICAgICAgIGlmIHRhcmdldF9uYW1lOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZGVzdF9rZXkgPSB0YXJnZXRfbmFtZS5yc3RyaXAoJy8nKSArICcvJyArIGl0ZW1bJ25hbWUn
XQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZGVzdF9rZXkgPSBpdGVtWyduYW1lJ10KCiAgICAgICAgICAgICAgICAgICAgIyDQn9GA0L7Q
stC10YDQutCwINGB0YPRidC10YHRgtCy0L7QstCw0L3QuNGPCiAgICAgICAgICAgICAgICAgICAg
aWYgbm90IHNlbGYub3ZlcndyaXRlX2FsbCBhbmQgbm90IHNlbGYudmVyc2lvbl9hbGwgYW5kIG5v
dCBzZWxmLnNraXBfYWxsOgogICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZyA9IGRlc3Rf
cGFuZWwuczNfbWFuYWdlci5vYmplY3RfZXhpc3RzKGRlc3RfcGFuZWwuY3VycmVudF9idWNrZXQs
IGRlc3Rfa2V5KQogICAgICAgICAgICAgICAgICAgICAgICBpZiBleGlzdGluZzoKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHNvdXJjZV9pbmZvID0gewogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICdzaXplJzogaXRlbS5nZXQoJ3NpemUnLCAwKSwKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAnbXRpbWUnOiBpdGVtLmdldCgnbXRpbWUnLCBkYXRldGltZS5ub3coKSkK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGRlc3RfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6IGV4
aXN0aW5nLmdldCgnU2l6ZScsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdt
dGltZSc6IGV4aXN0aW5nLmdldCgnTGFzdE1vZGlmaWVkJykKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgc2hvd19vdmVyd3JpdGVf
ZGlhbG9nKCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG9uX2Nob2ljZShj
aG9pY2UpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2Nob2ljZVsn
dmFsdWUnXSA9IGNob2ljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9p
Y2VfZXZlbnQuc2V0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5j
bG9zZV9kaWFsb2coKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNo
b3dfZGlhbG9nKHByb2dyZXNzKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxm
Ll9jaGVja19vdmVyd3JpdGUoaXRlbVsnbmFtZSddLCBzb3VyY2VfaW5mbywgZGVzdF9pbmZvLCBv
bl9jaG9pY2UsIGlzX3MzX2Rlc3Q9VHJ1ZSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
ZWxmLmxvb3Auc2V0X2FsYXJtX2luKDAsIGxhbWJkYSAqYXJnczogc2hvd19vdmVyd3JpdGVfZGlh
bG9nKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQud2FpdCgpCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQuY2xlYXIoKQoKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdjYW5jZWwnOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmNhbmNlbGxlZCA9IFRydWUK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnYWxsJzoKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzZWxmLm92ZXJ3cml0ZV9hbGwgPSBUcnVlCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICd2ZXJzaW9uX2Fs
bCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi52ZXJzaW9uX2FsbCA9IFRy
dWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10g
PT0gJ3NraXAnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0
ZShpdGVtWyduYW1lJ10sIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGlu
dWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10g
PT0gJ3NraXBfYWxsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNraXBf
YWxsID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0
ZShpdGVtWyduYW1lJ10sIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGlu
dWUKCiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5za2lwX2FsbDoKICAgICAgICAgICAgICAg
ICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKGl0ZW1bJ25hbWUnXSwgMCkKICAgICAgICAgICAgICAg
ICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgZmlsZV9zaXplID0gaXRlbS5n
ZXQoJ3NpemUnLCAwKQogICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShpdGVtWydu
YW1lJ10sIGZpbGVfc2l6ZSkKICAgICAgICAgICAgICAgICAgICBzZWxmLmxvb3AuZHJhd19zY3Jl
ZW4oKQoKICAgICAgICAgICAgICAgICAgICBpZiBzb3VyY2VfcGFuZWwuczNfbWFuYWdlci5jb3B5
X29iamVjdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9wYW5lbC5jdXJyZW50
X2J1Y2tldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1bJ2tleSddLAogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZGVzdF9wYW5lbC5jdXJyZW50X2J1Y2tldCwKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGRlc3Rfa2V5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
dmVyc2lvbl9pZD1pdGVtLmdldCgnVmVyc2lvbklkJykKICAgICAgICAgICAgICAgICAgICApOgog
ICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfc3VjY2VzcygpCiAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIGlzX21vdmU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVt
c190b19kZWxldGUuYXBwZW5kKGl0ZW1fZGF0YSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfZmFpbHVyZSgpCgogICAgICAgICAg
ICAgICAgIyBTMyDQtNC40YDQtdC60YLQvtGA0LjRjyAtPiBTMwogICAgICAgICAgICAgICAgZWxp
ZiBpdGVtX3R5cGUgPT0gJ3MzX2RpcicgYW5kIGRlc3RfcGFuZWwubW9kZSA9PSAnczMnIGFuZCBk
ZXN0X3BhbmVsLmN1cnJlbnRfYnVja2V0OgogICAgICAgICAgICAgICAgICAgIGFsbF9zdWNjZXNz
ID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgIGZvciBvYmogaW4gaXRlbV9kYXRhWydmaWxlcydd
OgogICAgICAgICAgICAgICAgICAgICAgICBpZiBwcm9ncmVzcy5jYW5jZWxsZWQ6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgICAgICAgICAgICAgcmVsX2tl
eSA9IG9ialsnS2V5J11bbGVuKGl0ZW1bJ2tleSddKTpdCgogICAgICAgICAgICAgICAgICAgICAg
ICBpZiBsZW4oYW5hbHl6ZWQpID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0
YXJnZXRfbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2tleSA9IHRh
cmdldF9uYW1lLnJzdHJpcCgnLycpICsgJy8nICsgcmVsX2tleQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2tleSA9
IHJlbF9rZXkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGlmIHRhcmdldF9uYW1lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGRlc3Rfa2V5ID0gdGFyZ2V0X25hbWUucnN0cmlwKCcvJykgKyAnLycgKyBpdGVtWyduYW1lJ10g
KyAnLycgKyByZWxfa2V5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3Rfa2V5ID0gaXRlbVsnbmFtZSddICsgJy8nICsg
cmVsX2tleQoKICAgICAgICAgICAgICAgICAgICAgICAgIyDQn9GA0L7QstC10YDQutCwINGB0YPR
idC10YHRgtCy0L7QstCw0L3QuNGPCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxm
Lm92ZXJ3cml0ZV9hbGwgYW5kIG5vdCBzZWxmLnZlcnNpb25fYWxsIGFuZCBub3Qgc2VsZi5za2lw
X2FsbDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gZGVzdF9wYW5lbC5z
M19tYW5hZ2VyLm9iamVjdF9leGlzdHMoZGVzdF9wYW5lbC5jdXJyZW50X2J1Y2tldCwgZGVzdF9r
ZXkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBleGlzdGluZzoKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzb3VyY2VfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgJ3NpemUnOiBvYmouZ2V0KCdTaXplJywgMCksCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICdtdGltZSc6IG9iai5nZXQoJ0xhc3RNb2RpZmllZCcsIGRh
dGV0aW1lLm5vdygpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2luZm8gPSB7CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICdzaXplJzogZXhpc3RpbmcuZ2V0KCdTaXplJywgMCksCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtdGltZSc6IGV4aXN0aW5nLmdldCgnTGFzdE1v
ZGlmaWVkJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGRlZiBzaG93X292ZXJ3cml0ZV9kaWFsb2coKToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG9uX2Nob2ljZShjaG9pY2UpOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPSBj
aG9pY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVu
dC5zZXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9z
ZV9kaWFsb2coKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5z
aG93X2RpYWxvZyhwcm9ncmVzcykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHNlbGYuX2NoZWNrX292ZXJ3cml0ZShyZWxfa2V5LCBzb3VyY2VfaW5mbywgZGVzdF9pbmZvLCBv
bl9jaG9pY2UsIGlzX3MzX2Rlc3Q9VHJ1ZSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2VsZi5sb29wLnNldF9hbGFybV9pbigwLCBsYW1iZGEgKmFyZ3M6IHNob3dfb3ZlcndyaXRl
X2RpYWxvZygpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC53
YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQuY2xlYXIo
KQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB1c2VyX2Nob2ljZVsndmFsdWUn
XSA9PSAnY2FuY2VsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jl
c3MuY2FuY2VsbGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBi
cmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3Zh
bHVlJ10gPT0gJ2FsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYu
b3ZlcndyaXRlX2FsbCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlm
IHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICd2ZXJzaW9uX2FsbCc6CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHNlbGYudmVyc2lvbl9hbGwgPSBUcnVlCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnc2tpcCc6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShyZWxfa2V5
LCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3Nr
aXBfYWxsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5za2lwX2Fs
bCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBk
YXRlKHJlbF9rZXksIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRp
bnVlCgogICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnNraXBfYWxsOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKHJlbF9rZXksIDApCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZV9z
aXplID0gb2JqLmdldCgnU2l6ZScsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNz
LnVwZGF0ZShyZWxfa2V5LCBmaWxlX3NpemUpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYu
bG9vcC5kcmF3X3NjcmVlbigpCgogICAgICAgICAgICAgICAgICAgICAgICBpZiBzb3VyY2VfcGFu
ZWwuczNfbWFuYWdlci5jb3B5X29iamVjdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzb3VyY2VfcGFuZWwuY3VycmVudF9idWNrZXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgb2JqWydLZXknXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X3Bh
bmVsLmN1cnJlbnRfYnVja2V0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3Rf
a2V5CiAgICAgICAgICAgICAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwcm9ncmVzcy5hZGRfc3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfZmFpbHVyZSgpCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBhbGxfc3VjY2VzcyA9IEZhbHNlCgogICAgICAgICAgICAgICAg
ICAgIGlmIGFsbF9zdWNjZXNzIGFuZCBpc19tb3ZlOgogICAgICAgICAgICAgICAgICAgICAgICBp
dGVtc190b19kZWxldGUuYXBwZW5kKGl0ZW1fZGF0YSkKCiAgICAgICAgICAgICAgICAjIEZTINGE
0LDQudC7IC0+IEZTCiAgICAgICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnZnNfZmlsZScg
YW5kIGRlc3RfcGFuZWwubW9kZSA9PSAnZnMnOgogICAgICAgICAgICAgICAgICAgIHNvdXJjZV9w
YXRoID0gb3MucGF0aC5qb2luKHNvdXJjZV9wYW5lbC5mc19icm93c2VyLmN1cnJlbnRfcGF0aCwg
aXRlbVsnbmFtZSddKQoKICAgICAgICAgICAgICAgICAgICBpZiBsZW4oYW5hbHl6ZWQpID09IDE6
CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguaXNhYnModGFyZ2V0X25hbWUpOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9wYXRoID0gdGFyZ2V0X25hbWUKICAgICAg
ICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3Rf
cGF0aCA9IG9zLnBhdGguam9pbihkZXN0X3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCB0
YXJnZXRfbmFtZSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAg
ICAgICBpZiB0YXJnZXRfbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VfZGly
ID0gb3MucGF0aC5qb2luKGRlc3RfcGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIHRhcmdl
dF9uYW1lKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgYmFzZV9kaXIgPSBkZXN0X3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoCiAg
ICAgICAgICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKGJhc2VfZGlyLCBleGlzdF9vaz1UcnVl
KQogICAgICAgICAgICAgICAgICAgICAgICBkZXN0X3BhdGggPSBvcy5wYXRoLmpvaW4oYmFzZV9k
aXIsIGl0ZW1bJ25hbWUnXSkKCiAgICAgICAgICAgICAgICAgICAgIyDQn9GA0L7QstC10YDQutCw
INGB0YPRidC10YHRgtCy0L7QstCw0L3QuNGPCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNl
bGYub3ZlcndyaXRlX2FsbCBhbmQgbm90IHNlbGYuc2tpcF9hbGw6CiAgICAgICAgICAgICAgICAg
ICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKGRlc3RfcGF0aCk6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzb3VyY2VfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAn
c2l6ZSc6IGl0ZW0uZ2V0KCdzaXplJywgMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgJ210aW1lJzogaXRlbS5nZXQoJ210aW1lJykKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nX3N0YXQgPSBvcy5zdGF0KGRl
c3RfcGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RfaW5mbyA9IHsKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6IGV4aXN0aW5nX3N0YXQuc3Rfc2l6ZSwK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbXRpbWUnOiBkYXRldGltZS5mcm9tdGlt
ZXN0YW1wKGV4aXN0aW5nX3N0YXQuc3RfbXRpbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHNob3dfb3ZlcndyaXRlX2RpYWxv
ZygpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBvbl9jaG9pY2UoY2hvaWNl
KToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9jaG9pY2VbJ3ZhbHVl
J10gPSBjaG9pY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2
ZW50LnNldCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2Vf
ZGlhbG9nKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X2Rp
YWxvZyhwcm9ncmVzcykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2hl
Y2tfb3ZlcndyaXRlKGl0ZW1bJ25hbWUnXSwgc291cmNlX2luZm8sIGRlc3RfaW5mbywgb25fY2hv
aWNlLCBpc19zM19kZXN0PUZhbHNlKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYu
bG9vcC5zZXRfYWxhcm1faW4oMCwgbGFtYmRhICphcmdzOiBzaG93X292ZXJ3cml0ZV9kaWFsb2co
KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC53YWl0KCkKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC5jbGVhcigpCgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ2NhbmNlbCc6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuY2FuY2VsbGVkID0gVHJ1ZQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdhbGwnOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYub3ZlcndyaXRlX2FsbCA9IFRydWUKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXAnOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShpdGVtWyduYW1lJ10sIDAp
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXBfYWxsJzoKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNraXBfYWxsID0gVHJ1ZQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShpdGVtWyduYW1lJ10sIDAp
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAg
ICAgICAgaWYgc2VsZi5za2lwX2FsbDoKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3Mu
dXBkYXRlKGl0ZW1bJ25hbWUnXSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUK
CiAgICAgICAgICAgICAgICAgICAgb3MubWFrZWRpcnMob3MucGF0aC5kaXJuYW1lKGRlc3RfcGF0
aCksIGV4aXN0X29rPVRydWUpCgogICAgICAgICAgICAgICAgICAgIGZpbGVfc2l6ZSA9IGl0ZW0u
Z2V0KCdzaXplJywgMCkKICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoaXRlbVsn
bmFtZSddLCBmaWxlX3NpemUpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLmRyYXdfc2Ny
ZWVuKCkKCiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBz
aHV0aWwuY29weTIoc291cmNlX3BhdGgsIGRlc3RfcGF0aCkKICAgICAgICAgICAgICAgICAgICAg
ICAgcHJvZ3Jlc3MuYWRkX3N1Y2Nlc3MoKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBpc19t
b3ZlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNfdG9fZGVsZXRlLmFwcGVuZChp
dGVtX2RhdGEpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IChJT0Vycm9yLCBPU0Vycm9yKToK
ICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX2ZhaWx1cmUoKQoKICAgICAgICAg
ICAgICAgICMgRlMg0LTQuNGA0LXQutGC0L7RgNC40Y8gLT4gRlMKICAgICAgICAgICAgICAgIGVs
aWYgaXRlbV90eXBlID09ICdmc19kaXInIGFuZCBkZXN0X3BhbmVsLm1vZGUgPT0gJ2ZzJzoKICAg
ICAgICAgICAgICAgICAgICBzb3VyY2VfZGlyID0gb3MucGF0aC5qb2luKHNvdXJjZV9wYW5lbC5m
c19icm93c2VyLmN1cnJlbnRfcGF0aCwgaXRlbVsnbmFtZSddKQoKICAgICAgICAgICAgICAgICAg
ICBpZiBsZW4oYW5hbHl6ZWQpID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRhcmdl
dF9uYW1lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9kaXIgPSBvcy5wYXRoLmpv
aW4oZGVzdF9wYW5lbC5mc19icm93c2VyLmN1cnJlbnRfcGF0aCwgdGFyZ2V0X25hbWUpCiAgICAg
ICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0
X2RpciA9IG9zLnBhdGguam9pbihkZXN0X3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCBp
dGVtWyduYW1lJ10pCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAg
ICAgICAgaWYgdGFyZ2V0X25hbWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2Rp
ciA9IG9zLnBhdGguam9pbihkZXN0X3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCB0YXJn
ZXRfbmFtZSwgaXRlbVsnbmFtZSddKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9kaXIgPSBvcy5wYXRoLmpvaW4oZGVzdF9wYW5l
bC5mc19icm93c2VyLmN1cnJlbnRfcGF0aCwgaXRlbVsnbmFtZSddKQoKICAgICAgICAgICAgICAg
ICAgICBhbGxfc3VjY2VzcyA9IFRydWUKICAgICAgICAgICAgICAgICAgICBmb3IgZmlsZV9pbmZv
IGluIGl0ZW1fZGF0YVsnZmlsZXMnXToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgcHJvZ3Jl
c3MuY2FuY2VsbGVkOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAg
ICAgICAgICAgICAgICAgIGRlc3RfcGF0aCA9IG9zLnBhdGguam9pbihkZXN0X2RpciwgZmlsZV9p
bmZvWydyZWxfcGF0aCddKQoKICAgICAgICAgICAgICAgICAgICAgICAgIyDQn9GA0L7QstC10YDQ
utCwINGB0YPRidC10YHRgtCy0L7QstCw0L3QuNGPCiAgICAgICAgICAgICAgICAgICAgICAgIGlm
IG5vdCBzZWxmLm92ZXJ3cml0ZV9hbGwgYW5kIG5vdCBzZWxmLnNraXBfYWxsOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgaWYgb3MucGF0aC5leGlzdHMoZGVzdF9wYXRoKToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0YXQgPSBvcy5zdGF0KGZpbGVfaW5mb1sncGF0aCddKQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzb3VyY2VfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICdzaXplJzogc3RhdC5zdF9zaXplLAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgJ210aW1lJzogZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChz
dGF0LnN0X210aW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nX3N0YXQgPSBvcy5zdGF0KGRl
c3RfcGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9pbmZvID0g
ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiBleGlzdGlu
Z19zdGF0LnN0X3NpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAn
bXRpbWUnOiBkYXRldGltZS5mcm9tdGltZXN0YW1wKGV4aXN0aW5nX3N0YXQuc3RfbXRpbWUpCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGRlZiBzaG93X292ZXJ3cml0ZV9kaWFsb2coKToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBvbl9jaG9pY2UoY2hvaWNlKToKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2Nob2ljZVsndmFsdWUn
XSA9IGNob2ljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNo
b2ljZV9ldmVudC5zZXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzZWxmLnNob3dfZGlhbG9nKHByb2dyZXNzKQoKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NoZWNrX292ZXJ3cml0ZShmaWxlX2luZm9bJ3Jl
bF9wYXRoJ10sIHNvdXJjZV9pbmZvLCBkZXN0X2luZm8sIG9uX2Nob2ljZSwKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zM19k
ZXN0PUZhbHNlKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29w
LnNldF9hbGFybV9pbigwLCBsYW1iZGEgKmFyZ3M6IHNob3dfb3ZlcndyaXRlX2RpYWxvZygpKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQud2FpdCgpCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC5jbGVhcigpCgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB1c2VyX2Nob2ljZVsndmFsdWUn
XSA9PSAnY2FuY2VsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBy
b2dyZXNzLmNhbmNlbGxlZCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNl
cl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ2FsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzZWxmLm92ZXJ3cml0ZV9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXAnOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKGZpbGVf
aW5mb1sncmVsX3BhdGgnXSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNl
cl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXBfYWxsJzoKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYuc2tpcF9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoZmlsZV9pbmZvWydyZWxfcGF0aCdd
LCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuc2tp
cF9hbGw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoZmlsZV9p
bmZvWydyZWxfcGF0aCddLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUK
CiAgICAgICAgICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKG9zLnBhdGguZGlybmFtZShkZXN0
X3BhdGgpLCBleGlzdF9vaz1UcnVlKQoKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZV9zaXpl
ID0gZmlsZV9pbmZvLmdldCgnc2l6ZScsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dy
ZXNzLnVwZGF0ZShmaWxlX2luZm9bJ3JlbF9wYXRoJ10sIGZpbGVfc2l6ZSkKICAgICAgICAgICAg
ICAgICAgICAgICAgc2VsZi5sb29wLmRyYXdfc2NyZWVuKCkKCiAgICAgICAgICAgICAgICAgICAg
ICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5MihmaWxlX2lu
Zm9bJ3BhdGgnXSwgZGVzdF9wYXRoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jl
c3MuYWRkX3N1Y2Nlc3MoKQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgKElPRXJyb3Is
IE9TRXJyb3IpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX2ZhaWx1
cmUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsX3N1Y2Nlc3MgPSBGYWxzZQoKICAg
ICAgICAgICAgICAgICAgICBpZiBhbGxfc3VjY2VzcyBhbmQgaXNfbW92ZToKICAgICAgICAgICAg
ICAgICAgICAgICAgaXRlbXNfdG9fZGVsZXRlLmFwcGVuZChpdGVtX2RhdGEpCgogICAgICAgICAg
ICAgICAgIyDQkdCw0LrQtdGCIC0+IFMzCiAgICAgICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9
PSAnYnVja2V0JyBhbmQgZGVzdF9wYW5lbC5tb2RlID09ICdzMycgYW5kIGRlc3RfcGFuZWwuY3Vy
cmVudF9idWNrZXQ6CiAgICAgICAgICAgICAgICAgICAgYWxsX3N1Y2Nlc3MgPSBUcnVlCiAgICAg
ICAgICAgICAgICAgICAgZm9yIG9iaiBpbiBpdGVtX2RhdGFbJ2ZpbGVzJ106CiAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIHByb2dyZXNzLmNhbmNlbGxlZDoKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgICAgICAgICBpZiBsZW4oYW5hbHl6ZWQpID09
IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0YXJnZXRfbmFtZToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2tleSA9IHRhcmdldF9uYW1lLnJzdHJpcCgnLycp
ICsgJy8nICsgb2JqWydLZXknXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2tleSA9IG9ialsnS2V5J10KICAgICAg
ICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRh
cmdldF9uYW1lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3Rfa2V5ID0gdGFy
Z2V0X25hbWUucnN0cmlwKCcvJykgKyAnLycgKyBpdGVtWyduYW1lJ10gKyAnLycgKyBvYmpbJ0tl
eSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGRlc3Rfa2V5ID0gaXRlbVsnbmFtZSddICsgJy8nICsgb2JqWydLZXknXQoK
ICAgICAgICAgICAgICAgICAgICAgICAgIyDQn9GA0L7QstC10YDQutCwINGB0YPRidC10YHRgtCy
0L7QstCw0L3QuNGPCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLm92ZXJ3cml0
ZV9hbGwgYW5kIG5vdCBzZWxmLnZlcnNpb25fYWxsIGFuZCBub3Qgc2VsZi5za2lwX2FsbDoKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gZGVzdF9wYW5lbC5zM19tYW5hZ2Vy
Lm9iamVjdF9leGlzdHMoZGVzdF9wYW5lbC5jdXJyZW50X2J1Y2tldCwgZGVzdF9rZXkpCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBpZiBleGlzdGluZzoKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzb3VyY2VfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgJ3NpemUnOiBvYmouZ2V0KCdTaXplJywgMCksCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICdtdGltZSc6IG9iai5nZXQoJ0xhc3RNb2RpZmllZCcsIGRhdGV0aW1lLm5v
dygpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBkZXN0X2luZm8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICdzaXplJzogZXhpc3RpbmcuZ2V0KCdTaXplJywgMCksCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICdtdGltZSc6IGV4aXN0aW5nLmdldCgnTGFzdE1vZGlmaWVkJykK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGRlZiBzaG93X292ZXJ3cml0ZV9kaWFsb2coKToKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZGVmIG9uX2Nob2ljZShjaG9pY2UpOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPSBjaG9pY2UKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC5zZXQoKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZV9kaWFsb2co
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X2RpYWxv
Zyhwcm9ncmVzcykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2No
ZWNrX292ZXJ3cml0ZShvYmpbJ0tleSddLCBzb3VyY2VfaW5mbywgZGVzdF9pbmZvLCBvbl9jaG9p
Y2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBpc19zM19kZXN0PVRydWUpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNl
bGYubG9vcC5zZXRfYWxhcm1faW4oMCwgbGFtYmRhICphcmdzOiBzaG93X292ZXJ3cml0ZV9kaWFs
b2coKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQud2FpdCgp
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LmNsZWFyKCkKCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0g
J2NhbmNlbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmNh
bmNlbGxlZCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSdd
ID09ICdhbGwnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm92ZXJ3
cml0ZV9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2Vy
X2Nob2ljZVsndmFsdWUnXSA9PSAndmVyc2lvbl9hbGwnOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzZWxmLnZlcnNpb25fYWxsID0gVHJ1ZQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXAnOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUob2JqWydLZXknXSwg
MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdza2lw
X2FsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2tpcF9hbGwg
PSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0
ZShvYmpbJ0tleSddLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250
aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5za2lwX2FsbDoKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShvYmpbJ0tleSddLCAwKQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgICAgIGZp
bGVfc2l6ZSA9IG9iai5nZXQoJ1NpemUnLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBwcm9n
cmVzcy51cGRhdGUob2JqWydLZXknXSwgZmlsZV9zaXplKQogICAgICAgICAgICAgICAgICAgICAg
ICBzZWxmLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc291
cmNlX3BhbmVsLnMzX21hbmFnZXIuY29weV9vYmplY3QoCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgaXRlbVsnbmFtZSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9i
alsnS2V5J10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9wYW5lbC5jdXJy
ZW50X2J1Y2tldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2tleQogICAg
ICAgICAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jl
c3MuYWRkX3N1Y2Nlc3MoKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX2ZhaWx1cmUoKQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgYWxsX3N1Y2Nlc3MgPSBGYWxzZQoKICAgICAgICAgICAgICAgICAgICBpZiBh
bGxfc3VjY2VzcyBhbmQgaXNfbW92ZToKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNfdG9f
ZGVsZXRlLmFwcGVuZChpdGVtX2RhdGEpCgogICAgICAgICAgICAjINCj0LTQsNC70Y/QtdC8INGD
0YHQv9C10YjQvdC+INC/0LXRgNC10LzQtdGJ0LXQvdC90YvQtSDRjdC70LXQvNC10L3RgtGLCiAg
ICAgICAgICAgIGlmIGlzX21vdmU6CiAgICAgICAgICAgICAgICBmb3IgaXRlbV9kYXRhIGluIGl0
ZW1zX3RvX2RlbGV0ZToKICAgICAgICAgICAgICAgICAgICBpdGVtX3R5cGUgPSBpdGVtX2RhdGFb
J3R5cGUnXQogICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtX2RhdGFbJ2l0ZW0nXQoKICAg
ICAgICAgICAgICAgICAgICBpZiBpdGVtX3R5cGUgPT0gJ2ZzX2ZpbGUnOgogICAgICAgICAgICAg
ICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfcGF0aCA9
IG9zLnBhdGguam9pbihzb3VyY2VfcGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIGl0ZW1b
J25hbWUnXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzb3VyY2VfcGF0
aCkKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAgICAgICAgICAgIGVsaWYgaXRlbV90eXBlID09
ICdmc19kaXInOgogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBkaXJfcGF0aCA9IG9zLnBhdGguam9pbihzb3VyY2VfcGFuZWwuZnNfYnJvd3Nl
ci5jdXJyZW50X3BhdGgsIGl0ZW1bJ25hbWUnXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHNodXRpbC5ybXRyZWUoZGlyX3BhdGgpCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBP
U0Vycm9yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgICAg
ICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnczNfZmlsZSc6CiAgICAgICAgICAgICAgICAgICAgICAg
IHZlcnNpb25faWQgPSBpdGVtLmdldCgnVmVyc2lvbklkJykKICAgICAgICAgICAgICAgICAgICAg
ICAgc291cmNlX3BhbmVsLnMzX21hbmFnZXIuZGVsZXRlX29iamVjdChzb3VyY2VfcGFuZWwuY3Vy
cmVudF9idWNrZXQsIGl0ZW1bJ2tleSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25faWQ9dmVyc2lvbl9pZCkKCiAg
ICAgICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ3MzX2Rpcic6CiAgICAgICAgICAg
ICAgICAgICAgICAgIGZvciBvYmogaW4gaXRlbV9kYXRhWydmaWxlcyddOgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc291cmNlX3BhbmVsLnMzX21hbmFnZXIuZGVsZXRlX29iamVjdChzb3Vy
Y2VfcGFuZWwuY3VycmVudF9idWNrZXQsIG9ialsnS2V5J10pCgogICAgICAgICAgICAgICAgICAg
IGVsaWYgaXRlbV90eXBlID09ICdidWNrZXQnOgogICAgICAgICAgICAgICAgICAgICAgICBmb3Ig
b2JqIGluIGl0ZW1fZGF0YVsnZmlsZXMnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNv
dXJjZV9wYW5lbC5zM19tYW5hZ2VyLmRlbGV0ZV9vYmplY3QoaXRlbVsnbmFtZSddLCBvYmpbJ0tl
eSddKQogICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfcGFuZWwuczNfbWFuYWdlci5kZWxl
dGVfYnVja2V0KGl0ZW1bJ25hbWUnXSkKCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAg
ICAgICAgICBzZWxmLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICB0aHJlYWQgPSB0aHJlYWRp
bmcuVGhyZWFkKHRhcmdldD1jb3B5X3RocmVhZCkKICAgICAgICB0aHJlYWQuZGFlbW9uID0gVHJ1
ZQogICAgICAgIHRocmVhZC5zdGFydCgpCgogICAgICAgIGRlZiBjaGVja190aHJlYWQoKToKICAg
ICAgICAgICAgaWYgdGhyZWFkLmlzX2FsaXZlKCk6CiAgICAgICAgICAgICAgICBzZWxmLmxvb3Au
c2V0X2FsYXJtX2luKDAuMSwgbGFtYmRhICphcmdzOiBjaGVja190aHJlYWQoKSkKICAgICAgICAg
ICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKCiAgICAgICAgICAg
ICAgICAjINCe0LHQvdC+0LLQu9GP0LXQvCDRhtC10LvQtdCy0YPRjiDQv9Cw0L3QtdC70YwKICAg
ICAgICAgICAgICAgIGRlc3RfcGFuZWwucmVmcmVzaCgpCgogICAgICAgICAgICAgICAgaWYgcmVz
dG9yZV9pbmRleCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBzb3VyY2VfcGFuZWwu
cmVzdG9yZV9mb2N1c19pbmRleCA9IHJlc3RvcmVfaW5kZXgKCiAgICAgICAgICAgICAgICBpZiBv
bl9jb21wbGV0ZToKICAgICAgICAgICAgICAgICAgICAjINCS0JDQltCd0J46INCS0YvQt9GL0LLQ
sNC10LwgY2FsbGJhY2sg0YfQtdGA0LXQtyDRgtCw0LnQvNC10YAsINGH0YLQvtCx0Ysg0YDQsNC3
0L7RgNCy0LDRgtGMINGG0LXQv9C+0YfQutGDINGB0L7QsdGL0YLQuNC5IFVJCiAgICAgICAgICAg
ICAgICAgICAgIyDQrdGC0L4g0L/RgNC10LTQvtGC0LLRgNCw0YnQsNC10YIg0LzQs9C90L7QstC1
0L3QvdC+0LUg0LfQsNC60YDRi9GC0LjQtSDQvdC+0LLQvtCz0L4g0LTQuNCw0LvQvtCz0LAKICAg
ICAgICAgICAgICAgICAgICBzZWxmLmxvb3Auc2V0X2FsYXJtX2luKDAsIGxhbWJkYSAqYXJnczog
b25fY29tcGxldGUoKSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAg
IyDQodGC0LDQvdC00LDRgNGC0L3QvtC1INC/0L7QstC10LTQtdC90LjQtTog0L7QsdC90L7QstC7
0Y/QtdC8INC40YHRhdC+0LTQvdGD0Y4g0L/QsNC90LXQu9GMCiAgICAgICAgICAgICAgICAgICAg
aWYgcmVzdG9yZV9pbmRleCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgc291
cmNlX3BhbmVsLnJlc3RvcmVfZm9jdXNfaW5kZXggPSByZXN0b3JlX2luZGV4CgogICAgICAgICAg
ICAgICAgICAgIGlmIGZvY3VzX25hbWU6CiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9w
YW5lbC5yZWZyZXNoKGZvY3VzX29uPWZvY3VzX25hbWUpCiAgICAgICAgICAgICAgICAgICAgZWxz
ZToKICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlX3BhbmVsLnJlZnJlc2goKQoKICAgICAg
ICAgICAgICAgICAgICAjINCV0YHQu9C4INC+0LHQvdC+0LLQu9C10L3QuNC1INCx0YvQu9C+INGB
0LjQvdGF0YDQvtC90L3Ri9C8IChGUyksINCy0L7RgdGB0YLQsNC90LDQstC70LjQstCw0LXQvCDQ
uNC90LTQtdC60YEg0LLRgNGD0YfQvdGD0Y4g0L/RgNGP0LzQviDQt9C00LXRgdGMCiAgICAgICAg
ICAgICAgICAgICAgaWYgbm90IGdldGF0dHIoc291cmNlX3BhbmVsLCAnbG9hZGluZ19pbl9wcm9n
cmVzcycsIEZhbHNlKSBhbmQgbGVuKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNl
X3BhbmVsLndhbGtlcikgPiAwIGFuZCByZXN0b3JlX2luZGV4IGlzIG5vdCBOb25lOgogICAgICAg
ICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdfaWR4
ID0gbWluKHJlc3RvcmVfaW5kZXgsIGxlbihzb3VyY2VfcGFuZWwud2Fsa2VyKSAtIDEpCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfcGFuZWwubGlzdGJveC5zZXRfZm9jdXMobmV3
X2lkeCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9wYW5lbC5yZXN0b3JlX2Zv
Y3VzX2luZGV4ID0gTm9uZQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAgICAgICAgb3BlcmF0aW9uID0gJ01v
dmVkJyBpZiBpc19tb3ZlIGVsc2UgJ0NvcGllZCcKICAgICAgICAgICAgICAgIHNwZWVkX3N0ciA9
IHByb2dyZXNzLmdldF9zcGVlZF9zdHIoKQogICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3Vs
dCgKICAgICAgICAgICAgICAgICAgICBmJ3tvcGVyYXRpb259OiB7cHJvZ3Jlc3Muc3VjY2Vzc19j
b3VudH0gZmlsZShzKSwgRmFpbGVkOiB7cHJvZ3Jlc3MuZmFpbF9jb3VudH0gZmlsZShzKSwgJwog
ICAgICAgICAgICAgICAgICAgIGYnVG90YWw6IHtmb3JtYXRfc2l6ZShwcm9ncmVzcy5wcm9jZXNz
ZWRfYnl0ZXMpfSwgU3BlZWQ6IHtzcGVlZF9zdHJ9JwogICAgICAgICAgICAgICAgKQoKICAgICAg
ICBzZWxmLmxvb3Auc2V0X2FsYXJtX2luKDAuMSwgbGFtYmRhICphcmdzOiBjaGVja190aHJlYWQo
KSkKCiAgICBkZWYgdG9nZ2xlX3ZlcnNpb25pbmcoc2VsZik6CiAgICAgICAgYWN0aXZlX3BhbmVs
ID0gc2VsZi5nZXRfYWN0aXZlX3BhbmVsKCkKCiAgICAgICAgaWYgYWN0aXZlX3BhbmVsLm1vZGUg
IT0gJ3MzJyBvciBub3QgYWN0aXZlX3BhbmVsLmN1cnJlbnRfYnVja2V0OgogICAgICAgICAgICBz
ZWxmLnNob3dfcmVzdWx0KCdUaGlzIGZ1bmN0aW9uIHdvcmtzIG9ubHkgd2l0aCBTMyBidWNrZXRz
JywgJ3dhcm5pbmcnKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc3RhdHVzID0gYWN0aXZl
X3BhbmVsLnMzX21hbmFnZXIuZ2V0X3ZlcnNpb25pbmdfc3RhdHVzKGFjdGl2ZV9wYW5lbC5jdXJy
ZW50X2J1Y2tldCkKCiAgICAgICAgaWYgc3RhdHVzID09ICdFbmFibGVkJzoKICAgICAgICAgICAg
IyDQktC10YDRgdC40L7QvdC40YDQvtCy0LDQvdC40LUg0LLQutC70Y7Rh9C10L3QviAtINC/0YDQ
tdC00LvQsNCz0LDQtdC8INC+0YLQutC70Y7Rh9C40YLRjAogICAgICAgICAgICBkZWYgY2FsbGJh
Y2soY29uZmlybWVkKToKICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAg
ICAgICAgICAgIGlmIGNvbmZpcm1lZDoKICAgICAgICAgICAgICAgICAgICBpZiBhY3RpdmVfcGFu
ZWwuczNfbWFuYWdlci5kaXNhYmxlX3ZlcnNpb25pbmcoYWN0aXZlX3BhbmVsLmN1cnJlbnRfYnVj
a2V0KToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdChmJ1ZlcnNpb25p
bmcgU1VTUEVOREVEIGZvciBidWNrZXQgInthY3RpdmVfcGFuZWwuY3VycmVudF9idWNrZXR9Iicp
CiAgICAgICAgICAgICAgICAgICAgICAgICMgYWN0aXZlX3BhbmVsLnJlZnJlc2goKQogICAgICAg
ICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1
bHQoZidGYWlsZWQgdG8gc3VzcGVuZCB2ZXJzaW9uaW5nJywnZXJyb3InKQoKICAgICAgICAgICAg
bWVzc2FnZSA9IGYnU3VzcGVuZCB2ZXJzaW9uaW5nIGZvciBidWNrZXQgInthY3RpdmVfcGFuZWwu
Y3VycmVudF9idWNrZXR9Ij9cbihFeGlzdGluZyB2ZXJzaW9ucyB3aWxsIGJlIHByZXNlcnZlZCkn
CiAgICAgICAgICAgIGRpYWxvZyA9IENvbmZpcm1EaWFsb2coJ1N1c3BlbmQgVmVyc2lvbmluZycs
IG1lc3NhZ2UsIFtdLCBjYWxsYmFjaykKICAgICAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhkaWFs
b2cpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyDQktC10YDRgdC40L7QvdC40YDQvtCy0LDQ
vdC40LUg0L7RgtC60LvRjtGH0LXQvdC+IC0g0L/RgNC10LTQu9Cw0LPQsNC10Lwg0LLQutC70Y7R
h9C40YLRjAogICAgICAgICAgICBkZWYgY2FsbGJhY2soY29uZmlybWVkKToKICAgICAgICAgICAg
ICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgICAgIGlmIGNvbmZpcm1lZDoKICAg
ICAgICAgICAgICAgICAgICBpZiBhY3RpdmVfcGFuZWwuczNfbWFuYWdlci5lbmFibGVfdmVyc2lv
bmluZyhhY3RpdmVfcGFuZWwuY3VycmVudF9idWNrZXQpOgogICAgICAgICAgICAgICAgICAgICAg
ICBzZWxmLnNob3dfcmVzdWx0KGYnVmVyc2lvbmluZyBFTkFCTEVEIGZvciBidWNrZXQgInthY3Rp
dmVfcGFuZWwuY3VycmVudF9idWNrZXR9IicpCiAgICAgICAgICAgICAgICAgICAgICAgICMgYWN0
aXZlX3BhbmVsLnJlZnJlc2goKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
ICAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoZidGYWlsZWQgdG8gZW5hYmxlIHZlcnNpb25p
bmcnKQoKICAgICAgICAgICAgY3VycmVudF9zdGF0dXMgPSAiRElTQUJMRUQiIGlmIHN0YXR1cyBp
cyBOb25lIG9yIHN0YXR1cyA9PSAnRGlzYWJsZWQnIGVsc2UgIlNVU1BFTkRFRCIKICAgICAgICAg
ICAgbWVzc2FnZSA9IGYnRW5hYmxlIHZlcnNpb25pbmcgZm9yIGJ1Y2tldCAie2FjdGl2ZV9wYW5l
bC5jdXJyZW50X2J1Y2tldH0iP1xuKEN1cnJlbnQgc3RhdHVzOiB7Y3VycmVudF9zdGF0dXN9KScK
ICAgICAgICAgICAgZGlhbG9nID0gQ29uZmlybURpYWxvZygnRW5hYmxlIFZlcnNpb25pbmcnLCBt
ZXNzYWdlLCBbXSwgY2FsbGJhY2spCiAgICAgICAgICAgIHNlbGYuc2hvd19kaWFsb2coZGlhbG9n
KQoKICAgIGRlZiBkZWxldGVfaXRlbXMoc2VsZik6CiAgICAgICAgYWN0aXZlX3BhbmVsID0gc2Vs
Zi5nZXRfYWN0aXZlX3BhbmVsKCkKCiAgICAgICAgaWYgYWN0aXZlX3BhbmVsLmlzX3Jvb3RfbWVu
dSgpIG9yIGFjdGl2ZV9wYW5lbC5pc19lbmRwb2ludF9saXN0KCk6CiAgICAgICAgICAgIHNlbGYu
c2hvd19yZXN1bHQoJ0Nhbm5vdCBkZWxldGUgZnJvbSB0aGlzIGxldmVsJykKICAgICAgICAgICAg
cmV0dXJuCgogICAgICAgIHNlbGVjdGVkX2l0ZW1zID0gYWN0aXZlX3BhbmVsLmdldF9zZWxlY3Rl
ZF9pdGVtcygpCiAgICAgICAgaWYgbm90IHNlbGVjdGVkX2l0ZW1zOgogICAgICAgICAgICBmb2N1
c2VkID0gYWN0aXZlX3BhbmVsLmdldF9mb2N1c2VkX2l0ZW0oKQogICAgICAgICAgICBpZiBmb2N1
c2VkIGFuZCBmb2N1c2VkWyd0eXBlJ10gaW4gKCdidWNrZXQnLCAnZnNfZmlsZScsICdzM19maWxl
JywgJ2ZzX2RpcicsICdzM19kaXInKToKICAgICAgICAgICAgICAgIHNlbGVjdGVkX2l0ZW1zID0g
W2ZvY3VzZWRdCgogICAgICAgIGlmIG5vdCBzZWxlY3RlZF9pdGVtczoKICAgICAgICAgICAgc2Vs
Zi5zaG93X3Jlc3VsdCgnTm8gaXRlbXMgdG8gZGVsZXRlJykKICAgICAgICAgICAgcmV0dXJuCgog
ICAgICAgIGFuYWx5emVkLCBpdGVtc19pbmZvLCB0b3RhbF9ieXRlcyA9IHNlbGYuYW5hbHl6ZV9p
dGVtcyhzZWxlY3RlZF9pdGVtcywgYWN0aXZlX3BhbmVsKQogICAgICAgIHRvdGFsX2ZpbGVzID0g
c3VtKGxlbihhWydmaWxlcyddKSBmb3IgYSBpbiBhbmFseXplZCkKCiAgICAgICAgZGVmIGNhbGxi
YWNrKGNvbmZpcm1lZCk6CiAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAg
ICAgaWYgY29uZmlybWVkOgogICAgICAgICAgICAgICAgY3VycmVudF9pdGVtID0gYWN0aXZlX3Bh
bmVsLmdldF9mb2N1c2VkX2l0ZW0oKQogICAgICAgICAgICAgICAgZm9jdXNfbmFtZSA9IGN1cnJl
bnRfaXRlbS5nZXQoJ25hbWUnKSBpZiBjdXJyZW50X2l0ZW0gZWxzZSBOb25lCgogICAgICAgICAg
ICAgICAgZm9jdXNfaW5kZXggPSBhY3RpdmVfcGFuZWwubGlzdGJveC5mb2N1c19wb3NpdGlvbgoK
ICAgICAgICAgICAgICAgIHNlbGYuX2RvX2RlbGV0ZV93aXRoX3Byb2dyZXNzKGFuYWx5emVkLCBh
Y3RpdmVfcGFuZWwsIGZvY3VzX25hbWUsIHRvdGFsX2J5dGVzLCByZXN0b3JlX2luZGV4PWZvY3Vz
X2luZGV4KQoKICAgICAgICBtZXNzYWdlID0gZidEZWxldGUge2xlbihzZWxlY3RlZF9pdGVtcyl9
IGl0ZW0ocykgKHt0b3RhbF9maWxlc30gZmlsZShzKSB0b3RhbCk/XG5UaGlzIGFjdGlvbiBjYW5u
b3QgYmUgdW5kb25lIScKICAgICAgICBkaWFsb2cgPSBDb25maXJtRGlhbG9nKCdDb25maXJtIERl
bGV0ZScsIG1lc3NhZ2UsIGl0ZW1zX2luZm8sIGNhbGxiYWNrKQogICAgICAgIHNlbGYuc2hvd19k
aWFsb2coZGlhbG9nKQoKICAgIGRlZiBfZG9fZGVsZXRlX3dpdGhfcHJvZ3Jlc3Moc2VsZiwgYW5h
bHl6ZWQsIHBhbmVsLCBmb2N1c19uYW1lLCB0b3RhbF9ieXRlcywgcmVzdG9yZV9pbmRleD1Ob25l
KToKICAgICAgICAiIiIKICAgICAgICDQktGL0L/QvtC70L3Rj9C10YIg0YPQtNCw0LvQtdC90LjQ
tSDQstGL0LHRgNCw0L3QvdGL0YUg0L7QsdGK0LXQutGC0L7QsiAo0YTQsNC50LvQvtCyLCDQv9Cw
0L/QvtC6LCDQstC10YDRgdC40LkpINCyINGE0L7QvdC+0LLQvtC8INC/0L7RgtC+0LrQtSDRgSDQ
vtGC0L7QsdGA0LDQttC10L3QuNC10Lwg0L/RgNC+0LPRgNC10YHRgdCwLgoKICAgICAgICDQkNGA
0LPRg9C80LXQvdGC0Ys6CiAgICAgICAgICAgIGFuYWx5emVkIChsaXN0KTog0KHQv9C40YHQvtC6
INC/0L7QtNCz0L7RgtC+0LLQu9C10L3QvdGL0YUg0Log0YPQtNCw0LvQtdC90LjRjiDQvtCx0YrQ
tdC60YLQvtCyLgogICAgICAgICAgICBwYW5lbCAoUGFuZWxXaWRnZXQpOiDQn9Cw0L3QtdC70Yws
INCyINC60L7RgtC+0YDQvtC5INC/0YDQvtC40YHRhdC+0LTQuNGCINGD0LTQsNC70LXQvdC40LUu
CiAgICAgICAgICAgIGZvY3VzX25hbWUgKHN0cik6INCY0LzRjyDRhNCw0LnQu9CwLCDQvdCwINC6
0L7RgtC+0YDRi9C5INC90YPQttC90L4g0L/QtdGA0LXQstC10YHRgtC4INGE0L7QutGD0YEg0L/Q
vtGB0LvQtSDRg9C00LDQu9C10L3QuNGPINGC0LXQutGD0YnQtdCz0L4gKNC+0LHRi9GH0L3QviDR
gdC70LXQtNGD0Y7RidC40Lkg0LjQu9C4INC/0YDQtdC00YvQtNGD0YnQuNC5INGE0LDQudC7KS4K
ICAgICAgICAgICAgdG90YWxfYnl0ZXMgKGludCk6INCe0LHRidC40Lkg0YDQsNC30LzQtdGAINGD
0LTQsNC70Y/QtdC80YvRhSDQtNCw0L3QvdGL0YUgKNC40YHQv9C+0LvRjNC30YPQtdGC0YHRjyDQ
tNC70Y8g0LLQuNC30YPQsNC70LjQt9Cw0YbQuNC4INC/0YDQvtCz0YDQtdGB0YHQsCwg0YXQvtGC
0Y8g0YPQtNCw0LvQtdC90LjQtSDRh9Cw0YHRgtC+INC+0LPRgNCw0L3QuNGH0LXQvdC+IElPUFMs
INCwINC90LUg0LrQsNC90LDQu9C+0LwpLgogICAgICAgICAgICByZXN0b3JlX2luZGV4IChpbnQs
IG9wdGlvbmFsKTog0JjQvdC00LXQutGBINGB0YLRgNC+0LrQuCDRgdC/0LjRgdC60LAg0LTQu9GP
INCy0L7RgdGB0YLQsNC90L7QstC70LXQvdC40Y8g0L/QvtC30LjRhtC40Lgg0LrRg9GA0YHQvtGA
0LAg0L/QvtGB0LvQtSDQvtCx0L3QvtCy0LvQtdC90LjRjyDQv9Cw0L3QtdC70LguCiAgICAgICAg
IiIiCiAgICAgICAgdG90YWxfZmlsZXMgPSBzdW0obGVuKGFbJ2ZpbGVzJ10pIGZvciBhIGluIGFu
YWx5emVkKQoKICAgICAgICBwcm9ncmVzcyA9IFByb2dyZXNzRGlhbG9nKCdEZWxldGluZyBmaWxl
cy4uLicsIGNhbGxiYWNrPXNlbGYuY2xvc2VfZGlhbG9nKQogICAgICAgIHByb2dyZXNzLnNldF90
b3RhbCh0b3RhbF9maWxlcywgdG90YWxfYnl0ZXMpCiAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhw
cm9ncmVzcykKCiAgICAgICAgZGVmIGRlbGV0ZV90aHJlYWQoKToKICAgICAgICAgICAgZm9yIGl0
ZW1fZGF0YSBpbiBhbmFseXplZDoKICAgICAgICAgICAgICAgIGlmIHByb2dyZXNzLmNhbmNlbGxl
ZDoKICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgICAgIGl0ZW1fdHlwZSA9
IGl0ZW1fZGF0YVsndHlwZSddCiAgICAgICAgICAgICAgICBpdGVtID0gaXRlbV9kYXRhWydpdGVt
J10KCiAgICAgICAgICAgICAgICBpZiBpdGVtX3R5cGUgPT0gJ2J1Y2tldCc6CiAgICAgICAgICAg
ICAgICAgICAgZm9yIG9iaiBpbiBpdGVtX2RhdGFbJ2ZpbGVzJ106CiAgICAgICAgICAgICAgICAg
ICAgICAgIGlmIHByb2dyZXNzLmNhbmNlbGxlZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGJyZWFrCgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemUgPSBvYmouZ2V0KCdTaXpl
JywgMCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKG9ialsnS2V5J10s
IGZpbGVfc2l6ZSkKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLmRyYXdfc2NyZWVu
KCkKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBhbmVsLnMzX21hbmFnZXIuZGVsZXRlX29i
amVjdChpdGVtWyduYW1lJ10sIG9ialsnS2V5J10pOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgcHJvZ3Jlc3MuYWRkX3N1Y2Nlc3MoKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX2ZhaWx1cmUoKQogICAgICAg
ICAgICAgICAgICAgIHBhbmVsLnMzX21hbmFnZXIuZGVsZXRlX2J1Y2tldChpdGVtWyduYW1lJ10p
CgogICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ3MzX2ZpbGUnOgogICAgICAgICAg
ICAgICAgICAgIGZpbGVfc2l6ZSA9IGl0ZW0uZ2V0KCdzaXplJywgMCkKICAgICAgICAgICAgICAg
ICAgICBwcm9ncmVzcy51cGRhdGUoaXRlbVsnbmFtZSddLCBmaWxlX3NpemUpCiAgICAgICAgICAg
ICAgICAgICAgc2VsZi5sb29wLmRyYXdfc2NyZWVuKCkKCiAgICAgICAgICAgICAgICAgICAgaWYg
cGFuZWwuczNfbWFuYWdlci5kZWxldGVfb2JqZWN0KHBhbmVsLmN1cnJlbnRfYnVja2V0LCBpdGVt
WydrZXknXSk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFkZF9zdWNjZXNzKCkK
ICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVz
cy5hZGRfZmFpbHVyZSgpCgogICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ3MzX2Rp
cic6CiAgICAgICAgICAgICAgICAgICAgZm9yIG9iaiBpbiBpdGVtX2RhdGFbJ2ZpbGVzJ106CiAg
ICAgICAgICAgICAgICAgICAgICAgIGlmIHByb2dyZXNzLmNhbmNlbGxlZDoKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemUg
PSBvYmouZ2V0KCdTaXplJywgMCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBk
YXRlKG9ialsnS2V5J10sIGZpbGVfc2l6ZSkKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5s
b29wLmRyYXdfc2NyZWVuKCkKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBhbmVsLnMzX21h
bmFnZXIuZGVsZXRlX29iamVjdChwYW5lbC5jdXJyZW50X2J1Y2tldCwgb2JqWydLZXknXSk6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfc3VjY2VzcygpCiAgICAgICAg
ICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVz
cy5hZGRfZmFpbHVyZSgpCgogICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ2ZzX2Zp
bGUnOgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgZmls
ZV9wYXRoID0gb3MucGF0aC5qb2luKHBhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCBpdGVt
WyduYW1lJ10pCgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemUgPSBpdGVtLmdldCgn
c2l6ZScsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShpdGVtWydu
YW1lJ10sIGZpbGVfc2l6ZSkKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLmRyYXdf
c2NyZWVuKCkKCiAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShmaWxlX3BhdGgpCiAg
ICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFkZF9zdWNjZXNzKCkKICAgICAgICAgICAg
ICAgICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3Mu
YWRkX2ZhaWx1cmUoKQoKICAgICAgICAgICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdmc19kaXIn
OgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgZGlyX3Bh
dGggPSBvcy5wYXRoLmpvaW4ocGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIGl0ZW1bJ25h
bWUnXSkKCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBmaWxlX2luZm8gaW4gaXRlbV9kYXRh
WydmaWxlcyddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcHJvZ3Jlc3MuY2FuY2Vs
bGVkOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZmlsZV9zaXplID0gZmlsZV9pbmZvLmdldCgnc2l6ZScsIDApCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoZmlsZV9pbmZvWydyZWxfcGF0
aCddLCBmaWxlX3NpemUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvb3AuZHJh
d19zY3JlZW4oKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNodXRpbC5ybXRyZWUoZGly
X3BhdGgpCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnN1Y2Nlc3NfY291bnQgKz0g
bGVuKGl0ZW1fZGF0YVsnZmlsZXMnXSkKICAgICAgICAgICAgICAgICAgICBleGNlcHQgT1NFcnJv
cjoKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuZmFpbF9jb3VudCArPSBsZW4oaXRl
bV9kYXRhWydmaWxlcyddKQoKICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAg
IHNlbGYubG9vcC5kcmF3X3NjcmVlbigpCgogICAgICAgIHRocmVhZCA9IHRocmVhZGluZy5UaHJl
YWQodGFyZ2V0PWRlbGV0ZV90aHJlYWQpCiAgICAgICAgdGhyZWFkLmRhZW1vbiA9IFRydWUKICAg
ICAgICB0aHJlYWQuc3RhcnQoKQoKICAgICAgICBkZWYgY2hlY2tfdGhyZWFkKCk6CiAgICAgICAg
ICAgIGlmIHRocmVhZC5pc19hbGl2ZSgpOgogICAgICAgICAgICAgICAgc2VsZi5sb29wLnNldF9h
bGFybV9pbigwLjEsIGxhbWJkYSAqYXJnczogY2hlY2tfdGhyZWFkKCkpCiAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlX2RpYWxvZygpCgogICAgICAgICAgICAgICAg
c3BlZWRfc3RyID0gcHJvZ3Jlc3MuZ2V0X3NwZWVkX3N0cigpCgogICAgICAgICAgICAgICAgIyDQ
o9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDQttC10LvQsNC10LzRi9C5INC40L3QtNC10LrRgSDQ
siDQv9Cw0L3QtdC70YwKICAgICAgICAgICAgICAgIGlmIHJlc3RvcmVfaW5kZXggaXMgbm90IE5v
bmU6CiAgICAgICAgICAgICAgICAgICAgcGFuZWwucmVzdG9yZV9mb2N1c19pbmRleCA9IHJlc3Rv
cmVfaW5kZXgKCiAgICAgICAgICAgICAgICAjINCX0LDQv9GD0YHQutCw0LXQvCDQvtCx0L3QvtCy
0LvQtdC90LjQtSAo0L7QvdC+INC80L7QttC10YIg0LHRi9GC0Ywg0LDRgdC40L3RhdGA0L7QvdC9
0YvQvCkKICAgICAgICAgICAgICAgIHBhbmVsLnJlZnJlc2goKQoKICAgICAgICAgICAgICAgICMg
0JXRgdC70Lgg0L7QsdC90L7QstC70LXQvdC40LUg0LHRi9C70L4g0YHQuNC90YXRgNC+0L3QvdGL
0LwgKEZTINC40LvQuCDQsdCw0LrQtdGC0YspLCDQstC+0YHRgdGC0LDQvdCw0LLQu9C40LLQsNC1
0Lwg0YHRgNCw0LfRgwogICAgICAgICAgICAgICAgIyAo0LTQu9GPINCw0YHQuNC90YXRgNC+0L3Q
vdC+0LPQviBTMyDRjdGC0L4g0YHRgNCw0LHQvtGC0LDQtdGCINC/0L7Qt9C20LUg0LIgX2ZpbmFs
aXplX2xvYWRpbmcpCiAgICAgICAgICAgICAgICBpZiBub3QgZ2V0YXR0cihwYW5lbCwgJ2xvYWRp
bmdfaW5fcHJvZ3Jlc3MnLCBGYWxzZSkgYW5kIGxlbihwYW5lbC53YWxrZXIpID4gMCBhbmQgcmVz
dG9yZV9pbmRleCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAg
ICAgICAgICAgICAgICAgIG5ld19pZHggPSBtaW4ocmVzdG9yZV9pbmRleCwgbGVuKHBhbmVsLndh
bGtlcikgLSAxKQogICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC5saXN0Ym94LnNldF9mb2N1
cyhuZXdfaWR4KQogICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC5yZXN0b3JlX2ZvY3VzX2lu
ZGV4ID0gTm9uZQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAg
ICAgICAgcGFzcwoKICAgICAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoCiAgICAgICAgICAg
ICAgICAgICAgZidEZWxldGVkOiB7cHJvZ3Jlc3Muc3VjY2Vzc19jb3VudH0gZmlsZShzKSwgRmFp
bGVkOiB7cHJvZ3Jlc3MuZmFpbF9jb3VudH0gZmlsZShzKSwgJwogICAgICAgICAgICAgICAgICAg
IGYnVG90YWw6IHtmb3JtYXRfc2l6ZShwcm9ncmVzcy5wcm9jZXNzZWRfYnl0ZXMpfSwgU3BlZWQ6
IHtzcGVlZF9zdHJ9JwogICAgICAgICAgICAgICAgKQoKICAgICAgICBzZWxmLmxvb3Auc2V0X2Fs
YXJtX2luKDAuMSwgbGFtYmRhICphcmdzOiBjaGVja190aHJlYWQoKSkKCgpjbGFzcyBGaWxlSW5m
b0RpYWxvZyh1cndpZC5XaWRnZXRXcmFwKToKICAgICIiItCU0LjQsNC70L7QsyDQtNC10YLQsNC7
0YzQvdC+0Lkg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0YTQsNC50LvQtS/QsdCw0LrQtdGC0LUi
IiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdGl0bGUsIGluZm9fZGljdCwgY2xvc2VfY2FsbGJh
Y2spOgogICAgICAgIHNlbGYuY2xvc2VfY2FsbGJhY2sgPSBjbG9zZV9jYWxsYmFjawoKICAgICAg
ICBpdGVtcyA9IFtdCgogICAgICAgIGtleXNfZm9yX2NhbGMgPSBbayBmb3IgayBpbiBpbmZvX2Rp
Y3Qua2V5cygpIGlmIGsgIT0gJ1VSTF9GVUxMJyBhbmQgbm90IGsuc3RhcnRzd2l0aCgnLS0tJyld
CiAgICAgICAgbWF4X2tleV9sZW4gPSBtYXgoW2xlbihrKSBmb3IgayBpbiBrZXlzX2Zvcl9jYWxj
XSkgaWYga2V5c19mb3JfY2FsYyBlbHNlIDAKCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gaW5m
b19kaWN0Lml0ZW1zKCk6CiAgICAgICAgICAgIGlmIGtleS5zdGFydHN3aXRoKCctLS0nKToKICAg
ICAgICAgICAgICAgIGl0ZW1zLmFwcGVuZCh1cndpZC5EaXZpZGVyKCkpCiAgICAgICAgICAgICAg
ICBzZXBfdGV4dCA9IHVyd2lkLlRleHQoa2V5LnJlcGxhY2UoJy0nLCAnJykuc3RyaXAoKSwgYWxp
Z249J2NlbnRlcicpCiAgICAgICAgICAgICAgICAjINCf0YDQuNC90YPQtNC40YLQtdC70YzQvdC+
INC30LDQtNCw0LXQvCDRhNC+0L0KICAgICAgICAgICAgICAgIGl0ZW1zLmFwcGVuZCh1cndpZC5B
dHRyTWFwKHNlcF90ZXh0LCAnaW5mb19uYW1lJykpCiAgICAgICAgICAgICAgICBjb250aW51ZQoK
ICAgICAgICAgICAgaWYga2V5ID09ICdVUkxfRlVMTCc6CiAgICAgICAgICAgICAgICBpdGVtcy5h
cHBlbmQodXJ3aWQuRGl2aWRlcigpKQogICAgICAgICAgICAgICAgaXRlbXMuYXBwZW5kKHVyd2lk
LlRleHQoKCdpbmZvX25hbWUnLCAiUHJlc2lnbmVkIFVSTCAoMWgpOiIpKSkKICAgICAgICAgICAg
ICAgIGVkaXQgPSB1cndpZC5FZGl0KCIiLCBzdHIodmFsdWUpKQogICAgICAgICAgICAgICAgaXRl
bXMuYXBwZW5kKHVyd2lkLkF0dHJNYXAoZWRpdCwgJ2luZm9fdmFsdWUnKSkKICAgICAgICAgICAg
ICAgIGNvbnRpbnVlCgogICAgICAgICAgICBrZXlfc3RyID0gZiJ7a2V5fToiLmxqdXN0KG1heF9r
ZXlfbGVuICsgMikKICAgICAgICAgICAgdmFsX3N0ciA9IHN0cih2YWx1ZSkKCiAgICAgICAgICAg
IHRleHRfd2lkZ2V0ID0gdXJ3aWQuVGV4dChbCiAgICAgICAgICAgICAgICAoJ2luZm9fbmFtZScs
IGtleV9zdHIpLAogICAgICAgICAgICAgICAgKCdpbmZvX3ZhbHVlJywgdmFsX3N0cikKICAgICAg
ICAgICAgXSkKICAgICAgICAgICAgIyDQntCx0L7RgNCw0YfQuNCy0LDQtdC8INC60LDQttC00YPR
jiDRgdGC0YDQvtC60YMg0LIgJ2RpYWxvZycsINGH0YLQvtCx0Ysg0L/RgNC+0LHQtdC70Ysg0YLQ
vtC20LUg0LHRi9C70Lgg0YHQuNC90LjQvNC4CiAgICAgICAgICAgIGl0ZW1zLmFwcGVuZCh1cndp
ZC5BdHRyTWFwKHRleHRfd2lkZ2V0LCAnZGlhbG9nZjQnKSkKCiAgICAgICAgIyDQntCx0L7RgNCw
0YfQuNCy0LDQtdC8INGB0LDQvCBMaXN0Qm94LCDRh9GC0L7QsdGLINC/0YPRgdGC0YvQtSDQvNC1
0YHRgtCwINCx0YvQu9C4INGB0LjQvdC40LzQuAogICAgICAgIGxpc3Rib3ggPSB1cndpZC5MaXN0
Qm94KHVyd2lkLlNpbXBsZUZvY3VzTGlzdFdhbGtlcihpdGVtcykpCiAgICAgICAgbGlzdGJveF9t
YXAgPSB1cndpZC5BdHRyTWFwKGxpc3Rib3gsICdkaWFsb2dmNCcpCgogICAgICAgIG9rX2J1dHRv
biA9IHVyd2lkLkJ1dHRvbignWyBPSyBdJykKICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChv
a19idXR0b24sICdjbGljaycsIHNlbGYub25fb2spCgogICAgICAgIGJ1dHRvbnMgPSB1cndpZC5D
b2x1bW5zKFsKICAgICAgICAgICAgKCd3ZWlnaHQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAg
ICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAob2tfYnV0dG9uLCAnYnV0dG9uJywgZm9jdXNf
bWFwPSdidXR0b25fZm9jdXMnKSksCiAgICAgICAgICAgICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4
dCgnJykpLAogICAgICAgIF0sIGRpdmlkZWNoYXJzPTApCgogICAgICAgICMg0J7QsdC+0YDQsNGH
0LjQstCw0LXQvCDQutC90L7Qv9C60Lgg0LIg0YHRgtC40LvRjCBkaWFsb2csINGH0YLQvtCx0Ysg
0YTQvtC9INCy0L7QutGA0YPQsyDQvdC40YUg0LHRi9C7INGB0LjQvdC40LwKICAgICAgICBidXR0
b25zX21hcCA9IHVyd2lkLkF0dHJNYXAoYnV0dG9ucywgJ2RpYWxvZ2Y0JykKCiAgICAgICAgcGls
ZSA9IHVyd2lkLlBpbGUoWwogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAog
ICAgICAgICAgICAoJ3dlaWdodCcsIDEsIGxpc3Rib3hfbWFwKSwgICMg0JjRgdC/0L7Qu9GM0LfR
g9C10Lwg0L7QsdC10YDQvdGD0YLRi9C5IGxpc3Rib3gKICAgICAgICAgICAgKCdwYWNrJywgdXJ3
aWQuRGl2aWRlcigpKSwKICAgICAgICAgICAgKCdwYWNrJywgYnV0dG9uc19tYXApLCAgIyDQmNGB
0L/QvtC70YzQt9GD0LXQvCDQvtCx0LXRgNC90YPRgtGL0LUg0LrQvdC+0L/QutC4CiAgICAgICAg
ICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgXSkKCiAgICAgICAgIyDQl9Cw
0LvQuNCy0LDQtdC8IEZpbGxlciDRgdGC0LjQu9C10LwgZGlhbG9nCiAgICAgICAgZmlsbCA9IHVy
d2lkLkZpbGxlcihwaWxlLCB2YWxpZ249J3RvcCcsIGhlaWdodD0oJ3JlbGF0aXZlJywgOTUpKQog
ICAgICAgIGZpbGxfbWFwID0gdXJ3aWQuQXR0ck1hcChmaWxsLCAnZGlhbG9nZjQnKQoKICAgICAg
ICBsaW5lYm94ID0gdXJ3aWQuTGluZUJveChmaWxsX21hcCwgdGl0bGU9dGl0bGUpCgogICAgICAg
ICMg0KTQuNC90LDQu9GM0L3QsNGPINC+0LHQtdGA0YLQutCwINGA0LDQvNC60LgKICAgICAgICBz
dXBlcigpLl9faW5pdF9fKHVyd2lkLkF0dHJNYXAobGluZWJveCwgJ2RpYWxvZ2Y0JykpCgogICAg
ZGVmIG9uX29rKHNlbGYsIGJ1dHRvbik6CiAgICAgICAgc2VsZi5jbG9zZV9jYWxsYmFjaygpCgog
ICAgZGVmIGtleXByZXNzKHNlbGYsIHNpemUsIGtleSk6CiAgICAgICAgaWYga2V5IGluICgnZXNj
JywgJ2VudGVyJywgJ2Y0Jyk6CiAgICAgICAgICAgIHNlbGYub25fb2soTm9uZSkKICAgICAgICAg
ICAgcmV0dXJuIE5vbmUKICAgICAgICByZXR1cm4gc3VwZXIoKS5rZXlwcmVzcyhzaXplLCBrZXkp
CgoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIHBhcnNlciA9IGFyZ3BhcnNlLkFyZ3Vt
ZW50UGFyc2VyKGRlc2NyaXB0aW9uPWYnUzMgQ29tbWFuZGVyIC0gVFVJIEZpbGUgTWFuYWdlciBm
b3IgUzMgOyBWZXJzaW9uIHtfX1ZFUlNJT05fX30nKQogICAgCiAgICAjINCg0LXQttC40LwgMTog
0J7QsdGL0YfQvdGL0Lkg0YTQsNC50LsgKNC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOKQogICAgcGFy
c2VyLmFkZF9hcmd1bWVudCgnLWMnLCAnLS1jb25maWcnLCBkZWZhdWx0PSdzM19jb25maWcuanNv
bicsIAogICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSdQYXRoIHRvIHBsYWludGV4dCBjb25m
aWcgZmlsZSAoZGVmYXVsdDogczNfY29uZmlnLmpzb24pJykKICAgIAogICAgIyDQoNC10LbQuNC8
IDI6INCX0LDRiNC40YTRgNC+0LLQsNC90L3Ri9C5INGE0LDQudC7CiAgICBwYXJzZXIuYWRkX2Fy
Z3VtZW50KCctZScsICctLWVuY3J5cHRlZC1jb25maWcnLCAKICAgICAgICAgICAgICAgICAgICAg
ICAgaGVscD0nUGF0aCB0byBlbmNyeXB0ZWQgY29uZmlnIGZpbGUgKE1vZGUgMikuIFJlcXVpcmVz
IHBhc3N3b3JkLicpCiAgICAKICAgICMg0KDQtdC20LjQvCAzOiBWYXVsdAogICAgcGFyc2VyLmFk
ZF9hcmd1bWVudCgnLS12YXVsdC11cmwnLCAKICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0n
VmF1bHQgVVJMIChlLmcuIGh0dHA6Ly8xMjcuMC4wLjE6ODIwMCkuIEFjdGl2YXRlcyBNb2RlIDMu
JykKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoJy0tdmF1bHQtcGF0aCcsIAogICAgICAgICAgICAg
ICAgICAgICAgICBoZWxwPSdQYXRoIHRvIHNlY3JldCBpbiBWYXVsdCAoZS5nLiBzZWNyZXQvZGF0
YS9zM2NvbW1hbmRlciknKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgnLS12YXVsdC11c2VyJywg
CiAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9J1ZhdWx0IHVzZXJuYW1lICh3aWxsIHByb21w
dCBpZiBtaXNzaW5nKScpCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KCctLXZhdWx0LXBhc3MnLCAK
ICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0nVmF1bHQgcGFzc3dvcmQgKHdpbGwgcHJvbXB0
IGlmIG1pc3NpbmcgLSBJTlNFQ1VSRSBpbiBoaXN0b3J5KScpCiAgICAKICAgIGFyZ3MgPSBwYXJz
ZXIucGFyc2VfYXJncygpCgogICAgIyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQutC+0L3R
hNC40LPQsCDRgSDQsNGA0LPRg9C80LXQvdGC0LDQvNC4CiAgICBzM19jb25maWcgPSBTM0NvbmZp
ZyhhcmdzKQoKICAgICMg0JfQsNC/0YPRgdC6INC/0YDQuNC70L7QttC10L3QuNGPCiAgICBhcHAg
PSBEdWFsUGFuZUFwcChzM19jb25maWcpCiAgICBhcHAucnVuKCkKICAgIHByaW50KGYnUzMgQ29t
bWFuZGVyIC0gVFVJIEZpbGUgTWFuYWdlciBmb3IgUzMgOyBWZXJzaW9uIHtfX1ZFUlNJT05fX30n
KQoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAHMzX2NvbmZpZy5qc29uAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw
MDAwNzcwADAwMDAwMDAAMDAwMTczNAAwMDAwMDAwMDcwMAAxNTEzMDQyMTQ1MAAwMTI2NTQAIDAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdXN0YXIgIAByb290AAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZib3hzZgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAewogICJlbmRwb2ludHMiOiBbCiAgICB7CiAgICAgICJuYW1lIjogIkxvY2Fs
IENlcGgiLAogICAgICAidXJsIjogImh0dHA6Ly9sb2NhbGhvc3Q6NzQ4MCIsCiAgICAgICJhY2Nl
c3Nfa2V5IjogInMzYWNjZXNzIiwKICAgICAgInNlY3JldF9rZXkiOiAiczNzZWNyZXQiCiAgICB9
LAogICAgewogICAgICAibmFtZSI6ICJSRW1vdGUgQ2VwaCIsCiAgICAgICJ1cmwiOiAiaHR0cDov
LzE5Mi4xNjguMS4yMzo3NDgwIiwKICAgICAgImFjY2Vzc19rZXkiOiAiczNhY2Nlc3MiLAogICAg
ICAic2VjcmV0X2tleSI6ICJzM3NlY3JldCIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogIkVy
cm9yIiwKICAgICAgInVybCI6ICJodHRwOi8vbG9jYWxob3N0Ojc0ODEiLAogICAgICAiYWNjZXNz
X2tleSI6ICJzM2FjY2VzcyIsCiAgICAgICJzZWNyZXRfa2V5IjogInMzc2VjcmV0IgogICAgfQog
IF0KfQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAABzM19jb25maWdfZW5jcnlwdG9yLnB5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMDAw
MDc3MAAwMDAwMDAwADAwMDE3MzQAMDAwMDAwMDM3NTIAMTUxMzA0MjI1MTQAMDE0NDU0ACAwAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHVzdGFyICAAcm9vdAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB2Ym94c2YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAACMhL3Vzci9iaW4vZW52IHB5dGhvbjMKaW1wb3J0IHN5cwppbXBvcnQganNvbgpp
bXBvcnQgYmFzZTY0CmltcG9ydCBvcwppbXBvcnQgZ2V0cGFzcwpmcm9tIGNyeXB0b2dyYXBoeS5m
ZXJuZXQgaW1wb3J0IEZlcm5ldApmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBp
bXBvcnQgaGFzaGVzCmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmtkZi5wYmtk
ZjIgaW1wb3J0IFBCS0RGMkhNQUMKZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzIGlt
cG9ydCBkZWZhdWx0X2JhY2tlbmQKCmRlZiBkZXJpdmVfa2V5KHBhc3N3b3JkLCBzYWx0KToKICAg
ICIiItCT0LXQvdC10YDQsNGG0LjRjyDQutC70Y7Rh9CwINC40Lcg0L/QsNGA0L7Qu9GPINC4INGB
0L7Qu9C4IiIiCiAgICBrZGYgPSBQQktERjJITUFDKAogICAgICAgIGFsZ29yaXRobT1oYXNoZXMu
U0hBMjU2KCksCiAgICAgICAgbGVuZ3RoPTMyLAogICAgICAgIHNhbHQ9c2FsdCwKICAgICAgICBp
dGVyYXRpb25zPTEwMDAwMCwKICAgICAgICBiYWNrZW5kPWRlZmF1bHRfYmFja2VuZCgpIAogICAg
KQogICAgcmV0dXJuIGJhc2U2NC51cmxzYWZlX2I2NGVuY29kZShrZGYuZGVyaXZlKHBhc3N3b3Jk
LmVuY29kZSgpKSkKCmRlZiBlbmNyeXB0X2ZpbGUoaW5wdXRfZmlsZSwgb3V0cHV0X2ZpbGUpOgog
ICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKGlucHV0X2ZpbGUpOgogICAgICAgIHByaW50KGYiRXJy
b3I6IElucHV0IGZpbGUgJ3tpbnB1dF9maWxlfScgbm90IGZvdW5kLiIpCiAgICAgICAgcmV0dXJu
CgogICAgdHJ5OgogICAgICAgIHdpdGggb3BlbihpbnB1dF9maWxlLCAncmInKSBhcyBmOgogICAg
ICAgICAgICBkYXRhID0gZi5yZWFkKCkKICAgICAgICAgICAgIyDQn9GA0L7QstC10YDQutCwINCy
0LDQu9C40LTQvdC+0YHRgtC4IEpTT04g0L/QtdGA0LXQtCDRiNC40YTRgNC+0LLQsNC90LjQtdC8
CiAgICAgICAgICAgIGpzb24ubG9hZHMoZGF0YSkKICAgIGV4Y2VwdCBqc29uLkpTT05EZWNvZGVF
cnJvcjoKICAgICAgICBwcmludCgiRXJyb3I6IElucHV0IGZpbGUgaXMgbm90IHZhbGlkIEpTT04u
IikKICAgICAgICByZXR1cm4KCiAgICBwYXNzd29yZCA9IGdldHBhc3MuZ2V0cGFzcygiRW50ZXIg
cGFzc3dvcmQgZm9yIGVuY3J5cHRpb246ICIpCiAgICBjb25maXJtID0gZ2V0cGFzcy5nZXRwYXNz
KCJDb25maXJtIHBhc3N3b3JkOiAiKQogICAgCiAgICBpZiBwYXNzd29yZCAhPSBjb25maXJtOgog
ICAgICAgIHByaW50KCJFcnJvcjogUGFzc3dvcmRzIGRvIG5vdCBtYXRjaC4iKQogICAgICAgIHJl
dHVybgoKICAgICMg0JPQtdC90LXRgNC40YDRg9C10Lwg0YHQu9GD0YfQsNC50L3Rg9GOINGB0L7Q
u9GMICgxNiDQsdCw0LnRgikKICAgIHNhbHQgPSBvcy51cmFuZG9tKDE2KQogICAga2V5ID0gZGVy
aXZlX2tleShwYXNzd29yZCwgc2FsdCkKICAgIGYgPSBGZXJuZXQoa2V5KQogICAgCiAgICBlbmNy
eXB0ZWRfZGF0YSA9IGYuZW5jcnlwdChkYXRhKQoKICAgICMg0KHQvtGF0YDQsNC90Y/QtdC8OiDQ
v9C10YDQstGL0LUgMTYg0LHQsNC50YIgLSDRgdC+0LvRjCwg0L7RgdGC0LDQu9GM0L3QvtC1IC0g
0LTQsNC90L3Ri9C1CiAgICB3aXRoIG9wZW4ob3V0cHV0X2ZpbGUsICd3YicpIGFzIGY6CiAgICAg
ICAgZi53cml0ZShzYWx0ICsgZW5jcnlwdGVkX2RhdGEpCiAgICAKICAgIHByaW50KGYiU3VjY2Vz
cyEgRW5jcnlwdGVkIGNvbmZpZyBzYXZlZCB0byAne291dHB1dF9maWxlfSciKQoKaWYgX19uYW1l
X18gPT0gIl9fbWFpbl9fIjoKICAgIGlmIGxlbihzeXMuYXJndikgIT0gMzoKICAgICAgICBwcmlu
dCgiVXNhZ2U6IHB5dGhvbjMgczNfY29uZmlnX2VuY3J5cHRvci5weSA8aW5wdXRfanNvbj4gPG91
dHB1dF9lbmM+IikKICAgICAgICBwcmludCgiRXhhbXBsZTogcHl0aG9uMyBzM19jb25maWdfZW5j
cnlwdG9yLnB5IHMzX2NvbmZpZy5qc29uIHMzX2NvbmZpZy5lbmMiKQogICAgZWxzZToKICAgICAg
ICBlbmNyeXB0X2ZpbGUoc3lzLmFyZ3ZbMV0sIHN5cy5hcmd2WzJdKQoAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAbWFrZV9idWNrZXRfbGlzdC5zaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAwMDA3NzAA
MDAwMDAwMAAwMDAxNzM0ADAwMDAwMDAxMzA3ADE1MTMxMTMyNjc2ADAxMzc2NgAgMAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB1c3RhciAgAHJvb3QAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAdmJveHNmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAjIS91c3IvYmluL2VudiBiYXNoCnNldCAtZXVvIHBpcGVmYWlsCgpyYWRvc2d3LWFkbWlu
IGJ1Y2tldCBsaXN0IC0tZm9ybWF0PWpzb24gfApqcSAtciAnLltdJyB8CndoaWxlIElGUz0gcmVh
ZCAtciBidWNrZXQ7IGRvCiAgc3RhdHNfanNvbj0iJChyYWRvc2d3LWFkbWluIGJ1Y2tldCBzdGF0
cyAtLWJ1Y2tldD0iJGJ1Y2tldCIgLS1mb3JtYXQ9anNvbikiCgogIGNyZWF0ZWRfaXNvPSIkKGVj
aG8gIiRzdGF0c19qc29uIiB8IGpxIC1yICcuY3JlYXRpb25fdGltZSAvLyAuYnVja2V0LmNyZWF0
aW9uX3RpbWUgLy8gZW1wdHknKSIKICBpZiBbWyAteiAiJGNyZWF0ZWRfaXNvIiB8fCAiJGNyZWF0
ZWRfaXNvIiA9PSAibnVsbCIgXV07IHRoZW4KICAgICMg0LXRgdC70Lgg0L3QtSDQvdCw0YjQu9C4
IGNyZWF0aW9uX3RpbWUg4oCUINC80L7QttC90L4g0LLRi9Cy0LXRgdGC0LggMAogICAgcHJpbnRm
ICclcyAlc1xuJyAiJGJ1Y2tldCIgIjAiCiAgICBjb250aW51ZQogIGZpCgogICMgSVNPODYwMSAt
PiBlcG9jaCBzZWNvbmRzCiAgY3JlYXRlZF9lcG9jaD0iJChkYXRlIC11IC1kICIkY3JlYXRlZF9p
c28iICslcyAyPi9kZXYvbnVsbCB8fCB0cnVlKSIKICBpZiBbWyAteiAiJGNyZWF0ZWRfZXBvY2gi
IF1dOyB0aGVuCiAgICBjcmVhdGVkX2Vwb2NoPSIwIgogIGZpCgogIHByaW50ZiAnJXMgJXNcbicg
IiRidWNrZXQiICIkY3JlYXRlZF9lcG9jaCIKZG9uZQoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=
