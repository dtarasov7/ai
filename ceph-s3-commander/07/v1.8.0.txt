czMtY29tbWFuZGVyLXYxLjguMC5weQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAwMDA3NzAAMDAwMDAw
MAAwMDAxNzM0ADAwMDAwNzUzMjEyADE1MTMxMTMxNzQ3ADAxMzYyNgAgMAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB1c3RhciAgAHJvb3QAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAdmJveHNmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAj
IS91c3IvYmluL2VudiBweXRob24zCiMgLSotIGNvZGluZzogdXRmLTggLSotCiIiIgrQlNCy0YPR
hdC/0LDQvdC10LvRjNC90YvQuSDRhNCw0LnQu9C+0LLRi9C5INC80LXQvdC10LTQttC10YAg0LTQ
u9GPIFMzIENlcGgg0YEg0L/QvtC00LTQtdGA0LbQutC+0Lkg0LzQvdC+0LbQtdGB0YLQstC10L3Q
vdGL0YUgZW5kcG9pbnRzCiIiIgoKaW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHJlCmltcG9y
dCBmbm1hdGNoCmltcG9ydCB1cndpZAppbXBvcnQgYm90bzMKaW1wb3J0IGJhc2U2NApmcm9tIGJv
dG9jb3JlLmV4Y2VwdGlvbnMgaW1wb3J0IENsaWVudEVycm9yCmZyb20gYm90b2NvcmUuY29uZmln
IGltcG9ydCBDb25maWcKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IHRlbXBm
aWxlCmltcG9ydCBzaHV0aWwKaW1wb3J0IGpzb24KaW1wb3J0IHRocmVhZGluZwppbXBvcnQgdGlt
ZQppbXBvcnQgcGxhdGZvcm0KCmltcG9ydCBhcmdwYXJzZQppbXBvcnQgZ2V0cGFzcwppbXBvcnQg
cmVxdWVzdHMgICMg0JTQu9GPIFZhdWx0ICjQvdGD0LbQtdC9IHBpcCBpbnN0YWxsIHJlcXVlc3Rz
LCDQvtCx0YvRh9C90L4g0LXRgdGC0Ywg0LLQtdC30LTQtSkKIyDQlNC70Y8g0YjQuNGE0YDQvtCy
0LDQvdC40Y8gKNC90YPQttC10L0gcGlwIGluc3RhbGwgY3J5cHRvZ3JhcGh5KQp0cnk6CiAgICBm
cm9tIGNyeXB0b2dyYXBoeS5mZXJuZXQgaW1wb3J0IEZlcm5ldAogICAgZnJvbSBjcnlwdG9ncmFw
aHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGhhc2hlcwogICAgZnJvbSBjcnlwdG9ncmFwaHku
aGF6bWF0LnByaW1pdGl2ZXMua2RmLnBia2RmMiBpbXBvcnQgUEJLREYySE1BQwogICAgZnJvbSBj
cnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzIGltcG9ydCBkZWZhdWx0X2JhY2tlbmQKICAgIEhB
U19DUllQVE8gPSBUcnVlCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIEhBU19DUllQVE8gPSBGYWxz
ZQppbXBvcnQgc29ja2V0CmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCB1cmxwYXJzZQppbXBvcnQg
ZnVuY3Rvb2xzCmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IE9yZGVyZWREaWN0CgpfX1ZFUlNJT05f
XyA9ICIxLjcuMSIKX19BVVRIT1JfXyA9ICLQotCw0YDQsNGB0L7QsiDQlNC80LjRgtGA0LjQuSIK
CgpjbGFzcyBCb29rbWFya3NEaWFsb2codXJ3aWQuV2lkZ2V0V3JhcCk6CiAgICBkZWYgX19pbml0
X18oc2VsZiwgYm9va21hcmtzLCBjYWxsYmFjaywgcmVtb3ZlX2NhbGxiYWNrPU5vbmUpOgogICAg
ICAgIHNlbGYuY2FsbGJhY2sgPSBjYWxsYmFjawogICAgICAgIHNlbGYucmVtb3ZlX2NhbGxiYWNr
ID0gcmVtb3ZlX2NhbGxiYWNrCiAgICAgICAgc2VsZi5ib29rbWFya3MgPSBib29rbWFya3MKCiAg
ICAgICAgc2VsZi5ib2R5ID0gdXJ3aWQuU2ltcGxlRm9jdXNMaXN0V2Fsa2VyKFtdKQogICAgICAg
IHNlbGYuX3BvcHVsYXRlX2xpc3QoKQoKICAgICAgICBzZWxmLmxpc3Rib3ggPSB1cndpZC5MaXN0
Qm94KHNlbGYuYm9keSkKICAgICAgICBkb3duX3RleHQgPSB1cndpZC5UZXh0KCJFbnRlcjogY2hv
b3NlIGJvb2ttYXJrIHwgZGVsIC0gcmVtb3ZlIGJvb2ttYXJrIHwgZXNjIC0gZXhpdCIpCgogICAg
ICAgIGNsb3NlX2J0biA9IHVyd2lkLkJ1dHRvbigiQ2xvc2UiKQogICAgICAgIHVyd2lkLmNvbm5l
Y3Rfc2lnbmFsKGNsb3NlX2J0biwgJ2NsaWNrJywgc2VsZi5vbl9jYW5jZWwpCgogICAgICAgICMg
0JrQvtC80L/QvtC90L7QstC60LAg0LrQvdC+0L/QvtC6CiAgICAgICAgYnV0dG9uc19jb2wgPSB1
cndpZC5Db2x1bW5zKFsKICAgICAgICAgICAgKCd3ZWlnaHQnLCAxLCB1cndpZC5UZXh0KCcnKSks
CiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAoY2xvc2VfYnRuLCAnYnV0dG9uJywg
Zm9jdXNfbWFwPSdidXR0b25fZm9jdXMnKSksCiAgICAgICAgICAgICgnd2VpZ2h0JywgMSwgdXJ3
aWQuVGV4dCgnJykpLAogICAgICAgIF0sIGRpdmlkZWNoYXJzPTApCgogICAgICAgIGxheW91dCA9
IHVyd2lkLlBpbGUoWwogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHNlbGYubGlzdGJveCksCiAg
ICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgICAgICgncGFjaycs
IGJ1dHRvbnNfY29sKSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAg
ICAgICAgICAgKCdwYWNrJywgZG93bl90ZXh0KSwKICAgICAgICBdKQoKICAgICAgICBjb250ZW50
X2JsdWUgPSB1cndpZC5BdHRyTWFwKGxheW91dCwgJ2JvZHknKQogICAgICAgIHNlbGYuZnJhbWUg
PSB1cndpZC5MaW5lQm94KGNvbnRlbnRfYmx1ZSwgdGl0bGU9IkJvb2ttYXJrcyIpCiAgICAgICAg
c3VwZXIoKS5fX2luaXRfXyh1cndpZC5BdHRyTWFwKHNlbGYuZnJhbWUsICdib2R5JykpCgogICAg
ZGVmIF9wb3B1bGF0ZV9saXN0KHNlbGYpOgogICAgICAgIHNlbGYuYm9keS5jbGVhcigpCiAgICAg
ICAgZm9yIGJtIGluIHNlbGYuYm9va21hcmtzOgogICAgICAgICAgICBpZiBibVsndHlwZSddID09
ICdmcyc6CiAgICAgICAgICAgICAgICBkZXNjID0gZiJbRlNdIgogICAgICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgICAgZGVzYyA9IGYiW1MzXSIKCiAgICAgICAgICAgIGJ0bl9sYWJlbCA9IGYi
e2Rlc2N9OiB7Ym1bJ25hbWUnXX0iCiAgICAgICAgICAgIGJ0biA9IHVyd2lkLkJ1dHRvbihidG5f
bGFiZWwpCgogICAgICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChidG4sICdjbGljaycsIGxh
bWJkYSBiLCBkYXRhPWJtOiBzZWxmLm9uX2Jvb2ttYXJrX2NsaWNrKGRhdGEpKQogICAgICAgICAg
ICBzZWxmLmJvZHkuYXBwZW5kKHVyd2lkLkF0dHJNYXAoYnRuLCAnYm9keScsIGZvY3VzX21hcD0n
YnV0dG9uX2ZvY3VzJykpCgogICAgZGVmIG9uX2Jvb2ttYXJrX2NsaWNrKHNlbGYsIGJtX2RhdGEp
OgogICAgICAgIHNlbGYuY2FsbGJhY2soYm1fZGF0YSkKCiAgICBkZWYgb25fY2FuY2VsKHNlbGYs
IGJ0bj1Ob25lKToKICAgICAgICBzZWxmLmNhbGxiYWNrKE5vbmUpCgogICAgZGVmIGtleXByZXNz
KHNlbGYsIHNpemUsIGtleSk6CiAgICAgICAgaWYga2V5ID09ICdkZWxldGUnOgogICAgICAgICAg
ICBwaWxlID0gc2VsZi5mcmFtZS5vcmlnaW5hbF93aWRnZXQub3JpZ2luYWxfd2lkZ2V0CiAgICAg
ICAgICAgIGlmIHBpbGUuZm9jdXNfcG9zaXRpb24gPT0gMDoKICAgICAgICAgICAgICAgIGZvY3Vz
X3dpZGdldCwgZm9jdXNfaWR4ID0gc2VsZi5saXN0Ym94LmdldF9mb2N1cygpCiAgICAgICAgICAg
ICAgICBpZiBmb2N1c193aWRnZXQgYW5kIHNlbGYucmVtb3ZlX2NhbGxiYWNrOgogICAgICAgICAg
ICAgICAgICAgIHNlbGYucmVtb3ZlX2NhbGxiYWNrKGZvY3VzX2lkeCkKICAgICAgICAgICAgcmV0
dXJuIE5vbmUKCiAgICAgICAgaWYga2V5ID09ICdlc2MnOgogICAgICAgICAgICBzZWxmLm9uX2Nh
bmNlbCgpCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgcmV0dXJuIHN1cGVyKCkua2V5
cHJlc3Moc2l6ZSwga2V5KQoKCmNsYXNzIEJvb2ttYXJrc01hbmFnZXI6CiAgICBkZWYgX19pbml0
X18oc2VsZiwgZmlsZXBhdGg9ImJvb2ttYXJrcy5qc29uIik6CiAgICAgICAgc2VsZi5maWxlcGF0
aCA9IGZpbGVwYXRoCiAgICAgICAgc2VsZi5ib29rbWFya3MgPSBzZWxmLmxvYWQoKQoKICAgIGRl
ZiBsb2FkKHNlbGYpOgogICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhzZWxmLmZpbGVwYXRo
KToKICAgICAgICAgICAgcmV0dXJuIFtdCiAgICAgICAgdHJ5OgogICAgICAgICAgICB3aXRoIG9w
ZW4oc2VsZi5maWxlcGF0aCwgJ3InLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmOgogICAgICAgICAg
ICAgICAgcmV0dXJuIGpzb24ubG9hZChmKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcmV0
dXJuIFtdCgogICAgZGVmIHNhdmUoc2VsZik6CiAgICAgICAgd2l0aCBvcGVuKHNlbGYuZmlsZXBh
dGgsICd3JywgZW5jb2Rpbmc9J3V0Zi04JykgYXMgZjoKICAgICAgICAgICAganNvbi5kdW1wKHNl
bGYuYm9va21hcmtzLCBmLCBpbmRlbnQ9MikKCiAgICBkZWYgYWRkKHNlbGYsIG5hbWUsIHBhbmVs
X2luZm8pOgogICAgICAgICIiIgogICAgICAgIHBhbmVsX2luZm86IGRpY3Qg0YEg0LrQu9GO0YfQ
sNC80LggJ3R5cGUnLCAncGF0aCcgKNC00LvRjyBmcyksCiAgICAgICAgICAgICAgICAgICAgJ2Vu
ZHBvaW50JywgJ2J1Y2tldCcsICdwcmVmaXgnICjQtNC70Y8gczMpCiAgICAgICAgIiIiCiAgICAg
ICAgc2VsZi5ib29rbWFya3MuYXBwZW5kKHsKICAgICAgICAgICAgIm5hbWUiOiBuYW1lLAogICAg
ICAgICAgICAqKnBhbmVsX2luZm8KICAgICAgICB9KQogICAgICAgIHNlbGYuc2F2ZSgpCgogICAg
ZGVmIHJlbW92ZShzZWxmLCBpbmRleCk6CiAgICAgICAgaWYgMCA8PSBpbmRleCA8IGxlbihzZWxm
LmJvb2ttYXJrcyk6CiAgICAgICAgICAgIHNlbGYuYm9va21hcmtzLnBvcChpbmRleCkKICAgICAg
ICAgICAgc2VsZi5zYXZlKCkKCgpkZWYgY2hlY2tfczNfZW5kcG9pbnRfY29ubmVjdGl2aXR5KGVu
ZHBvaW50X3VybCwgdGltZW91dD0yKToKICAgICIiIgogICAg0JHRi9GB0YLRgNCw0Y8g0L/RgNC+
0LLQtdGA0LrQsCDQtNC+0YHRgtGD0L/QvdC+0YHRgtC4IFMzIGVuZHBvaW50LgogICAgQXJnczoK
ICAgICAgICBlbmRwb2ludF91cmw6IFVSTCDRjdC90LTQv9C+0LjQvdGC0LAgKNC90LDQv9GA0LjQ
vNC10YAsICdodHRwOi8vMTAuMC4wLjE6NzQ4MCcpCiAgICAgICAgdGltZW91dDog0YLQsNC50LzQ
sNGD0YIg0L/QvtC00LrQu9GO0YfQtdC90LjRjyDQsiDRgdC10LrRg9C90LTQsNGFCiAgICBSZXR1
cm5zOgogICAgICAgIHR1cGxlOiAoc3VjY2VzczogYm9vbCwgZXJyb3JfbWVzc2FnZTogc3RyIG9y
IE5vbmUpCiAgICAiIiIKICAgIHRyeToKICAgICAgICBwYXJzZWQgPSB1cmxwYXJzZShlbmRwb2lu
dF91cmwpCiAgICAgICAgaG9zdCA9IHBhcnNlZC5ob3N0bmFtZQogICAgICAgIHBvcnQgPSBwYXJz
ZWQucG9ydAoKICAgICAgICAjINCe0L/RgNC10LTQtdC70Y/QtdC8INC/0L7RgNGCINC/0L4g0YPQ
vNC+0LvRh9Cw0L3QuNGOCiAgICAgICAgaWYgcG9ydCBpcyBOb25lOgogICAgICAgICAgICBwb3J0
ID0gNDQzIGlmIHBhcnNlZC5zY2hlbWUgPT0gJ2h0dHBzJyBlbHNlIDgwCgogICAgICAgICMgVENQ
INC/0YDQvtCy0LXRgNC60LAg0L/QvtC00LrQu9GO0YfQtdC90LjRjwogICAgICAgIHNvY2sgPSBz
b2NrZXQuc29ja2V0KHNvY2tldC5BRl9JTkVULCBzb2NrZXQuU09DS19TVFJFQU0pCiAgICAgICAg
c29jay5zZXR0aW1lb3V0KHRpbWVvdXQpCgogICAgICAgIHJlc3VsdCA9IHNvY2suY29ubmVjdF9l
eCgoaG9zdCwgcG9ydCkpCiAgICAgICAgc29jay5jbG9zZSgpCgogICAgICAgIGlmIHJlc3VsdCA9
PSAwOgogICAgICAgICAgICByZXR1cm4gKFRydWUsIE5vbmUpCiAgICAgICAgZWxzZToKICAgICAg
ICAgICAgcmV0dXJuIChGYWxzZSwgZiJDYW5ub3QgY29ubmVjdCB0byB7aG9zdH06e3BvcnR9IikK
CiAgICBleGNlcHQgc29ja2V0LmdhaWVycm9yOgogICAgICAgIHJldHVybiAoRmFsc2UsIGYiQ2Fu
bm90IHJlc29sdmUgaG9zdG5hbWU6IHtwYXJzZWQuaG9zdG5hbWV9IikKICAgIGV4Y2VwdCBzb2Nr
ZXQudGltZW91dDoKICAgICAgICByZXR1cm4gKEZhbHNlLCBmIkNvbm5lY3Rpb24gdGltZW91dCB0
byB7cGFyc2VkLmhvc3RuYW1lfTp7cG9ydH0iKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgog
ICAgICAgIHJldHVybiAoRmFsc2UsIGYiQ29ubmVjdGlvbiBlcnJvcjoge3N0cihlKX0iKQoKCmRl
ZiBnZXRfZm9jdXNfYnV0dG9uKHcpOgogICAgIyDQoNCw0LfQstC+0YDQsNGH0LjQstCw0LXQvCDQ
tNC+INGC0LXQu9CwIChQaWxlKQogICAgaWYgaXNpbnN0YW5jZSh3LCB1cndpZC5BdHRyTWFwKToK
ICAgICAgICB3ID0gdy5vcmlnaW5hbF93aWRnZXQgICMgTGluZUJveAogICAgaWYgaXNpbnN0YW5j
ZSh3LCB1cndpZC5MaW5lQm94KToKICAgICAgICB3ID0gdy5vcmlnaW5hbF93aWRnZXQgICMgRmls
bGVyCiAgICBpZiBpc2luc3RhbmNlKHcsIHVyd2lkLkZpbGxlcik6CiAgICAgICAgdyA9IHcuYm9k
eSAgIyBQaWxlCgogICAgIyDQldGB0LvQuCDRjdGC0L4gUGlsZSDigJQg0L/RgNC+0LHRg9C10Lwg
0L/QvtC90Y/RgtGMLCDQs9C00LUg0YTQvtC60YPRgQogICAgaWYgaXNpbnN0YW5jZSh3LCB1cndp
ZC5QaWxlKToKICAgICAgICBmb2N1c19yZXN1bHQgPSB3LmdldF9mb2N1cygpCiAgICAgICAgIyDQ
kiDRgNCw0LfQvdGL0YUg0LLQtdGA0YHQuNGP0YUgdXJ3aWQg0Y3RgtC+INC70LjQsdC+ICh3aWRn
ZXQsIGluZGV4KSwg0LvQuNCx0L4g0L/RgNC+0YHRgtC+IHdpZGdldAogICAgICAgIGlmIGlzaW5z
dGFuY2UoZm9jdXNfcmVzdWx0LCB0dXBsZSk6CiAgICAgICAgICAgIGZvY3VzZWRfd2lkZ2V0ID0g
Zm9jdXNfcmVzdWx0WzBdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZm9jdXNlZF93aWRnZXQg
PSBmb2N1c19yZXN1bHQKCiAgICAgICAgIyDQkiDRgdGC0YDQvtC60LUg0YEg0LrQvdC+0L/QutCw
0LzQuCDRgyDQvdCw0YEgQ29sdW1ucwogICAgICAgIGlmIGlzaW5zdGFuY2UoZm9jdXNlZF93aWRn
ZXQsIHVyd2lkLkNvbHVtbnMpOgogICAgICAgICAgICBjb2xfZm9jdXMgPSBmb2N1c2VkX3dpZGdl
dC5nZXRfZm9jdXMoKQogICAgICAgICAgICAjINCQ0L3QsNC70L7Qs9C40YfQvdC+OiDQu9C40LHQ
viAod2lkZ2V0LCBpbmRleCksINC70LjQsdC+IHdpZGdldAogICAgICAgICAgICBpZiBpc2luc3Rh
bmNlKGNvbF9mb2N1cywgdHVwbGUpOgogICAgICAgICAgICAgICAgZm9jdXNfdyA9IGNvbF9mb2N1
c1swXQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZm9jdXNfdyA9IGNvbF9mb2N1
cwoKICAgICAgICAgICAgIyBmb2N1c193INC+0LHRi9GH0L3QviBBdHRyTWFwKGJ1dHRvbiwgJ2J1
dHRvbicsIGZvY3VzX21hcD0uLi4pCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZm9jdXNfdywg
dXJ3aWQuQXR0ck1hcCk6CiAgICAgICAgICAgICAgICBidG4gPSBmb2N1c193Lm9yaWdpbmFsX3dp
ZGdldAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYnRuID0gZm9jdXNfdwogICAg
ICAgICAgICByZXR1cm4gYnRuCiAgICByZXR1cm4gTm9uZQoKCmNsYXNzIFMzQ29uZmlnOgogICAg
IiIiCiAgICDQo9C/0YDQsNCy0LvQtdC90LjQtSDQutC+0L3RhNC40LPRg9GA0LDRhtC40LXQuSBT
MyBlbmRwb2ludHMuCiAgICDQn9C+0LTQtNC10YDQttC40LLQsNC10YIgMyDRgNC10LbQuNC80LA6
CiAgICAxLiBQbGFpbnRleHQgSlNPTiAo0YTQsNC50LspCiAgICAyLiBFbmNyeXB0ZWQgKNGE0LDQ
udC7ICsg0L/QsNGA0L7Qu9GMKQogICAgMy4gSGFzaGlDb3JwIFZhdWx0IChBUEkpCiAgICAiIiIK
ICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhcmdzKToKICAgICAgICBzZWxmLmVuZHBvaW50cyA9IFtd
CiAgICAgICAgc2VsZi5hcmdzID0gYXJncwogICAgICAgIHNlbGYubG9hZF9jb25maWcoKQoKICAg
IGRlZiBfZXhpdF9lcnJvcihzZWxmLCBtZXNzYWdlKToKICAgICAgICAiIiLQktGL0LLQvtC0INC+
0YjQuNCx0LrQuCDQuCDQt9Cw0LLQtdGA0YjQtdC90LjQtSDQv9GA0L7Qs9GA0LDQvNC80YsiIiIK
ICAgICAgICBwcmludChmIlxuQ1JJVElDQUwgRVJST1I6IHttZXNzYWdlfSIpCiAgICAgICAgc3lz
LmV4aXQoMSkKCiAgICBkZWYgbG9hZF9jb25maWcoc2VsZik6CiAgICAgICAgIiIi0JzQsNGA0YjR
gNGD0YLQuNC30LDRhtC40Y8g0LfQsNCz0YDRg9C30LrQuCDQsiDQt9Cw0LLQuNGB0LjQvNC+0YHR
gtC4INC+0YIg0LDRgNCz0YPQvNC10L3RgtC+0LIiIiIKICAgICAgICBpZiBzZWxmLmFyZ3MudmF1
bHRfdXJsOgogICAgICAgICAgICBzZWxmLl9sb2FkX2Zyb21fdmF1bHQoKQogICAgICAgIGVsaWYg
c2VsZi5hcmdzLmVuY3J5cHRlZF9jb25maWc6CiAgICAgICAgICAgIHNlbGYuX2xvYWRfZnJvbV9l
bmNyeXB0ZWRfZmlsZSgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5fbG9hZF9mcm9t
X3BsYWluX2ZpbGUoKQoKICAgICMgLS0tINCg0JXQltCY0JwgMTog0J7QsdGL0YfQvdGL0Lkg0YTQ
sNC50LsgLS0tCiAgICBkZWYgX2xvYWRfZnJvbV9wbGFpbl9maWxlKHNlbGYpOgogICAgICAgIGNv
bmZpZ19maWxlID0gc2VsZi5hcmdzLmNvbmZpZwogICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0
cyhjb25maWdfZmlsZSk6CiAgICAgICAgICAgIHNlbGYuX2V4aXRfZXJyb3IoZiJDb25maWcgZmls
ZSAne2NvbmZpZ19maWxlfScgbm90IGZvdW5kLlxuIgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICJSdW4gd2l0aCBkZWZhdWx0IHNldHRpbmdzIG9yIGNyZWF0ZSBjb25maWcgZmlsZSBtYW51
YWxseS4iKQogICAgICAgIAogICAgICAgIHRyeToKICAgICAgICAgICAgd2l0aCBvcGVuKGNvbmZp
Z19maWxlLCAncicpIGFzIGY6CiAgICAgICAgICAgICAgICBkYXRhID0ganNvbi5sb2FkKGYpCiAg
ICAgICAgICAgICAgICBzZWxmLmVuZHBvaW50cyA9IGRhdGEuZ2V0KCdlbmRwb2ludHMnLCBbXSkK
ICAgICAgICBleGNlcHQganNvbi5KU09ORGVjb2RlRXJyb3IgYXMgZToKICAgICAgICAgICAgc2Vs
Zi5fZXhpdF9lcnJvcihmIlN5bnRheCBlcnJvciBpbiAne2NvbmZpZ19maWxlfSc6IHtlfSIpCiAg
ICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLl9leGl0X2Vycm9y
KGYiQ2Fubm90IHJlYWQgY29uZmlnICd7Y29uZmlnX2ZpbGV9Jzoge2V9IikKCiAgICAgICAgaWYg
bm90IHNlbGYuZW5kcG9pbnRzOgogICAgICAgICAgICBzZWxmLl9leGl0X2Vycm9yKCJDb25maWcg
ZmlsZSBpcyBlbXB0eSBvciBoYXMgbm8gJ2VuZHBvaW50cycgbGlzdC4iKQoKICAgICMgLS0tINCg
0JXQltCY0JwgMjog0JfQsNGI0LjRhNGA0L7QstCw0L3QvdGL0Lkg0YTQsNC50LsgLS0tCiAgICBk
ZWYgX2xvYWRfZnJvbV9lbmNyeXB0ZWRfZmlsZShzZWxmKToKICAgICAgICBpZiBub3QgSEFTX0NS
WVBUTzoKICAgICAgICAgICAgc2VsZi5fZXhpdF9lcnJvcigiTW9kdWxlICdjcnlwdG9ncmFwaHkn
IGlzIG1pc3NpbmcuIEluc3RhbGwgaXQ6IHBpcCBpbnN0YWxsIGNyeXB0b2dyYXBoeSIpCiAgICAg
ICAgICAgIAogICAgICAgIGVuY19maWxlID0gc2VsZi5hcmdzLmVuY3J5cHRlZF9jb25maWcKICAg
ICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMoZW5jX2ZpbGUpOgogICAgICAgICAgICBzZWxmLl9l
eGl0X2Vycm9yKGYiRW5jcnlwdGVkIGNvbmZpZyAne2VuY19maWxlfScgbm90IGZvdW5kLiIpCgog
ICAgICAgIHRyeToKICAgICAgICAgICAgIyDQp9C40YLQsNC10Lwg0JLQodCVINCx0LDQudGC0YsK
ICAgICAgICAgICAgd2l0aCBvcGVuKGVuY19maWxlLCAncmInKSBhcyBmOgogICAgICAgICAgICAg
ICAgZmlsZV9jb250ZW50ID0gZi5yZWFkKCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGxl
bihmaWxlX2NvbnRlbnQpIDwgNDA6ICAjIDE2IChzYWx0KSArIH4yMCAobWluIGZlcm5ldCBvdmVy
aGVhZCkKICAgICAgICAgICAgICAgIHNlbGYuX2V4aXRfZXJyb3IoIkVuY3J5cHRlZCBmaWxlIGlz
IHRvbyBzaG9ydC9jb3JydXB0ZWQuIikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICBzYWx0
ID0gZmlsZV9jb250ZW50WzoxNl0KICAgICAgICAgICAgZW5jcnlwdGVkX2RhdGEgPSBmaWxlX2Nv
bnRlbnRbMTY6XQogICAgICAgICAgICAKICAgICAgICAgICAgIyDQktCQ0JbQndCeOiBnZXRwYXNz
INC80L7QttC10YIg0LLQtdGA0L3Rg9GC0Ywg0YHRgtGA0L7QutGDINGBINC/0YDQvtCx0LXQu9Cw
0LzQuCDQsiDQutC+0L3RhtC1INC90LAg0L3QtdC60L7RgtC+0YDRi9GFINGC0LXRgNC80LjQvdCw
0LvQsNGFCiAgICAgICAgICAgIHByaW50KGYiUmVhZGluZyBlbmNyeXB0ZWQgY29uZmlnOiB7ZW5j
X2ZpbGV9IikKICAgICAgICAgICAgcGFzc3dvcmQgPSBnZXRwYXNzLmdldHBhc3MoIkVudGVyIGRl
Y3J5cHRpb24gcGFzc3dvcmQ6ICIpCiAgICAgICAgICAgIAogICAgICAgICAgICAjINCj0LHQuNGA
0LDQtdC8INC/0YDQvtCx0LXQu9GM0L3Ri9C1INGB0LjQvNCy0L7Qu9GLINGC0L7Qu9GM0LrQviDQ
tdGB0LvQuCDRjdGC0L4g0YHQu9GD0YfQsNC50L3QviDQv9C+0L/QsNCy0YjQuNC5IFxyINC40LvQ
uCBcbiwgCiAgICAgICAgICAgICMg0L3QviDQtNC70Y8g0LHQtdC30L7Qv9Cw0YHQvdC+0YHRgtC4
INC/0LDRgNC+0LvRjyDQu9GD0YfRiNC1INCx0YDQsNGC0Ywg0LrQsNC6INC10YHRgtGMLgogICAg
ICAgICAgICAjINCV0YHQu9C4INCy0Ysg0YHQvtC30LTQsNCy0LDQu9C4INC/0LDRgNC+0LvRjCDR
gSDQv9GA0L7QsdC10LvQvtC8INCyINC60L7QvdGG0LUgLSDQvtC9INCy0LDQttC10L0hCiAgICAg
ICAgICAgIAogICAgICAgICAgICAjINCT0LXQvdC10YDQuNGA0YPQtdC8INC60LvRjtGHICjQv9Cw
0YDQsNC80LXRgtGA0Ysg0JTQntCb0JbQndCrINGB0L7QstC/0LDQtNCw0YLRjCDRgSBlbmNyeXB0
b3IucHkpCiAgICAgICAgICAgIGtkZiA9IFBCS0RGMkhNQUMoCiAgICAgICAgICAgICAgICBhbGdv
cml0aG09aGFzaGVzLlNIQTI1NigpLAogICAgICAgICAgICAgICAgbGVuZ3RoPTMyLAogICAgICAg
ICAgICAgICAgc2FsdD1zYWx0LAogICAgICAgICAgICAgICAgaXRlcmF0aW9ucz0xMDAwMDAsCiAg
ICAgICAgICAgICAgICBiYWNrZW5kPWRlZmF1bHRfYmFja2VuZCgpIAogICAgICAgICAgICAgICAg
IyBiYWNrZW5kIGRlZmF1bHQgaXMgT0sKICAgICAgICAgICAgKQogICAgICAgICAgICBrZXkgPSBi
YXNlNjQudXJsc2FmZV9iNjRlbmNvZGUoa2RmLmRlcml2ZShwYXNzd29yZC5lbmNvZGUoJ3V0Zi04
JykpKQogICAgICAgICAgICAKICAgICAgICAgICAgZiA9IEZlcm5ldChrZXkpCiAgICAgICAgICAg
IAogICAgICAgICAgICAjINCf0YvRgtCw0LXQvNGB0Y8g0YDQsNGB0YjQuNGE0YDQvtCy0LDRgtGM
CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGRlY3J5cHRlZF9kYXRhID0gZi5kZWNy
eXB0KGVuY3J5cHRlZF9kYXRhKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAg
ICAgICAgICAgIyBGZXJuZXQg0LrQuNC00LDQtdGCIEludmFsaWRUb2tlbiDQtdGB0LvQuCDQv9Cw
0YDQvtC70Ywg0L3QtSDQv9C+0LTQvtGI0LXQuwogICAgICAgICAgICAgICAgc2VsZi5fZXhpdF9l
cnJvcigiRGVjcnlwdGlvbiBmYWlsZWQhIEludmFsaWQgcGFzc3dvcmQgb3IgY29ycnVwdGVkIGZp
bGUuIikKICAgICAgICAgICAgCiAgICAgICAgICAgICMg0JTQtdC60L7QtNC40YDRg9C10LwgSlNP
TgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBqc29uX3N0ciA9IGRlY3J5cHRlZF9k
YXRhLmRlY29kZSgndXRmLTgnKQogICAgICAgICAgICAgICAgZGF0YSA9IGpzb24ubG9hZHMoanNv
bl9zdHIpCiAgICAgICAgICAgICAgICBzZWxmLmVuZHBvaW50cyA9IGRhdGEuZ2V0KCdlbmRwb2lu
dHMnLCBbXSkKICAgICAgICAgICAgZXhjZXB0IGpzb24uSlNPTkRlY29kZUVycm9yOgogICAgICAg
ICAgICAgICAgc2VsZi5fZXhpdF9lcnJvcigiRGVjcnlwdGVkIGRhdGEgaXMgbm90IHZhbGlkIEpT
T04uIENoZWNrIHNvdXJjZSBmaWxlIGludGVncml0eS4iKQogICAgICAgICAgICAgICAgCiAgICAg
ICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAjINCb0L7QstC40Lwg0LvRjtCx
0YvQtSDQtNGA0YPQs9C40LUg0L3QtdC+0LbQuNC00LDQvdC90YvQtSDQvtGI0LjQsdC60LgKICAg
ICAgICAgICAgc2VsZi5fZXhpdF9lcnJvcihmIlVuZXhwZWN0ZWQgZXJyb3IgZHVyaW5nIGRlY3J5
cHRpb246IHtzdHIoZSl9IikKCiAgICAjIC0tLSDQoNCV0JbQmNCcIDM6IEhhc2hpQ29ycCBWYXVs
dCAtLS0KICAgIGRlZiBfbG9hZF9mcm9tX3ZhdWx0KHNlbGYpOgogICAgICAgIHZhdWx0X3VybCA9
IHNlbGYuYXJncy52YXVsdF91cmwucnN0cmlwKCcvJykKICAgICAgICB2YXVsdF9wYXRoID0gc2Vs
Zi5hcmdzLnZhdWx0X3BhdGgKICAgICAgICB2YXVsdF91c2VyID0gc2VsZi5hcmdzLnZhdWx0X3Vz
ZXIKCiAgICAgICAgaWYgbm90IHZhdWx0X3VzZXI6CiAgICAgICAgICAgIHByaW50KGYiQ29ubmVj
dGluZyB0byBWYXVsdDoge3ZhdWx0X3VybH0iKQogICAgICAgICAgICB2YXVsdF91c2VyID0gaW5w
dXQoIlZhdWx0IFVzZXJuYW1lOiAiKS5zdHJpcCgpCgogICAgICAgIHZhdWx0X3Bhc3MgPSBzZWxm
LmFyZ3MudmF1bHRfcGFzcwogICAgICAgIGlmIG5vdCB2YXVsdF9wYXNzOgogICAgICAgICAgICB2
YXVsdF9wYXNzID0gZ2V0cGFzcy5nZXRwYXNzKCJWYXVsdCBQYXNzd29yZDogIikKCiAgICAgICAg
dHJ5OgogICAgICAgICAgICAjIDEuINCQ0LLRgtC+0YDQuNC30LDRhtC40Y8gKFVzZXJwYXNzIGF1
dGggbWV0aG9kKQogICAgICAgICAgICBsb2dpbl91cmwgPSBmInt2YXVsdF91cmx9L3YxL2F1dGgv
dXNlcnBhc3MvbG9naW4ve3ZhdWx0X3VzZXJ9IgogICAgICAgICAgICByZXNwID0gcmVxdWVzdHMu
cG9zdChsb2dpbl91cmwsIGpzb249eyJwYXNzd29yZCI6IHZhdWx0X3Bhc3N9LCB0aW1lb3V0PTUp
CgogICAgICAgICAgICBpZiByZXNwLnN0YXR1c19jb2RlICE9IDIwMDoKICAgICAgICAgICAgICAg
IHNlbGYuX2V4aXRfZXJyb3IoZiJWYXVsdCBsb2dpbiBmYWlsZWQ6IHtyZXNwLnRleHR9IikKICAg
ICAgICAgICAgICAgIAogICAgICAgICAgICBjbGllbnRfdG9rZW4gPSByZXNwLmpzb24oKVsnYXV0
aCddWydjbGllbnRfdG9rZW4nXQogICAgICAgICAgICAKICAgICAgICAgICAgIyAyLiDQp9GC0LXQ
vdC40LUg0YHQtdC60YDQtdGC0LAKICAgICAgICAgICAgIyDQn9C+0LTQtNC10YDQttC60LAgS1Yg
VmVyc2lvbiAyICjQv9GD0YLRjCDQtNC+0LvQttC10L0g0YHQvtC00LXRgNC20LDRgtGMIC9kYXRh
LyDQuNC70Lgg0LzRiyDRgdCw0LzQuCDQtdCz0L4g0LTQvtCx0LDQstC40Lw/KQogICAgICAgICAg
ICAjINCU0LvRjyDQv9GA0L7RgdGC0L7RgtGLINGB0YfQuNGC0LDQtdC8LCDRh9GC0L4g0L/QvtC7
0YzQt9C+0LLQsNGC0LXQu9GMINC00LDQtdGCINC/0L7Qu9C90YvQuSDQv9GD0YLRjCDQuiBBUEks
IAogICAgICAgICAgICAjINC90L4g0YfQsNGB0YLQviDQsiBLViB2MiDQv9GD0YLRjCAnc2VjcmV0
L215Y29uZicg0L/RgNC10LLRgNCw0YnQsNC10YLRgdGPINCyICdzZWNyZXQvZGF0YS9teWNvbmYn
CiAgICAgICAgICAgIAogICAgICAgICAgICByZWFkX3VybCA9IGYie3ZhdWx0X3VybH0vdjEve3Zh
dWx0X3BhdGh9IgogICAgICAgICAgICBoZWFkZXJzID0geyJYLVZhdWx0LVRva2VuIjogY2xpZW50
X3Rva2VufQogICAgICAgICAgICAKICAgICAgICAgICAgcmVzcCA9IHJlcXVlc3RzLmdldChyZWFk
X3VybCwgaGVhZGVycz1oZWFkZXJzLCB0aW1lb3V0PTUpCiAgICAgICAgICAgIAogICAgICAgICAg
ICBpZiByZXNwLnN0YXR1c19jb2RlICE9IDIwMDoKICAgICAgICAgICAgICAgIHNlbGYuX2V4aXRf
ZXJyb3IoZiJDYW5ub3QgcmVhZCBzZWNyZXQgJ3t2YXVsdF9wYXRofSc6IHtyZXNwLnN0YXR1c19j
b2RlfSB7cmVzcC50ZXh0fSIpCiAgICAgICAgICAgIAogICAgICAgICAgICBqc29uX3Jlc3AgPSBy
ZXNwLmpzb24oKQogICAgICAgICAgICAKICAgICAgICAgICAgIyDQn9GL0YLQsNC10LzRgdGPINC0
0L7RgdGC0LDRgtGMINC00LDQvdC90YvQtS4KICAgICAgICAgICAgIyBLViB2MjogZGF0YSAtPiBk
YXRhIC0+IGtleQogICAgICAgICAgICAjIEtWIHYxOiBkYXRhIC0+IGtleQogICAgICAgICAgICAK
ICAgICAgICAgICAgcGF5bG9hZCA9IHt9CiAgICAgICAgICAgIGlmICdkYXRhJyBpbiBqc29uX3Jl
c3A6CiAgICAgICAgICAgICAgICBpbm5lciA9IGpzb25fcmVzcFsnZGF0YSddCiAgICAgICAgICAg
ICAgICBpZiAnZGF0YScgaW4gaW5uZXIgYW5kIGlzaW5zdGFuY2UoaW5uZXJbJ2RhdGEnXSwgZGlj
dCk6CiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCA9IGlubmVyWydkYXRhJ10gICMgS1YgdjIg
c3RydWN0dXJlCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHBheWxv
YWQgPSBpbm5lciAgIyBLViB2MSBzdHJ1Y3R1cmUKICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgIHNlbGYuX2V4aXRfZXJyb3IoIlZhdWx0IHJlc3BvbnNlIGZvcm1hdCBub3QgcmVjb2du
aXplZCAobm8gJ2RhdGEnIGZpZWxkKS4iKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICMg
0JjRidC10Lwg0LrQu9GO0YcgJ3MzX2NvbmZpZ19qc29uJyDQuNC70Lgg0L/QsNGA0YHQuNC8INCy
0LXRgdGMIHBheWxvYWQg0LXRgdC70Lgg0Y3RgtC+INGD0LbQtSDRgdGC0YDRg9C60YLRg9GA0LAK
ICAgICAgICAgICAgaWYgJ2VuZHBvaW50cycgaW4gcGF5bG9hZDoKICAgICAgICAgICAgICAgICMg
0KHRgtGA0YPQutGC0YPRgNCwINC70LXQttC40YIg0L/RgNGP0LzQviDQsiDRgdC10LrRgNC10YLQ
tQogICAgICAgICAgICAgICAgc2VsZi5lbmRwb2ludHMgPSBwYXlsb2FkWydlbmRwb2ludHMnXQog
ICAgICAgICAgICBlbGlmICdjb250ZW50JyBpbiBwYXlsb2FkOgogICAgICAgICAgICAgICAgIyDQ
odGC0YDRg9C60YLRg9GA0LAg0LvQtdC20LjRgiDQsiDQv9C+0LvQtSAnY29udGVudCcg0YHRgtGA
0L7QutC+0Lkg0LjQu9C4INC+0LHRitC10LrRgtC+0LwKICAgICAgICAgICAgICAgIGNvbnRlbnQg
PSBwYXlsb2FkWydjb250ZW50J10KICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoY29udGVu
dCwgc3RyKToKICAgICAgICAgICAgICAgICAgICBzZWxmLmVuZHBvaW50cyA9IGpzb24ubG9hZHMo
Y29udGVudCkuZ2V0KCdlbmRwb2ludHMnLCBbXSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICAgICAgICAgc2VsZi5lbmRwb2ludHMgPSBjb250ZW50LmdldCgnZW5kcG9pbnRzJywg
W10pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjINCf0L7RgdC70LXQtNC90LjQ
uSDRiNCw0L3RgSAtINC80L7QttC10YIg0LLQtdGB0YwgcGF5bG9hZCDQuCDQtdGB0YLRjCDQutC+
0L3RhNC40LM/CiAgICAgICAgICAgICAgICBzZWxmLmVuZHBvaW50cyA9IHBheWxvYWQuZ2V0KCdl
bmRwb2ludHMnLCBbXSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICBpZiBub3Qgc2VsZi5l
bmRwb2ludHM6CiAgICAgICAgICAgICAgICBzZWxmLl9leGl0X2Vycm9yKGYiU2VjcmV0ICd7dmF1
bHRfcGF0aH0nIHJlYWQsIGJ1dCBubyAnZW5kcG9pbnRzJyBmb3VuZCBpbnNpZGUuIikKCiAgICAg
ICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuUmVxdWVzdEV4Y2VwdGlvbiBhcyBlOgogICAg
ICAgICAgICBzZWxmLl9leGl0X2Vycm9yKGYiTmV0d29yayBlcnJvciBjb25uZWN0aW5nIHRvIFZh
dWx0OiB7ZX0iKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2Vs
Zi5fZXhpdF9lcnJvcihmIlZhdWx0IGVycm9yOiB7ZX0iKQoKICAgIGRlZiBzYXZlX2NvbmZpZyhz
ZWxmKToKICAgICAgICAiIiLQodC+0YXRgNCw0L3QtdC90LjQtSDQvtGC0LrQu9GO0YfQtdC90L4g
0LIg0LHQtdC30L7Qv9Cw0YHQvdGL0YUg0YDQtdC20LjQvNCw0YUiIiIKICAgICAgICBpZiBzZWxm
LmFyZ3MudmF1bHRfdXJsIG9yIHNlbGYuYXJncy5lbmNyeXB0ZWRfY29uZmlnOgogICAgICAgICAg
ICAjINCSINC30LDRidC40YnQtdC90L3Ri9GFINGA0LXQttC40LzQsNGFINC80Ysg0L3QtSDRgdC+
0YXRgNCw0L3Rj9C10Lwg0LrQvtC90YTQuNCzINC+0LHRgNCw0YLQvdC+INC90LAg0LTQuNGB0Log
0LIgcGxhaW4gdGV4dAogICAgICAgICAgICByZXR1cm4KICAgICAgICAKICAgICAgICAjINCb0L7Q
s9C40LrQsCDQtNC70Y8gcGxhaW4gdGV4dCAo0LXRgdC70Lgg0L3Rg9C20L3QvikKICAgICAgICBw
YXNzIAoKICAgIGRlZiBnZXRfZW5kcG9pbnRzKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmVu
ZHBvaW50cwoKICAgIGRlZiBnZXRfZW5kcG9pbnQoc2VsZiwgbmFtZSk6CiAgICAgICAgZm9yIGVw
IGluIHNlbGYuZW5kcG9pbnRzOgogICAgICAgICAgICBpZiBlcFsnbmFtZSddID09IG5hbWU6CiAg
ICAgICAgICAgICAgICByZXR1cm4gZXAKICAgICAgICByZXR1cm4gTm9uZQoKCmNsYXNzIExSVUNh
Y2hlOgogICAgIiIi0J/RgNC+0YHRgtC+0LkgTFJVINC60LXRiCDQtNC70Y8g0YXRgNCw0L3QtdC9
0LjRjyDRgNC10LfRg9C70YzRgtCw0YLQvtCyINC30LDQv9GA0L7RgdC+0LIg0LogUzMiIiIKCiAg
ICBkZWYgX19pbml0X18oc2VsZiwgbWF4c2l6ZT0xMDAwKToKICAgICAgICBzZWxmLmNhY2hlID0g
T3JkZXJlZERpY3QoKQogICAgICAgIHNlbGYubWF4c2l6ZSA9IG1heHNpemUKCiAgICBkZWYgZ2V0
KHNlbGYsIGtleSk6CiAgICAgICAgaWYga2V5IG5vdCBpbiBzZWxmLmNhY2hlOgogICAgICAgICAg
ICByZXR1cm4gTm9uZQogICAgICAgIHNlbGYuY2FjaGUubW92ZV90b19lbmQoa2V5KQogICAgICAg
IHJldHVybiBzZWxmLmNhY2hlW2tleV0KCiAgICBkZWYgcHV0KHNlbGYsIGtleSwgdmFsdWUpOgog
ICAgICAgIGlmIGtleSBpbiBzZWxmLmNhY2hlOgogICAgICAgICAgICBzZWxmLmNhY2hlLm1vdmVf
dG9fZW5kKGtleSkKICAgICAgICBzZWxmLmNhY2hlW2tleV0gPSB2YWx1ZQogICAgICAgIGlmIGxl
bihzZWxmLmNhY2hlKSA+IHNlbGYubWF4c2l6ZToKICAgICAgICAgICAgc2VsZi5jYWNoZS5wb3Bp
dGVtKGxhc3Q9RmFsc2UpCgogICAgZGVmIGludmFsaWRhdGUoc2VsZiwgcGF0dGVybj1Ob25lKToK
ICAgICAgICAiIiLQmNC90LLQsNC70LjQtNCw0YbQuNGPINC60LXRiNCwINC/0L4g0L/QsNGC0YLQ
tdGA0L3RgyIiIgogICAgICAgIGlmIHBhdHRlcm4gaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5j
YWNoZS5jbGVhcigpCiAgICAgICAgZWxzZToKICAgICAgICAgICAga2V5c190b19yZW1vdmUgPSBb
ayBmb3IgayBpbiBzZWxmLmNhY2hlLmtleXMoKSBpZiBwYXR0ZXJuIGluIGtdCiAgICAgICAgICAg
IGZvciBrZXkgaW4ga2V5c190b19yZW1vdmU6CiAgICAgICAgICAgICAgICBkZWwgc2VsZi5jYWNo
ZVtrZXldCgoKY2xhc3MgUzNNYW5hZ2VyOgogICAgIiIi0JzQtdC90LXQtNC20LXRgCDQtNC70Y8g
0YDQsNCx0L7RgtGLINGBIFMzIENlcGgiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgZW5kcG9p
bnRfY29uZmlnKToKICAgICAgICBzZWxmLmVuZHBvaW50X25hbWUgPSBlbmRwb2ludF9jb25maWdb
J25hbWUnXQogICAgICAgIHNlbGYuZW5kcG9pbnRfdXJsID0gZW5kcG9pbnRfY29uZmlnWyd1cmwn
XQogICAgICAgIHNlbGYuYWNjZXNzX2tleSA9IGVuZHBvaW50X2NvbmZpZ1snYWNjZXNzX2tleSdd
CiAgICAgICAgc2VsZi5zZWNyZXRfa2V5ID0gZW5kcG9pbnRfY29uZmlnWydzZWNyZXRfa2V5J10K
ICAgICAgICBzZWxmLmlzX2Nvbm5lY3RlZCA9IEZhbHNlCiAgICAgICAgc2VsZi5jb25uZWN0aW9u
X2Vycm9yID0gTm9uZQogICAgICAgIHNlbGYudmVyc2lvbmluZ19zdGF0dXNfY2FjaGUgPSB7fQog
ICAgICAgIHNlbGYuczNfbmVlZHNfcmVmcmVzaCA9IFRydWUKCiAgICAgICAgIyDQmtC10Ygg0LTQ
u9GPINGB0L/QuNGB0LrQvtCyINC+0LHRitC10LrRgtC+0LIKICAgICAgICBzZWxmLm9iamVjdF9j
YWNoZSA9IExSVUNhY2hlKG1heHNpemU9MTAwMCkKICAgICAgICBzZWxmLmJ1Y2tldF9jYWNoZSA9
IExSVUNhY2hlKG1heHNpemU9MTApCgogICAgICAgICMg0JHQq9Ch0KLQoNCQ0K8g0J/QoNCe0JLQ
ldCg0JrQkDog0LTQvtGB0YLRg9C/0LXQvSDQu9C4IGVuZHBvaW50INC/0LXRgNC10LQg0YHQvtC3
0LTQsNC90LjQtdC8INC60LvQuNC10L3RgtCwCiAgICAgICAgY2FuX2Nvbm5lY3QsIGVycm9yX21z
ZyA9IGNoZWNrX3MzX2VuZHBvaW50X2Nvbm5lY3Rpdml0eShzZWxmLmVuZHBvaW50X3VybCwgdGlt
ZW91dD0yKQoKICAgICAgICBjYV9idW5kbGUgPSBlbmRwb2ludF9jb25maWcuZ2V0KCJjYV9idW5k
bGUiKQoKICAgICAgICBpZiBub3QgY2FuX2Nvbm5lY3Q6CiAgICAgICAgICAgIHNlbGYuczNfY2xp
ZW50ID0gTm9uZQogICAgICAgICAgICBzZWxmLmNvbm5lY3Rpb25fZXJyb3IgPSBlcnJvcl9tc2cK
ICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHRyeToKICAgICAgICAgICAgIyDQndCw0YHRgtGA
0L7QudC60LAg0LrQvtGA0L7RgtC60LjRhSDRgtCw0LnQvNCw0YPRgtC+0LIg0LTQu9GPIGJvdG8z
CiAgICAgICAgICAgIGNvbmZpZyA9IENvbmZpZygKICAgICAgICAgICAgICAgIGNvbm5lY3RfdGlt
ZW91dD0zLAogICAgICAgICAgICAgICAgcmVhZF90aW1lb3V0PTEwLAogICAgICAgICAgICAgICAg
cmV0cmllcz17J21heF9hdHRlbXB0cyc6IDF9ICAjINCi0L7Qu9GM0LrQviAxINC/0L7Qv9GL0YLQ
utCwCiAgICAgICAgICAgICkKCiAgICAgICAgICAgIHNlbGYuczNfY2xpZW50ID0gYm90bzMuY2xp
ZW50KAogICAgICAgICAgICAgICAgJ3MzJywKICAgICAgICAgICAgICAgIGVuZHBvaW50X3VybD1z
ZWxmLmVuZHBvaW50X3VybCwKICAgICAgICAgICAgICAgIGF3c19hY2Nlc3Nfa2V5X2lkPXNlbGYu
YWNjZXNzX2tleSwKICAgICAgICAgICAgICAgIGF3c19zZWNyZXRfYWNjZXNzX2tleT1zZWxmLnNl
Y3JldF9rZXksCiAgICAgICAgICAgICAgICBjb25maWc9Y29uZmlnLAogICAgICAgICAgICAgICAg
dmVyaWZ5PWNhX2J1bmRsZSBpZiBjYV9idW5kbGUgZWxzZSBUcnVlLAogICAgICAgICAgICApCiAg
ICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLnMzX2NsaWVudCA9
IE5vbmUKICAgICAgICAgICAgc2VsZi5jb25uZWN0aW9uX2Vycm9yID0gc3RyKGUpCgogICAgZGVm
IF9yZWFkX2J1Y2tldF9zZWVkc19maWxlKHNlbGYsIGZpbGVwYXRoPSJzM19idWNrZXRzLnR4dCIp
OgogICAgICAgICMg0KTQvtGA0LzQsNGCOiAiPGJ1Y2tldD4gPGVwb2NoPiIg0LjQu9C4INC/0YDQ
vtGB0YLQviAiPGJ1Y2tldD4iCiAgICAgICAgIyDQmtC+0LzQvNC10L3RgtCw0YDQuNC4OiDRgdGC
0YDQvtC60LAg0L3QsNGH0LjQvdCw0LXRgtGB0Y8g0YEgJyMnCiAgICAgICAgcmVzdWx0ID0ge30K
ICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhmaWxlcGF0aCk6
CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgICAgICAgIHdpdGggb3BlbihmaWxl
cGF0aCwgInIiLCBlbmNvZGluZz0idXRmLTgiLCBlcnJvcnM9Imlnbm9yZSIpIGFzIGY6CiAgICAg
ICAgICAgICAgICBmb3IgbGluZSBpbiBmOgogICAgICAgICAgICAgICAgICAgIHMgPSBsaW5lLnN0
cmlwKCkKICAgICAgICAgICAgICAgICAgICBpZiBub3QgcyBvciBzLnN0YXJ0c3dpdGgoIiMiKToK
ICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBwYXJ0
cyA9IHMuc3BsaXQoKQogICAgICAgICAgICAgICAgICAgIG5hbWUgPSBwYXJ0c1swXQogICAgICAg
ICAgICAgICAgICAgIGVwb2NoID0gTm9uZQogICAgICAgICAgICAgICAgICAgIGlmIGxlbihwYXJ0
cykgPj0gMjoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZXBvY2ggPSBpbnQocGFydHNbMV0pCiAgICAgICAgICAgICAgICAgICAgICAgIGV4
Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXBvY2ggPSBOb25l
CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W25hbWVdID0gZXBvY2gKICAgICAgICBleGNlcHQg
RXhjZXB0aW9uOgogICAgICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgICAgcmV0dXJuIHJlc3Vs
dAoKCiAgICBkZWYgX2J1Y2tldF9yZWFkYWJsZShzZWxmLCBidWNrZXRuYW1lKToKICAgICAgICAj
INCc0LjQvdC40LzQsNC70YzQvdCw0Y8g0L/RgNC+0LLQtdGA0LrQsCAi0LzQvtCz0YMg0YfQuNGC
0LDRgtGMINGB0L7QtNC10YDQttC40LzQvtC1IjogbGlzdF9vYmplY3RzX3YyKE1heEtleXM9MSkK
ICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuczNfY2xpZW50Lmxpc3Rfb2JqZWN0c192MihC
dWNrZXQ9YnVja2V0bmFtZSwgTWF4S2V5cz0xKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAg
ICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBf
Z2V0X2J1Y2tldF9vd25lcl9zdHIoc2VsZiwgYnVja2V0bmFtZSk6CiAgICAgICAgIyDQn9GL0YLQ
sNC10LzRgdGPINC/0L7Qu9GD0YfQuNGC0Ywgb3duZXIgKNC80L7QttC10YIg0YLRgNC10LHQvtCy
0LDRgtGMINC00L7Qv9C+0LvQvdC40YLQtdC70YzQvdGL0YUg0L/RgNCw0LIpCiAgICAgICAgdHJ5
OgogICAgICAgICAgICBhY2wgPSBzZWxmLnMzX2NsaWVudC5nZXRfYnVja2V0X2FjbChCdWNrZXQ9
YnVja2V0bmFtZSkKICAgICAgICAgICAgb3duZXIgPSBhY2wuZ2V0KCJPd25lciIsIHt9KSBpZiBp
c2luc3RhbmNlKGFjbCwgZGljdCkgZWxzZSB7fQogICAgICAgICAgICAjINCf0YvRgtCw0LXQvNGB
0Y8g0LLRi9GC0LDRidC40YLRjCDRh9GC0L4t0YLQviDRh9C10LvQvtCy0LXQutC+0YfQuNGC0LDQ
tdC80L7QtQogICAgICAgICAgICBkbiA9IG93bmVyLmdldCgiRGlzcGxheU5hbWUiKQogICAgICAg
ICAgICBvaWQgPSBvd25lci5nZXQoIklEIikKICAgICAgICAgICAgcmV0dXJuIGRuIG9yIG9pZAog
ICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgZGVm
IGxpc3RfYnVja2V0cyhzZWxmKToKICAgICAgICBpZiBzZWxmLnMzX2NsaWVudCBpcyBOb25lOgog
ICAgICAgICAgICByZXR1cm4gW10KCiAgICAgICAgYnVja2V0cyA9IFtdCiAgICAgICAgdHJ5Ogog
ICAgICAgICAgICByZXNwID0gc2VsZi5zM19jbGllbnQubGlzdF9idWNrZXRzKCkKICAgICAgICAg
ICAgc2VsZi5pc2Nvbm5lY3RlZCA9IFRydWUKICAgICAgICAgICAgYnVja2V0cyA9IHJlc3AuZ2V0
KCJCdWNrZXRzIiwgW10pIGlmIGlzaW5zdGFuY2UocmVzcCwgZGljdCkgZWxzZSBbXQogICAgICAg
IGV4Y2VwdCBDbGllbnRFcnJvciBhcyBlOgogICAgICAgICAgICBzZWxmLmlzY29ubmVjdGVkID0g
RmFsc2UKICAgICAgICAgICAgc2VsZi5jb25uZWN0aW9uZXJyb3IgPSBzdHIoZSkKICAgICAgICAg
ICAgYnVja2V0cyA9IFtdCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAg
ICBzZWxmLmlzY29ubmVjdGVkID0gRmFsc2UKICAgICAgICAgICAgc2VsZi5jb25uZWN0aW9uZXJy
b3IgPSBzdHIoZSkKICAgICAgICAgICAgYnVja2V0cyA9IFtdCgogICAgICAgIGZvciBiIGluIGJ1
Y2tldHM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG5hbWUgPSBiLmdldCgiTmFt
ZSIpIGlmIGlzaW5zdGFuY2UoYiwgZGljdCkgZWxzZSBOb25lCiAgICAgICAgICAgICAgICBpZiBu
b3QgbmFtZToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgb3du
ZXIgPSBzZWxmLl9nZXRfYnVja2V0X293bmVyX3N0cihuYW1lKQogICAgICAgICAgICAgICAgaWYg
b3duZXI6CiAgICAgICAgICAgICAgICAgICAgYlsiX093bmVySGludCJdID0gb3duZXIKICAgICAg
ICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgIyDQ
mNC90LTQtdC60YEg0YPQttC1INC90LDQudC00LXQvdC90YvRhQogICAgICAgIGV4aXN0aW5nID0g
e2IuZ2V0KCJOYW1lIikgZm9yIGIgaW4gYnVja2V0cyBpZiBpc2luc3RhbmNlKGIsIGRpY3QpfQoK
ICAgICAgICAjINCU0L7Qv9C+0LvQvdGP0LXQvCDQuNC3IHMzX2J1Y2tldHMudHhyCiAgICAgICAg
c2VlZHMgPSBzZWxmLl9yZWFkX2J1Y2tldF9zZWVkc19maWxlKCJzM19idWNrZXRzLnR4dCIpCiAg
ICAgICAgZm9yIG5hbWUsIGVwb2NoIGluIHNlZWRzLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIG5h
bWUgaW4gZXhpc3Rpbmc6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBpZiBu
b3Qgc2VsZi5fYnVja2V0X3JlYWRhYmxlKG5hbWUpOgogICAgICAgICAgICAgICAgY29udGludWUK
CiAgICAgICAgICAgIG93bmVyID0gc2VsZi5fZ2V0X2J1Y2tldF9vd25lcl9zdHIobmFtZSkKICAg
ICAgICAgICAgIyDQodC+0LfQtNCw0ZHQvCDQvtCx0YrQtdC60YIg0LIg0YTQvtGA0LzQsNGC0LUg
0LrQsNC6INGDIGxpc3RfYnVja2V0cwogICAgICAgICAgICBleHRyYSA9IHsiTmFtZSI6IG5hbWV9
CiAgICAgICAgICAgIGlmIGVwb2NoIGFuZCBlcG9jaCA+IDA6CiAgICAgICAgICAgICAgICAjIGJv
dG8zL2xpc3RfYnVja2V0cyDQvtGC0LTQsNGR0YIgQ3JlYXRpb25EYXRlINC60LDQuiBkYXRldGlt
ZQogICAgICAgICAgICAgICAgZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUsIHRpbWV6b25l
CiAgICAgICAgICAgICAgICBleHRyYVsiQ3JlYXRpb25EYXRlIl0gPSBkYXRldGltZS5mcm9tdGlt
ZXN0YW1wKGVwb2NoLCB0ej10aW1lem9uZS51dGMpCgogICAgICAgICAgICBpZiBvd25lcjoKICAg
ICAgICAgICAgICAgIGV4dHJhWyJfT3duZXJIaW50Il0gPSBvd25lciAgIyDQvdCw0YjQtSDQv9C+
0LvQtSDQtNC70Y8gVUkKICAgICAgICAgICAgYnVja2V0cy5hcHBlbmQoZXh0cmEpCiAgICAgICAg
ICAgIGV4aXN0aW5nLmFkZChuYW1lKQoKICAgICAgICByZXR1cm4gYnVja2V0cwoKICAgIGRlZiBj
cmVhdGVfYnVja2V0KHNlbGYsIGJ1Y2tldF9uYW1lKToKICAgICAgICBpZiBzZWxmLnMzX2NsaWVu
dCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICB0cnk6CiAgICAgICAg
ICAgIHNlbGYuczNfY2xpZW50LmNyZWF0ZV9idWNrZXQoQnVja2V0PWJ1Y2tldF9uYW1lKQogICAg
ICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJyb3IsIEV4Y2VwdGlv
bik6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBkZWxldGVfYnVja2V0KHNlbGYs
IGJ1Y2tldF9uYW1lKToKICAgICAgICBpZiBzZWxmLnMzX2NsaWVudCBpcyBOb25lOgogICAgICAg
ICAgICByZXR1cm4gRmFsc2UKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuczNfY2xpZW50
LmRlbGV0ZV9idWNrZXQoQnVja2V0PWJ1Y2tldF9uYW1lKQogICAgICAgICAgICByZXR1cm4gVHJ1
ZQogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJyb3IsIEV4Y2VwdGlvbik6CiAgICAgICAgICAgIHJl
dHVybiBGYWxzZQoKICAgIGRlZiBsaXN0X29iamVjdHMoc2VsZiwgYnVja2V0X25hbWUsIHByZWZp
eD0nJyk6CiAgICAgICAgaWYgc2VsZi5zM19jbGllbnQgaXMgTm9uZToKICAgICAgICAgICAgcmV0
dXJuIFtdLCBbXQogICAgICAgIHRyeToKICAgICAgICAgICAgcGFnaW5hdG9yID0gc2VsZi5zM19j
bGllbnQuZ2V0X3BhZ2luYXRvcignbGlzdF9vYmplY3RzX3YyJykKICAgICAgICAgICAgcGFnZXMg
PSBwYWdpbmF0b3IucGFnaW5hdGUoQnVja2V0PWJ1Y2tldF9uYW1lLCBQcmVmaXg9cHJlZml4LCBE
ZWxpbWl0ZXI9Jy8nKQoKICAgICAgICAgICAgZm9sZGVycyA9IFtdCiAgICAgICAgICAgIGZpbGVz
ID0gW10KCiAgICAgICAgICAgIGZvciBwYWdlIGluIHBhZ2VzOgogICAgICAgICAgICAgICAgaWYg
J0NvbW1vblByZWZpeGVzJyBpbiBwYWdlOgogICAgICAgICAgICAgICAgICAgIGZvciBvYmogaW4g
cGFnZVsnQ29tbW9uUHJlZml4ZXMnXToKICAgICAgICAgICAgICAgICAgICAgICAgZm9sZGVycy5h
cHBlbmQoeydLZXknOiBvYmpbJ1ByZWZpeCddfSkKCiAgICAgICAgICAgICAgICBpZiAnQ29udGVu
dHMnIGluIHBhZ2U6CiAgICAgICAgICAgICAgICAgICAgZm9yIG9iaiBpbiBwYWdlWydDb250ZW50
cyddOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3Qgb2JqWydLZXknXS5lbmRzd2l0aCgn
LycpIGFuZCBvYmpbJ0tleSddICE9IHByZWZpeDoKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGZpbGVzLmFwcGVuZChvYmopCgogICAgICAgICAgICByZXR1cm4gZm9sZGVycywgZmlsZXMKICAg
ICAgICBleGNlcHQgKENsaWVudEVycm9yLCBFeGNlcHRpb24pOgogICAgICAgICAgICByZXR1cm4g
W10sIFtdCgogICAgZGVmIGxpc3RfYWxsX29iamVjdHMoc2VsZiwgYnVja2V0X25hbWUsIHByZWZp
eD0nJyk6CiAgICAgICAgaWYgc2VsZi5zM19jbGllbnQgaXMgTm9uZToKICAgICAgICAgICAgcmV0
dXJuIFtdCiAgICAgICAgdHJ5OgogICAgICAgICAgICBwYWdpbmF0b3IgPSBzZWxmLnMzX2NsaWVu
dC5nZXRfcGFnaW5hdG9yKCdsaXN0X29iamVjdHNfdjInKQogICAgICAgICAgICBwYWdlcyA9IHBh
Z2luYXRvci5wYWdpbmF0ZShCdWNrZXQ9YnVja2V0X25hbWUsIFByZWZpeD1wcmVmaXgpCgogICAg
ICAgICAgICBvYmplY3RzID0gW10KICAgICAgICAgICAgZm9yIHBhZ2UgaW4gcGFnZXM6CiAgICAg
ICAgICAgICAgICBpZiAnQ29udGVudHMnIGluIHBhZ2U6CiAgICAgICAgICAgICAgICAgICAgZm9y
IG9iaiBpbiBwYWdlWydDb250ZW50cyddOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBvYmpb
J0tleSddICE9IHByZWZpeDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdHMuYXBw
ZW5kKG9iaikKCiAgICAgICAgICAgIHJldHVybiBvYmplY3RzCiAgICAgICAgZXhjZXB0IChDbGll
bnRFcnJvciwgRXhjZXB0aW9uKToKICAgICAgICAgICAgcmV0dXJuIFtdCgogICAgZGVmIGNvdW50
X29iamVjdHMoc2VsZiwgYnVja2V0X25hbWUsIHByZWZpeD0nJyk6CiAgICAgICAgIiIi0JHRi9GB
0YLRgNGL0Lkg0L/QvtC00YHRh9C10YIg0LrQvtC70LjRh9C10YHRgtCy0LAg0L7QsdGK0LXQutGC
0L7QsiDQsdC10Lcg0LfQsNCz0YDRg9C30LrQuCDQtNCw0L3QvdGL0YUKCiAgICAgICAgQXJnczoK
ICAgICAgICAgICAgYnVja2V0X25hbWU6INC40LzRjyDQsdCw0LrQtdGC0LAKICAgICAgICAgICAg
cHJlZml4OiDQv9GA0LXRhNC40LrRgSDQtNC70Y8g0YTQuNC70YzRgtGA0LDRhtC40LgKCiAgICAg
ICAgUmV0dXJuczoKICAgICAgICAgICAgdHVwbGU6ICh0b3RhbF9vYmplY3RzLCB0b3RhbF9zaXpl
KSDQuNC70LggKE5vbmUsIE5vbmUpINC/0YDQuCDQvtGI0LjQsdC60LUKICAgICAgICAiIiIKICAg
ICAgICBpZiBzZWxmLnMzX2NsaWVudCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZSwg
Tm9uZQoKICAgICAgICAjINCf0YDQvtCy0LXRgNGP0LXQvCDQutC10YgKICAgICAgICBjYWNoZV9r
ZXkgPSBmImNvdW50OntidWNrZXRfbmFtZX06e3ByZWZpeH0iCiAgICAgICAgY2FjaGVkID0gc2Vs
Zi5vYmplY3RfY2FjaGUuZ2V0KGNhY2hlX2tleSkKICAgICAgICBpZiBjYWNoZWQgaXMgbm90IE5v
bmU6CiAgICAgICAgICAgIHJldHVybiBjYWNoZWQKCiAgICAgICAgdHJ5OgogICAgICAgICAgICB0
b3RhbF9vYmplY3RzID0gMAogICAgICAgICAgICB0b3RhbF9zaXplID0gMAoKICAgICAgICAgICAg
cGFnaW5hdG9yID0gc2VsZi5zM19jbGllbnQuZ2V0X3BhZ2luYXRvcignbGlzdF9vYmplY3RzX3Yy
JykKICAgICAgICAgICAgcGFnZXMgPSBwYWdpbmF0b3IucGFnaW5hdGUoQnVja2V0PWJ1Y2tldF9u
YW1lLCBQcmVmaXg9cHJlZml4KQoKICAgICAgICAgICAgZm9yIHBhZ2UgaW4gcGFnZXM6CiAgICAg
ICAgICAgICAgICBpZiAnQ29udGVudHMnIGluIHBhZ2U6CiAgICAgICAgICAgICAgICAgICAgdG90
YWxfb2JqZWN0cyArPSBsZW4ocGFnZVsnQ29udGVudHMnXSkKICAgICAgICAgICAgICAgICAgICB0
b3RhbF9zaXplICs9IHN1bShvYmouZ2V0KCdTaXplJywgMCkgZm9yIG9iaiBpbiBwYWdlWydDb250
ZW50cyddKQoKICAgICAgICAgICAgcmVzdWx0ID0gKHRvdGFsX29iamVjdHMsIHRvdGFsX3NpemUp
CiAgICAgICAgICAgIHNlbGYub2JqZWN0X2NhY2hlLnB1dChjYWNoZV9rZXksIHJlc3VsdCkKICAg
ICAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgICAgICBleGNlcHQgKENsaWVudEVycm9yLCBFeGNl
cHRpb24pOgogICAgICAgICAgICByZXR1cm4gTm9uZSwgTm9uZQoKICAgIGRlZiBsaXN0X29iamVj
dHNfbGF6eShzZWxmLCBidWNrZXRfbmFtZSwgcHJlZml4PScnLCBwYWdlX3NpemU9MTAwMCwgdXNl
X3ZlcnNpb25pbmc9RmFsc2UpOgogICAgICAgICIiIgogICAgICAgINCT0LXQvdC10YDQsNGC0L7R
gCDQtNC70Y8g0LvQtdC90LjQstC+0LkgKNC/0L7RgdGC0YDQsNC90LjRh9C90L7QuSkg0LfQsNCz
0YDRg9C30LrQuCDQvtCx0YrQtdC60YLQvtCyINC40LcgUzMuCiAgICAgICAg0J/QvtC30LLQvtC7
0Y/QtdGCINC40YLQtdGA0LjRgNC+0LLQsNGC0YzRgdGPINC/0L4g0YHQvtC00LXRgNC20LjQvNC+
0LzRgyDQsdCw0LrQtdGC0LAg0LHQtdC3INC30LDQs9GA0YPQt9C60Lgg0LLRgdC10LPQviDRgdC/
0LjRgdC60LAg0LIg0L/QsNC80Y/RgtGMLgoKICAgICAgICDQkNGA0LPRg9C80LXQvdGC0Ys6CiAg
ICAgICAgICAgIGJ1Y2tldF9uYW1lIChzdHIpOiDQmNC80Y8gUzMg0LHQsNC60LXRgtCwLgogICAg
ICAgICAgICBwcmVmaXggKHN0cik6INCf0YDQtdGE0LjQutGBICjQstC40YDRgtGD0LDQu9GM0L3Q
sNGPINC/0LDQv9C60LApINC00LvRjyDRhNC40LvRjNGC0YDQsNGG0LjQuCDQvtCx0YrQtdC60YLQ
vtCyLgogICAgICAgICAgICBwYWdlX3NpemUgKGludCk6INCa0L7Qu9C40YfQtdGB0YLQstC+INC+
0LHRitC10LrRgtC+0LIg0LIg0L7QtNC90L7QvCDQt9Cw0L/RgNC+0YHQtSDQuiBBUEkgKE1heEtl
eXMpLgogICAgICAgICAgICB1c2VfdmVyc2lvbmluZyAoYm9vbCk6INCV0YHQu9C4IFRydWUsINC4
0YHQv9C+0LvRjNC30YPQtdGCIEFQSSBsaXN0X29iamVjdF92ZXJzaW9ucyDQtNC70Y8g0L/QvtC7
0YPRh9C10L3QuNGPINCy0YHQtdGFINCy0LXRgNGB0LjQuSDQvtCx0YrQtdC60YLQvtCyLgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgINCV0YHQu9C4IEZhbHNlLCDQuNGB0L/QvtC7
0YzQt9GD0LXRgiDRgdGC0LDQvdC00LDRgNGC0L3Ri9C5IGxpc3Rfb2JqZWN0c192Mi4KCiAgICAg
ICAg0JLQvtC30LLRgNCw0YnQsNC10YI6CiAgICAgICAgICAgIEdlbmVyYXRvcjog0JjRgtC10YDQ
sNGC0L7RgCwg0LLQvtC30LLRgNCw0YnQsNGO0YnQuNC5INGB0YLRgNCw0L3QuNGG0YsgKNC+0YLQ
stC10YLRiyBBUEkpINGBINC+0LHRitC10LrRgtCw0LzQuCDQuNC70Lgg0LLQtdGA0YHQuNGP0LzQ
uC4KICAgICAgICAiIiIKICAgICAgICBpZiBzZWxmLnMzX2NsaWVudCBpcyBOb25lOgogICAgICAg
ICAgICB5aWVsZCBbXSwgW10KICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHRyeToKICAgICAg
ICAgICAgaWYgbm90IHVzZV92ZXJzaW9uaW5nOgogICAgICAgICAgICAgICAgIyDQodCi0JDQndCU
0JDQoNCi0J3Qq9CZINCg0JXQltCY0JwgKNCx0YvRgdGC0YDRi9C5LCDQsdC10Lcg0LLQtdGA0YHQ
uNC5KQogICAgICAgICAgICAgICAgcGFnaW5hdG9yID0gc2VsZi5zM19jbGllbnQuZ2V0X3BhZ2lu
YXRvcignbGlzdF9vYmplY3RzX3YyJykKICAgICAgICAgICAgICAgIHBhZ2VfaXRlcmF0b3IgPSBw
YWdpbmF0b3IucGFnaW5hdGUoCiAgICAgICAgICAgICAgICAgICAgQnVja2V0PWJ1Y2tldF9uYW1l
LAogICAgICAgICAgICAgICAgICAgIFByZWZpeD1wcmVmaXgsCiAgICAgICAgICAgICAgICAgICAg
RGVsaW1pdGVyPScvJywKICAgICAgICAgICAgICAgICAgICBQYWdpbmF0aW9uQ29uZmlnPXsnUGFn
ZVNpemUnOiBwYWdlX3NpemV9CiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgZm9y
IHBhZ2UgaW4gcGFnZV9pdGVyYXRvcjoKICAgICAgICAgICAgICAgICAgICBmb2xkZXJzID0gW10K
ICAgICAgICAgICAgICAgICAgICBmaWxlcyA9IFtdCiAgICAgICAgICAgICAgICAgICAgaWYgJ0Nv
bW1vblByZWZpeGVzJyBpbiBwYWdlOgogICAgICAgICAgICAgICAgICAgICAgICBmb3Igb2JqIGlu
IHBhZ2VbJ0NvbW1vblByZWZpeGVzJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2xk
ZXJzLmFwcGVuZCh7J0tleSc6IG9ialsnUHJlZml4J119KQogICAgICAgICAgICAgICAgICAgIGlm
ICdDb250ZW50cycgaW4gcGFnZToKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIG9iaiBpbiBw
YWdlWydDb250ZW50cyddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IG9ialsn
S2V5J10uZW5kc3dpdGgoJy8nKSBhbmQgb2JqWydLZXknXSAhPSBwcmVmaXg6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIyDQlNC70Y8g0YHQvtCy0LzQtdGB0YLQuNC80L7RgdGC0Lgg
0YHRgtCw0LLQuNC8IDEg0LLQtdGA0YHQuNGOCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgb2JqWyd2ZXJzaW9uX2NvdW50J10gPSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZmlsZXMuYXBwZW5kKG9iaikKICAgICAgICAgICAgICAgICAgICB5aWVsZCBmb2xkZXJzLCBm
aWxlcwoKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMg0KDQldCW0JjQnCDQoSDQ
n9Ce0JTQodCn0JXQotCe0Jwg0JLQldCg0KHQmNCZICjQvNC10LTQu9C10L3QvdC10LUsINCw0LPR
gNC10LPQsNGG0LjRjyDQtNCw0L3QvdGL0YUpCiAgICAgICAgICAgICAgICBwYWdpbmF0b3IgPSBz
ZWxmLnMzX2NsaWVudC5nZXRfcGFnaW5hdG9yKCdsaXN0X29iamVjdF92ZXJzaW9ucycpCiAgICAg
ICAgICAgICAgICBwYWdlX2l0ZXJhdG9yID0gcGFnaW5hdG9yLnBhZ2luYXRlKAogICAgICAgICAg
ICAgICAgICAgIEJ1Y2tldD1idWNrZXRfbmFtZSwKICAgICAgICAgICAgICAgICAgICBQcmVmaXg9
cHJlZml4LAogICAgICAgICAgICAgICAgICAgIERlbGltaXRlcj0nLycsCiAgICAgICAgICAgICAg
ICAgICAgUGFnaW5hdGlvbkNvbmZpZz17J1BhZ2VTaXplJzogcGFnZV9zaXplfQogICAgICAgICAg
ICAgICAgKQoKICAgICAgICAgICAgICAgIGZvciBwYWdlIGluIHBhZ2VfaXRlcmF0b3I6CiAgICAg
ICAgICAgICAgICAgICAgZm9sZGVycyA9IFtdCiAgICAgICAgICAgICAgICAgICAgIyDQodC70L7Q
stCw0YDRjCDQtNC70Y8g0LDQs9GA0LXQs9Cw0YbQuNC4INCy0LXRgNGB0LjQuSDQv9C+INC60LvR
jtGH0YMg0YTQsNC50LvQsAogICAgICAgICAgICAgICAgICAgICMgS2V5IC0+IHtPYmpEaWN0LCBj
b3VudH0KICAgICAgICAgICAgICAgICAgICBmaWxlc19tYXAgPSBPcmRlcmVkRGljdCgpCgogICAg
ICAgICAgICAgICAgICAgIGlmICdDb21tb25QcmVmaXhlcycgaW4gcGFnZToKICAgICAgICAgICAg
ICAgICAgICAgICAgZm9yIG9iaiBpbiBwYWdlWydDb21tb25QcmVmaXhlcyddOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZm9sZGVycy5hcHBlbmQoeydLZXknOiBvYmpbJ1ByZWZpeCddfSkK
CiAgICAgICAgICAgICAgICAgICAgIyDQntCx0YDQsNCx0LDRgtGL0LLQsNC10Lwg0LLQtdGA0YHQ
uNC4IChWZXJzaW9ucykKICAgICAgICAgICAgICAgICAgICBpZiAnVmVyc2lvbnMnIGluIHBhZ2U6
CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2IGluIHBhZ2VbJ1ZlcnNpb25zJ106CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSB2WydLZXknXQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgaWYga2V5ID09IHByZWZpeCBvciBrZXkuZW5kc3dpdGgoJy8nKToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGlmIGtleSBub3QgaW4gZmlsZXNfbWFwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICMg0KHQvtGF0YDQsNC90Y/QtdC8INC/0LXRgNCy0YPRjiDQstGB0YLRgNC10YfQtdC90L3R
g9GOINCy0LXRgNGB0LjRjiDQutCw0LogItC+0YHQvdC+0LLQvdGD0Y4iINC00LvRjyDQvtGC0L7Q
sdGA0LDQttC10L3QuNGPCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyAoUzMg0L7Q
sdGL0YfQvdC+INC+0YLQtNCw0LXRgiDQv9C+0YHQu9C10LTQvdGO0Y4g0LLQtdGA0YHQuNGOINC/
0LXRgNCy0L7QuSwg0LXRgdC70Lgg0L7QvdCwINC10YHRgtGMKQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGZpbGVzX21hcFtrZXldID0gdi5jb3B5KCkKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBmaWxlc19tYXBba2V5XVsndmVyc2lvbl9jb3VudCddID0gMAoKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGZpbGVzX21hcFtrZXldWyd2ZXJzaW9uX2NvdW50J10gKz0g
MQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICMg0JXRgdC70Lgg0YLQtdC60YPRidCw0Y8g
0LLQtdGA0YHQuNGPINC/0L7QvNC10YfQtdC90LAg0LrQsNC6IExhdGVzdCwg0L7QsdC90L7QstC7
0Y/QtdC8INC80LXRgtCw0LTQsNC90L3Ri9C1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
IyDRh9GC0L7QsdGLINC+0YLQvtCx0YDQsNC20LDRgtGMINCw0LrRgtGD0LDQu9GM0L3Ri9C5INGA
0LDQt9C80LXRgCDQuCDQtNCw0YLRgwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5n
ZXQoJ0lzTGF0ZXN0Jyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXNfbWFw
W2tleV0udXBkYXRlKHYpCgogICAgICAgICAgICAgICAgICAgICMg0J/RgNC10LLRgNCw0YnQsNC1
0Lwg0LrQsNGA0YLRgyDQvtCx0YDQsNGC0L3QviDQsiDRgdC/0LjRgdC+0Log0YTQsNC50LvQvtCy
CiAgICAgICAgICAgICAgICAgICAgZmlsZXMgPSBsaXN0KGZpbGVzX21hcC52YWx1ZXMoKSkKICAg
ICAgICAgICAgICAgICAgICB5aWVsZCBmb2xkZXJzLCBmaWxlcwoKICAgICAgICBleGNlcHQgKENs
aWVudEVycm9yLCBFeGNlcHRpb24pOgogICAgICAgICAgICB5aWVsZCBbXSwgW10KCiAgICBkZWYg
aW52YWxpZGF0ZV9jYWNoZShzZWxmLCBidWNrZXRfbmFtZT1Ob25lLCBwcmVmaXg9Tm9uZSk6CiAg
ICAgICAgIiIi0JjQvdCy0LDQu9C40LTQsNGG0LjRjyDQutC10YjQsCDQv9C+0YHQu9C1INC+0L/Q
tdGA0LDRhtC40Lkg0LjQt9C80LXQvdC10L3QuNGPIiIiCiAgICAgICAgaWYgYnVja2V0X25hbWUg
aXMgTm9uZToKICAgICAgICAgICAgc2VsZi5vYmplY3RfY2FjaGUuaW52YWxpZGF0ZSgpCiAgICAg
ICAgICAgIHNlbGYuYnVja2V0X2NhY2hlLmludmFsaWRhdGUoKQogICAgICAgICAgICBzZWxmLnZl
cnNpb25pbmdfc3RhdHVzX2NhY2hlLmNsZWFyKCkgICMg0J7Rh9C40YHRgtC40YLRjCDQutC10Ygg
0LLQtdGA0YHQuNC+0L3QuNGA0L7QstCw0L3QuNGPCiAgICAgICAgZWxzZToKICAgICAgICAgICAg
cGF0dGVybiA9IGYie2J1Y2tldF9uYW1lfToiCiAgICAgICAgICAgIGlmIHByZWZpeDoKICAgICAg
ICAgICAgICAgIHBhdHRlcm4gKz0gcHJlZml4CiAgICAgICAgICAgIHNlbGYub2JqZWN0X2NhY2hl
LmludmFsaWRhdGUocGF0dGVybikKICAgICAgICAgICAgIyDQn9GA0Lgg0LjQt9C80LXQvdC10L3Q
uNGP0YUg0LIg0LHQsNC60LXRgtC1IC0g0YHQsdGA0L7RgdC40YLRjCDQtdCz0L4g0YHRgtCw0YLR
g9GBINCy0LXRgNGB0LjQvtC90LjRgNC+0LLQsNC90LjRjwogICAgICAgICAgICBpZiBidWNrZXRf
bmFtZSBpbiBzZWxmLnZlcnNpb25pbmdfc3RhdHVzX2NhY2hlOgogICAgICAgICAgICAgICAgZGVs
IHNlbGYudmVyc2lvbmluZ19zdGF0dXNfY2FjaGVbYnVja2V0X25hbWVdCgogICAgZGVmIG9iamVj
dF9leGlzdHMoc2VsZiwgYnVja2V0X25hbWUsIGtleSk6CiAgICAgICAgIiIi0J/RgNC+0LLQtdGA
0LjRgtGMINGB0YPRidC10YHRgtCy0L7QstCw0L3QuNC1INC+0LHRitC10LrRgtCwINC4INCy0LXR
gNC90YPRgtGMINC10LPQviDQvNC10YLQsNC00LDQvdC90YvQtSIiIgogICAgICAgIGlmIHNlbGYu
czNfY2xpZW50IGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgdHJ5Ogog
ICAgICAgICAgICByZXNwb25zZSA9IHNlbGYuczNfY2xpZW50LmhlYWRfb2JqZWN0KEJ1Y2tldD1i
dWNrZXRfbmFtZSwgS2V5PWtleSkKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAg
ICdTaXplJzogcmVzcG9uc2VbJ0NvbnRlbnRMZW5ndGgnXSwKICAgICAgICAgICAgICAgICdMYXN0
TW9kaWZpZWQnOiByZXNwb25zZVsnTGFzdE1vZGlmaWVkJ10KICAgICAgICAgICAgfQogICAgICAg
IGV4Y2VwdDoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgbGlzdF9vYmplY3RfdmVy
c2lvbnMoc2VsZiwgYnVja2V0X25hbWUsIGtleSk6CiAgICAgICAgIiIi0J/QvtC70YPRh9C40YLR
jCDRgdC/0LjRgdC+0Log0LLQtdGA0YHQuNC5INC+0LHRitC10LrRgtCwIiIiCiAgICAgICAgaWYg
c2VsZi5zM19jbGllbnQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIFtdCgogICAgICAgIHZl
cnNpb25pbmdfc3RhdHVzID0gc2VsZi5nZXRfdmVyc2lvbmluZ19zdGF0dXNfY2FjaGVkKGJ1Y2tl
dF9uYW1lKQoKICAgICAgICAjINCV0YHQu9C4INCy0LXRgNGB0LjQvtC90LjRgNC+0LLQsNC90LjQ
tSDQvdC40LrQvtCz0LTQsCDQvdC1INCy0LrQu9GO0YfQsNC70L7RgdGMIC0g0L3QtSDQt9Cw0L/R
gNCw0YjQuNCy0LDQtdC8CiAgICAgICAgaWYgdmVyc2lvbmluZ19zdGF0dXMgaXMgTm9uZSBvciB2
ZXJzaW9uaW5nX3N0YXR1cyA9PSAnRGlzYWJsZWQnOgogICAgICAgICAgICByZXR1cm4gW10KCiAg
ICAgICAgdHJ5OgogICAgICAgICAgICByZXNwb25zZSA9IHNlbGYuczNfY2xpZW50Lmxpc3Rfb2Jq
ZWN0X3ZlcnNpb25zKEJ1Y2tldD1idWNrZXRfbmFtZSwgUHJlZml4PWtleSkKICAgICAgICAgICAg
dmVyc2lvbnMgPSBbXQogICAgICAgICAgICBpZiAnVmVyc2lvbnMnIGluIHJlc3BvbnNlOgogICAg
ICAgICAgICAgICAgZm9yIHYgaW4gcmVzcG9uc2VbJ1ZlcnNpb25zJ106CiAgICAgICAgICAgICAg
ICAgICAgaWYgdlsnS2V5J10gPT0ga2V5OgogICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9u
cy5hcHBlbmQodikKICAgICAgICAgICAgcmV0dXJuIHZlcnNpb25zCiAgICAgICAgZXhjZXB0IChD
bGllbnRFcnJvciwgRXhjZXB0aW9uKSBhcyBlOgogICAgICAgICAgICBzZWxmLmNvbm5lY3Rpb25f
ZXJyb3IgPSBmImxpc3QgdmVyc2lvbiBlcnJvcjoge3N0cihlKX0iCiAgICAgICAgICAgIHJldHVy
biBbXQoKICAgIGRlZiBkb3dubG9hZF9vYmplY3Qoc2VsZiwgYnVja2V0X25hbWUsIGtleSwgbG9j
YWxfcGF0aCwgdmVyc2lvbl9pZD1Ob25lLCBjYWxsYmFjaz1Ob25lKToKICAgICAgICAiIiIKICAg
ICAgICDQodC60LDRh9C40LLQsNC10YIg0L7QsdGK0LXQutGCINC40LcgUzMg0LIg0LvQvtC60LDQ
u9GM0L3Rg9GOINGE0LDQudC70L7QstGD0Y4g0YHQuNGB0YLQtdC80YMuCgogICAgICAgINCQ0YDQ
s9GD0LzQtdC90YLRizoKICAgICAgICAgICAgYnVja2V0X25hbWUgKHN0cik6INCY0LzRjyDQsdCw
0LrQtdGC0LAt0LjRgdGC0L7Rh9C90LjQutCwLgogICAgICAgICAgICBrZXkgKHN0cik6INCa0LvR
jtGHICjQv9GD0YLRjCkg0L7QsdGK0LXQutGC0LAg0LIgUzMuCiAgICAgICAgICAgIGxvY2FsX3Bh
dGggKHN0cik6INCf0L7Qu9C90YvQuSDQu9C+0LrQsNC70YzQvdGL0Lkg0L/Rg9GC0Ywg0L3QsNC3
0L3QsNGH0LXQvdC40Y8gKNCy0LrQu9GO0YfQsNGPINC40LzRjyDRhNCw0LnQu9CwKS4KICAgICAg
ICAgICAgdmVyc2lvbl9pZCAoc3RyLCBvcHRpb25hbCk6IElEINC60L7QvdC60YDQtdGC0L3QvtC5
INCy0LXRgNGB0LjQuCDQvtCx0YrQtdC60YLQsCDQtNC70Y8g0YHQutCw0YfQuNCy0LDQvdC40Y8u
INCV0YHQu9C4IE5vbmUg4oCUINGB0LrQsNGH0LjQstCw0LXRgtGB0Y8g0L/QvtGB0LvQtdC00L3R
j9GPICjRgtC10LrRg9GJ0LDRjykg0LLQtdGA0YHQuNGPLgogICAgICAgICAgICBjYWxsYmFjayAo
Y2FsbGFibGUsIG9wdGlvbmFsKTog0KTRg9C90LrRhtC40Y8g0L7QsdGA0LDRgtC90L7Qs9C+INCy
0YvQt9C+0LLQsCDQtNC70Y8g0L7RgtGB0LvQtdC20LjQstCw0L3QuNGPINC/0YDQvtCz0YDQtdGB
0YHQsCAo0L/RgNC40L3QuNC80LDQtdGCINC60L7Qu9C40YfQtdGB0YLQstC+INCx0LDQudGCKS4K
CiAgICAgICAg0JLQvtC30LLRgNCw0YnQsNC10YI6CiAgICAgICAgICAgIGJvb2w6IFRydWUg0LIg
0YHQu9GD0YfQsNC1INGD0YHQv9C10YjQvdC+0LPQviDRgdC60LDRh9C40LLQsNC90LjRjywg0LjQ
vdCw0YfQtSBGYWxzZS4KICAgICAgICAiIiIKICAgICAgICBpZiBzZWxmLnMzX2NsaWVudCBpcyBO
b25lOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICB0cnk6CiAgICAgICAgICAgIGV4
dHJhX2FyZ3MgPSB7fQogICAgICAgICAgICBpZiB2ZXJzaW9uX2lkOgogICAgICAgICAgICAgICAg
ZXh0cmFfYXJnc1snVmVyc2lvbklkJ10gPSB2ZXJzaW9uX2lkCiAgICAgICAgICAgIHNlbGYuczNf
Y2xpZW50LmRvd25sb2FkX2ZpbGUoYnVja2V0X25hbWUsIGtleSwgbG9jYWxfcGF0aCwgRXh0cmFB
cmdzPWV4dHJhX2FyZ3MsIENhbGxiYWNrPWNhbGxiYWNrKQogICAgICAgICAgICByZXR1cm4gVHJ1
ZQogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJyb3IsIEV4Y2VwdGlvbikgYXMgZToKICAgICAgICAg
ICAgc2VsZi5jb25uZWN0aW9uX2Vycm9yID0gZiJEb3dubG9hZCBlcnJvcjoge3N0cihlKX0iCiAg
ICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICMg0J7QkdCd0J7QktCb0JXQndCY0JUgUzMg0YLQ
vtC70YzQutC+INC/0YDQuCDQuNC30LzQtdC90LXQvdC40Y/RhQogICAgZGVmIG1hcmtfczNfZm9y
X3JlZnJlc2goc2VsZik6CiAgICAgICAgIiIi0J7RgtC80LXRgtC40YLRjCDRh9GC0L4gUzMg0L3R
g9C20L3QviDQvtCx0L3QvtCy0LjRgtGMIiIiCiAgICAgICAgc2VsZi5zM19uZWVkc19yZWZyZXNo
ID0gVHJ1ZQoKICAgIGRlZiB1cGxvYWRfZmlsZShzZWxmLCBsb2NhbF9wYXRoLCBidWNrZXRfbmFt
ZSwga2V5KToKICAgICAgICBpZiBzZWxmLnMzX2NsaWVudCBpcyBOb25lOgogICAgICAgICAgICBy
ZXR1cm4gRmFsc2UKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuczNfY2xpZW50LnVwbG9h
ZF9maWxlKGxvY2FsX3BhdGgsIGJ1Y2tldF9uYW1lLCBrZXkpCiAgICAgICAgICAgIHNlbGYuaW52
YWxpZGF0ZV9jYWNoZShidWNrZXRfbmFtZSkKICAgICAgICAgICAgc2VsZi5tYXJrX3MzX2Zvcl9y
ZWZyZXNoKCkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQgKENsaWVudEVy
cm9yLCBFeGNlcHRpb24pIGFzIGU6CiAgICAgICAgICAgIHNlbGYuY29ubmVjdGlvbl9lcnJvciA9
IGYiVXBsb2FkIGVycm9yOiB7c3RyKGUpfSIKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAg
ZGVmIGNvcHlfb2JqZWN0KHNlbGYsIHNvdXJjZV9idWNrZXQsIHNvdXJjZV9rZXksIGRlc3RfYnVj
a2V0LCBkZXN0X2tleSwgdmVyc2lvbl9pZD1Ob25lKToKICAgICAgICAiIiIKICAgICAgICDQktGL
0L/QvtC70L3Rj9C10YIg0LrQvtC/0LjRgNC+0LLQsNC90LjQtSDQvtCx0YrQtdC60YLQsCDQstC9
0YPRgtGA0LggUzMgKFNlcnZlci1zaWRlIGNvcHkpINCx0LXQtyDRgdC60LDRh9C40LLQsNC90LjR
jyDQvdCwINC70L7QutCw0LvRjNC90YPRjiDQvNCw0YjQuNC90YMuCgogICAgICAgINCQ0YDQs9GD
0LzQtdC90YLRizoKICAgICAgICAgICAgc291cmNlX2J1Y2tldCAoc3RyKTog0JjQvNGPINC40YHR
hdC+0LTQvdC+0LPQviDQsdCw0LrQtdGC0LAuCiAgICAgICAgICAgIHNvdXJjZV9rZXkgKHN0cik6
INCa0LvRjtGHINC40YHRhdC+0LTQvdC+0LPQviDQvtCx0YrQtdC60YLQsC4KICAgICAgICAgICAg
ZGVzdF9idWNrZXQgKHN0cik6INCY0LzRjyDRhtC10LvQtdCy0L7Qs9C+INCx0LDQutC10YLQsC4K
ICAgICAgICAgICAgZGVzdF9rZXkgKHN0cik6INCa0LvRjtGHINGG0LXQu9C10LLQvtCz0L4g0L7Q
sdGK0LXQutGC0LAuCiAgICAgICAgICAgIHZlcnNpb25faWQgKHN0ciwgb3B0aW9uYWwpOiBJRCDQ
utC+0L3QutGA0LXRgtC90L7QuSDQstC10YDRgdC40Lgg0LjRgdGF0L7QtNC90L7Qs9C+INC+0LHR
itC10LrRgtCwLiDQldGB0LvQuCDRg9C60LDQt9Cw0L0sINC60L7Qv9C40YDRg9C10YLRgdGPINC4
0LzQtdC90L3QviDRjdGC0LAg0LLQtdGA0YHQuNGPLgoKICAgICAgICDQktC+0LfQstGA0LDRidCw
0LXRgjoKICAgICAgICAgICAgYm9vbDogVHJ1ZSwg0LXRgdC70Lgg0L7Qv9C10YDQsNGG0LjRjyDQ
utC+0L/QuNGA0L7QstCw0L3QuNGPINC/0YDQvtGI0LvQsCDRg9GB0L/QtdGI0L3Qviwg0LjQvdCw
0YfQtSBGYWxzZS4KICAgICAgICAiIiIKICAgICAgICBpZiBzZWxmLnMzX2NsaWVudCBpcyBOb25l
OgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICB0cnk6CiAgICAgICAgICAgIGNvcHlf
c291cmNlID0geydCdWNrZXQnOiBzb3VyY2VfYnVja2V0LCAnS2V5Jzogc291cmNlX2tleX0KICAg
ICAgICAgICAgaWYgdmVyc2lvbl9pZDoKICAgICAgICAgICAgICAgIGNvcHlfc291cmNlWydWZXJz
aW9uSWQnXSA9IHZlcnNpb25faWQKICAgICAgICAgICAgc2VsZi5zM19jbGllbnQuY29weV9vYmpl
Y3QoQ29weVNvdXJjZT1jb3B5X3NvdXJjZSwgQnVja2V0PWRlc3RfYnVja2V0LCBLZXk9ZGVzdF9r
ZXkpCiAgICAgICAgICAgIHNlbGYuaW52YWxpZGF0ZV9jYWNoZShkZXN0X2J1Y2tldCkKICAgICAg
ICAgICAgc2VsZi5tYXJrX3MzX2Zvcl9yZWZyZXNoKCkKICAgICAgICAgICAgcmV0dXJuIFRydWUK
ICAgICAgICBleGNlcHQgKENsaWVudEVycm9yLCBFeGNlcHRpb24pIGFzIGU6CiAgICAgICAgICAg
IHNlbGYuY29ubmVjdGlvbl9lcnJvciA9IGYiQ29weSBlcnJvcjoge3N0cihlKX0iCiAgICAgICAg
ICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBkZWxldGVfb2JqZWN0KHNlbGYsIGJ1Y2tldF9uYW1l
LCBrZXksIHZlcnNpb25faWQ9Tm9uZSk6CiAgICAgICAgaWYgc2VsZi5zM19jbGllbnQgaXMgTm9u
ZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgdHJ5OgogICAgICAgICAgICBleHRy
YV9hcmdzID0ge30KICAgICAgICAgICAgaWYgdmVyc2lvbl9pZDoKICAgICAgICAgICAgICAgIGV4
dHJhX2FyZ3NbJ1ZlcnNpb25JZCddID0gdmVyc2lvbl9pZAogICAgICAgICAgICBzZWxmLnMzX2Ns
aWVudC5kZWxldGVfb2JqZWN0KEJ1Y2tldD1idWNrZXRfbmFtZSwgS2V5PWtleSwgKipleHRyYV9h
cmdzKQogICAgICAgICAgICBzZWxmLmludmFsaWRhdGVfY2FjaGUoYnVja2V0X25hbWUpCiAgICAg
ICAgICAgIHNlbGYubWFya19zM19mb3JfcmVmcmVzaCgpCiAgICAgICAgICAgIHJldHVybiBUcnVl
CiAgICAgICAgZXhjZXB0IChDbGllbnRFcnJvciwgRXhjZXB0aW9uKSBhcyBlOgogICAgICAgICAg
ICBzZWxmLmNvbm5lY3Rpb25fZXJyb3IgPSBmIkRlbGV0ZSBlcnJvcjoge3N0cihlKX0iCiAgICAg
ICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBkZWxldGVfb2xkX3ZlcnNpb25zKHNlbGYsIGJ1
Y2tldF9uYW1lLCBrZXkpOgogICAgICAgICIiItCj0LTQsNC70LjRgtGMINCy0YHQtSDQstC10YDR
gdC40Lgg0LrRgNC+0LzQtSDQv9C+0YHQu9C10LTQvdC10LkiIiIKICAgICAgICBpZiBzZWxmLnMz
X2NsaWVudCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gMAogICAgICAgIHRyeToKICAgICAg
ICAgICAgdmVyc2lvbnMgPSBzZWxmLmxpc3Rfb2JqZWN0X3ZlcnNpb25zKGJ1Y2tldF9uYW1lLCBr
ZXkpCiAgICAgICAgICAgIGlmIGxlbih2ZXJzaW9ucykgPD0gMToKICAgICAgICAgICAgICAgIHJl
dHVybiAwCgogICAgICAgICAgICB2ZXJzaW9ucy5zb3J0KGtleT1sYW1iZGEgeDogeC5nZXQoJ0xh
c3RNb2RpZmllZCcsIGRhdGV0aW1lLm1pbiksIHJldmVyc2U9VHJ1ZSkKCiAgICAgICAgICAgIGRl
bGV0ZWRfY291bnQgPSAwCiAgICAgICAgICAgIGZvciB2ZXJzaW9uIGluIHZlcnNpb25zWzE6XToK
ICAgICAgICAgICAgICAgIGlmIHNlbGYuZGVsZXRlX29iamVjdChidWNrZXRfbmFtZSwga2V5LCB2
ZXJzaW9uWydWZXJzaW9uSWQnXSk6CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZF9jb3VudCAr
PSAxCgogICAgICAgICAgICBzZWxmLm1hcmtfczNfZm9yX3JlZnJlc2goKQogICAgICAgICAgICBy
ZXR1cm4gZGVsZXRlZF9jb3VudAogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJyb3IsIEV4Y2VwdGlv
bikgYXMgZToKICAgICAgICAgICAgc2VsZi5jb25uZWN0aW9uX2Vycm9yID0gZiJEZWxldGUgb2xk
IHZlcnNpb24gZXJyb3I6IHtzdHIoZSl9IgogICAgICAgICAgICByZXR1cm4gMAoKICAgIGRlZiBl
bmFibGVfdmVyc2lvbmluZyhzZWxmLCBidWNrZXRfbmFtZSk6CiAgICAgICAgIiIi0JLQutC70Y7R
h9C40YLRjCDQstC10YDRgdC40L7QvdC40YDQvtCy0LDQvdC40LUg0LTQu9GPINCx0LDQutC10YLQ
sCIiIgogICAgICAgIGlmIHNlbGYuczNfY2xpZW50IGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVy
biBGYWxzZQogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5zM19jbGllbnQucHV0X2J1Y2tl
dF92ZXJzaW9uaW5nKAogICAgICAgICAgICAgICAgQnVja2V0PWJ1Y2tldF9uYW1lLAogICAgICAg
ICAgICAgICAgVmVyc2lvbmluZ0NvbmZpZ3VyYXRpb249eydTdGF0dXMnOiAnRW5hYmxlZCd9CiAg
ICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQgKENsaWVu
dEVycm9yLCBFeGNlcHRpb24pIGFzIGU6CiAgICAgICAgICAgIHNlbGYuY29ubmVjdGlvbl9lcnJv
ciA9IGYiRW5hYmxlIFZlcnNpb25pbmcgZXJyb3I6IHtzdHIoZSl9IgogICAgICAgICAgICByZXR1
cm4gRmFsc2UKCiAgICBkZWYgZGlzYWJsZV92ZXJzaW9uaW5nKHNlbGYsIGJ1Y2tldF9uYW1lKToK
ICAgICAgICAiIiLQntGC0LrQu9GO0YfQuNGC0Ywg0LLQtdGA0YHQuNC+0L3QuNGA0L7QstCw0L3Q
uNC1INC00LvRjyDQsdCw0LrQtdGC0LAgKNGD0YHRgtCw0L3QvtCy0LjRgtGMINCyIFN1c3BlbmRl
ZCkiIiIKICAgICAgICBpZiBzZWxmLnMzX2NsaWVudCBpcyBOb25lOgogICAgICAgICAgICByZXR1
cm4gRmFsc2UKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuczNfY2xpZW50LnB1dF9idWNr
ZXRfdmVyc2lvbmluZygKICAgICAgICAgICAgICAgIEJ1Y2tldD1idWNrZXRfbmFtZSwKICAgICAg
ICAgICAgICAgIFZlcnNpb25pbmdDb25maWd1cmF0aW9uPXsnU3RhdHVzJzogJ1N1c3BlbmRlZCd9
CiAgICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQgKENs
aWVudEVycm9yLCBFeGNlcHRpb24pIGFzIGU6CiAgICAgICAgICAgIHNlbGYuY29ubmVjdGlvbl9l
cnJvciA9IGYiRGlzYWJsZSBWZXNyc2lvbmluZyBlcnJvcjoge3N0cihlKX0iCiAgICAgICAgICAg
IHJldHVybiBGYWxzZQoKICAgIGRlZiBnZXRfdmVyc2lvbmluZ19zdGF0dXNfY2FjaGVkKHNlbGYs
IGJ1Y2tldF9uYW1lKToKICAgICAgICAiIiLQn9C+0LvRg9GH0LjRgtGMINGB0YLQsNGC0YPRgSDQ
stC10YDRgdC40L7QvdC40YDQvtCy0LDQvdC40Y8g0YEg0LrQtdGI0LjRgNC+0LLQsNC90LjQtdC8
IiIiCiAgICAgICAgaWYgYnVja2V0X25hbWUgbm90IGluIHNlbGYudmVyc2lvbmluZ19zdGF0dXNf
Y2FjaGU6CiAgICAgICAgICAgICMg0JfQsNC/0YDQsNGI0LjQstCw0LXQvCDRgtC+0LvRjNC60L4g
0L7QtNC40L0g0YDQsNC3CiAgICAgICAgICAgIHNlbGYudmVyc2lvbmluZ19zdGF0dXNfY2FjaGVb
YnVja2V0X25hbWVdID0gc2VsZi5nZXRfdmVyc2lvbmluZ19zdGF0dXMoYnVja2V0X25hbWUpCiAg
ICAgICAgcmV0dXJuIHNlbGYudmVyc2lvbmluZ19zdGF0dXNfY2FjaGVbYnVja2V0X25hbWVdCgog
ICAgZGVmIGdldF92ZXJzaW9uaW5nX3N0YXR1cyhzZWxmLCBidWNrZXRfbmFtZSk6CiAgICAgICAg
IiIi0J/QvtC70YPRh9C40YLRjCDRgdGC0LDRgtGD0YEg0LLQtdGA0YHQuNC+0L3QuNGA0L7QstCw
0L3QuNGPINCx0LDQutC10YLQsCIiIgogICAgICAgIGlmIHNlbGYuczNfY2xpZW50IGlzIE5vbmU6
CiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXNwb25z
ZSA9IHNlbGYuczNfY2xpZW50LmdldF9idWNrZXRfdmVyc2lvbmluZyhCdWNrZXQ9YnVja2V0X25h
bWUpCiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5nZXQoJ1N0YXR1cycsICdEaXNhYmxlZCcp
CiAgICAgICAgZXhjZXB0IChDbGllbnRFcnJvciwgRXhjZXB0aW9uKSBhcyBlOgogICAgICAgICAg
ICBzZWxmLmNvbm5lY3Rpb25fZXJyb3IgPSBmIkdldCBWZXIgU2F0dXMgZXJyb3I6IHtzdHIoZSl9
IgogICAgICAgICAgICByZXR1cm4gTm9uZQoKCmNsYXNzIEZpbGVTeXN0ZW1Ccm93c2VyOgogICAg
IiIi0JHRgNCw0YPQt9C10YAg0LvQvtC60LDQu9GM0L3QvtC5INGE0LDQudC70L7QstC+0Lkg0YHQ
uNGB0YLQtdC80YsiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5jdXJy
ZW50X3BhdGggPSBvcy5wYXRoLmV4cGFuZHVzZXIoJ34nKQoKICAgIGRlZiBsaXN0X2RpcmVjdG9y
eShzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGl0ZW1zID0gW10KICAgICAgICAgICAg
aWYgc2VsZi5jdXJyZW50X3BhdGggIT0gJy8nOgogICAgICAgICAgICAgICAgaXRlbXMuYXBwZW5k
KHsnbmFtZSc6ICcuLicsICdpc19kaXInOiBUcnVlLCAnc2l6ZSc6IDAsICdtdGltZSc6IE5vbmV9
KQoKICAgICAgICAgICAgZm9yIGl0ZW0gaW4gc29ydGVkKG9zLmxpc3RkaXIoc2VsZi5jdXJyZW50
X3BhdGgpKToKICAgICAgICAgICAgICAgIGZ1bGxfcGF0aCA9IG9zLnBhdGguam9pbihzZWxmLmN1
cnJlbnRfcGF0aCwgaXRlbSkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAg
ICBzdGF0ID0gb3Muc3RhdChmdWxsX3BhdGgpCiAgICAgICAgICAgICAgICAgICAgaXNfZGlyID0g
b3MucGF0aC5pc2RpcihmdWxsX3BhdGgpCiAgICAgICAgICAgICAgICAgICAgaXRlbXMuYXBwZW5k
KHsKICAgICAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiBpdGVtLAogICAgICAgICAgICAgICAg
ICAgICAgICAnaXNfZGlyJzogaXNfZGlyLAogICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6
IDAgaWYgaXNfZGlyIGVsc2Ugc3RhdC5zdF9zaXplLAogICAgICAgICAgICAgICAgICAgICAgICAn
bXRpbWUnOiBkYXRldGltZS5mcm9tdGltZXN0YW1wKHN0YXQuc3RfbXRpbWUpCiAgICAgICAgICAg
ICAgICAgICAgfSkKICAgICAgICAgICAgICAgIGV4Y2VwdCAoUGVybWlzc2lvbkVycm9yLCBPU0Vy
cm9yKToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgcmV0dXJuIGl0
ZW1zCiAgICAgICAgZXhjZXB0IChQZXJtaXNzaW9uRXJyb3IsIE9TRXJyb3IpOgogICAgICAgICAg
ICByZXR1cm4gW10KCiAgICBkZWYgbGlzdF9hbGxfZmlsZXMoc2VsZiwgcGF0aCk6CiAgICAgICAg
YWxsX2ZpbGVzID0gW10KICAgICAgICB0cnk6CiAgICAgICAgICAgIGZvciByb290LCBkaXJzLCBm
aWxlcyBpbiBvcy53YWxrKHBhdGgpOgogICAgICAgICAgICAgICAgZm9yIGZpbGUgaW4gZmlsZXM6
CiAgICAgICAgICAgICAgICAgICAgZnVsbF9wYXRoID0gb3MucGF0aC5qb2luKHJvb3QsIGZpbGUp
CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ID0g
b3Muc3RhdChmdWxsX3BhdGgpCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbF9wYXRoID0gb3Mu
cGF0aC5yZWxwYXRoKGZ1bGxfcGF0aCwgcGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgYWxs
X2ZpbGVzLmFwcGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGF0aCc6IGZ1bGxf
cGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZWxfcGF0aCc6IHJlbF9wYXRoLAog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiBzdGF0LnN0X3NpemUKICAgICAgICAg
ICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBleGNlcHQgKFBlcm1pc3Npb25F
cnJvciwgT1NFcnJvcik6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAg
ZXhjZXB0IChQZXJtaXNzaW9uRXJyb3IsIE9TRXJyb3IpOgogICAgICAgICAgICBwYXNzCiAgICAg
ICAgcmV0dXJuIGFsbF9maWxlcwoKICAgIGRlZiBmaWxlX2V4aXN0cyhzZWxmLCBmaWxlX3BhdGgp
OgogICAgICAgICIiItCf0YDQvtCy0LXRgNC40YLRjCDRgdGD0YnQtdGB0YLQstC+0LLQsNC90LjQ
tSDRhNCw0LnQu9CwINC4INCy0LXRgNC90YPRgtGMINC10LPQviDQvNC10YLQsNC00LDQvdC90YvQ
tSIiIgogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgb3MucGF0aC5leGlzdHMoZmlsZV9wYXRo
KToKICAgICAgICAgICAgICAgIHN0YXQgPSBvcy5zdGF0KGZpbGVfcGF0aCkKICAgICAgICAgICAg
ICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiBzdGF0LnN0X3NpemUsCiAg
ICAgICAgICAgICAgICAgICAgJ210aW1lJzogZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChzdGF0LnN0
X210aW1lKQogICAgICAgICAgICAgICAgfQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFz
cwogICAgICAgIHJldHVybiBOb25lCgogICAgZGVmIGNyZWF0ZV9kaXJlY3Rvcnkoc2VsZiwgZGly
X25hbWUpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZnVsbF9wYXRoID0gb3MucGF0aC5qb2lu
KHNlbGYuY3VycmVudF9wYXRoLCBkaXJfbmFtZSkKICAgICAgICAgICAgb3MubWFrZWRpcnMoZnVs
bF9wYXRoLCBleGlzdF9vaz1GYWxzZSkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBl
eGNlcHQgT1NFcnJvcjoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIGlzX2JpbmFyeV9m
aWxlKGZpbGVfcGF0aCk6CiAgICB0cnk6CiAgICAgICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3Ji
JykgYXMgZjoKICAgICAgICAgICAgY2h1bmsgPSBmLnJlYWQoMTAyNCkKICAgICAgICAgICAgaWYg
YidceDAwJyBpbiBjaHVuazoKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICAgICAg
ICBub25fcHJpbnRhYmxlID0gc3VtKDEgZm9yIGJ5dGUgaW4gY2h1bmsgaWYgYnl0ZSA8IDMyIGFu
ZCBieXRlIG5vdCBpbiAoOSwgMTAsIDEzKSkKICAgICAgICAgICAgaWYgbGVuKGNodW5rKSA+IDAg
YW5kIG5vbl9wcmludGFibGUgLyBsZW4oY2h1bmspID4gMC4zOgogICAgICAgICAgICAgICAgcmV0
dXJuIFRydWUKCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgZXhjZXB0OgogICAgICAgIHJl
dHVybiBUcnVlCgoKZGVmIGZvcm1hdF9zaXplKHNpemUpOgogICAgZm9yIHVuaXQgaW4gWydCJywg
J0tCJywgJ01CJywgJ0dCJywgJ1RCJ106CiAgICAgICAgaWYgc2l6ZSA8IDEwMjQuMDoKICAgICAg
ICAgICAgcmV0dXJuIGYne3NpemU6LjFmfSB7dW5pdH0nCiAgICAgICAgc2l6ZSAvPSAxMDI0LjAK
ICAgIHJldHVybiBmJ3tzaXplOi4xZn0gUEInCgoKY2xhc3MgU2Nyb2xsQmFyKHVyd2lkLldpZGdl
dERlY29yYXRpb24pOgogICAgIiIi0JLQtdGA0YLQuNC60LDQu9GM0L3Ri9C5IHNjcm9sbGJhciDQ
tNC70Y8gdXJ3aWQgTGlzdEJveCIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB3aWRnZXQpOgog
ICAgICAgICIiIgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIHdpZGdldDog0LHQsNC30L7QstGL
0Lkg0LLQuNC00LbQtdGCICjQvtCx0YvRh9C90L4gTGlzdEJveCkKICAgICAgICAiIiIKICAgICAg
ICAjIHNlbGYuX19zdXBlci5fX2luaXRfXyh3aWRnZXQpCiAgICAgICAgc3VwZXIoKS5fX2luaXRf
Xyh3aWRnZXQpCiAgICAgICAgc2VsZi5zY3JvbGxiYXJfd2lkdGggPSAxCgogICAgZGVmIHJlbmRl
cihzZWxmLCBzaXplLCBmb2N1cz1GYWxzZSk6CiAgICAgICAgbWF4Y29sLCBtYXhyb3cgPSBzaXpl
CgogICAgICAgICMg0JLRi9GH0LjRgdC70Y/QtdC8INGA0LDQt9C80LXRgCDQtNC70Y8g0L7RgdC9
0L7QstC90L7Qs9C+INCy0LjQtNC20LXRgtCwCiAgICAgICAgY29udGVudF93aWR0aCA9IG1heGNv
bCAtIHNlbGYuc2Nyb2xsYmFyX3dpZHRoCiAgICAgICAgaWYgY29udGVudF93aWR0aCA8IDE6CiAg
ICAgICAgICAgIGNvbnRlbnRfd2lkdGggPSAxCgogICAgICAgICMg0KDQtdC90LTQtdGA0LjQvCDQ
vtGB0L3QvtCy0L3QvtC5INCy0LjQtNC20LXRgiDRgSDQv9GA0LDQstC40LvRjNC90YvQvCDRgNCw
0LfQvNC10YDQvtC8CiAgICAgICAgY2FudmFzID0gc2VsZi5fb3JpZ2luYWxfd2lkZ2V0LnJlbmRl
cigoY29udGVudF93aWR0aCwgbWF4cm93KSwgZm9jdXMpCgogICAgICAgICMg0J/QvtC70YPRh9Cw
0LXQvCDQuNC90YTQvtGA0LzQsNGG0LjRjiDQviDQv9C+0LfQuNGG0LjQuCDRgdC60YDQvtC70LvQ
sAogICAgICAgIGlmIGhhc2F0dHIoc2VsZi5fb3JpZ2luYWxfd2lkZ2V0LCAnYm9keScpOgogICAg
ICAgICAgICAjINCU0LvRjyBMaXN0Qm94CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAg
IG1pZGRsZSwgdG9wLCBib3R0b20gPSBzZWxmLl9vcmlnaW5hbF93aWRnZXQuY2FsY3VsYXRlX3Zp
c2libGUoCiAgICAgICAgICAgICAgICAgICAgKGNvbnRlbnRfd2lkdGgsIG1heHJvdyksIGZvY3Vz
CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICMg
0JXRgdC70LggY2FsY3VsYXRlX3Zpc2libGUg0L3QtSDRgNCw0LHQvtGC0LDQtdGCLCDQstC+0LfQ
stGA0LDRidCw0LXQvCBjYW52YXMg0LHQtdC3IHNjcm9sbGJhcgogICAgICAgICAgICAgICAgcmV0
dXJuIGNhbnZhcwoKICAgICAgICAgICAgaWYgbWlkZGxlIGlzIE5vbmU6CiAgICAgICAgICAgICAg
ICByZXR1cm4gY2FudmFzCgogICAgICAgICAgICAjINCf0L7Qu9GD0YfQsNC10Lwg0L7QsdGJ0LXQ
tSDQutC+0LvQuNGH0LXRgdGC0LLQviDRjdC70LXQvNC10L3RgtC+0LIKICAgICAgICAgICAgdHJ5
OgogICAgICAgICAgICAgICAgdG90YWxfcm93cyA9IGxlbihzZWxmLl9vcmlnaW5hbF93aWRnZXQu
Ym9keSkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgdG90YWxfcm93cyA9IG1h
eHJvdwoKICAgICAgICAgICAgaWYgdG90YWxfcm93cyA9PSAwOgogICAgICAgICAgICAgICAgcmV0
dXJuIGNhbnZhcwoKICAgICAgICAgICAgIyDQktGL0YfQuNGB0LvRj9C10Lwg0L/QsNGA0LDQvNC1
0YLRgNGLIHNjcm9sbGJhcgogICAgICAgICAgICB2aXNpYmxlX3Jvd3MgPSBtYXhyb3cKICAgICAg
ICAgICAgaWYgdG90YWxfcm93cyA8PSB2aXNpYmxlX3Jvd3M6CiAgICAgICAgICAgICAgICB0aHVt
Yl9oZWlnaHQgPSBtYXhyb3cKICAgICAgICAgICAgICAgIHRodW1iX3RvcCA9IDAKICAgICAgICAg
ICAgZWxzZToKICAgICAgICAgICAgICAgIHRodW1iX2hlaWdodCA9IG1heCgxLCBpbnQodmlzaWJs
ZV9yb3dzICogdmlzaWJsZV9yb3dzIC8gdG90YWxfcm93cykpCiAgICAgICAgICAgICAgICB0cnk6
CiAgICAgICAgICAgICAgICAgICAgZm9jdXNfcG9zaXRpb24gPSBzZWxmLl9vcmlnaW5hbF93aWRn
ZXQuYm9keS5mb2N1cwogICAgICAgICAgICAgICAgICAgIGlmIGZvY3VzX3Bvc2l0aW9uIGlzIE5v
bmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzX3Bvc2l0aW9uID0gMAogICAgICAgICAg
ICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIGZvY3VzX3Bvc2l0aW9uID0gMAoKICAg
ICAgICAgICAgICAgIHNjcm9sbGFibGVfYXJlYSA9IG1heHJvdyAtIHRodW1iX2hlaWdodAogICAg
ICAgICAgICAgICAgaWYgdG90YWxfcm93cyA+IHZpc2libGVfcm93czoKICAgICAgICAgICAgICAg
ICAgICBzY3JvbGxfcmF0aW8gPSBmb2N1c19wb3NpdGlvbiAvICh0b3RhbF9yb3dzIC0gMSkgaWYg
dG90YWxfcm93cyA+IDEgZWxzZSAwCiAgICAgICAgICAgICAgICAgICAgdGh1bWJfdG9wID0gaW50
KHNjcm9sbF9yYXRpbyAqIHNjcm9sbGFibGVfYXJlYSkKICAgICAgICAgICAgICAgIGVsc2U6CiAg
ICAgICAgICAgICAgICAgICAgdGh1bWJfdG9wID0gMAoKICAgICAgICAgICAgIyDQodC+0LfQtNCw
0LXQvCBzY3JvbGxiYXIKICAgICAgICAgICAgc2Nyb2xsYmFyX2NhbnZhcyA9IHNlbGYuX2NyZWF0
ZV9zY3JvbGxiYXIobWF4cm93LCB0aHVtYl90b3AsIHRodW1iX2hlaWdodCkKCiAgICAgICAgICAg
ICMg0JjRgdC/0L7Qu9GM0LfRg9C10LwgQ2FudmFzSm9pbiDQvdC+INGD0LHQtdC20LTQsNC10LzR
gdGPINGH0YLQviDQvtCx0YnQsNGPINGI0LjRgNC40L3QsCA9IG1heGNvbAogICAgICAgICAgICBj
b21iaW5lZCA9IHVyd2lkLkNhbnZhc0pvaW4oWwogICAgICAgICAgICAgICAgKGNhbnZhcywgTm9u
ZSwgRmFsc2UsIGNvbnRlbnRfd2lkdGgpLAogICAgICAgICAgICAgICAgKHNjcm9sbGJhcl9jYW52
YXMsIE5vbmUsIEZhbHNlLCBzZWxmLnNjcm9sbGJhcl93aWR0aCkKICAgICAgICAgICAgXSkKCiAg
ICAgICAgICAgIHJldHVybiBjb21iaW5lZAoKICAgICAgICByZXR1cm4gY2FudmFzCgogICAgZGVm
IF9jcmVhdGVfc2Nyb2xsYmFyKHNlbGYsIGhlaWdodCwgdGh1bWJfdG9wLCB0aHVtYl9oZWlnaHQp
OgogICAgICAgICIiItCh0L7Qt9C00LDRgtGMIGNhbnZhcyDQtNC70Y8gc2Nyb2xsYmFyIiIiCiAg
ICAgICAgcGFydHMgPSBbXQoKICAgICAgICAjINCS0LXRgNGF0L3QuNC5INGC0YDQtdC6CiAgICAg
ICAgaWYgdGh1bWJfdG9wID4gMDoKICAgICAgICAgICAgdHJhY2tfdG9wID0gdXJ3aWQuU29saWRD
YW52YXMoJ+KUgicsIDEsIHRodW1iX3RvcCkKICAgICAgICAgICAgdHJhY2tfdG9wID0gdXJ3aWQu
Q29tcG9zaXRlQ2FudmFzKHRyYWNrX3RvcCkKICAgICAgICAgICAgdHJhY2tfdG9wLmZpbGxfYXR0
cignc2Nyb2xsYmFyX3RyYWNrJykKICAgICAgICAgICAgcGFydHMuYXBwZW5kKCh0cmFja190b3As
IE5vbmUsIEZhbHNlKSkKCiAgICAgICAgIyDQn9C+0LvQt9GD0L3QvtC6CiAgICAgICAgaWYgdGh1
bWJfaGVpZ2h0ID4gMDoKICAgICAgICAgICAgdGh1bWIgPSB1cndpZC5Tb2xpZENhbnZhcygn4paI
JywgMSwgdGh1bWJfaGVpZ2h0KQogICAgICAgICAgICB0aHVtYiA9IHVyd2lkLkNvbXBvc2l0ZUNh
bnZhcyh0aHVtYikKICAgICAgICAgICAgdGh1bWIuZmlsbF9hdHRyKCdzY3JvbGxiYXJfdGh1bWIn
KQogICAgICAgICAgICBwYXJ0cy5hcHBlbmQoKHRodW1iLCBOb25lLCBGYWxzZSkpCgogICAgICAg
ICMg0J3QuNC20L3QuNC5INGC0YDQtdC6CiAgICAgICAgdHJhY2tfYm90dG9tX2hlaWdodCA9IGhl
aWdodCAtIHRodW1iX3RvcCAtIHRodW1iX2hlaWdodAogICAgICAgIGlmIHRyYWNrX2JvdHRvbV9o
ZWlnaHQgPiAwOgogICAgICAgICAgICB0cmFja19ib3R0b20gPSB1cndpZC5Tb2xpZENhbnZhcygn
4pSCJywgMSwgdHJhY2tfYm90dG9tX2hlaWdodCkKICAgICAgICAgICAgdHJhY2tfYm90dG9tID0g
dXJ3aWQuQ29tcG9zaXRlQ2FudmFzKHRyYWNrX2JvdHRvbSkKICAgICAgICAgICAgdHJhY2tfYm90
dG9tLmZpbGxfYXR0cignc2Nyb2xsYmFyX3RyYWNrJykKICAgICAgICAgICAgcGFydHMuYXBwZW5k
KCh0cmFja19ib3R0b20sIE5vbmUsIEZhbHNlKSkKCiAgICAgICAgaWYgbm90IHBhcnRzOgogICAg
ICAgICAgICAjINCV0YHQu9C4INC90LXRgiDRh9Cw0YHRgtC10LksINGB0L7Qt9C00LDQtdC8INC/
0YPRgdGC0L7QuSBjYW52YXMKICAgICAgICAgICAgcmV0dXJuIHVyd2lkLlNvbGlkQ2FudmFzKCcg
JywgMSwgaGVpZ2h0KQoKICAgICAgICByZXR1cm4gdXJ3aWQuQ2FudmFzQ29tYmluZShwYXJ0cykK
CiAgICBkZWYgc2VsZWN0YWJsZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fb3JpZ2luYWxf
d2lkZ2V0LnNlbGVjdGFibGUoKQoKICAgIGRlZiBrZXlwcmVzcyhzZWxmLCBzaXplLCBrZXkpOgog
ICAgICAgIG1heGNvbCwgbWF4cm93ID0gc2l6ZQogICAgICAgIGNvbnRlbnRfd2lkdGggPSBtYXhj
b2wgLSBzZWxmLnNjcm9sbGJhcl93aWR0aAogICAgICAgIGlmIGNvbnRlbnRfd2lkdGggPCAxOgog
ICAgICAgICAgICBjb250ZW50X3dpZHRoID0gMQogICAgICAgIHJldHVybiBzZWxmLl9vcmlnaW5h
bF93aWRnZXQua2V5cHJlc3MoKGNvbnRlbnRfd2lkdGgsIG1heHJvdyksIGtleSkKCiAgICBkZWYg
bW91c2VfZXZlbnQoc2VsZiwgc2l6ZSwgZXZlbnQsIGJ1dHRvbiwgY29sLCByb3csIGZvY3VzKToK
ICAgICAgICBtYXhjb2wsIG1heHJvdyA9IHNpemUKICAgICAgICBjb250ZW50X3dpZHRoID0gbWF4
Y29sIC0gc2VsZi5zY3JvbGxiYXJfd2lkdGgKICAgICAgICBpZiBjb250ZW50X3dpZHRoIDwgMToK
ICAgICAgICAgICAgY29udGVudF93aWR0aCA9IDEKCiAgICAgICAgaWYgY29sIDwgY29udGVudF93
aWR0aDoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX29yaWdpbmFsX3dpZGdldC5tb3VzZV9ldmVu
dCgKICAgICAgICAgICAgICAgIChjb250ZW50X3dpZHRoLCBtYXhyb3cpLCBldmVudCwgYnV0dG9u
LCBjb2wsIHJvdywgZm9jdXMKICAgICAgICAgICAgKQogICAgICAgIHJldHVybiBGYWxzZQoKCmNs
YXNzIFNlbGVjdGFibGVUZXh0KHVyd2lkLlRleHQpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHRl
eHQsIGRhdGEsIHBhbmVsKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKHRleHQpCiAgICAgICAg
c2VsZi5kYXRhID0gZGF0YQogICAgICAgIHNlbGYucGFuZWwgPSBwYW5lbAogICAgICAgIHNlbGYu
c2VsZWN0ZWQgPSBGYWxzZQoKICAgIGRlZiBzZWxlY3RhYmxlKHNlbGYpOgogICAgICAgIHJldHVy
biBUcnVlCgogICAgZGVmIGtleXByZXNzKHNlbGYsIHNpemUsIGtleSk6CiAgICAgICAgaWYga2V5
ID09ICdlbnRlcic6CiAgICAgICAgICAgIHNlbGYucGFuZWwub25faXRlbV9hY3RpdmF0ZWQoc2Vs
Zi5kYXRhKQogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGVsaWYga2V5ID09ICdpbnNl
cnQnIGFuZCBzZWxmLmRhdGEuZ2V0KCdjYW5fc2VsZWN0Jyk6CiAgICAgICAgICAgIHNlbGYuc2Vs
ZWN0ZWQgPSBub3Qgc2VsZi5zZWxlY3RlZAogICAgICAgICAgICBzZWxmLnBhbmVsLnVwZGF0ZV9p
dGVtX2Rpc3BsYXkoc2VsZikKICAgICAgICAgICAgcmV0dXJuICdkb3duJwogICAgICAgIGVsaWYg
a2V5ID09ICcgJyBhbmQgc2VsZi5kYXRhLmdldCgnY2FuX3NlbGVjdCcpOgogICAgICAgICAgICBz
ZWxmLnNlbGVjdGVkID0gbm90IHNlbGYuc2VsZWN0ZWQKICAgICAgICAgICAgc2VsZi5wYW5lbC51
cGRhdGVfaXRlbV9kaXNwbGF5KHNlbGYpCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAg
cmV0dXJuIGtleQoKCmNsYXNzIEZpbGVWaWV3ZXJEaWFsb2codXJ3aWQuV2lkZ2V0V3JhcCk6CiAg
ICBkZWYgX19pbml0X18oc2VsZiwgdGl0bGUsIGNvbnRlbnQsIGNhbGxiYWNrKToKICAgICAgICBz
ZWxmLmNhbGxiYWNrID0gY2FsbGJhY2sKCiAgICAgICAgdGV4dF93aWRnZXQgPSB1cndpZC5UZXh0
KGNvbnRlbnQpCiAgICAgICAgbGlzdGJveCA9IHVyd2lkLkxpc3RCb3godXJ3aWQuU2ltcGxlRm9j
dXNMaXN0V2Fsa2VyKFt0ZXh0X3dpZGdldF0pKQoKICAgICAgICBjbG9zZV9idXR0b24gPSB1cndp
ZC5CdXR0b24oJ0Nsb3NlIChFU0MpJykKICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChjbG9z
ZV9idXR0b24sICdjbGljaycsIHNlbGYub25fY2xvc2UpCgogICAgICAgIHBpbGUgPSB1cndpZC5Q
aWxlKFsKICAgICAgICAgICAgKCd3ZWlnaHQnLCAxLCB1cndpZC5MaW5lQm94KGxpc3Rib3gsIHRp
dGxlKSksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAoY2xvc2VfYnV0dG9uLCBO
b25lLCBmb2N1c19tYXA9J3NlbGVjdGVkJykpCiAgICAgICAgXSkKCiAgICAgICAgc3VwZXIoKS5f
X2luaXRfXyh1cndpZC5BdHRyTWFwKHBpbGUsICdkaWFsb2cnKSkKCiAgICBkZWYgb25fY2xvc2Uo
c2VsZiwgYnV0dG9uKToKICAgICAgICBzZWxmLmNhbGxiYWNrKCkKCiAgICBkZWYga2V5cHJlc3Mo
c2VsZiwgc2l6ZSwga2V5KToKICAgICAgICBpZiBrZXkgPT0gJ2VzYyc6CiAgICAgICAgICAgIHNl
bGYuY2FsbGJhY2soKQogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIHJldHVybiBzdXBl
cigpLmtleXByZXNzKHNpemUsIGtleSkKCgpjbGFzcyBWZXJzaW9uU2VsZWN0RGlhbG9nKHVyd2lk
LldpZGdldFdyYXApOgogICAgIiIi0JTQuNCw0LvQvtCzINCy0YvQsdC+0YDQsCDQstC10YDRgdC4
0Lgg0YTQsNC50LvQsCDQtNC70Y8g0L/RgNC+0YHQvNC+0YLRgNCwINC40LvQuCDQtNC10LnRgdGC
0LLQuNC5IiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGZpbGVfZGF0YSwgdmVyc2lvbnMsIGNh
bGxiYWNrKToKICAgICAgICBzZWxmLmNhbGxiYWNrID0gY2FsbGJhY2sKICAgICAgICBzZWxmLnZl
cnNpb25zID0gdmVyc2lvbnMKICAgICAgICBzZWxmLmZpbGVfZGF0YSA9IGZpbGVfZGF0YQoKICAg
ICAgICAjINCT0YDRg9C/0L/QsCDRgNCw0LTQuNC+0LrQvdC+0L/QvtC6CiAgICAgICAgc2VsZi5y
YWRpb19ncm91cCA9IFtdCiAgICAgICAgdmVyc2lvbl9pdGVtcyA9IFtdCgogICAgICAgIGZvciBp
ZHgsIHYgaW4gZW51bWVyYXRlKHZlcnNpb25zKToKICAgICAgICAgICAgaXNfbGF0ZXN0ID0gdi5n
ZXQoJ0lzTGF0ZXN0JywgRmFsc2UpCiAgICAgICAgICAgIGxhdGVzdF9tYXJrID0gIltMQVRFU1Rd
ICIgaWYgaXNfbGF0ZXN0IGVsc2UgIiAgICAgICAgICIKCiAgICAgICAgICAgIHNpemUgPSBmb3Jt
YXRfc2l6ZSh2LmdldCgnU2l6ZScsIDApKQogICAgICAgICAgICBtdGltZSA9IHYuZ2V0KCdMYXN0
TW9kaWZpZWQnKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKSBpZiB2LmdldCgnTGFzdE1v
ZGlmaWVkJykgZWxzZSAnTi9BJwogICAgICAgICAgICB2ZXJzaW9uX2lkID0gdi5nZXQoJ1ZlcnNp
b25JZCcsICcnKVs6MTJdCgogICAgICAgICAgICAjIGxhYmVsID0gZiJ7bGF0ZXN0X21hcmt9e3Zl
cnNpb25faWR9ICB7c2l6ZTo+MTB9ICB7bXRpbWV9IgogICAgICAgICAgICAjINCY0YHQv9C+0LvR
jNC30YPQtdC8INC80L7QvdC+0YjQuNGA0LjQvdC90YvQuSDRiNGA0LjRhNGCINC00LvRjyDRgtCw
0LHQu9C40YbRiwogICAgICAgICAgICBsYWJlbCA9IGYie2xhdGVzdF9tYXJrfSB7dmVyc2lvbl9p
ZDo8MTJ9IHtzaXplOj4xMH0ge210aW1lfSIKCiAgICAgICAgICAgICMg0J/QtdGA0LLQsNGPINCy
0LXRgNGB0LjRjyDQstGL0LHRgNCw0L3QsCDQv9C+INGD0LzQvtC70YfQsNC90LjRjgogICAgICAg
ICAgICByYiA9IHVyd2lkLlJhZGlvQnV0dG9uKHNlbGYucmFkaW9fZ3JvdXAsIGxhYmVsLCBzdGF0
ZT0oaWR4ID09IDApKQogICAgICAgICAgICByYi52ZXJzaW9uX2RhdGEgPSB2ICAjINCh0L7RhdGA
0LDQvdGP0LXQvCDQtNCw0L3QvdGL0LUg0LLQtdGA0YHQuNC4INC/0YDRj9C80L4g0LIg0L7QsdGK
0LXQutGCINC60L3QvtC/0LrQuAoKICAgICAgICAgICAgIyDQntCx0L7RgNCw0YfQuNCy0LDQtdC8
INCyIEF0dHJNYXAg0LTQu9GPINC/0L7QtNGB0LLQtdGC0LrQuAogICAgICAgICAgICB2ZXJzaW9u
X2l0ZW1zLmFwcGVuZCh1cndpZC5BdHRyTWFwKHJiLCBOb25lLCBmb2N1c19tYXA9J3NlbGVjdGVk
JykpCgogICAgICAgICMg0KHQv9C40YHQvtC6INCy0LXRgNGB0LjQuSDQsiBMaXN0Qm94CiAgICAg
ICAgc2VsZi5saXN0Ym94ID0gdXJ3aWQuTGlzdEJveCh1cndpZC5TaW1wbGVGb2N1c0xpc3RXYWxr
ZXIodmVyc2lvbl9pdGVtcykpCgogICAgICAgICMg0JrQvdC+0L/QutC4INC00LXQudGB0YLQstC4
0LkKICAgICAgICB2aWV3X2J0biA9IHVyd2lkLkJ1dHRvbignWyBWaWV3IF0nKQogICAgICAgIGRl
bF9idG4gPSB1cndpZC5CdXR0b24oJ1sgRGVsZXRlIF0nKQogICAgICAgIGNvcHlfYnRuID0gdXJ3
aWQuQnV0dG9uKCdbIENvcHkgXScpCiAgICAgICAgbW92ZV9idG4gPSB1cndpZC5CdXR0b24oJ1sg
TW92ZSBdJykKICAgICAgICBjYW5jZWxfYnRuID0gdXJ3aWQuQnV0dG9uKCdbIENhbmNlbCBdJykK
ICAgICAgICBkb3duX3RleHQgPSB1cndpZC5UZXh0KCJVc2UgRjMgdG8gdmlldywgRjUgdG8gY29w
eSwgRjYgdG8gbW92ZSwgRjggdG8gZGVsZXRlIHNlbGVjdGVkIHZlcnNpb24iKQogICAgICAgIAog
ICAgICAgICMg0J7QsdGA0LDQsdC+0YLRh9C40Log0L3QsNC20LDRgtC40Y8g0L3QsCDQutC90L7Q
v9C60Lgg0LTQtdC50YHRgtCy0LjQuQogICAgICAgIGRlZiBvbl9hY3Rpb24oYWN0aW9uKToKICAg
ICAgICAgICAgIyDQmNGJ0LXQvCDQstGL0LHRgNCw0L3QvdGD0Y4g0YDQsNC00LjQvtC60L3QvtC/
0LrRgwogICAgICAgICAgICBmb3IgcmIgaW4gc2VsZi5yYWRpb19ncm91cDoKICAgICAgICAgICAg
ICAgIGlmIHJiLnN0YXRlOgogICAgICAgICAgICAgICAgICAgICMg0J3QsNGI0LvQuCDigJQg0LLR
i9C30YvQstCw0LXQvCDQuCDRgdGA0LDQt9GDINCy0YvRhdC+0LTQuNC8INC40Lcg0YTRg9C90LrR
htC40LgKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5jYWxsYmFjayhhY3Rpb24sIHJi
LnZlcnNpb25fZGF0YSkKCiAgICAgICAgICAgICMg0JXRgdC70Lgg0YbQuNC60Lsg0LfQsNC60L7Q
vdGH0LjQu9GB0Y8g0Lgg0L3QuNGH0LXQs9C+INC90LUg0L3QsNGI0LvQuCDigJQg0L7RgtC80LXQ
vdCwCiAgICAgICAgICAgIHNlbGYuY2FsbGJhY2soJ2NhbmNlbCcsIE5vbmUpCgogICAgICAgICMg
0J/RgNC40LLRj9C30YvQstCw0LXQvCDRgdC40LPQvdCw0LvRiwogICAgICAgIHVyd2lkLmNvbm5l
Y3Rfc2lnbmFsKHZpZXdfYnRuLCAnY2xpY2snLCBsYW1iZGEgYjogb25fYWN0aW9uKCd2aWV3Jykp
CiAgICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwoZGVsX2J0biwgJ2NsaWNrJywgbGFtYmRhIGI6
IG9uX2FjdGlvbignZGVsZXRlJykpCiAgICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwoY29weV9i
dG4sICdjbGljaycsIGxhbWJkYSBiOiBvbl9hY3Rpb24oJ2NvcHknKSkKICAgICAgICB1cndpZC5j
b25uZWN0X3NpZ25hbChtb3ZlX2J0biwgJ2NsaWNrJywgbGFtYmRhIGI6IG9uX2FjdGlvbignbW92
ZScpKQogICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFsKGNhbmNlbF9idG4sICdjbGljaycsIGxh
bWJkYSBiOiBzZWxmLmNhbGxiYWNrKCdjYW5jZWwnLCBOb25lKSkKCiAgICAgICAgIyDQmtC+0LzQ
v9C+0L3QvtCy0LrQsCDQutC90L7Qv9C+0LoKICAgICAgICBidXR0b25zX2NvbCA9IHVyd2lkLkNv
bHVtbnMoWwogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAg
ICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcCh2aWV3X2J0biwgJ2J1dHRvbicsIGZvY3VzX21h
cD0nYnV0dG9uX2ZvY3VzJykpLAogICAgICAgICAgICAoJ2ZpeGVkJywgMSwgdXJ3aWQuVGV4dCgn
JykpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKGNvcHlfYnRuLCAnYnV0dG9u
JywgZm9jdXNfbWFwPSdidXR0b25fZm9jdXMnKSksCiAgICAgICAgICAgICgnZml4ZWQnLCAxLCB1
cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAobW92ZV9i
dG4sICdidXR0b24nLCBmb2N1c19tYXA9J2J1dHRvbl9mb2N1cycpKSwKICAgICAgICAgICAgKCdm
aXhlZCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0
ck1hcChkZWxfYnRuLCAnYnV0dG9uJywgZm9jdXNfbWFwPSdidXR0b25fZm9jdXMnKSksCiAgICAg
ICAgICAgICgnZml4ZWQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICgncGFjaycs
IHVyd2lkLkF0dHJNYXAoY2FuY2VsX2J0biwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uX2Zv
Y3VzJykpLAogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAg
ICBdLCBkaXZpZGVjaGFycz0wKQoKICAgICAgICBwaWxlID0gdXJ3aWQuUGlsZShbCiAgICAgICAg
ICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgICAgICgnd2VpZ2h0JywgMSwg
c2VsZi5saXN0Ym94KSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAg
ICAgICAgICAgKCdwYWNrJywgYnV0dG9uc19jb2wpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndp
ZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAoJ3BhY2snLCBkb3duX3RleHQpLAogICAgICAgIF0p
CgogICAgICAgIGZpbGwgPSB1cndpZC5GaWxsZXIocGlsZSwgdmFsaWduPSd0b3AnLCBoZWlnaHQ9
KCdyZWxhdGl2ZScsIDEwMCkpCgogICAgICAgIHRpdGxlID0gZiJTZWxlY3QgdmVyc2lvbiBmb3Ig
J3tmaWxlX2RhdGFbJ25hbWUnXX0nIgogICAgICAgIGxpbmVib3ggPSB1cndpZC5MaW5lQm94KGZp
bGwsIHRpdGxlPXRpdGxlKQoKICAgICAgICBzdXBlcigpLl9faW5pdF9fKHVyd2lkLkF0dHJNYXAo
bGluZWJveCwgJ2RpYWxvZycpKQoKICAgIGRlZiBrZXlwcmVzcyhzZWxmLCBzaXplLCBrZXkpOgog
ICAgICAgIGlmIGtleSA9PSAnZXNjJzoKICAgICAgICAgICAgc2VsZi5jYWxsYmFjaygnY2FuY2Vs
JywgTm9uZSkKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICAjIEVudGVyINC/0L4g0YPQ
vNC+0LvRh9Cw0L3QuNGOINC00LXQu9Cw0LXRgiBWaWV3INC00LvRjyDQstGL0LHRgNCw0L3QvdC+
0Lkg0LLQtdGA0YHQuNC4CiAgICAgICAgZm9yIHJiIGluIHNlbGYucmFkaW9fZ3JvdXA6CiAgICAg
ICAgICAgIGlmIHJiLnN0YXRlOgogICAgICAgICAgICAgICAgaWYga2V5ID09ICdlbnRlcic6CiAg
ICAgICAgICAgICAgICAgICAgYnRuID0gZ2V0X2ZvY3VzX2J1dHRvbihzZWxmLl93KQogICAgICAg
ICAgICAgICAgICAgIGlmIGJ0biBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAg
aWYgaXNpbnN0YW5jZShidG4sIHVyd2lkLkJ1dHRvbikgYW5kIGJ0bi5nZXRfbGFiZWwoKSA9PSAn
WyBDYW5jZWwgXSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIEVudGVyINC90LAgQ2Fu
Y2VsIC0+INC+0YLQvNC10L3QsAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxs
YmFjaygnY2FuY2VsJywgTm9uZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBO
b25lCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYnRuLCB1cndpZC5CdXR0
b24pIGFuZCBidG4uZ2V0X2xhYmVsKCkgPT0gJ1sgRGVsZXRlIF0nOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2VsZi5jYWxsYmFjaygnZGVsZXRlJywgcmIudmVyc2lvbl9kYXRhKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICAgICAgICAgICAgICAg
ICAgaWYgaXNpbnN0YW5jZShidG4sIHVyd2lkLkJ1dHRvbikgYW5kIGJ0bi5nZXRfbGFiZWwoKSA9
PSAnWyBNb3ZlIF0nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxsYmFjaygn
bW92ZScsIHJiLnZlcnNpb25fZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVy
biBOb25lCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYnRuLCB1cndpZC5C
dXR0b24pIGFuZCBidG4uZ2V0X2xhYmVsKCkgPT0gJ1sgQ29weSBdJzoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHNlbGYuY2FsbGJhY2soJ2NvcHknLCByYi52ZXJzaW9uX2RhdGEpCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAgICAgICAgIHNl
bGYuY2FsbGJhY2soJ3ZpZXcnLCByYi52ZXJzaW9uX2RhdGEpCiAgICAgICAgICAgICAgICAgICAg
cmV0dXJuIE5vbmUKICAgICAgICAgICAgICAgIGlmIGtleSA9PSAnZjMnOgogICAgICAgICAgICAg
ICAgICAgIHNlbGYuY2FsbGJhY2soJ3ZpZXcnLCByYi52ZXJzaW9uX2RhdGEpCiAgICAgICAgICAg
ICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICAgICAgICAgIGlmIGtleSA9PSAnZjUnOgogICAg
ICAgICAgICAgICAgICAgIHNlbGYuY2FsbGJhY2soJ2NvcHknLCByYi52ZXJzaW9uX2RhdGEpCiAg
ICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICAgICAgICAgIGlmIGtleSA9PSAn
ZjYnOgogICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsbGJhY2soJ21vdmUnLCByYi52ZXJzaW9u
X2RhdGEpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICAgICAgICAgIGlm
IGtleSA9PSAnZjgnOgogICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsbGJhY2soJ2RlbGV0ZScs
IHJiLnZlcnNpb25fZGF0YSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAg
IHJldHVybiBzdXBlcigpLmtleXByZXNzKHNpemUsIGtleSkKCgpjbGFzcyBPdmVyd3JpdGVEaWFs
b2codXJ3aWQuV2lkZ2V0V3JhcCk6CiAgICAiIiLQlNC40LDQu9C+0LMg0L/QvtC00YLQstC10YDQ
ttC00LXQvdC40Y8g0L/QtdGA0LXQt9Cw0L/QuNGB0Lgg0YTQsNC50LvQsCIiIgoKICAgIGRlZiBf
X2luaXRfXyhzZWxmLCBmaWxlbmFtZSwgc291cmNlX2luZm8sIGRlc3RfaW5mbywgY2FsbGJhY2ss
IHNob3dfdmVyc2lvbl9vcHRpb25zPUZhbHNlKToKICAgICAgICBzZWxmLmNhbGxiYWNrID0gY2Fs
bGJhY2sKCiAgICAgICAgdGl0bGVfdGV4dCA9IHVyd2lkLlRleHQoJ0ZpbGUgYWxyZWFkeSBleGlz
dHMhJywgYWxpZ249J2NlbnRlcicpCiAgICAgICAgZmlsZV90ZXh0ID0gdXJ3aWQuVGV4dChmJ0Zp
bGU6IHtmaWxlbmFtZX0nKQoKICAgICAgICBzcmNfc2l6ZSA9IHNvdXJjZV9pbmZvLmdldCgic2l6
ZSIsIDApCiAgICAgICAgZHN0X3NpemUgPSBkZXN0X2luZm8uZ2V0KCJzaXplIiwgMCkKCiAgICAg
ICAgc3JjX210aW1lID0gc291cmNlX2luZm8uZ2V0KCJtdGltZSIpCiAgICAgICAgZHN0X210aW1l
ID0gZGVzdF9pbmZvLmdldCgibXRpbWUiKQoKICAgICAgICBzcmNfdGltZV9zdHIgPSBzcmNfbXRp
bWUuc3RyZnRpbWUoIiVZLSVtLSVkICVIOiVNOiVTIikgaWYgc3JjX210aW1lIGVsc2UgIk4vQSIK
ICAgICAgICBkc3RfdGltZV9zdHIgPSBkc3RfbXRpbWUuc3RyZnRpbWUoIiVZLSVtLSVkICVIOiVN
OiVTIikgaWYgZHN0X210aW1lIGVsc2UgIk4vQSIKCiAgICAgICAgc291cmNlX3RleHQgPSB1cndp
ZC5UZXh0KGYnU291cmNlOiB7Zm9ybWF0X3NpemUoc3JjX3NpemUpfSB8IHtzcmNfdGltZV9zdHJ9
JykKICAgICAgICBkZXN0X3RleHQgPSB1cndpZC5UZXh0KGYnVGFyZ2V0OiB7Zm9ybWF0X3NpemUo
ZHN0X3NpemUpfSB8IHtkc3RfdGltZV9zdHJ9JykKCiAgICAgICAgYnV0dG9uc19saXN0ID0gW10K
CiAgICAgICAgb3ZlcndyaXRlX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBPdmVyd3JpdGUgXScp
CiAgICAgICAgYWxsX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBBbGwgXScpCiAgICAgICAgdXJ3
aWQuY29ubmVjdF9zaWduYWwob3ZlcndyaXRlX2J1dHRvbiwgJ2NsaWNrJywgbGFtYmRhIGI6IHNl
bGYub25fY2hvaWNlKCdvdmVyd3JpdGUnKSkKICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChh
bGxfYnV0dG9uLCAnY2xpY2snLCBsYW1iZGEgYjogc2VsZi5vbl9jaG9pY2UoJ2FsbCcpKQogICAg
ICAgIGJ1dHRvbnNfbGlzdC5leHRlbmQoWwogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRy
TWFwKG92ZXJ3cml0ZV9idXR0b24sICdidXR0b24nLCBmb2N1c19tYXA9J2J1dHRvbl9mb2N1cycp
KSwKICAgICAgICAgICAgKCdmaXhlZCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICAgICAg
KCdwYWNrJywgdXJ3aWQuQXR0ck1hcChhbGxfYnV0dG9uLCAnYnV0dG9uJywgZm9jdXNfbWFwPSdi
dXR0b25fZm9jdXMnKSksCiAgICAgICAgICAgICgnZml4ZWQnLCAxLCB1cndpZC5UZXh0KCcnKSks
CiAgICAgICAgXSkKCiAgICAgICAgaWYgc2hvd192ZXJzaW9uX29wdGlvbnM6CiAgICAgICAgICAg
IHZlcnNpb25fYnV0dG9uID0gdXJ3aWQuQnV0dG9uKCdbIE5ldyBWZXJzaW9uIF0nKQogICAgICAg
ICAgICB2ZXJzaW9uX2FsbF9idXR0b24gPSB1cndpZC5CdXR0b24oJ1sgVmVyc2lvbiBBbGwgXScp
CiAgICAgICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFsKHZlcnNpb25fYnV0dG9uLCAnY2xpY2sn
LCBsYW1iZGEgYjogc2VsZi5vbl9jaG9pY2UoJ3ZlcnNpb24nKSkKICAgICAgICAgICAgdXJ3aWQu
Y29ubmVjdF9zaWduYWwodmVyc2lvbl9hbGxfYnV0dG9uLCAnY2xpY2snLCBsYW1iZGEgYjogc2Vs
Zi5vbl9jaG9pY2UoJ3ZlcnNpb25fYWxsJykpCiAgICAgICAgICAgIGJ1dHRvbnNfbGlzdC5leHRl
bmQoWwogICAgICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcCh2ZXJzaW9uX2J1dHRv
biwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uX2ZvY3VzJykpLAogICAgICAgICAgICAgICAg
KCdmaXhlZCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICAgICAgICAgICgncGFjaycsIHVy
d2lkLkF0dHJNYXAodmVyc2lvbl9hbGxfYnV0dG9uLCAnYnV0dG9uJywgZm9jdXNfbWFwPSdidXR0
b25fZm9jdXMnKSksCiAgICAgICAgICAgICAgICAoJ2ZpeGVkJywgMSwgdXJ3aWQuVGV4dCgnJykp
LAogICAgICAgICAgICBdKQoKICAgICAgICBza2lwX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBT
a2lwIF0nKQogICAgICAgIHNraXBfYWxsX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBTa2lwIEFs
bCBdJykKICAgICAgICBjYW5jZWxfYnV0dG9uID0gdXJ3aWQuQnV0dG9uKCdbIENhbmNlbCBdJykK
ICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChza2lwX2J1dHRvbiwgJ2NsaWNrJywgbGFtYmRh
IGI6IHNlbGYub25fY2hvaWNlKCdza2lwJykpCiAgICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwo
c2tpcF9hbGxfYnV0dG9uLCAnY2xpY2snLCBsYW1iZGEgYjogc2VsZi5vbl9jaG9pY2UoJ3NraXBf
YWxsJykpCiAgICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwoY2FuY2VsX2J1dHRvbiwgJ2NsaWNr
JywgbGFtYmRhIGI6IHNlbGYub25fY2hvaWNlKCdjYW5jZWwnKSkKICAgICAgICBidXR0b25zX2xp
c3QuZXh0ZW5kKFsKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcChza2lwX2J1dHRv
biwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uX2ZvY3VzJykpLAogICAgICAgICAgICAoJ2Zp
eGVkJywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRy
TWFwKHNraXBfYWxsX2J1dHRvbiwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uX2ZvY3VzJykp
LAogICAgICAgICAgICAoJ2ZpeGVkJywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgICAgICAo
J3BhY2snLCB1cndpZC5BdHRyTWFwKGNhbmNlbF9idXR0b24sICdidXR0b24nLCBmb2N1c19tYXA9
J2J1dHRvbl9mb2N1cycpKSwKICAgICAgICBdKQoKICAgICAgICBidXR0b25zX2xpc3QuaW5zZXJ0
KDAsICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4dCgnJykpKQogICAgICAgIGJ1dHRvbnNfbGlzdC5h
cHBlbmQoKCd3ZWlnaHQnLCAxLCB1cndpZC5UZXh0KCcnKSkpCgogICAgICAgIGJ1dHRvbnMgPSB1
cndpZC5Db2x1bW5zKGJ1dHRvbnNfbGlzdCwgZGl2aWRlY2hhcnM9MCkKCiAgICAgICAgcGlsZSA9
IHVyd2lkLlBpbGUoWwogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAg
ICAgICAgICAoJ3BhY2snLCB0aXRsZV90ZXh0KSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQu
RGl2aWRlcigpKSwKICAgICAgICAgICAgKCdwYWNrJywgZmlsZV90ZXh0KSwKICAgICAgICAgICAg
KCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAgICAgKCdwYWNrJywgc291cmNlX3Rl
eHQpLAogICAgICAgICAgICAoJ3BhY2snLCBkZXN0X3RleHQpLAogICAgICAgICAgICAoJ3BhY2sn
LCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAoJ3BhY2snLCBidXR0b25zKSwKICAgICAg
ICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICBdKQogICAgICAgIGZpbGwg
PSB1cndpZC5GaWxsZXIocGlsZSwgdmFsaWduPSd0b3AnKQogICAgICAgIGxpbmVib3ggPSB1cndp
ZC5MaW5lQm94KGZpbGwpCgogICAgICAgIHN1cGVyKCkuX19pbml0X18odXJ3aWQuQXR0ck1hcChs
aW5lYm94LCAnZGlhbG9nJykpCgogICAgZGVmIG9uX2Nob2ljZShzZWxmLCBjaG9pY2UpOgogICAg
ICAgIHNlbGYuY2FsbGJhY2soY2hvaWNlKQoKICAgIGRlZiBrZXlwcmVzcyhzZWxmLCBzaXplLCBr
ZXkpOgogICAgICAgIGlmIGtleSA9PSAnZXNjJzoKICAgICAgICAgICAgc2VsZi5jYWxsYmFjaygn
Y2FuY2VsJykKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICByZXR1cm4gc3VwZXIoKS5r
ZXlwcmVzcyhzaXplLCBrZXkpCgoKY2xhc3MgUHJvZ3Jlc3NEaWFsb2codXJ3aWQuV2lkZ2V0V3Jh
cCk6CiAgICAiIiLQlNC40LDQu9C+0LMg0L/RgNC+0LPRgNC10YHRgdCwINC+0L/QtdGA0LDRhtC4
0Lkg0LIg0YHRgtC40LvQtSBNQyIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0aXRsZSwgY2Fs
bGJhY2s9Tm9uZSk6CiAgICAgICAgc2VsZi5jYWxsYmFjayA9IGNhbGxiYWNrCiAgICAgICAgc2Vs
Zi50aXRsZV90ZXh0ID0gdXJ3aWQuVGV4dCh0aXRsZSwgYWxpZ249J2NlbnRlcicpCiAgICAgICAg
c2VsZi5wcm9ncmVzc190ZXh0ID0gdXJ3aWQuVGV4dCgnJywgYWxpZ249J2xlZnQnKQogICAgICAg
IHNlbGYuZmlsZV90ZXh0ID0gdXJ3aWQuVGV4dCgnJywgYWxpZ249J2xlZnQnKQogICAgICAgIHNl
bGYuc3RhdHNfdGV4dCA9IHVyd2lkLlRleHQoJycsIGFsaWduPSdsZWZ0JykKICAgICAgICBzZWxm
LmJ5dGVzX3RleHQgPSB1cndpZC5UZXh0KCcnLCBhbGlnbj0nbGVmdCcpCgogICAgICAgIHNlbGYu
dG90YWxfZmlsZXMgPSAwCiAgICAgICAgc2VsZi5wcm9jZXNzZWRfZmlsZXMgPSAwCiAgICAgICAg
c2VsZi5zdWNjZXNzX2NvdW50ID0gMAogICAgICAgIHNlbGYuZmFpbF9jb3VudCA9IDAKICAgICAg
ICBzZWxmLmN1cnJlbnRfZmlsZSA9ICcnCiAgICAgICAgc2VsZi50b3RhbF9ieXRlcyA9IDAKICAg
ICAgICBzZWxmLnByb2Nlc3NlZF9ieXRlcyA9IDAKICAgICAgICBzZWxmLnN0YXJ0X3RpbWUgPSB0
aW1lLnRpbWUoKQoKICAgICAgICBza2lwX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBTa2lwIF0n
KQogICAgICAgIGNhbmNlbF9idXR0b24gPSB1cndpZC5CdXR0b24oJ1sgQ2FuY2VsIF0nKQoKICAg
ICAgICBzZWxmLmNhbmNlbGxlZCA9IEZhbHNlCgogICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFs
KHNraXBfYnV0dG9uLCAnY2xpY2snLCBsYW1iZGEgYjogTm9uZSkKICAgICAgICB1cndpZC5jb25u
ZWN0X3NpZ25hbChjYW5jZWxfYnV0dG9uLCAnY2xpY2snLCBzZWxmLm9uX2NhbmNlbCkKCiAgICAg
ICAgYnV0dG9ucyA9IHVyd2lkLkNvbHVtbnMoWwogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVy
d2lkLlRleHQoJycpKSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcChza2lwX2J1
dHRvbiwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uX2ZvY3VzJykpLAogICAgICAgICAgICAo
J2ZpeGVkJywgMiwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5B
dHRyTWFwKGNhbmNlbF9idXR0b24sICdidXR0b24nLCBmb2N1c19tYXA9J2J1dHRvbl9mb2N1cycp
KSwKICAgICAgICAgICAgKCd3ZWlnaHQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgXSwg
ZGl2aWRlY2hhcnM9MCkKCiAgICAgICAgcGlsZSA9IHVyd2lkLlBpbGUoWwogICAgICAgICAgICAo
J3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAoJ3BhY2snLCBzZWxmLnRpdGxl
X3RleHQpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAg
ICAoJ3BhY2snLCBzZWxmLnByb2dyZXNzX3RleHQpLAogICAgICAgICAgICAoJ3BhY2snLCBzZWxm
LmZpbGVfdGV4dCksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAg
ICAgICAgICgncGFjaycsIHNlbGYuc3RhdHNfdGV4dCksCiAgICAgICAgICAgICgncGFjaycsIHNl
bGYuYnl0ZXNfdGV4dCksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAg
ICAgICAgICAgICgncGFjaycsIGJ1dHRvbnMpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5E
aXZpZGVyKCkpLAogICAgICAgIF0pCgogICAgICAgIGZpbGwgPSB1cndpZC5GaWxsZXIocGlsZSwg
dmFsaWduPSd0b3AnKQogICAgICAgIGxpbmVib3ggPSB1cndpZC5MaW5lQm94KGZpbGwpCgogICAg
ICAgIHN1cGVyKCkuX19pbml0X18odXJ3aWQuQXR0ck1hcChsaW5lYm94LCAnZGlhbG9nJykpCgog
ICAgZGVmIG9uX2NhbmNlbChzZWxmLCBidXR0b24pOgogICAgICAgIHNlbGYuY2FuY2VsbGVkID0g
VHJ1ZQogICAgICAgIGlmIHNlbGYuY2FsbGJhY2s6CiAgICAgICAgICAgIHNlbGYuY2FsbGJhY2so
KQoKICAgIGRlZiBrZXlwcmVzcyhzZWxmLCBzaXplLCBrZXkpOgogICAgICAgIGlmIGtleSA9PSAn
ZXNjJzoKICAgICAgICAgICAgc2VsZi5vbl9jYW5jZWwoTm9uZSkKICAgICAgICAgICAgcmV0dXJu
IE5vbmUKICAgICAgICByZXR1cm4gc3VwZXIoKS5rZXlwcmVzcyhzaXplLCBrZXkpCgogICAgZGVm
IGdldF9zcGVlZF9zdHIoc2VsZik6CiAgICAgICAgIiIi0J/QvtC70YPRh9C40YLRjCDRgdGC0YDQ
vtC60YMg0YHQutC+0YDQvtGB0YLQuCDQv9C10YDQtdC00LDRh9C4IiIiCiAgICAgICAgZWxhcHNl
ZCA9IHRpbWUudGltZSgpIC0gc2VsZi5zdGFydF90aW1lCiAgICAgICAgaWYgZWxhcHNlZCA+IDA6
CiAgICAgICAgICAgIHNwZWVkID0gc2VsZi5wcm9jZXNzZWRfYnl0ZXMgLyBlbGFwc2VkCiAgICAg
ICAgICAgIHJldHVybiBmJ3tmb3JtYXRfc2l6ZShzcGVlZCl9L3MnCiAgICAgICAgcmV0dXJuICcw
IEIvcycKCiAgICBkZWYgdXBkYXRlKHNlbGYsIGN1cnJlbnRfZmlsZT0nJywgZmlsZV9zaXplPTAp
OgogICAgICAgIGlmIGN1cnJlbnRfZmlsZToKICAgICAgICAgICAgc2VsZi5jdXJyZW50X2ZpbGUg
PSBjdXJyZW50X2ZpbGUKICAgICAgICAgICAgc2VsZi5wcm9jZXNzZWRfZmlsZXMgKz0gMQogICAg
ICAgICAgICBzZWxmLnByb2Nlc3NlZF9ieXRlcyArPSBmaWxlX3NpemUKCiAgICAgICAgaWYgc2Vs
Zi50b3RhbF9maWxlcyA+IDA6CiAgICAgICAgICAgIHBlcmNlbnQgPSBpbnQoKHNlbGYucHJvY2Vz
c2VkX2ZpbGVzIC8gc2VsZi50b3RhbF9maWxlcykgKiAxMDApCiAgICAgICAgICAgIGJhcl93aWR0
aCA9IDQwCiAgICAgICAgICAgIGZpbGxlZCA9IGludCgoc2VsZi5wcm9jZXNzZWRfZmlsZXMgLyBz
ZWxmLnRvdGFsX2ZpbGVzKSAqIGJhcl93aWR0aCkKICAgICAgICAgICAgYmFyID0gJ+KWiCcgKiBm
aWxsZWQgKyAn4paRJyAqIChiYXJfd2lkdGggLSBmaWxsZWQpCiAgICAgICAgICAgIHNlbGYucHJv
Z3Jlc3NfdGV4dC5zZXRfdGV4dChmJ1t7YmFyfV0ge3BlcmNlbnR9JScpCgogICAgICAgIGlmIHNl
bGYuY3VycmVudF9maWxlOgogICAgICAgICAgICBkaXNwbGF5X2ZpbGUgPSBzZWxmLmN1cnJlbnRf
ZmlsZQogICAgICAgICAgICBpZiBsZW4oZGlzcGxheV9maWxlKSA+IDYwOgogICAgICAgICAgICAg
ICAgZGlzcGxheV9maWxlID0gJy4uLicgKyBkaXNwbGF5X2ZpbGVbLTU3Ol0KICAgICAgICAgICAg
c2VsZi5maWxlX3RleHQuc2V0X3RleHQoZidGaWxlOiB7ZGlzcGxheV9maWxlfScpCgogICAgICAg
IHNlbGYuc3RhdHNfdGV4dC5zZXRfdGV4dCgKICAgICAgICAgICAgZidUb3RhbDoge3NlbGYudG90
YWxfZmlsZXN9IHwgUHJvY2Vzc2VkOiB7c2VsZi5wcm9jZXNzZWRfZmlsZXN9IHwgJwogICAgICAg
ICAgICBmJ1N1Y2Nlc3M6IHtzZWxmLnN1Y2Nlc3NfY291bnR9IHwgRmFpbGVkOiB7c2VsZi5mYWls
X2NvdW50fScKICAgICAgICApCgogICAgICAgIGlmIHNlbGYudG90YWxfYnl0ZXMgPiAwOgogICAg
ICAgICAgICBieXRlc19wZXJjZW50ID0gaW50KChzZWxmLnByb2Nlc3NlZF9ieXRlcyAvIHNlbGYu
dG90YWxfYnl0ZXMpICogMTAwKSBpZiBzZWxmLnRvdGFsX2J5dGVzID4gMCBlbHNlIDAKICAgICAg
ICAgICAgc3BlZWRfc3RyID0gc2VsZi5nZXRfc3BlZWRfc3RyKCkKICAgICAgICAgICAgc2VsZi5i
eXRlc190ZXh0LnNldF90ZXh0KAogICAgICAgICAgICAgICAgZidCeXRlczoge2Zvcm1hdF9zaXpl
KHNlbGYucHJvY2Vzc2VkX2J5dGVzKX0gLyB7Zm9ybWF0X3NpemUoc2VsZi50b3RhbF9ieXRlcyl9
ICh7Ynl0ZXNfcGVyY2VudH0lKSB8IFNwZWVkOiB7c3BlZWRfc3RyfScKICAgICAgICAgICAgKQoK
ICAgIGRlZiBzZXRfdG90YWwoc2VsZiwgdG90YWxfZmlsZXMsIHRvdGFsX2J5dGVzPTApOgogICAg
ICAgIHNlbGYudG90YWxfZmlsZXMgPSB0b3RhbF9maWxlcwogICAgICAgIHNlbGYudG90YWxfYnl0
ZXMgPSB0b3RhbF9ieXRlcwogICAgICAgIHNlbGYuc3RhcnRfdGltZSA9IHRpbWUudGltZSgpCiAg
ICAgICAgc2VsZi51cGRhdGUoKQoKICAgIGRlZiBhZGRfc3VjY2VzcyhzZWxmKToKICAgICAgICBz
ZWxmLnN1Y2Nlc3NfY291bnQgKz0gMQogICAgICAgIHNlbGYudXBkYXRlKCkKCiAgICBkZWYgYWRk
X2ZhaWx1cmUoc2VsZik6CiAgICAgICAgc2VsZi5mYWlsX2NvdW50ICs9IDEKICAgICAgICBzZWxm
LnVwZGF0ZSgpCgoKY2xhc3MgU29ydERpYWxvZyh1cndpZC5XaWRnZXRXcmFwKToKICAgICIiItCU
0LjQsNC70L7QsyDQstGL0LHQvtGA0LAg0YDQtdC20LjQvNCwINGB0L7RgNGC0LjRgNC+0LLQutC4
IiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGN1cnJlbnRfbW9kZSwgY3VycmVudF9yZXZlcnNl
LCBjYWxsYmFjayk6CiAgICAgICAgc2VsZi5jYWxsYmFjayA9IGNhbGxiYWNrCiAgICAgICAgc2Vs
Zi5jdXJyZW50X21vZGUgPSBjdXJyZW50X21vZGUKICAgICAgICBzZWxmLmN1cnJlbnRfcmV2ZXJz
ZSA9IGN1cnJlbnRfcmV2ZXJzZQoKICAgICAgICAjINCj0LHQuNGA0LDQtdC8IHRpdGxlX3RleHQg
0LjQtyDQutC+0L3RgtC10L3RgtCwLCDQvtC9INCx0YPQtNC10YIg0LIg0YDQsNC80LrQtQogICAg
ICAgICMgdGl0bGVfdGV4dCA9IHVyd2lkLlRleHQoJ1NvcnQgYnk6JywgYWxpZ249J2NlbnRlcicp
CgogICAgICAgIHNlbGYucmFkaW9fZ3JvdXAgPSBbXQogICAgICAgIG1vZGVzID0gWwogICAgICAg
ICAgICAoJ25vbmUnLCAnVW5zb3J0ZWQnKSwKICAgICAgICAgICAgKCduYW1lJywgJ05hbWUnKSwK
ICAgICAgICAgICAgKCdleHQnLCAnRXh0ZW5zaW9uJyksCiAgICAgICAgICAgICgnc2l6ZScsICdT
aXplJyksCiAgICAgICAgICAgICgndGltZScsICdUaW1lJykKICAgICAgICBdCgogICAgICAgIHJh
ZGlvX2J1dHRvbnMgPSBbXQogICAgICAgIGZvciBtb2RlLCBsYWJlbCBpbiBtb2RlczoKICAgICAg
ICAgICAgaXNfc2VsZWN0ZWQgPSAobW9kZSA9PSBjdXJyZW50X21vZGUpCiAgICAgICAgICAgIHJi
ID0gdXJ3aWQuUmFkaW9CdXR0b24oc2VsZi5yYWRpb19ncm91cCwgbGFiZWwsIHN0YXRlPWlzX3Nl
bGVjdGVkKQogICAgICAgICAgICByYi5tb2RlID0gbW9kZQogICAgICAgICAgICByYWRpb19idXR0
b25zLmFwcGVuZCh1cndpZC5BdHRyTWFwKHJiLCBOb25lLCBmb2N1c19tYXA9J3NlbGVjdGVkJykp
CgogICAgICAgIHNlbGYucmV2ZXJzZV9jaGVja2JveCA9IHVyd2lkLkNoZWNrQm94KCJSZXZlcnNl
IG9yZGVyIiwgc3RhdGU9Y3VycmVudF9yZXZlcnNlKQoKICAgICAgICBva19idXR0b24gPSB1cndp
ZC5CdXR0b24oJ1sgT0sgXScpCiAgICAgICAgY2FuY2VsX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbign
WyBDYW5jZWwgXScpCgogICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFsKG9rX2J1dHRvbiwgJ2Ns
aWNrJywgc2VsZi5vbl9vaykKICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChjYW5jZWxfYnV0
dG9uLCAnY2xpY2snLCBzZWxmLm9uX2NhbmNlbCkKCiAgICAgICAgYnV0dG9ucyA9IHVyd2lkLkNv
bHVtbnMoWwogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAg
ICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcChva19idXR0b24sICdidXR0b24nLCBmb2N1c19t
YXA9J2J1dHRvbl9mb2N1cycpKSwKICAgICAgICAgICAgKCdmaXhlZCcsIDIsIHVyd2lkLlRleHQo
JycpKSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcChjYW5jZWxfYnV0dG9uLCAn
YnV0dG9uJywgZm9jdXNfbWFwPSdidXR0b25fZm9jdXMnKSksCiAgICAgICAgICAgICgnd2VpZ2h0
JywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgIF0sIGRpdmlkZWNoYXJzPTApCgogICAgICAg
IGNvbnRlbnQgPSBbCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAg
ICAgICAgICMgKCdwYWNrJywgdGl0bGVfdGV4dCksICMg0KPQtNCw0LvQtdC90L4KICAgICAgICAg
ICAgIyAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLCAjINCj0LTQsNC70LXQvdC+CiAgICAgICAg
XQoKICAgICAgICBjb250ZW50LmV4dGVuZChbKCdwYWNrJywgcmIpIGZvciByYiBpbiByYWRpb19i
dXR0b25zXSkKCiAgICAgICAgY29udGVudC5leHRlbmQoWwogICAgICAgICAgICAoJ3BhY2snLCB1
cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKHNlbGYu
cmV2ZXJzZV9jaGVja2JveCwgTm9uZSwgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKSwKICAgICAgICAg
ICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAgICAgKCdwYWNrJywgYnV0dG9u
cyksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgXSkKCiAg
ICAgICAgcGlsZSA9IHVyd2lkLlBpbGUoY29udGVudCkKICAgICAgICBmaWxsID0gdXJ3aWQuRmls
bGVyKHBpbGUsIHZhbGlnbj0ndG9wJykKCiAgICAgICAgIyBGSVg6INCX0LDQs9C+0LvQvtCy0L7Q
uiDQv9C10YDQtdC90LXRgdC10L0g0LIgdGl0bGUg0YDQsNC80LrQuAogICAgICAgIGxpbmVib3gg
PSB1cndpZC5MaW5lQm94KGZpbGwsIHRpdGxlPSJTb3J0IGJ5IikKCiAgICAgICAgc3VwZXIoKS5f
X2luaXRfXyh1cndpZC5BdHRyTWFwKGxpbmVib3gsICdkaWFsb2cnKSkKCiAgICBkZWYgb25fb2so
c2VsZiwgYnV0dG9uKToKICAgICAgICByZXZlcnNlID0gc2VsZi5yZXZlcnNlX2NoZWNrYm94Lmdl
dF9zdGF0ZSgpCiAgICAgICAgZm9yIHJiIGluIHNlbGYucmFkaW9fZ3JvdXA6CiAgICAgICAgICAg
IGlmIHJiLnN0YXRlOgogICAgICAgICAgICAgICAgc2VsZi5jYWxsYmFjayhUcnVlLCByYi5tb2Rl
LCByZXZlcnNlKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgc2VsZi5jYWxsYmFjayhG
YWxzZSwgTm9uZSwgRmFsc2UpCgogICAgZGVmIG9uX2NhbmNlbChzZWxmLCBidXR0b24pOgogICAg
ICAgIHNlbGYuY2FsbGJhY2soRmFsc2UsIE5vbmUsIEZhbHNlKQoKICAgIGRlZiBrZXlwcmVzcyhz
ZWxmLCBzaXplLCBrZXkpOgogICAgICAgIGlmIGtleSA9PSAnZW50ZXInOgogICAgICAgICAgICBz
ZWxmLm9uX29rKE5vbmUpCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgZWxpZiBrZXkg
PT0gJ2VzYyc6CiAgICAgICAgICAgIHNlbGYub25fY2FuY2VsKE5vbmUpCiAgICAgICAgICAgIHJl
dHVybiBOb25lCiAgICAgICAgcmV0dXJuIHN1cGVyKCkua2V5cHJlc3Moc2l6ZSwga2V5KQoKCmNs
YXNzIENvcHlNb3ZlRGlhbG9nKHVyd2lkLldpZGdldFdyYXApOgogICAgIiIi0JTQuNCw0LvQvtCz
INC60L7Qv9C40YDQvtCy0LDQvdC40Y8v0L/QtdGA0LXQvNC10YnQtdC90LjRjyDQsiDRgdGC0LjQ
u9C1IE1DIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHRpdGxlLCBzb3VyY2VfZGVzYywgZGVz
dF9wYXRoLCBjYWxsYmFjayk6CiAgICAgICAgc2VsZi5jYWxsYmFjayA9IGNhbGxiYWNrCgogICAg
ICAgICMgdGl0bGVfdGV4dCA9IHVyd2lkLlRleHQoKCdkaWFsb2dfdGl0bGUnLCB0aXRsZSksIGFs
aWduPSdjZW50ZXInKQogICAgICAgIHNvdXJjZV90ZXh0ID0gdXJ3aWQuVGV4dChzb3VyY2VfZGVz
YykKICAgICAgICB0b190ZXh0ID0gdXJ3aWQuVGV4dCgiVG86ICIpCiAgICAgICAgZnJvbV90ZXh0
ID0gdXJ3aWQuVGV4dCgiRnJvbTogIikKICAgICAgICBzZWxmLmRlc3RfZWRpdCA9IHVyd2lkLkVk
aXQoJycsIGRlc3RfcGF0aCkKCiAgICAgICAgb2tfYnV0dG9uID0gdXJ3aWQuQnV0dG9uKCdbIE9L
IF0nKQogICAgICAgIGNhbmNlbF9idXR0b24gPSB1cndpZC5CdXR0b24oJ1sgQ2FuY2VsIF0nKQoK
ICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChva19idXR0b24sICdjbGljaycsIHNlbGYub25f
b2spCiAgICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwoY2FuY2VsX2J1dHRvbiwgJ2NsaWNrJywg
c2VsZi5vbl9jYW5jZWwpCgogICAgICAgIGJ1dHRvbnMgPSB1cndpZC5Db2x1bW5zKFsKICAgICAg
ICAgICAgKCd3ZWlnaHQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICgncGFjaycs
IHVyd2lkLkF0dHJNYXAob2tfYnV0dG9uLCAnYnV0dG9uJywgZm9jdXNfbWFwPSdidXR0b25fZm9j
dXMnKSksCiAgICAgICAgICAgICgnZml4ZWQnLCAyLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAg
ICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAoY2FuY2VsX2J1dHRvbiwgJ2J1dHRvbicsIGZvY3Vz
X21hcD0nYnV0dG9uX2ZvY3VzJykpLAogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRl
eHQoJycpKSwKICAgICAgICBdLCBkaXZpZGVjaGFycz0wKQoKICAgICAgICBwaWxlID0gdXJ3aWQu
UGlsZShbCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgICAg
ICgncGFjaycsIGZyb21fdGV4dCksCiAgICAgICAgICAgICgncGFjaycsIHNvdXJjZV90ZXh0KSwK
ICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAgICAgKCdwYWNr
JywgdG9fdGV4dCksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAoc2VsZi5kZXN0
X2VkaXQsICdlZGl0JywgZm9jdXNfbWFwPSdlZGl0X2ZvY3VzJykpLAogICAgICAgICAgICAoJ3Bh
Y2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAoJ3BhY2snLCBidXR0b25zKSwKICAg
ICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICBdKQoKICAgICAgICBm
aWxsID0gdXJ3aWQuRmlsbGVyKHBpbGUsIHZhbGlnbj0ndG9wJykKICAgICAgICBsaW5lYm94ID0g
dXJ3aWQuTGluZUJveChmaWxsLCB0aXRsZT10aXRsZSkKCiAgICAgICAgc3VwZXIoKS5fX2luaXRf
Xyh1cndpZC5BdHRyTWFwKGxpbmVib3gsICdkaWFsb2cnKSkKCiAgICBkZWYga2V5cHJlc3Moc2Vs
Ziwgc2l6ZSwga2V5KToKICAgICAgICBpZiBrZXkgPT0gJ2VudGVyJzoKICAgICAgICAgICAgYnRu
ID0gZ2V0X2ZvY3VzX2J1dHRvbihzZWxmLl93KQogICAgICAgICAgICBpZiBidG4gaXMgbm90IE5v
bmU6CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGJ0biwgdXJ3aWQuQnV0dG9uKSBhbmQg
YnRuLmdldF9sYWJlbCgpID09ICdbIENhbmNlbCBdJzoKICAgICAgICAgICAgICAgICAgICAjIEVu
dGVyINC90LAgQ2FuY2VsIC0+INC+0YLQvNC10L3QsAogICAgICAgICAgICAgICAgICAgIHNlbGYu
b25fY2FuY2VsKE5vbmUpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICAg
ICAgIyDQktGB0LUg0L7RgdGC0LDQu9GM0L3Ri9C1INGB0LvRg9GH0LDQuDogRW50ZXIgLT4gT0sK
ICAgICAgICAgICAgc2VsZi5vbl9vayhOb25lKQogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAg
ICAgICBlbGlmIGtleSA9PSAnZXNjJzoKICAgICAgICAgICAgc2VsZi5vbl9jYW5jZWwoTm9uZSkK
ICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgcmV0dXJuIHN1cGVyKCkua2V5cHJlc3Mo
c2l6ZSwga2V5KQoKICAgIGRlZiBvbl9vayhzZWxmLCBidXR0b24pOgogICAgICAgIGRlc3QgPSBz
ZWxmLmRlc3RfZWRpdC5nZXRfZWRpdF90ZXh0KCkKICAgICAgICBzZWxmLmNhbGxiYWNrKFRydWUs
IGRlc3QpCgogICAgZGVmIG9uX2NhbmNlbChzZWxmLCBidXR0b24pOgogICAgICAgIHNlbGYuY2Fs
bGJhY2soRmFsc2UsIE5vbmUpCgoKY2xhc3MgUGFuZWxXaWRnZXQodXJ3aWQuV2lkZ2V0V3JhcCk6
CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHRpdGxlLCBwYW5lbF90eXBlPSdmcycsIHMzX2NvbmZp
Zz1Ob25lLCBhcHA9Tm9uZSk6CiAgICAgICAgc2VsZi50aXRsZSA9IHRpdGxlCiAgICAgICAgc2Vs
Zi5wYW5lbF90eXBlID0gcGFuZWxfdHlwZQogICAgICAgIHNlbGYucmVzdG9yZV9mb2N1c19pbmRl
eCA9IE5vbmUKICAgICAgICBzZWxmLnMzX2NvbmZpZyA9IHMzX2NvbmZpZwogICAgICAgIHNlbGYu
czNfbWFuYWdlciA9IE5vbmUKICAgICAgICBzZWxmLmZzX2Jyb3dzZXIgPSBGaWxlU3lzdGVtQnJv
d3NlcigpIGlmIHBhbmVsX3R5cGUgPT0gJ2ZzJyBlbHNlIE5vbmUKICAgICAgICBzZWxmLmFwcCA9
IGFwcAoKICAgICAgICBzZWxmLmZpbHRlcl9wYXR0ZXJuID0gIiIgICMg0KLQtdC60YHRgiDRgtC1
0LrRg9GJ0LXQs9C+INGE0LjQu9GM0YLRgNCwICjRgdGC0YDQvtC60LAsINC90LUgTm9uZSkKICAg
ICAgICBzZWxmLmZpbHRlcl9tb2RlID0gRmFsc2UgICMg0KTQu9Cw0LM6INC90LDRhdC+0LTQuNC8
0YHRjyDQu9C4INC80Ysg0LIg0YDQtdC20LjQvNC1INCy0LLQvtC00LAg0YTQuNC70YzRgtGA0LAK
CiAgICAgICAgIyDQktC40LTQttC10YIg0LLQstC+0LTQsCDRhNC40LvRjNGC0YDQsCAo0L/QvtGP
0LLQu9GP0LXRgtGB0Y8g0LLQvdC40LfRgykKICAgICAgICBzZWxmLmZpbHRlcl9lZGl0ID0gdXJ3
aWQuRWRpdChjYXB0aW9uPSIvIikKICAgICAgICAjINCe0LHQvtGA0LDRh9C40LLQsNC10Lwg0LIg
0YHRgtC40LvRjCAnc3RhdHVzJyAo0LjQu9C4INC70Y7QsdC+0Lkg0LTRgNGD0LPQvtC5INC60L7Q
vdGC0YDQsNGB0YLQvdGL0LkpCiAgICAgICAgc2VsZi5maWx0ZXJfd2lkZ2V0ID0gdXJ3aWQuQXR0
ck1hcChzZWxmLmZpbHRlcl9lZGl0LCAnc3RhdHVzJykKCiAgICAgICAgc2VsZi5jdXJyZW50X2Vu
ZHBvaW50ID0gTm9uZQogICAgICAgIHNlbGYuY3VycmVudF9idWNrZXQgPSBOb25lCiAgICAgICAg
c2VsZi5jdXJyZW50X3ByZWZpeCA9ICcnCiAgICAgICAgc2VsZi5tb2RlID0gcGFuZWxfdHlwZQoK
ICAgICAgICAjINCd0LDRgdGC0YDQvtC50LrQuCDRgdC+0YDRgtC40YDQvtCy0LrQuAogICAgICAg
IHNlbGYuc29ydF9tb2RlID0gJ25hbWUnIGlmIHBhbmVsX3R5cGUgPT0gJ2ZzJyBlbHNlICdub25l
JwogICAgICAgIHNlbGYuc29ydF9yZXZlcnNlID0gRmFsc2UKCiAgICAgICAgc2VsZi53YWxrZXIg
PSB1cndpZC5TaW1wbGVGb2N1c0xpc3RXYWxrZXIoW10pCgogICAgICAgICMg0J/QvtC00LTQtdGA
0LbQutCwINC70LXQvdC40LLQvtC5INC30LDQs9GA0YPQt9C60LgKICAgICAgICBzZWxmLmxvYWRp
bmdfaW5fcHJvZ3Jlc3MgPSBGYWxzZQogICAgICAgIHNlbGYubG9hZGluZ190aHJlYWQgPSBOb25l
CiAgICAgICAgc2VsZi5sYXp5X2dlbmVyYXRvciA9IE5vbmUKICAgICAgICBzZWxmLmxpc3Rib3gg
PSB1cndpZC5MaXN0Qm94KHNlbGYud2Fsa2VyKQoKICAgICAgICAjINCh0L7RhdGA0LDQvdGP0LXQ
vCDRgdGB0YvQu9C60YMg0L3QsCDQstC40LTQttC10YIg0YLQtdC60YHRgtCwLCDRh9GC0L7QsdGL
INC80LXQvdGP0YLRjCDQtdCz0L4g0L/QvtC30LbQtQogICAgICAgIHNlbGYuaGVhZGVyX3RleHQg
PSB1cndpZC5UZXh0KHRpdGxlLCBhbGlnbj0nY2VudGVyJykKICAgICAgICBoZWFkZXJfd2lkZ2V0
ID0gdXJ3aWQuQXR0ck1hcChzZWxmLmhlYWRlcl90ZXh0LCAnaGVhZGVyJykKCiAgICAgICAgIyDQ
n9GD0YLRjCAoRlM6IC9ob21lL3VzZXIg0LjQu9C4IFMzOiAvY2VwaC9idWNrZXQvKQogICAgICAg
IHNlbGYucGF0aF90ZXh0ID0gdXJ3aWQuVGV4dCgnJykKICAgICAgICBwYXRoX3dpZGdldCA9IHVy
d2lkLkF0dHJNYXAoc2VsZi5wYXRoX3RleHQsICdwYXRoJykKCiAgICAgICAgIyDQntCx0L7RgNCw
0YfQuNCy0LDQtdC8IGxpc3Rib3gg0LIgU2Nyb2xsQmFyCiAgICAgICAgc2VsZi5zY3JvbGxiYXIg
PSBTY3JvbGxCYXIoc2VsZi5saXN0Ym94KQoKICAgICAgICAjINCh0L7Qt9C00LDQtdC8IEZyYW1l
INC+0YLQtNC10LvRjNC90L4sINGH0YLQvtCx0Ysg0YHQvtGF0YDQsNC90LjRgtGMINGB0YHRi9C7
0LrRgyDQuCDQvNC10L3Rj9GC0YwgZm9vdGVyCiAgICAgICAgc2VsZi5mcmFtZSA9IHVyd2lkLkZy
YW1lKAogICAgICAgICAgICB1cndpZC5BdHRyTWFwKHNlbGYuc2Nyb2xsYmFyLCAnYm9keScpLAog
ICAgICAgICAgICBoZWFkZXI9cGF0aF93aWRnZXQsCiAgICAgICAgICAgIGZvb3Rlcj1Ob25lICAj
INCY0LfQvdCw0YfQsNC70YzQvdC+INGE0YPRgtC10YDQsCDQvdC10YIgKNGE0LjQu9GM0YLRgCDR
gdC60YDRi9GCKQogICAgICAgICkKCiAgICAgICAgc2VsZi5saW5lYm94ID0gdXJ3aWQuTGluZUJv
eChzZWxmLmZyYW1lKQoKICAgICAgICBzdXBlcigpLl9faW5pdF9fKHNlbGYubGluZWJveCkgICMg
0J7QsdC+0YDQsNGH0LjQstCw0LXQvCDQsiBMaW5lQm94ICjQtdGB0LvQuCDQvdGD0LbQvdC+KQoK
ICAgICAgICBzZWxmLnJlZnJlc2goKQoKICAgIGRlZiB0b2dnbGVfZmlsdGVyX21vZGUoc2VsZik6
CiAgICAgICAgIiIi0JLQutC70Y7Rh9C40YLRjC/QstGL0LrQu9GO0YfQuNGC0Ywg0YDQtdC20LjQ
vCDQstCy0L7QtNCwINGE0LjQu9GM0YLRgNCwIiIiCiAgICAgICAgaWYgc2VsZi5maWx0ZXJfbW9k
ZToKICAgICAgICAgICAgIyDQktCr0KXQntCUINC40Lcg0YDQtdC20LjQvNCwINCy0LLQvtC00LAK
ICAgICAgICAgICAgc2VsZi5maWx0ZXJfbW9kZSA9IEZhbHNlCiAgICAgICAgICAgICMg0J/QtdGA
0LXQstC+0LTQuNC8INGE0L7QutGD0YEg0L7QsdGA0LDRgtC90L4g0L3QsCDRgdC/0LjRgdC+0Log
0YTQsNC50LvQvtCyCiAgICAgICAgICAgIHNlbGYuZnJhbWUuZm9jdXNfcG9zaXRpb24gPSAnYm9k
eScKCiAgICAgICAgICAgICMg0JXRgdC70Lgg0YTQuNC70YzRgtGAINC/0YPRgdGC0L7QuSwg0YHQ
utGA0YvQstCw0LXQvCDRgdGC0YDQvtC60YMg0LLQstC+0LTQsAogICAgICAgICAgICBpZiBub3Qg
c2VsZi5maWx0ZXJfcGF0dGVybjoKICAgICAgICAgICAgICAgIHNlbGYuZnJhbWUuZm9vdGVyID0g
Tm9uZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMg0JLQpdCe0JQg0LIg0YDQtdC20LjQvCDQ
stCy0L7QtNCwCiAgICAgICAgICAgIHNlbGYuZmlsdGVyX21vZGUgPSBUcnVlCiAgICAgICAgICAg
ICMg0J/QvtC60LDQt9GL0LLQsNC10Lwg0YHRgtGA0L7QutGDINCy0LLQvtC00LAKICAgICAgICAg
ICAgc2VsZi5mcmFtZS5mb290ZXIgPSBzZWxmLmZpbHRlcl93aWRnZXQKICAgICAgICAgICAgIyDQ
n9C10YDQtdCy0L7QtNC40Lwg0YTQvtC60YPRgSDQvdCwINGB0YLRgNC+0LrRgyDQstCy0L7QtNCw
CiAgICAgICAgICAgIHNlbGYuZnJhbWUuZm9jdXNfcG9zaXRpb24gPSAnZm9vdGVyJwoKICAgIGRl
ZiBjbGVhcl9maWx0ZXIoc2VsZik6CiAgICAgICAgIiIi0J/QvtC70L3QvtGB0YLRjNGOINGB0LHR
gNC+0YHQuNGC0Ywg0YTQuNC70YzRgtGAIiIiCiAgICAgICAgc2VsZi5maWx0ZXJfcGF0dGVybiA9
ICIiCiAgICAgICAgc2VsZi5maWx0ZXJfZWRpdC5zZXRfZWRpdF90ZXh0KCIiKQogICAgICAgIHNl
bGYuZmlsdGVyX21vZGUgPSBGYWxzZQogICAgICAgIHNlbGYuZnJhbWUuZm9jdXNfcG9zaXRpb24g
PSAnYm9keScKICAgICAgICBzZWxmLmZyYW1lLmZvb3RlciA9IE5vbmUKICAgICAgICBzZWxmLnJl
ZnJlc2goKQoKICAgIGRlZiBzaG93X2ZpbHRlcl9kaWFsb2coc2VsZik6CiAgICAgICAgIiIi0JLR
i9C30YvQstCw0LXRgtGB0Y8g0L/QviDQvdCw0LbQsNGC0LjRjiDQutC70LDQstC40YjQuCAnLycg
IiIiCgogICAgICAgIGRlZiBjYWxsYmFjayh0ZXh0KToKICAgICAgICAgICAgc2VsZi5hcHAuY2xv
c2VfZGlhbG9nKCkKICAgICAgICAgICAgIyDQm9C+0LPQuNC60LAg0YHQsdGA0L7RgdCwINC/0L4g
Ii8vIiDQuNC70Lgg0L/QviDQv9GD0YHRgtC+0Lkg0YHRgtGA0L7QutC1CiAgICAgICAgICAgIGlm
IG5vdCB0ZXh0IG9yIHRleHQgPT0gIi8vIjoKICAgICAgICAgICAgICAgIHNlbGYuZmlsdGVyX3Bh
dHRlcm4gPSBOb25lCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmZpbHRl
cl9wYXR0ZXJuID0gdGV4dAoKICAgICAgICAgICAgIyDQn9C10YDQtdGA0LjRgdC+0LLRi9Cy0LDQ
tdC8INC/0LDQvdC10LvRjCDRgSDRg9GH0LXRgtC+0Lwg0L3QvtCy0L7Qs9C+INGE0LjQu9GM0YLR
gNCwCiAgICAgICAgICAgIHNlbGYucmVmcmVzaCgpCgogICAgICAgICMg0JXRgdC70Lgg0YTQuNC7
0YzRgtGAINGD0LbQtSDQtdGB0YLRjCwg0L/QvtC60LDQt9GL0LLQsNC10Lwg0LXQs9C+INCyINC/
0L7Qu9C1INCy0LLQvtC00LAKICAgICAgICBkZWZhdWx0X3RleHQgPSBzZWxmLmZpbHRlcl9wYXR0
ZXJuIGlmIHNlbGYuZmlsdGVyX3BhdHRlcm4gZWxzZSAiIgoKICAgICAgICBkaWFsb2cgPSBJbnB1
dERpYWxvZygKICAgICAgICAgICAgIkZpbHRlciIsCiAgICAgICAgICAgICJFbnRlciBwYXR0ZXJu
ICgvLyB0byByZXNldCk6IiwKICAgICAgICAgICAgbGFtYmRhIGNvbmZpcm1lZCwgdGV4dDogY2Fs
bGJhY2sodGV4dCkgaWYgY29uZmlybWVkIGVsc2Ugc2VsZi5hcHAuY2xvc2VfZGlhbG9nKCksCiAg
ICAgICAgICAgIGRlZmF1bHRfdGV4dD1kZWZhdWx0X3RleHQKICAgICAgICApCiAgICAgICAgc2Vs
Zi5hcHAuc2hvd19kaWFsb2coZGlhbG9nKQoKICAgIGRlZiBrZXlwcmVzcyhzZWxmLCBzaXplLCBr
ZXkpOgogICAgICAgIGlmIG5vdCBzZWxmLmZpbHRlcl9tb2RlOgogICAgICAgICAgICAjIC0tLSDQ
ntCR0KvQp9Cd0KvQmSDQoNCV0JbQmNCcICjQpNC+0LrRg9GBINC90LAg0YHQv9C40YHQutC1KSAt
LS0KICAgICAgICAgICAgaWYga2V5ID09ICcvJzoKICAgICAgICAgICAgICAgIHNlbGYudG9nZ2xl
X2ZpbHRlcl9tb2RlKCkKICAgICAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgICAgICAgICAj
INCe0L/RhtC40L7QvdCw0LvRjNC90L46INGB0LHRgNC+0YEg0YTQuNC70YzRgtGA0LAg0L/QviDQ
tNCy0L7QudC90L7QvNGDINC90LDQttCw0YLQuNGOIC8KICAgICAgICAgICAgIyAo0YDQtdCw0LvQ
uNC30YPQtdGC0YHRjyDQutCw0Lo6INC10YHQu9C4INGD0LbQtSDQtdGB0YLRjCDRhNC40LvRjNGC
0YAsINC90LDQttCw0YLQuNC1IC8g0LLRhdC+0LTQuNGCINCyINGA0LXQttC40Lwg0YDQtdC00LDQ
utGC0LjRgNC+0LLQsNC90LjRjywKICAgICAgICAgICAgIyAg0LAg0LXRgdC70Lgg0YLQsNC8INC9
0LDQttCw0YLRjCBCYWNrc3BhY2Ug0LTQviDQutC+0L3RhtCwIC0g0YHQsdGA0L7RgSkKCiAgICAg
ICAgICAgICNyZXR1cm4gc3VwZXIoKS5rZXlwcmVzcyhzaXplLCBrZXkpCiAgICAgICAgICAgIHJl
c3VsdCA9IHN1cGVyKCkua2V5cHJlc3Moc2l6ZSwga2V5KQoKICAgICAgICAgICAgIyDQldGB0LvQ
uCDQvdCw0LbQsNGC0LAg0LrQu9Cw0LLQuNGI0LAg0L3QsNCy0LjQs9Cw0YbQuNC4INC4INCy0LrQ
u9GO0YfQtdC9IFByZXZpZXcgTW9kZSwg0L7QsdC90L7QstC70Y/QtdC8CiAgICAgICAgICAgIGlm
IHNlbGYuYXBwLnByZXZpZXdfbW9kZSBhbmQga2V5IGluICgndXAnLCAnZG93bicsICdwYWdlIHVw
JywgJ3BhZ2UgZG93bicsICdob21lJywgJ2VuZCcpOgogICAgICAgICAgICAgICAgIyDQktGL0LfR
i9Cy0LDQtdC8INC+0LHQvdC+0LLQu9C10L3QuNC1INGBINC90LXQsdC+0LvRjNGI0L7QuSDQt9Cw
0LTQtdGA0LbQutC+0LkgKGRlYm91bmNlKSwg0YfRgtC+0LHRiyDQvdC1INCz0YDRg9C30LjRgtGM
INC/0YDQuCDQsdGL0YHRgtGA0L7QuSDQv9GA0L7QutGA0YPRgtC60LUKICAgICAgICAgICAgICAg
ICMg0J3QviDQtNC70Y8g0L/RgNC+0YHRgtC+0YLRiyDQvNC+0LbQvdC+INGB0YDQsNC30YMKICAg
ICAgICAgICAgICAgIHNlbGYuYXBwLnVwZGF0ZV9wcmV2aWV3KCkKCiAgICAgICAgICAgIHJldHVy
biByZXN1bHQKCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyAtLS0g0KDQldCW0JjQnCDQktCS
0J7QlNCQINCk0JjQm9Cs0KLQoNCQICjQpNC+0LrRg9GBINC90LAgZm9vdGVyKSAtLS0KCiAgICAg
ICAgICAgICMg0JLRi9GF0L7QtCDQuNC3INGA0LXQttC40LzQsCAo0YHQvtGF0YDQsNC90LXQvdC4
0LUg0YLQtdC60YPRidC10LPQviDRhNC40LvRjNGC0YDQsCkKICAgICAgICAgICAgaWYga2V5IGlu
ICgnZW50ZXInLCAnZXNjJyk6CiAgICAgICAgICAgICAgICBzZWxmLnRvZ2dsZV9maWx0ZXJfbW9k
ZSgpCiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICAgICAgIyDQktGL0YXQvtC0
INC/0L4g0L/QvtCy0YLQvtGA0L3QvtC80YMg0L3QsNC20LDRgtC40Y4gJy8nICjQutCw0Log0LIg
dmltINC/0L7QuNGB0LopCiAgICAgICAgICAgIGlmIGtleSA9PSAnLyc6CiAgICAgICAgICAgICAg
ICBzZWxmLnRvZ2dsZV9maWx0ZXJfbW9kZSgpCiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoK
ICAgICAgICAgICAgIyDQn9C10YDQtdC00LDQtdC8INC90LDQttCw0YLQuNC1INCyINC/0L7Qu9C1
INCy0LLQvtC00LAKICAgICAgICAgICAgIyDQndCw0Lwg0L3Rg9C20L3QviDRj9Cy0L3QviDQstGL
0LfQstCw0YLRjCBrZXlwcmVzcyDRgyBFZGl0LCDRgtCw0Log0LrQsNC6INC80YsgItC/0LXRgNC1
0YXQstCw0YLQuNC70LgiINGD0L/RgNCw0LLQu9C10L3QuNC1CiAgICAgICAgICAgICMg0KDQsNC3
0LzQtdGAINGE0YPRgtC10YDQsCAoMSDRgdGC0YDQvtC60LApCiAgICAgICAgICAgIHJlcyA9IHNl
bGYuZmlsdGVyX2VkaXQua2V5cHJlc3MoKHNpemVbMF0sKSwga2V5KQoKICAgICAgICAgICAgIyDQ
n9C+0YHQu9C1INC90LDQttCw0YLQuNGPINC/0YDQvtCy0LXRgNGP0LXQvCwg0LjQt9C80LXQvdC4
0LvRgdGPINC70Lgg0YLQtdC60YHRggogICAgICAgICAgICBuZXdfdGV4dCA9IHNlbGYuZmlsdGVy
X2VkaXQuZ2V0X2VkaXRfdGV4dCgpCiAgICAgICAgICAgIGlmIG5ld190ZXh0ICE9IHNlbGYuZmls
dGVyX3BhdHRlcm46CiAgICAgICAgICAgICAgICBzZWxmLmZpbHRlcl9wYXR0ZXJuID0gbmV3X3Rl
eHQKICAgICAgICAgICAgICAgICMg0JLRi9C30YvQstCw0LXQvCByZWZyZXNoINC00LvRjyDQvtCx
0L3QvtCy0LvQtdC90LjRjyDRgdC/0LjRgdC60LAg0YTQsNC50LvQvtCyINGBINC90L7QstGL0Lwg
0YTQuNC70YzRgtGA0L7QvAogICAgICAgICAgICAgICAgc2VsZi5yZWZyZXNoKCkKCiAgICAgICAg
ICAgIHJldHVybiByZXMKCiAgICBkZWYgZ2V0X2N1cnJlbnRfZm9jdXNfaW5mbyhzZWxmKToKICAg
ICAgICAiIiLQn9C+0LvRg9GH0LjRgtGMINC40L3RhNC+0YDQvNCw0YbQuNGOINC+INGC0LXQutGD
0YnQtdC8INGE0L7QutGD0YHQtSDQtNC70Y8g0L/QvtGB0LvQtdC00YPRjtGJ0LXQs9C+INCy0L7R
gdGB0YLQsNC90L7QstC70LXQvdC40Y8iIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGZvY3Vz
X3dpZGdldCwgZm9jdXNfcG9zID0gc2VsZi5saXN0Ym94LmdldF9mb2N1cygpCiAgICAgICAgICAg
IGlmIGZvY3VzX3dpZGdldDoKICAgICAgICAgICAgICAgIHcgPSBmb2N1c193aWRnZXQub3JpZ2lu
YWxfd2lkZ2V0IGlmIGlzaW5zdGFuY2UoZm9jdXNfd2lkZ2V0LCB1cndpZC5BdHRyTWFwKSBlbHNl
IGZvY3VzX3dpZGdldAogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh3LCBTZWxlY3RhYmxl
VGV4dCk6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAg
ICAgJ3Bvc2l0aW9uJzogZm9jdXNfcG9zLAogICAgICAgICAgICAgICAgICAgICAgICAnbmFtZSc6
IHcuZGF0YS5nZXQoJ25hbWUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ2tleSc6IHcuZGF0
YS5nZXQoJ2tleScpLAogICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6IHcuZGF0YS5nZXQo
J3R5cGUnKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICBleGNlcHQ6CiAgICAgICAgICAg
IHBhc3MKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiByZWZyZXNoKHNlbGYsIGZvY3VzX29u
PU5vbmUsIGZvY3VzX2luZm89Tm9uZSwgaXRlbV9kZWxldGVkPUZhbHNlKToKICAgICAgICAiIiIK
ICAgICAgICDQntCx0L3QvtCy0LjRgtGMINGB0L7QtNC10YDQttC40LzQvtC1INC/0LDQvdC10LvQ
uC4KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgZm9jdXNfb24gKHN0cik6INCY0LzRjyDRjdC7
0LXQvNC10L3RgtCwICjRhNCw0LnQu9CwL9C/0LDQv9C60Lgv0LHQsNC60LXRgtCwKSwg0L3QsCDQ
utC+0YLQvtGA0YvQuSDQvdGD0LbQvdC+INGD0YHRgtCw0L3QvtCy0LjRgtGMINGE0L7QutGD0YEu
CiAgICAgICAgICAgIGZvY3VzX2luZm8gKGRpY3QpOiDQodC70L7QstCw0YDRjCDRgSDQuNC90YTQ
vtGA0LzQsNGG0LjQtdC5INC+INC/0YDQtdC00YvQtNGD0YnQtdC8INGE0L7QutGD0YHQtSAo0LjQ
vdC00LXQutGBLCDQuNC80Y8sINC60LvRjtGHKS4KICAgICAgICAgICAgaXRlbV9kZWxldGVkIChi
b29sKTog0KTQu9Cw0LMsINGD0LrQsNC30YvQstCw0Y7RidC40LksINGH0YLQviDRgtC10LrRg9GJ
0LjQuSDRjdC70LXQvNC10L3RgiDQsdGL0Lsg0YPQtNCw0LvQtdC9ICjQvdGD0LbQvdC+INGB0L7R
hdGA0LDQvdC40YLRjCDQuNC90LTQtdC60YEpLgogICAgICAgICIiIgoKICAgICAgICAjIDEuINCb
0L7Qs9C40LrQsCDRgdC+0YXRgNCw0L3QtdC90LjRjyDQv9Cw0YDQsNC80LXRgtGA0L7QsiDRhNC+
0LrRg9GB0LAg0LTQu9GPINCQ0KHQmNCd0KXQoNCe0J3QndCe0Jkg0LfQsNCz0YDRg9C30LrQuCAo
UzMpCiAgICAgICAgIyDQldGB0LvQuCDQvNGLINCyINGA0LXQttC40LzQtSBTMyDQuCDQstGL0LHR
gNCw0L0g0Y3QvdC00L/QvtC40L3Rgiwg0LfQsNCz0YDRg9C30LrQsCAo0LHQsNC60LXRgtC+0LIg
0LjQu9C4INC+0LHRitC10LrRgtC+0LIpINCx0YPQtNC10YIg0LjQtNGC0Lgg0LIg0YTQvtC90LUu
CiAgICAgICAgIyDQn9C+0Y3RgtC+0LzRgyDQvNGLINC90LUg0LzQvtC20LXQvCDRg9GB0YLQsNC9
0L7QstC40YLRjCDRhNC+0LrRg9GBINGB0YDQsNC30YMg0LIg0LrQvtC90YbQtSDRhNGD0L3QutGG
0LjQuCwg0L3Rg9C20L3QviDRgdC+0YXRgNCw0L3QuNGC0Ywg0LXQs9C+INCyIHNlbGYuCiAgICAg
ICAgaXNfczNfYXN5bmMgPSAoc2VsZi5tb2RlID09ICdzMycgYW5kIHNlbGYuY3VycmVudF9lbmRw
b2ludCBpcyBub3QgTm9uZSkKCiAgICAgICAgaWYgaXNfczNfYXN5bmM6CiAgICAgICAgICAgIGlm
IGZvY3VzX29uOgogICAgICAgICAgICAgICAgIyDQodC+0YXRgNCw0L3Rj9C10Lwg0LjQvNGPINC0
0LvRjyDQstC+0YHRgdGC0LDQvdC+0LLQu9C10L3QuNGPINCyIF9maW5hbGl6ZV9sb2FkaW5nCiAg
ICAgICAgICAgICAgICBzZWxmLl9wZW5kaW5nX2ZvY3VzX25hbWUgPSBmb2N1c19vbgoKICAgICAg
ICAgICAgIyDQldGB0LvQuCDQv9C10YDQtdC00LDQvdCwINGB0LvQvtC20L3QsNGPINC40L3RhNC+
INC+INGE0L7QutGD0YHQtQogICAgICAgICAgICBpZiBmb2N1c19pbmZvOgogICAgICAgICAgICAg
ICAgIyDQldGB0LvQuCDRjdC70LXQvNC10L3RgiDRg9C00LDQu9C10L0sINC/0YvRgtCw0LXQvNGB
0Y8g0L7RgdGC0LDRgtGM0YHRjyDQvdCwINGC0L7QvCDQttC1INC40L3QtNC10LrRgdC1CiAgICAg
ICAgICAgICAgICAjINCV0YHQu9C4INC90LUg0YPQtNCw0LvQtdC9ICjQv9GA0L7RgdGC0L4gcmVm
cmVzaCksINGC0L7QttC1INGB0L7RhdGA0LDQvdGP0LXQvCDQuNC90LTQtdC60YEg0LrQsNC6INC3
0LDQv9Cw0YHQvdC+0Lkg0LLQsNGA0LjQsNC90YIKICAgICAgICAgICAgICAgIHNlbGYucmVzdG9y
ZV9mb2N1c19pbmRleCA9IGZvY3VzX2luZm8uZ2V0KCdwb3NpdGlvbicpCiAgICAgICAgICAgIGVs
aWYgaXRlbV9kZWxldGVkOgogICAgICAgICAgICAgICAgIyDQldGB0LvQuCDQv9GA0L7RgdGC0L4g
0YHQutCw0LfQsNC90L4g0YfRgtC+INGD0LTQsNC70LXQvSwg0L3QviBpbmZvINC90LXRgiAo0YDQ
tdC00LrQviksINGB0L7RhdGA0LDQvdGP0LXQvCDRgtC10LrRg9GJ0LjQuT8KICAgICAgICAgICAg
ICAgICMg0J7QsdGL0YfQvdC+IGluZm8g0L/QtdGA0LXQtNCw0LXRgtGB0Y8uINCV0YHQu9C4INC9
0LXRgiwg0L/QvtC70LDQs9Cw0LXQvNGB0Y8g0L3QsCDRgtC+INGH0YLQviDRg9C20LUg0LXRgdGC
0Ywg0LIgcmVzdG9yZV9mb2N1c19pbmRleAogICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAj
IDIuINCe0YfQuNGB0YLQutCwINGB0L/QuNGB0LrQsCDQv9C10YDQtdC0INC+0LHQvdC+0LLQu9C1
0L3QuNC10LwKICAgICAgICBzZWxmLndhbGtlci5jbGVhcigpCgogICAgICAgICMg0KHQsdGA0L7R
gSDRhNC40LvRjNGC0YDQsCDQv9GA0Lgg0YHQvNC10L3QtSDQutC+0L3RgtC10LrRgdGC0LA/ICjQ
ntC/0YbQuNC+0L3QsNC70YzQvdC+KQogICAgICAgICMgc2VsZi5maWx0ZXJfcGF0dGVybiA9ICIi
CiAgICAgICAgIyBzZWxmLmZpbHRlcl9lZGl0LnNldF9lZGl0X3RleHQoIiIpCgogICAgICAgICMg
My4g0JzQsNGA0YjRgNGD0YLQuNC30LDRhtC40Y8g0L7QsdC90L7QstC70LXQvdC40Y8g0L/QviDR
gNC10LbQuNC80LDQvAogICAgICAgIGlmIHNlbGYubW9kZSA9PSAncm9vdF9tZW51JzoKICAgICAg
ICAgICAgc2VsZi5fcmVmcmVzaF9yb290X21lbnUoKQogICAgICAgICAgICAjINCh0LjQvdGF0YDQ
vtC90L3QvtC1INCy0L7RgdGB0YLQsNC90L7QstC70LXQvdC40LUKICAgICAgICAgICAgaWYgZm9j
dXNfaW5mbzoKICAgICAgICAgICAgICAgIHNlbGYucmVzdG9yZV9mb2N1c19hZnRlcl9vcGVyYXRp
b24oZm9jdXNfaW5mbywgaXRlbV9kZWxldGVkKQogICAgICAgICAgICBlbGlmIGZvY3VzX29uOgog
ICAgICAgICAgICAgICAgc2VsZi5zZXRfZm9jdXNfb25faXRlbShmb2N1c19vbikKCiAgICAgICAg
ZWxpZiBzZWxmLm1vZGUgPT0gJ3MzJzoKICAgICAgICAgICAgaWYgc2VsZi5jdXJyZW50X2VuZHBv
aW50IGlzIE5vbmU6CiAgICAgICAgICAgICAgICAjINCh0L/QuNGB0L7QuiDRjdC90LTQv9C+0LjQ
vdGC0L7QsiAo0L7QsdGL0YfQvdC+INGB0LjQvdGF0YDQvtC90L3QviDQuNC3INC60L7QvdGE0LjQ
s9CwKQogICAgICAgICAgICAgICAgc2VsZi5fcmVmcmVzaF9lbmRwb2ludHMoKQoKICAgICAgICAg
ICAgICAgIGlmIGZvY3VzX2luZm86CiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXN0b3JlX2Zv
Y3VzX2FmdGVyX29wZXJhdGlvbihmb2N1c19pbmZvLCBpdGVtX2RlbGV0ZWQpCiAgICAgICAgICAg
ICAgICBlbGlmIGZvY3VzX29uOgogICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0X2ZvY3VzX29u
X2l0ZW0oZm9jdXNfb24pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjINCS0L3R
g9GC0YDQuCDRjdC90LTQv9C+0LjQvdGC0LA6INCh0L/QuNGB0L7QuiDQsdCw0LrQtdGC0L7QsiDQ
mNCb0Jgg0KHQv9C40YHQvtC6INC+0LHRitC10LrRgtC+0LIKICAgICAgICAgICAgICAgICMg0K3R
gtC+INCy0YvQv9C+0LvQvdGP0LXRgtGB0Y8g0JDQodCY0J3QpdCg0J7QndCd0J4g0YfQtdGA0LXQ
tyDQv9C+0YLQvtC6LgogICAgICAgICAgICAgICAgIyDQpNC+0LrRg9GBINCx0YPQtNC10YIg0LLQ
vtGB0YHRgtCw0L3QvtCy0LvQtdC9INCyIF9maW5hbGl6ZV9sb2FkaW5nINGBINC40YHQv9C+0LvR
jNC30L7QstCw0L3QuNC10LwKICAgICAgICAgICAgICAgICMgX3BlbmRpbmdfZm9jdXNfbmFtZSDQ
uNC70LggcmVzdG9yZV9mb2N1c19pbmRleAogICAgICAgICAgICAgICAgc2VsZi5fcmVmcmVzaF9z
MygpCiAgICAgICAgICAgICAgICBpZiBmb2N1c19pbmZvOgogICAgICAgICAgICAgICAgICAgIHNl
bGYucmVzdG9yZV9mb2N1c19hZnRlcl9vcGVyYXRpb24oZm9jdXNfaW5mbywgaXRlbV9kZWxldGVk
KQogICAgICAgICAgICAgICAgZWxpZiBmb2N1c19vbjoKICAgICAgICAgICAgICAgICAgICBzZWxm
LnNldF9mb2N1c19vbl9pdGVtKGZvY3VzX29uKQoKICAgICAgICBlbHNlOiAgIyBtb2RlID09ICdm
cycKICAgICAgICAgICAgc2VsZi5fcmVmcmVzaF9mcygpCiAgICAgICAgICAgICMg0KHQuNC90YXR
gNC+0L3QvdC+0LUg0LLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90LjQtQogICAgICAgICAgICBpZiBm
b2N1c19pbmZvOgogICAgICAgICAgICAgICAgc2VsZi5yZXN0b3JlX2ZvY3VzX2FmdGVyX29wZXJh
dGlvbihmb2N1c19pbmZvLCBpdGVtX2RlbGV0ZWQpCiAgICAgICAgICAgIGVsaWYgZm9jdXNfb246
CiAgICAgICAgICAgICAgICBzZWxmLnNldF9mb2N1c19vbl9pdGVtKGZvY3VzX29uKQoKICAgIGRl
ZiBzaG93X2l0ZW1faW5mbyhzZWxmKToKICAgICAgICAiIiLQn9C+0LrQsNC30LDRgtGMINC40L3R
hNC+0YDQvNCw0YbQuNGOINC+INGC0LXQutGD0YnQtdC8INGN0LvQtdC80LXQvdGC0LUgKEY0KSIi
IgogICAgICAgIGl0ZW0gPSBzZWxmLmdldF9mb2N1c2VkX2l0ZW0oKQogICAgICAgIGlmIG5vdCBp
dGVtOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaW5mbyA9IE9yZGVyZWREaWN0KCkKICAg
ICAgICB0aXRsZSA9ICJJbmZvIgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIHNlbGYubW9k
ZSA9PSAnZnMnOgogICAgICAgICAgICAgICAgcGF0aCA9IGl0ZW0uZ2V0KCdwYXRoJykgICMg0JXR
gdC70Lgg0LXRgdGC0Ywg0L/QvtC70L3Ri9C5INC/0YPRgtGMCiAgICAgICAgICAgICAgICBpZiBu
b3QgcGF0aDoKICAgICAgICAgICAgICAgICAgICAjINCf0YvRgtCw0LXQvNGB0Y8g0LLQvtGB0YHR
gtCw0L3QvtCy0LjRgtGMINC/0YPRgtGMCiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGl0ZW1b
J25hbWUnXQogICAgICAgICAgICAgICAgICAgIGlmIG5hbWUgPT0gJy4uJzoKICAgICAgICAgICAg
ICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IG9zLnBhdGguam9p
bihzZWxmLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCBuYW1lKQoKICAgICAgICAgICAgICAgIHRp
dGxlID0gZiJGaWxlIEluZm86IHtpdGVtWyduYW1lJ119IgogICAgICAgICAgICAgICAgaW5mbyA9
IHNlbGYuX2dldF9mc19pbmZvKHBhdGgpCgogICAgICAgICAgICBlbGlmIHNlbGYubW9kZSA9PSAn
czMnOgogICAgICAgICAgICAgICAgaXR5cGUgPSBpdGVtLmdldCgndHlwZScpCgogICAgICAgICAg
ICAgICAgaWYgaXR5cGUgPT0gJ2J1Y2tldCc6CiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSBm
IkJ1Y2tldCBJbmZvOiB7aXRlbVsnbmFtZSddfSIKICAgICAgICAgICAgICAgICAgICBpbmZvID0g
c2VsZi5fZ2V0X3MzX2J1Y2tldF9pbmZvKGl0ZW1bJ25hbWUnXSkKCiAgICAgICAgICAgICAgICBl
bGlmIGl0eXBlIGluIFsnczNfZmlsZScsICdzM19kaXInXToKICAgICAgICAgICAgICAgICAgICAj
INCU0LvRjyDRhNCw0LnQu9C+0LIg0Lgg0L/QsNC/0L7QugogICAgICAgICAgICAgICAgICAgIGtl
eSA9IGl0ZW1bJ2tleSddCiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGl0ZW1bJ25hbWUnXQog
ICAgICAgICAgICAgICAgICAgIHRpdGxlID0gZiJPYmplY3QgSW5mbzoge25hbWV9IgogICAgICAg
ICAgICAgICAgICAgIGluZm8gPSBzZWxmLl9nZXRfczNfb2JqZWN0X2luZm8oc2VsZi5jdXJyZW50
X2J1Y2tldCwga2V5LCBpdHlwZSkKCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAg
ICAgICAgICBzZWxmLmFwcC5zaG93X3Jlc3VsdChmIkVycm9yIGdldHRpbmcgaW5mbzoge2V9IikK
ICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIGluZm86CiAgICAgICAgICAgIGRpYWxvZyA9
IEZpbGVJbmZvRGlhbG9nKHRpdGxlLCBpbmZvLCBzZWxmLmFwcC5jbG9zZV9kaWFsb2cpCiAgICAg
ICAgICAgIHNlbGYuYXBwLnNob3dfZGlhbG9nKGRpYWxvZywgd2lkdGg9KCdyZWxhdGl2ZScsIDYw
KSwgaGVpZ2h0PSgncmVsYXRpdmUnLCA3MCkpCgogICAgZGVmIF9nZXRfZnNfaW5mbyhzZWxmLCBw
YXRoKToKICAgICAgICAiIiLQodCx0L7RgCDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQu9C+0LrQ
sNC70YzQvdC+0Lwg0YTQsNC50LvQtSIiIgogICAgICAgIGltcG9ydCBzdGF0CiAgICAgICAgaW1w
b3J0IHB3ZAogICAgICAgIGltcG9ydCBncnAKICAgICAgICBpbmZvID0gT3JkZXJlZERpY3QoKQoK
ICAgICAgICB0cnk6CiAgICAgICAgICAgIHN0ID0gb3Muc3RhdChwYXRoKQoKICAgICAgICAgICAg
aW5mb1snTmFtZSddID0gb3MucGF0aC5iYXNlbmFtZShwYXRoKQogICAgICAgICAgICBpbmZvWydQ
YXRoJ10gPSBwYXRoCiAgICAgICAgICAgIGluZm9bJ1NpemUnXSA9IGZvcm1hdF9zaXplKHN0LnN0
X3NpemUpICsgZiIgKHtzdC5zdF9zaXplfSBieXRlcykiCgogICAgICAgICAgICAjINCi0LjQvyDR
hNCw0LnQu9CwCiAgICAgICAgICAgIGlmIHN0YXQuU19JU0RJUihzdC5zdF9tb2RlKToKICAgICAg
ICAgICAgICAgIHR5cGVfc3RyID0gIkRpcmVjdG9yeSIKICAgICAgICAgICAgZWxpZiBzdGF0LlNf
SVNMTksoc3Quc3RfbW9kZSk6CiAgICAgICAgICAgICAgICB0eXBlX3N0ciA9ICJTeW1saW5rIgog
ICAgICAgICAgICBlbGlmIHN0YXQuU19JU1JFRyhzdC5zdF9tb2RlKToKICAgICAgICAgICAgICAg
IHR5cGVfc3RyID0gIlJlZ3VsYXIgRmlsZSIKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAg
ICAgIHR5cGVfc3RyID0gIk90aGVyIgogICAgICAgICAgICBpbmZvWydUeXBlJ10gPSB0eXBlX3N0
cgoKICAgICAgICAgICAgIyDQn9GA0LDQstCwINC00L7RgdGC0YPQv9CwCiAgICAgICAgICAgIGlu
Zm9bJ01vZGUnXSA9IHN0YXQuZmlsZW1vZGUoc3Quc3RfbW9kZSkKICAgICAgICAgICAgaW5mb1sn
T2N0YWwnXSA9IG9jdChzdC5zdF9tb2RlKVstMzpdCgogICAgICAgICAgICAjINCS0LvQsNC00LXQ
u9C10YYv0JPRgNGD0L/Qv9CwCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG93bmVy
ID0gcHdkLmdldHB3dWlkKHN0LnN0X3VpZCkucHdfbmFtZQogICAgICAgICAgICBleGNlcHQ6CiAg
ICAgICAgICAgICAgICBvd25lciA9IHN0cihzdC5zdF91aWQpCgogICAgICAgICAgICB0cnk6CiAg
ICAgICAgICAgICAgICBncm91cCA9IGdycC5nZXRncmdpZChzdC5zdF9naWQpLmdyX25hbWUKICAg
ICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgZ3JvdXAgPSBzdHIoc3Quc3RfZ2lkKQoK
ICAgICAgICAgICAgaW5mb1snT3duZXInXSA9IGYie293bmVyfSAoe3N0LnN0X3VpZH0pIgogICAg
ICAgICAgICBpbmZvWydHcm91cCddID0gZiJ7Z3JvdXB9ICh7c3Quc3RfZ2lkfSkiCgogICAgICAg
ICAgICAjINCS0YDQtdC80LXQvdC90YvQtSDQvNC10YLQutC4CiAgICAgICAgICAgIGluZm9bJ0Fj
Y2VzcyddID0gZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChzdC5zdF9hdGltZSkuc3RyZnRpbWUoJyVZ
LSVtLSVkICVIOiVNOiVTJykKICAgICAgICAgICAgaW5mb1snTW9kaWZ5J10gPSBkYXRldGltZS5m
cm9tdGltZXN0YW1wKHN0LnN0X210aW1lKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKQog
ICAgICAgICAgICBpbmZvWydDaGFuZ2UnXSA9IGRhdGV0aW1lLmZyb210aW1lc3RhbXAoc3Quc3Rf
Y3RpbWUpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpCgogICAgICAgICAgICAjINCi0LXR
hdC90LjRh9C10YHQutCw0Y8g0LjQvdGE0LAKICAgICAgICAgICAgaW5mb1snRGV2aWNlJ10gPSBz
dC5zdF9kZXYKICAgICAgICAgICAgaW5mb1snSW5vZGUnXSA9IHN0LnN0X2lubwogICAgICAgICAg
ICBpbmZvWydMaW5rcyddID0gc3Quc3RfbmxpbmsKCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBh
cyBlOgogICAgICAgICAgICBpbmZvWydFcnJvciddID0gc3RyKGUpCgogICAgICAgIHJldHVybiBp
bmZvCgogICAgZGVmIF9nZXRfczNfYnVja2V0X2luZm8oc2VsZiwgYnVja2V0X25hbWUpOgogICAg
ICAgICIiItCf0L7Qu9C90LDRjyDQuNC90YTQvtGA0LzQsNGG0LjRjyDQviDQsdCw0LrQtdGC0LUi
IiIKICAgICAgICBpbmZvID0gT3JkZXJlZERpY3QoKQogICAgICAgIGluZm9bJ05hbWUnXSA9IGJ1
Y2tldF9uYW1lCgogICAgICAgIGNsaWVudCA9IHNlbGYuczNfbWFuYWdlci5zM19jbGllbnQKCiAg
ICAgICAgdHJ5OgogICAgICAgICAgICAjIDEuIFJlZ2lvbgogICAgICAgICAgICB0cnk6CiAgICAg
ICAgICAgICAgICBsb2MgPSBjbGllbnQuZ2V0X2J1Y2tldF9sb2NhdGlvbihCdWNrZXQ9YnVja2V0
X25hbWUpCiAgICAgICAgICAgICAgICByZWdpb24gPSBsb2MuZ2V0KCdMb2NhdGlvbkNvbnN0cmFp
bnQnKQogICAgICAgICAgICAgICAgaW5mb1snUmVnaW9uJ10gPSByZWdpb24gaWYgcmVnaW9uIGVs
c2UgJ3VzLWVhc3QtMScKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgaW5mb1sn
UmVnaW9uJ10gPSAnVW5rbm93bicKCiAgICAgICAgICAgICMgMi4gVmVyc2lvbmluZwogICAgICAg
ICAgICB0cnk6CiAgICAgICAgICAgICAgICB2ZXIgPSBjbGllbnQuZ2V0X2J1Y2tldF92ZXJzaW9u
aW5nKEJ1Y2tldD1idWNrZXRfbmFtZSkKICAgICAgICAgICAgICAgIGluZm9bJ1ZlcnNpb25pbmcn
XSA9IHZlci5nZXQoJ1N0YXR1cycsICdEaXNhYmxlZCcpCiAgICAgICAgICAgICAgICBpZiAnTUZB
RGVsZXRlJyBpbiB2ZXI6CiAgICAgICAgICAgICAgICAgICAgaW5mb1snTUZBIERlbGV0ZSddID0g
dmVyWydNRkFEZWxldGUnXQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNz
CgogICAgICAgICAgICAjIDMuIEVuY3J5cHRpb24gKERlZmF1bHQpCiAgICAgICAgICAgIHRyeToK
ICAgICAgICAgICAgICAgIGVuYyA9IGNsaWVudC5nZXRfYnVja2V0X2VuY3J5cHRpb24oQnVja2V0
PWJ1Y2tldF9uYW1lKQogICAgICAgICAgICAgICAgcnVsZXMgPSBlbmMuZ2V0KCdTZXJ2ZXJTaWRl
RW5jcnlwdGlvbkNvbmZpZ3VyYXRpb24nLCB7fSkuZ2V0KCdSdWxlcycsIFtdKQogICAgICAgICAg
ICAgICAgaWYgcnVsZXM6CiAgICAgICAgICAgICAgICAgICAgYWxnbyA9IHJ1bGVzWzBdLmdldCgn
QXBwbHlTZXJ2ZXJTaWRlRW5jcnlwdGlvbkJ5RGVmYXVsdCcsIHt9KS5nZXQoJ1NTRUFsZ29yaXRo
bScsICdOb25lJykKICAgICAgICAgICAgICAgICAgICBpbmZvWydEZWZhdWx0IEVuYyddID0gYWxn
bwogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBpbmZvWydEZWZhdWx0IEVuYydd
ID0gJ05vbmUnCgogICAgICAgICAgICAjIDQuIExpZmVjeWNsZSBDb25maWd1cmF0aW9uCiAgICAg
ICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGxjID0gY2xpZW50LmdldF9idWNrZXRfbGlmZWN5
Y2xlX2NvbmZpZ3VyYXRpb24oQnVja2V0PWJ1Y2tldF9uYW1lKQogICAgICAgICAgICAgICAgcnVs
ZXMgPSBsYy5nZXQoJ1J1bGVzJywgW10pCiAgICAgICAgICAgICAgICBpbmZvWydMaWZlY3ljbGUn
XSA9IGYie2xlbihydWxlcyl9IHJ1bGUocykgY29uZmlndXJlZCIKICAgICAgICAgICAgZXhjZXB0
IENsaWVudEVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICAjINCn0LDRgdGC0L4g0LLQvtC30LLR
gNCw0YnQsNC10YIg0L7RiNC40LHQutGDLCDQtdGB0LvQuCDQv9GA0LDQstC40Lsg0L3QtdGCCiAg
ICAgICAgICAgICAgICBpZiAiTm9TdWNoTGlmZWN5Y2xlQ29uZmlndXJhdGlvbiIgaW4gc3RyKGUp
OgogICAgICAgICAgICAgICAgICAgIGluZm9bJ0xpZmVjeWNsZSddID0gIk5vbmUiCiAgICAgICAg
ICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGluZm9bJ0xpZmVjeWNsZSddID0gIkVy
cm9yL05vbmUiCgogICAgICAgICAgICAjIDUuIENPUlMKICAgICAgICAgICAgdHJ5OgogICAgICAg
ICAgICAgICAgY29ycyA9IGNsaWVudC5nZXRfYnVja2V0X2NvcnMoQnVja2V0PWJ1Y2tldF9uYW1l
KQogICAgICAgICAgICAgICAgaW5mb1snQ09SUyddID0gIkNvbmZpZ3VyZWQiCiAgICAgICAgICAg
IGV4Y2VwdDoKICAgICAgICAgICAgICAgIGluZm9bJ0NPUlMnXSA9ICJOb25lIgoKICAgICAgICAg
ICAgIyA2LiBBQ0wgLyBPd25lcgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBhY2wg
PSBjbGllbnQuZ2V0X2J1Y2tldF9hY2woQnVja2V0PWJ1Y2tldF9uYW1lKQogICAgICAgICAgICAg
ICAgb3duZXIgPSBhY2wuZ2V0KCdPd25lcicsIHt9KQogICAgICAgICAgICAgICAgaW5mb1snLS0t
IEFjY2VzcyAtLS0nXSA9ICcnCiAgICAgICAgICAgICAgICBpbmZvWydPd25lciddID0gb3duZXIu
Z2V0KCdEaXNwbGF5TmFtZScsIG93bmVyLmdldCgnSUQnLCAnTi9BJykpCiAgICAgICAgICAgIGV4
Y2VwdDoKICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgICMgNy4gVXNhZ2UgLyBRdW90
YXMgKNCh0L/QtdGG0LjRhNC40YfQvdC+INC00LvRjyBDZXBoLCDRh9Cw0YHRgtC+INC90LXQtNC+
0YHRgtGD0L/QvdC+INGH0LXRgNC10Lcg0YHRgtCw0L3QtNCw0YDRgtC90YvQuSBBUEkpCiAgICAg
ICAgICAgICMg0JTQu9GPIENlcGgg0LzQvtC20L3QviDQv9C+0L/RgNC+0LHQvtCy0LDRgtGMINC/
0L7Qu9GD0YfQuNGC0Ywg0YfQtdGA0LXQtyBHZXRCdWNrZXRBY2NlbGVyYXRlQ29uZmlndXJhdGlv
biDQuNC70Lgg0LTRgNGD0LPQuNC1INGF0LDQutC4LCAKICAgICAgICAgICAgIyDQvdC+INC90LDQ
tNC10LbQvdC10LUg0L/RgNC+0YHRgtC+INC/0YDQvtCy0LXRgNC40YLRjCDQtNC+0YHRgtGD0L/Q
vdC+0YHRgtGMLgoKICAgICAgICAgICAgIyBQYXllcgogICAgICAgICAgICB0cnk6CiAgICAgICAg
ICAgICAgICBwYXkgPSBjbGllbnQuZ2V0X2J1Y2tldF9yZXF1ZXN0X3BheW1lbnQoQnVja2V0PWJ1
Y2tldF9uYW1lKQogICAgICAgICAgICAgICAgaW5mb1snUGF5ZXInXSA9IHBheS5nZXQoJ1BheWVy
JywgJ0J1Y2tldE93bmVyJykKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFz
cwoKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGluZm9bJ0Vycm9y
J10gPSBzdHIoZSkKCiAgICAgICAgcmV0dXJuIGluZm8KCiAgICBkZWYgX2dldF9zM19vYmplY3Rf
aW5mbyhzZWxmLCBidWNrZXQsIGtleSwgaXR5cGUpOgogICAgICAgICIiItCf0L7Qu9C90LDRjyDQ
uNC90YTQvtGA0LzQsNGG0LjRjyDQvtCxINC+0LHRitC10LrRgtC1IFMzIiIiCiAgICAgICAgaW5m
byA9IE9yZGVyZWREaWN0KCkKICAgICAgICBpbmZvWydOYW1lJ10gPSBrZXkuc3BsaXQoJy8nKVst
MV0KICAgICAgICBpbmZvWydCdWNrZXQnXSA9IGJ1Y2tldAogICAgICAgIGluZm9bJ0tleSddID0g
a2V5CiAgICAgICAgaW5mb1snUzMgVVJJJ10gPSBmInMzOi8ve2J1Y2tldH0ve2tleX0iCgogICAg
ICAgIGlmIGl0eXBlID09ICdzM19kaXInOgogICAgICAgICAgICBpbmZvWydUeXBlJ10gPSAiRm9s
ZGVyIChQcmVmaXgpIgogICAgICAgICAgICByZXR1cm4gaW5mbwoKICAgICAgICB0cnk6CiAgICAg
ICAgICAgIGNsaWVudCA9IHNlbGYuczNfbWFuYWdlci5zM19jbGllbnQKICAgICAgICAgICAgb2Jq
ID0gY2xpZW50LmhlYWRfb2JqZWN0KEJ1Y2tldD1idWNrZXQsIEtleT1rZXkpCgogICAgICAgICAg
ICAjIC0tLSDQntGB0L3QvtCy0L3Ri9C1INGB0LLQvtC50YHRgtCy0LAgLS0tCiAgICAgICAgICAg
IGluZm9bJ1NpemUnXSA9IGZvcm1hdF9zaXplKG9iai5nZXQoJ0NvbnRlbnRMZW5ndGgnLCAwKSkg
KyBmIiAoe29iai5nZXQoJ0NvbnRlbnRMZW5ndGgnLCAwKX0pIgogICAgICAgICAgICBpbmZvWydM
YXN0IE1vZCddID0gb2JqLmdldCgnTGFzdE1vZGlmaWVkJykuc3RyZnRpbWUoJyVZLSVtLSVkICVI
OiVNOiVTJykKICAgICAgICAgICAgaW5mb1snTUlNRSBUeXBlJ10gPSBvYmouZ2V0KCdDb250ZW50
VHlwZScsICdOL0EnKQogICAgICAgICAgICBpbmZvWydTdG9yYWdlJ10gPSBvYmouZ2V0KCdTdG9y
YWdlQ2xhc3MnLCAnU1RBTkRBUkQnKQogICAgICAgICAgICBpbmZvWydFVGFnJ10gPSBvYmouZ2V0
KCdFVGFnJywgJycpLnJlcGxhY2UoJyInLCAnJykKCiAgICAgICAgICAgICMgLS0tIFdlYiBIZWFk
ZXJzIC0tLQogICAgICAgICAgICB3ZWJfaGVhZGVycyA9IHt9CiAgICAgICAgICAgIGlmICdDYWNo
ZUNvbnRyb2wnIGluIG9iajoKICAgICAgICAgICAgICAgIHdlYl9oZWFkZXJzWydDYWNoZS1Db250
cm9sJ10gPSBvYmpbJ0NhY2hlQ29udHJvbCddCiAgICAgICAgICAgIGlmICdDb250ZW50RW5jb2Rp
bmcnIGluIG9iajoKICAgICAgICAgICAgICAgIHdlYl9oZWFkZXJzWydDb250ZW50LUVuY29kaW5n
J10gPSBvYmpbJ0NvbnRlbnRFbmNvZGluZyddCiAgICAgICAgICAgIGlmICdDb250ZW50RGlzcG9z
aXRpb24nIGluIG9iajoKICAgICAgICAgICAgICAgIHdlYl9oZWFkZXJzWydEaXNwb3NpdGlvbidd
ID0gb2JqWydDb250ZW50RGlzcG9zaXRpb24nXQogICAgICAgICAgICBpZiAnV2Vic2l0ZVJlZGly
ZWN0TG9jYXRpb24nIGluIG9iajoKICAgICAgICAgICAgICAgIHdlYl9oZWFkZXJzWydSZWRpcmVj
dCddID0gb2JqWydXZWJzaXRlUmVkaXJlY3RMb2NhdGlvbiddCgogICAgICAgICAgICBpZiB3ZWJf
aGVhZGVyczoKICAgICAgICAgICAgICAgIGluZm9bJy0tLSBXZWIgSGVhZGVycyAtLS0nXSA9ICcn
CiAgICAgICAgICAgICAgICBmb3IgaywgdiBpbiB3ZWJfaGVhZGVycy5pdGVtcygpOgogICAgICAg
ICAgICAgICAgICAgIGluZm9ba10gPSB2CgogICAgICAgICAgICAjIC0tLSBEYXRhIE1hbmFnZW1l
bnQgKExpZmVjeWNsZSwgUmVwbGljYXRpb24sIFJlc3RvcmUpIC0tLQogICAgICAgICAgICBsaWZl
Y3ljbGVfaW5mbyA9IHt9CiAgICAgICAgICAgICMgaWYgJ0V4cGlyYXRpb24nIGluIG9iajogbGlm
ZWN5Y2xlX2luZm9bJ0V4cGlyYXRpb24nXSA9IG9ialsnRXhwaXJhdGlvbiddCiAgICAgICAgICAg
IGlmICdFeHBpcmF0aW9uJyBpbiBvYmo6CiAgICAgICAgICAgICAgICBsaWZlY3ljbGVfaW5mb1sn
RXhwaXJhdGlvbiddID0gb2JqWydFeHBpcmF0aW9uJ10KICAgICAgICAgICAgZWxzZToKICAgICAg
ICAgICAgICAgICMgRklYOiDQldGB0LvQuCDQt9Cw0LPQvtC70L7QstC60LAg0L3QtdGCLCDQv9GA
0L7QstC10YDQuNC8INC/0YDQsNCy0LjQu9CwINCy0YDRg9GH0L3Rg9GOICjQtNC70Y8g0LjQvdGE
0L7RgNC80LjRgNC+0LLQsNC90LjRjykKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAg
ICAgICAgICBsYyA9IGNsaWVudC5nZXRfYnVja2V0X2xpZmVjeWNsZV9jb25maWd1cmF0aW9uKEJ1
Y2tldD1idWNrZXQpCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZF9ydWxlcyA9IFtdCiAgICAg
ICAgICAgICAgICAgICAgZm9yIHJ1bGUgaW4gbGMuZ2V0KCdSdWxlcycsIFtdKToKICAgICAgICAg
ICAgICAgICAgICAgICAgaWYgcnVsZS5nZXQoJ1N0YXR1cycpID09ICdFbmFibGVkJzoKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCA9IHJ1bGUuZ2V0KCdGaWx0ZXInLCB7fSkuZ2V0
KCdQcmVmaXgnLCBydWxlLmdldCgnUHJlZml4JywgJycpKQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIyDQn9GA0L7QstC10YDRj9C10Lwg0YHQvtCy0L/QsNC00LXQvdC40LUg0L/RgNC10YTQ
uNC60YHQsAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYga2V5LnN0YXJ0c3dpdGgocHJl
Zml4KToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlX2lkID0gcnVsZS5nZXQo
J0lEJywgJ1Vua25vd24nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMg0JzQvtC2
0L3QviDQtNC+0LHQsNCy0LjRgtGMINC00LXRgtCw0LvQuCAoRGF5cz0zMCDQuCDRgi7QtC4pLCDQ
vdC+IElEINC00L7RgdGC0LDRgtC+0YfQvdC+INC00LvRjyDQv9C+0LTRgdC60LDQt9C60LgKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkX3J1bGVzLmFwcGVuZChmIid7cnVs
ZV9pZH0nIikKCiAgICAgICAgICAgICAgICAgICAgaWYgbWF0Y2hlZF9ydWxlczoKICAgICAgICAg
ICAgICAgICAgICAgICAgbGlmZWN5Y2xlX2luZm9bJ1BvdGVudGlhbCBSdWxlJ10gPSBmInsnLCAn
LmpvaW4obWF0Y2hlZF9ydWxlcyl9IChQZW5kaW5nIGFwcGxpY2F0aW9uKSIKICAgICAgICAgICAg
ICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICBwYXNzICAjINCf0YDQsNCy0LjQuyDQvdC1
0YIg0LjQu9C4INC90LXRgiDQv9GA0LDQsgoKICAgICAgICAgICAgaWYgJ1JlcGxpY2F0aW9uU3Rh
dHVzJyBpbiBvYmo6CiAgICAgICAgICAgICAgICBsaWZlY3ljbGVfaW5mb1snUmVwbGljYXRpb24n
XSA9IG9ialsnUmVwbGljYXRpb25TdGF0dXMnXQogICAgICAgICAgICBpZiAnUmVzdG9yZScgaW4g
b2JqOgogICAgICAgICAgICAgICAgbGlmZWN5Y2xlX2luZm9bJ1Jlc3RvcmUnXSA9IG9ialsnUmVz
dG9yZSddCgogICAgICAgICAgICBpZiBsaWZlY3ljbGVfaW5mbzoKICAgICAgICAgICAgICAgIGlu
Zm9bJy0tLSBMaWZlY3ljbGUgLS0tJ10gPSAnJwogICAgICAgICAgICAgICAgZm9yIGssIHYgaW4g
bGlmZWN5Y2xlX2luZm8uaXRlbXMoKToKICAgICAgICAgICAgICAgICAgICBpbmZvW2tdID0gdgoK
ICAgICAgICAgICAgIyAtLS0gT2JqZWN0IExvY2sgJiBTZWN1cml0eSAtLS0KICAgICAgICAgICAg
c2VjdXJpdHlfaW5mbyA9IHt9CiAgICAgICAgICAgIGlmICdPYmplY3RMb2NrTW9kZScgaW4gb2Jq
OgogICAgICAgICAgICAgICAgc2VjdXJpdHlfaW5mb1snTG9jayBNb2RlJ10gPSBvYmpbJ09iamVj
dExvY2tNb2RlJ10KICAgICAgICAgICAgaWYgJ09iamVjdExvY2tSZXRhaW5VbnRpbERhdGUnIGlu
IG9iajoKICAgICAgICAgICAgICAgIHNlY3VyaXR5X2luZm9bJ1JldGFpbiBVbnRpbCddID0gc3Ry
KG9ialsnT2JqZWN0TG9ja1JldGFpblVudGlsRGF0ZSddKQogICAgICAgICAgICBpZiAnT2JqZWN0
TG9ja0xlZ2FsSG9sZFN0YXR1cycgaW4gb2JqOgogICAgICAgICAgICAgICAgc2VjdXJpdHlfaW5m
b1snTGVnYWwgSG9sZCddID0gb2JqWydPYmplY3RMb2NrTGVnYWxIb2xkU3RhdHVzJ10KICAgICAg
ICAgICAgaWYgJ1NlcnZlclNpZGVFbmNyeXB0aW9uJyBpbiBvYmo6CiAgICAgICAgICAgICAgICBz
ZWN1cml0eV9pbmZvWydFbmNyeXB0aW9uJ10gPSBvYmpbJ1NlcnZlclNpZGVFbmNyeXB0aW9uJ10K
ICAgICAgICAgICAgaWYgJ1NTRUtNU0tleUlkJyBpbiBvYmo6CiAgICAgICAgICAgICAgICBzZWN1
cml0eV9pbmZvWydLTVMgS2V5IElEJ10gPSBvYmpbJ1NTRUtNU0tleUlkJ10KCiAgICAgICAgICAg
IGlmIHNlY3VyaXR5X2luZm86CiAgICAgICAgICAgICAgICBpbmZvWyctLS0gU2VjdXJpdHkgLS0t
J10gPSAnJwogICAgICAgICAgICAgICAgZm9yIGssIHYgaW4gc2VjdXJpdHlfaW5mby5pdGVtcygp
OgogICAgICAgICAgICAgICAgICAgIGluZm9ba10gPSB2CgogICAgICAgICAgICAjIC0tLSBNZXRh
ZGF0YSAtLS0KICAgICAgICAgICAgaWYgJ01ldGFkYXRhJyBpbiBvYmogYW5kIG9ialsnTWV0YWRh
dGEnXToKICAgICAgICAgICAgICAgIGluZm9bJy0tLSBNZXRhZGF0YSAtLS0nXSA9ICcnCiAgICAg
ICAgICAgICAgICBmb3IgaywgdiBpbiBvYmpbJ01ldGFkYXRhJ10uaXRlbXMoKToKICAgICAgICAg
ICAgICAgICAgICBpbmZvW2YiTWV0YS17a30iXSA9IHYKCiAgICAgICAgICAgICMgLS0tIFRhZ3Mg
LS0tCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHRhZ3NfcmVzcCA9IGNsaWVudC5n
ZXRfb2JqZWN0X3RhZ2dpbmcoQnVja2V0PWJ1Y2tldCwgS2V5PWtleSkKICAgICAgICAgICAgICAg
IHRhZ3MgPSB0YWdzX3Jlc3AuZ2V0KCdUYWdTZXQnLCBbXSkKICAgICAgICAgICAgICAgIGlmIHRh
Z3M6CiAgICAgICAgICAgICAgICAgICAgaW5mb1snLS0tIFRhZ3MgLS0tJ10gPSAnJwogICAgICAg
ICAgICAgICAgICAgIGZvciB0YWcgaW4gdGFnczoKICAgICAgICAgICAgICAgICAgICAgICAgaW5m
b1tmIlRhZzoge3RhZ1snS2V5J119Il0gPSB0YWdbJ1ZhbHVlJ10KICAgICAgICAgICAgZXhjZXB0
IENsaWVudEVycm9yOgogICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgICAgICMgLS0t
IEFDTCAtLS0KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgYWNsID0gY2xpZW50Lmdl
dF9vYmplY3RfYWNsKEJ1Y2tldD1idWNrZXQsIEtleT1rZXkpCiAgICAgICAgICAgICAgICBvd25l
ciA9IGFjbC5nZXQoJ093bmVyJywge30pCiAgICAgICAgICAgICAgICBpbmZvWyctLS0gUGVybWlz
c2lvbnMgLS0tJ10gPSAnJwogICAgICAgICAgICAgICAgaW5mb1snT3duZXInXSA9IGYie293bmVy
LmdldCgnRGlzcGxheU5hbWUnLCAnTi9BJyl9ICh7b3duZXIuZ2V0KCdJRCcsICdOL0EnKX0pIgoK
ICAgICAgICAgICAgICAgICMg0JrRgNCw0YLQutCw0Y8g0YHQstC+0LTQutCwINC/0YDQsNCyCiAg
ICAgICAgICAgICAgICBncmFudHMgPSBbXQogICAgICAgICAgICAgICAgZm9yIGcgaW4gYWNsLmdl
dCgnR3JhbnRzJywgW10pOgogICAgICAgICAgICAgICAgICAgIHBlcm0gPSBnLmdldCgnUGVybWlz
c2lvbicpCiAgICAgICAgICAgICAgICAgICAgZ3JhbnRlZSA9IGcuZ2V0KCdHcmFudGVlJywge30p
CiAgICAgICAgICAgICAgICAgICAgaWYgZ3JhbnRlZS5nZXQoJ1R5cGUnKSA9PSAnR3JvdXAnOgog
ICAgICAgICAgICAgICAgICAgICAgICB3aG8gPSBncmFudGVlLmdldCgnVVJJJywgJycpLnNwbGl0
KCcvJylbLTFdCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAg
ICAgd2hvID0gZ3JhbnRlZS5nZXQoJ0Rpc3BsYXlOYW1lJywgJ0lEPScgKyBncmFudGVlLmdldCgn
SUQnLCAnJylbOjRdKQogICAgICAgICAgICAgICAgICAgIGdyYW50cy5hcHBlbmQoZiJ7d2hvfTp7
cGVybX0iKQoKICAgICAgICAgICAgICAgIGlmIGdyYW50czoKICAgICAgICAgICAgICAgICAgICBp
bmZvWydBQ0wnXSA9ICIsICIuam9pbihncmFudHNbOjNdKSAgIyDQn9C+0LrQsNC30YvQstCw0LXQ
vCDQv9C10YDQstGL0LUgMyDQutC+0LzQv9Cw0LrRgtC90L4KICAgICAgICAgICAgZXhjZXB0Ogog
ICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgIyAtLS0gVmVyc2lvbnMgLS0tCiAgICAg
ICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHZlcnNpb25zID0gY2xpZW50Lmxpc3Rfb2JqZWN0
X3ZlcnNpb25zKEJ1Y2tldD1idWNrZXQsIFByZWZpeD1rZXkpCiAgICAgICAgICAgICAgICBpZiAn
VmVyc2lvbnMnIGluIHZlcnNpb25zOgogICAgICAgICAgICAgICAgICAgIG9ial92ZXJzaW9ucyA9
IFt2IGZvciB2IGluIHZlcnNpb25zWydWZXJzaW9ucyddIGlmIHZbJ0tleSddID09IGtleV0KICAg
ICAgICAgICAgICAgICAgICBpZiBsZW4ob2JqX3ZlcnNpb25zKSA+IDA6CiAgICAgICAgICAgICAg
ICAgICAgICAgIGluZm9bJy0tLSBWZXJzaW9ucyAtLS0nXSA9ICcnCiAgICAgICAgICAgICAgICAg
ICAgICAgIGluZm9bJ0NvdW50J10gPSBsZW4ob2JqX3ZlcnNpb25zKQogICAgICAgICAgICAgICAg
ICAgICAgICBmb3IgaSwgdiBpbiBlbnVtZXJhdGUob2JqX3ZlcnNpb25zWzo1XSk6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB2aWQgPSB2LmdldCgnVmVyc2lvbklkJywgJ251bGwnKVs6OF0K
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2N1ciA9ICIgKiIgaWYgdi5nZXQoJ0lzTGF0
ZXN0JykgZWxzZSAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IHYuZ2V0KCdM
YXN0TW9kaWZpZWQnKS5zdHJmdGltZSgnJW0tJWQgJUg6JU0nKQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc2l6ZSA9IGZvcm1hdF9zaXplKHYuZ2V0KCdTaXplJywgMCkpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBpbmZvW2YidntpICsgMX0iXSA9IGYie3ZpZDo8OH0ge2RhdGV9IHtz
aXplfXtpc19jdXJ9IgogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNzCgog
ICAgICAgICAgICAjIC0tLSBQcmVzaWduZWQgVVJMIC0tLQogICAgICAgICAgICB0cnk6CiAgICAg
ICAgICAgICAgICB1cmwgPSBjbGllbnQuZ2VuZXJhdGVfcHJlc2lnbmVkX3VybCgnZ2V0X29iamVj
dCcsIFBhcmFtcz17J0J1Y2tldCc6IGJ1Y2tldCwgJ0tleSc6IGtleX0sIEV4cGlyZXNJbj0zNjAw
KQogICAgICAgICAgICAgICAgaW5mb1snVVJMX0ZVTEwnXSA9IHVybCAgIyDQmtC70Y7RhyDQtNC7
0Y8gRmlsZUluZm9EaWFsb2cKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFz
cwoKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGluZm9bJ0Vycm9y
J10gPSBzdHIoZSkKCiAgICAgICAgcmV0dXJuIGluZm8KCiAgICBkZWYgY29weV92ZXJzaW9uKHNl
bGYsIGZpbGVfZGF0YSwgdmVyc2lvbl9kYXRhLCBtb3ZlPUZhbHNlLCBjYWxsYmFjaz1Ob25lKToK
ICAgICAgICAiIiIKICAgICAgICDQmtC+0L/QuNGA0YPQtdGCINC40LvQuCDQv9C10YDQtdC80LXR
idCw0LXRgiDQutC+0L3QutGA0LXRgtC90YPRjiDQstC10YDRgdC40Y4g0YTQsNC50LvQsCDQsiDQ
vdC10LDQutGC0LjQstC90YPRjiAo0YbQtdC70LXQstGD0Y4pINC/0LDQvdC10LvRjC4KCiAgICAg
ICAg0JDRgNCz0YPQvNC10L3RgtGLOgogICAgICAgICAgICBmaWxlX2RhdGEgKGRpY3QpOiDQodC7
0L7QstCw0YDRjCDRgSDQtNCw0L3QvdGL0LzQuCDQvtGB0L3QvtCy0L3QvtCz0L4g0YTQsNC50LvQ
sCAo0YHQvtC00LXRgNC20LjRgiDQuNC80Y8sINGC0LjQvywg0LrQu9GO0Ycg0Lgg0YIu0LQuKS4K
ICAgICAgICAgICAgdmVyc2lvbl9kYXRhIChkaWN0KTog0KHQu9C+0LLQsNGA0Ywg0YEg0LTQsNC9
0L3Ri9C80Lgg0LrQvtC90LrRgNC10YLQvdC+0Lkg0LLQtdGA0YHQuNC4IChWZXJzaW9uSWQsIElz
TGF0ZXN0LCBTaXplLCBMYXN0TW9kaWZpZWQpLgogICAgICAgICAgICBtb3ZlIChib29sKTog0KDQ
tdC20LjQvCDQvtC/0LXRgNCw0YbQuNC4LgogICAgICAgICAgICAgICAgICAgICAgICAg0JXRgdC7
0LggVHJ1ZSDigJQg0LLRi9C/0L7Qu9C90Y/QtdGC0YHRjyDQv9C10YDQtdC80LXRidC10L3QuNC1
ICjQutC+0L/QuNGA0L7QstCw0L3QuNC1ICsg0YPQtNCw0LvQtdC90LjQtSDQuNGB0YXQvtC00L3Q
vtC5INCy0LXRgNGB0LjQuCkuCiAgICAgICAgICAgICAgICAgICAgICAgICDQldGB0LvQuCBGYWxz
ZSAo0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4pIOKAlCDQvtCx0YvRh9C90L7QtSDQutC+0L/QuNGA
0L7QstCw0L3QuNC1LgogICAgICAgICAgICBjYWxsYmFjayAoY2FsbGFibGUpOiDQpNGD0L3QutGG
0LjRjyDQvtCx0YDQsNGC0L3QvtCz0L4g0LLRi9C30L7QstCwLCDQutC+0YLQvtGA0LDRjyDQsdGD
0LTQtdGCINCy0YvQv9C+0LvQvdC10L3QsCDQv9C+0YHQu9C1INC30LDQstC10YDRiNC10L3QuNGP
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgINC+0L/QtdGA0LDRhtC40Lgg0LrQvtC/
0LjRgNC+0LLQsNC90LjRjy/Qv9C10YDQtdC80LXRidC10L3QuNGPINC4INC30LDQutGA0YvRgtC4
0Y8g0LTQuNCw0LvQvtCz0LAg0L/RgNC+0LPRgNC10YHRgdCwLgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICDQmNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0LTQu9GPINCy0L7RgdGB0YLQ
sNC90L7QstC70LXQvdC40Y8g0LTQuNCw0LvQvtCz0LAg0LLRi9Cx0L7RgNCwINCy0LXRgNGB0LjQ
uS4KICAgICAgICAiIiIKICAgICAgICB0YXJnZXRfcGFuZWwgPSBzZWxmLmFwcC5nZXRfaW5hY3Rp
dmVfcGFuZWwoKQoKICAgICAgICAjINCh0L7RhdGA0LDQvdGP0LXQvCDRgtC10LrRg9GJ0LjQuSDR
hNC+0LrRg9GBLCDRh9GC0L7QsdGLINCy0L7RgdGB0YLQsNC90L7QstC40YLRjCDQtdCz0L4sINC1
0YHQu9C4INC/0LDQvdC10LvRjCDQvtCx0L3QvtCy0LjRgtGB0Y8KICAgICAgICB0cnk6CiAgICAg
ICAgICAgIGN1cnJlbnRfaW5kZXggPSBzZWxmLmxpc3Rib3guZm9jdXNfcG9zaXRpb24KICAgICAg
ICBleGNlcHQ6CiAgICAgICAgICAgIGN1cnJlbnRfaW5kZXggPSBOb25lCgogICAgICAgIGl0ZW1f
dG9fY29weSA9IGZpbGVfZGF0YS5jb3B5KCkKICAgICAgICBpdGVtX3RvX2NvcHlbJ1ZlcnNpb25J
ZCddID0gdmVyc2lvbl9kYXRhWydWZXJzaW9uSWQnXQogICAgICAgIGl0ZW1fdG9fY29weVsnU2l6
ZSddID0gdmVyc2lvbl9kYXRhWydTaXplJ10KCiAgICAgICAgaXRlbXMgPSBbaXRlbV90b19jb3B5
XQogICAgICAgIG9wZXJhdGlvbiA9ICJtb3ZlIiBpZiBtb3ZlIGVsc2UgImNvcHkiCiAgICAgICAg
dGl0bGUgPSAiTW92ZSBWZXJzaW9uIiBpZiBtb3ZlIGVsc2UgIkNvcHkgVmVyc2lvbiIKCiAgICAg
ICAgaWYgdGFyZ2V0X3BhbmVsLm1vZGUgPT0gJ2ZzJzoKICAgICAgICAgICAgYmFzZV9wYXRoID0g
dGFyZ2V0X3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoCiAgICAgICAgICAgIGRlc3RfcGF0
aCA9IG9zLnBhdGguam9pbihiYXNlX3BhdGgsIGZpbGVfZGF0YVsnbmFtZSddKQogICAgICAgICAg
ICBkZXN0X2Rlc2MgPSBmIkZTOiB7ZGVzdF9wYXRofSIKICAgICAgICAgICAgIyDQkCDQstC+0YIg
0LIg0LTQuNCw0LvQvtCzINC/0LXRgNC10LTQsNC10Lwg0LjQvNC10L3QvdC+INC/0YPRgtGMINC0
0LvRjyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPCiAgICAgICAgICAgIGVkaXRfcGF0aCA9
IGRlc3RfcGF0aAogICAgICAgIGVsaWYgdGFyZ2V0X3BhbmVsLm1vZGUgPT0gJ3MzJzoKICAgICAg
ICAgICAgaWYgbm90IHRhcmdldF9wYW5lbC5jdXJyZW50X2J1Y2tldDoKICAgICAgICAgICAgICAg
IHNlbGYuYXBwLnNob3dfcmVzdWx0KCJUYXJnZXQgcGFuZWwgaXMgbm90IGluIGEgYnVja2V0IikK
ICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBwcmVmaXggPSB0YXJnZXRfcGFuZWwu
Y3VycmVudF9wcmVmaXggaWYgdGFyZ2V0X3BhbmVsLmN1cnJlbnRfcHJlZml4IGVsc2UgIiIKCiAg
ICAgICAgICAgIGlmIHRhcmdldF9wYW5lbC5jdXJyZW50X2J1Y2tldDoKICAgICAgICAgICAgICAg
IGVkaXRfcGF0aCA9IHByZWZpeCArIGZpbGVfZGF0YVsnbmFtZSddCiAgICAgICAgICAgICAgICBk
ZXN0X2Rlc2MgPSBmIlMzOiB7dGFyZ2V0X3BhbmVsLmN1cnJlbnRfYnVja2V0fS97ZWRpdF9wYXRo
fSIKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGVkaXRfcGF0aCA9IGZpbGVfZGF0
YVsnbmFtZSddCiAgICAgICAgICAgICAgICBkZXN0X2Rlc2MgPSBmIlMzOiB7ZWRpdF9wYXRofSIK
ICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmFwcC5zaG93X3Jlc3VsdCgiSW52YWxpZCB0
YXJnZXQiKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgZGVmIG9uX2NvbmZpcm0oY29uZmly
bWVkLCB0YXJnZXRfcGF0aF9mcm9tX2RpYWxvZyk6CiAgICAgICAgICAgIHNlbGYuYXBwLmNsb3Nl
X2RpYWxvZygpCiAgICAgICAgICAgIGlmIGNvbmZpcm1lZDoKICAgICAgICAgICAgICAgIHRhcmdl
dF9wYXRoID0gdGFyZ2V0X3BhdGhfZnJvbV9kaWFsb2cgaWYgdGFyZ2V0X3BhdGhfZnJvbV9kaWFs
b2cgIT0gIiIgZWxzZSBlZGl0X3BhdGgKCiAgICAgICAgICAgICAgICBhbmFseXplZF9pdGVtID0g
ewogICAgICAgICAgICAgICAgICAgICd0eXBlJzogZmlsZV9kYXRhWyd0eXBlJ10sCiAgICAgICAg
ICAgICAgICAgICAgJ2l0ZW0nOiBpdGVtX3RvX2NvcHksCiAgICAgICAgICAgICAgICAgICAgJ2Zp
bGVzJzogW2l0ZW1fdG9fY29weV0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGFu
YWx5emVkID0gW2FuYWx5emVkX2l0ZW1dCgogICAgICAgICAgICAgICAgdG90YWxfYnl0ZXMgPSBp
dGVtX3RvX2NvcHlbJ1NpemUnXQoKICAgICAgICAgICAgICAgIHNlbGYuYXBwLm92ZXJ3cml0ZV9h
bGwgPSBGYWxzZQogICAgICAgICAgICAgICAgc2VsZi5hcHAudmVyc2lvbl9hbGwgPSBGYWxzZQog
ICAgICAgICAgICAgICAgc2VsZi5hcHAuc2tpcF9hbGwgPSBGYWxzZQoKICAgICAgICAgICAgICAg
ICMg0J/QtdGA0LXQtNCw0LXQvCByZXN0b3JlX2luZGV4INC4IGNhbGxiYWNrIChvbl9jb21wbGV0
ZSkKICAgICAgICAgICAgICAgIHNlbGYuYXBwLl9kb19jb3B5X3dpdGhfcHJvZ3Jlc3MoCiAgICAg
ICAgICAgICAgICAgICAgYW5hbHl6ZWQsCiAgICAgICAgICAgICAgICAgICAgc2VsZiwKICAgICAg
ICAgICAgICAgICAgICB0YXJnZXRfcGFuZWwsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X3Bh
dGgsCiAgICAgICAgICAgICAgICAgICAgaXRlbV90b19jb3B5WyduYW1lJ10sCiAgICAgICAgICAg
ICAgICAgICAgaXNfbW92ZT1tb3ZlLAogICAgICAgICAgICAgICAgICAgIHRvdGFsX2J5dGVzPXRv
dGFsX2J5dGVzLAogICAgICAgICAgICAgICAgICAgIHJlc3RvcmVfaW5kZXg9Y3VycmVudF9pbmRl
eCwgICMg0JLQvtGB0YHRgtCw0L3QvtCy0LjRgiDQutGD0YDRgdC+0YAKICAgICAgICAgICAgICAg
ICAgICBvbl9jb21wbGV0ZT1jYWxsYmFjayAgIyDQktGL0LfQvtCy0LXRgiDQtNC40LDQu9C+0LMg
0LLQtdGA0YHQuNC5INC/0L7RgdC70LUg0LfQsNCy0LXRgNGI0LXQvdC40Y8KICAgICAgICAgICAg
ICAgICkKICAgICAgICAgICAgIyDQldGB0LvQuCDQvtGC0LzQtdC90LAg0LjQu9C4INC/0L7QtNGC
0LLQtdGA0LbQtNC10L3QuNC1IC0g0LIg0LvRjtCx0L7QvCDRgdC70YPRh9Cw0LUg0LLQvtC30LLR
gNCw0YnQsNC10LzRgdGPLCDQtdGB0LvQuCDQtdGB0YLRjCBjYWxsYmFjawogICAgICAgICAgICBp
ZiBjYWxsYmFjazoKICAgICAgICAgICAgICAgICMg0J3QtdCx0L7Qu9GM0YjQsNGPINC30LDQtNC1
0YDQttC60LAsINGH0YLQvtCx0YsgVUkg0YPRgdC/0LXQuyDQvtGC0YDQsNCx0L7RgtCw0YLRjCDQ
t9Cw0LrRgNGL0YLQuNC1INC/0YDQtdC00YvQtNGD0YnQtdCz0L4g0LTQuNCw0LvQvtCz0LAKICAg
ICAgICAgICAgICAgIHNlbGYuYXBwLmxvb3Auc2V0X2FsYXJtX2luKDAuMiwgbGFtYmRhICphOiBj
YWxsYmFjaygpKQoKICAgICAgICB2ZXJzaW9uX2lkID0gdmVyc2lvbl9kYXRhLmdldCgnVmVyc2lv
bklkJywgJycpWzoxMl0KICAgICAgICBpc19sYXRlc3QgPSB2ZXJzaW9uX2RhdGEuZ2V0KCdJc0xh
dGVzdCcsIEZhbHNlKQogICAgICAgIGxhdGVzdF93YXJuID0gIiBbVEhJUyBJUyBUSEUgTEFURVNU
IFZFUlNJT04hXSIgaWYgaXNfbGF0ZXN0IGVsc2UgIiIKICAgICAgICBzaXplID0gc2VsZi5mb3Jt
YXRfc2l6ZSh2ZXJzaW9uX2RhdGEuZ2V0KCdTaXplJywgMCkpICAjIHNlbGYuZm9ybWF0X3NpemUg
0LjRgdC/0YDQsNCy0LjQuwogICAgICAgIG10aW1lID0gdmVyc2lvbl9kYXRhLmdldCgnTGFzdE1v
ZGlmaWVkJywgJycpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpIGlmIHZlcnNpb25fZGF0
YS5nZXQoCiAgICAgICAgICAgICdMYXN0TW9kaWZpZWQnKSBlbHNlICdOL0EnCgogICAgICAgIGZy
b21fZGVzYyA9IGYie2ZpbGVfZGF0YVsnbmFtZSddfSAoVmVyc2lvbiBJRDoge3ZlcnNpb25fZGF0
YS5nZXQoJ1ZlcnNpb25JZCcsICcnKVs6MTBdfSAgU2l6ZToge3NpemV9IE1vZGlmaWVkOiB7bXRp
bWV9ICB7bGF0ZXN0X3dhcm59KSAiCiAgICAgICAgZGlhbG9nID0gQ29weU1vdmVEaWFsb2codGl0
bGUsIGZyb21fZGVzYywgZWRpdF9wYXRoLCBvbl9jb25maXJtKQogICAgICAgIHNlbGYuYXBwLnNo
b3dfZGlhbG9nKGRpYWxvZykKCiAgICBkZWYgc2hvd19zb3J0X2RpYWxvZyhzZWxmKToKICAgICAg
ICAiIiLQn9C+0LrQsNC30LDRgtGMINC00LjQsNC70L7QsyDQstGL0LHQvtGA0LAg0YHQvtGA0YLQ
uNGA0L7QstC60LgiIiIKCiAgICAgICAgZGVmIGNhbGxiYWNrKGNvbmZpcm1lZCwgbW9kZSwgcmV2
ZXJzZSk6CiAgICAgICAgICAgIHNlbGYuYXBwLmNsb3NlX2RpYWxvZygpCiAgICAgICAgICAgIGlm
IGNvbmZpcm1lZCBhbmQgbW9kZToKICAgICAgICAgICAgICAgIHNlbGYuc29ydF9tb2RlID0gbW9k
ZQogICAgICAgICAgICAgICAgc2VsZi5zb3J0X3JldmVyc2UgPSByZXZlcnNlICAjINCh0L7RhdGA
0LDQvdGP0LXQvCDQstGL0LHQvtGACgogICAgICAgICAgICAgICAgIyDQlNC70Y8gUzM6INC/0LXR
gNC10YHQvtGA0YLQuNGA0L7QstGL0LLQsNC10Lwg0YLQvtC70YzQutC+INC10YHQu9C4INC00LDQ
vdC90YvQtSDRg9C20LUg0LfQsNCz0YDRg9C20LXQvdGLCiAgICAgICAgICAgICAgICBpZiBzZWxm
Lm1vZGUgPT0gJ3MzJyBhbmQgbm90IHNlbGYubG9hZGluZ19pbl9wcm9ncmVzczoKICAgICAgICAg
ICAgICAgICAgICBzZWxmLl9yZXNvcnRfY3VycmVudF92aWV3KCkKICAgICAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWZyZXNoKCkKCiAgICAgICAgICAgICAgICBy
ZXZfbWFyayA9ICIgKFJldikiIGlmIHJldmVyc2UgZWxzZSAiIgogICAgICAgICAgICAgICAgc2Vs
Zi5hcHAuc2hvd19yZXN1bHQoZidTb3J0IGJ5OiB7bW9kZX17cmV2X21hcmt9JykKCiAgICAgICAg
ICAgICAgICBpZiBzZWxmLm1vZGUgPT0gJ3MzJzoKICAgICAgICAgICAgICAgICAgICBzZWxmLnVw
ZGF0ZV9oZWFkZXIoZidbUzMgTW9kZSAtIHtzZWxmLmN1cnJlbnRfZW5kcG9pbnR9XSBTb3J0OiB7
c2VsZi5zb3J0X21vZGV9e3Jldl9tYXJrfScpCgogICAgICAgICMg0J/QtdGA0LXQtNCw0LXQvCDR
gtC10LrRg9GJ0LjQuSDRgNC10LbQuNC8INC4INGE0LvQsNCzIHJldmVyc2UKICAgICAgICBkaWFs
b2cgPSBTb3J0RGlhbG9nKHNlbGYuc29ydF9tb2RlLCBzZWxmLnNvcnRfcmV2ZXJzZSwgY2FsbGJh
Y2spCiAgICAgICAgc2VsZi5hcHAuc2hvd19kaWFsb2coZGlhbG9nKQoKICAgIGRlZiBfcmVzb3J0
X2N1cnJlbnRfdmlldyhzZWxmKToKICAgICAgICAiIiLQn9C10YDQtdGB0L7RgNGC0LjRgNC+0LLQ
sNGC0Ywg0YLQtdC60YPRidC40Lkg0LLQuNC0INCx0LXQtyDQv9C10YDQtdC30LDQs9GA0YPQt9C6
0Lgg0LjQtyDRgdC10YLQuCIiIgogICAgICAgIGZvbGRlcnMgPSBbXQogICAgICAgIGZpbGVzID0g
W10KCiAgICAgICAgIyAxLiDQmNC30LLQu9C10LrQsNC10Lwg0LTQsNC90L3Ri9C1INC40Lcg0YLQ
tdC60YPRidC40YUg0LLQuNC00LbQtdGC0L7QsiB3YWxrZXIKICAgICAgICBmb3Igd2lkZ2V0IGlu
IHNlbGYud2Fsa2VyOgogICAgICAgICAgICB3ID0gd2lkZ2V0Lm9yaWdpbmFsX3dpZGdldCBpZiBp
c2luc3RhbmNlKHdpZGdldCwgdXJ3aWQuQXR0ck1hcCkgZWxzZSB3aWRnZXQKICAgICAgICAgICAg
aWYgaXNpbnN0YW5jZSh3LCBTZWxlY3RhYmxlVGV4dCk6CiAgICAgICAgICAgICAgICBkYXRhID0g
dy5kYXRhCiAgICAgICAgICAgICAgICBkdHlwZSA9IGRhdGEuZ2V0KCd0eXBlJykKCiAgICAgICAg
ICAgICAgICAjIEZJWDog0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0L3QvtCy0YvQtSDRgtC40L/RiyAn
czNfZGlyJyDQuCAnczNfZmlsZScKICAgICAgICAgICAgICAgIGlmIGR0eXBlID09ICdzM19kaXIn
OgogICAgICAgICAgICAgICAgICAgIGZvbGRlcnMuYXBwZW5kKHsnS2V5JzogZGF0YVsna2V5J119
KQogICAgICAgICAgICAgICAgZWxpZiBkdHlwZSA9PSAnczNfZmlsZSc6CiAgICAgICAgICAgICAg
ICAgICAgIyDQktC+0YHRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0YHRgtGA0YPQutGC0YPRgNGD
LCDQutC+0YLQvtGA0YPRjiDQvtC20LjQtNCw0LXRgiBfY3JlYXRlX2Rpc3BsYXlfaXRlbXMKICAg
ICAgICAgICAgICAgICAgICBmaWxlcy5hcHBlbmQoewogICAgICAgICAgICAgICAgICAgICAgICAn
S2V5JzogZGF0YVsna2V5J10sCiAgICAgICAgICAgICAgICAgICAgICAgICdTaXplJzogZGF0YS5n
ZXQoJ3NpemUnLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ0xhc3RNb2RpZmllZCc6IGRh
dGEuZ2V0KCdtdGltZScpLAogICAgICAgICAgICAgICAgICAgICAgICAndmVyc2lvbl9jb3VudCc6
IGRhdGEuZ2V0KCd2ZXJzaW9uX2NvdW50JywgMSkgICMg0KHQvtGF0YDQsNC90Y/QtdC8INC60L7Q
uy3QstC+INCy0LXRgNGB0LjQuQogICAgICAgICAgICAgICAgICAgIH0pCgogICAgICAgICMgMi4g
0J7Rh9C40YnQsNC10Lwgd2Fsa2VyLCDQvtGB0YLQsNCy0LvRj9GPINGC0L7Qu9GM0LrQviDQvdCw
0LLQuNCz0LDRhtC40Y4KICAgICAgICBrZWVwX2NvdW50ID0gMAogICAgICAgIGtlZXBfdHlwZXMg
PSBbJ3RvX3Jvb3RfbWVudScsICdwYXJlbnQnLCAnczNfcGFyZW50JywgJ3MzX2JhY2snXQoKICAg
ICAgICBmb3Igd2lkZ2V0IGluIHNlbGYud2Fsa2VyOgogICAgICAgICAgICB3ID0gd2lkZ2V0Lm9y
aWdpbmFsX3dpZGdldCBpZiBpc2luc3RhbmNlKHdpZGdldCwgdXJ3aWQuQXR0ck1hcCkgZWxzZSB3
aWRnZXQKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh3LCBTZWxlY3RhYmxlVGV4dCk6CiAgICAg
ICAgICAgICAgICBpZiB3LmRhdGEuZ2V0KCd0eXBlJykgaW4ga2VlcF90eXBlczoKICAgICAgICAg
ICAgICAgICAgICBrZWVwX2NvdW50ICs9IDEKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAg
ICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgZGVsIHNlbGYud2Fsa2VyW2tlZXBfY291bnQ6XQoK
ICAgICAgICAjIDMuINCf0LXRgNC10YHQvtC30LTQsNC10Lwg0LLQuNC00LbQtdGC0Ysg0YEg0YPR
h9C10YLQvtC8INC90L7QstC+0Lkg0YHQvtGA0YLQuNGA0L7QstC60LgKICAgICAgICAjIHNlbGYu
c29ydF9tb2RlINGD0LbQtSDQsdGL0Lsg0L7QsdC90L7QstC70LXQvSDQtNC40LDQu9C+0LPQvtC8
INC/0LXRgNC10LQg0LLRi9C30L7QstC+0Lwg0Y3RgtC+0LPQviDQvNC10YLQvtC00LAKICAgICAg
ICBpdGVtcyA9IHNlbGYuX2NyZWF0ZV9kaXNwbGF5X2l0ZW1zKGZvbGRlcnMsIGZpbGVzLCBkb19z
b3J0PVRydWUpCgogICAgICAgIGZvciBpdGVtIGluIGl0ZW1zOgogICAgICAgICAgICBzZWxmLndh
bGtlci5hcHBlbmQoaXRlbSkKCiAgICAgICAgIyA0LiDQntCx0L3QvtCy0LvRj9C10Lwg0Y3QutGA
0LDQvQogICAgICAgIGlmIHNlbGYuYXBwIGFuZCBoYXNhdHRyKHNlbGYuYXBwLCAnbG9vcCcpIGFu
ZCBzZWxmLmFwcC5sb29wOgogICAgICAgICAgICBzZWxmLmFwcC5sb29wLmRyYXdfc2NyZWVuKCkK
CiAgICAjINCe0JHQndCe0JLQm9CV0J3QmNCVIFMzINGC0L7Qu9GM0LrQviDQv9GA0Lgg0LjQt9C8
0LXQvdC10L3QuNGP0YUKICAgIGRlZiBtYXJrX3MzX2Zvcl9yZWZyZXNoKHNlbGYpOgogICAgICAg
ICIiItCe0YLQvNC10YLQuNGC0Ywg0YfRgtC+IFMzINC90YPQttC90L4g0L7QsdC90L7QstC40YLR
jCIiIgogICAgICAgIHNlbGYuczNfbmVlZHNfcmVmcmVzaCA9IFRydWUKCiAgICBkZWYgc29ydF9p
dGVtcyhzZWxmLCBpdGVtcyk6CiAgICAgICAgIiIi0KHQvtGA0YLQuNGA0L7QstCw0YLRjCDRjdC7
0LXQvNC10L3RgtGLINGBINGD0YfQtdGC0L7QvCDRhNC70LDQs9CwIFJldmVyc2UiIiIKCiAgICAg
ICAgZGVmIGdldF90eXBlX3ByaW9yaXR5KGl0ZW0pOgogICAgICAgICAgICB0ID0gaXRlbS5nZXQo
J3R5cGUnLCAnJykKICAgICAgICAgICAgaWYgdCBpbiBbJ2ZvbGRlcicsICdzM19kaXInLCAnZnNf
ZGlyJywgJ3BhcmVudCcsICdzM19wYXJlbnQnXToKICAgICAgICAgICAgICAgIHJldHVybiAwCiAg
ICAgICAgICAgIHJldHVybiAxCgogICAgICAgICMg0J/QvtC70YPRh9Cw0LXQvCDRgdC/0LjRgdC6
0LgKICAgICAgICBkaXJzID0gW3ggZm9yIHggaW4gaXRlbXMgaWYgZ2V0X3R5cGVfcHJpb3JpdHko
eCkgPT0gMF0KICAgICAgICBmaWxlcyA9IFt4IGZvciB4IGluIGl0ZW1zIGlmIGdldF90eXBlX3By
aW9yaXR5KHgpID09IDFdCgogICAgICAgICMg0KTRg9C90LrRhtC40Y8t0LrQu9GO0Ycg0LTQu9GP
INGB0L7RgNGC0LjRgNC+0LLQutC4INGE0LDQudC70L7QsgogICAgICAgIGtleV9mdW5jID0gTm9u
ZQogICAgICAgIHJldmVyc2VfZmlsZXMgPSBzZWxmLnNvcnRfcmV2ZXJzZQoKICAgICAgICBpZiBz
ZWxmLnNvcnRfbW9kZSA9PSAnbmFtZSc6CiAgICAgICAgICAgIGtleV9mdW5jID0gbGFtYmRhIHg6
IHguZ2V0KCduYW1lJywgeC5nZXQoJ2tleScsICcnKSkubG93ZXIoKQogICAgICAgICAgICAjINCU
0LvRjyDQuNC80LXQvdC4IHJldmVyc2Ug0YDQsNCx0L7RgtCw0LXRgiAi0LrQsNC6INC+0LbQuNC0
0LDQtdGC0YHRjyIgKFotQSkKCiAgICAgICAgZWxpZiBzZWxmLnNvcnRfbW9kZSA9PSAnZXh0JzoK
ICAgICAgICAgICAgZGVmIGdldF9leHQoaXRlbSk6CiAgICAgICAgICAgICAgICBuYW1lID0gaXRl
bS5nZXQoJ25hbWUnLCBpdGVtLmdldCgna2V5JywgJycpKQogICAgICAgICAgICAgICAgaWYgJy4n
IGluIG5hbWU6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWUucnNwbGl0KCcuJywgMSlb
MV0ubG93ZXIoKQogICAgICAgICAgICAgICAgcmV0dXJuICcnCgogICAgICAgICAgICBrZXlfZnVu
YyA9IGdldF9leHQKCiAgICAgICAgZWxpZiBzZWxmLnNvcnRfbW9kZSA9PSAnc2l6ZSc6CiAgICAg
ICAgICAgIGtleV9mdW5jID0gbGFtYmRhIHg6IHguZ2V0KCdzaXplJywgeC5nZXQoJ1NpemUnLCAw
KSkKICAgICAgICAgICAgIyDQn9C+INGD0LzQvtC70YfQsNC90LjRjiAocmV2ZXJzZT1GYWxzZSkg
c2l6ZSDRgdC+0YDRgtC40YDRg9C10YIg0L/QviDRg9Cx0YvQstCw0L3QuNGOICjQsdC+0LvRjNGI
0LjQtSDRgdCy0LXRgNGF0YMpPyAKICAgICAgICAgICAgIyDQntCx0YvRh9C90L4g0LIg0YTQsNC5
0Lst0LzQtdC90LXQtNC20LXRgNCw0YUgc2l6ZSBhc2MgPSDQvNCw0LvQtdC90YzQutC40LUg0YHQ
stC10YDRhdGDLgogICAgICAgICAgICAjINCU0LDQstCw0LnRgtC1INGB0LTQtdC70LDQtdC8INGB
0YLQsNC90LTQsNGA0YLQvdC+OiBGYWxzZSA9IGFzYyAoMC4uOSksIFRydWUgPSBkZXNjICg5Li4w
KQogICAgICAgICAgICAjINCd0J4g0LLRi9GI0LUg0LIg0LrQvtC00LUg0LHRi9C70L4gZmlsZXMu
c29ydCguLi4sIHJldmVyc2U9VHJ1ZSkg0LTQu9GPIHNpemUuCiAgICAgICAgICAgICMg0JfQvdCw
0YfQuNGCLCDQtdGB0LvQuCBzb3J0X3JldmVyc2Ug0LLQutC70Y7Rh9C10L0sINC80Ysg0LTQvtC7
0LbQvdGLINC00LXQu9Cw0YLRjCByZXZlcnNlPUZhbHNlLgogICAgICAgICAgICByZXZlcnNlX2Zp
bGVzID0gbm90IHNlbGYuc29ydF9yZXZlcnNlICAjINCY0L3QstC10YDRgtC40YDRg9C10Lwg0LvQ
vtCz0LjQutGDINC00LvRjyBzaXplL3RpbWUKCiAgICAgICAgZWxpZiBzZWxmLnNvcnRfbW9kZSA9
PSAndGltZSc6CiAgICAgICAgICAgIGtleV9mdW5jID0gbGFtYmRhIHg6IHguZ2V0KCdtdGltZScs
IHguZ2V0KCdMYXN0TW9kaWZpZWQnLCBkYXRldGltZS5taW4pKSBvciBkYXRldGltZS5taW4KICAg
ICAgICAgICAgIyDQkNC90LDQu9C+0LPQuNGH0L3QviBzaXplOiDQv9C+INGD0LzQvtC70YfQsNC9
0LjRjiDQvdC+0LLRi9C1INGB0LLQtdGA0YXRgyAoZGVzYyksIHJldmVyc2UgLT4g0YHRgtCw0YDR
i9C1INGB0LLQtdGA0YXRgyAoYXNjKQogICAgICAgICAgICByZXZlcnNlX2ZpbGVzID0gbm90IHNl
bGYuc29ydF9yZXZlcnNlCgogICAgICAgICMg0KHQvtGA0YLQuNGA0YPQtdC8INC/0LDQv9C60Lgg
KNCy0YHQtdCz0LTQsCDQv9C+INC40LzQtdC90LgpCiAgICAgICAgIyDQn9Cw0L/QutC4INGC0L7Q
ttC1INC80L7QttC90L4g0YDQtdCy0LXRgNGB0LjRgNC+0LLQsNGC0YwsINC10YHQu9C4INC/0L7Q
u9GM0LfQvtCy0LDRgtC10LvRjCDQstGL0LHRgNCw0LsgUmV2ZXJzZQogICAgICAgIGRpcnMuc29y
dChrZXk9bGFtYmRhIHg6IHguZ2V0KCduYW1lJywgJycpLmxvd2VyKCksIHJldmVyc2U9c2VsZi5z
b3J0X3JldmVyc2UpCgogICAgICAgIGlmIGtleV9mdW5jOgogICAgICAgICAgICBmaWxlcy5zb3J0
KGtleT1rZXlfZnVuYywgcmV2ZXJzZT1yZXZlcnNlX2ZpbGVzKQoKICAgICAgICAjINCU0LvRjyAn
bm9uZScg0LLQvtC30LLRgNCw0YnQsNC10Lwg0LrQsNC6INC10YHRgtGMCiAgICAgICAgaWYgc2Vs
Zi5zb3J0X21vZGUgPT0gJ25vbmUnOgogICAgICAgICAgICByZXR1cm4gaXRlbXMKCiAgICAgICAg
cmV0dXJuIGRpcnMgKyBmaWxlcwoKICAgIGRlZiBpc19yb290X21lbnUoc2VsZik6CiAgICAgICAg
cmV0dXJuIHNlbGYubW9kZSA9PSAncm9vdF9tZW51JwoKICAgIGRlZiBpc19lbmRwb2ludF9saXN0
KHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLm1vZGUgPT0gJ3MzJyBhbmQgc2VsZi5jdXJyZW50
X2VuZHBvaW50IGlzIE5vbmUKCiAgICBkZWYgaXNfYnVja2V0X2xpc3Qoc2VsZik6CiAgICAgICAg
cmV0dXJuIHNlbGYubW9kZSA9PSAnczMnIGFuZCBzZWxmLmN1cnJlbnRfZW5kcG9pbnQgaXMgbm90
IE5vbmUgYW5kIHNlbGYuY3VycmVudF9idWNrZXQgaXMgTm9uZQoKICAgIGRlZiBpc19mc19yb290
KHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLm1vZGUgPT0gJ2ZzJyBhbmQgc2VsZi5mc19icm93
c2VyLmN1cnJlbnRfcGF0aCA9PSAnLycKCiAgICBkZWYgZ2V0X2N1cnJlbnRfcGF0aChzZWxmKToK
ICAgICAgICAiIiLQn9C+0LvRg9GH0LjRgtGMINGC0LXQutGD0YnQuNC5INC/0YPRgtGMINC00LvR
jyDQutC+0L/QuNGA0L7QstCw0L3QuNGPIiIiCiAgICAgICAgaWYgc2VsZi5tb2RlID09ICdzMyc6
CiAgICAgICAgICAgIGlmIHNlbGYuY3VycmVudF9idWNrZXQ6CiAgICAgICAgICAgICAgICByZXR1
cm4gc2VsZi5jdXJyZW50X3ByZWZpeCBpZiBzZWxmLmN1cnJlbnRfcHJlZml4IGVsc2UgJycKICAg
ICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiAnJwogICAgICAgIGVsaWYgc2Vs
Zi5tb2RlID09ICdmcyc6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmZzX2Jyb3dzZXIuY3VycmVu
dF9wYXRoCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuICcnCgogICAgZGVmIHVwZGF0
ZV9oZWFkZXIoc2VsZiwgaW5mbyk6CiAgICAgICAgaWYgaW5mbzoKICAgICAgICAgICAgc2VsZi5s
aW5lYm94LnNldF90aXRsZShmIntzZWxmLnRpdGxlfSB7aW5mb30iKQogICAgICAgIGVsc2U6CiAg
ICAgICAgICAgIHNlbGYubGluZWJveC5zZXRfdGl0bGUoc2VsZi50aXRsZSkKCiAgICBkZWYgc2V0
X2ZvY3VzX29uX2l0ZW0oc2VsZiwgaXRlbV9uYW1lKToKICAgICAgICBmb3IgaWR4LCB3aWRnZXQg
aW4gZW51bWVyYXRlKHNlbGYud2Fsa2VyKToKICAgICAgICAgICAgdyA9IHdpZGdldC5vcmlnaW5h
bF93aWRnZXQKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh3LCBTZWxlY3RhYmxlVGV4dCk6CiAg
ICAgICAgICAgICAgICBkYXRhID0gdy5kYXRhCiAgICAgICAgICAgICAgICBpZiBkYXRhLmdldCgn
bmFtZScpID09IGl0ZW1fbmFtZSBvciBkYXRhLmdldCgna2V5JywgJycpLnJzdHJpcCgnLycpLnNw
bGl0KCcvJylbLTFdID09IGl0ZW1fbmFtZToKICAgICAgICAgICAgICAgICAgICBzZWxmLmxpc3Ri
b3guc2V0X2ZvY3VzKGlkeCkKICAgICAgICAgICAgICAgICAgICByZXR1cm4KCiAgICBkZWYgX3Jl
ZnJlc2hfcm9vdF9tZW51KHNlbGYpOgogICAgICAgIHNlbGYudXBkYXRlX2hlYWRlcignW1Jvb3Qg
TWVudV0nKQogICAgICAgIHNlbGYucGF0aF90ZXh0LnNldF90ZXh0KCdTZWxlY3Qgc291cmNlIHR5
cGU6JykKCiAgICAgICAgbGFiZWwgPSAnW0ZTXSBMb2NhbCBGaWxlIFN5c3RlbScKICAgICAgICBk
YXRhID0geyd0eXBlJzogJ3Jvb3RfZnMnLCAnY2FuX3NlbGVjdCc6IEZhbHNlfQogICAgICAgIHRl
eHQgPSBTZWxlY3RhYmxlVGV4dChmJyAge2xhYmVsfScsIGRhdGEsIHNlbGYpCiAgICAgICAgc2Vs
Zi53YWxrZXIuYXBwZW5kKHVyd2lkLkF0dHJNYXAodGV4dCwgTm9uZSwgZm9jdXNfbWFwPSdzZWxl
Y3RlZCcpKQoKICAgICAgICBzZWxmLndhbGtlci5hcHBlbmQodXJ3aWQuRGl2aWRlcigpKQoKICAg
ICAgICBlbmRwb2ludHMgPSBzZWxmLnMzX2NvbmZpZy5nZXRfZW5kcG9pbnRzKCkKICAgICAgICBm
b3IgZXAgaW4gZW5kcG9pbnRzOgogICAgICAgICAgICBsYWJlbCA9IGYnW1MzXSB7ZXBbIm5hbWUi
XTozNX0ge2VwWyJ1cmwiXX0nCiAgICAgICAgICAgIGRhdGEgPSB7J3R5cGUnOiAncm9vdF9lbmRw
b2ludCcsICduYW1lJzogZXBbJ25hbWUnXSwgJ2NvbmZpZyc6IGVwLCAnY2FuX3NlbGVjdCc6IEZh
bHNlfQogICAgICAgICAgICB0ZXh0ID0gU2VsZWN0YWJsZVRleHQoZicgIHtsYWJlbH0nLCBkYXRh
LCBzZWxmKQogICAgICAgICAgICBzZWxmLndhbGtlci5hcHBlbmQodXJ3aWQuQXR0ck1hcCh0ZXh0
LCBOb25lLCBmb2N1c19tYXA9J3NlbGVjdGVkJykpCgogICAgZGVmIHZpZXdfczNfZmlsZV92ZXJz
aW9uKHNlbGYsIGZpbGVfZGF0YSwgdmVyc2lvbl9kYXRhPU5vbmUsIGNsb3NlX2NhbGxiYWNrPU5v
bmUpOgogICAgICAgICIiItCf0YDQvtGB0LzQvtGC0YAgUzMg0YTQsNC50LvQsCDRgSDRg9C60LDQ
t9Cw0L3QvdC+0Lkg0LLQtdGA0YHQuNC10LkiIiIKICAgICAgICB2ZXJzaW9uX2lkID0gdmVyc2lv
bl9kYXRhLmdldCgnVmVyc2lvbklkJykgaWYgdmVyc2lvbl9kYXRhIGVsc2UgTm9uZQogICAgICAg
IGZpbGVuYW1lID0gZmlsZV9kYXRhWyduYW1lJ10KCiAgICAgICAgaWYgdmVyc2lvbl9pZDoKICAg
ICAgICAgICAgc2VsZi5hcHAuc2hvd19yZXN1bHQoZiJEb3dubG9hZGluZyB7ZmlsZW5hbWV9ICh2
ZXJzaW9uIHt2ZXJzaW9uX2lkWzo4XX0pLi4uIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBz
ZWxmLmFwcC5zaG93X3Jlc3VsdChmIkRvd25sb2FkaW5nIHtmaWxlbmFtZX0uLi4iKQoKICAgICAg
ICB3aXRoIHRlbXBmaWxlLk5hbWVkVGVtcG9yYXJ5RmlsZShkZWxldGU9RmFsc2UpIGFzIHRtcDoK
ICAgICAgICAgICAgdG1wcGF0aCA9IHRtcC5uYW1lCgogICAgICAgICAgICBpZiBzZWxmLnMzX21h
bmFnZXIuZG93bmxvYWRfb2JqZWN0KAogICAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudF9i
dWNrZXQsCiAgICAgICAgICAgICAgICAgICAgZmlsZV9kYXRhWydrZXknXSwKICAgICAgICAgICAg
ICAgICAgICB0bXBwYXRoLAogICAgICAgICAgICAgICAgICAgIHZlcnNpb25faWQ9dmVyc2lvbl9p
ZCk6CiAgICAgICAgICAgICAgICBzZWxmLl92aWV3X2ZpbGUodG1wcGF0aCwgZmlsZW5hbWUsIGNs
b3NlX2NhbGxiYWNrPWNsb3NlX2NhbGxiYWNrKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAg
ICAgICAgICAgICAgIG9zLnVubGluayh0bXBwYXRoKQogICAgICAgICAgICAgICAgZXhjZXB0Ogog
ICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
IHNlbGYuYXBwLnNob3dfcmVzdWx0KGYiRmFpbGVkIHRvIGRvd25sb2FkIHtmaWxlbmFtZX0iKQoK
ICAgIGRlZiBzaG93X3ZlcnNpb25fc2VsZWN0X2RpYWxvZyhzZWxmLCBmaWxlX2RhdGEsIHJlZnJl
c2hfb25fZXhpdD1GYWxzZSk6CiAgICAgICAgIyDQn9C+0LvRg9GH0LDQtdC8INCw0LrRgtGD0LDQ
u9GM0L3Ri9C1INCy0LXRgNGB0LjQuAogICAgICAgIHZlcnNpb25zID0gc2VsZi5zM19tYW5hZ2Vy
Lmxpc3Rfb2JqZWN0X3ZlcnNpb25zKHNlbGYuY3VycmVudF9idWNrZXQsIGZpbGVfZGF0YVsna2V5
J10pCgogICAgICAgICMg0JXRgdC70Lgg0LLQtdGA0YHQuNC5INC90LXRgiAo0L3QsNC/0YDQuNC8
0LXRgCwg0L/QtdGA0LXQvNC10YHRgtC40LvQuCDQv9C+0YHQu9C10LTQvdGO0Y4pLCDQvtCx0L3Q
vtCy0LvRj9C10Lwg0L/QsNC90LXQu9GMINC4INCy0YvRhdC+0LTQuNC8CiAgICAgICAgaWYgbm90
IHZlcnNpb25zOgogICAgICAgICAgICAjINCV0YHQu9C4INGC0YDQtdCx0L7QstCw0LvQvtGB0Ywg
0L7QsdC90L7QstC70LXQvdC40LUg0LjQu9C4INCy0LXRgNGB0LjQuSDRgdC+0LLRgdC10Lwg0L3Q
tdGCIC0+INC+0LHQvdC+0LLQu9GP0LXQvCDQv9Cw0L3QtdC70YwKICAgICAgICAgICAgdHJ5Ogog
ICAgICAgICAgICAgICAgc2VsZi5yZXN0b3JlX2ZvY3VzX2luZGV4ID0gc2VsZi5saXN0Ym94LmZv
Y3VzX3Bvc2l0aW9uCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHBhc3MKICAg
ICAgICAgICAgc2VsZi5yZWZyZXNoKCkKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGRlZiBj
YWxsYmFjayhhY3Rpb24sIHZlcnNpb25fZGF0YSk6CiAgICAgICAgICAgIGlmIGFjdGlvbiA9PSAn
Y2FuY2VsJzoKICAgICAgICAgICAgICAgIHNlbGYuYXBwLmNsb3NlX2RpYWxvZygpCiAgICAgICAg
ICAgICAgICAjINCV0YHQu9C4INCx0YvQu9C4INC+0L/QtdGA0LDRhtC40Lgg0L/QtdGA0LXQvNC1
0YnQtdC90LjRjyAobW92ZSksINC+0LHQvdC+0LLQu9GP0LXQvCDQv9Cw0L3QtdC70Ywg0L/RgNC4
INCy0YvRhdC+0LTQtQogICAgICAgICAgICAgICAgaWYgcmVmcmVzaF9vbl9leGl0OgogICAgICAg
ICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXN0b3JlX2Zv
Y3VzX2luZGV4ID0gc2VsZi5saXN0Ym94LmZvY3VzX3Bvc2l0aW9uCiAgICAgICAgICAgICAgICAg
ICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgICAgICAg
ICAgc2VsZi5yZWZyZXNoKCkKICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAgICAgICAgaWYg
YWN0aW9uID09ICd2aWV3JyBhbmQgdmVyc2lvbl9kYXRhOgogICAgICAgICAgICAgICAgc2VsZi5h
cHAuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgICAgIHNlbGYudmlld19zM19maWxlX3ZlcnNp
b24oCiAgICAgICAgICAgICAgICAgICAgZmlsZV9kYXRhLAogICAgICAgICAgICAgICAgICAgIHZl
cnNpb25fZGF0YSwKICAgICAgICAgICAgICAgICAgICBjbG9zZV9jYWxsYmFjaz1sYW1iZGE6IHNl
bGYuc2hvd192ZXJzaW9uX3NlbGVjdF9kaWFsb2coZmlsZV9kYXRhLCByZWZyZXNoX29uX2V4aXQp
CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVsaWYgYWN0aW9uID09ICdkZWxldGUnIGFu
ZCB2ZXJzaW9uX2RhdGE6CiAgICAgICAgICAgICAgICBzZWxmLmFwcC5jbG9zZV9kaWFsb2coKQog
ICAgICAgICAgICAgICAgIyDQn9C10YDQtdC00LDQtdC8INGE0LvQsNCzLCDRh9GC0L4g0L7QsdC9
0L7QstC70LXQvdC40LUg0YPQttC1INC90YPQttC90L4gKNGC0LDQuiDQutCw0Log0YPQtNCw0LvQ
tdC90LjQtSDQvNC10L3Rj9C10YIg0LrQvtC7LdCy0L4pCiAgICAgICAgICAgICAgICBzZWxmLmNv
bmZpcm1fZGVsZXRlX3ZlcnNpb24oZmlsZV9kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHZlcnNpb25fZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICByZWZyZXNoX3BlbmRpbmc9VHJ1ZSkKCiAgICAgICAgICAgIGVs
aWYgYWN0aW9uID09ICdjb3B5JyBhbmQgdmVyc2lvbl9kYXRhOgogICAgICAgICAgICAgICAgc2Vs
Zi5hcHAuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgICAgICMg0JTQu9GPIENvcHkg0L7QsdC9
0L7QstC70LXQvdC40LUg0L/QsNC90LXQu9C4INC90LUg0YLRgNC10LHRg9C10YLRgdGPLCDQvdC+
INCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INGE0LvQsNCzINC60LDQuiDQsdGL0LsKICAgICAgICAgICAg
ICAgIHNlbGYuY29weV92ZXJzaW9uKGZpbGVfZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHZlcnNpb25fZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IG1vdmU9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaz1s
YW1iZGE6IHNlbGYuc2hvd192ZXJzaW9uX3NlbGVjdF9kaWFsb2coZmlsZV9kYXRhLCByZWZyZXNo
X29uX2V4aXQpKQoKICAgICAgICAgICAgZWxpZiBhY3Rpb24gPT0gJ21vdmUnIGFuZCB2ZXJzaW9u
X2RhdGE6CiAgICAgICAgICAgICAgICBzZWxmLmFwcC5jbG9zZV9kaWFsb2coKQogICAgICAgICAg
ICAgICAgIyDQlNC70Y8gTW92ZSDQvtCx0L3QvtCy0LvQtdC90LjQtSDQv9C+0YLRgNC10LHRg9C1
0YLRgdGPICjRhNC70LDQsyBUcnVlKQogICAgICAgICAgICAgICAgc2VsZi5jb3B5X3ZlcnNpb24o
ZmlsZV9kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbl9kYXRh
LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZT1UcnVlLAogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s9bGFtYmRhOiBzZWxmLnNob3dfdmVyc2lv
bl9zZWxlY3RfZGlhbG9nKGZpbGVfZGF0YSwgcmVmcmVzaF9vbl9leGl0KSkKCiAgICAgICAgZGlh
bG9nID0gVmVyc2lvblNlbGVjdERpYWxvZyhmaWxlX2RhdGEsIHZlcnNpb25zLCBjYWxsYmFjaykK
ICAgICAgICBzZWxmLmFwcC5zaG93X2RpYWxvZyhkaWFsb2csIGhlaWdodD01MCkKCiAgICBkZWYg
Y29uZmlybV9kZWxldGVfdmVyc2lvbihzZWxmLCBmaWxlX2RhdGEsIHZlcnNpb25fZGF0YSwgY2xv
c2VfY2FsbGJhY2s9Tm9uZSwgcmVmcmVzaF9wZW5kaW5nPUZhbHNlKToKICAgICAgICAiIiIKICAg
ICAgICDQn9C+0LrQsNC30YvQstCw0LXRgiDQtNC40LDQu9C+0LMg0L/QvtC00YLQstC10YDQttC0
0LXQvdC40Y8g0YPQtNCw0LvQtdC90LjRjyDQutC+0L3QutGA0LXRgtC90L7QuSDQstC10YDRgdC4
0Lgg0YTQsNC50LvQsC4KCiAgICAgICAg0JDRgNCz0YPQvNC10L3RgtGLOgogICAgICAgICAgICBm
aWxlX2RhdGEgKGRpY3QpOiDQlNCw0L3QvdGL0LUg0L4g0YTQsNC50LvQtSAo0LjQvNGPLCDQutC7
0Y7RhyDQuCDRgi7QtC4pLgogICAgICAgICAgICB2ZXJzaW9uX2RhdGEgKGRpY3QpOiDQlNCw0L3Q
vdGL0LUg0YPQtNCw0LvRj9C10LzQvtC5INCy0LXRgNGB0LjQuCAoSUQsINGA0LDQt9C80LXRgCwg
0LTQsNGC0LAg0LjQt9C80LXQvdC10L3QuNGPKS4KICAgICAgICAgICAgY2xvc2VfY2FsbGJhY2sg
KGNhbGxhYmxlLCBvcHRpb25hbCk6INCk0YPQvdC60YbQuNGPLCDQstGL0LfRi9Cy0LDQtdC80LDR
jyDQv9GA0Lgg0LfQsNC60YDRi9GC0LjQuCDQtNC40LDQu9C+0LPQsCAo0L3QtdC30LDQstC40YHQ
uNC80L4g0L7RgiDRgNC10LfRg9C70YzRgtCw0YLQsCkuCiAgICAgICAgICAgIHJlZnJlc2hfcGVu
ZGluZyAoYm9vbCk6INCk0LvQsNCzLCDRg9C60LDQt9GL0LLQsNGO0YnQuNC5LCDQvdGD0LbQvdC+
INC70Lgg0L7QsdC90L7QstC70Y/RgtGMINGB0L/QuNGB0L7QuiDQstC10YDRgdC40Lkg0L/RgNC4
INCy0L7Qt9Cy0YDQsNGC0LUg0LIg0L/RgNC10LTRi9C00YPRidC10LUg0LzQtdC90Y4uCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgINCf0LXRgNC10LTQsNC10YLRgdGPIFRydWUs
INC10YHQu9C4INCyINGB0LXRgdGB0LjQuCDQtNC40LDQu9C+0LPQsCDRg9C20LUg0LHRi9C70Lgg
0YPQtNCw0LvQtdC90Ysg0LTRgNGD0LPQuNC1INCy0LXRgNGB0LjQuC4KICAgICAgICAiIiIKICAg
ICAgICBkZWYgY29uZmlybV9jYWxsYmFjayhjb25maXJtZWQpOgogICAgICAgICAgICBzZWxmLmFw
cC5jbG9zZV9kaWFsb2coKQogICAgICAgICAgICBpZiBjb25maXJtZWQ6CiAgICAgICAgICAgICAg
ICB2ZXJzaW9uX2lkX2Z1bGwgPSB2ZXJzaW9uX2RhdGEuZ2V0KCdWZXJzaW9uSWQnKQogICAgICAg
ICAgICAgICAgaWYgc2VsZi5zM19tYW5hZ2VyLmRlbGV0ZV9vYmplY3QoCiAgICAgICAgICAgICAg
ICAgICAgICAgIHNlbGYuY3VycmVudF9idWNrZXQsCiAgICAgICAgICAgICAgICAgICAgICAgIGZp
bGVfZGF0YVsna2V5J10sCiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25faWQ9dmVyc2lv
bl9pZF9mdWxsCiAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgIHNlbGYuYXBw
LnNob3dfcmVzdWx0KGYiVmVyc2lvbiB7dmVyc2lvbl9kYXRhLmdldCgnVmVyc2lvbklkJylbOjhd
fSBkZWxldGVkIHN1Y2Nlc3NmdWxseSIpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KGYiRmFpbGVkIHRvIGRlbGV0ZSB2ZXJzaW9u
IikKICAgICAgICAgICAgICAgICMg0JLRgdC10LPQtNCwINCy0L7Qt9Cy0YDQsNGJ0LDQtdC80YHR
jyDQsiDQtNC40LDQu9C+0LMsINGB0YLQsNCy0LjQvCByZWZyZXNoX29uX2V4aXQ9VHJ1ZSDRgi7Q
ui4g0YPQtNCw0LvQuNC70LgKICAgICAgICAgICAgICAgIHNlbGYuc2hvd192ZXJzaW9uX3NlbGVj
dF9kaWFsb2coZmlsZV9kYXRhLCByZWZyZXNoX29uX2V4aXQ9VHJ1ZSkKICAgICAgICAgICAgZWxz
ZToKICAgICAgICAgICAgICAgICMg0JLQvtC30LLRgNCw0YnQsNC10LzRgdGPINCyINC00LjQsNC7
0L7Qsywg0YHQvtGF0YDQsNC90Y/RjyDRgdGC0LDRgtGD0YEg0L3QtdC+0LHRhdC+0LTQuNC80L7R
gdGC0Lgg0L7QsdC90L7QstC70LXQvdC40Y8gKNC10YHQu9C4INCx0YvQuyDQtNC+INGN0YLQvtCz
0L4pCiAgICAgICAgICAgICAgICBzZWxmLnNob3dfdmVyc2lvbl9zZWxlY3RfZGlhbG9nKGZpbGVf
ZGF0YSwgcmVmcmVzaF9vbl9leGl0PXJlZnJlc2hfcGVuZGluZykKCiAgICAgICAgdmVyc2lvbl9p
ZCA9IHZlcnNpb25fZGF0YS5nZXQoJ1ZlcnNpb25JZCcsICcnKVs6MTJdCiAgICAgICAgaXNfbGF0
ZXN0ID0gdmVyc2lvbl9kYXRhLmdldCgnSXNMYXRlc3QnLCBGYWxzZSkKICAgICAgICBsYXRlc3Rf
d2FybiA9ICIgW1RISVMgSVMgVEhFIExBVEVTVCBWRVJTSU9OIV0iIGlmIGlzX2xhdGVzdCBlbHNl
ICIiCiAgICAgICAgc2l6ZSA9IHNlbGYuZm9ybWF0X3NpemUodmVyc2lvbl9kYXRhLmdldCgnU2l6
ZScsIDApKSAgIyBzZWxmLmZvcm1hdF9zaXplINC40YHQv9GA0LDQstC40LsKICAgICAgICBtdGlt
ZSA9IHZlcnNpb25fZGF0YS5nZXQoJ0xhc3RNb2RpZmllZCcsICcnKS5zdHJmdGltZSgnJVktJW0t
JWQgJUg6JU06JVMnKSBpZiB2ZXJzaW9uX2RhdGEuZ2V0KAogICAgICAgICAgICAnTGFzdE1vZGlm
aWVkJykgZWxzZSAnTi9BJwoKICAgICAgICBtZXNzYWdlID0gZiJEZWxldGUgdmVyc2lvbiBvZiAn
e2ZpbGVfZGF0YVsnbmFtZSddfSc/e2xhdGVzdF93YXJufSIKICAgICAgICBpdGVtc19pbmZvID0g
WwogICAgICAgICAgICBmIlZlcnNpb24gSUQ6IHt2ZXJzaW9uX2lkfSIsCiAgICAgICAgICAgIGYi
U2l6ZToge3NpemV9IiwKICAgICAgICAgICAgZiJNb2RpZmllZDoge210aW1lfSIKICAgICAgICBd
CiAgICAgICAgZGlhbG9nID0gQ29uZmlybURpYWxvZygiQ29uZmlybSBEZWxldGUgVmVyc2lvbiIs
IG1lc3NhZ2UsIGl0ZW1zX2luZm8sIGNvbmZpcm1fY2FsbGJhY2spCiAgICAgICAgc2VsZi5hcHAu
c2hvd19kaWFsb2coZGlhbG9nKQoKICAgIGRlZiBfcmVmcmVzaF9lbmRwb2ludHMoc2VsZik6CiAg
ICAgICAgc2VsZi51cGRhdGVfaGVhZGVyKCdbUzMgTW9kZSAtIEVuZHBvaW50c10nKQogICAgICAg
IHNlbGYucGF0aF90ZXh0LnNldF90ZXh0KCdTMzogLycpCgogICAgICAgIGRhdGEgPSB7J3R5cGUn
OiAndG9fcm9vdF9tZW51JywgJ2Nhbl9zZWxlY3QnOiBGYWxzZX0KICAgICAgICB0ZXh0ID0gU2Vs
ZWN0YWJsZVRleHQoJyAgWy4uXSBCYWNrIHRvIHJvb3QgbWVudScsIGRhdGEsIHNlbGYpCiAgICAg
ICAgc2VsZi53YWxrZXIuYXBwZW5kKHVyd2lkLkF0dHJNYXAodGV4dCwgTm9uZSwgZm9jdXNfbWFw
PSdzZWxlY3RlZCcpKQoKICAgICAgICBlbmRwb2ludHMgPSBzZWxmLnMzX2NvbmZpZy5nZXRfZW5k
cG9pbnRzKCkKCiAgICAgICAgZm9yIGVwIGluIGVuZHBvaW50czoKICAgICAgICAgICAgbGFiZWwg
PSBmJ1tFTkRQT0lOVF0ge2VwWyJuYW1lIl06MzV9IHtlcFsidXJsIl19JwogICAgICAgICAgICBk
YXRhID0geyd0eXBlJzogJ2VuZHBvaW50JywgJ25hbWUnOiBlcFsnbmFtZSddLCAnY29uZmlnJzog
ZXAsICdjYW5fc2VsZWN0JzogRmFsc2V9CiAgICAgICAgICAgIHRleHQgPSBTZWxlY3RhYmxlVGV4
dChmJyAge2xhYmVsfScsIGRhdGEsIHNlbGYpCiAgICAgICAgICAgIHNlbGYud2Fsa2VyLmFwcGVu
ZCh1cndpZC5BdHRyTWFwKHRleHQsIE5vbmUsIGZvY3VzX21hcD0nc2VsZWN0ZWQnKSkKCiAgICBk
ZWYgX3JlZnJlc2hfczNfb2JqZWN0c19sYXp5KHNlbGYpOgogICAgICAgICIiItCb0LXQvdC40LLQ
sNGPINC30LDQs9GA0YPQt9C60LAg0L7QsdGK0LXQutGC0L7QsiBTMyDRgSDQv9C+0YHRgtC10L/Q
tdC90L3Ri9C8INC+0YLQvtCx0YDQsNC20LXQvdC40LXQvCIiIgogICAgICAgIHByZWZpeCA9IHNl
bGYuY3VycmVudF9wcmVmaXgKCiAgICAgICAgIyDQktCQ0JbQndCeOiDQn9GA0LjQvdGD0LTQuNGC
0LXQu9GM0L3QsNGPINC/0LXRgNC10YDQuNGB0L7QstC60LAKICAgICAgICBpZiBoYXNhdHRyKHNl
bGYuYXBwLCAnbG9vcCcpIGFuZCBzZWxmLmFwcC5sb29wOgogICAgICAgICAgICBzZWxmLmFwcC5s
b29wLmRyYXdfc2NyZWVuKCkKCiAgICAgICAgIyDQl9Cw0L/Rg9GB0LrQsNC10Lwg0YTQvtC90L7Q
stGD0Y4g0LfQsNCz0YDRg9C30LrRgwogICAgICAgIGlmIHNlbGYubG9hZGluZ190aHJlYWQgYW5k
IHNlbGYubG9hZGluZ190aHJlYWQuaXNfYWxpdmUoKToKICAgICAgICAgICAgcmV0dXJuCgogICAg
ICAgIHNlbGYubG9hZGluZ19pbl9wcm9ncmVzcyA9IFRydWUKICAgICAgICBzZWxmLmxvYWRpbmdf
dGhyZWFkID0gdGhyZWFkaW5nLlRocmVhZCgKICAgICAgICAgICAgdGFyZ2V0PXNlbGYubG9hZF9z
M19vYmplY3RzX2JhY2tncm91bmQsCiAgICAgICAgICAgIGFyZ3M9KHNlbGYuY3VycmVudF9idWNr
ZXQsIHByZWZpeCksCiAgICAgICAgICAgIGRhZW1vbj1UcnVlCiAgICAgICAgKQogICAgICAgIHNl
bGYubG9hZGluZ190aHJlYWQuc3RhcnQoKQoKICAgIGRlZiBsb2FkX3MzX29iamVjdHNfYmFja2dy
b3VuZChzZWxmLCBidWNrZXRfbmFtZSwgcHJlZml4KToKICAgICAgICAiIiLQpNC+0L3QvtCy0LDR
jyDQt9Cw0LPRgNGD0LfQutCwINC+0LHRitC10LrRgtC+0LIg0YEg0L7QsdC90L7QstC70LXQvdC4
0LXQvCDRgdGC0LDRgtGD0YHQvdC+0Lkg0YHRgtGA0L7QutC4IiIiCiAgICAgICAgdHJ5OgogICAg
ICAgICAgICAjINCh0YDQsNC30YMg0L/QvtC60LDQt9GL0LLQsNC10Lwg0YHRgtCw0YLRg9GBCiAg
ICAgICAgICAgIHNlbGYuYXBwLmxvb3Auc2V0X2FsYXJtX2luKDAsIGxhbWJkYSBsLCB1OiBzZWxm
LmFwcC5zaG93X3Jlc3VsdCgiTG9hZGluZy4uLiIpKQogICAgICAgICAgICBzZWxmLmFwcC53YWtl
dXAoKQoKICAgICAgICAgICAgdXNlX3ZlcnNpb25pbmcgPSBGYWxzZQogICAgICAgICAgICBpZiBz
ZWxmLnMzX21hbmFnZXI6CiAgICAgICAgICAgICAgICBzdGF0dXMgPSBzZWxmLnMzX21hbmFnZXIu
Z2V0X3ZlcnNpb25pbmdfc3RhdHVzX2NhY2hlZChidWNrZXRfbmFtZSkKICAgICAgICAgICAgICAg
IHVzZV92ZXJzaW9uaW5nID0gc3RhdHVzIGluIFsnRW5hYmxlZCcsICdTdXNwZW5kZWQnXQoKICAg
ICAgICAgICAgYWxsX2ZvbGRlcnMgPSBbXQogICAgICAgICAgICBhbGxfZmlsZXMgPSBbXQoKICAg
ICAgICAgICAgZm9yIGZvbGRlcnMsIGZpbGVzIGluIHNlbGYuczNfbWFuYWdlci5saXN0X29iamVj
dHNfbGF6eShidWNrZXRfbmFtZSwgcHJlZml4LCBwYWdlX3NpemU9MTAwMCwKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1
c2VfdmVyc2lvbmluZz11c2VfdmVyc2lvbmluZyk6CiAgICAgICAgICAgICAgICBhbGxfZm9sZGVy
cy5leHRlbmQoZm9sZGVycykKICAgICAgICAgICAgICAgIGFsbF9maWxlcy5leHRlbmQoZmlsZXMp
CgogICAgICAgICAgICAgICAgY3VycmVudF9mb2xkZXJzID0gbGlzdChhbGxfZm9sZGVycykKICAg
ICAgICAgICAgICAgIGN1cnJlbnRfZmlsZXMgPSBsaXN0KGFsbF9maWxlcykKCiAgICAgICAgICAg
ICAgICAjINCe0LHQvdC+0LLQu9GP0LXQvCDRgdC/0LjRgdC+0Log0YTQsNC50LvQvtCyCiAgICAg
ICAgICAgICAgICBzZWxmLmFwcC5sb29wLnNldF9hbGFybV9pbigwLCBsYW1iZGEgbCwgdTogc2Vs
Zi5fdXBkYXRlX2Rpc3BsYXlfaW5jcmVtZW50YWwoY3VycmVudF9mb2xkZXJzLAogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfZmlsZXMpKQoKICAgICAgICAgICAgICAg
ICMg0J7QsdC90L7QstC70Y/QtdC8INGB0YLQsNGC0YPRgdC90YPRjiDRgdGC0YDQvtC60YM6INCW
0LXQu9GC0YvQuSDQvdCwINGB0LjQvdC10LwgKNGB0YLQuNC70YwgJ3Jlc3VsdCcg0LIgRHVhbFBh
bmVBcHApCiAgICAgICAgICAgICAgICBjb3VudF9tc2cgPSBmIkxvYWRpbmcuLi4ge2xlbihhbGxf
Zm9sZGVycykgKyBsZW4oYWxsX2ZpbGVzKX0gaXRlbXMiCiAgICAgICAgICAgICAgICBzZWxmLmFw
cC5sb29wLnNldF9hbGFybV9pbigwLCBsYW1iZGEgbCwgdSwgbXNnPWNvdW50X21zZzogc2VsZi5h
cHAuc2hvd19yZXN1bHQobXNnKSkKCiAgICAgICAgICAgICAgICBzZWxmLmFwcC53YWtldXAoKQoK
ICAgICAgICAgICAgIyDQpNC40L3QsNC70YzQvdC+0LUg0L7QsdC90L7QstC70LXQvdC40LUKICAg
ICAgICAgICAgc2VsZi5hcHAubG9vcC5zZXRfYWxhcm1faW4oMCwgbGFtYmRhIGwsIHU6IHNlbGYu
X2ZpbmFsaXplX2xvYWRpbmcoYWxsX2ZvbGRlcnMsIGFsbF9maWxlcykpCiAgICAgICAgICAgIHNl
bGYuYXBwLndha2V1cCgpCgogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAg
ICAgZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHNlbGYuYXBwLmxvb3Auc2V0X2FsYXJt
X2luKDAsIGxhbWJkYSBsLCB1LCBlcnI9ZXJyb3JfbXNnOgogICAgICAgICAgICBzZWxmLmFwcC5z
aG93X3Jlc3VsdChmIkVycm9yIGxvYWRpbmcgb2JqZWN0czoge2Vycn0iLCBpc19lcnJvcj1UcnVl
KSkKICAgICAgICAgICAgc2VsZi5hcHAud2FrZXVwKCkKICAgICAgICBmaW5hbGx5OgogICAgICAg
ICAgICBzZWxmLmxvYWRpbmdfaW5fcHJvZ3Jlc3MgPSBGYWxzZQoKICAgIGRlZiBfdXBkYXRlX2Rp
c3BsYXlfaW5jcmVtZW50YWwoc2VsZiwgZm9sZGVycywgZmlsZXMpOgogICAgICAgICIiItCY0L3Q
utGA0LXQvNC10L3RgtCw0LvRjNC90L7QtSDQvtCx0L3QvtCy0LvQtdC90LjQtSAo0LHQtdC3INCy
0LjQtNC20LXRgtCwIGxvYWRpbmcg0LIg0YHQv9C40YHQutC1KSIiIgogICAgICAgICMg0KHQvtC3
0LTQsNC10Lwg0Y3Qu9C10LzQtdC90YLRiyAo0LHQtdC3INGB0L7RgNGC0LjRgNC+0LLQutC4INC0
0LvRjyDRgdC60L7RgNC+0YHRgtC4INCy0L4g0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4KQog
ICAgICAgICMg0KHQvtGA0YLQuNGA0L7QstC60LAg0LHRg9C00LXRgiDQv9GA0LjQvNC10L3QtdC9
0LAg0YLQvtC70YzQutC+INCyINC60L7QvdGG0LUsINCyIGZpbmFsaXplCiAgICAgICAgaXRlbXMg
PSBzZWxmLl9jcmVhdGVfZGlzcGxheV9pdGVtcyhmb2xkZXJzLCBmaWxlcywgZG9fc29ydD1GYWxz
ZSkKCiAgICAgICAgIyDQodC+0YXRgNCw0L3Rj9C10Lwg0L3QsNCy0LjQs9Cw0YbQuNGOIChbLi5d
KQogICAgICAgIGtlZXBfY291bnQgPSAwCiAgICAgICAga2VlcF90eXBlcyA9IFsndG9fcm9vdF9t
ZW51JywgJ3BhcmVudCcsICdzM19wYXJlbnQnLCAnczNfYmFjayddCgogICAgICAgIGZvciB3aWRn
ZXQgaW4gc2VsZi53YWxrZXI6CiAgICAgICAgICAgIHcgPSB3aWRnZXQub3JpZ2luYWxfd2lkZ2V0
IGlmIGlzaW5zdGFuY2Uod2lkZ2V0LCB1cndpZC5BdHRyTWFwKSBlbHNlIHdpZGdldAogICAgICAg
ICAgICBpZiBpc2luc3RhbmNlKHcsIFNlbGVjdGFibGVUZXh0KToKICAgICAgICAgICAgICAgIGlm
IHcuZGF0YS5nZXQoJ3R5cGUnKSBpbiBrZWVwX3R5cGVzOgogICAgICAgICAgICAgICAgICAgIGtl
ZXBfY291bnQgKz0gMQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBi
cmVhawoKICAgICAgICAjINCX0LDQvNC10L3Rj9C10Lwg0YHRgtCw0YDRi9C1INGE0LDQudC70Ysg
0L3QvtCy0YvQvNC4CiAgICAgICAgZGVsIHNlbGYud2Fsa2VyW2tlZXBfY291bnQ6XQogICAgICAg
IGZvciBpdGVtX3dpZGdldCBpbiBpdGVtczoKICAgICAgICAgICAgc2VsZi53YWxrZXIuYXBwZW5k
KGl0ZW1fd2lkZ2V0KQoKICAgICAgICAjINCS0L7RgdGB0YLQsNC90LDQstC70LjQstCw0LXQvCDR
hNC+0LrRg9GBCiAgICAgICAgaWYgbGVuKHNlbGYud2Fsa2VyKSA+IDA6CiAgICAgICAgICAgIHRy
eToKICAgICAgICAgICAgICAgICMg0KTQvtC60YPRgSDQvdCwINC/0LXRgNCy0YvQuSDRjdC70LXQ
vNC10L3RgiDQv9C+0YHQu9C1IFsuLl0KICAgICAgICAgICAgICAgIGZvY3VzX3BvcyA9IG1pbihr
ZWVwX2NvdW50LCBsZW4oc2VsZi53YWxrZXIpIC0gMSkKICAgICAgICAgICAgICAgICMg0JXRgdC7
0Lgg0LrRg9GA0YHQvtGAINGD0LbQtSDQsdGL0Lsg0L3QuNC20LUsINC/0YvRgtCw0LXQvNGB0Y8g
0YHQvtGF0YDQsNC90LjRgtGMINC/0L7Qt9C40YbQuNGOICjQvtC/0YbQuNC+0L3QsNC70YzQvdC+
LCDQvdC+INGB0LvQvtC20L3QviDQv9GA0Lgg0LjQvdC60YDQtdC80LXQvdGC0LUpCiAgICAgICAg
ICAgICAgICBzZWxmLmxpc3Rib3guc2V0X2ZvY3VzKGZvY3VzX3BvcykKICAgICAgICAgICAgZXhj
ZXB0OgogICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICBpZiBzZWxmLmFwcCBhbmQgaGFzYXR0
cihzZWxmLmFwcCwgJ2xvb3AnKSBhbmQgc2VsZi5hcHAubG9vcDoKICAgICAgICAgICAgc2VsZi5h
cHAubG9vcC5kcmF3X3NjcmVlbigpCgogICAgZGVmIF9maW5hbGl6ZV9sb2FkaW5nKHNlbGYsIGZv
bGRlcnMsIGZpbGVzKToKICAgICAgICAiIiLQl9Cw0LLQtdGA0YjQtdC90LjQtSDQt9Cw0LPRgNGD
0LfQutC4IiIiCiAgICAgICAgc2VsZi5sb2FkaW5nX2luX3Byb2dyZXNzID0gRmFsc2UKCiAgICAg
ICAgIyDQpNC40L3QsNC70YzQvdCw0Y8g0L/QtdGA0LXRgdGC0YDQvtC50LrQsCDRgdC/0LjRgdC6
0LAuIAogICAgICAgICMg0JXRgdC70Lggc29ydF9tb2RlINC30LDQtNCw0L0gKNC90LDQv9GA0LjQ
vNC10YAgJ3NpemUnKSwg0LfQtNC10YHRjCDQv9GA0L7QuNC30L7QudC00LXRgiDRgdC+0YDRgtC4
0YDQvtCy0LrQsC4KICAgICAgICBpZiBzZWxmLnNvcnRfbW9kZSAhPSAnbm9uZSc6CiAgICAgICAg
ICAgIGl0ZW1zID0gc2VsZi5fY3JlYXRlX2Rpc3BsYXlfaXRlbXMoZm9sZGVycywgZmlsZXMsIGRv
X3NvcnQ9VHJ1ZSkKCiAgICAgICAgICAgIGtlZXBfY291bnQgPSAwCiAgICAgICAgICAgIGtlZXBf
dHlwZXMgPSBbJ3RvX3Jvb3RfbWVudScsICdwYXJlbnQnLCAnczNfcGFyZW50JywgJ3MzX2JhY2sn
XQogICAgICAgICAgICBmb3Igd2lkZ2V0IGluIHNlbGYud2Fsa2VyOgogICAgICAgICAgICAgICAg
dyA9IHdpZGdldC5vcmlnaW5hbF93aWRnZXQgaWYgaXNpbnN0YW5jZSh3aWRnZXQsIHVyd2lkLkF0
dHJNYXApIGVsc2Ugd2lkZ2V0CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHcsIFNlbGVj
dGFibGVUZXh0KToKICAgICAgICAgICAgICAgICAgICBpZiB3LmRhdGEuZ2V0KCd0eXBlJykgaW4g
a2VlcF90eXBlczoKICAgICAgICAgICAgICAgICAgICAgICAga2VlcF9jb3VudCArPSAxCiAgICAg
ICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAg
ICAgICAgIGRlbCBzZWxmLndhbGtlcltrZWVwX2NvdW50Ol0KICAgICAgICAgICAgZm9yIGl0ZW1f
d2lkZ2V0IGluIGl0ZW1zOgogICAgICAgICAgICAgICAgc2VsZi53YWxrZXIuYXBwZW5kKGl0ZW1f
d2lkZ2V0KQoKICAgICAgICAjINCe0LHQvdC+0LLQu9GP0LXQvCDRgdGC0LDRgtGD0YHQvdGD0Y4g
0YHRgtGA0L7QutGDINGE0LjQvdCw0LvRjNC90YvQvCDRgdC+0L7QsdGJ0LXQvdC40LXQvAogICAg
ICAgIHNvcnRfaW5mbyA9IGYiKHNvcnRlZCBieSB7c2VsZi5zb3J0X21vZGV9KSIgaWYgc2VsZi5z
b3J0X21vZGUgIT0gJ25vbmUnIGVsc2UgIih1bnNvcnRlZCkiCiAgICAgICAgbXNnID0gZiJMb2Fk
ZWQ6IHtsZW4oZm9sZGVycyl9IGZvbGRlcnMsIHtsZW4oZmlsZXMpfSBmaWxlcyB7c29ydF9pbmZv
fSIKICAgICAgICBzZWxmLmFwcC5zaG93X3Jlc3VsdChtc2cpCgogICAgICAgIGlmIGxlbihzZWxm
LndhbGtlcikgPiAwOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAjIC0tLSDQndCe
0JLQkNCvINCb0J7Qk9CY0JrQkCDQpNCe0JrQo9Ch0JjQoNCe0JLQmtCYIC0tLQogICAgICAgICAg
ICAgICAgIyAxLiDQodC90LDRh9Cw0LvQsCDQv9GA0L7QstC10YDRj9C10LwsINC10YHRgtGMINC7
0Lgg0LfQsNC/0YDQvtGBINC90LAg0YTQvtC60YPRgSDQv9C+INC40LzQtdC90LggKNC00LvRjyDQ
vdCw0LLQuNCz0LDRhtC40LggIi4uIikKICAgICAgICAgICAgICAgIGZvY3VzX3NldCA9IEZhbHNl
CiAgICAgICAgICAgICAgICB0YXJnZXRfbmFtZSA9IGdldGF0dHIoc2VsZiwgJ19wZW5kaW5nX2Zv
Y3VzX25hbWUnLCBOb25lKQoKICAgICAgICAgICAgICAgIGlmIHRhcmdldF9uYW1lOgogICAgICAg
ICAgICAgICAgICAgIGZvciBpLCB3aWRnZXQgaW4gZW51bWVyYXRlKHNlbGYud2Fsa2VyKToKICAg
ICAgICAgICAgICAgICAgICAgICAgdyA9IHdpZGdldC5vcmlnaW5hbF93aWRnZXQgaWYgaXNpbnN0
YW5jZSh3aWRnZXQsIHVyd2lkLkF0dHJNYXApIGVsc2Ugd2lkZ2V0CiAgICAgICAgICAgICAgICAg
ICAgICAgIGlmIGlzaW5zdGFuY2UodywgU2VsZWN0YWJsZVRleHQpOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIyDQn9GA0L7QstC10YDRj9C10Lwg0YHQvtCy0L/QsNC00LXQvdC40LUg0LjQ
vNC10L3QuC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICMg0KMg0L/QsNC/0L7QuiBTMyDQ
uNC80Y8g0LzQvtC20LXRgiDQsdGL0YLRjCDQsdC10Lcg0YHQu9GN0YjQsCDQsiDQtNCw0L3QvdGL
0YUsINC90L4g0YEg0L3QuNC8INCyIEtleQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYg
dy5kYXRhLmdldCgnbmFtZScpID09IHRhcmdldF9uYW1lOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHNlbGYubGlzdGJveC5zZXRfZm9jdXMoaSkKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBmb2N1c19zZXQgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAjINCh0LHRgNCw0YHRi9Cy0LDQtdC8IHBlbmRp
bmcgbmFtZQogICAgICAgICAgICAgICAgICAgIHNlbGYuX3BlbmRpbmdfZm9jdXNfbmFtZSA9IE5v
bmUKCiAgICAgICAgICAgICAgICAjIDIuINCV0YHQu9C4INGE0L7QutGD0YEg0L/QviDQuNC80LXQ
vdC4INC90LUg0YPRgdGC0LDQvdC+0LLQu9C10L0sINC/0YDQvtCx0YPQtdC8INC/0L4g0LjQvdC0
0LXQutGB0YMKICAgICAgICAgICAgICAgIGlmIG5vdCBmb2N1c19zZXQgYW5kIHNlbGYucmVzdG9y
ZV9mb2N1c19pbmRleCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBuZXdfaWR4ID0g
bWluKHNlbGYucmVzdG9yZV9mb2N1c19pbmRleCwgbGVuKHNlbGYud2Fsa2VyKSAtIDEpCiAgICAg
ICAgICAgICAgICAgICAgc2VsZi5saXN0Ym94LnNldF9mb2N1cyhuZXdfaWR4KQogICAgICAgICAg
ICAgICAgICAgIHNlbGYucmVzdG9yZV9mb2N1c19pbmRleCA9IE5vbmUKICAgICAgICAgICAgICAg
ICAgICBmb2N1c19zZXQgPSBUcnVlCgogICAgICAgICAgICAgICAgIyAzLiDQldGB0LvQuCDQvdC4
0YfQtdCz0L4g0L3QtSDQt9Cw0LTQsNC90L4sINGB0YLQsNCy0LjQvCDQvdCwIDAgKNC90L4g0LDQ
utC60YPRgNCw0YLQvdC+LCDRh9GC0L7QsdGLINC90LUg0YHQsdC40YLRjCwg0LXRgdC70Lgg0YPQ
ttC1INGB0YLQvtC40YIpCiAgICAgICAgICAgICAgICBpZiBub3QgZm9jdXNfc2V0OgogICAgICAg
ICAgICAgICAgICAgICMg0JXRgdC70Lgg0LjQvdC00LXQutGBINC90LUg0LHRi9C7INGD0YHRgtCw
0L3QvtCy0LvQtdC9INGP0LLQvdC+LCBMaXN0Qm94INC80L7QttC10YIg0YHQsNC8INC00LXRgNC2
0LDRgtGMINGB0YLQsNGA0YvQuSDRhNC+0LrRg9GBICjQtdGB0LvQuCDRgdC/0LjRgdC+0Log0L3Q
tSDQv9C10YDQtdGB0L7Qt9C00LDQvSDQv9C+0LvQvdC+0YHRgtGM0Y4pCiAgICAgICAgICAgICAg
ICAgICAgIyDQndC+INC10YHQu9C4INC80Ysg0LTQtdC70LDQu9C4IGRlbC9hcHBlbmQsINGE0L7Q
utGD0YEg0LzQvtCzINGB0YrQtdGF0LDRgtGMLgogICAgICAgICAgICAgICAgICAgICMg0J7QsdGL
0YfQvdC+INC/0YDQuCDQstGF0L7QtNC1INCyINC90L7QstGD0Y4g0L/QsNC/0LrRgyDQvNGLINGF
0L7RgtC40LwgMCAo0LXRgdC70Lgg0Y3RgtC+INC90LUgcmVzdG9yZSkKICAgICAgICAgICAgICAg
ICAgICAjINCV0YHQu9C4IHJlc3RvcmVfZm9jdXNfaW5kZXgg0LHRi9C7IE5vbmUsINC30L3QsNGH
0LjRgiDRjdGC0L4g0LLRhdC+0LQg0LLQs9C70YPQsdGMIC0+IDAKICAgICAgICAgICAgICAgICAg
ICBzZWxmLmxpc3Rib3guc2V0X2ZvY3VzKDApCgogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9u
IGFzIGU6CiAgICAgICAgICAgICAgICAjIHNlbGYuYXBwLnNob3dfcmVzdWx0KGYiRm9jdXMgZXJy
b3I6IHtlfSIsICJlcnJvciIpICMg0LTQu9GPINC+0YLQu9Cw0LTQutC4CiAgICAgICAgICAgICAg
ICBwYXNzCgogICAgICAgIGlmIHNlbGYuYXBwIGFuZCBoYXNhdHRyKHNlbGYuYXBwLCAnbG9vcCcp
IGFuZCBzZWxmLmFwcC5sb29wOgogICAgICAgICAgICBzZWxmLmFwcC5sb29wLmRyYXdfc2NyZWVu
KCkKCiAgICBkZWYgX2NyZWF0ZV9kaXNwbGF5X2l0ZW1zKHNlbGYsIGZvbGRlcnMsIGZpbGVzLCBk
b19zb3J0PVRydWUpOgogICAgICAgICIiItCh0L7Qt9C00LDRgtGMINCy0LjQtNC20LXRgtGLINC0
0LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC/0LDQv9C+0Log0Lgg0YTQsNC50LvQvtCyIFMz
IiIiCiAgICAgICAgaXRlbXMgPSBbXQogICAgICAgIGNvbWJpbmVkID0gW10KCiAgICAgICAgIyDQ
n9GA0L7QstC10YDRj9C10Lwg0YHRgtCw0YLRg9GBINCy0LXRgNGB0LjQvtC90LjRgNC+0LLQsNC9
0LjRjyDQntCU0JjQnSDQoNCQ0Jcg0LTQu9GPINCx0LDQutC10YLQsAogICAgICAgICMgKNCe0YHR
gtCw0LLQu9GP0LXQvCDQtNC70Y8g0L/QtdGA0LXQtNCw0YfQuCDQsiDRgdCy0L7QudGB0YLQstCw
INGE0LDQudC70LAsINC10YHQu9C4INC/0L7QvdCw0LTQvtCx0LjRgtGB0Y8g0LvQvtCz0LjQutC1
LCDQvdC+INC90LUg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8pCiAgICAgICAgdmVyc2lv
bmluZ19lbmFibGVkX2J1Y2tldCA9IEZhbHNlCiAgICAgICAgaWYgc2VsZi5jdXJyZW50X2J1Y2tl
dCBhbmQgc2VsZi5zM19tYW5hZ2VyOgogICAgICAgICAgICB2cyA9IHNlbGYuczNfbWFuYWdlci5n
ZXRfdmVyc2lvbmluZ19zdGF0dXNfY2FjaGVkKHNlbGYuY3VycmVudF9idWNrZXQpCiAgICAgICAg
ICAgIHZlcnNpb25pbmdfZW5hYmxlZF9idWNrZXQgPSB2cyBpbiBbJ0VuYWJsZWQnLCAnU3VzcGVu
ZGVkJ10KCiAgICAgICAgIyDQn9C+0LTQs9C+0YLQvtCy0LrQsCDRgdC/0LjRgdC60LAg0L/QsNC/
0L7QugogICAgICAgIGZvciBmb2xkZXIgaW4gZm9sZGVyczoKICAgICAgICAgICAga2V5ID0gZm9s
ZGVyWydLZXknXQogICAgICAgICAgICBmb2xkZXJfbmFtZSA9IGtleS5yc3RyaXAoJy8nKS5zcGxp
dCgnLycpWy0xXQogICAgICAgICAgICBjb21iaW5lZC5hcHBlbmQoewogICAgICAgICAgICAgICAg
J3R5cGUnOiAnczNfZGlyJywKICAgICAgICAgICAgICAgICduYW1lJzogZm9sZGVyX25hbWUsCiAg
ICAgICAgICAgICAgICAna2V5Jzoga2V5LAogICAgICAgICAgICAgICAgJ3NpemUnOiAwLAogICAg
ICAgICAgICAgICAgJ210aW1lJzogTm9uZQogICAgICAgICAgICB9KQoKICAgICAgICAjINCf0L7Q
tNCz0L7RgtC+0LLQutCwINGB0L/QuNGB0LrQsCDRhNCw0LnQu9C+0LIKICAgICAgICBmb3IgZmls
ZSBpbiBmaWxlczoKICAgICAgICAgICAga2V5ID0gZmlsZVsnS2V5J10KICAgICAgICAgICAgZmls
ZV9uYW1lID0ga2V5LnNwbGl0KCcvJylbLTFdCgogICAgICAgICAgICAjINCf0L7Qu9GD0YfQsNC1
0Lwg0LrQvtC70LjRh9C10YHRgtCy0L4g0LLQtdGA0YHQuNC5ICjQtdGB0LvQuCDQvtC90L4g0LHR
i9C70L4g0L/QvtC00YHRh9C40YLQsNC90L4g0LIgbGlzdF9vYmplY3RzX2xhenkpCiAgICAgICAg
ICAgIHZfY291bnQgPSBmaWxlLmdldCgndmVyc2lvbl9jb3VudCcsIDEpCgogICAgICAgICAgICBj
b21iaW5lZC5hcHBlbmQoewogICAgICAgICAgICAgICAgJ3R5cGUnOiAnczNfZmlsZScsCiAgICAg
ICAgICAgICAgICAnbmFtZSc6IGZpbGVfbmFtZSwKICAgICAgICAgICAgICAgICdrZXknOiBrZXks
CiAgICAgICAgICAgICAgICAnc2l6ZSc6IGZpbGUuZ2V0KCdTaXplJywgMCksCiAgICAgICAgICAg
ICAgICAnbXRpbWUnOiBmaWxlLmdldCgnTGFzdE1vZGlmaWVkJyksCiAgICAgICAgICAgICAgICAn
dmVyc2lvbl9jb3VudCc6IHZfY291bnQsCiAgICAgICAgICAgICAgICAndmVyc2lvbmluZ19lbmFi
bGVkJzogdmVyc2lvbmluZ19lbmFibGVkX2J1Y2tldAogICAgICAgICAgICB9KQoKICAgICAgICAj
IC0tLSDQndCQ0KfQkNCb0J4g0JHQm9Ce0JrQkCDQpNCY0JvQrNCi0KDQkNCm0JjQmCAtLS0KICAg
ICAgICBpZiBzZWxmLmZpbHRlcl9wYXR0ZXJuOgogICAgICAgICAgICBmaWx0ZXJlZF9jb21iaW5l
ZCA9IFtdCiAgICAgICAgICAgIHBhdHRlcm5fbG93ZXIgPSBzZWxmLmZpbHRlcl9wYXR0ZXJuLmxv
d2VyKCkKCiAgICAgICAgICAgIGZvciBpdGVtIGluIGNvbWJpbmVkOgogICAgICAgICAgICAgICAg
IyDQktGB0LXQs9C00LAg0L7RgdGC0LDQstC70Y/QtdC8INGB0YHRi9C70LrRgyDQvdCwINGD0YDQ
vtCy0LXQvdGMINCy0YvRiNC1ICjQtdGB0LvQuCDQvtC90LAg0LHRg9C00LXRgiDQsiDRgdC/0LjR
gdC60LUg0LrQsNC6INC/0LDQv9C60LApCiAgICAgICAgICAgICAgICBpZiBpdGVtWyduYW1lJ10g
PT0gJy4uJzoKICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZF9jb21iaW5lZC5hcHBlbmQoaXRl
bSkKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICMg0KTQuNC7
0YzRgtGA0YPQtdC8INC/0L4g0LLRhdC+0LbQtNC10L3QuNGOINGB0YLRgNC+0LrQuCAoY2FzZS1p
bnNlbnNpdGl2ZSkKICAgICAgICAgICAgICAgIGlmIHBhdHRlcm5fbG93ZXIgaW4gaXRlbVsnbmFt
ZSddLmxvd2VyKCk6CiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRfY29tYmluZWQuYXBwZW5k
KGl0ZW0pCgogICAgICAgICAgICBjb21iaW5lZCA9IGZpbHRlcmVkX2NvbWJpbmVkCgogICAgICAg
ICAgICAjINCe0LHQvdC+0LLQu9GP0LXQvCDQt9Cw0LPQvtC70L7QstC+0LosINGH0YLQvtCx0Ysg
0LHRi9C70L4g0LLQuNC00L3Qviwg0YfRgtC+INGE0LjQu9GM0YLRgCDRgNCw0LHQvtGC0LDQtdGC
CiAgICAgICAgICAgICMgKNCe0L/RhtC40L7QvdCw0LvRjNC90L4sINC10YHQu9C4INGDINCy0LDR
gSDQtdGB0YLRjCDQvNC10YLQvtC0IHVwZGF0ZV9oZWFkZXIpCiAgICAgICAgICAgIHNlbGYudXBk
YXRlX2hlYWRlcihmIiBbRklMVEVSOiB7c2VsZi5maWx0ZXJfcGF0dGVybn1dIikKICAgICAgICAj
IC0tLSDQmtCe0J3QldCmINCR0JvQntCa0JAg0KTQmNCb0KzQotCg0JDQptCY0JggLS0tCgogICAg
ICAgICMg0KHQvtGA0YLQuNGA0L7QstC60LAKICAgICAgICBpZiBkb19zb3J0IGFuZCBzZWxmLnNv
cnRfbW9kZSAhPSAnbm9uZSc6CiAgICAgICAgICAgIGNvbWJpbmVkID0gc2VsZi5zb3J0X2l0ZW1z
KGNvbWJpbmVkKQoKICAgICAgICAjINCh0L7Qt9C00LDQvdC40LUg0LLQuNC00LbQtdGC0L7Qsgog
ICAgICAgIGZvciBpdGVtIGluIGNvbWJpbmVkOgogICAgICAgICAgICBpZiBpdGVtWyd0eXBlJ10g
PT0gJ3MzX2Rpcic6CiAgICAgICAgICAgICAgICBsYWJlbCA9IGYiL3tpdGVtWyduYW1lJ119Igog
ICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdzM19k
aXInLAogICAgICAgICAgICAgICAgICAgICduYW1lJzogaXRlbVsnbmFtZSddLAogICAgICAgICAg
ICAgICAgICAgICdrZXknOiBpdGVtWydrZXknXSwKICAgICAgICAgICAgICAgICAgICAnY2FuX3Nl
bGVjdCc6IEZhbHNlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBhdHRyID0gTm9u
ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2l6ZV9zdHIgPSBzZWxmLmZzX2Jy
b3dzZXIuZm9ybWF0X3NpemUoaXRlbVsnc2l6ZSddKSBpZiBoYXNhdHRyKHNlbGYuZnNfYnJvd3Nl
ciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybWF0X3NpemUnKSBlbHNlIGZvcm1hdF9zaXpl
KAogICAgICAgICAgICAgICAgICAgIGl0ZW1bJ3NpemUnXSkKICAgICAgICAgICAgICAgIHRpbWVf
c3RyID0gaXRlbVsnbXRpbWUnXS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU0nKSBpZiBpdGVtWydt
dGltZSddIGVsc2UgJycKCiAgICAgICAgICAgICAgICAjINCb0L7Qs9C40LrQsCDQvtGC0L7QsdGA
0LDQttC10L3QuNGPINCy0LXRgNGB0LjQuTog0J/QntCa0JDQl9Cr0JLQkNCi0Kwg0KLQntCb0KzQ
mtCeINCV0KHQm9CYID4gMQogICAgICAgICAgICAgICAgdl9jb3VudCA9IGl0ZW0uZ2V0KCd2ZXJz
aW9uX2NvdW50JywgMSkKICAgICAgICAgICAgICAgIGlmIHZfY291bnQgPiAxOgogICAgICAgICAg
ICAgICAgICAgIHZlcnNpb25faGludCA9IGYnIFt7dl9jb3VudH1dJwogICAgICAgICAgICAgICAg
ZWxzZToKICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uX2hpbnQgPSAnJyAgIyBbdl0g0LHQvtC7
0YzRiNC1INC90LUg0L7RgtC+0LHRgNCw0LbQsNC10YLRgdGPCgogICAgICAgICAgICAgICAgIyBs
YWJlbCA9IGYiIHtpdGVtWyduYW1lJ106NTB9IHtzaXplX3N0cjo+MTB9IHt0aW1lX3N0cn17dmVy
c2lvbl9oaW50fSIKICAgICAgICAgICAgICAgIG5hbWUgPSBpdGVtWyJuYW1lIl0KICAgICAgICAg
ICAgICAgICMg0JXRgdC70Lgg0LjQvNGPINC00LvQuNC90L3QtdC1IDQwLCDQsdC10YDQtdC8IDM5
INGB0LjQvNCy0L7Qu9C+0LIg0Lgg0LTQvtCx0LDQstC70Y/QtdC8ICc+Jywg0LjQvdCw0YfQtSDQ
vtGB0YLQsNCy0LvRj9C10Lwg0LrQsNC6INC10YHRgtGMCiAgICAgICAgICAgICAgICBkaXNwbGF5
X25hbWUgPSBuYW1lIGlmIGxlbihuYW1lKSA8PSA1MCBlbHNlIG5hbWVbOjQ5XSArICI+IgogICAg
ICAgICAgICAgICAgbGFiZWwgPSBmIiB7ZGlzcGxheV9uYW1lOjUwfSB7c2l6ZV9zdHI6PjEwfSB7
dGltZV9zdHJ9e3ZlcnNpb25faGludH0iCgogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAg
ICAgICAgICAgICAgICAndHlwZSc6ICdzM19maWxlJywKICAgICAgICAgICAgICAgICAgICAnbmFt
ZSc6IGl0ZW1bJ25hbWUnXSwKICAgICAgICAgICAgICAgICAgICAna2V5JzogaXRlbVsna2V5J10s
CiAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiBpdGVtWydzaXplJ10sCiAgICAgICAgICAgICAg
ICAgICAgJ210aW1lJzogaXRlbVsnbXRpbWUnXSwKICAgICAgICAgICAgICAgICAgICAnY2FuX3Nl
bGVjdCc6IFRydWUsCiAgICAgICAgICAgICAgICAgICAgJ3ZlcnNpb25fY291bnQnOiB2X2NvdW50
ICAjINCh0L7RhdGA0LDQvdGP0LXQvCDQutC+0Lst0LLQviDQstC10YDRgdC40Lkg0LIg0L7QsdGK
0LXQutGC0LUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGF0dHIgPSAnZmlsZScK
CiAgICAgICAgICAgIHRleHQgPSBTZWxlY3RhYmxlVGV4dChmJyAge2xhYmVsfScsIGRhdGEsIHNl
bGYpCiAgICAgICAgICAgIGl0ZW1zLmFwcGVuZCh1cndpZC5BdHRyTWFwKHRleHQsIGF0dHIsIGZv
Y3VzX21hcD0nc2VsZWN0ZWQnKSkKCiAgICAgICAgcmV0dXJuIGl0ZW1zCgogICAgZGVmIF9yZWZy
ZXNoX3MzKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY3VycmVudF9idWNrZXQgaXMgTm9uZToKICAg
ICAgICAgICAgc2VsZi51cGRhdGVfaGVhZGVyKGYnW1MzIE1vZGUgLSB7c2VsZi5jdXJyZW50X2Vu
ZHBvaW50fV0gU29ydDoge3NlbGYuc29ydF9tb2RlfScpCiAgICAgICAgICAgIHNlbGYucGF0aF90
ZXh0LnNldF90ZXh0KGYnUzM6IC97c2VsZi5jdXJyZW50X2VuZHBvaW50fS8nKQoKICAgICAgICAg
ICAgZGF0YSA9IHsndHlwZSc6ICd0b19yb290X21lbnUnLCAnY2FuX3NlbGVjdCc6IEZhbHNlfQog
ICAgICAgICAgICB0ZXh0ID0gU2VsZWN0YWJsZVRleHQoJyAgWy4uXSBCYWNrIHRvIHJvb3QgbWVu
dScsIGRhdGEsIHNlbGYpCiAgICAgICAgICAgIHNlbGYud2Fsa2VyLmFwcGVuZCh1cndpZC5BdHRy
TWFwKHRleHQsIE5vbmUsIGZvY3VzX21hcD0nc2VsZWN0ZWQnKSkKCiAgICAgICAgICAgIGJ1Y2tl
dHMgPSBzZWxmLnMzX21hbmFnZXIubGlzdF9idWNrZXRzKCkKCiAgICAgICAgICAgIGlmIG5vdCBi
dWNrZXRzIGFuZCBzZWxmLnMzX21hbmFnZXIuY29ubmVjdGlvbl9lcnJvcjoKICAgICAgICAgICAg
ICAgIGVycm9yX21zZyA9IGYnW0VSUk9SXSBDb25uZWN0aW9uIGZhaWxlZDoge3NlbGYuczNfbWFu
YWdlci5jb25uZWN0aW9uX2Vycm9yWzo2MF19JwogICAgICAgICAgICAgICAgZGF0YSA9IHsndHlw
ZSc6ICdlcnJvcicsICdjYW5fc2VsZWN0JzogRmFsc2V9CiAgICAgICAgICAgICAgICB0ZXh0ID0g
U2VsZWN0YWJsZVRleHQoZicgIHtlcnJvcl9tc2d9JywgZGF0YSwgc2VsZikKICAgICAgICAgICAg
ICAgIHNlbGYud2Fsa2VyLmFwcGVuZCh1cndpZC5BdHRyTWFwKHRleHQsICdlcnJvcicpKQogICAg
ICAgICAgICAgICAgc2VsZi5hcHAuc2hvd19yZXN1bHQoCiAgICAgICAgICAgICAgICAgICAgZidD
YW5ub3QgY29ubmVjdCB0byB7c2VsZi5jdXJyZW50X2VuZHBvaW50fToge3NlbGYuczNfbWFuYWdl
ci5jb25uZWN0aW9uX2Vycm9yWzo4MF19JykKICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAg
ICAgICAgYnVja2V0X2l0ZW1zID0gW10KICAgICAgICAgICAgZm9yIGJ1Y2tldCBpbiBidWNrZXRz
OgogICAgICAgICAgICAgICAgIyDQn9C+0LvRg9GH0LDQtdC8INGB0YLQsNGC0YPRgSDQstC10YDR
gdC40L7QvdC40YDQvtCy0LDQvdC40Y8g0LTQu9GPINC60LDQttC00L7Qs9C+INCx0LDQutC10YLQ
sAogICAgICAgICAgICAgICAgdmVyc2lvbmluZ19zdGF0dXMgPSBzZWxmLnMzX21hbmFnZXIuZ2V0
X3ZlcnNpb25pbmdfc3RhdHVzKGJ1Y2tldFsnTmFtZSddKQogICAgICAgICAgICAgICAgaWYgdmVy
c2lvbmluZ19zdGF0dXMgPT0gJ0VuYWJsZWQnOgogICAgICAgICAgICAgICAgICAgIHZlcnNpb25p
bmdfbWFyayA9ICdbVl0nCiAgICAgICAgICAgICAgICBlbGlmIHZlcnNpb25pbmdfc3RhdHVzID09
ICdTdXNwZW5kZWQnOgogICAgICAgICAgICAgICAgICAgIHZlcnNpb25pbmdfbWFyayA9ICdbU10n
CiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHZlcnNpb25pbmdfbWFy
ayA9ICcgICAnCgogICAgICAgICAgICAgICAgYnVja2V0X2l0ZW1zLmFwcGVuZCh7CiAgICAgICAg
ICAgICAgICAgICAgJ25hbWUnOiBidWNrZXRbJ05hbWUnXSwKICAgICAgICAgICAgICAgICAgICAn
dHlwZSc6ICdidWNrZXQnLAogICAgICAgICAgICAgICAgICAgICdDcmVhdGlvbkRhdGUnOiBidWNr
ZXQuZ2V0KCdDcmVhdGlvbkRhdGUnKSwKICAgICAgICAgICAgICAgICAgICAnbXRpbWUnOiBidWNr
ZXQuZ2V0KCdDcmVhdGlvbkRhdGUnKSwKICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6IDAsCiAg
ICAgICAgICAgICAgICAgICAgJ3ZlcnNpb25pbmcnOiB2ZXJzaW9uaW5nX3N0YXR1cywKICAgICAg
ICAgICAgICAgICAgICAndmVyc2lvbmluZ19tYXJrJzogdmVyc2lvbmluZ19tYXJrLAogICAgICAg
ICAgICAgICAgICAgICdjYW5fc2VsZWN0JzogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAnb3du
ZXInOiBidWNrZXQuZ2V0KCJfT3duZXJIaW50IikKICAgICAgICAgICAgICAgIH0pCgogICAgICAg
ICAgICAjYnVja2V0X2l0ZW1zID0gc2VsZi5zb3J0X2l0ZW1zKGJ1Y2tldF9pdGVtcykKCiAgICAg
ICAgICAgIGJ1Y2tldF9pdGVtcyA9IHNvcnRlZChidWNrZXRfaXRlbXMsIGtleT1sYW1iZGEgYjog
KGIuZ2V0KCJuYW1lIikgb3IgIiIpLmxvd2VyKCkpCgogICAgICAgICAgICBmb3IgYnVja2V0IGlu
IGJ1Y2tldF9pdGVtczoKICAgICAgICAgICAgICAgIGNyZWF0aW9uX2RhdGUgPSBidWNrZXQuZ2V0
KCdDcmVhdGlvbkRhdGUnKQogICAgICAgICAgICAgICAgZGF0ZV9zdHIgPSBjcmVhdGlvbl9kYXRl
LnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpIGlmIGNyZWF0aW9uX2RhdGUgZWxzZSAnICcg
KiAxOQoKICAgICAgICAgICAgICAgICMgbGFiZWwgPSBmJ1tCVUNLRVRdIHtidWNrZXRbIm5hbWUi
XTo0MH0ge2RhdGVfc3RyfScKICAgICAgICAgICAgICAgIGxhYmVsID0gZicqe2J1Y2tldFsibmFt
ZSJdOjQwfSB7ZGF0ZV9zdHJ9IHtidWNrZXRbInZlcnNpb25pbmdfbWFyayJdfSBbe2J1Y2tldFsi
b3duZXIiXX1dJwoKICAgICAgICAgICAgICAgIGRhdGEgPSB7J3R5cGUnOiAnYnVja2V0JywgJ25h
bWUnOiBidWNrZXRbJ25hbWUnXSwgJ2Nhbl9zZWxlY3QnOiBUcnVlfQogICAgICAgICAgICAgICAg
dGV4dCA9IFNlbGVjdGFibGVUZXh0KGYnICB7bGFiZWx9JywgZGF0YSwgc2VsZikKICAgICAgICAg
ICAgICAgIHNlbGYud2Fsa2VyLmFwcGVuZCh1cndpZC5BdHRyTWFwKHRleHQsIE5vbmUsIGZvY3Vz
X21hcD0nc2VsZWN0ZWQnKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIDEuINCh0L3QsNGH
0LDQu9CwINGB0YfQuNGC0LDQtdC8INC+0LHRitC10LrRgtGLICjRjdGC0L4g0LHRi9GB0YLRgNC+
LCDRgi7Qui4g0LTQsNC90L3Ri9C1INCx0LXRgNGD0YLRgdGPINC40LcgY2FjaGUg0LjQu9C4IEhF
QUQg0LfQsNC/0YDQvtGB0LApCiAgICAgICAgICAgIHRvdGFsX2NvdW50LCB0b3RhbF9zaXplID0g
c2VsZi5zM19tYW5hZ2VyLmNvdW50X29iamVjdHMoc2VsZi5jdXJyZW50X2J1Y2tldCwgc2VsZi5j
dXJyZW50X3ByZWZpeCkKCiAgICAgICAgICAgICMgMi4g0JvQvtCz0LjQutCwINGB0LHRgNC+0YHQ
sCDRgdC+0YDRgtC40YDQvtCy0LrQuDoKICAgICAgICAgICAgIyDQldGB0LvQuCDQvtCx0YrQtdC6
0YLQvtCyINC80L3QvtCz0L4gKD4xMDAwKSwg0L/RgNC40L3Rg9C00LjRgtC10LvRjNC90L4g0L7R
gtC60LvRjtGH0LDQtdC8INGB0L7RgNGC0LjRgNC+0LLQutGDINC00LvRjyDRgdC60L7RgNC+0YHR
gtC4CiAgICAgICAgICAgIGlmIHRvdGFsX2NvdW50IGlzIG5vdCBOb25lIGFuZCB0b3RhbF9jb3Vu
dCA+IDEwMDA6CiAgICAgICAgICAgICAgICBzZWxmLnNvcnRfbW9kZSA9ICdub25lJwogICAgICAg
ICAgICAjINCY0L3QsNGH0LUgLSDQvtGB0YLQsNCy0LvRj9C10Lwg0YLQvtGCINGA0LXQttC40Lws
INC60L7RgtC+0YDRi9C5INCy0YvQsdGA0LDQuyDQv9C+0LvRjNC30L7QstCw0YLQtdC70YwgKNC9
0LDQv9GA0LjQvNC10YAsICdzaXplJykKCiAgICAgICAgICAgIHNlbGYudXBkYXRlX2hlYWRlcihm
J1tTMyBNb2RlIC0ge3NlbGYuY3VycmVudF9lbmRwb2ludH1dIFNvcnQ6IHtzZWxmLnNvcnRfbW9k
ZX0nKQoKICAgICAgICAgICAgIyDQpNC+0YDQvNC40YDRg9C10Lwg0L/Rg9GC0Ywg0LIg0LfQsNCz
0L7Qu9C+0LLQutC1CiAgICAgICAgICAgIGRpc3BsYXlfcHJlZml4ID0gc2VsZi5jdXJyZW50X3By
ZWZpeAogICAgICAgICAgICAjIGlmIHNlbGYuY3VycmVudF9wcmVmaXggZWxzZSAnLycKCiAgICAg
ICAgICAgIGlmIHRvdGFsX2NvdW50IGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgY291bnRf
aW5mbyA9IGYnIFt7dG90YWxfY291bnR9IG9iamVjdHMsIHtmb3JtYXRfc2l6ZSh0b3RhbF9zaXpl
KX1dJwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgY291bnRfaW5mbyA9ICcnCgog
ICAgICAgICAgICBzZWxmLnBhdGhfdGV4dC5zZXRfdGV4dChmJ1MzOiAve3NlbGYuY3VycmVudF9l
bmRwb2ludH0ve3NlbGYuY3VycmVudF9idWNrZXR9L3tkaXNwbGF5X3ByZWZpeH17Y291bnRfaW5m
b30nKQoKICAgICAgICAgICAgIyAzLiDQlNC+0LHQsNCy0LvRj9C10Lwg0L3QsNCy0LjQs9Cw0YbQ
uNC+0L3QvdGL0LUg0LrQvdC+0L/QutC4CiAgICAgICAgICAgIGRhdGEgPSB7J3R5cGUnOiAncGFy
ZW50JywgJ2Nhbl9zZWxlY3QnOiBGYWxzZX0KICAgICAgICAgICAgaWYgc2VsZi5jdXJyZW50X3By
ZWZpeDoKICAgICAgICAgICAgICAgIGRhdGEgPSB7J3R5cGUnOiAnczNfcGFyZW50JywgJ2Nhbl9z
ZWxlY3QnOiBGYWxzZX0KICAgICAgICAgICAgICAgIHRleHQgPSBTZWxlY3RhYmxlVGV4dCgnIFsu
Ll0gUGFyZW50JywgZGF0YSwgc2VsZikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
IGRhdGEgPSB7J3R5cGUnOiAnczNfYmFjaycsICdjYW5fc2VsZWN0JzogRmFsc2V9CiAgICAgICAg
ICAgICAgICB0ZXh0ID0gU2VsZWN0YWJsZVRleHQoJyBbLi5dIEJhY2sgdG8gYnVja2V0cycsIGRh
dGEsIHNlbGYpCgogICAgICAgICAgICBzZWxmLndhbGtlci5hcHBlbmQodXJ3aWQuQXR0ck1hcCh0
ZXh0LCBOb25lLCBmb2N1c19tYXA9J3NlbGVjdGVkJykpCgogICAgICAgICAgICAjIDQuINCX0JDQ
n9Cj0KHQmtCQ0JXQnCDQm9CV0J3QmNCS0KPQriDQl9CQ0JPQoNCj0JfQmtCjCiAgICAgICAgICAg
IHNlbGYuX3JlZnJlc2hfczNfb2JqZWN0c19sYXp5KCkKCiAgICAgICAgICAgIHJldHVybiAgIyDQ
ktGL0YXQvtC0IC0g0L7RgdGC0LDQu9GM0L3QvtC1INCyINGE0L7QvdC+0LLQvtC8INC/0L7RgtC+
0LrQtQoKICAgIGRlZiBfcmVmcmVzaF9mcyhzZWxmKToKICAgICAgICBzZWxmLnVwZGF0ZV9oZWFk
ZXIoZidbRlMgTW9kZV0gU29ydDoge3NlbGYuc29ydF9tb2RlfScpCgogICAgICAgICMg0J/QvtC0
0YHRh9C40YLRi9Cy0LDQtdC8INC60L7Qu9C40YfQtdGB0YLQstC+INGN0LvQtdC80LXQvdGC0L7Q
siDQsiDRgtC10LrRg9GJ0LXQuSDQtNC40YDQtdC60YLQvtGA0LjQuAogICAgICAgIGl0ZW1zID0g
c2VsZi5mc19icm93c2VyLmxpc3RfZGlyZWN0b3J5KCkKICAgICAgICBkaXJfY291bnQgPSBzdW0o
MSBmb3IgaXRlbSBpbiBpdGVtcyBpZiBpdGVtLmdldCgnaXNfZGlyJywgRmFsc2UpIGFuZCBpdGVt
LmdldCgnbmFtZScpICE9ICcuLicpCiAgICAgICAgZmlsZV9jb3VudCA9IHN1bSgxIGZvciBpdGVt
IGluIGl0ZW1zIGlmIG5vdCBpdGVtLmdldCgnaXNfZGlyJywgRmFsc2UpKQogICAgICAgIGNvdW50
X2luZm8gPSBmJyBbe2Rpcl9jb3VudH0gZGlycywge2ZpbGVfY291bnR9IGZpbGVzXScKCiAgICAg
ICAgc2VsZi5wYXRoX3RleHQuc2V0X3RleHQoZidGUzoge3NlbGYuZnNfYnJvd3Nlci5jdXJyZW50
X3BhdGh9e2NvdW50X2luZm99JykKCiAgICAgICAgaWYgc2VsZi5pc19mc19yb290KCk6CiAgICAg
ICAgICAgIGRhdGEgPSB7J3R5cGUnOiAndG9fcm9vdF9tZW51JywgJ2Nhbl9zZWxlY3QnOiBGYWxz
ZX0KICAgICAgICAgICAgdGV4dCA9IFNlbGVjdGFibGVUZXh0KCcgIFsuLl0gQmFjayB0byByb290
IG1lbnUnLCBkYXRhLCBzZWxmKQogICAgICAgICAgICBzZWxmLndhbGtlci5hcHBlbmQodXJ3aWQu
QXR0ck1hcCh0ZXh0LCBOb25lLCBmb2N1c19tYXA9J3NlbGVjdGVkJykpCgogICAgICAgIGl0ZW1z
ID0gc2VsZi5mc19icm93c2VyLmxpc3RfZGlyZWN0b3J5KCkKCiAgICAgICAgZGlycyA9IFtpdGVt
IGZvciBpdGVtIGluIGl0ZW1zIGlmIGl0ZW1bJ2lzX2RpciddIGFuZCBpdGVtWyduYW1lJ10gIT0g
Jy4uJ10KICAgICAgICBmaWxlcyA9IFtpdGVtIGZvciBpdGVtIGluIGl0ZW1zIGlmIG5vdCBpdGVt
Wydpc19kaXInXV0KICAgICAgICBwYXJlbnQgPSBbaXRlbSBmb3IgaXRlbSBpbiBpdGVtcyBpZiBp
dGVtWyduYW1lJ10gPT0gJy4uJ10KCiAgICAgICAgZGlycyA9IHNlbGYuc29ydF9pdGVtcyhkaXJz
KQogICAgICAgIGZpbGVzID0gc2VsZi5zb3J0X2l0ZW1zKGZpbGVzKQoKICAgICAgICBmb3IgaXRl
bV9kYXRhIGluIHBhcmVudDoKICAgICAgICAgICAgbGFiZWwgPSAnLy4uJwogICAgICAgICAgICBk
YXRhID0gewogICAgICAgICAgICAgICAgJ3R5cGUnOiAnZnNfZGlyJywKICAgICAgICAgICAgICAg
ICduYW1lJzogaXRlbV9kYXRhWyduYW1lJ10sCiAgICAgICAgICAgICAgICAnc2l6ZSc6IGl0ZW1f
ZGF0YVsnc2l6ZSddLAogICAgICAgICAgICAgICAgJ2Nhbl9zZWxlY3QnOiBGYWxzZQogICAgICAg
ICAgICB9CiAgICAgICAgICAgIHRleHQgPSBTZWxlY3RhYmxlVGV4dChmJyAge2xhYmVsfScsIGRh
dGEsIHNlbGYpCiAgICAgICAgICAgIHNlbGYud2Fsa2VyLmFwcGVuZCh1cndpZC5BdHRyTWFwKHRl
eHQsIE5vbmUsIGZvY3VzX21hcD0nc2VsZWN0ZWQnKSkKCiAgICAgICAgZm9yIGl0ZW1fZGF0YSBp
biBkaXJzOgogICAgICAgICAgICBtdGltZSA9IGl0ZW1fZGF0YVsnbXRpbWUnXS5zdHJmdGltZSgn
JVktJW0tJWQgJUg6JU06JVMnKSBpZiBpdGVtX2RhdGFbJ210aW1lJ10gZWxzZSAnICcgKiAxOQog
ICAgICAgICAgICAjIGxhYmVsID0gZidbRElSIF0ge2l0ZW1fZGF0YVsibmFtZSJdOjQwfSAgPERJ
Uj4gICAgICAgICAgIHttdGltZX0nCiAgICAgICAgICAgICMgbGFiZWwgPSBmJy97aXRlbV9kYXRh
WyJuYW1lIl06NDB9ICAgICAgICAgICAge210aW1lfScKICAgICAgICAgICAgbmFtZSA9IGl0ZW1f
ZGF0YVsibmFtZSJdCiAgICAgICAgICAgICMg0JXRgdC70Lgg0LjQvNGPINC00LvQuNC90L3QtdC1
IDQwLCDQsdC10YDQtdC8IDM5INGB0LjQvNCy0L7Qu9C+0LIg0Lgg0LTQvtCx0LDQstC70Y/QtdC8
ICc+Jywg0LjQvdCw0YfQtSDQvtGB0YLQsNCy0LvRj9C10Lwg0LrQsNC6INC10YHRgtGMCiAgICAg
ICAgICAgIGRpc3BsYXlfbmFtZSA9IG5hbWUgaWYgbGVuKG5hbWUpIDw9IDQwIGVsc2UgbmFtZVs6
MzldICsgIj4iCiAgICAgICAgICAgIGxhYmVsID0gZicve2Rpc3BsYXlfbmFtZTo0MH0gICAgICAg
ICAgICB7bXRpbWV9JwoKICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICd0eXBl
JzogJ2ZzX2RpcicsCiAgICAgICAgICAgICAgICAnbmFtZSc6IGl0ZW1fZGF0YVsnbmFtZSddLAog
ICAgICAgICAgICAgICAgJ3NpemUnOiBpdGVtX2RhdGFbJ3NpemUnXSwKICAgICAgICAgICAgICAg
ICdtdGltZSc6IGl0ZW1fZGF0YVsnbXRpbWUnXSwKICAgICAgICAgICAgICAgICdjYW5fc2VsZWN0
JzogVHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRleHQgPSBTZWxlY3RhYmxlVGV4dChm
JyAge2xhYmVsfScsIGRhdGEsIHNlbGYpCiAgICAgICAgICAgICMgc2VsZi53YWxrZXIuYXBwZW5k
KHVyd2lkLkF0dHJNYXAodGV4dCwgTm9uZSwgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKQogICAgICAg
ICAgICBzZWxmLndhbGtlci5hcHBlbmQodXJ3aWQuQXR0ck1hcCh0ZXh0LCAnYm9keScsIGZvY3Vz
X21hcD0nc2VsZWN0ZWQnKSkKCiAgICAgICAgZm9yIGl0ZW1fZGF0YSBpbiBmaWxlczoKICAgICAg
ICAgICAgbXRpbWUgPSBpdGVtX2RhdGFbJ210aW1lJ10uc3RyZnRpbWUoJyVZLSVtLSVkICVIOiVN
OiVTJykgaWYgaXRlbV9kYXRhWydtdGltZSddIGVsc2UgJyAnICogMTkKICAgICAgICAgICAgIyBs
YWJlbCA9IGYnW0ZJTEVdIHtpdGVtX2RhdGFbIm5hbWUiXTo0MH0ge3NlbGYuZm9ybWF0X3NpemUo
aXRlbV9kYXRhWyJzaXplIl0pOj4xMH0gICAgICAgICB7bXRpbWV9JwogICAgICAgICAgICAjIGxh
YmVsID0gZicge2l0ZW1fZGF0YVsibmFtZSJdOjQwfSB7c2VsZi5mb3JtYXRfc2l6ZShpdGVtX2Rh
dGFbInNpemUiXSk6PjEwfSB7bXRpbWV9JwogICAgICAgICAgICBuYW1lID0gaXRlbV9kYXRhWyJu
YW1lIl0KICAgICAgICAgICAgIyDQldGB0LvQuCDQuNC80Y8g0LTQu9C40L3QvdC10LUgNDAsINCx
0LXRgNC10LwgMzkg0YHQuNC80LLQvtC70L7QsiDQuCDQtNC+0LHQsNCy0LvRj9C10LwgJz4nLCDQ
uNC90LDRh9C1INC+0YHRgtCw0LLQu9GP0LXQvCDQutCw0Log0LXRgdGC0YwKICAgICAgICAgICAg
ZGlzcGxheV9uYW1lID0gbmFtZSBpZiBsZW4obmFtZSkgPD0gNDAgZWxzZSBuYW1lWzozOV0gKyAi
PiIKICAgICAgICAgICAgbGFiZWwgPSBmJyB7ZGlzcGxheV9uYW1lOjQwfSB7c2VsZi5mb3JtYXRf
c2l6ZShpdGVtX2RhdGFbInNpemUiXSk6PjEwfSB7bXRpbWV9JwoKICAgICAgICAgICAgZGF0YSA9
IHsKICAgICAgICAgICAgICAgICd0eXBlJzogJ2ZzX2ZpbGUnLAogICAgICAgICAgICAgICAgJ25h
bWUnOiBpdGVtX2RhdGFbJ25hbWUnXSwKICAgICAgICAgICAgICAgICdzaXplJzogaXRlbV9kYXRh
WydzaXplJ10sCiAgICAgICAgICAgICAgICAnbXRpbWUnOiBpdGVtX2RhdGFbJ210aW1lJ10sCiAg
ICAgICAgICAgICAgICAnY2FuX3NlbGVjdCc6IFRydWUKICAgICAgICAgICAgfQogICAgICAgICAg
ICB0ZXh0ID0gU2VsZWN0YWJsZVRleHQoZicgIHtsYWJlbH0nLCBkYXRhLCBzZWxmKQogICAgICAg
ICAgICAjIHNlbGYud2Fsa2VyLmFwcGVuZCh1cndpZC5BdHRyTWFwKHRleHQsIE5vbmUsIGZvY3Vz
X21hcD0nc2VsZWN0ZWQnKSkKICAgICAgICAgICAgc2VsZi53YWxrZXIuYXBwZW5kKHVyd2lkLkF0
dHJNYXAodGV4dCwgJ2ZpbGUnLCBmb2N1c19tYXA9J3NlbGVjdGVkJykpCgogICAgZGVmIGZvcm1h
dF9zaXplKHNlbGYsIHNpemUpOgogICAgICAgIGZvciB1bml0IGluIFsnQiAgJywgJ0tCICcsICdN
QiAnLCAnR0IgJ106CiAgICAgICAgICAgIGlmIHNpemUgPCAxMDI0LjA6CiAgICAgICAgICAgICAg
ICByZXR1cm4gZid7c2l6ZTouMWZ9e3VuaXR9JwogICAgICAgICAgICBzaXplIC89IDEwMjQuMAog
ICAgICAgIHJldHVybiBmJ3tzaXplOi4xZn1UQicKCiAgICBkZWYgb25faXRlbV9hY3RpdmF0ZWQo
c2VsZiwgZGF0YSk6CiAgICAgICAgaXRlbV90eXBlID0gZGF0YS5nZXQoJ3R5cGUnKQoKICAgICAg
ICBpZiBpdGVtX3R5cGUgPT0gJ3RvX3Jvb3RfbWVudSc6CiAgICAgICAgICAgIHNlbGYubW9kZSA9
ICdyb290X21lbnUnCiAgICAgICAgICAgIHNlbGYuY3VycmVudF9lbmRwb2ludCA9IE5vbmUKICAg
ICAgICAgICAgc2VsZi5jdXJyZW50X2J1Y2tldCA9IE5vbmUKICAgICAgICAgICAgc2VsZi5jdXJy
ZW50X3ByZWZpeCA9ICcnCiAgICAgICAgICAgIHNlbGYuczNfbWFuYWdlciA9IE5vbmUKICAgICAg
ICAgICAgc2VsZi5yZWZyZXNoKCkKCiAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ3Jvb3RfZnMn
OgogICAgICAgICAgICBzZWxmLm1vZGUgPSAnZnMnCiAgICAgICAgICAgIGlmIHNlbGYuZnNfYnJv
d3NlciBpcyBOb25lOgogICAgICAgICAgICAgICAgc2VsZi5mc19icm93c2VyID0gRmlsZVN5c3Rl
bUJyb3dzZXIoKQogICAgICAgICAgICAjIEZJWDog0JTQu9GPINGE0LDQudC70L7QstC+0Lkg0YHQ
uNGB0YLQtdC80Ysg0YHQvtGA0YLQuNGA0L7QstC60LAg0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4g
LSBOYW1lCiAgICAgICAgICAgIHNlbGYuc29ydF9tb2RlID0gJ25hbWUnCiAgICAgICAgICAgIHNl
bGYucmVmcmVzaCgpCgogICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdyb290X2VuZHBvaW50JzoK
ICAgICAgICAgICAgc2VsZi5tb2RlID0gJ3MzJwogICAgICAgICAgICBzZWxmLmN1cnJlbnRfZW5k
cG9pbnQgPSBkYXRhWyduYW1lJ10KICAgICAgICAgICAgZW5kcG9pbnRfY29uZmlnID0gZGF0YVsn
Y29uZmlnJ10KICAgICAgICAgICAgc2VsZi5zM19tYW5hZ2VyID0gUzNNYW5hZ2VyKGVuZHBvaW50
X2NvbmZpZykKICAgICAgICAgICAgc2VsZi5jdXJyZW50X2J1Y2tldCA9IE5vbmUKICAgICAgICAg
ICAgc2VsZi5jdXJyZW50X3ByZWZpeCA9ICcnCiAgICAgICAgICAgICMgRklYOiDQlNC70Y8gUzMg
0L7RgtC60LvRjtGH0LDQtdC8INGB0L7RgNGC0LjRgNC+0LLQutGDINC/0L4g0YPQvNC+0LvRh9Cw
0L3QuNGOICjQs9GA0YPQt9C40Lwg0LrQsNC6INC10YHRgtGMKQogICAgICAgICAgICBzZWxmLnNv
cnRfbW9kZSA9ICdub25lJwogICAgICAgICAgICBzZWxmLnJlZnJlc2goKQoKICAgICAgICBlbGlm
IGl0ZW1fdHlwZSA9PSAnZW5kcG9pbnQnOgogICAgICAgICAgICBzZWxmLmN1cnJlbnRfZW5kcG9p
bnQgPSBkYXRhWyduYW1lJ10KICAgICAgICAgICAgZW5kcG9pbnRfY29uZmlnID0gZGF0YVsnY29u
ZmlnJ10KICAgICAgICAgICAgc2VsZi5zM19tYW5hZ2VyID0gUzNNYW5hZ2VyKGVuZHBvaW50X2Nv
bmZpZykKICAgICAgICAgICAgc2VsZi5jdXJyZW50X2J1Y2tldCA9IE5vbmUKICAgICAgICAgICAg
c2VsZi5jdXJyZW50X3ByZWZpeCA9ICcnCiAgICAgICAgICAgIHNlbGYuc29ydF9tb2RlID0gJ25v
bmUnICAjIEZJWDog0KLQviDQttC1INGB0LDQvNC+0LUg0LTQu9GPINC/0YDRj9C80L7Qs9C+INCy
0YvQsdC+0YDQsCDRjdC90LTQv9C+0LjQvdGC0LAKICAgICAgICAgICAgc2VsZi5yZWZyZXNoKCkK
CiAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ2J1Y2tldCc6CiAgICAgICAgICAgIHNlbGYuY3Vy
cmVudF9idWNrZXQgPSBkYXRhWyduYW1lJ10KICAgICAgICAgICAgc2VsZi5jdXJyZW50X3ByZWZp
eCA9ICcnCiAgICAgICAgICAgIHNlbGYucmVmcmVzaCgpCgogICAgICAgIGVsaWYgaXRlbV90eXBl
ID09ICdzM19iYWNrJzoKICAgICAgICAgICAgZm9jdXNfYnVja2V0ID0gc2VsZi5jdXJyZW50X2J1
Y2tldAogICAgICAgICAgICBzZWxmLmN1cnJlbnRfYnVja2V0ID0gTm9uZQogICAgICAgICAgICBz
ZWxmLmN1cnJlbnRfcHJlZml4ID0gJycKICAgICAgICAgICAgc2VsZi5yZWZyZXNoKGZvY3VzX29u
PWZvY3VzX2J1Y2tldCkKCiAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ3MzX3BhcmVudCc6CiAg
ICAgICAgICAgIGlmIHNlbGYuY3VycmVudF9wcmVmaXg6CiAgICAgICAgICAgICAgICAjIHBhcnRz
ID0gc2VsZi5jdXJyZW50X3ByZWZpeC5yc3RyaXAoJy8nKS5zcGxpdCgnLycpCiAgICAgICAgICAg
ICAgICAjIGZvY3VzX29uID0gcGFydHNbLTFdCiAgICAgICAgICAgICAgICAjIHNlbGYuY3VycmVu
dF9wcmVmaXggPSAnLycuam9pbihwYXJ0c1s6LTFdKSArICcvJyBpZiBsZW4ocGFydHMpID4gMSBl
bHNlICcnCiAgICAgICAgICAgICAgICAjIHNlbGYucmVmcmVzaChmb2N1c19vbj1mb2N1c19vbikK
ICAgICAgICAgICAgICAgICMgY3VycmVudF9wcmVmaXgg0L7QsdGL0YfQvdC+INC30LDQutCw0L3R
h9C40LLQsNC10YLRgdGPINC90LAgJy8nLCDQvdCw0L/RgNC40LzQtdGAICdmb2xkZXIxL2ZvbGRl
cjIvJwogICAgICAgICAgICAgICAgIyByc3RyaXAoJy8nKSAtPiAnZm9sZGVyMS9mb2xkZXIyJwog
ICAgICAgICAgICAgICAgIyBzcGxpdCgnLycpIC0+IFsnZm9sZGVyMScsICdmb2xkZXIyJ10KICAg
ICAgICAgICAgICAgIHBhcnRzID0gc2VsZi5jdXJyZW50X3ByZWZpeC5yc3RyaXAoJy8nKS5zcGxp
dCgnLycpCgogICAgICAgICAgICAgICAgaWYgbGVuKHBhcnRzKSA+IDA6CiAgICAgICAgICAgICAg
ICAgICAgIyDQmNC80Y8g0L/QsNC/0LrQuCwg0LjQtyDQutC+0YLQvtGA0L7QuSDQvNGLINCy0YvR
hdC+0LTQuNC8ICjQvdCwINC90LXRkSDQvdCw0LTQviDQv9C+0YHRgtCw0LLQuNGC0Ywg0YTQvtC6
0YPRgSkKICAgICAgICAgICAgICAgICAgICBmb2N1c19vbiA9IHBhcnRzWy0xXSAgIyAnZm9sZGVy
MicKCiAgICAgICAgICAgICAgICAgICAgIyDQndC+0LLRi9C5INC/0YDQtdGE0LjQutGBICjRgNC+
0LTQuNGC0LXQu9GM0YHQutC40LkpCiAgICAgICAgICAgICAgICAgICAgaWYgbGVuKHBhcnRzKSA+
IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICMgSm9pbiDQstGB0LXRhSDRh9Cw0YHRgtC10Lkg
0LrRgNC+0LzQtSDQv9C+0YHQu9C10LTQvdC10LkgKyAnLycKICAgICAgICAgICAgICAgICAgICAg
ICAgc2VsZi5jdXJyZW50X3ByZWZpeCA9ICcvJy5qb2luKHBhcnRzWzotMV0pICsgJy8nCiAgICAg
ICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgIyDQldGB0LvQuCDQ
sdGL0LvQsCDQvtC00L3QsCDQv9Cw0L/QutCwLCDRgdGC0LDQvdC+0LLQuNC80YHRjyDQsiDQutC+
0YDQtdC90Ywg0LHQsNC60LXRgtCwCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVu
dF9wcmVmaXggPSAnJwoKICAgICAgICAgICAgICAgICAgICAjINCe0JHQndCe0JLQm9CV0J3QmNCV
OiDQn9C10YDQtdC00LDQtdC8IGZvY3VzX29uINCyIHJlZnJlc2gKICAgICAgICAgICAgICAgICAg
ICAjINCS0LDQttC90L46INC40LzRjyDQv9Cw0L/QutC4INCyINGB0L/QuNGB0LrQtSDQvtCx0YvR
h9C90L4g0L7RgtC+0LHRgNCw0LbQsNC10YLRgdGPINCx0LXQtyDRgdC70Y3RiNC10Lkg0LjQu9C4
INGBINC90LjQvNC4LAogICAgICAgICAgICAgICAgICAgICMg0LIg0LfQsNCy0LjRgdC40LzQvtGB
0YLQuCDQvtGCINGC0L7Qs9C+LCDQutCw0LogY3JlYXRlX2Rpc3BsYXlfaXRlbXMg0YTQvtGA0LzQ
uNGA0YPQtdGCINC40LzQtdC90LAuCiAgICAgICAgICAgICAgICAgICAgIyDQntCx0YvRh9C90L4g
0Y3RgtC+INC/0YDQvtGB0YLQviDQuNC80Y8g0L/QsNC/0LrQuC4KICAgICAgICAgICAgICAgICAg
ICBzZWxmLnJlZnJlc2goZm9jdXNfb249Zm9jdXNfb24pCiAgICAgICAgICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgICAgICAgICMg0JXRgdC70LggcGFydHMg0L/Rg9GB0YIsINC30L3QsNGH0LjR
giDQvNGLINCyINC60L7RgNC90LUgKNGB0YLRgNCw0L3QvdC+INC00LvRjyBzM19wYXJlbnQsINC9
0L4g0LHRi9Cy0LDQtdGCKQogICAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudF9wcmVmaXgg
PSAnJwogICAgICAgICAgICAgICAgICAgIHNlbGYucmVmcmVzaCgpCgogICAgICAgIGVsaWYgaXRl
bV90eXBlID09ICdzM19kaXInOgogICAgICAgICAgICBzZWxmLmN1cnJlbnRfcHJlZml4ID0gZGF0
YVsna2V5J10KICAgICAgICAgICAgc2VsZi5yZWZyZXNoKCkKCiAgICAgICAgZWxpZiBpdGVtX3R5
cGUgPT0gJ3MzX2ZpbGUnOgogICAgICAgICAgICBpZiBkYXRhLmdldCgndmVyc2lvbl9jb3VudCcs
IDEpID4gMToKICAgICAgICAgICAgICAgIHNlbGYuc2hvd192ZXJzaW9ucyhkYXRhKQogICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi52aWV3X2l0ZW0oKQoKICAgICAgICBlbGlm
IGl0ZW1fdHlwZSA9PSAnZnNfZGlyJzoKICAgICAgICAgICAgaWYgZGF0YVsnbmFtZSddID09ICcu
Lic6CiAgICAgICAgICAgICAgICBmb2N1c19vbiA9IG9zLnBhdGguYmFzZW5hbWUoc2VsZi5mc19i
cm93c2VyLmN1cnJlbnRfcGF0aCkKICAgICAgICAgICAgICAgIHNlbGYuZnNfYnJvd3Nlci5jdXJy
ZW50X3BhdGggPSBvcy5wYXRoLmRpcm5hbWUoc2VsZi5mc19icm93c2VyLmN1cnJlbnRfcGF0aCkK
ICAgICAgICAgICAgICAgIHNlbGYucmVmcmVzaChmb2N1c19vbj1mb2N1c19vbikKICAgICAgICAg
ICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGggPSBv
cy5wYXRoLmpvaW4oc2VsZi5mc19icm93c2VyLmN1cnJlbnRfcGF0aCwgZGF0YVsnbmFtZSddKQog
ICAgICAgICAgICAgICAgc2VsZi5yZWZyZXNoKCkKCiAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0g
J2ZzX2ZpbGUnOgogICAgICAgICAgICBzZWxmLnZpZXdfaXRlbSgpCgogICAgZGVmIHNob3dfdmVy
c2lvbnMoc2VsZiwgZmlsZV9kYXRhKToKICAgICAgICB2ZXJzaW9ucyA9IHNlbGYuczNfbWFuYWdl
ci5saXN0X29iamVjdF92ZXJzaW9ucyhzZWxmLmN1cnJlbnRfYnVja2V0LCBmaWxlX2RhdGFbJ2tl
eSddKQogICAgICAgIGlmIG5vdCB2ZXJzaW9uczoKICAgICAgICAgICAgc2VsZi5hcHAuc2hvd19y
ZXN1bHQoJ05vIHZlcnNpb25zIGZvdW5kJykKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHZl
cnNpb25fbGluZXMgPSBbZiJWZXJzaW9ucyBvZjoge2ZpbGVfZGF0YVsnbmFtZSddfVxuIl0KICAg
ICAgICBmb3IgaWR4LCB2IGluIGVudW1lcmF0ZSh2ZXJzaW9ucyk6CiAgICAgICAgICAgIGlzX2xh
dGVzdCA9IHYuZ2V0KCdJc0xhdGVzdCcsIEZhbHNlKQogICAgICAgICAgICBsYXRlc3RfbWFyayA9
ICdbTEFURVNUXSAnIGlmIGlzX2xhdGVzdCBlbHNlICcgICAgICAgICcKICAgICAgICAgICAgc2l6
ZSA9IHNlbGYuZm9ybWF0X3NpemUodi5nZXQoJ1NpemUnLCAwKSkKICAgICAgICAgICAgbXRpbWUg
PSB2LmdldCgnTGFzdE1vZGlmaWVkJywgJycpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycp
IGlmIHYuZ2V0KCdMYXN0TW9kaWZpZWQnKSBlbHNlICcnCiAgICAgICAgICAgIHZlcnNpb25faWQg
PSB2LmdldCgnVmVyc2lvbklkJywgJycpWzoxMl0KICAgICAgICAgICAgdmVyc2lvbl9saW5lcy5h
cHBlbmQoZiJ7aWR4ICsgMX0uIHtsYXRlc3RfbWFya317dmVyc2lvbl9pZH0ge3NpemU6PjEwfSB7
bXRpbWV9IikKCiAgICAgICAgY29udGVudCA9ICdcbicuam9pbih2ZXJzaW9uX2xpbmVzKQogICAg
ICAgIGNvbnRlbnQgKz0gJ1xuXG5Vc2UgRjMgdG8gdmlldywgRjUgdG8gY29weSwgRjggdG8gZGVs
ZXRlIHNlbGVjdGVkIHZlcnNpb24nCgogICAgICAgIHZpZXdlciA9IEZpbGVWaWV3ZXJEaWFsb2co
ZidWZXJzaW9uczoge2ZpbGVfZGF0YVsibmFtZSJdfScsIGNvbnRlbnQsIHNlbGYuYXBwLmNsb3Nl
X2RpYWxvZykKICAgICAgICBzZWxmLmFwcC5zaG93X2RpYWxvZyh2aWV3ZXIpCgogICAgZGVmIHNl
bGVjdF9ieV9wYXR0ZXJuKHNlbGYsIHBhdHRlcm4sIHNlbGVjdD1UcnVlKToKICAgICAgICAiIiLQ
ktGL0LHRgNCw0YLRjC/RgdC90Y/RgtGMINCy0YvQsdC+0YAg0Y3Qu9C10LzQtdC90YLQvtCyINC/
0L4gZ2xvYiBwYXR0ZXJuICjRgtC+0LvRjNC60L4g0YTQsNC50LvRiykiIiIKICAgICAgICB0cnk6
CiAgICAgICAgICAgIHJlZ2V4X3BhdHRlcm4gPSBmbm1hdGNoLnRyYW5zbGF0ZShwYXR0ZXJuKQog
ICAgICAgICAgICByZWdleCA9IHJlLmNvbXBpbGUocmVnZXhfcGF0dGVybiwgcmUuSUdOT1JFQ0FT
RSkKICAgICAgICAgICAgY291bnQgPSAwCgogICAgICAgICAgICBmb3Igd2lkZ2V0IGluIHNlbGYu
d2Fsa2VyOgogICAgICAgICAgICAgICAgdyA9IHdpZGdldC5vcmlnaW5hbF93aWRnZXQKICAgICAg
ICAgICAgICAgIGlmIGlzaW5zdGFuY2UodywgU2VsZWN0YWJsZVRleHQpIGFuZCB3LmRhdGEuZ2V0
KCdjYW5fc2VsZWN0Jyk6CiAgICAgICAgICAgICAgICAgICAgaXRlbV90eXBlID0gdy5kYXRhLmdl
dCgndHlwZScpCiAgICAgICAgICAgICAgICAgICAgaWYgaXRlbV90eXBlIGluICgnZnNfZmlsZScs
ICdzM19maWxlJyk6CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSB3LmRhdGEuZ2V0KCdu
YW1lJywgJycpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJlZ2V4Lm1hdGNoKG5hbWUpOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5zZWxlY3RlZCA9IHNlbGVjdAogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc2VsZi51cGRhdGVfaXRlbV9kaXNwbGF5KHcpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBjb3VudCArPSAxCgogICAgICAgICAgICBhY3Rpb24gPSAnU2VsZWN0
ZWQnIGlmIHNlbGVjdCBlbHNlICdVbnNlbGVjdGVkJwogICAgICAgICAgICBzZWxmLmFwcC5zaG93
X3Jlc3VsdChmJ3thY3Rpb259IHtjb3VudH0gZmlsZXMnKQogICAgICAgIGV4Y2VwdCByZS5lcnJv
cjoKICAgICAgICAgICAgc2VsZi5hcHAuc2hvd19yZXN1bHQoJ0ludmFsaWQgcGF0dGVybicpCgog
ICAgZGVmIGludmVydF9zZWxlY3Rpb24oc2VsZik6CiAgICAgICAgIiIi0JjQvdCy0LXRgNGC0LjR
gNC+0LLQsNGC0Ywg0LLRi9Cx0L7RgCAo0YLQvtC70YzQutC+INGE0LDQudC70YspIiIiCiAgICAg
ICAgY291bnQgPSAwCiAgICAgICAgZm9yIHdpZGdldCBpbiBzZWxmLndhbGtlcjoKICAgICAgICAg
ICAgdyA9IHdpZGdldC5vcmlnaW5hbF93aWRnZXQKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh3
LCBTZWxlY3RhYmxlVGV4dCkgYW5kIHcuZGF0YS5nZXQoJ2Nhbl9zZWxlY3QnKToKICAgICAgICAg
ICAgICAgIGl0ZW1fdHlwZSA9IHcuZGF0YS5nZXQoJ3R5cGUnKQogICAgICAgICAgICAgICAgaWYg
aXRlbV90eXBlIGluICgnZnNfZmlsZScsICdzM19maWxlJyk6CiAgICAgICAgICAgICAgICAgICAg
dy5zZWxlY3RlZCA9IG5vdCB3LnNlbGVjdGVkCiAgICAgICAgICAgICAgICAgICAgc2VsZi51cGRh
dGVfaXRlbV9kaXNwbGF5KHcpCiAgICAgICAgICAgICAgICAgICAgaWYgdy5zZWxlY3RlZDoKICAg
ICAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gMQoKICAgICAgICBzZWxmLmFwcC5zaG93X3Jl
c3VsdChmJ1NlbGVjdGVkIHtjb3VudH0gZmlsZXMnKQoKICAgIGRlZiB1cGRhdGVfaXRlbV9kaXNw
bGF5KHNlbGYsIHRleHRfd2lkZ2V0KToKICAgICAgICBpZiB0ZXh0X3dpZGdldC5zZWxlY3RlZDoK
ICAgICAgICAgICAgdGV4dF93aWRnZXQuc2V0X3RleHQoJyogJyArIHRleHRfd2lkZ2V0LmdldF90
ZXh0KClbMF1bMjpdKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRleHRfd2lkZ2V0LnNldF90
ZXh0KCcgICcgKyB0ZXh0X3dpZGdldC5nZXRfdGV4dCgpWzBdWzI6XSkKCiAgICBkZWYgZ2V0X3Nl
bGVjdGVkX2l0ZW1zKHNlbGYpOgogICAgICAgIHNlbGVjdGVkID0gW10KICAgICAgICBmb3Igd2lk
Z2V0IGluIHNlbGYud2Fsa2VyOgogICAgICAgICAgICB3ID0gd2lkZ2V0Lm9yaWdpbmFsX3dpZGdl
dAogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHcsIFNlbGVjdGFibGVUZXh0KSBhbmQgdy5zZWxl
Y3RlZDoKICAgICAgICAgICAgICAgIHNlbGVjdGVkLmFwcGVuZCh3LmRhdGEpCiAgICAgICAgcmV0
dXJuIHNlbGVjdGVkCgogICAgZGVmIGdldF9mb2N1c2VkX2l0ZW0oc2VsZik6CiAgICAgICAgdHJ5
OgogICAgICAgICAgICBmb2N1c193aWRnZXQsIHBvcyA9IHNlbGYubGlzdGJveC5nZXRfZm9jdXMo
KQogICAgICAgICAgICBpZiBub3QgZm9jdXNfd2lkZ2V0OgogICAgICAgICAgICAgICAgcmV0dXJu
IE5vbmUKCiAgICAgICAgICAgICMg0KDQsNC30LLQvtGA0LDRh9C40LLQsNC10LwgQXR0ck1hcCDQ
tdGB0LvQuCDQtdGB0YLRjAogICAgICAgICAgICB3ID0gZm9jdXNfd2lkZ2V0CiAgICAgICAgICAg
IGlmIGlzaW5zdGFuY2UodywgdXJ3aWQuQXR0ck1hcCk6CiAgICAgICAgICAgICAgICB3ID0gdy5v
cmlnaW5hbF93aWRnZXQKCiAgICAgICAgICAgICMg0J/RgNC+0LLQtdGA0Y/QtdC8LCDQtdGB0YLR
jCDQu9C4INGDINCy0LjQtNC20LXRgtCwINCw0YLRgNC40LHRg9GCIGRhdGEgKFNlbGVjdGFibGVU
ZXh0KQogICAgICAgICAgICAjINCSINGA0LXQttC40LzQtSDQv9GA0LXQstGM0Y4g0YLQsNC8INC7
0LXQttC40YIgdXJ3aWQuVGV4dCDQsdC10LcgZGF0YQogICAgICAgICAgICBpZiBpc2luc3RhbmNl
KHcsIFNlbGVjdGFibGVUZXh0KSBhbmQgaGFzYXR0cih3LCAnZGF0YScpOgogICAgICAgICAgICAg
ICAgcmV0dXJuIHcuZGF0YQoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICBleGNlcHQg
RXhjZXB0aW9uOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiB2aWV3X2l0ZW0oc2Vs
Zik6CiAgICAgICAgZm9jdXNlZCA9IHNlbGYuZ2V0X2ZvY3VzZWRfaXRlbSgpCiAgICAgICAgaWYg
bm90IGZvY3VzZWQ6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpdGVtX3R5cGUgPSBmb2N1
c2VkWyd0eXBlJ10KCiAgICAgICAgaWYgaXRlbV90eXBlID09ICdmc19maWxlJzoKICAgICAgICAg
ICAgZmlsZV9wYXRoID0gb3MucGF0aC5qb2luKHNlbGYuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgs
IGZvY3VzZWRbJ25hbWUnXSkKICAgICAgICAgICAgc2VsZi5fdmlld19maWxlKGZpbGVfcGF0aCwg
Zm9jdXNlZFsnbmFtZSddKQoKICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnczNfZmlsZSc6CiAg
ICAgICAgICAgICMg0J/RgNC+0LLQtdGA0Y/QtdC8INC60L7Qu9C40YfQtdGB0YLQstC+INCy0LXR
gNGB0LjQuQogICAgICAgICAgICBpZiBmb2N1c2VkLmdldCgndmVyc2lvbl9jb3VudCcsIDEpID4g
MToKICAgICAgICAgICAgICAgICMg0J/QvtC60LDQt9GL0LLQsNC10Lwg0LTQuNCw0LvQvtCzINCy
0YvQsdC+0YDQsCDQstC10YDRgdC40LgKICAgICAgICAgICAgICAgIHNlbGYuc2hvd192ZXJzaW9u
X3NlbGVjdF9kaWFsb2coZm9jdXNlZCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
ICMg0J/RgNC+0YHQvNCw0YLRgNC40LLQsNC10Lwg0LXQtNC40L3RgdGC0LLQtdC90L3Rg9GOINCy
0LXRgNGB0LjRjgogICAgICAgICAgICAgICAgc2VsZi52aWV3X3MzX2ZpbGVfdmVyc2lvbihmb2N1
c2VkKQoKICAgICAgICBlbGlmIGl0ZW1fdHlwZSBpbiAoJ2ZzX2RpcicsICdzM19kaXInLCAnYnVj
a2V0Jyk6CiAgICAgICAgICAgIHNlbGYuX2NhbGN1bGF0ZV9zaXplKGZvY3VzZWQpCgogICAgZGVm
IF92aWV3X2ZpbGUoc2VsZiwgZmlsZV9wYXRoLCB0aXRsZSwgY2xvc2VfY2FsbGJhY2s9Tm9uZSk6
CiAgICAgICAgdHJ5OgogICAgICAgICAgICBjb250ZW50ID0gIiIKCiAgICAgICAgICAgICMg0J/R
gNC+0LLQtdGA0Y/QtdC8INC90LAg0LHQuNC90LDRgNC90L7RgdGC0YwKICAgICAgICAgICAgaWYg
aXNfYmluYXJ5X2ZpbGUoZmlsZV9wYXRoKToKICAgICAgICAgICAgICAgICMg0KfQuNGC0LDQtdC8
INCyINCx0LjQvdCw0YDQvdC+0Lwg0YDQtdC20LjQvNC1INC00LvRjyBIRVgg0L/RgNC+0YHQvNC+
0YLRgNCwCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgZmlsZV9zaXpl
ID0gb3MucGF0aC5nZXRzaXplKGZpbGVfcGF0aCkKICAgICAgICAgICAgICAgICAgICBjb250ZW50
ID0gZiJbQmluYXJ5IGZpbGU6IHt0aXRsZX1dXG5GaWxlIHNpemU6IHtmaWxlX3NpemV9IGJ5dGVz
XG5cbiIKCiAgICAgICAgICAgICAgICAgICAgIyDQp9C40YLQsNC10Lwg0L3QsNGH0LDQu9C+INGE
0LDQudC70LAgKNC90LDQv9GA0LjQvNC10YAsINC/0LXRgNCy0YvQtSA0S0Ig0LTQu9GPINC/0YDQ
vtGB0LzQvtGC0YDQsCkKICAgICAgICAgICAgICAgICAgICByZWFkX2xpbWl0ID0gNDA5NgogICAg
ICAgICAgICAgICAgICAgIHdpdGggb3BlbihmaWxlX3BhdGgsICdyYicpIGFzIGY6CiAgICAgICAg
ICAgICAgICAgICAgICAgIGRhdGEgPSBmLnJlYWQocmVhZF9saW1pdCkKICAgICAgICAgICAgICAg
ICAgICAgICAgY29udGVudCArPSBzZWxmLmFwcC5mb3JtYXRfaGV4X2NvbnRlbnQoZGF0YSkKCiAg
ICAgICAgICAgICAgICAgICAgaWYgZmlsZV9zaXplID4gcmVhZF9saW1pdDoKICAgICAgICAgICAg
ICAgICAgICAgICAgY29udGVudCArPSAiXG5cblsuLi4gQmluYXJ5IGNvbnRlbnQgdHJ1bmNhdGVk
IC4uLl0iCgogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAg
ICAgICAgICAgIGNvbnRlbnQgPSBmIkVycm9yIHJlYWRpbmcgYmluYXJ5IGZpbGU6IHtzdHIoZSl9
IgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIyDQotC10LrRgdGC0L7QstGL0Lkg
0YDQtdC20LjQvCAo0LrQsNC6INCx0YvQu9C+KQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAg
ICAgICAgICAgICAgIHdpdGggb3BlbihmaWxlX3BhdGgsICdyJywgZW5jb2Rpbmc9J3V0Zi04Jywg
ZXJyb3JzPSdyZXBsYWNlJykgYXMgZjoKICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9
IGYucmVhZCg1MDAwMCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGNvbnRlbnQpID09
IDUwMDAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSAiXG5cblsuLi4g
RmlsZSB0cnVuY2F0ZWQgLi4uXSIKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMg
ZToKICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gZiJFcnJvciByZWFkaW5nIGZpbGU6IHtz
dHIoZSl9IgoKICAgICAgICAgICAgZGVmIG9uX3ZpZXdlcl9jbG9zZSgpOgogICAgICAgICAgICAg
ICAgc2VsZi5hcHAuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgICAgIGlmIGNsb3NlX2NhbGxi
YWNrOgogICAgICAgICAgICAgICAgICAgIGNsb3NlX2NhbGxiYWNrKCkKCiAgICAgICAgICAgICMg
0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0LzQvtC90L7RiNC40YDQuNC90L3Ri9C5INGI0YDQuNGE0YIg
KNC+0LHRi9GH0L3QviDQv9C+INGD0LzQvtC70YfQsNC90LjRjiDQsiDRgtC10YDQvNC40L3QsNC7
0LUpCiAgICAgICAgICAgIHZpZXdlciA9IEZpbGVWaWV3ZXJEaWFsb2coZidWaWV3OiB7dGl0bGV9
JywgY29udGVudCwgb25fdmlld2VyX2Nsb3NlKQogICAgICAgICAgICBzZWxmLmFwcC5zaG93X2Rp
YWxvZyh2aWV3ZXIsIGhlaWdodD0oJ3JlbGF0aXZlJywgODApKQoKICAgICAgICBleGNlcHQgRXhj
ZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KGYnRXJyb3Igdmll
d2luZyBmaWxlOiB7c3RyKGUpfScpCgogICAgZGVmIF9jYWxjdWxhdGVfc2l6ZShzZWxmLCBpdGVt
KToKICAgICAgICAiIiLQn9C+0LTRgdGH0LXRgiDRgNCw0LfQvNC10YDQsCDQtNC40YDQtdC60YLQ
vtGA0LjQuC/QsdCw0LrQtdGC0LAv0L/RgdC10LLQtNC+0LTQuNGA0LXQutGC0L7RgNC40LgiIiIK
ICAgICAgICBpdGVtX3R5cGUgPSBpdGVtWyd0eXBlJ10KCiAgICAgICAgZGVmIGNhbGN1bGF0ZV9p
bl90aHJlYWQoKToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgdG90YWxfc2l6ZSA9
IDAKICAgICAgICAgICAgICAgIGZpbGVfY291bnQgPSAwCgogICAgICAgICAgICAgICAgaWYgaXRl
bV90eXBlID09ICdmc19kaXInOgogICAgICAgICAgICAgICAgICAgIGRpcl9wYXRoID0gb3MucGF0
aC5qb2luKHNlbGYuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIGl0ZW1bJ25hbWUnXSkKICAgICAg
ICAgICAgICAgICAgICBmaWxlcyA9IHNlbGYuZnNfYnJvd3Nlci5saXN0X2FsbF9maWxlcyhkaXJf
cGF0aCkKICAgICAgICAgICAgICAgICAgICBmaWxlX2NvdW50ID0gbGVuKGZpbGVzKQogICAgICAg
ICAgICAgICAgICAgIHRvdGFsX3NpemUgPSBzdW0oZlsnc2l6ZSddIGZvciBmIGluIGZpbGVzKQoK
ICAgICAgICAgICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdzM19kaXInOgogICAgICAgICAgICAg
ICAgICAgIG9iamVjdHMgPSBzZWxmLnMzX21hbmFnZXIubGlzdF9hbGxfb2JqZWN0cyhzZWxmLmN1
cnJlbnRfYnVja2V0LCBpdGVtWydrZXknXSkKICAgICAgICAgICAgICAgICAgICBmaWxlX2NvdW50
ID0gbGVuKG9iamVjdHMpCiAgICAgICAgICAgICAgICAgICAgdG90YWxfc2l6ZSA9IHN1bShvYmou
Z2V0KCdTaXplJywgMCkgZm9yIG9iaiBpbiBvYmplY3RzKQoKICAgICAgICAgICAgICAgIGVsaWYg
aXRlbV90eXBlID09ICdidWNrZXQnOgogICAgICAgICAgICAgICAgICAgIG9iamVjdHMgPSBzZWxm
LnMzX21hbmFnZXIubGlzdF9hbGxfb2JqZWN0cyhpdGVtWyduYW1lJ10sICcnKQogICAgICAgICAg
ICAgICAgICAgIGZpbGVfY291bnQgPSBsZW4ob2JqZWN0cykKICAgICAgICAgICAgICAgICAgICB0
b3RhbF9zaXplID0gc3VtKG9iai5nZXQoJ1NpemUnLCAwKSBmb3Igb2JqIGluIG9iamVjdHMpCgog
ICAgICAgICAgICAgICAgc2VsZi5hcHAubG9vcC5kcmF3X3NjcmVlbigpCiAgICAgICAgICAgICAg
ICByZXN1bHRfbXNnID0gZidTaXplOiB7Zm9ybWF0X3NpemUodG90YWxfc2l6ZSl9ICh7ZmlsZV9j
b3VudH0gZmlsZXMpJwoKICAgICAgICAgICAgICAgICMg0J7QsdC90L7QstC70Y/QtdC8IFVJINC4
INC/0YDQuNC90YPQtNC40YLQtdC70YzQvdC+INGA0LjRgdGD0LXQvCDRjdC60YDQsNC9CiAgICAg
ICAgICAgICAgICBkZWYgdXBkYXRlX3Jlc3VsdChsb29wLCB1c2VyX2RhdGEpOgogICAgICAgICAg
ICAgICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KHJlc3VsdF9tc2cpCiAgICAgICAgICAgICAg
ICAgICAgc2VsZi5hcHAubG9vcC5kcmF3X3NjcmVlbigpCgogICAgICAgICAgICAgICAgc2VsZi5h
cHAubG9vcC5zZXRfYWxhcm1faW4oMCwgdXBkYXRlX3Jlc3VsdCkKCiAgICAgICAgICAgICAgICAj
INCT0JvQkNCS0J3QntCVOiDQkdGD0LTQuNC8INC+0YHQvdC+0LLQvdC+0Lkg0YbQuNC60LshCiAg
ICAgICAgICAgICAgICBzZWxmLmFwcC53YWtlX3VwKCkKCiAgICAgICAgICAgIGV4Y2VwdCBFeGNl
cHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGRlZiBzaG93X2Vycm9yKGxvb3A9Tm9uZSwgdXNl
cl9kYXRhPU5vbmUpOgogICAgICAgICAgICAgICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KGYn
RXJyb3IgY2FsY3VsYXRpbmcgc2l6ZToge3N0cihlKX0nKQogICAgICAgICAgICAgICAgICAgICMg
c2VsZi5hcHAubG9vcC5kcmF3X3NjcmVlbigpCgogICAgICAgICAgICAgICAgc2VsZi5hcHAubG9v
cC5zZXRfYWxhcm1faW4oMCwgc2hvd19lcnJvcikKICAgICAgICAgICAgICAgIHNlbGYuYXBwLndh
a2VfdXAoKSAgIyDQkdGD0LTQuNC8INGG0LjQutC7INC4INC/0YDQuCDQvtGI0LjQsdC60LUKCiAg
ICAgICAgc2VsZi5hcHAuc2hvd19yZXN1bHQoJ0NhbGN1bGF0aW5nIHNpemUuLi4nKQogICAgICAg
IHRocmVhZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNhbGN1bGF0ZV9pbl90aHJlYWQpCiAg
ICAgICAgdGhyZWFkLmRhZW1vbiA9IFRydWUKICAgICAgICB0aHJlYWQuc3RhcnQoKQoKCmNsYXNz
IElucHV0RGlhbG9nKHVyd2lkLldpZGdldFdyYXApOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHRp
dGxlLCBwcm9tcHQsIGNhbGxiYWNrLCBkZWZhdWx0X3RleHQ9JycpOgogICAgICAgIHNlbGYuY2Fs
bGJhY2sgPSBjYWxsYmFjawogICAgICAgIHNlbGYuZWRpdCA9IHVyd2lkLkVkaXQocHJvbXB0LCBk
ZWZhdWx0X3RleHQpCgogICAgICAgIG9rX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBPSyBdJykK
ICAgICAgICBjYW5jZWxfYnV0dG9uID0gdXJ3aWQuQnV0dG9uKCdbIENhbmNlbCBdJykKCiAgICAg
ICAgdXJ3aWQuY29ubmVjdF9zaWduYWwob2tfYnV0dG9uLCAnY2xpY2snLCBzZWxmLm9uX29rKQog
ICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFsKGNhbmNlbF9idXR0b24sICdjbGljaycsIHNlbGYu
b25fY2FuY2VsKQoKICAgICAgICBidXR0b25zID0gdXJ3aWQuQ29sdW1ucyhbCiAgICAgICAgICAg
ICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndp
ZC5BdHRyTWFwKG9rX2J1dHRvbiwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uZm9jdXMnKSks
CiAgICAgICAgICAgICgnZml4ZWQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICgn
cGFjaycsIHVyd2lkLkF0dHJNYXAoY2FuY2VsX2J1dHRvbiwgJ2J1dHRvbicsIGZvY3VzX21hcD0n
YnV0dG9uZm9jdXMnKSksCiAgICAgICAgICAgICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4dCgnJykp
LAogICAgICAgIF0sIGRpdmlkZWNoYXJzPTApCgogICAgICAgIGNvbnRlbnQgPSBbCiAgICAgICAg
ICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgICAgICgncGFjaycsIHNlbGYu
ZWRpdCksCiAgICAgICAgXQoKICAgICAgICBjb250ZW50LmV4dGVuZChbCiAgICAgICAgICAgICgn
cGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgICAgICgncGFjaycsIGJ1dHRvbnMpLAog
ICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgIF0pCgogICAgICAg
IHBpbGUgPSB1cndpZC5QaWxlKGNvbnRlbnQpCgogICAgICAgIGZpbGwgPSB1cndpZC5GaWxsZXIo
cGlsZSkKICAgICAgICBzdXBlcigpLl9faW5pdF9fKHVyd2lkLkF0dHJNYXAodXJ3aWQuTGluZUJv
eChmaWxsLCB0aXRsZT10aXRsZSksICdkaWFsb2cnKSkKCiAgICBkZWYga2V5cHJlc3Moc2VsZiwg
c2l6ZSwga2V5KToKICAgICAgICBpZiBrZXkgPT0gJ2VudGVyJzoKICAgICAgICAgICAgYnRuID0g
Z2V0X2ZvY3VzX2J1dHRvbihzZWxmLl93KQogICAgICAgICAgICBpZiBidG4gaXMgbm90IE5vbmU6
CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGJ0biwgdXJ3aWQuQnV0dG9uKSBhbmQgYnRu
LmdldF9sYWJlbCgpID09ICdbIENhbmNlbCBdJzoKICAgICAgICAgICAgICAgICAgICAjIEVudGVy
INC90LAgQ2FuY2VsIC0+INC+0YLQvNC10L3QsAogICAgICAgICAgICAgICAgICAgIHNlbGYub25f
Y2FuY2VsKE5vbmUpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICAgICAg
IyDQktGB0LUg0L7RgdGC0LDQu9GM0L3Ri9C1INGB0LvRg9GH0LDQuDogRW50ZXIgLT4gT0sKICAg
ICAgICAgICAgc2VsZi5vbl9vayhOb25lKQogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAg
IGVsaWYga2V5ID09ICdlc2MnOgogICAgICAgICAgICBzZWxmLm9uX2NhbmNlbChOb25lKQogICAg
ICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIHJldHVybiBzdXBlcigpLmtleXByZXNzKHNpemUs
IGtleSkKCiAgICBkZWYgb25fb2soc2VsZiwgYnV0dG9uKToKICAgICAgICB0ZXh0ID0gc2VsZi5l
ZGl0LmdldF9lZGl0X3RleHQoKQogICAgICAgIGlmIHRleHQuc3RyaXAoKToKICAgICAgICAgICAg
c2VsZi5jYWxsYmFjayhUcnVlLCB0ZXh0LnN0cmlwKCkpCgogICAgZGVmIG9uX2NhbmNlbChzZWxm
LCBidXR0b24pOgogICAgICAgIHNlbGYuY2FsbGJhY2soRmFsc2UsIE5vbmUpCgoKY2xhc3MgQ29u
ZmlybURpYWxvZyh1cndpZC5XaWRnZXRXcmFwKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0aXRs
ZSwgbWVzc2FnZSwgaXRlbXNfaW5mbywgY2FsbGJhY2ssIGZvY3VzX3llcz1GYWxzZSk6CiAgICAg
ICAgc2VsZi5jYWxsYmFjayA9IGNhbGxiYWNrCiAgICAgICAgc2VsZi5mb2N1c195ZXMgPSBmb2N1
c195ZXMKCiAgICAgICAgeWVzX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBZZXMgXScpCiAgICAg
ICAgbm9fYnV0dG9uID0gdXJ3aWQuQnV0dG9uKCdbIE5vIF0nKQoKICAgICAgICB1cndpZC5jb25u
ZWN0X3NpZ25hbCh5ZXNfYnV0dG9uLCAnY2xpY2snLCBzZWxmLm9uX3llcykKICAgICAgICB1cndp
ZC5jb25uZWN0X3NpZ25hbChub19idXR0b24sICdjbGljaycsIHNlbGYub25fbm8pCgogICAgICAg
IGlmIGZvY3VzX3llcyA6CiAgICAgICAgICAgIGJ1dHRvbnMgPSB1cndpZC5Db2x1bW5zKFsKICAg
ICAgICAgICAgICAgICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgICAgICAg
ICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcCh5ZXNfYnV0dG9uLCAnYnV0dG9uJywgZm9jdXNfbWFw
PSdidXR0b25mb2N1cycpKSwKICAgICAgICAgICAgICAgICgnZml4ZWQnLCAxLCB1cndpZC5UZXh0
KCcnKSksCiAgICAgICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKG5vX2J1dHRvbiwg
J2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uZm9jdXMnKSksCiAgICAgICAgICAgICAgICAoJ3dl
aWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICAgICAgXSwgZGl2aWRlY2hhcnM9MCkK
ICAgICAgICBlbHNlOgogICAgICAgICAgICBidXR0b25zID0gdXJ3aWQuQ29sdW1ucyhbCiAgICAg
ICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICAgICAgICAg
ICgncGFjaycsIHVyd2lkLkF0dHJNYXAobm9fYnV0dG9uLCAnYnV0dG9uJywgZm9jdXNfbWFwPSdi
dXR0b25mb2N1cycpKSwKICAgICAgICAgICAgICAgICgnZml4ZWQnLCAxLCB1cndpZC5UZXh0KCcn
KSksCiAgICAgICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKHllc19idXR0b24sICdi
dXR0b24nLCBmb2N1c19tYXA9J2J1dHRvbmZvY3VzJykpLAogICAgICAgICAgICAgICAgKCd3ZWln
aHQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgIF0sIGRpdmlkZWNoYXJzPTApCgog
ICAgICAgIGNvbnRlbnQgPSBbCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLlRleHQobWVzc2Fn
ZSkpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgIF0KCiAg
ICAgICAgaWYgaXRlbXNfaW5mbzoKICAgICAgICAgICAgY29udGVudC5hcHBlbmQoKCdwYWNrJywg
dXJ3aWQuVGV4dCgiSXRlbXM6IiwgYWxpZ249J2xlZnQnKSkpCiAgICAgICAgICAgIG1heF9kaXNw
bGF5ID0gMTAKCiAgICAgICAgICAgIGZvciBpdGVtX2luZm8gaW4gaXRlbXNfaW5mb1s6bWF4X2Rp
c3BsYXldOgogICAgICAgICAgICAgICAgY29udGVudC5hcHBlbmQoKCdwYWNrJywgdXJ3aWQuVGV4
dChmIiAge2l0ZW1faW5mb30iKSkpCgogICAgICAgICAgICBpZiBsZW4oaXRlbXNfaW5mbykgPiBt
YXhfZGlzcGxheToKICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kKCgncGFjaycsIHVyd2lk
LlRleHQoZiIgIC4uLiBhbmQge2xlbihpdGVtc19pbmZvKSAtIG1heF9kaXNwbGF5fSBtb3JlIikp
KQoKICAgICAgICAgICAgY29udGVudC5hcHBlbmQoKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSkK
ICAgICAgICBjb250ZW50LmV4dGVuZChbCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlk
ZXIoKSksCiAgICAgICAgICAgICgncGFjaycsIGJ1dHRvbnMpLAogICAgICAgICAgICAoJ3BhY2sn
LCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgIF0pCgogICAgICAgIHBpbGUgPSB1cndpZC5QaWxl
KGNvbnRlbnQpCgogICAgICAgIGZpbGwgPSB1cndpZC5GaWxsZXIocGlsZSwgdmFsaWduPSd0b3An
KQogICAgICAgICMgc3VwZXIoKS5fX2luaXRfXyh1cndpZC5BdHRyTWFwKHVyd2lkLkxpbmVCb3go
ZmlsbCksICdkaWFsb2cnKSkKICAgICAgICBzdXBlcigpLl9faW5pdF9fKHVyd2lkLkF0dHJNYXAo
dXJ3aWQuTGluZUJveChmaWxsLCB0aXRsZT10aXRsZSksICdkaWFsb2cnKSkKCiAgICBkZWYga2V5
cHJlc3Moc2VsZiwgc2l6ZSwga2V5KToKICAgICAgICBpZiBrZXkgPT0gJ2VudGVyJzoKICAgICAg
ICAgICAgYnRuID0gZ2V0X2ZvY3VzX2J1dHRvbihzZWxmLl93KQogICAgICAgICAgICBpZiBidG4g
aXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGJ0biwgdXJ3aWQuQnV0
dG9uKSBhbmQgYnRuLmdldF9sYWJlbCgpID09ICdbIFllcyBdJzoKICAgICAgICAgICAgICAgICAg
ICBzZWxmLm9uX3llcyhOb25lKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAg
ICAgICAgICAgICBpZiBpc2luc3RhbmNlKGJ0biwgdXJ3aWQuQnV0dG9uKSBhbmQgYnRuLmdldF9s
YWJlbCgpID09ICdbIE5vIF0nOgogICAgICAgICAgICAgICAgICAgIHNlbGYub25fbm8oTm9uZSkK
ICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAjINCS0YHQtSDQvtGB
0YLQsNC70YzQvdGL0LUg0YHQu9GD0YfQsNC4OiBFbnRlciAtPiBObwogICAgICAgICAgICBzZWxm
Lm9uX25vKE5vbmUpCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgZWxpZiBrZXkgPT0g
J2VzYyc6CiAgICAgICAgICAgIHNlbGYub25fbm8oTm9uZSkKICAgICAgICAgICAgcmV0dXJuIE5v
bmUKICAgICAgICByZXR1cm4gc3VwZXIoKS5rZXlwcmVzcyhzaXplLCBrZXkpCgogICAgZGVmIG9u
X3llcyhzZWxmLCBidXR0b24pOgogICAgICAgIHNlbGYuY2FsbGJhY2soVHJ1ZSkKCiAgICBkZWYg
b25fbm8oc2VsZiwgYnV0dG9uKToKICAgICAgICBzZWxmLmNhbGxiYWNrKEZhbHNlKQoKCmNsYXNz
IER1YWxQYW5lQXBwOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHMzX2NvbmZpZyk6CiAgICAgICAg
c2VsZi5zM19jb25maWcgPSBzM19jb25maWcKICAgICAgICBzZWxmLmJvb2ttYXJrc19tYW5hZ2Vy
ID0gQm9va21hcmtzTWFuYWdlcigpICAjIDwtLS0g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8K
CiAgICAgICAgc2VsZi5wcmV2aWV3X21vZGUgPSBGYWxzZQogICAgICAgIHNlbGYucHJldmlld19j
YWNoZSA9IHt9ICMg0JrQtdGIINC00LvRjyDQstC10YDRgdC40LkgUzMge2tleTogW3ZlcnNpb25z
XX0KICAgICAgICBzZWxmLnByZXZpZXdfdmVyc2lvbl9pbmRleCA9IDAKCiAgICAgICAgc2VsZi5s
ZWZ0X3BhbmVsID0gUGFuZWxXaWRnZXQoJycsIHBhbmVsX3R5cGU9J3Jvb3RfbWVudScsIHMzX2Nv
bmZpZz1zM19jb25maWcsIGFwcD1zZWxmKQogICAgICAgIHNlbGYucmlnaHRfcGFuZWwgPSBQYW5l
bFdpZGdldCgnJywgcGFuZWxfdHlwZT0ncm9vdF9tZW51JywgczNfY29uZmlnPXMzX2NvbmZpZywg
YXBwPXNlbGYpCgogICAgICAgIHNlbGYuY29sdW1ucyA9IHVyd2lkLkNvbHVtbnMoWwogICAgICAg
ICAgICAoJ3dlaWdodCcsIDEsIHNlbGYubGVmdF9wYW5lbCksCiAgICAgICAgICAgICgnd2VpZ2h0
JywgMSwgc2VsZi5yaWdodF9wYW5lbCkKICAgICAgICBdLCBkaXZpZGVjaGFycz0xLCBmb2N1c19j
b2x1bW49MCkKCiAgICAgICAgc2VsZi5ob3RrZXlfdGV4dCA9IHVyd2lkLlRleHQoCiAgICAgICAg
ICAgICdGMjpzb3J0IHwgRjM6dmlldyB8IEY0OmluZm8gfCBGNTpjb3B5IHwgRjY6bW92ZSB8IEY3
Om1rZGlyIHwgRjg6ZGVsIHwgRjk6cHVyZ2UgfCBGMTA6cXVpdGUgfCBGMTE6dmVyc2lvbmluZyB8
IC86ZmlsdGVyIHxJTlM6c2VsIHwgKzpzZWxlY3QgfCAtOnVuc2VsIHwgKjppbnZlcnQgfCBDdHJs
K1Y6UXVpY2sgVmlldyB8IEN0cmwrQjpzYXZlIGJtIHwgQWx0K0I6bG9hZCBibScKICAgICAgICAp
CiAgICAgICAgc2VsZi5yZXN1bHRfdGV4dCA9IHVyd2lkLlRleHQoJycpCgogICAgICAgICMg0KHQ
vtC30LTQsNC10LwgQXR0ck1hcCDQuCDRgdC+0YXRgNCw0L3Rj9C10Lwg0YHRgdGL0LvQutGDINCy
IHNlbGYucmVzdWx0X21hcAogICAgICAgIHNlbGYucmVzdWx0X21hcCA9IHVyd2lkLkF0dHJNYXAo
c2VsZi5yZXN1bHRfdGV4dCwgJ3Jlc3VsdCcpCgogICAgICAgICMg0JjRgdC/0L7Qu9GM0LfRg9C1
0Lwg0YHQvtGF0YDQsNC90LXQvdC90YPRjiDQv9C10YDQtdC80LXQvdC90YPRjiDQv9GA0Lgg0YHQ
vtC30LTQsNC90LjQuCBQaWxlCiAgICAgICAgc3RhdHVzX2NvbnRlbnQgPSB1cndpZC5QaWxlKFsK
ICAgICAgICAgICAgKCdwYWNrJywgc2VsZi5yZXN1bHRfbWFwKSwKICAgICAgICAgICAgKCdwYWNr
JywgdXJ3aWQuQXR0ck1hcChzZWxmLmhvdGtleV90ZXh0LCAnc3RhdHVzJykpCiAgICAgICAgXSkK
CiAgICAgICAgIyBzdGF0dXNfY29udGVudCA9IHVyd2lkLlBpbGUoWwogICAgICAgICMgICAgICgn
cGFjaycsIHVyd2lkLkF0dHJNYXAoc2VsZi5yZXN1bHRfdGV4dCwgJ3Jlc3VsdCcpKSwKICAgICAg
ICAjICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKHNlbGYuaG90a2V5X3RleHQsICdzdGF0dXMn
KSkKICAgICAgICAjIF0pCgogICAgICAgIHNlbGYuZnJhbWUgPSB1cndpZC5GcmFtZSgKICAgICAg
ICAgICAgdXJ3aWQuQXR0ck1hcChzZWxmLmNvbHVtbnMsICdib2R5JyksCiAgICAgICAgICAgIGZv
b3Rlcj1zdGF0dXNfY29udGVudAogICAgICAgICkKCiAgICAgICAgc2VsZi5tYWluX3dpZGdldCA9
IHNlbGYuZnJhbWUKCiAgICAgICAgc2VsZi5wYWxldHRlID0gWwogICAgICAgICAgICAoJ2hlYWRl
cicsICdibGFjaycsICdsaWdodCBjeWFuJywgJ2JvbGQnKSwKICAgICAgICAgICAgKCdwYXRoJywg
J3doaXRlJywgJ2RhcmsgY3lhbicpLAogICAgICAgICAgICAoJ21vZGUnLCAnYmxhY2snLCAnbGln
aHQgY3lhbicpLAogICAgICAgICAgICAoJ2JvZHknLCAnd2hpdGUnLCAnZGFyayBibHVlJyksCiAg
ICAgICAgICAgICgnZmlsZScsICdsaWdodCBncmF5JywgJ2RhcmsgYmx1ZScpLAogICAgICAgICAg
ICAoJ3NlbGVjdGVkJywgJ2JsYWNrJywgJ2xpZ2h0IGN5YW4nKSwKICAgICAgICAgICAgKCdzdGF0
dXMnLCAnYmxhY2snLCAnbGlnaHQgY3lhbicpLAogICAgICAgICAgICAoJ3Jlc3VsdCcsICd5ZWxs
b3cnLCAnZGFyayBibHVlJyksICAjINCe0LHRi9GH0L3Ri9C5CiAgICAgICAgICAgICgncmVzdWx0
X2Vycm9yJywgJ3doaXRlJywgJ2RhcmsgcmVkJyksICAjINCe0YjQuNCx0LrQsAogICAgICAgICAg
ICAoJ3Jlc3VsdF93YXJuJywgJ2JsYWNrJywgJ3llbGxvdycpLCAgIyDQn9GA0LXQtNGD0L/RgNC1
0LbQtNC10L3QuNC1CiAgICAgICAgICAgICgnZGlhbG9nJywgJ2JsYWNrJywgJ2xpZ2h0IGdyYXkn
KSwKICAgICAgICAgICAgKCdkaWFsb2dmNCcsICd3aGl0ZScsICdkYXJrIGJsdWUnKSwKICAgICAg
ICAgICAgKCdkaWFsb2dfdGl0bGUnLCAnYmxhY2snLCAnbGlnaHQgY3lhbicpLAogICAgICAgICAg
ICAoJ2VkaXQnLCAnYmxhY2snLCAnbGlnaHQgY3lhbicpLAogICAgICAgICAgICAoJ2VkaXRfZm9j
dXMnLCAnd2hpdGUnLCAnZGFyayBjeWFuJyksCiAgICAgICAgICAgICgnYnV0dG9uJywgJ2JsYWNr
JywgJ2xpZ2h0IGdyYXknKSwKICAgICAgICAgICAgKCdidXR0b25fZm9jdXMnLCAnd2hpdGUnLCAn
ZGFyayBjeWFuJyksCiAgICAgICAgICAgICgnZXJyb3InLCAnbGlnaHQgcmVkJywgJ2RhcmsgYmx1
ZScpLAogICAgICAgICAgICAoJ2luZm9fbmFtZScsICd5ZWxsb3cnLCAnZGFyayBibHVlJyksCiAg
ICAgICAgICAgICgnaW5mb192YWx1ZScsICd3aGl0ZScsICdkYXJrIGJsdWUnKSwKICAgICAgICBd
CgogICAgICAgICMg0J/QtdGA0LXQvNC10L3QvdCw0Y8g0LTQu9GPINGA0LXQttC40LzQsCAi0L/Q
tdGA0LXQt9Cw0L/QuNGB0LDRgtGMINCy0YHQtSIKICAgICAgICBzZWxmLm92ZXJ3cml0ZV9hbGwg
PSBGYWxzZQogICAgICAgIHNlbGYudmVyc2lvbl9hbGwgPSBGYWxzZQogICAgICAgIHNlbGYuc2tp
cF9hbGwgPSBGYWxzZQogICAgICAgIGlmIHBsYXRmb3JtLnN5c3RlbSgpICE9ICdXaW5kb3dzJzoK
ICAgICAgICAgICAgc2VsZi5waXBlX3IsIHNlbGYucGlwZV93ID0gb3MucGlwZSgpCiAgICAgICAg
ICAgIHNlbGYudXNlX3BpcGUgPSBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi51
c2VfcGlwZSA9IEZhbHNlCgogICAgZGVmIHdha2V1cChzZWxmKToKICAgICAgICAiIiLQn9GA0LjQ
vdGD0LTQuNGC0LXQu9GM0L3QviDRgNCw0LfQsdGD0LTQuNGC0YwgTWFpbkxvb3Ag0LjQtyDQtNGA
0YPQs9C+0LPQviDQv9C+0YLQvtC60LAiIiIKICAgICAgICBpZiBzZWxmLnVzZV9waXBlOgogICAg
ICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBvcy53cml0ZShzZWxmLnBpcGVfdywgYichJykK
ICAgICAgICAgICAgZXhjZXB0IChPU0Vycm9yLCBBdHRyaWJ1dGVFcnJvcik6CiAgICAgICAgICAg
ICAgICBwYXNzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBGYWxsYmFjayDQtNC70Y8gV2lu
ZG93cyDQuNC70Lgg0LXRgdC70LggcGlwZSDQvdC1INC90LDRgdGC0YDQvtC10L0KICAgICAgICAg
ICAgIyDQrdGC0L4g0LzQtdC90LXQtSDRjdGE0YTQtdC60YLQuNCy0L3Qviwg0L3QviDQu9GD0YfR
iNC1LCDRh9C10Lwg0L3QuNGH0LXQs9C+CiAgICAgICAgICAgIHBhc3MKCiAgICBkZWYgcnVuKHNl
bGYpOgogICAgICAgICMg0KHQvtC30LTQsNC10Lwg0Y3QutGA0LDQvSDRgSDRj9Cy0L3QvtC5INC/
0L7QtNC00LXRgNC20LrQvtC5IFVURi04CiAgICAgICAgc2NyZWVuID0gdXJ3aWQucmF3X2Rpc3Bs
YXkuU2NyZWVuKCkKICAgICAgICBzY3JlZW4uc2V0X3Rlcm1pbmFsX3Byb3BlcnRpZXMoY29sb3Jz
PTI1NikKCiAgICAgICAgdXJ3aWQuc2V0X2VuY29kaW5nKCd1dGYtOCcpCgogICAgICAgIHNlbGYu
bG9vcCA9IHVyd2lkLk1haW5Mb29wKAogICAgICAgICAgICBzZWxmLm1haW5fd2lkZ2V0LAogICAg
ICAgICAgICBwYWxldHRlPXNlbGYucGFsZXR0ZSwKICAgICAgICAgICAgdW5oYW5kbGVkX2lucHV0
PXNlbGYuaGFuZGxlX2lucHV0LAogICAgICAgICAgICBzY3JlZW49c2NyZWVuCiAgICAgICAgKQog
ICAgICAgIGlmIHBsYXRmb3JtLnN5c3RlbSgpID09ICdXaW5kb3dzJzoKICAgICAgICAgICAgIyDQ
ktC60LvRjtGH0LDQtdC8ICLRgdC10YDQtNGG0LXQsdC40LXQvdC40LUiINC00LvRjyBXaW5kb3dz
LCDRh9GC0L7QsdGLINC40L3RgtC10YDRhNC10LnRgSDQvdC1INC30LDQstC40YHQsNC7CiAgICAg
ICAgICAgIHNlbGYubG9vcC5zZXRfYWxhcm1faW4oMC4xLCBzZWxmLl93aW5kb3dzX2hlYXJ0YmVh
dCkKICAgICAgICAjINCf0YvRgtCw0LXQvNGB0Y8g0LjRgdC/0L7Qu9GM0LfQvtCy0LDRgtGMINC/
0LDQudC/ICjQtNC70Y8gTGludXgpLCDQvdC+INC40LPQvdC+0YDQuNGA0YPQtdC8INC+0YjQuNCx
0LrQuCDQvdCwIFdpbmRvd3MKICAgICAgICBpZiBzZWxmLnVzZV9waXBlOgogICAgICAgICAgICB0
cnk6CiAgICAgICAgICAgICAgICBzZWxmLmxvb3Aud2F0Y2hfZmlsZShzZWxmLnBpcGVfciwgc2Vs
Zi5sb29wX3dha2V1cF9jYWxsYmFjaykKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAg
ICAgICAgICAgICAgIHBhc3MgICMg0J3QsCBXaW5kb3dzIHdhdGNoX2ZpbGUg0LTQu9GPINC/0LDQ
udC/0L7QsiDQvdC1INGA0LDQsdC+0YLQsNC10YIsINGB0YDQsNCx0L7RgtCw0LXRgiBoZWFydGJl
YXQKCiAgICAgICAgc2VsZi5sb29wLnJ1bigpCgogICAgZGVmIGNvbmZpcm1fZXhpdChzZWxmKToK
ICAgICAgICAiIiLQn9C+0LrQsNC30YvQstCw0LXRgiDQtNC40LDQu9C+0LMg0L/QvtC00YLQstC1
0YDQttC00LXQvdC40Y8g0LLRi9GF0L7QtNCwINC40Lcg0L/RgNC+0LPRgNCw0LzQvNGLLiIiIgog
ICAgICAgIGRlZiBjYWxsYmFjayhjb25maXJtZWQpOgogICAgICAgICAgICBzZWxmLmNsb3NlX2Rp
YWxvZygpCiAgICAgICAgICAgIGlmIGNvbmZpcm1lZDoKICAgICAgICAgICAgICAgIHJhaXNlIHVy
d2lkLkV4aXRNYWluTG9vcCgpCgogICAgICAgIGRpYWxvZyA9IENvbmZpcm1EaWFsb2coCiAgICAg
ICAgICAgICJRdWl0IiwKICAgICAgICAgICAgIkRvIHlvdSByZWFsbHkgd2FudCB0byBxdWl0PyIs
CiAgICAgICAgICAgIFtdLAogICAgICAgICAgICBjYWxsYmFjaywKICAgICAgICAgICAgZm9jdXNf
eWVzPVRydWUKICAgICAgICApCiAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhkaWFsb2csIHdpZHRo
PSgncmVsYXRpdmUnLCA0MCksIGhlaWdodD0oJ3JlbGF0aXZlJywgMTApKQoKICAgIGRlZiB0b2dn
bGVfcHJldmlld19tb2RlKHNlbGYpOgogICAgICAgIHNlbGYucHJldmlld19tb2RlID0gbm90IHNl
bGYucHJldmlld19tb2RlCiAgICAgICAgaWYgc2VsZi5wcmV2aWV3X21vZGU6CiAgICAgICAgICAg
IHNlbGYuc2hvd19yZXN1bHQoIlByZXZpZXcgTW9kZTogT04iKQogICAgICAgICAgICBzZWxmLnVw
ZGF0ZV9wcmV2aWV3KCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0
KCJQcmV2aWV3IE1vZGU6IE9GRiIpCiAgICAgICAgICAgICMg0J7Rh9C40YnQsNC10Lwg0L3QtdCw
0LrRgtC40LLQvdGD0Y4g0L/QsNC90LXQu9GMICjQuNC70Lgg0LLQvtGB0YHRgtCw0L3QsNCy0LvQ
uNCy0LDQtdC8INC10ZEg0YHQvtGB0YLQvtGP0L3QuNC1PykKICAgICAgICAgICAgIyDQntCx0YvR
h9C90L4gUXVpY2tMb29rINC/0YDQvtGB0YLQviDQv9C10YDQtdC60YDRi9Cy0LDQtdGCINC90LXQ
sNC60YLQuNCy0L3Rg9GOINC/0LDQvdC10LvRjCDQuNC70Lgg0LjRgdC/0L7Qu9GM0LfRg9C10YIg
0LXRkS4KICAgICAgICAgICAgIyDQldGB0LvQuCDQvNGLINC40YHQv9C+0LvRjNC30YPQtdC8INC9
0LXQsNC60YLQuNCy0L3Rg9GOINC/0LDQvdC10LvRjCwg0L3QsNC8INC90YPQttC90L4g0LXQtSAi
0LfQsNC80L7RgNC+0LfQuNGC0YwiINC40LvQuCDQstGA0LXQvNC10L3QvdC+INC30LDQvNC10L3Q
uNGC0Ywg0LrQvtC90YLQtdC90YIuCgogICAgICAgICAgICAjINCf0YDQvtGB0YLQtdC50YjQuNC5
INCy0LDRgNC40LDQvdGCOiDQstC10YDQvdGD0YLRjCDQvdC10LDQutGC0LjQstC90YPRjiDQv9Cw
0L3QtdC70Ywg0LIg0L3QvtGA0LzQsNC70YzQvdGL0Lkg0YDQtdC20LjQvCAo0L7QsdC90L7QstC4
0YLRjCkKICAgICAgICAgICAgaW5hY3RpdmUgPSBzZWxmLmdldF9pbmFjdGl2ZV9wYW5lbCgpCiAg
ICAgICAgICAgIGluYWN0aXZlLnJlZnJlc2goKSAgIyDQktC+0YHRgdGC0LDQvdC+0LLQuNGCINGB
0L/QuNGB0L7QuiDRhNCw0LnQu9C+0LIKCiAgICBkZWYgdXBkYXRlX3ByZXZpZXcoc2VsZik6CiAg
ICAgICAgaWYgbm90IHNlbGYucHJldmlld19tb2RlOgogICAgICAgICAgICByZXR1cm4KCiAgICAg
ICAgYWN0aXZlX3BhbmVsID0gc2VsZi5nZXRfYWN0aXZlX3BhbmVsKCkKICAgICAgICBpbmFjdGl2
ZV9wYW5lbCA9IHNlbGYuZ2V0X2luYWN0aXZlX3BhbmVsKCkKCiAgICAgICAgaXRlbSA9IGFjdGl2
ZV9wYW5lbC5nZXRfZm9jdXNlZF9pdGVtKCkKICAgICAgICBpZiBub3QgaXRlbToKICAgICAgICAg
ICAgcmV0dXJuCiAgICAgICAgaWYgbm90IGl0ZW0gb3IgaXRlbVsndHlwZSddIG5vdCBpbiAoJ2Zz
X2ZpbGUnLCAnczNfZmlsZScpOgogICAgICAgICAgICBzZWxmLl9zaG93X3ByZXZpZXdfdGV4dChp
bmFjdGl2ZV9wYW5lbCwgIiIsIHRpdGxlPSJQcmV2aWV3IikKICAgICAgICAgICAgcmV0dXJuCgog
ICAgICAgIHRyeToKICAgICAgICAgICAgc2l6ZSA9IGludChpdGVtLmdldCgnc2l6ZScsIDApKQog
ICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgc2l6ZSA9IDAKCiAgICAgICAgaWYgc2l6ZSA+IDEw
MjQgKiAxMDA6CiAgICAgICAgICAgIHNlbGYuX3Nob3dfcHJldmlld190ZXh0KGluYWN0aXZlX3Bh
bmVsLCAiRmlsZSB0b28gbGFyZ2UgZm9yIHByZXZpZXciLCB0aXRsZT0iUHJldmlldyIpCiAgICAg
ICAgICAgIHJldHVybgoKICAgICAgICBjb250ZW50ID0gIiIKICAgICAgICBpbmZvX3RleHQgPSBm
IlBSRVZJRVc6IHtpdGVtWyduYW1lJ119IgogICAgICAgIGxvY2FsX3BhdGggPSBOb25lCiAgICAg
ICAgdGVtcF9maWxlX3BhdGggPSBOb25lCgogICAgICAgIHRyeToKICAgICAgICAgICAgIyAxLiDQ
n9C+0LvRg9GH0LDQtdC8INC/0YPRgtGMINC6INGE0LDQudC70YMKICAgICAgICAgICAgaWYgaXRl
bVsndHlwZSddID09ICdmc19maWxlJzoKICAgICAgICAgICAgICAgIGxvY2FsX3BhdGggPSBvcy5w
YXRoLmpvaW4oYWN0aXZlX3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCBpdGVtWyduYW1l
J10pCgogICAgICAgICAgICBlbGlmIGl0ZW1bJ3R5cGUnXSA9PSAnczNfZmlsZSc6CiAgICAgICAg
ICAgICAgICBpbXBvcnQgdGVtcGZpbGUKICAgICAgICAgICAgICAgICMg0KHQvtC30LTQsNC10Lwg
0LLRgNC10LzQtdC90L3Ri9C5INGE0LDQudC7CiAgICAgICAgICAgICAgICBmZCwgdGVtcF9maWxl
X3BhdGggPSB0ZW1wZmlsZS5ta3N0ZW1wKCkKICAgICAgICAgICAgICAgIG9zLmNsb3NlKGZkKQoK
ICAgICAgICAgICAgICAgIGFjdGl2ZV9wYW5lbC5zM19tYW5hZ2VyLmRvd25sb2FkX29iamVjdCgK
ICAgICAgICAgICAgICAgICAgICBhY3RpdmVfcGFuZWwuY3VycmVudF9idWNrZXQsCiAgICAgICAg
ICAgICAgICAgICAgaXRlbVsna2V5J10sCiAgICAgICAgICAgICAgICAgICAgdGVtcF9maWxlX3Bh
dGgKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGxvY2FsX3BhdGggPSB0ZW1wX2Zp
bGVfcGF0aAogICAgICAgICAgICAgICAgaW5mb190ZXh0ID0gZiJQUkVWSUVXIChTMyk6IHtpdGVt
WyduYW1lJ119IgoKICAgICAgICAgICAgIyAyLiDQp9C40YLQsNC10Lwg0LrQvtC90YLQtdC90YIK
ICAgICAgICAgICAgaWYgbG9jYWxfcGF0aCBhbmQgb3MucGF0aC5leGlzdHMobG9jYWxfcGF0aCk6
CiAgICAgICAgICAgICAgICAjINCf0YDQvtCy0LXRgNGP0LXQvCDQvdCwINCx0LjQvdCw0YDQvdC+
0YHRgtGMICjRhNGD0L3QutGG0LjRjyDQs9C70L7QsdCw0LvRjNC90LDRjyDQuNC70Lgg0LzQtdGC
0L7QtNCwINC60LvQsNGB0YHQsCkKICAgICAgICAgICAgICAgIGlmIGlzX2JpbmFyeV9maWxlKGxv
Y2FsX3BhdGgpOgogICAgICAgICAgICAgICAgICAgIHdpdGggb3Blbihsb2NhbF9wYXRoLCAncmIn
KSBhcyBmOgogICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gZi5yZWFkKDIwNDgpCiAgICAg
ICAgICAgICAgICAgICAgICAgICMg0JLQq9CX0J7QkiDQpNCj0J3QmtCm0JjQmCDQpNCe0KDQnNCQ
0KLQmNCg0J7QktCQ0J3QmNCvCiAgICAgICAgICAgICAgICAgICAgICAgICMg0JXRgdC70LggZm9y
bWF0X2hleF9jb250ZW50INGN0YLQviDQvNC10YLQvtC0INC60LvQsNGB0YHQsCBEdWFsUGFuZUFw
cDoKICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IHNlbGYuZm9ybWF0X2hleF9jb250
ZW50KGRhdGEpCgogICAgICAgICAgICAgICAgICAgICAgICBpZiBzaXplID4gMjA0ODoKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gIlxuLi4uIFRydW5jYXRlZCAuLi4iCiAg
ICAgICAgICAgICAgICAgICAgaW5mb190ZXh0ICs9ICIgW0hFWF0iCiAgICAgICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgICAgICMg0KLQtdC60YHRgtC+0LLRi9C5INGA0LXQttC40LwK
ICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4obG9jYWxfcGF0aCwgJ3InLCBlbmNvZGluZz0n
dXRmLTgnLCBlcnJvcnM9J3JlcGxhY2UnKSBhcyBmOgogICAgICAgICAgICAgICAgICAgICAgICBj
b250ZW50ID0gZi5yZWFkKDIwMDApCgogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAg
ICAgICAgICAgY29udGVudCA9IGYiRXJyb3IgZ2VuZXJhdGluZyBwcmV2aWV3OiB7ZX0iCgogICAg
ICAgIGZpbmFsbHk6CiAgICAgICAgICAgICMg0KPQtNCw0LvRj9C10Lwg0LLRgNC10LzQtdC90L3R
i9C5INGE0LDQudC7CiAgICAgICAgICAgIGlmIHRlbXBfZmlsZV9wYXRoIGFuZCBvcy5wYXRoLmV4
aXN0cyh0ZW1wX2ZpbGVfcGF0aCk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAg
ICAgICAgb3MudW5saW5rKHRlbXBfZmlsZV9wYXRoKQogICAgICAgICAgICAgICAgZXhjZXB0Ogog
ICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgc2VsZi5fc2hvd19wcmV2aWV3X3RleHQo
aW5hY3RpdmVfcGFuZWwsIGNvbnRlbnQsIHRpdGxlPWluZm9fdGV4dCkKCiAgICBkZWYgZm9ybWF0
X2hleF9jb250ZW50KHNlbGYsIGRhdGEsIG9mZnNldD0wKToKICAgICAgICAiIiLQpNC+0YDQvNCw
0YLQuNGA0YPQtdGCINCx0LDQudGC0Ysg0LIgaGV4LdCy0LjQtCAo0LrQsNC6INCyIG1jKSIiIgog
ICAgICAgIGxpbmVzID0gW10KICAgICAgICBmb3IgaSBpbiByYW5nZSgwLCBsZW4oZGF0YSksIDE2
KToKICAgICAgICAgICAgY2h1bmsgPSBkYXRhW2k6aSArIDE2XQoKICAgICAgICAgICAgIyAxLiDQ
odC80LXRidC10L3QuNC1CiAgICAgICAgICAgIGxpbmVfb2Zmc2V0ID0gZiJ7b2Zmc2V0ICsgaTow
OFh9IgoKICAgICAgICAgICAgIyAyLiBIRVgg0YfQsNGB0YLRjCAo0LPRgNGD0L/Qv9Cw0LzQuCDQ
v9C+IDQg0LHQsNC50YLQsCwg0LrQsNC6INCyINC/0YDQuNC80LXRgNC1KQogICAgICAgICAgICBo
ZXhfcGFydHMgPSBbXQogICAgICAgICAgICBmb3IgaiBpbiByYW5nZSgwLCBsZW4oY2h1bmspLCA0
KToKICAgICAgICAgICAgICAgIGdyb3VwID0gY2h1bmtbajpqICsgNF0KICAgICAgICAgICAgICAg
IGhleF9ncm91cCA9ICIgIi5qb2luKGYie2I6MDJYfSIgZm9yIGIgaW4gZ3JvdXApCiAgICAgICAg
ICAgICAgICBoZXhfcGFydHMuYXBwZW5kKGhleF9ncm91cCkKCiAgICAgICAgICAgICMg0KHQvtCx
0LjRgNCw0LXQvCBoZXgg0YHRgtGA0L7QutGDINC4INC00L7Qv9C+0LvQvdGP0LXQvCDQv9GA0L7Q
sdC10LvQsNC80Lgg0LTQviDRhNC40LrRgdC40YDQvtCy0LDQvdC90L7QuSDRiNC40YDQuNC90Ysg
KDQg0LPRgNGD0L/Qv9GLINC/0L4gfjExINGB0LjQvNCy0L7Qu9C+0LIgKyDQvtGC0YHRgtGD0L/R
iykKICAgICAgICAgICAgIyAxNiDQsdCw0LnRgiA9IDQg0LPRgNGD0L/Qv9GLLiDQlNC70LjQvdCw
INC/0L7Qu9C90L7QuSDRgdGC0YDQvtC60Lg6IDExKjQgKyAzKjIgKNC/0YDQvtCx0LXQu9GLKSA9
IDUwPwogICAgICAgICAgICAjINCf0YDQvtGJ0LUg0LjRgdC/0L7Qu9GM0LfQvtCy0LDRgtGMINGE
0LjQutGB0LjRgNC+0LLQsNC90L3Ri9C5INC+0YLRgdGC0YPQvy4KICAgICAgICAgICAgaGV4X3N0
ciA9ICIgICIuam9pbihoZXhfcGFydHMpCgogICAgICAgICAgICAjIDMuIEFTQ0lJINGH0LDRgdGC
0YwKICAgICAgICAgICAgYXNjaWlfc3RyID0gIiIKICAgICAgICAgICAgZm9yIGIgaW4gY2h1bms6
CiAgICAgICAgICAgICAgICBpZiAzMiA8PSBiIDw9IDEyNjogICMg0J/QtdGH0LDRgtC90YvQtSDR
gdC40LzQstC+0LvRiwogICAgICAgICAgICAgICAgICAgIGFzY2lpX3N0ciArPSBjaHIoYikKICAg
ICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYXNjaWlfc3RyICs9ICIuIgoK
ICAgICAgICAgICAgIyDQpNC+0YDQvNC40YDRg9C10Lwg0YHRgtGA0L7QutGDOiBPZmZzZXQgIEhl
eCAgQXNjaWkKICAgICAgICAgICAgIyA8NDkg0LPQsNGA0LDQvdGC0LjRgNGD0LXRgiDQstGL0YDQ
sNCy0L3QuNCy0LDQvdC40LUsINC10YHQu9C4INGB0YLRgNC+0LrQsCDQutC+0YDQvtGH0LUgMTYg
0LHQsNC50YIKICAgICAgICAgICAgbGluZXMuYXBwZW5kKGYie2xpbmVfb2Zmc2V0fSB7aGV4X3N0
cjo8NDl9IHthc2NpaV9zdHJ9IikKCiAgICAgICAgcmV0dXJuICJcbiIuam9pbihsaW5lcykKCiAg
ICBkZWYgX3Nob3dfcHJldmlld190ZXh0KHNlbGYsIHBhbmVsLCB0ZXh0LCB0aXRsZT0iUHJldmll
dyIpOgogICAgICAgICMg0JfQsNC80LXQvdGP0LXQvCDRgdC+0LTQtdGA0LbQuNC80L7QtSDQv9Cw
0L3QtdC70Lgg0L3QsCDRgtC10LrRgdGCCiAgICAgICAgIyDQnNGLINC90LUg0YXQvtGC0LjQvCDQ
u9C+0LzQsNGC0YwgUGFuZWxXaWRnZXQsINC/0L7RjdGC0L7QvNGDINC/0YDQvtGB0YLQviDQv9C+
0LTQvNC10L3QuNC8INGB0L/QuNGB0L7QuiDQvdCwIFRleHRXaWRnZXQKICAgICAgICAjINCd0L4g
UGFuZWxXaWRnZXQg0L7QttC40LTQsNC10YIgTGlzdEJveC4KCiAgICAgICAgIyDQodC+0LfQtNCw
0LXQvCDQstGA0LXQvNC10L3QvdGL0Lkgd2Fsa2VyINGBINC+0LTQvdC40Lwg0Y3Qu9C10LzQtdC9
0YLQvtC8IFRleHQKICAgICAgICBwcmV2aWV3X3dpZGdldCA9IHVyd2lkLlRleHQodGV4dCkKICAg
ICAgICAjINCe0LHQvtGA0LDRh9C40LLQsNC10Lwg0LIgTGlzdEJveCwg0YfRgtC+0LHRiyBQYW5l
bFdpZGdldCDQvdC1INGD0L/QsNC7INC/0YDQuCDRgNC10YHQsNC50LfQtSDQuNC70Lgg0YTQvtC6
0YPRgdC1CiAgICAgICAgcGFuZWwud2Fsa2VyLmNsZWFyKCkKICAgICAgICBwYW5lbC53YWxrZXIu
YXBwZW5kKHByZXZpZXdfd2lkZ2V0KQogICAgICAgIHBhbmVsLmhlYWRlcl90ZXh0LnNldF90ZXh0
KHRpdGxlKQoKICAgICAgICBwYW5lbC5wYXRoX3RleHQuc2V0X3RleHQoIiIpICMg0J7Rh9C40YnQ
sNC10Lwg0L/Rg9GC0YwsINGH0YLQvtCx0Ysg0L3QtSDRgdCx0LjQstCw0LvQvgoKICAgIGRlZiBh
ZGRfY3VycmVudF90b19ib29rbWFya3Moc2VsZik6CiAgICAgICAgaWYgc2VsZi5sb29wLndpZGdl
dCAhPSBzZWxmLm1haW5fd2lkZ2V0OgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgcGFuZWwg
PSBzZWxmLmdldF9hY3RpdmVfcGFuZWwoKQoKICAgICAgICBib29rbWFya19kYXRhID0ge30KICAg
ICAgICBkZWZhdWx0X25hbWUgPSAiIgoKICAgICAgICBpZiBwYW5lbC5tb2RlID09ICdmcyc6CiAg
ICAgICAgICAgIHBhdGggPSBwYW5lbC5mc19icm93c2VyLmN1cnJlbnRfcGF0aAogICAgICAgICAg
ICBib29rbWFya19kYXRhID0geyd0eXBlJzogJ2ZzJywgJ3BhdGgnOiBwYXRofQogICAgICAgICAg
ICAjIGRlZmF1bHRfbmFtZSA9IG9zLnBhdGguYmFzZW5hbWUocGF0aCkgb3IgcGF0aAogICAgICAg
ICAgICBkZWZhdWx0X25hbWUgPSBwYXRoCiAgICAgICAgZWxpZiBwYW5lbC5tb2RlID09ICdzMyc6
CiAgICAgICAgICAgIGlmIG5vdCBwYW5lbC5jdXJyZW50X2VuZHBvaW50OgogICAgICAgICAgICAg
ICAgc2VsZi5zaG93X3Jlc3VsdCgiQ2Fubm90IGJvb2ttYXJrIHJvb3QgbGlzdCIsICJlcnJvciIp
CiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgICAgIGJvb2ttYXJrX2RhdGEgPSB7CiAg
ICAgICAgICAgICAgICAndHlwZSc6ICdzMycsCiAgICAgICAgICAgICAgICAnZW5kcG9pbnQnOiBw
YW5lbC5jdXJyZW50X2VuZHBvaW50LCAgIyDQmNC80Y8g0Y3QvdC00L/QvtC40L3RgtCwCiAgICAg
ICAgICAgICAgICAnYnVja2V0JzogcGFuZWwuY3VycmVudF9idWNrZXQsCiAgICAgICAgICAgICAg
ICAncHJlZml4JzogcGFuZWwuY3VycmVudF9wcmVmaXgKICAgICAgICAgICAgfQogICAgICAgICAg
ICAjINCk0L7RgNC80LjRgNGD0LXQvCDQutGA0LDRgdC40LLQvtC1INC40LzRjwogICAgICAgICAg
ICBpZiBwYW5lbC5jdXJyZW50X2J1Y2tldDoKICAgICAgICAgICAgICAgIGRlZmF1bHRfbmFtZSA9
IGYiW3twYW5lbC5jdXJyZW50X2VuZHBvaW50fV0gL3twYW5lbC5jdXJyZW50X2J1Y2tldH0iCiAg
ICAgICAgICAgICAgICBpZiBwYW5lbC5jdXJyZW50X3ByZWZpeDoKICAgICAgICAgICAgICAgICAg
ICBkZWZhdWx0X25hbWUgKz0gZiIve3BhbmVsLmN1cnJlbnRfcHJlZml4fSIKICAgICAgICAgICAg
ZWxzZToKICAgICAgICAgICAgICAgIGRlZmF1bHRfbmFtZSA9IGYiW3twYW5lbC5jdXJyZW50X2Vu
ZHBvaW50fV0iCgogICAgICAgIGRlZiBvbl9jb25maXJtKGNvbmZpcm1lZCwgbmFtZSk6CiAgICAg
ICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgaWYgY29uZmlybWVkIGFuZCBu
YW1lOgogICAgICAgICAgICAgICAgc2VsZi5ib29rbWFya3NfbWFuYWdlci5hZGQobmFtZSwgYm9v
a21hcmtfZGF0YSkKICAgICAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoZiJCb29rbWFyayAn
e25hbWV9JyBhZGRlZCIpCgogICAgICAgIGRpYWxvZyA9IElucHV0RGlhbG9nKCJBZGQgQm9va21h
cmsiLCAiTmFtZToiLCBvbl9jb25maXJtLCBkZWZhdWx0X3RleHQ9ZGVmYXVsdF9uYW1lKQogICAg
ICAgIHNlbGYuc2hvd19kaWFsb2coZGlhbG9nKQoKICAgIGRlZiBzaG93X2Jvb2ttYXJrc19kaWFs
b2coc2VsZik6CiAgICAgICAgaWYgc2VsZi5sb29wLndpZGdldCAhPSBzZWxmLm1haW5fd2lkZ2V0
OgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgIyDQn9C+0LvRg9GH0LDQtdC8INCw0LrRgtGD
0LDQu9GM0L3Ri9C5INGB0L/QuNGB0L7QuiAo0L7QvSDQvNC+0LbQtdGCINC80LXQvdGP0YLRjNGB
0Y8pCiAgICAgICAgYm9va21hcmtzID0gc2VsZi5ib29rbWFya3NfbWFuYWdlci5ib29rbWFya3MK
ICAgICAgICBpZiBub3QgYm9va21hcmtzOgogICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KCJO
byBib29rbWFya3MgZm91bmQiLCAid2FybmluZyIpCiAgICAgICAgICAgIHJldHVybgoKICAgICAg
ICBkZWYgc2VsZWN0X2NhbGxiYWNrKGJtX2RhdGEpOgogICAgICAgICAgICBzZWxmLmNsb3NlX2Rp
YWxvZygpCiAgICAgICAgICAgIGlmIGJtX2RhdGE6CiAgICAgICAgICAgICAgICBzZWxmLmp1bXBf
dG9fYm9va21hcmsoYm1fZGF0YSkKCiAgICAgICAgZGVmIHJlbW92ZV9oYW5kbGVyKGluZGV4KToK
ICAgICAgICAgICAgIyAxLiDQl9Cw0L/QvtC80LjQvdCw0LXQvCwg0LrQsNC60YPRjiDQt9Cw0LrQ
u9Cw0LTQutGDINGD0LTQsNC70Y/QtdC8CiAgICAgICAgICAgIGJtX3RvX2RlbGV0ZSA9IGJvb2tt
YXJrc1tpbmRleF0KCiAgICAgICAgICAgICMgMi4g0J7Qv9GA0LXQtNC10LvRj9C10Lwg0YTRg9C9
0LrRhtC40Y4g0L/QvtC00YLQstC10YDQttC00LXQvdC40Y8KICAgICAgICAgICAgZGVmIGNvbmZp
cm1fY2FsbGJhY2soY29uZmlybWVkKToKICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9n
KCkgICMg0JfQsNC60YDRi9Cy0LDQtdC8IENvbmZpcm1EaWFsb2cKCiAgICAgICAgICAgICAgICBp
ZiBjb25maXJtZWQ6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5ib29rbWFya3NfbWFuYWdlci5y
ZW1vdmUoaW5kZXgpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdChmIkJvb2tt
YXJrICd7Ym1fdG9fZGVsZXRlWyduYW1lJ119JyBkZWxldGVkIikKCiAgICAgICAgICAgICAgICAj
IDMuINCSINCb0K7QkdCe0Jwg0KHQm9Cj0KfQkNCVINGB0L3QvtCy0LAg0L7RgtC60YDRi9Cy0LDQ
tdC8INC00LjQsNC70L7QsyDQt9Cw0LrQu9Cw0LTQvtC6CiAgICAgICAgICAgICAgICAjICjRh9GC
0L7QsdGLINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDQvNC+0LMg0L/RgNC+0LTQvtC70LbQuNGC
0Ywg0YDQsNCx0L7RgtGDINC40LvQuCDRg9Cy0LjQtNC10YLRjCDQvtCx0L3QvtCy0LvQtdC90L3R
i9C5INGB0L/QuNGB0L7QuikKICAgICAgICAgICAgICAgICMg0JjRgdC/0L7Qu9GM0LfRg9C10Lwg
YWxhcm0sINGH0YLQvtCx0Ysg0LTQsNGC0YwgVUkg0L7RgtC00L7RhdC90YPRgtGMICjQvtC/0YbQ
uNC+0L3QsNC70YzQvdC+LCDQvdC+INC90LDQtNC10LbQvdC10LUpCiAgICAgICAgICAgICAgICBz
ZWxmLmxvb3Auc2V0X2FsYXJtX2luKDAsIGxhbWJkYSAqYTogc2VsZi5zaG93X2Jvb2ttYXJrc19k
aWFsb2coKSkKCiAgICAgICAgICAgICMgMy4g0JfQsNC60YDRi9Cy0LDQtdC8INGC0LXQutGD0YnQ
uNC5INC00LjQsNC70L7QsyDQt9Cw0LrQu9Cw0LTQvtC6CiAgICAgICAgICAgIHNlbGYuY2xvc2Vf
ZGlhbG9nKCkKCiAgICAgICAgICAgICMgNC4g0J/QvtC60LDQt9GL0LLQsNC10Lwg0LTQuNCw0LvQ
vtCzINC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNGPCiAgICAgICAgICAgIGNvbmZpcm1fZGxnID0g
Q29uZmlybURpYWxvZygKICAgICAgICAgICAgICAgICJEZWxldGUgQm9va21hcmsiLAogICAgICAg
ICAgICAgICAgZiJEZWxldGUgYm9va21hcmsgJ3tibV90b19kZWxldGVbJ25hbWUnXX0nPyIsCiAg
ICAgICAgICAgICAgICBbXSwKICAgICAgICAgICAgICAgIGNvbmZpcm1fY2FsbGJhY2ssCiAgICAg
ICAgICAgICAgICBmb2N1c195ZXM9RmFsc2UgICMg0JHQtdC30L7Qv9Cw0YHQvdC+OiDRhNC+0LrR
g9GBINC90LAgTm8KICAgICAgICAgICAgKQogICAgICAgICAgICBzZWxmLnNob3dfZGlhbG9nKGNv
bmZpcm1fZGxnKQoKICAgICAgICAjINCh0L7Qt9C00LDQtdC8INC4INC/0L7QutCw0LfRi9Cy0LDQ
tdC8INC00LjQsNC70L7QswogICAgICAgIGRpYWxvZyA9IEJvb2ttYXJrc0RpYWxvZyhib29rbWFy
a3MsIHNlbGVjdF9jYWxsYmFjaywgcmVtb3ZlX2NhbGxiYWNrPXJlbW92ZV9oYW5kbGVyKQogICAg
ICAgIHNlbGYuc2hvd19kaWFsb2coZGlhbG9nLCB3aWR0aD0oJ3JlbGF0aXZlJywgNzApLCBoZWln
aHQ9KCdyZWxhdGl2ZScsIDYwKSkKCiAgICBkZWYganVtcF90b19ib29rbWFyayhzZWxmLCBibV9k
YXRhKToKICAgICAgICBzZWxmLmNsb3NlX2RpYWxvZygpCiAgICAgICAgcGFuZWwgPSBzZWxmLmdl
dF9hY3RpdmVfcGFuZWwoKQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIGJtX2RhdGFbJ3R5
cGUnXSA9PSAnZnMnOgoKICAgICAgICAgICAgICAgICMg0JjQvdC40YbQuNCw0LvQuNC30LjRgNGD
0LXQvCBmc19icm93c2VyLCDQtdGB0LvQuCDQtdCz0L4g0L3QtdGCCiAgICAgICAgICAgICAgICBp
ZiBwYW5lbC5mc19icm93c2VyIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgIyDQo9Cx0LXQ
tNC40YLQtdGB0YwsINGH0YLQviDQutC70LDRgdGBIEZpbGVTeXN0ZW1Ccm93c2VyINC40LzQv9C+
0YDRgtC40YDQvtCy0LDQvSDQuNC70Lgg0LTQvtGB0YLRg9C/0LXQvQogICAgICAgICAgICAgICAg
ICAgIHBhbmVsLmZzX2Jyb3dzZXIgPSBGaWxlU3lzdGVtQnJvd3NlcigpCgogICAgICAgICAgICAg
ICAgcGFuZWwubW9kZSA9ICdmcycKICAgICAgICAgICAgICAgICMg0J/RgNC+0LLQtdGA0LrQsCDR
gdGD0YnQtdGB0YLQstC+0LLQsNC90LjRjyDQv9GD0YLQuAogICAgICAgICAgICAgICAgaWYgb3Mu
cGF0aC5leGlzdHMoYm1fZGF0YVsncGF0aCddKToKICAgICAgICAgICAgICAgICAgICAjINCh0LHR
gNCw0YHRi9Cy0LDQtdC8IFMzINGB0L/QtdGG0LjRhNC40YfQvdGL0LUg0L/QvtC70Y8g0LTQu9GP
INGH0LjRgdGC0L7RgtGLICjQvtC/0YbQuNC+0L3QsNC70YzQvdC+KQogICAgICAgICAgICAgICAg
ICAgIHBhbmVsLmN1cnJlbnRfYnVja2V0ID0gTm9uZQogICAgICAgICAgICAgICAgICAgIHBhbmVs
LmN1cnJlbnRfcHJlZml4ID0gIiIKICAgICAgICAgICAgICAgICAgICBwYW5lbC5mc19icm93c2Vy
LmN1cnJlbnRfcGF0aCA9IGJtX2RhdGFbJ3BhdGgnXQogICAgICAgICAgICAgICAgICAgIHBhbmVs
LnJlZnJlc2goKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWxm
LnNob3dfcmVzdWx0KGYiUGF0aCBub3QgZm91bmQ6IHtibV9kYXRhWydwYXRoJ119IiwgImVycm9y
IikKCiAgICAgICAgICAgIGVsaWYgYm1fZGF0YVsndHlwZSddID09ICdzMyc6CiAgICAgICAgICAg
ICAgICAjINCf0YDQvtCy0LXRgNGP0LXQvCwg0LXRgdGC0Ywg0LvQuCDRgtCw0LrQvtC5INGN0L3Q
tNC/0L7QuNC90YIg0LIg0YLQtdC60YPRidC10Lwg0LrQvtC90YTQuNCz0LUKICAgICAgICAgICAg
ICAgIGVwX2NvbmZpZyA9IHNlbGYuczNfY29uZmlnLmdldF9lbmRwb2ludChibV9kYXRhWydlbmRw
b2ludCddKQogICAgICAgICAgICAgICAgaWYgbm90IGVwX2NvbmZpZzoKICAgICAgICAgICAgICAg
ICAgICBzZWxmLnNob3dfcmVzdWx0KGYiRW5kcG9pbnQgJ3tibV9kYXRhWydlbmRwb2ludCddfScg
bm90IGZvdW5kIGluIGNvbmZpZyIsICJlcnJvciIpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJu
CgogICAgICAgICAgICAgICAgcGFuZWwubW9kZSA9ICdzMycKICAgICAgICAgICAgICAgIHBhbmVs
LmN1cnJlbnRfZW5kcG9pbnQgPSBibV9kYXRhWydlbmRwb2ludCddCiAgICAgICAgICAgICAgICBw
YW5lbC5lbmRwb2ludF9jb25maWcgPSBlcF9jb25maWcKICAgICAgICAgICAgICAgICMg0JjQvdC4
0YbQuNCw0LvQuNC30LjRgNGD0LXQvCDQvNC10L3QtdC00LbQtdGALCDQtdGB0LvQuCDRgdC80LXQ
vdC40LvRgdGPINGN0L3QtNC/0L7QuNC90YIKICAgICAgICAgICAgICAgIHBhbmVsLnMzX21hbmFn
ZXIgPSBTM01hbmFnZXIoZXBfY29uZmlnKQoKICAgICAgICAgICAgICAgIHBhbmVsLmN1cnJlbnRf
YnVja2V0ID0gYm1fZGF0YS5nZXQoJ2J1Y2tldCcpCiAgICAgICAgICAgICAgICBwYW5lbC5jdXJy
ZW50X3ByZWZpeCA9IGJtX2RhdGEuZ2V0KCdwcmVmaXgnLCAnJykKCiAgICAgICAgICAgICAgICBw
YW5lbC5yZWZyZXNoKCkKCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAg
ICBzZWxmLnNob3dfcmVzdWx0KGYiRXJyb3IganVtcGluZyB0byBib29rbWFyazoge3N0cihlKX0i
LCAiZXJyb3IiKQoKICAgIGRlZiBfd2luZG93c19oZWFydGJlYXQoc2VsZiwgbG9vcD1Ob25lLCB1
c2VyX2RhdGE9Tm9uZSk6CiAgICAgICAgIiIi0J/QtdGA0LjQvtC00LjRh9C10YHQutC+0LUg0L7Q
sdC90L7QstC70LXQvdC40LUg0Y3QutGA0LDQvdCwINC00LvRjyBXaW5kb3dzIiIiCiAgICAgICAg
c2VsZi5sb29wLmRyYXdfc2NyZWVuKCkKICAgICAgICAjINCf0LXRgNC10LfQsNC/0YPRgdC60LDQ
tdC8INGC0LDQudC80LXRgCDQutCw0LbQtNGL0LUgMC4xINGB0LXQutGD0L3QtNGLCiAgICAgICAg
c2VsZi5sb29wLnNldF9hbGFybV9pbigwLjEsIHNlbGYuX3dpbmRvd3NfaGVhcnRiZWF0KQoKICAg
IGRlZiBsb29wX3dha2V1cF9jYWxsYmFjayhzZWxmKToKICAgICAgICAiIiJDYWxsYmFjayDQtNC7
0Y8g0L/RgNC+0LHRg9C20LTQtdC90LjRjyBldmVudCBsb29wINGH0LXRgNC10LcgcGlwZSIiIgog
ICAgICAgIG9zLnJlYWQoc2VsZi5waXBlX3IsIDEpCgogICAgZGVmIHdha2VfdXAoc2VsZik6CiAg
ICAgICAgIiIi0JzQtdGC0L7QtCDQtNC70Y8g0LLRi9C30L7QstCwINC40Lcg0LTRgNGD0LPQuNGF
INC/0L7RgtC+0LrQvtCyIiIiCiAgICAgICAgaWYgc2VsZi51c2VfcGlwZToKICAgICAgICAgICAg
b3Mud3JpdGUoc2VsZi5waXBlX3csIGInIScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2Vs
Zi5sb29wLnNldF9hbGFybV9pbigwLCBsYW1iZGEgbG9vcCwgZGF0YTogTm9uZSkKCiAgICBkZWYg
aGFuZGxlX2lucHV0KHNlbGYsIGtleSk6CiAgICAgICAgaWYga2V5IGluICgncScsICdRJywgJ9C5
JywgJ9CZJyk6CiAgICAgICAgICAgIHJhaXNlIHVyd2lkLkV4aXRNYWluTG9vcCgpCiAgICAgICAg
ZWxpZiBrZXkgPT0gJ2YxMCc6CiAgICAgICAgICAgIHNlbGYuY29uZmlybV9leGl0KCkKICAgICAg
ICBlbGlmIGtleSA9PSAndGFiJzoKICAgICAgICAgICAgY3VycmVudF9mb2N1cyA9IHNlbGYuY29s
dW1ucy5mb2N1c19wb3NpdGlvbgogICAgICAgICAgICBzZWxmLmNvbHVtbnMuZm9jdXNfcG9zaXRp
b24gPSAxIC0gY3VycmVudF9mb2N1cwogICAgICAgIGVsaWYga2V5ID09ICdmMyc6CiAgICAgICAg
ICAgIGFjdGl2ZV9wYW5lbCA9IHNlbGYuZ2V0X2FjdGl2ZV9wYW5lbCgpCiAgICAgICAgICAgIGFj
dGl2ZV9wYW5lbC52aWV3X2l0ZW0oKQogICAgICAgIGVsaWYga2V5ID09ICdmNCc6CiAgICAgICAg
ICAgIGFjdGl2ZV9wYW5lbCA9IHNlbGYuZ2V0X2FjdGl2ZV9wYW5lbCgpCiAgICAgICAgICAgIGlm
IGFjdGl2ZV9wYW5lbDoKICAgICAgICAgICAgICAgIGFjdGl2ZV9wYW5lbC5zaG93X2l0ZW1faW5m
bygpCiAgICAgICAgZWxpZiBrZXkgPT0gJ2Y1JzoKICAgICAgICAgICAgc2VsZi5jb3B5X2l0ZW1z
KCkKICAgICAgICBlbGlmIGtleSA9PSAnZjYnOgogICAgICAgICAgICBzZWxmLm1vdmVfaXRlbXMo
KQogICAgICAgIGVsaWYga2V5ID09ICdmNyc6CiAgICAgICAgICAgIHNlbGYuY3JlYXRlX2RpcmVj
dG9yeSgpCiAgICAgICAgZWxpZiBrZXkgPT0gJ2Y4JzoKICAgICAgICAgICAgc2VsZi5kZWxldGVf
aXRlbXMoKQogICAgICAgIGVsaWYga2V5ID09ICdmOSc6CiAgICAgICAgICAgIHNlbGYuZGVsZXRl
X29sZF92ZXJzaW9ucygpCiAgICAgICAgZWxpZiBrZXkgPT0gJ2YyJzoKICAgICAgICAgICAgYWN0
aXZlX3BhbmVsID0gc2VsZi5nZXRfYWN0aXZlX3BhbmVsKCkKICAgICAgICAgICAgYWN0aXZlX3Bh
bmVsLnNob3dfc29ydF9kaWFsb2coKQogICAgICAgIGVsaWYga2V5ID09ICdmMTEnOgogICAgICAg
ICAgICBzZWxmLnRvZ2dsZV92ZXJzaW9uaW5nKCkKICAgICAgICBlbGlmIGtleSA9PSAnKyc6CiAg
ICAgICAgICAgIHNlbGYuc2VsZWN0X2J5X3BhdHRlcm4oKQogICAgICAgIGVsaWYga2V5ID09ICct
JzoKICAgICAgICAgICAgc2VsZi51bnNlbGVjdF9ieV9wYXR0ZXJuKCkKICAgICAgICBlbGlmIGtl
eSA9PSAnKic6CiAgICAgICAgICAgIGFjdGl2ZV9wYW5lbCA9IHNlbGYuZ2V0X2FjdGl2ZV9wYW5l
bCgpCiAgICAgICAgICAgIGFjdGl2ZV9wYW5lbC5pbnZlcnRfc2VsZWN0aW9uKCkKICAgICAgICBl
bGlmIGtleSA9PSAnY3RybCB2JzoKICAgICAgICAgICAgc2VsZi50b2dnbGVfcHJldmlld19tb2Rl
KCkKICAgICAgICAjINCU0L7QsdCw0LLQu9C10L3QuNC1INC30LDQutC70LDQtNC60LggKEN0cmwr
YikKICAgICAgICBlbGlmIGtleSA9PSAnY3RybCBiJzoKICAgICAgICAgICAgc2VsZi5hZGRfY3Vy
cmVudF90b19ib29rbWFya3MoKQogICAgICAgICMg0J/RgNC+0YHQvNC+0YLRgCDQt9Cw0LrQu9Cw
0LTQvtC6IChBbHQrYikKICAgICAgICBlbGlmIGtleSA9PSAnbWV0YSBiJzoKICAgICAgICAgICAg
c2VsZi5zaG93X2Jvb2ttYXJrc19kaWFsb2coKQogICAgICAgIGlmIHNlbGYucHJldmlld19tb2Rl
OgogICAgICAgICAgICBpZiBrZXkgPT0gJysnOgogICAgICAgICAgICAgICAgc2VsZi5jaGFuZ2Vf
cHJldmlld192ZXJzaW9uKDEpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgZWxp
ZiBrZXkgPT0gJy0nOgogICAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VfcHJldmlld192ZXJzaW9u
KC0xKQogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgZGVmIGNoYW5nZV9wcmV2aWV3X3ZlcnNp
b24oc2VsZiwgZGVsdGEpOgogICAgICAgICMg0JvQvtCz0LjQutCwINGB0LzQtdC90Ysg0LjQvdC0
0LXQutGB0LAg0Lgg0LLRi9C30L7QstCwIHVwZGF0ZV9wcmV2aWV3KCkKICAgICAgICAjINCi0YDQ
tdCx0YPQtdGCINGF0YDQsNC90LXQvdC40Y8g0YLQtdC60YPRidC10LPQviDRgdC/0LjRgdC60LAg
0LLQtdGA0YHQuNC5INCyIHNlbGYuY3VycmVudF9wcmV2aWV3X3ZlcnNpb25zCiAgICAgICAgcGFz
cwoKICAgIGRlZiBzZWxlY3RfYnlfcGF0dGVybihzZWxmKToKICAgICAgICBkZWYgY2FsbGJhY2so
Y29uZmlybWVkLCBwYXR0ZXJuKToKICAgICAgICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQogICAg
ICAgICAgICBpZiBjb25maXJtZWQ6CiAgICAgICAgICAgICAgICBhY3RpdmVfcGFuZWwgPSBzZWxm
LmdldF9hY3RpdmVfcGFuZWwoKQogICAgICAgICAgICAgICAgYWN0aXZlX3BhbmVsLnNlbGVjdF9i
eV9wYXR0ZXJuKHBhdHRlcm4sIHNlbGVjdD1UcnVlKQoKICAgICAgICBkaWFsb2cgPSBJbnB1dERp
YWxvZygnU2VsZWN0IGZpbGVzIGJ5IHBhdHRlcm4nLCAnUGF0dGVybjogJywgY2FsbGJhY2ssIGRl
ZmF1bHRfdGV4dD0nKicpCiAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhkaWFsb2cpCgogICAgZGVm
IHVuc2VsZWN0X2J5X3BhdHRlcm4oc2VsZik6CiAgICAgICAgZGVmIGNhbGxiYWNrKGNvbmZpcm1l
ZCwgcGF0dGVybik6CiAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAg
aWYgY29uZmlybWVkOgogICAgICAgICAgICAgICAgYWN0aXZlX3BhbmVsID0gc2VsZi5nZXRfYWN0
aXZlX3BhbmVsKCkKICAgICAgICAgICAgICAgIGFjdGl2ZV9wYW5lbC5zZWxlY3RfYnlfcGF0dGVy
bihwYXR0ZXJuLCBzZWxlY3Q9RmFsc2UpCgogICAgICAgIGRpYWxvZyA9IElucHV0RGlhbG9nKCdV
bnNlbGVjdCBmaWxlcyBieSBwYXR0ZXJuJywgJ1BhdHRlcm46ICcsIGNhbGxiYWNrLCBkZWZhdWx0
X3RleHQ9JyonKQogICAgICAgIHNlbGYuc2hvd19kaWFsb2coZGlhbG9nKQoKICAgIGRlZiBkZWxl
dGVfb2xkX3ZlcnNpb25zKHNlbGYpOgogICAgICAgIGFjdGl2ZV9wYW5lbCA9IHNlbGYuZ2V0X2Fj
dGl2ZV9wYW5lbCgpCgogICAgICAgIGlmIGFjdGl2ZV9wYW5lbC5tb2RlICE9ICdzMycgb3Igbm90
IGFjdGl2ZV9wYW5lbC5jdXJyZW50X2J1Y2tldDoKICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3Vs
dCgnVGhpcyBmdW5jdGlvbiB3b3JrcyBvbmx5IHdpdGggUzMgb2JqZWN0cycpCiAgICAgICAgICAg
IHJldHVybgoKICAgICAgICBzZWxlY3RlZF9pdGVtcyA9IGFjdGl2ZV9wYW5lbC5nZXRfc2VsZWN0
ZWRfaXRlbXMoKQogICAgICAgIGlmIG5vdCBzZWxlY3RlZF9pdGVtczoKICAgICAgICAgICAgZm9j
dXNlZCA9IGFjdGl2ZV9wYW5lbC5nZXRfZm9jdXNlZF9pdGVtKCkKICAgICAgICAgICAgaWYgZm9j
dXNlZCBhbmQgZm9jdXNlZFsndHlwZSddID09ICdzM19maWxlJzoKICAgICAgICAgICAgICAgIHNl
bGVjdGVkX2l0ZW1zID0gW2ZvY3VzZWRdCgogICAgICAgIGlmIG5vdCBzZWxlY3RlZF9pdGVtczoK
ICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdCgnTm8gaXRlbXMgc2VsZWN0ZWQnKQogICAgICAg
ICAgICByZXR1cm4KCiAgICAgICAgdmVyc2lvbmVkX2l0ZW1zID0gW10KICAgICAgICBmb3IgaXRl
bSBpbiBzZWxlY3RlZF9pdGVtczoKICAgICAgICAgICAgaWYgaXRlbVsndHlwZSddID09ICdzM19m
aWxlJyBhbmQgaXRlbS5nZXQoJ3ZlcnNpb25fY291bnQnLCAxKSA+IDE6CiAgICAgICAgICAgICAg
ICB2ZXJzaW9uZWRfaXRlbXMuYXBwZW5kKGl0ZW0pCgogICAgICAgIGlmIG5vdCB2ZXJzaW9uZWRf
aXRlbXM6CiAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoJ05vIHZlcnNpb25lZCBmaWxlcyBz
ZWxlY3RlZCcpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpdGVtc19pbmZvID0gW2Yie2l0
ZW1bJ25hbWUnXX0gKHtpdGVtWyd2ZXJzaW9uX2NvdW50J119IHZlcnNpb25zKSIgZm9yIGl0ZW0g
aW4gdmVyc2lvbmVkX2l0ZW1zXQoKICAgICAgICBkZWYgY2FsbGJhY2soY29uZmlybWVkKToKICAg
ICAgICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQogICAgICAgICAgICBpZiBjb25maXJtZWQ6CiAg
ICAgICAgICAgICAgICBmb2N1c19pbmRleCA9IGFjdGl2ZV9wYW5lbC5saXN0Ym94LmZvY3VzX3Bv
c2l0aW9uCgogICAgICAgICAgICAgICAgcHJvZ3Jlc3MgPSBQcm9ncmVzc0RpYWxvZygnRGVsZXRp
bmcgb2xkIHZlcnNpb25zLi4uJywgY2FsbGJhY2s9c2VsZi5jbG9zZV9kaWFsb2cpCiAgICAgICAg
ICAgICAgICBwcm9ncmVzcy5zZXRfdG90YWwobGVuKHZlcnNpb25lZF9pdGVtcykpCiAgICAgICAg
ICAgICAgICBzZWxmLnNob3dfZGlhbG9nKHByb2dyZXNzKQoKICAgICAgICAgICAgICAgIGRlZiBk
ZWxldGVfdGhyZWFkKCk6CiAgICAgICAgICAgICAgICAgICAgZm9yIGl0ZW0gaW4gdmVyc2lvbmVk
X2l0ZW1zOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBwcm9ncmVzcy5jYW5jZWxsZWQ6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgICAgICAgICAgICAg
c2VsZi5sb29wLmRyYXdfc2NyZWVuKCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3Mu
dXBkYXRlKGl0ZW1bJ25hbWUnXSkKCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQgPSBh
Y3RpdmVfcGFuZWwuczNfbWFuYWdlci5kZWxldGVfb2xkX3ZlcnNpb25zKAogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgYWN0aXZlX3BhbmVsLmN1cnJlbnRfYnVja2V0LAogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgaXRlbVsna2V5J10KICAgICAgICAgICAgICAgICAgICAgICAgKQoKICAg
ICAgICAgICAgICAgICAgICAgICAgaWYgZGVsZXRlZCA+IDA6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBwcm9ncmVzcy5hZGRfc3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfZmFpbHVyZSgpCgog
ICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgICAgICAgICAgICAgIHNl
bGYubG9vcC5kcmF3X3NjcmVlbigpCgogICAgICAgICAgICAgICAgdGhyZWFkID0gdGhyZWFkaW5n
LlRocmVhZCh0YXJnZXQ9ZGVsZXRlX3RocmVhZCkKICAgICAgICAgICAgICAgIHRocmVhZC5kYWVt
b24gPSBUcnVlCiAgICAgICAgICAgICAgICB0aHJlYWQuc3RhcnQoKQoKICAgICAgICAgICAgICAg
IGRlZiBjaGVja190aHJlYWQoKToKICAgICAgICAgICAgICAgICAgICBpZiB0aHJlYWQuaXNfYWxp
dmUoKToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLnNldF9hbGFybV9pbigwLjEs
IGxhbWJkYSAqYXJnczogY2hlY2tfdGhyZWFkKCkpCiAgICAgICAgICAgICAgICAgICAgZWxzZToK
ICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQogICAgICAgICAgICAg
ICAgICAgICAgICBpZiBmb2N1c19pbmRleCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGFjdGl2ZV9wYW5lbC5yZXN0b3JlX2ZvY3VzX2luZGV4ID0gZm9jdXNfaW5kZXgK
CiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9wYW5lbC5yZWZyZXNoKCkKCiAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBmJ0RlbGV0ZWQgb2xkIHZlcnNpb25zOiB7cHJvZ3Jlc3Muc3VjY2Vzc19jb3VudH0sIEZh
aWxlZDoge3Byb2dyZXNzLmZhaWxfY291bnR9JykKCiAgICAgICAgICAgICAgICBzZWxmLmxvb3Au
c2V0X2FsYXJtX2luKDAuMSwgbGFtYmRhICphcmdzOiBjaGVja190aHJlYWQoKSkKCiAgICAgICAg
bWVzc2FnZSA9IGYnRGVsZXRlIG9sZCB2ZXJzaW9ucyBvZiB7bGVuKHZlcnNpb25lZF9pdGVtcyl9
IGZpbGUocyk/XG5UaGlzIHdpbGwga2VlcCBvbmx5IHRoZSBsYXRlc3QgdmVyc2lvbiEnCiAgICAg
ICAgZGlhbG9nID0gQ29uZmlybURpYWxvZygnQ29uZmlybSBEZWxldGUgT2xkIFZlcnNpb25zJywg
bWVzc2FnZSwgaXRlbXNfaW5mbywgY2FsbGJhY2spCiAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhk
aWFsb2cpCgogICAgIyDQlNC+0LHQsNCy0LvRj9C10Lwg0LDRgNCz0YPQvNC10L3RgtGLIHdpZHRo
INC4IGhlaWdodCDRgSDQtNC10YTQvtC70YLQvdGL0LzQuCDQt9C90LDRh9C10L3QuNGP0LzQuAog
ICAgZGVmIHNob3dfZGlhbG9nKHNlbGYsIGRpYWxvZywgd2lkdGg9KCdyZWxhdGl2ZScsIDcwKSwg
aGVpZ2h0PSgncmVsYXRpdmUnLCAyMCkpOgogICAgICAgIG92ZXJsYXkgPSB1cndpZC5PdmVybGF5
KAogICAgICAgICAgICBkaWFsb2csCiAgICAgICAgICAgIHNlbGYuZnJhbWUsCiAgICAgICAgICAg
IGFsaWduPSdjZW50ZXInLAogICAgICAgICAgICB3aWR0aD13aWR0aCwKICAgICAgICAgICAgdmFs
aWduPSdtaWRkbGUnLAogICAgICAgICAgICBoZWlnaHQ9aGVpZ2h0CiAgICAgICAgKQogICAgICAg
IHNlbGYubG9vcC53aWRnZXQgPSBvdmVybGF5CgogICAgZGVmIGNsb3NlX2RpYWxvZyhzZWxmKToK
ICAgICAgICBzZWxmLmxvb3Aud2lkZ2V0ID0gc2VsZi5tYWluX3dpZGdldAoKICAgICMgZGVmIHNo
b3dfcmVzdWx0KHNlbGYsIG1lc3NhZ2UpOgogICAgIyAgICAgc2VsZi5yZXN1bHRfdGV4dC5zZXRf
dGV4dChtZXNzYWdlKQoKICAgIGRlZiBzaG93X3Jlc3VsdChzZWxmLCBtZXNzYWdlLCBzZXZlcml0
eT0naW5mbycpOgogICAgICAgICIiIgogICAgICAgIHNldmVyaXR5OiAnaW5mbycgKGRlZmF1bHQp
LCAnZXJyb3InLCAnd2FybmluZycKICAgICAgICAiIiIKICAgICAgICBzZWxmLnJlc3VsdF90ZXh0
LnNldF90ZXh0KG1lc3NhZ2UpCgogICAgICAgICMg0KHQu9C+0LLQsNGA0Ywg0YHQvtC+0YLQstC1
0YLRgdGC0LLQuNGPINGC0LjQv9C+0LIg0YHQvtC+0LHRidC10L3QuNC5INC4INGB0YLQuNC70LXQ
uSDQv9Cw0LvQuNGC0YDRiwogICAgICAgIHN0eWxlX21hcCA9IHsKICAgICAgICAgICAgJ2luZm8n
OiAncmVzdWx0JywKICAgICAgICAgICAgJ2Vycm9yJzogJ3Jlc3VsdF9lcnJvcicsCiAgICAgICAg
ICAgICd3YXJuaW5nJzogJ3Jlc3VsdF93YXJuJwogICAgICAgIH0KCiAgICAgICAgdGFyZ2V0X3N0
eWxlID0gc3R5bGVfbWFwLmdldChzZXZlcml0eSwgJ3Jlc3VsdCcpCgogICAgICAgICMge05vbmU6
IHRhcmdldF9zdHlsZX0g0L7Qt9C90LDRh9Cw0LXRgiAi0L/RgNC40LzQtdC90LjRgtGMINGN0YLQ
vtGCINGB0YLQuNC70Ywg0LrQviDQstGB0LXQvNGDINGB0L7QtNC10YDQttC40LzQvtC80YMsCiAg
ICAgICAgIyDRgyDQutC+0YLQvtGA0L7Qs9C+INC90LXRgiDRgdCy0L7QtdCz0L4g0LbQtdGB0YLQ
utC+INC30LDQtNCw0L3QvdC+0LPQviDRgdGC0LjQu9GPIgogICAgICAgIHNlbGYucmVzdWx0X21h
cC5zZXRfYXR0cl9tYXAoe05vbmU6IHRhcmdldF9zdHlsZX0pCgogICAgZGVmIGdldF9hY3RpdmVf
cGFuZWwoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYubGVmdF9wYW5lbCBpZiBzZWxmLmNvbHVt
bnMuZm9jdXNfcG9zaXRpb24gPT0gMCBlbHNlIHNlbGYucmlnaHRfcGFuZWwKCiAgICBkZWYgZ2V0
X2luYWN0aXZlX3BhbmVsKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLnJpZ2h0X3BhbmVsIGlm
IHNlbGYuY29sdW1ucy5mb2N1c19wb3NpdGlvbiA9PSAwIGVsc2Ugc2VsZi5sZWZ0X3BhbmVsCgog
ICAgZGVmIGNyZWF0ZV9kaXJlY3Rvcnkoc2VsZik6CiAgICAgICAgYWN0aXZlX3BhbmVsID0gc2Vs
Zi5nZXRfYWN0aXZlX3BhbmVsKCkKCiAgICAgICAgaWYgYWN0aXZlX3BhbmVsLmlzX3Jvb3RfbWVu
dSgpOgogICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KCdTZWxlY3QgRlMgb3IgUzMgZW5kcG9p
bnQgZmlyc3QnKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgYWN0aXZlX3BhbmVsLm1v
ZGUgPT0gJ3MzJzoKICAgICAgICAgICAgaWYgYWN0aXZlX3BhbmVsLmlzX2J1Y2tldF9saXN0KCk6
CiAgICAgICAgICAgICAgICBkZWYgY2FsbGJhY2soY29uZmlybWVkLCBidWNrZXRfbmFtZSk6CiAg
ICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQogICAgICAgICAgICAgICAgICAg
IGlmIGNvbmZpcm1lZDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgYWN0aXZlX3BhbmVsLnMz
X21hbmFnZXIuY3JlYXRlX2J1Y2tldChidWNrZXRfbmFtZSk6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzZWxmLnNob3dfcmVzdWx0KGYnQ3JlYXRlZCBidWNrZXQ6IHtidWNrZXRfbmFtZX0n
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlX3BhbmVsLnJlZnJlc2goZm9jdXNf
b249YnVja2V0X25hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KGYnRmFpbGVkIHRvIGNyZWF0ZSBidWNr
ZXQ6IHtidWNrZXRfbmFtZX0nKQoKICAgICAgICAgICAgICAgIGRpYWxvZyA9IElucHV0RGlhbG9n
KCdDcmVhdGUgTmV3IEJ1Y2tldCcsICdCdWNrZXQgbmFtZTogJywgY2FsbGJhY2spCiAgICAgICAg
ICAgICAgICBzZWxmLnNob3dfZGlhbG9nKGRpYWxvZykKICAgICAgICAgICAgZWxpZiBhY3RpdmVf
cGFuZWwuaXNfZW5kcG9pbnRfbGlzdCgpOgogICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3Vs
dCgnQ2Fubm90IGNyZWF0ZSBkaXJlY3RvcnkgYXQgZW5kcG9pbnQgbGV2ZWwnKQogICAgICAgICAg
ICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdCgnQ2Fubm90IGNyZWF0ZSBk
aXJlY3RvcnkgaW4gUzMgKHVzZSBwcmVmaXggd2hlbiBjb3B5aW5nKScpCiAgICAgICAgZWxzZToK
ICAgICAgICAgICAgZGVmIGNhbGxiYWNrKGNvbmZpcm1lZCwgZGlyX25hbWUpOgogICAgICAgICAg
ICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQogICAgICAgICAgICAgICAgaWYgY29uZmlybWVkOgog
ICAgICAgICAgICAgICAgICAgIGlmIGFjdGl2ZV9wYW5lbC5mc19icm93c2VyLmNyZWF0ZV9kaXJl
Y3RvcnkoZGlyX25hbWUpOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0
KGYnQ3JlYXRlZCBkaXJlY3Rvcnk6IHtkaXJfbmFtZX0nKQogICAgICAgICAgICAgICAgICAgICAg
ICBhY3RpdmVfcGFuZWwucmVmcmVzaChmb2N1c19vbj1kaXJfbmFtZSkKICAgICAgICAgICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KGYnRmFp
bGVkIHRvIGNyZWF0ZSBkaXJlY3Rvcnk6IHtkaXJfbmFtZX0nKQoKICAgICAgICAgICAgZGlhbG9n
ID0gSW5wdXREaWFsb2coJ0NyZWF0ZSBOZXcgRGlyZWN0b3J5JywgJ0RpcmVjdG9yeSBuYW1lOiAn
LCBjYWxsYmFjaykKICAgICAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhkaWFsb2cpCgogICAgZGVm
IGFuYWx5emVfaXRlbXMoc2VsZiwgaXRlbXMsIHNvdXJjZV9wYW5lbCk6CiAgICAgICAgYW5hbHl6
ZWQgPSBbXQogICAgICAgIGl0ZW1zX2luZm8gPSBbXQogICAgICAgIHRvdGFsX2J5dGVzID0gMAoK
ICAgICAgICBmb3IgaXRlbSBpbiBpdGVtczoKICAgICAgICAgICAgaXRlbV90eXBlID0gaXRlbVsn
dHlwZSddCgogICAgICAgICAgICBpZiBpdGVtX3R5cGUgPT0gJ2ZzX2ZpbGUnOgogICAgICAgICAg
ICAgICAgYW5hbHl6ZWQuYXBwZW5kKHsndHlwZSc6ICdmc19maWxlJywgJ2l0ZW0nOiBpdGVtLCAn
ZmlsZXMnOiBbaXRlbV19KQogICAgICAgICAgICAgICAgIyBpdGVtc19pbmZvLmFwcGVuZChmIltG
SUxFXSB7aXRlbVsnbmFtZSddfSIpCiAgICAgICAgICAgICAgICBpdGVtc19pbmZvLmFwcGVuZChm
IiB7aXRlbVsnbmFtZSddfSIpCiAgICAgICAgICAgICAgICB0b3RhbF9ieXRlcyArPSBpdGVtLmdl
dCgnc2l6ZScsIDApCgogICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnZnNfZGlyJzoKICAg
ICAgICAgICAgICAgIGRpcl9wYXRoID0gb3MucGF0aC5qb2luKHNvdXJjZV9wYW5lbC5mc19icm93
c2VyLmN1cnJlbnRfcGF0aCwgaXRlbVsnbmFtZSddKQogICAgICAgICAgICAgICAgYWxsX2ZpbGVz
ID0gc291cmNlX3BhbmVsLmZzX2Jyb3dzZXIubGlzdF9hbGxfZmlsZXMoZGlyX3BhdGgpCiAgICAg
ICAgICAgICAgICBhbmFseXplZC5hcHBlbmQoeyd0eXBlJzogJ2ZzX2RpcicsICdpdGVtJzogaXRl
bSwgJ2ZpbGVzJzogYWxsX2ZpbGVzLCAnZGlyX3BhdGgnOiBkaXJfcGF0aH0pCiAgICAgICAgICAg
ICAgICAjIGl0ZW1zX2luZm8uYXBwZW5kKGYiW0RJUiBdIHtpdGVtWyduYW1lJ119ICh7bGVuKGFs
bF9maWxlcyl9IGZpbGVzKSIpCiAgICAgICAgICAgICAgICBpdGVtc19pbmZvLmFwcGVuZChmIi97
aXRlbVsnbmFtZSddfSAoe2xlbihhbGxfZmlsZXMpfSBmaWxlcykiKQogICAgICAgICAgICAgICAg
dG90YWxfYnl0ZXMgKz0gc3VtKGZbJ3NpemUnXSBmb3IgZiBpbiBhbGxfZmlsZXMpCgogICAgICAg
ICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnczNfZmlsZSc6CiAgICAgICAgICAgICAgICBhbmFseXpl
ZC5hcHBlbmQoeyd0eXBlJzogJ3MzX2ZpbGUnLCAnaXRlbSc6IGl0ZW0sICdmaWxlcyc6IFtpdGVt
XX0pCiAgICAgICAgICAgICAgICAjIGl0ZW1zX2luZm8uYXBwZW5kKGYiW0ZJTEVdIHtpdGVtWydu
YW1lJ119IikKICAgICAgICAgICAgICAgIGl0ZW1zX2luZm8uYXBwZW5kKGYiIHtpdGVtWyduYW1l
J119IikKICAgICAgICAgICAgICAgIHRvdGFsX2J5dGVzICs9IGl0ZW0uZ2V0KCdzaXplJywgMCkK
CiAgICAgICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdzM19kaXInOgogICAgICAgICAgICAgICAg
YWxsX29iamVjdHMgPSBzb3VyY2VfcGFuZWwuczNfbWFuYWdlci5saXN0X2FsbF9vYmplY3RzKHNv
dXJjZV9wYW5lbC5jdXJyZW50X2J1Y2tldCwgaXRlbVsna2V5J10pCiAgICAgICAgICAgICAgICBh
bmFseXplZC5hcHBlbmQoeyd0eXBlJzogJ3MzX2RpcicsICdpdGVtJzogaXRlbSwgJ2ZpbGVzJzog
YWxsX29iamVjdHN9KQogICAgICAgICAgICAgICAgIyBpdGVtc19pbmZvLmFwcGVuZChmIltESVIg
XSB7aXRlbVsnbmFtZSddfSAoe2xlbihhbGxfb2JqZWN0cyl9IG9iamVjdHMpIikKICAgICAgICAg
ICAgICAgIGl0ZW1zX2luZm8uYXBwZW5kKGYiL3tpdGVtWyduYW1lJ119ICh7bGVuKGFsbF9vYmpl
Y3RzKX0gb2JqZWN0cykiKQogICAgICAgICAgICAgICAgdG90YWxfYnl0ZXMgKz0gc3VtKG9iai5n
ZXQoJ1NpemUnLCAwKSBmb3Igb2JqIGluIGFsbF9vYmplY3RzKQoKICAgICAgICAgICAgZWxpZiBp
dGVtX3R5cGUgPT0gJ2J1Y2tldCc6CiAgICAgICAgICAgICAgICBhbGxfb2JqZWN0cyA9IHNvdXJj
ZV9wYW5lbC5zM19tYW5hZ2VyLmxpc3RfYWxsX29iamVjdHMoaXRlbVsnbmFtZSddLCAnJykKICAg
ICAgICAgICAgICAgIGFuYWx5emVkLmFwcGVuZCh7J3R5cGUnOiAnYnVja2V0JywgJ2l0ZW0nOiBp
dGVtLCAnZmlsZXMnOiBhbGxfb2JqZWN0c30pCiAgICAgICAgICAgICAgICBpdGVtc19pbmZvLmFw
cGVuZChmIip7aXRlbVsnbmFtZSddfSAoe2xlbihhbGxfb2JqZWN0cyl9IG9iamVjdHMpIikKICAg
ICAgICAgICAgICAgIHRvdGFsX2J5dGVzICs9IHN1bShvYmouZ2V0KCdTaXplJywgMCkgZm9yIG9i
aiBpbiBhbGxfb2JqZWN0cykKCiAgICAgICAgcmV0dXJuIGFuYWx5emVkLCBpdGVtc19pbmZvLCB0
b3RhbF9ieXRlcwoKICAgIGRlZiBjb3B5X2l0ZW1zKHNlbGYpOgogICAgICAgIHNvdXJjZV9wYW5l
bCA9IHNlbGYuZ2V0X2FjdGl2ZV9wYW5lbCgpCiAgICAgICAgZGVzdF9wYW5lbCA9IHNlbGYuZ2V0
X2luYWN0aXZlX3BhbmVsKCkKCiAgICAgICAgaWYgc291cmNlX3BhbmVsLmlzX3Jvb3RfbWVudSgp
IG9yIHNvdXJjZV9wYW5lbC5pc19lbmRwb2ludF9saXN0KCk6CiAgICAgICAgICAgIHNlbGYuc2hv
d19yZXN1bHQoJ0Nhbm5vdCBjb3B5IGZyb20gdGhpcyBsZXZlbCcpCiAgICAgICAgICAgIHJldHVy
bgoKICAgICAgICBpZiBkZXN0X3BhbmVsLmlzX3Jvb3RfbWVudSgpIG9yIGRlc3RfcGFuZWwuaXNf
ZW5kcG9pbnRfbGlzdCgpOgogICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KCdTZWxlY3QgZGVz
dGluYXRpb24gZmlyc3QnKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc2VsZWN0ZWRfaXRl
bXMgPSBzb3VyY2VfcGFuZWwuZ2V0X3NlbGVjdGVkX2l0ZW1zKCkKICAgICAgICBpZiBub3Qgc2Vs
ZWN0ZWRfaXRlbXM6CiAgICAgICAgICAgIGZvY3VzZWQgPSBzb3VyY2VfcGFuZWwuZ2V0X2ZvY3Vz
ZWRfaXRlbSgpCiAgICAgICAgICAgIGlmIGZvY3VzZWQgYW5kIGZvY3VzZWRbJ3R5cGUnXSBpbiAo
J2ZzX2ZpbGUnLCAnczNfZmlsZScsICdmc19kaXInLCAnczNfZGlyJywgJ2J1Y2tldCcpOgogICAg
ICAgICAgICAgICAgc2VsZWN0ZWRfaXRlbXMgPSBbZm9jdXNlZF0KCiAgICAgICAgaWYgbm90IHNl
bGVjdGVkX2l0ZW1zOgogICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KCdObyBpdGVtcyB0byBj
b3B5JykKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIGRlc3RfcGFuZWwuaXNfYnVja2V0
X2xpc3QoKToKICAgICAgICAgICAgaGFzX2ZpbGVzID0gYW55KGl0ZW1bJ3R5cGUnXSBpbiAoJ2Zz
X2ZpbGUnLCAnczNfZmlsZScpIGZvciBpdGVtIGluIHNlbGVjdGVkX2l0ZW1zKQogICAgICAgICAg
ICBpZiBoYXNfZmlsZXM6CiAgICAgICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KCdDYW5ub3Qg
Y29weSBmaWxlcyBkaXJlY3RseSB0byBidWNrZXQgbGlzdCEnKQogICAgICAgICAgICAgICAgcmV0
dXJuCiAgICAgICAgZm9jdXNfaW5kZXggPSBzb3VyY2VfcGFuZWwubGlzdGJveC5mb2N1c19wb3Np
dGlvbgogICAgICAgIGFuYWx5emVkLCBpdGVtc19pbmZvLCB0b3RhbF9ieXRlcyA9IHNlbGYuYW5h
bHl6ZV9pdGVtcyhzZWxlY3RlZF9pdGVtcywgc291cmNlX3BhbmVsKQogICAgICAgIHNlbGYuX3No
b3dfY29weV9kaWFsb2coYW5hbHl6ZWQsIHNvdXJjZV9wYW5lbCwgZGVzdF9wYW5lbCwgaXNfbW92
ZT1GYWxzZSwgdG90YWxfYnl0ZXM9dG90YWxfYnl0ZXMsIHJlc3RvcmVfaW5kZXg9Zm9jdXNfaW5k
ZXgpCgogICAgZGVmIG1vdmVfaXRlbXMoc2VsZik6CiAgICAgICAgc291cmNlX3BhbmVsID0gc2Vs
Zi5nZXRfYWN0aXZlX3BhbmVsKCkKICAgICAgICBkZXN0X3BhbmVsID0gc2VsZi5nZXRfaW5hY3Rp
dmVfcGFuZWwoKQoKICAgICAgICBpZiBzb3VyY2VfcGFuZWwuaXNfcm9vdF9tZW51KCkgb3Igc291
cmNlX3BhbmVsLmlzX2VuZHBvaW50X2xpc3QoKToKICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3Vs
dCgnQ2Fubm90IG1vdmUgZnJvbSB0aGlzIGxldmVsJykKICAgICAgICAgICAgcmV0dXJuCgogICAg
ICAgIGlmIGRlc3RfcGFuZWwuaXNfcm9vdF9tZW51KCkgb3IgZGVzdF9wYW5lbC5pc19lbmRwb2lu
dF9saXN0KCk6CiAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoJ1NlbGVjdCBkZXN0aW5hdGlv
biBmaXJzdCcpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBzZWxlY3RlZF9pdGVtcyA9IHNv
dXJjZV9wYW5lbC5nZXRfc2VsZWN0ZWRfaXRlbXMoKQogICAgICAgIGlmIG5vdCBzZWxlY3RlZF9p
dGVtczoKICAgICAgICAgICAgZm9jdXNlZCA9IHNvdXJjZV9wYW5lbC5nZXRfZm9jdXNlZF9pdGVt
KCkKICAgICAgICAgICAgaWYgZm9jdXNlZCBhbmQgZm9jdXNlZFsndHlwZSddIGluICgnZnNfZmls
ZScsICdzM19maWxlJywgJ2ZzX2RpcicsICdzM19kaXInLCAnYnVja2V0Jyk6CiAgICAgICAgICAg
ICAgICBzZWxlY3RlZF9pdGVtcyA9IFtmb2N1c2VkXQoKICAgICAgICBpZiBub3Qgc2VsZWN0ZWRf
aXRlbXM6CiAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoJ05vIGl0ZW1zIHRvIG1vdmUnKQog
ICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgZGVzdF9wYW5lbC5pc19idWNrZXRfbGlzdCgp
OgogICAgICAgICAgICBoYXNfZmlsZXMgPSBhbnkoaXRlbVsndHlwZSddIGluICgnZnNfZmlsZScs
ICdzM19maWxlJykgZm9yIGl0ZW0gaW4gc2VsZWN0ZWRfaXRlbXMpCiAgICAgICAgICAgIGlmIGhh
c19maWxlczoKICAgICAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoJ0Nhbm5vdCBtb3ZlIGZp
bGVzIGRpcmVjdGx5IHRvIGJ1Y2tldCBsaXN0IScpCiAgICAgICAgICAgICAgICByZXR1cm4KICAg
ICAgICBmb2N1c19pbmRleCA9IHNvdXJjZV9wYW5lbC5saXN0Ym94LmZvY3VzX3Bvc2l0aW9uCiAg
ICAgICAgYW5hbHl6ZWQsIGl0ZW1zX2luZm8sIHRvdGFsX2J5dGVzID0gc2VsZi5hbmFseXplX2l0
ZW1zKHNlbGVjdGVkX2l0ZW1zLCBzb3VyY2VfcGFuZWwpCiAgICAgICAgc2VsZi5fc2hvd19jb3B5
X2RpYWxvZyhhbmFseXplZCwgc291cmNlX3BhbmVsLCBkZXN0X3BhbmVsLCBpc19tb3ZlPVRydWUs
IHRvdGFsX2J5dGVzPXRvdGFsX2J5dGVzLCByZXN0b3JlX2luZGV4PWZvY3VzX2luZGV4KQoKICAg
IGRlZiBfc2hvd19jb3B5X2RpYWxvZyhzZWxmLCBhbmFseXplZCwgc291cmNlX3BhbmVsLCBkZXN0
X3BhbmVsLCBpc19tb3ZlPUZhbHNlLCB0b3RhbF9ieXRlcz0wLCByZXN0b3JlX2luZGV4PU5vbmUp
OgogICAgICAgICIiIgogICAgICAgINCe0YLQvtCx0YDQsNC20LDQtdGCINC00LjQsNC70L7Qs9C+
0LLQvtC1INC+0LrQvdC+INC00LvRjyDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjRjyDQv9GD0YLQ
uCDQvdCw0LfQvdCw0YfQtdC90LjRjyDQv9C10YDQtdC0INC+0L/QtdGA0LDRhtC40LXQuSDQutC+
0L/QuNGA0L7QstCw0L3QuNGPINC40LvQuCDQv9C10YDQtdC80LXRidC10L3QuNGPLgoKICAgICAg
ICDQkNGA0LPRg9C80LXQvdGC0Ys6CiAgICAgICAgICAgIGFuYWx5emVkIChsaXN0KTog0KHQv9C4
0YHQvtC6INC/0YDQvtCw0L3QsNC70LjQt9C40YDQvtCy0LDQvdC90YvRhSDRjdC70LXQvNC10L3R
gtC+0LIgKNGE0LDQudC70L7Qsi/Qv9Cw0L/QvtC6KSDQtNC70Y8g0L7QsdGA0LDQsdC+0YLQutC4
LgogICAgICAgICAgICBzb3VyY2VfcGFuZWwgKFBhbmVsV2lkZ2V0KTog0J/QsNC90LXQu9GMLdC4
0YHRgtC+0YfQvdC40LosINC+0YLQutGD0LTQsCDQuNC90LjRhtC40LjRgNC+0LLQsNC90LAg0L7Q
v9C10YDQsNGG0LjRjy4KICAgICAgICAgICAgZGVzdF9wYW5lbCAoUGFuZWxXaWRnZXQpOiDQn9Cw
0L3QtdC70Ywt0L3QsNC30L3QsNGH0LXQvdC40LUgKHRhcmdldCkuCiAgICAgICAgICAgIGlzX21v
dmUgKGJvb2wpOiDQpNC70LDQsyDRgNC10LbQuNC80LAg0L/QtdGA0LXQvNC10YnQtdC90LjRjy4g
0JXRgdC70LggVHJ1ZSDigJQg0LTQsNC90L3Ri9C1INCx0YPQtNGD0YIg0YPQtNCw0LvQtdC90Ysg
0LjQtyDQuNGB0YLQvtGH0L3QuNC60LAg0L/QvtGB0LvQtSDQutC+0L/QuNGA0L7QstCw0L3QuNGP
LgogICAgICAgICAgICB0b3RhbF9ieXRlcyAoaW50KTog0J7QsdGJ0LjQuSDRgNCw0LfQvNC10YAg
0LTQsNC90L3Ri9GFINC00LvRjyDQv9C10YDQtdC00LDRh9C4INCyINC/0YDQvtCz0YDQtdGB0YEt
0LHQsNGALgogICAgICAgICAgICByZXN0b3JlX2luZGV4IChpbnQsIG9wdGlvbmFsKTog0JjQvdC0
0LXQutGBINGB0YLRgNC+0LrQuCDQtNC70Y8g0LLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90LjRjyDR
hNC+0LrRg9GB0LAg0LIg0LjRgdGF0L7QtNC90L7QuSDQv9Cw0L3QtdC70Lgg0L/QvtGB0LvQtSDQ
t9Cw0LLQtdGA0YjQtdC90LjRjyAo0LjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPINC00LvRjyDQstC1
0YDRgdC40LkpLgogICAgICAgICIiIgogICAgICAgIG9wZXJhdGlvbiA9ICdNb3ZlJyBpZiBpc19t
b3ZlIGVsc2UgJ0NvcHknCgogICAgICAgIGlmIGxlbihhbmFseXplZCkgPT0gMToKICAgICAgICAg
ICAgaXRlbSA9IGFuYWx5emVkWzBdWydpdGVtJ10KICAgICAgICAgICAgIyBzb3VyY2VfZGVzYyA9
IGYne29wZXJhdGlvbn0gIntpdGVtWyJuYW1lIl19IicKICAgICAgICAgICAgc291cmNlX2Rlc2Mg
PSBmJyJ7aXRlbVsibmFtZSJdfSInCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBzb3VyY2Vf
ZGVzYyA9IGYne29wZXJhdGlvbn0ge2xlbihhbmFseXplZCl9IGl0ZW1zJwogICAgICAgICAgICBz
b3VyY2VfZGVzYyA9IGYne2xlbihhbmFseXplZCl9IGl0ZW1zJwoKICAgICAgICBpZiBsZW4oYW5h
bHl6ZWQpID09IDE6CiAgICAgICAgICAgIGl0ZW0gPSBhbmFseXplZFswXVsnaXRlbSddCiAgICAg
ICAgICAgIGlmIGRlc3RfcGFuZWwuaXNfYnVja2V0X2xpc3QoKToKICAgICAgICAgICAgICAgIGRl
c3RfcGF0aCA9IGl0ZW1bJ25hbWUnXS5sb3dlcigpLnJlcGxhY2UoJ18nLCAnLScpCiAgICAgICAg
ICAgIGVsc2U6CiAgICAgICAgICAgICAgICBkZXN0X2Jhc2UgPSBkZXN0X3BhbmVsLmdldF9jdXJy
ZW50X3BhdGgoKQogICAgICAgICAgICAgICAgaWYgZGVzdF9iYXNlOgogICAgICAgICAgICAgICAg
ICAgIGRlc3RfcGF0aCA9IGRlc3RfYmFzZS5yc3RyaXAoJy8nKSArICcvJyArIGl0ZW1bJ25hbWUn
XQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBkZXN0X3BhdGggPSBp
dGVtWyduYW1lJ10KICAgICAgICBlbHNlOgogICAgICAgICAgICBkZXN0X3BhdGggPSBkZXN0X3Bh
bmVsLmdldF9jdXJyZW50X3BhdGgoKQoKICAgICAgICBkZWYgY2FsbGJhY2soY29uZmlybWVkLCB0
YXJnZXRfbmFtZSk6CiAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAg
aWYgbm90IGNvbmZpcm1lZDoKICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAgICAgICAgaWYg
bm90IHRhcmdldF9uYW1lOgogICAgICAgICAgICAgICAgdGFyZ2V0X25hbWUgPSBkZXN0X3BhbmVs
LmdldF9jdXJyZW50X3BhdGgoKQoKICAgICAgICAgICAgY3VycmVudF9pdGVtID0gc291cmNlX3Bh
bmVsLmdldF9mb2N1c2VkX2l0ZW0oKQogICAgICAgICAgICBmb2N1c19uYW1lID0gY3VycmVudF9p
dGVtLmdldCgnbmFtZScpIGlmIGN1cnJlbnRfaXRlbSBlbHNlIE5vbmUKCiAgICAgICAgICAgICMg
0KHQsdGA0L7RgSDRhNC70LDQs9CwICLQv9C10YDQtdC30LDQv9C40YHQsNGC0Ywg0LLRgdC1Igog
ICAgICAgICAgICBzZWxmLm92ZXJ3cml0ZV9hbGwgPSBGYWxzZQogICAgICAgICAgICBzZWxmLnZl
cnNpb25fYWxsID0gRmFsc2UKICAgICAgICAgICAgc2VsZi5za2lwX2FsbCA9IEZhbHNlCgogICAg
ICAgICAgICBzZWxmLl9kb19jb3B5X3dpdGhfcHJvZ3Jlc3MoYW5hbHl6ZWQsIHNvdXJjZV9wYW5l
bCwgZGVzdF9wYW5lbCwgdGFyZ2V0X25hbWUsIGZvY3VzX25hbWUsIGlzX21vdmU9aXNfbW92ZSwK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsX2J5dGVzPXRvdGFs
X2J5dGVzLCByZXN0b3JlX2luZGV4PXJlc3RvcmVfaW5kZXgpCgogICAgICAgIGRpYWxvZyA9IENv
cHlNb3ZlRGlhbG9nKG9wZXJhdGlvbiwgc291cmNlX2Rlc2MsIGRlc3RfcGF0aCwgY2FsbGJhY2sp
CiAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhkaWFsb2cpCgogICAgZGVmIF9jaGVja19vdmVyd3Jp
dGUoc2VsZiwgZmlsZW5hbWUsIHNvdXJjZV9pbmZvLCBkZXN0X2luZm8sIGNhbGxiYWNrLCBpc19z
M19kZXN0PUZhbHNlKToKICAgICAgICAiIiLQn9C+0LrQsNC30LDRgtGMINC00LjQsNC70L7QsyDQ
v9C+0LTRgtCy0LXRgNC20LTQtdC90LjRjyDQv9C10YDQtdC30LDQv9C40YHQuCIiIgogICAgICAg
IGRpYWxvZyA9IE92ZXJ3cml0ZURpYWxvZyhmaWxlbmFtZSwgc291cmNlX2luZm8sIGRlc3RfaW5m
bywgY2FsbGJhY2ssIHNob3dfdmVyc2lvbl9vcHRpb25zPWlzX3MzX2Rlc3QpCiAgICAgICAgc2Vs
Zi5zaG93X2RpYWxvZyhkaWFsb2cpCgogICAgZGVmIF9kb19jb3B5X3dpdGhfcHJvZ3Jlc3Moc2Vs
ZiwgYW5hbHl6ZWQsIHNvdXJjZV9wYW5lbCwgZGVzdF9wYW5lbCwgdGFyZ2V0X25hbWUsIGZvY3Vz
X25hbWUsIGlzX21vdmU9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3Rh
bF9ieXRlcz0wLCByZXN0b3JlX2luZGV4PU5vbmUsIG9uX2NvbXBsZXRlPU5vbmUpOgogICAgICAg
ICIiIgogICAgICAgINCS0YvQv9C+0LvQvdGP0LXRgiDQutC+0L/QuNGA0L7QstCw0L3QuNC1INC4
0LvQuCDQv9C10YDQtdC80LXRidC10L3QuNC1INGE0LDQudC70L7Qsi/QstC10YDRgdC40Lkg0LIg
0YTQvtC90L7QstC+0Lwg0L/QvtGC0L7QutC1INGBINC+0YLQvtCx0YDQsNC20LXQvdC40LXQvCDQ
vNC+0LTQsNC70YzQvdC+0LPQviDQvtC60L3QsCDQv9GA0L7Qs9GA0LXRgdGB0LAuCgogICAgICAg
INCQ0YDQs9GD0LzQtdC90YLRizoKICAgICAgICAgICAgYW5hbHl6ZWQgKGxpc3QpOiDQodC/0LjR
gdC+0Log0YHRgtGA0YPQutGC0YPRgCDQtNCw0L3QvdGL0YUgKNGE0LDQudC70L7Qsi/Qv9Cw0L/Q
vtC6KSwg0L/QvtC00LPQvtGC0L7QstC70LXQvdC90YvRhSDQtNC70Y8g0LrQvtC/0LjRgNC+0LLQ
sNC90LjRjy4KICAgICAgICAgICAgc291cmNlX3BhbmVsIChQYW5lbFdpZGdldCk6INCQ0LrRgtC4
0LLQvdCw0Y8g0L/QsNC90LXQu9GMICjQuNGB0YLQvtGH0L3QuNC6KSwg0L7RgtC60YPQtNCwINCx
0LXRgNGD0YLRgdGPINGE0LDQudC70YsuCiAgICAgICAgICAgIGRlc3RfcGFuZWwgKFBhbmVsV2lk
Z2V0KTog0J3QtdCw0LrRgtC40LLQvdCw0Y8g0L/QsNC90LXQu9GMICjQvdCw0LfQvdCw0YfQtdC9
0LjQtSksINC60YPQtNCwINC60L7Qv9C40YDRg9GO0YLRgdGPINC00LDQvdC90YvQtS4KICAgICAg
ICAgICAgdGFyZ2V0X25hbWUgKHN0cik6INCd0L7QstC+0LUg0LjQvNGPINC00LvRjyDRhtC10LvQ
tdCy0L7Qs9C+INC+0LHRitC10LrRgtCwICjQuNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0L/RgNC4
INC/0LXRgNC10LjQvNC10L3QvtCy0LDQvdC40Lgv0LrQvtC/0LjRgNC+0LLQsNC90LjQuCDQvtC0
0L3QvtCz0L4g0YTQsNC50LvQsCkg0LjQu9C4INC/0YDQtdGE0LjQutGBLgogICAgICAgICAgICBm
b2N1c19uYW1lIChzdHIpOiDQmNC80Y8g0YTQsNC50LvQsCDQsiDQuNGB0YXQvtC00L3QvtC5INC/
0LDQvdC10LvQuCwg0L3QsCDQutC+0YLQvtGA0YvQuSDRgdC70LXQtNGD0LXRgiDRg9GB0YLQsNC9
0L7QstC40YLRjCDQutGD0YDRgdC+0YAg0L/QvtGB0LvQtSDQt9Cw0LLQtdGA0YjQtdC90LjRjyDQ
vtC/0LXRgNCw0YbQuNC4ICjQtdGB0LvQuCByZXN0b3JlX2luZGV4INC90LUg0LfQsNC00LDQvSku
CiAgICAgICAgICAgIGlzX21vdmUgKGJvb2wpOiDQpNC70LDQsyDQvtC/0LXRgNCw0YbQuNC4INC/
0LXRgNC10LzQtdGJ0LXQvdC40Y8uINCV0YHQu9C4IFRydWUsINC/0L7RgdC70LUg0YPRgdC/0LXR
iNC90L7Qs9C+INC60L7Qv9C40YDQvtCy0LDQvdC40Y8g0LjRgdGF0L7QtNC90YvQtSDQvtCx0YrQ
tdC60YLRiyDRg9C00LDQu9GP0Y7RgtGB0Y8uCiAgICAgICAgICAgIHRvdGFsX2J5dGVzIChpbnQp
OiDQntCx0YnQuNC5INC+0LHRitC10Lwg0LTQsNC90L3Ri9GFINCyINCx0LDQudGC0LDRhSDQtNC7
0Y8g0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Lgg0YjQutCw0LvRiyDQv9GA0L7Qs9GA0LXRgdGB
0LAuCiAgICAgICAgICAgIHJlc3RvcmVfaW5kZXggKGludCk6INCY0L3QtNC10LrRgSDQv9C+0LfQ
uNGG0LjQuCDQutGD0YDRgdC+0YDQsCDQsiDQuNGB0YXQvtC00L3QvtC5INC/0LDQvdC10LvQuCwg
0LrQvtGC0L7RgNGL0Lkg0L3Rg9C20L3QviDQttC10YHRgtC60L4g0LLQvtGB0YHRgtCw0L3QvtCy
0LjRgtGMINC/0L7RgdC70LUgcmVmcmVzaCgpICjQv9C+0LvQtdC30L3QviDQtNC70Y8g0LLQtdGA
0YHQuNC5KS4KICAgICAgICAgICAgb25fY29tcGxldGUgKGNhbGxhYmxlKTog0KTRg9C90LrRhtC4
0Y8g0L7QsdGA0LDRgtC90L7Qs9C+INCy0YvQt9C+0LLQsCwg0LrQvtGC0L7RgNCw0Y8g0LLRi9C/
0L7Qu9C90Y/QtdGC0YHRjyDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y8g0L7QutC90LAg0L/R
gNC+0LPRgNC10YHRgdCwICjQvdCw0L/RgNC40LzQtdGALCDQtNC70Y8g0L/QtdGA0LXQvtGC0LrR
gNGL0YLQuNGPINC00LjQsNC70L7Qs9CwINCy0LXRgNGB0LjQuSkuCiAgICAgICAgIiIiCgogICAg
ICAgIHRvdGFsX2ZpbGVzID0gc3VtKGxlbihhWydmaWxlcyddKSBmb3IgYSBpbiBhbmFseXplZCkK
CiAgICAgICAgb3BlcmF0aW9uID0gJ01vdmluZycgaWYgaXNfbW92ZSBlbHNlICdDb3B5aW5nJwog
ICAgICAgIHByb2dyZXNzID0gUHJvZ3Jlc3NEaWFsb2coZid7b3BlcmF0aW9ufSBmaWxlcy4uLics
IGNhbGxiYWNrPXNlbGYuY2xvc2VfZGlhbG9nKQogICAgICAgIHByb2dyZXNzLnNldF90b3RhbCh0
b3RhbF9maWxlcywgdG90YWxfYnl0ZXMpCiAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhwcm9ncmVz
cykKCiAgICAgICAgaXRlbXNfdG9fZGVsZXRlID0gW10KICAgICAgICB1c2VyX2Nob2ljZSA9IHsn
dmFsdWUnOiBOb25lfQogICAgICAgIGNob2ljZV9ldmVudCA9IHRocmVhZGluZy5FdmVudCgpCgog
ICAgICAgIGRlZiBjb3B5X3RocmVhZCgpOgogICAgICAgICAgICBmb3IgaXRlbV9kYXRhIGluIGFu
YWx5emVkOgogICAgICAgICAgICAgICAgaWYgcHJvZ3Jlc3MuY2FuY2VsbGVkOgogICAgICAgICAg
ICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgaXRlbV90eXBlID0gaXRlbV9kYXRhWyd0
eXBlJ10KICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtX2RhdGFbJ2l0ZW0nXQoKICAgICAgICAg
ICAgICAgICMgRlMg0YTQsNC50LsgLT4gUzMKICAgICAgICAgICAgICAgIGlmIGl0ZW1fdHlwZSA9
PSAnZnNfZmlsZScgYW5kIGRlc3RfcGFuZWwubW9kZSA9PSAnczMnIGFuZCBkZXN0X3BhbmVsLmN1
cnJlbnRfYnVja2V0OgogICAgICAgICAgICAgICAgICAgIHNvdXJjZV9wYXRoID0gb3MucGF0aC5q
b2luKHNvdXJjZV9wYW5lbC5mc19icm93c2VyLmN1cnJlbnRfcGF0aCwgaXRlbVsnbmFtZSddKQoK
ICAgICAgICAgICAgICAgICAgICBpZiBsZW4oYW5hbHl6ZWQpID09IDE6CiAgICAgICAgICAgICAg
ICAgICAgICAgIGRlc3Rfa2V5ID0gdGFyZ2V0X25hbWUgaWYgdGFyZ2V0X25hbWUgZWxzZSBpdGVt
WyduYW1lJ10KICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAg
ICBpZiB0YXJnZXRfbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3Rfa2V5ID0g
dGFyZ2V0X25hbWUucnN0cmlwKCcvJykgKyAnLycgKyBpdGVtWyduYW1lJ10KICAgICAgICAgICAg
ICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3Rfa2V5ID0g
aXRlbVsnbmFtZSddCgogICAgICAgICAgICAgICAgICAgICMg0J/RgNC+0LLQtdGA0LrQsCDRgdGD
0YnQtdGB0YLQstC+0LLQsNC90LjRjwogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLm92
ZXJ3cml0ZV9hbGwgYW5kIG5vdCBzZWxmLnZlcnNpb25fYWxsIGFuZCBub3Qgc2VsZi5za2lwX2Fs
bDoKICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcgPSBkZXN0X3BhbmVsLnMzX21hbmFn
ZXIub2JqZWN0X2V4aXN0cyhkZXN0X3BhbmVsLmN1cnJlbnRfYnVja2V0LCBkZXN0X2tleSkKICAg
ICAgICAgICAgICAgICAgICAgICAgaWYgZXhpc3Rpbmc6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzb3VyY2VfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGRlc3RfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAnc2l6ZSc6IGV4aXN0aW5nLmdldCgnU2l6ZScsIDApLAogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICdtdGltZSc6IGV4aXN0aW5nLmdldCgnTGFzdE1vZGlmaWVkJykK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBkZWYgc2hvd19vdmVyd3JpdGVfZGlhbG9nKCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZGVmIG9uX2Nob2ljZShjaG9pY2UpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB1c2VyX2Nob2ljZVsndmFsdWUnXSA9IGNob2ljZQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQuc2V0KCkKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzZWxmLnNob3dfZGlhbG9nKHByb2dyZXNzKQoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzZWxmLl9jaGVja19vdmVyd3JpdGUoaXRlbVsnbmFtZSddLCBzb3Vy
Y2VfaW5mbywgZGVzdF9pbmZvLCBvbl9jaG9pY2UsIGlzX3MzX2Rlc3Q9VHJ1ZSkKCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzZWxmLmxvb3Auc2V0X2FsYXJtX2luKDAsIGxhbWJkYSAqYXJn
czogc2hvd19vdmVyd3JpdGVfZGlhbG9nKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
aG9pY2VfZXZlbnQud2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZl
bnQuY2xlYXIoKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHVzZXJfY2hvaWNlWyd2
YWx1ZSddID09ICdjYW5jZWwnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dy
ZXNzLmNhbmNlbGxlZCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVh
awogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9
PSAnYWxsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm92ZXJ3cml0ZV9h
bGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2
YWx1ZSddID09ICd2ZXJzaW9uX2FsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
c2VsZi52ZXJzaW9uX2FsbCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYg
dXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXAnOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHByb2dyZXNzLnVwZGF0ZShpdGVtWyduYW1lJ10sIDApCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYg
dXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXBfYWxsJzoKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzZWxmLnNraXBfYWxsID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHByb2dyZXNzLnVwZGF0ZShpdGVtWyduYW1lJ10sIDApCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYg
dXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3ZlcnNpb24nOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHBhc3MgICMg0J/RgNC+0YHRgtC+INC30LDQs9GA0YPQttCw0LXQvCwgUzMg0YHQ
vtC30LTQsNGB0YIg0LLQtdGA0YHQuNGOCgogICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuc2tp
cF9hbGw6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShpdGVtWyduYW1l
J10sIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAg
ICAgIGZpbGVfc2l6ZSA9IGl0ZW0uZ2V0KCdzaXplJywgMCkKICAgICAgICAgICAgICAgICAgICBw
cm9ncmVzcy51cGRhdGUoaXRlbVsnbmFtZSddLCBmaWxlX3NpemUpCiAgICAgICAgICAgICAgICAg
ICAgc2VsZi5sb29wLmRyYXdfc2NyZWVuKCkKCiAgICAgICAgICAgICAgICAgICAgaWYgZGVzdF9w
YW5lbC5zM19tYW5hZ2VyLnVwbG9hZF9maWxlKHNvdXJjZV9wYXRoLCBkZXN0X3BhbmVsLmN1cnJl
bnRfYnVja2V0LCBkZXN0X2tleSk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFk
ZF9zdWNjZXNzKCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaXNfbW92ZToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGl0ZW1zX3RvX2RlbGV0ZS5hcHBlbmQoaXRlbV9kYXRhKQogICAg
ICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFk
ZF9mYWlsdXJlKCkKCiAgICAgICAgICAgICAgICAjIEZTINC00LjRgNC10LrRgtC+0YDQuNGPIC0+
IFMzCiAgICAgICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnZnNfZGlyJyBhbmQgZGVzdF9w
YW5lbC5tb2RlID09ICdzMycgYW5kIGRlc3RfcGFuZWwuY3VycmVudF9idWNrZXQ6CiAgICAgICAg
ICAgICAgICAgICAgYWxsX3N1Y2Nlc3MgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgZm9yIGZp
bGVfaW5mbyBpbiBpdGVtX2RhdGFbJ2ZpbGVzJ106CiAgICAgICAgICAgICAgICAgICAgICAgIGlm
IHByb2dyZXNzLmNhbmNlbGxlZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCgog
ICAgICAgICAgICAgICAgICAgICAgICBpZiBsZW4oYW5hbHl6ZWQpID09IDE6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBpZiB0YXJnZXRfbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBkZXN0X2tleSA9IHRhcmdldF9uYW1lLnJzdHJpcCgnLycpICsgJy8nICsgZmlsZV9p
bmZvWydyZWxfcGF0aCddLnJlcGxhY2Uob3Muc2VwLCAnLycpCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3Rfa2V5ID0g
ZmlsZV9pbmZvWydyZWxfcGF0aCddLnJlcGxhY2Uob3Muc2VwLCAnLycpCiAgICAgICAgICAgICAg
ICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0YXJnZXRfbmFt
ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2tleSA9IHRhcmdldF9uYW1l
LnJzdHJpcCgnLycpICsgJy8nICsgaXRlbVsnbmFtZSddICsgJy8nICsgZmlsZV9pbmZvWwogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncmVsX3BhdGgnXS5yZXBsYWNlKG9zLnNl
cCwgJy8nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBkZXN0X2tleSA9IGl0ZW1bJ25hbWUnXSArICcvJyArIGZpbGVfaW5m
b1sncmVsX3BhdGgnXS5yZXBsYWNlKG9zLnNlcCwgJy8nKQoKICAgICAgICAgICAgICAgICAgICAg
ICAgIyDQn9GA0L7QstC10YDQutCwINGB0YPRidC10YHRgtCy0L7QstCw0L3QuNGPINC00LvRjyDR
hNCw0LnQu9C+0LIg0LIg0LTQuNGA0LXQutGC0L7RgNC40LgKICAgICAgICAgICAgICAgICAgICAg
ICAgaWYgbm90IHNlbGYub3ZlcndyaXRlX2FsbCBhbmQgbm90IHNlbGYudmVyc2lvbl9hbGwgYW5k
IG5vdCBzZWxmLnNraXBfYWxsOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3Rpbmcg
PSBkZXN0X3BhbmVsLnMzX21hbmFnZXIub2JqZWN0X2V4aXN0cyhkZXN0X3BhbmVsLmN1cnJlbnRf
YnVja2V0LCBkZXN0X2tleSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGV4aXN0aW5n
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc3RhdCA9IG9zLnN0YXQoZmlsZV9pbmZvWydwYXRoJ10pCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9pbmZvID0gewogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiBzdGF0LnN0X3NpemUsCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbXRpbWUnOiBkYXRldGltZS5mcm9t
dGltZXN0YW1wKHN0YXQuc3RfbXRpbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9pbmZvID0gewog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiBleGlzdGluZy5n
ZXQoJ1NpemUnLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdt
dGltZSc6IGV4aXN0aW5nLmdldCgnTGFzdE1vZGlmaWVkJykKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVm
IHNob3dfb3ZlcndyaXRlX2RpYWxvZygpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZGVmIG9uX2Nob2ljZShjaG9pY2UpOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHVzZXJfY2hvaWNlWyd2YWx1ZSddID0gY2hvaWNlCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LnNldCgpCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZV9kaWFs
b2coKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hv
d19kaWFsb2cocHJvZ3Jlc3MpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2VsZi5fY2hlY2tfb3ZlcndyaXRlKGZpbGVfaW5mb1sncmVsX3BhdGgnXSwgc291cmNlX2lu
Zm8sIGRlc3RfaW5mbywgb25fY2hvaWNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3MzX2Rlc3Q9VHJ1ZSkKCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9vcC5zZXRfYWxhcm1faW4oMCwgbGFt
YmRhICphcmdzOiBzaG93X292ZXJ3cml0ZV9kaWFsb2coKSkKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LndhaXQoKQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQuY2xlYXIoKQoKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ2NhbmNlbCc6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5jYW5jZWxsZWQgPSBU
cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09
ICdhbGwnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vdmVy
d3JpdGVfYWxsID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlm
IHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICd2ZXJzaW9uX2FsbCc6CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnZlcnNpb25fYWxsID0gVHJ1ZQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdz
a2lwJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVw
ZGF0ZShmaWxlX2luZm9bJ3JlbF9wYXRoJ10sIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdza2lwX2FsbCc6CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNraXBfYWxsID0gVHJ1ZQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKGZpbGVfaW5mb1sn
cmVsX3BhdGgnXSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNv
bnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAgICAgICAgICAgICAgICBp
ZiBzZWxmLnNraXBfYWxsOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBk
YXRlKGZpbGVfaW5mb1sncmVsX3BhdGgnXSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGNvbnRpbnVlCgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemUgPSBmaWxlX2luZm8u
Z2V0KCdzaXplJywgMCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKGZp
bGVfaW5mb1sncmVsX3BhdGgnXSwgZmlsZV9zaXplKQogICAgICAgICAgICAgICAgICAgICAgICBz
ZWxmLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGVzdF9w
YW5lbC5zM19tYW5hZ2VyLnVwbG9hZF9maWxlKGZpbGVfaW5mb1sncGF0aCddLCBkZXN0X3BhbmVs
LmN1cnJlbnRfYnVja2V0LCBkZXN0X2tleSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBw
cm9ncmVzcy5hZGRfc3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfZmFpbHVyZSgpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBhbGxfc3VjY2VzcyA9IEZhbHNlCgogICAgICAgICAgICAgICAgICAg
IGlmIGFsbF9zdWNjZXNzIGFuZCBpc19tb3ZlOgogICAgICAgICAgICAgICAgICAgICAgICBpdGVt
c190b19kZWxldGUuYXBwZW5kKGl0ZW1fZGF0YSkKCiAgICAgICAgICAgICAgICAjIFMzINGE0LDQ
udC7IC0+IEZTCiAgICAgICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnczNfZmlsZScgYW5k
IGRlc3RfcGFuZWwubW9kZSA9PSAnZnMnOgogICAgICAgICAgICAgICAgICAgIGlmIGxlbihhbmFs
eXplZCkgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgb3MucGF0aC5pc2Ficyh0YXJn
ZXRfbmFtZSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X3BhdGggPSB0YXJnZXRf
bmFtZQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZGVzdF9wYXRoID0gb3MucGF0aC5qb2luKGRlc3RfcGFuZWwuZnNfYnJvd3Nlci5jdXJy
ZW50X3BhdGgsIHRhcmdldF9uYW1lKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAg
ICAgICAgICAgICAgICAgIGlmIHRhcmdldF9uYW1lOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgYmFzZV9kaXIgPSBvcy5wYXRoLmpvaW4oZGVzdF9wYW5lbC5mc19icm93c2VyLmN1cnJlbnRf
cGF0aCwgdGFyZ2V0X25hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBiYXNlX2RpciA9IGRlc3RfcGFuZWwuZnNfYnJvd3Nlci5jdXJy
ZW50X3BhdGgKICAgICAgICAgICAgICAgICAgICAgICAgb3MubWFrZWRpcnMoYmFzZV9kaXIsIGV4
aXN0X29rPVRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RfcGF0aCA9IG9zLnBhdGgu
am9pbihiYXNlX2RpciwgaXRlbVsnbmFtZSddKQoKICAgICAgICAgICAgICAgICAgICAjINCf0YDQ
vtCy0LXRgNC60LAg0YHRg9GJ0LXRgdGC0LLQvtCy0LDQvdC40Y8KICAgICAgICAgICAgICAgICAg
ICBpZiBub3Qgc2VsZi5vdmVyd3JpdGVfYWxsIGFuZCBub3Qgc2VsZi5za2lwX2FsbDoKICAgICAg
ICAgICAgICAgICAgICAgICAgaWYgb3MucGF0aC5leGlzdHMoZGVzdF9wYXRoKToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHNvdXJjZV9pbmZvID0gewogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICdzaXplJzogaXRlbS5nZXQoJ3NpemUnLCAwKSwKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAnbXRpbWUnOiBpdGVtLmdldCgnbXRpbWUnKQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICMgJ3NpemUnOiBpdGVtWydzaXplJ10sCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIyAnbXRpbWUnOiBpdGVtWydtdGltZSddCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ19zdGF0ID0g
b3Muc3RhdChkZXN0X3BhdGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2luZm8g
PSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiBleGlzdGluZ19zdGF0
LnN0X3NpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ210aW1lJzogZGF0ZXRp
bWUuZnJvbXRpbWVzdGFtcChleGlzdGluZ19zdGF0LnN0X210aW1lKQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBzaG93X292ZXJ3
cml0ZV9kaWFsb2coKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgb25fY2hv
aWNlKGNob2ljZSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfY2hv
aWNlWyd2YWx1ZSddID0gY2hvaWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGNob2ljZV9ldmVudC5zZXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
ZWxmLmNsb3NlX2RpYWxvZygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNl
bGYuc2hvd19kaWFsb2cocHJvZ3Jlc3MpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHNlbGYuX2NoZWNrX292ZXJ3cml0ZShpdGVtWyduYW1lJ10sIHNvdXJjZV9pbmZvLCBkZXN0X2lu
Zm8sIG9uX2Nob2ljZSwgaXNfczNfZGVzdD1GYWxzZSkKCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzZWxmLmxvb3Auc2V0X2FsYXJtX2luKDAsIGxhbWJkYSAqYXJnczogc2hvd19vdmVyd3Jp
dGVfZGlhbG9nKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQud2Fp
dCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQuY2xlYXIoKQoKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdjYW5j
ZWwnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmNhbmNlbGxlZCA9
IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnYWxsJzoKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm92ZXJ3cml0ZV9hbGwgPSBUcnVlCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdza2lw
JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoaXRlbVsn
bmFtZSddLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdza2lw
X2FsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5za2lwX2FsbCA9IFRy
dWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoaXRlbVsn
bmFtZSddLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAg
ICAgICAgICAgICAgICAgIGlmIHNlbGYuc2tpcF9hbGw6CiAgICAgICAgICAgICAgICAgICAgICAg
IHByb2dyZXNzLnVwZGF0ZShpdGVtWyduYW1lJ10sIDApCiAgICAgICAgICAgICAgICAgICAgICAg
IGNvbnRpbnVlCgogICAgICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKG9zLnBhdGguZGlybmFt
ZShkZXN0X3BhdGgpLCBleGlzdF9vaz1UcnVlKQoKICAgICAgICAgICAgICAgICAgICBmaWxlX3Np
emUgPSBpdGVtLmdldCgnc2l6ZScsIDApCiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBk
YXRlKGl0ZW1bJ25hbWUnXSwgZmlsZV9zaXplKQogICAgICAgICAgICAgICAgICAgIHNlbGYubG9v
cC5kcmF3X3NjcmVlbigpCgogICAgICAgICAgICAgICAgICAgIGlmIHNvdXJjZV9wYW5lbC5zM19t
YW5hZ2VyLmRvd25sb2FkX29iamVjdChzb3VyY2VfcGFuZWwuY3VycmVudF9idWNrZXQsIGl0ZW1b
J2tleSddLCBkZXN0X3BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25faWQ9aXRlbS5nZXQoJ1ZlcnNpb25JZCcp
KToKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX3N1Y2Nlc3MoKQogICAgICAg
ICAgICAgICAgICAgICAgICBpZiBpc19tb3ZlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
aXRlbXNfdG9fZGVsZXRlLmFwcGVuZChpdGVtX2RhdGEpCiAgICAgICAgICAgICAgICAgICAgZWxz
ZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX2ZhaWx1cmUoKQoKICAgICAg
ICAgICAgICAgICMgUzMg0LTQuNGA0LXQutGC0L7RgNC40Y8gLT4gRlMKICAgICAgICAgICAgICAg
IGVsaWYgaXRlbV90eXBlID09ICdzM19kaXInIGFuZCBkZXN0X3BhbmVsLm1vZGUgPT0gJ2ZzJzoK
ICAgICAgICAgICAgICAgICAgICBhbGxfc3VjY2VzcyA9IFRydWUKICAgICAgICAgICAgICAgICAg
ICBmb3Igb2JqIGluIGl0ZW1fZGF0YVsnZmlsZXMnXToKICAgICAgICAgICAgICAgICAgICAgICAg
aWYgcHJvZ3Jlc3MuY2FuY2VsbGVkOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsK
CiAgICAgICAgICAgICAgICAgICAgICAgIHJlbF9rZXkgPSBvYmpbJ0tleSddW2xlbihpdGVtWydr
ZXknXSk6XQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGFuYWx5emVkKSA9PSAxOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0X25hbWU6CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZGVzdF9wYXRoID0gb3MucGF0aC5qb2luKGRlc3RfcGFuZWwuZnNf
YnJvd3Nlci5jdXJyZW50X3BhdGgsIHRhcmdldF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxfa2V5LnJlcGxhY2UoJy8nLCBv
cy5zZXApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBkZXN0X3BhdGggPSBvcy5wYXRoLmpvaW4oZGVzdF9wYW5lbC5mc19i
cm93c2VyLmN1cnJlbnRfcGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcmVsX2tleS5yZXBsYWNlKCcvJywgb3Muc2VwKSkKICAgICAg
ICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRh
cmdldF9uYW1lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RfcGF0aCA9IG9z
LnBhdGguam9pbihkZXN0X3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCB0YXJnZXRfbmFt
ZSwgaXRlbVsnbmFtZSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICByZWxfa2V5LnJlcGxhY2UoJy8nLCBvcy5zZXApKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBk
ZXN0X3BhdGggPSBvcy5wYXRoLmpvaW4oZGVzdF9wYW5lbC5mc19icm93c2VyLmN1cnJlbnRfcGF0
aCwgaXRlbVsnbmFtZSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICByZWxfa2V5LnJlcGxhY2UoJy8nLCBvcy5zZXApKQoKICAgICAgICAg
ICAgICAgICAgICAgICAgIyDQn9GA0L7QstC10YDQutCwINGB0YPRidC10YHRgtCy0L7QstCw0L3Q
uNGPCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLm92ZXJ3cml0ZV9hbGwgYW5k
IG5vdCBzZWxmLnNraXBfYWxsOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgb3MucGF0
aC5leGlzdHMoZGVzdF9wYXRoKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3Vy
Y2VfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiBv
YmouZ2V0KCdTaXplJywgMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdt
dGltZSc6IG9iai5nZXQoJ0xhc3RNb2RpZmllZCcsIGRhdGV0aW1lLm5vdygpKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBl
eGlzdGluZ19zdGF0ID0gb3Muc3RhdChkZXN0X3BhdGgpCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZGVzdF9pbmZvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAnc2l6ZSc6IGV4aXN0aW5nX3N0YXQuc3Rfc2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgJ210aW1lJzogZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChleGlzdGluZ19zdGF0
LnN0X210aW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZGVmIHNob3dfb3ZlcndyaXRlX2RpYWxvZygpOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgb25fY2hvaWNlKGNob2ljZSk6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2Nob2ljZVsndmFsdWUnXSA9
IGNob2ljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2
ZW50LnNldCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNs
b3NlX2RpYWxvZygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxm
LnNob3dfZGlhbG9nKHByb2dyZXNzKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2VsZi5fY2hlY2tfb3ZlcndyaXRlKHJlbF9rZXksIHNvdXJjZV9pbmZvLCBkZXN0X2luZm8s
IG9uX2Nob2ljZSwgaXNfczNfZGVzdD1GYWxzZSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc2VsZi5sb29wLnNldF9hbGFybV9pbigwLCBsYW1iZGEgKmFyZ3M6IHNob3dfb3Zlcndy
aXRlX2RpYWxvZygpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVu
dC53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQuY2xl
YXIoKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB1c2VyX2Nob2ljZVsndmFs
dWUnXSA9PSAnY2FuY2VsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJv
Z3Jlc3MuY2FuY2VsbGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2Vb
J3ZhbHVlJ10gPT0gJ2FsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNl
bGYub3ZlcndyaXRlX2FsbCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBl
bGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdza2lwJzoKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKHJlbF9rZXksIDApCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnc2tpcF9hbGwnOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNraXBfYWxsID0gVHJ1ZQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUocmVsX2tleSwgMCkKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAg
ICAgICAgICAgIGlmIHNlbGYuc2tpcF9hbGw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBw
cm9ncmVzcy51cGRhdGUocmVsX2tleSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNv
bnRpbnVlCgogICAgICAgICAgICAgICAgICAgICAgICBvcy5tYWtlZGlycyhvcy5wYXRoLmRpcm5h
bWUoZGVzdF9wYXRoKSwgZXhpc3Rfb2s9VHJ1ZSkKCiAgICAgICAgICAgICAgICAgICAgICAgIGZp
bGVfc2l6ZSA9IG9iai5nZXQoJ1NpemUnLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBwcm9n
cmVzcy51cGRhdGUocmVsX2tleSwgZmlsZV9zaXplKQogICAgICAgICAgICAgICAgICAgICAgICBz
ZWxmLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc291cmNl
X3BhbmVsLnMzX21hbmFnZXIuZG93bmxvYWRfb2JqZWN0KHNvdXJjZV9wYW5lbC5jdXJyZW50X2J1
Y2tldCwgb2JqWydLZXknXSwgZGVzdF9wYXRoKToKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHByb2dyZXNzLmFkZF9zdWNjZXNzKCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFkZF9mYWlsdXJlKCkKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGFsbF9zdWNjZXNzID0gRmFsc2UKCiAgICAgICAgICAgICAgICAg
ICAgaWYgYWxsX3N1Y2Nlc3MgYW5kIGlzX21vdmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGl0
ZW1zX3RvX2RlbGV0ZS5hcHBlbmQoaXRlbV9kYXRhKQoKICAgICAgICAgICAgICAgICMgUzMg0YTQ
sNC50LsgLT4gUzMKICAgICAgICAgICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdzM19maWxlJyBh
bmQgZGVzdF9wYW5lbC5tb2RlID09ICdzMycgYW5kIGRlc3RfcGFuZWwuY3VycmVudF9idWNrZXQ6
CiAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGFuYWx5emVkKSA9PSAxOgogICAgICAgICAgICAg
ICAgICAgICAgICBkZXN0X2tleSA9IHRhcmdldF9uYW1lIGlmIHRhcmdldF9uYW1lIGVsc2UgaXRl
bVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAg
ICAgaWYgdGFyZ2V0X25hbWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2tleSA9
IHRhcmdldF9uYW1lLnJzdHJpcCgnLycpICsgJy8nICsgaXRlbVsnbmFtZSddCiAgICAgICAgICAg
ICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2tleSA9
IGl0ZW1bJ25hbWUnXQoKICAgICAgICAgICAgICAgICAgICAjINCf0YDQvtCy0LXRgNC60LAg0YHR
g9GJ0LXRgdGC0LLQvtCy0LDQvdC40Y8KICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc2VsZi5v
dmVyd3JpdGVfYWxsIGFuZCBub3Qgc2VsZi52ZXJzaW9uX2FsbCBhbmQgbm90IHNlbGYuc2tpcF9h
bGw6CiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gZGVzdF9wYW5lbC5zM19tYW5h
Z2VyLm9iamVjdF9leGlzdHMoZGVzdF9wYW5lbC5jdXJyZW50X2J1Y2tldCwgZGVzdF9rZXkpCiAg
ICAgICAgICAgICAgICAgICAgICAgIGlmIGV4aXN0aW5nOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc291cmNlX2luZm8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Np
emUnOiBpdGVtLmdldCgnc2l6ZScsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICdtdGltZSc6IGl0ZW0uZ2V0KCdtdGltZScsIGRhdGV0aW1lLm5vdygpKQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9pbmZvID0g
ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplJzogZXhpc3RpbmcuZ2V0KCdT
aXplJywgMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ210aW1lJzogZXhpc3Rp
bmcuZ2V0KCdMYXN0TW9kaWZpZWQnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBzaG93X292ZXJ3cml0ZV9kaWFsb2coKToKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgb25fY2hvaWNlKGNob2ljZSk6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfY2hvaWNlWyd2YWx1ZSddID0gY2hv
aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC5zZXQo
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNsb3NlX2RpYWxvZygp
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd19kaWFsb2cocHJv
Z3Jlc3MpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NoZWNrX292ZXJ3
cml0ZShpdGVtWyduYW1lJ10sIHNvdXJjZV9pbmZvLCBkZXN0X2luZm8sIG9uX2Nob2ljZSwgaXNf
czNfZGVzdD1UcnVlKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9vcC5zZXRf
YWxhcm1faW4oMCwgbGFtYmRhICphcmdzOiBzaG93X292ZXJ3cml0ZV9kaWFsb2coKSkKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC53YWl0KCkKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGNob2ljZV9ldmVudC5jbGVhcigpCgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ2NhbmNlbCc6CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuY2FuY2VsbGVkID0gVHJ1ZQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlm
IHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdhbGwnOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHNlbGYub3ZlcndyaXRlX2FsbCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3ZlcnNpb25fYWxsJzoKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnZlcnNpb25fYWxsID0gVHJ1ZQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnc2tpcCc6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKGl0ZW1bJ25hbWUn
XSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnc2tpcF9hbGwn
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2tpcF9hbGwgPSBUcnVlCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKGl0ZW1bJ25hbWUn
XSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAg
ICAgICAgICAgICBpZiBzZWxmLnNraXBfYWxsOgogICAgICAgICAgICAgICAgICAgICAgICBwcm9n
cmVzcy51cGRhdGUoaXRlbVsnbmFtZSddLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBjb250
aW51ZQoKICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemUgPSBpdGVtLmdldCgnc2l6ZScsIDAp
CiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKGl0ZW1bJ25hbWUnXSwgZmlsZV9z
aXplKQogICAgICAgICAgICAgICAgICAgIHNlbGYubG9vcC5kcmF3X3NjcmVlbigpCgogICAgICAg
ICAgICAgICAgICAgIGlmIHNvdXJjZV9wYW5lbC5zM19tYW5hZ2VyLmNvcHlfb2JqZWN0KAogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlX3BhbmVsLmN1cnJlbnRfYnVja2V0LAogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVsna2V5J10sCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBkZXN0X3BhbmVsLmN1cnJlbnRfYnVja2V0LAogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZGVzdF9rZXksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uX2lkPWl0
ZW0uZ2V0KCdWZXJzaW9uSWQnKQogICAgICAgICAgICAgICAgICAgICk6CiAgICAgICAgICAgICAg
ICAgICAgICAgIHByb2dyZXNzLmFkZF9zdWNjZXNzKCkKICAgICAgICAgICAgICAgICAgICAgICAg
aWYgaXNfbW92ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zX3RvX2RlbGV0ZS5h
cHBlbmQoaXRlbV9kYXRhKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAg
ICAgICAgICAgIHByb2dyZXNzLmFkZF9mYWlsdXJlKCkKCiAgICAgICAgICAgICAgICAjIFMzINC0
0LjRgNC10LrRgtC+0YDQuNGPIC0+IFMzCiAgICAgICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9
PSAnczNfZGlyJyBhbmQgZGVzdF9wYW5lbC5tb2RlID09ICdzMycgYW5kIGRlc3RfcGFuZWwuY3Vy
cmVudF9idWNrZXQ6CiAgICAgICAgICAgICAgICAgICAgYWxsX3N1Y2Nlc3MgPSBUcnVlCiAgICAg
ICAgICAgICAgICAgICAgZm9yIG9iaiBpbiBpdGVtX2RhdGFbJ2ZpbGVzJ106CiAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIHByb2dyZXNzLmNhbmNlbGxlZDoKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgICAgICAgICByZWxfa2V5ID0gb2JqWydLZXkn
XVtsZW4oaXRlbVsna2V5J10pOl0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbihhbmFs
eXplZCkgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRhcmdldF9uYW1lOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3Rfa2V5ID0gdGFyZ2V0X25hbWUucnN0
cmlwKCcvJykgKyAnLycgKyByZWxfa2V5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNl
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3Rfa2V5ID0gcmVsX2tleQogICAg
ICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYg
dGFyZ2V0X25hbWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9rZXkgPSB0
YXJnZXRfbmFtZS5yc3RyaXAoJy8nKSArICcvJyArIGl0ZW1bJ25hbWUnXSArICcvJyArIHJlbF9r
ZXkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZGVzdF9rZXkgPSBpdGVtWyduYW1lJ10gKyAnLycgKyByZWxfa2V5CgogICAg
ICAgICAgICAgICAgICAgICAgICAjINCf0YDQvtCy0LXRgNC60LAg0YHRg9GJ0LXRgdGC0LLQvtCy
0LDQvdC40Y8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNlbGYub3ZlcndyaXRlX2Fs
bCBhbmQgbm90IHNlbGYudmVyc2lvbl9hbGwgYW5kIG5vdCBzZWxmLnNraXBfYWxsOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcgPSBkZXN0X3BhbmVsLnMzX21hbmFnZXIub2Jq
ZWN0X2V4aXN0cyhkZXN0X3BhbmVsLmN1cnJlbnRfYnVja2V0LCBkZXN0X2tleSkKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGlmIGV4aXN0aW5nOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHNvdXJjZV9pbmZvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAnc2l6ZSc6IG9iai5nZXQoJ1NpemUnLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgJ210aW1lJzogb2JqLmdldCgnTGFzdE1vZGlmaWVkJywgZGF0ZXRpbWUubm93KCkp
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGRlc3RfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgJ3NpemUnOiBleGlzdGluZy5nZXQoJ1NpemUnLCAwKSwKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgJ210aW1lJzogZXhpc3RpbmcuZ2V0KCdMYXN0TW9kaWZpZWQnKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZGVmIHNob3dfb3ZlcndyaXRlX2RpYWxvZygpOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBkZWYgb25fY2hvaWNlKGNob2ljZSk6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB1c2VyX2Nob2ljZVsndmFsdWUnXSA9IGNob2ljZQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LnNldCgpCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNsb3NlX2RpYWxvZygpCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dfZGlhbG9nKHBy
b2dyZXNzKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2hlY2tf
b3ZlcndyaXRlKHJlbF9rZXksIHNvdXJjZV9pbmZvLCBkZXN0X2luZm8sIG9uX2Nob2ljZSwgaXNf
czNfZGVzdD1UcnVlKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvb3Au
c2V0X2FsYXJtX2luKDAsIGxhbWJkYSAqYXJnczogc2hvd19vdmVyd3JpdGVfZGlhbG9nKCkpCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LndhaXQoKQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC5jbGVhcigpCgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdjYW5jZWwn
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5jYW5jZWxsZWQg
PSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnYWxs
JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vdmVyd3JpdGVfYWxs
ID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2Vb
J3ZhbHVlJ10gPT0gJ3ZlcnNpb25fYWxsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc2VsZi52ZXJzaW9uX2FsbCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdza2lwJzoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKHJlbF9rZXksIDApCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnc2tpcF9hbGwnOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNraXBfYWxsID0gVHJ1ZQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUocmVsX2tleSwg
MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAg
ICAgICAgICAgICAgICAgIGlmIHNlbGYuc2tpcF9hbGw6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBwcm9ncmVzcy51cGRhdGUocmVsX2tleSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemUgPSBvYmouZ2V0
KCdTaXplJywgMCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKHJlbF9r
ZXksIGZpbGVfc2l6ZSkKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLmRyYXdfc2Ny
ZWVuKCkKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNvdXJjZV9wYW5lbC5zM19tYW5hZ2Vy
LmNvcHlfb2JqZWN0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9wYW5l
bC5jdXJyZW50X2J1Y2tldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpbJ0tl
eSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RfcGFuZWwuY3VycmVudF9i
dWNrZXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9rZXkKICAgICAgICAg
ICAgICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFk
ZF9zdWNjZXNzKCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHByb2dyZXNzLmFkZF9mYWlsdXJlKCkKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGFsbF9zdWNjZXNzID0gRmFsc2UKCiAgICAgICAgICAgICAgICAgICAgaWYgYWxsX3N1
Y2Nlc3MgYW5kIGlzX21vdmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zX3RvX2RlbGV0
ZS5hcHBlbmQoaXRlbV9kYXRhKQoKICAgICAgICAgICAgICAgICMgRlMg0YTQsNC50LsgLT4gRlMK
ICAgICAgICAgICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdmc19maWxlJyBhbmQgZGVzdF9wYW5l
bC5tb2RlID09ICdmcyc6CiAgICAgICAgICAgICAgICAgICAgc291cmNlX3BhdGggPSBvcy5wYXRo
LmpvaW4oc291cmNlX3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCBpdGVtWyduYW1lJ10p
CgogICAgICAgICAgICAgICAgICAgIGlmIGxlbihhbmFseXplZCkgPT0gMToKICAgICAgICAgICAg
ICAgICAgICAgICAgaWYgb3MucGF0aC5pc2Ficyh0YXJnZXRfbmFtZSk6CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBkZXN0X3BhdGggPSB0YXJnZXRfbmFtZQogICAgICAgICAgICAgICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9wYXRoID0gb3MucGF0
aC5qb2luKGRlc3RfcGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIHRhcmdldF9uYW1lKQog
ICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRhcmdl
dF9uYW1lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9kaXIgPSBvcy5wYXRoLmpv
aW4oZGVzdF9wYW5lbC5mc19icm93c2VyLmN1cnJlbnRfcGF0aCwgdGFyZ2V0X25hbWUpCiAgICAg
ICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNl
X2RpciA9IGRlc3RfcGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgKICAgICAgICAgICAgICAg
ICAgICAgICAgb3MubWFrZWRpcnMoYmFzZV9kaXIsIGV4aXN0X29rPVRydWUpCiAgICAgICAgICAg
ICAgICAgICAgICAgIGRlc3RfcGF0aCA9IG9zLnBhdGguam9pbihiYXNlX2RpciwgaXRlbVsnbmFt
ZSddKQoKICAgICAgICAgICAgICAgICAgICAjINCf0YDQvtCy0LXRgNC60LAg0YHRg9GJ0LXRgdGC
0LLQvtCy0LDQvdC40Y8KICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc2VsZi5vdmVyd3JpdGVf
YWxsIGFuZCBub3Qgc2VsZi5za2lwX2FsbDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgb3Mu
cGF0aC5leGlzdHMoZGVzdF9wYXRoKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJj
ZV9pbmZvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplJzogaXRlbS5n
ZXQoJ3NpemUnLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbXRpbWUnOiBp
dGVtLmdldCgnbXRpbWUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZXhpc3Rpbmdfc3RhdCA9IG9zLnN0YXQoZGVzdF9wYXRoKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9pbmZvID0gewogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICdzaXplJzogZXhpc3Rpbmdfc3RhdC5zdF9zaXplLAogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICdtdGltZSc6IGRhdGV0aW1lLmZyb210aW1lc3RhbXAoZXhpc3Rp
bmdfc3RhdC5zdF9tdGltZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBkZWYgc2hvd19vdmVyd3JpdGVfZGlhbG9nKCk6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG9uX2Nob2ljZShjaG9pY2UpOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2Nob2ljZVsndmFsdWUnXSA9IGNob2ljZQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQuc2V0KCkKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dfZGlhbG9nKHByb2dyZXNz
KQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jaGVja19vdmVyd3JpdGUo
aXRlbVsnbmFtZSddLCBzb3VyY2VfaW5mbywgZGVzdF9pbmZvLCBvbl9jaG9pY2UsIGlzX3MzX2Rl
c3Q9RmFsc2UpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLnNldF9hbGFy
bV9pbigwLCBsYW1iZGEgKmFyZ3M6IHNob3dfb3ZlcndyaXRlX2RpYWxvZygpKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LndhaXQoKQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgY2hvaWNlX2V2ZW50LmNsZWFyKCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnY2FuY2VsJzoKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBwcm9ncmVzcy5jYW5jZWxsZWQgPSBUcnVlCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNl
cl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ2FsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2VsZi5vdmVyd3JpdGVfYWxsID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnc2tpcCc6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKGl0ZW1bJ25hbWUnXSwgMCkKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnc2tpcF9hbGwnOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYuc2tpcF9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKGl0ZW1bJ25hbWUnXSwgMCkKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICBpZiBzZWxm
LnNraXBfYWxsOgogICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoaXRlbVsn
bmFtZSddLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAg
ICAgICAgICBvcy5tYWtlZGlycyhvcy5wYXRoLmRpcm5hbWUoZGVzdF9wYXRoKSwgZXhpc3Rfb2s9
VHJ1ZSkKCiAgICAgICAgICAgICAgICAgICAgZmlsZV9zaXplID0gaXRlbS5nZXQoJ3NpemUnLCAw
KQogICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShpdGVtWyduYW1lJ10sIGZpbGVf
c2l6ZSkKICAgICAgICAgICAgICAgICAgICBzZWxmLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAg
ICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5Mihz
b3VyY2VfcGF0aCwgZGVzdF9wYXRoKQogICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5h
ZGRfc3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzX21vdmU6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBpdGVtc190b19kZWxldGUuYXBwZW5kKGl0ZW1fZGF0YSkKICAg
ICAgICAgICAgICAgICAgICBleGNlcHQgKElPRXJyb3IsIE9TRXJyb3IpOgogICAgICAgICAgICAg
ICAgICAgICAgICBwcm9ncmVzcy5hZGRfZmFpbHVyZSgpCgogICAgICAgICAgICAgICAgIyBGUyDQ
tNC40YDQtdC60YLQvtGA0LjRjyAtPiBGUwogICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUg
PT0gJ2ZzX2RpcicgYW5kIGRlc3RfcGFuZWwubW9kZSA9PSAnZnMnOgogICAgICAgICAgICAgICAg
ICAgIHNvdXJjZV9kaXIgPSBvcy5wYXRoLmpvaW4oc291cmNlX3BhbmVsLmZzX2Jyb3dzZXIuY3Vy
cmVudF9wYXRoLCBpdGVtWyduYW1lJ10pCgogICAgICAgICAgICAgICAgICAgIGlmIGxlbihhbmFs
eXplZCkgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0X25hbWU6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2RpciA9IG9zLnBhdGguam9pbihkZXN0X3BhbmVs
LmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCB0YXJnZXRfbmFtZSkKICAgICAgICAgICAgICAgICAg
ICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RfZGlyID0gb3MucGF0
aC5qb2luKGRlc3RfcGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIGl0ZW1bJ25hbWUnXSkK
ICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBpZiB0YXJn
ZXRfbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RfZGlyID0gb3MucGF0aC5q
b2luKGRlc3RfcGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIHRhcmdldF9uYW1lLCBpdGVt
WyduYW1lJ10pCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBkZXN0X2RpciA9IG9zLnBhdGguam9pbihkZXN0X3BhbmVsLmZzX2Jyb3dzZXIu
Y3VycmVudF9wYXRoLCBpdGVtWyduYW1lJ10pCgogICAgICAgICAgICAgICAgICAgIGFsbF9zdWNj
ZXNzID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgIGZvciBmaWxlX2luZm8gaW4gaXRlbV9kYXRh
WydmaWxlcyddOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBwcm9ncmVzcy5jYW5jZWxsZWQ6
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgICAgICAgICAg
ICAgZGVzdF9wYXRoID0gb3MucGF0aC5qb2luKGRlc3RfZGlyLCBmaWxlX2luZm9bJ3JlbF9wYXRo
J10pCgogICAgICAgICAgICAgICAgICAgICAgICAjINCf0YDQvtCy0LXRgNC60LAg0YHRg9GJ0LXR
gdGC0LLQvtCy0LDQvdC40Y8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNlbGYub3Zl
cndyaXRlX2FsbCBhbmQgbm90IHNlbGYuc2tpcF9hbGw6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBpZiBvcy5wYXRoLmV4aXN0cyhkZXN0X3BhdGgpOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdCA9
IG9zLnN0YXQoZmlsZV9pbmZvWydwYXRoJ10pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHNvdXJjZV9pbmZvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgJ3NpemUnOiBzdGF0LnN0X3NpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAnbXRpbWUnOiBkYXRldGltZS5mcm9tdGltZXN0YW1wKHN0YXQuc3RfbXRpbWUp
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZXhpc3Rpbmdfc3RhdCA9IG9zLnN0YXQoZGVzdF9wYXRoKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2luZm8gPSB7CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6IGV4aXN0aW5nX3N0YXQuc3Rfc2l6
ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtdGltZSc6IGRhdGV0
aW1lLmZyb210aW1lc3RhbXAoZXhpc3Rpbmdfc3RhdC5zdF9tdGltZSkKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZGVmIHNob3dfb3ZlcndyaXRlX2RpYWxvZygpOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZGVmIG9uX2Nob2ljZShjaG9pY2UpOgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfY2hvaWNlWyd2YWx1ZSddID0gY2hvaWNlCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LnNl
dCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9z
ZV9kaWFsb2coKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNl
bGYuc2hvd19kaWFsb2cocHJvZ3Jlc3MpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc2VsZi5fY2hlY2tfb3ZlcndyaXRlKGZpbGVfaW5mb1sncmVsX3BhdGgnXSwgc291
cmNlX2luZm8sIGRlc3RfaW5mbywgb25fY2hvaWNlLAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3MzX2Rlc3Q9RmFsc2UpCgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvb3Auc2V0X2FsYXJtX2lu
KDAsIGxhbWJkYSAqYXJnczogc2hvd19vdmVyd3JpdGVfZGlhbG9nKCkpCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC53YWl0KCkKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LmNsZWFyKCkKCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdjYW5jZWwn
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuY2FuY2Vs
bGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFs
dWUnXSA9PSAnYWxsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNl
bGYub3ZlcndyaXRlX2FsbCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnc2tpcCc6CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoZmlsZV9pbmZvWydyZWxfcGF0
aCddLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFs
dWUnXSA9PSAnc2tpcF9hbGwnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2VsZi5za2lwX2FsbCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHByb2dyZXNzLnVwZGF0ZShmaWxlX2luZm9bJ3JlbF9wYXRoJ10sIDApCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgcGFzcwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5za2lwX2FsbDoKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShmaWxlX2luZm9bJ3JlbF9wYXRo
J10sIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAg
ICAgICAgICAgICAgb3MubWFrZWRpcnMob3MucGF0aC5kaXJuYW1lKGRlc3RfcGF0aCksIGV4aXN0
X29rPVRydWUpCgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemUgPSBmaWxlX2luZm8u
Z2V0KCdzaXplJywgMCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKGZp
bGVfaW5mb1sncmVsX3BhdGgnXSwgZmlsZV9zaXplKQogICAgICAgICAgICAgICAgICAgICAgICBz
ZWxmLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc2h1dGlsLmNvcHkyKGZpbGVfaW5mb1sncGF0aCddLCBk
ZXN0X3BhdGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfc3VjY2Vz
cygpCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCAoSU9FcnJvciwgT1NFcnJvcik6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfZmFpbHVyZSgpCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBhbGxfc3VjY2VzcyA9IEZhbHNlCgogICAgICAgICAgICAgICAg
ICAgIGlmIGFsbF9zdWNjZXNzIGFuZCBpc19tb3ZlOgogICAgICAgICAgICAgICAgICAgICAgICBp
dGVtc190b19kZWxldGUuYXBwZW5kKGl0ZW1fZGF0YSkKCiAgICAgICAgICAgICAgICAjINCR0LDQ
utC10YIgLT4gUzMKICAgICAgICAgICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdidWNrZXQnIGFu
ZCBkZXN0X3BhbmVsLm1vZGUgPT0gJ3MzJyBhbmQgZGVzdF9wYW5lbC5jdXJyZW50X2J1Y2tldDoK
ICAgICAgICAgICAgICAgICAgICBhbGxfc3VjY2VzcyA9IFRydWUKICAgICAgICAgICAgICAgICAg
ICBmb3Igb2JqIGluIGl0ZW1fZGF0YVsnZmlsZXMnXToKICAgICAgICAgICAgICAgICAgICAgICAg
aWYgcHJvZ3Jlc3MuY2FuY2VsbGVkOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsK
CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbihhbmFseXplZCkgPT0gMToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGlmIHRhcmdldF9uYW1lOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGRlc3Rfa2V5ID0gdGFyZ2V0X25hbWUucnN0cmlwKCcvJykgKyAnLycgKyBvYmpb
J0tleSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGRlc3Rfa2V5ID0gb2JqWydLZXknXQogICAgICAgICAgICAgICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0X25hbWU6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9rZXkgPSB0YXJnZXRfbmFtZS5yc3Ry
aXAoJy8nKSArICcvJyArIGl0ZW1bJ25hbWUnXSArICcvJyArIG9ialsnS2V5J10KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZGVzdF9rZXkgPSBpdGVtWyduYW1lJ10gKyAnLycgKyBvYmpbJ0tleSddCgogICAgICAgICAgICAg
ICAgICAgICAgICAjINCf0YDQvtCy0LXRgNC60LAg0YHRg9GJ0LXRgdGC0LLQvtCy0LDQvdC40Y8K
ICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNlbGYub3ZlcndyaXRlX2FsbCBhbmQgbm90
IHNlbGYudmVyc2lvbl9hbGwgYW5kIG5vdCBzZWxmLnNraXBfYWxsOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZXhpc3RpbmcgPSBkZXN0X3BhbmVsLnMzX21hbmFnZXIub2JqZWN0X2V4aXN0
cyhkZXN0X3BhbmVsLmN1cnJlbnRfYnVja2V0LCBkZXN0X2tleSkKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGlmIGV4aXN0aW5nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNv
dXJjZV9pbmZvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6
IG9iai5nZXQoJ1NpemUnLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
J210aW1lJzogb2JqLmdldCgnTGFzdE1vZGlmaWVkJywgZGF0ZXRpbWUubm93KCkpCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGRlc3RfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemUn
OiBleGlzdGluZy5nZXQoJ1NpemUnLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgJ210aW1lJzogZXhpc3RpbmcuZ2V0KCdMYXN0TW9kaWZpZWQnKQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVm
IHNob3dfb3ZlcndyaXRlX2RpYWxvZygpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBkZWYgb25fY2hvaWNlKGNob2ljZSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB1c2VyX2Nob2ljZVsndmFsdWUnXSA9IGNob2ljZQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LnNldCgpCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNsb3NlX2RpYWxvZygpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dfZGlhbG9nKHByb2dyZXNzKQoK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2hlY2tfb3ZlcndyaXRl
KG9ialsnS2V5J10sIHNvdXJjZV9pbmZvLCBkZXN0X2luZm8sIG9uX2Nob2ljZSwKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3MzX2Rl
c3Q9VHJ1ZSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLnNldF9h
bGFybV9pbigwLCBsYW1iZGEgKmFyZ3M6IHNob3dfb3ZlcndyaXRlX2RpYWxvZygpKQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC53YWl0KCkKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQuY2xlYXIoKQoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnY2FuY2VsJzoKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuY2FuY2VsbGVkID0gVHJ1
ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ2FsbCc6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3ZlcndyaXRlX2FsbCA9IFRy
dWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1
ZSddID09ICd2ZXJzaW9uX2FsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHNlbGYudmVyc2lvbl9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnc2tpcCc6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShvYmpbJ0tleSddLCAwKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXBfYWxsJzoKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5za2lwX2FsbCA9IFRydWUKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKG9ialsnS2V5J10s
IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAg
ICAgICAgICAgICAgICAgICBpZiBzZWxmLnNraXBfYWxsOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgcHJvZ3Jlc3MudXBkYXRlKG9ialsnS2V5J10sIDApCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZV9zaXplID0gb2Jq
LmdldCgnU2l6ZScsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShv
YmpbJ0tleSddLCBmaWxlX3NpemUpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9vcC5k
cmF3X3NjcmVlbigpCgogICAgICAgICAgICAgICAgICAgICAgICBpZiBzb3VyY2VfcGFuZWwuczNf
bWFuYWdlci5jb3B5X29iamVjdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVt
WyduYW1lJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqWydLZXknXSwKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X3BhbmVsLmN1cnJlbnRfYnVja2V0LAog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3Rfa2V5CiAgICAgICAgICAgICAgICAg
ICAgICAgICk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfc3VjY2Vz
cygpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBwcm9ncmVzcy5hZGRfZmFpbHVyZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBh
bGxfc3VjY2VzcyA9IEZhbHNlCgogICAgICAgICAgICAgICAgICAgIGlmIGFsbF9zdWNjZXNzIGFu
ZCBpc19tb3ZlOgogICAgICAgICAgICAgICAgICAgICAgICBpdGVtc190b19kZWxldGUuYXBwZW5k
KGl0ZW1fZGF0YSkKCiAgICAgICAgICAgICMg0KPQtNCw0LvRj9C10Lwg0YPRgdC/0LXRiNC90L4g
0L/QtdGA0LXQvNC10YnQtdC90L3Ri9C1INGN0LvQtdC80LXQvdGC0YsKICAgICAgICAgICAgaWYg
aXNfbW92ZToKICAgICAgICAgICAgICAgIGZvciBpdGVtX2RhdGEgaW4gaXRlbXNfdG9fZGVsZXRl
OgogICAgICAgICAgICAgICAgICAgIGl0ZW1fdHlwZSA9IGl0ZW1fZGF0YVsndHlwZSddCiAgICAg
ICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW1fZGF0YVsnaXRlbSddCgogICAgICAgICAgICAgICAg
ICAgIGlmIGl0ZW1fdHlwZSA9PSAnZnNfZmlsZSc6CiAgICAgICAgICAgICAgICAgICAgICAgIHRy
eToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9wYXRoID0gb3MucGF0aC5qb2lu
KHNvdXJjZV9wYW5lbC5mc19icm93c2VyLmN1cnJlbnRfcGF0aCwgaXRlbVsnbmFtZSddKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgb3MucmVtb3ZlKHNvdXJjZV9wYXRoKQogICAgICAgICAg
ICAgICAgICAgICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHBhc3MKCiAgICAgICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ2ZzX2Rpcic6CiAg
ICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRp
cl9wYXRoID0gb3MucGF0aC5qb2luKHNvdXJjZV9wYW5lbC5mc19icm93c2VyLmN1cnJlbnRfcGF0
aCwgaXRlbVsnbmFtZSddKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2h1dGlsLnJtdHJl
ZShkaXJfcGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAgICAgICAgICAgIGVsaWYgaXRl
bV90eXBlID09ICdzM19maWxlJzoKICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbl9pZCA9
IGl0ZW0uZ2V0KCdWZXJzaW9uSWQnKQogICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfcGFu
ZWwuczNfbWFuYWdlci5kZWxldGVfb2JqZWN0KHNvdXJjZV9wYW5lbC5jdXJyZW50X2J1Y2tldCwg
aXRlbVsna2V5J10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgdmVyc2lvbl9pZD12ZXJzaW9uX2lkKQoKICAgICAgICAgICAgICAg
ICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnczNfZGlyJzoKICAgICAgICAgICAgICAgICAgICAgICAg
Zm9yIG9iaiBpbiBpdGVtX2RhdGFbJ2ZpbGVzJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzb3VyY2VfcGFuZWwuczNfbWFuYWdlci5kZWxldGVfb2JqZWN0KHNvdXJjZV9wYW5lbC5jdXJy
ZW50X2J1Y2tldCwgb2JqWydLZXknXSkKCiAgICAgICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5
cGUgPT0gJ2J1Y2tldCc6CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBvYmogaW4gaXRlbV9k
YXRhWydmaWxlcyddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlX3BhbmVsLnMz
X21hbmFnZXIuZGVsZXRlX29iamVjdChpdGVtWyduYW1lJ10sIG9ialsnS2V5J10pCiAgICAgICAg
ICAgICAgICAgICAgICAgIHNvdXJjZV9wYW5lbC5zM19tYW5hZ2VyLmRlbGV0ZV9idWNrZXQoaXRl
bVsnbmFtZSddKQoKICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgIHNlbGYu
bG9vcC5kcmF3X3NjcmVlbigpCgogICAgICAgIHRocmVhZCA9IHRocmVhZGluZy5UaHJlYWQodGFy
Z2V0PWNvcHlfdGhyZWFkKQogICAgICAgIHRocmVhZC5kYWVtb24gPSBUcnVlCiAgICAgICAgdGhy
ZWFkLnN0YXJ0KCkKCiAgICAgICAgZGVmIGNoZWNrX3RocmVhZCgpOgogICAgICAgICAgICBpZiB0
aHJlYWQuaXNfYWxpdmUoKToKICAgICAgICAgICAgICAgIHNlbGYubG9vcC5zZXRfYWxhcm1faW4o
MC4xLCBsYW1iZGEgKmFyZ3M6IGNoZWNrX3RocmVhZCgpKQogICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQoKICAgICAgICAgICAgICAgICMg0J7QsdC9
0L7QstC70Y/QtdC8INGG0LXQu9C10LLRg9GOINC/0LDQvdC10LvRjAogICAgICAgICAgICAgICAg
ZGVzdF9wYW5lbC5yZWZyZXNoKCkKCiAgICAgICAgICAgICAgICBpZiByZXN0b3JlX2luZGV4IGlz
IG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIHNvdXJjZV9wYW5lbC5yZXN0b3JlX2ZvY3Vz
X2luZGV4ID0gcmVzdG9yZV9pbmRleAoKICAgICAgICAgICAgICAgIGlmIG9uX2NvbXBsZXRlOgog
ICAgICAgICAgICAgICAgICAgICMg0JLQkNCW0J3Qnjog0JLRi9C30YvQstCw0LXQvCBjYWxsYmFj
ayDRh9C10YDQtdC3INGC0LDQudC80LXRgCwg0YfRgtC+0LHRiyDRgNCw0LfQvtGA0LLQsNGC0Ywg
0YbQtdC/0L7Rh9C60YMg0YHQvtCx0YvRgtC40LkgVUkKICAgICAgICAgICAgICAgICAgICAjINCt
0YLQviDQv9GA0LXQtNC+0YLQstGA0LDRidCw0LXRgiDQvNCz0L3QvtCy0LXQvdC90L7QtSDQt9Cw
0LrRgNGL0YLQuNC1INC90L7QstC+0LPQviDQtNC40LDQu9C+0LPQsAogICAgICAgICAgICAgICAg
ICAgIHNlbGYubG9vcC5zZXRfYWxhcm1faW4oMCwgbGFtYmRhICphcmdzOiBvbl9jb21wbGV0ZSgp
KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAjINCh0YLQsNC90LTQ
sNGA0YLQvdC+0LUg0L/QvtCy0LXQtNC10L3QuNC1OiDQvtCx0L3QvtCy0LvRj9C10Lwg0LjRgdGF
0L7QtNC90YPRjiDQv9Cw0L3QtdC70YwKICAgICAgICAgICAgICAgICAgICBpZiByZXN0b3JlX2lu
ZGV4IGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfcGFuZWwucmVz
dG9yZV9mb2N1c19pbmRleCA9IHJlc3RvcmVfaW5kZXgKCiAgICAgICAgICAgICAgICAgICAgaWYg
Zm9jdXNfbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlX3BhbmVsLnJlZnJlc2go
Zm9jdXNfb249Zm9jdXNfbmFtZSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgICAgICAgICBzb3VyY2VfcGFuZWwucmVmcmVzaCgpCgogICAgICAgICAgICAgICAgICAg
ICMg0JXRgdC70Lgg0L7QsdC90L7QstC70LXQvdC40LUg0LHRi9C70L4g0YHQuNC90YXRgNC+0L3Q
vdGL0LwgKEZTKSwg0LLQvtGB0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INC40L3QtNC10LrRgSDQ
stGA0YPRh9C90YPRjiDQv9GA0Y/QvNC+INC30LTQtdGB0YwKICAgICAgICAgICAgICAgICAgICBp
ZiBub3QgZ2V0YXR0cihzb3VyY2VfcGFuZWwsICdsb2FkaW5nX2luX3Byb2dyZXNzJywgRmFsc2Up
IGFuZCBsZW4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfcGFuZWwud2Fsa2Vy
KSA+IDAgYW5kIHJlc3RvcmVfaW5kZXggaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAg
ICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld19pZHggPSBtaW4ocmVzdG9y
ZV9pbmRleCwgbGVuKHNvdXJjZV9wYW5lbC53YWxrZXIpIC0gMSkKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHNvdXJjZV9wYW5lbC5saXN0Ym94LnNldF9mb2N1cyhuZXdfaWR4KQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgc291cmNlX3BhbmVsLnJlc3RvcmVfZm9jdXNfaW5kZXggPSBO
b25lCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHBhc3MKCiAgICAgICAgICAgICAgICBvcGVyYXRpb24gPSAnTW92ZWQnIGlmIGlzX21v
dmUgZWxzZSAnQ29waWVkJwogICAgICAgICAgICAgICAgc3BlZWRfc3RyID0gcHJvZ3Jlc3MuZ2V0
X3NwZWVkX3N0cigpCiAgICAgICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KAogICAgICAgICAg
ICAgICAgICAgIGYne29wZXJhdGlvbn06IHtwcm9ncmVzcy5zdWNjZXNzX2NvdW50fSBmaWxlKHMp
LCBGYWlsZWQ6IHtwcm9ncmVzcy5mYWlsX2NvdW50fSBmaWxlKHMpLCAnCiAgICAgICAgICAgICAg
ICAgICAgZidUb3RhbDoge2Zvcm1hdF9zaXplKHByb2dyZXNzLnByb2Nlc3NlZF9ieXRlcyl9LCBT
cGVlZDoge3NwZWVkX3N0cn0nCiAgICAgICAgICAgICAgICApCgogICAgICAgIHNlbGYubG9vcC5z
ZXRfYWxhcm1faW4oMC4xLCBsYW1iZGEgKmFyZ3M6IGNoZWNrX3RocmVhZCgpKQoKICAgIGRlZiB0
b2dnbGVfdmVyc2lvbmluZyhzZWxmKToKICAgICAgICBhY3RpdmVfcGFuZWwgPSBzZWxmLmdldF9h
Y3RpdmVfcGFuZWwoKQoKICAgICAgICBpZiBhY3RpdmVfcGFuZWwubW9kZSAhPSAnczMnIG9yIG5v
dCBhY3RpdmVfcGFuZWwuY3VycmVudF9idWNrZXQ6CiAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1
bHQoJ1RoaXMgZnVuY3Rpb24gd29ya3Mgb25seSB3aXRoIFMzIGJ1Y2tldHMnLCd3YXJuaW5nJykK
ICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHN0YXR1cyA9IGFjdGl2ZV9wYW5lbC5zM19tYW5h
Z2VyLmdldF92ZXJzaW9uaW5nX3N0YXR1cyhhY3RpdmVfcGFuZWwuY3VycmVudF9idWNrZXQpCgog
ICAgICAgIGlmIHN0YXR1cyA9PSAnRW5hYmxlZCc6CiAgICAgICAgICAgICMg0JLQtdGA0YHQuNC+
0L3QuNGA0L7QstCw0L3QuNC1INCy0LrQu9GO0YfQtdC90L4gLSDQv9GA0LXQtNC70LDQs9Cw0LXQ
vCDQvtGC0LrQu9GO0YfQuNGC0YwKICAgICAgICAgICAgZGVmIGNhbGxiYWNrKGNvbmZpcm1lZCk6
CiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlX2RpYWxvZygpCiAgICAgICAgICAgICAgICBpZiBj
b25maXJtZWQ6CiAgICAgICAgICAgICAgICAgICAgaWYgYWN0aXZlX3BhbmVsLnMzX21hbmFnZXIu
ZGlzYWJsZV92ZXJzaW9uaW5nKGFjdGl2ZV9wYW5lbC5jdXJyZW50X2J1Y2tldCk6CiAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoZidWZXJzaW9uaW5nIFNVU1BFTkRFRCBm
b3IgYnVja2V0ICJ7YWN0aXZlX3BhbmVsLmN1cnJlbnRfYnVja2V0fSInKQogICAgICAgICAgICAg
ICAgICAgICAgICAjIGFjdGl2ZV9wYW5lbC5yZWZyZXNoKCkKICAgICAgICAgICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KGYnRmFpbGVkIHRv
IHN1c3BlbmQgdmVyc2lvbmluZycsJ2Vycm9yJykKCiAgICAgICAgICAgIG1lc3NhZ2UgPSBmJ1N1
c3BlbmQgdmVyc2lvbmluZyBmb3IgYnVja2V0ICJ7YWN0aXZlX3BhbmVsLmN1cnJlbnRfYnVja2V0
fSI/XG4oRXhpc3RpbmcgdmVyc2lvbnMgd2lsbCBiZSBwcmVzZXJ2ZWQpJwogICAgICAgICAgICBk
aWFsb2cgPSBDb25maXJtRGlhbG9nKCdTdXNwZW5kIFZlcnNpb25pbmcnLCBtZXNzYWdlLCBbXSwg
Y2FsbGJhY2spCiAgICAgICAgICAgIHNlbGYuc2hvd19kaWFsb2coZGlhbG9nKQogICAgICAgIGVs
c2U6CiAgICAgICAgICAgICMg0JLQtdGA0YHQuNC+0L3QuNGA0L7QstCw0L3QuNC1INC+0YLQutC7
0Y7Rh9C10L3QviAtINC/0YDQtdC00LvQsNCz0LDQtdC8INCy0LrQu9GO0YfQuNGC0YwKICAgICAg
ICAgICAgZGVmIGNhbGxiYWNrKGNvbmZpcm1lZCk6CiAgICAgICAgICAgICAgICBzZWxmLmNsb3Nl
X2RpYWxvZygpCiAgICAgICAgICAgICAgICBpZiBjb25maXJtZWQ6CiAgICAgICAgICAgICAgICAg
ICAgaWYgYWN0aXZlX3BhbmVsLnMzX21hbmFnZXIuZW5hYmxlX3ZlcnNpb25pbmcoYWN0aXZlX3Bh
bmVsLmN1cnJlbnRfYnVja2V0KToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jl
c3VsdChmJ1ZlcnNpb25pbmcgRU5BQkxFRCBmb3IgYnVja2V0ICJ7YWN0aXZlX3BhbmVsLmN1cnJl
bnRfYnVja2V0fSInKQogICAgICAgICAgICAgICAgICAgICAgICAjIGFjdGl2ZV9wYW5lbC5yZWZy
ZXNoKCkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBz
ZWxmLnNob3dfcmVzdWx0KGYnRmFpbGVkIHRvIGVuYWJsZSB2ZXJzaW9uaW5nJykKCiAgICAgICAg
ICAgIGN1cnJlbnRfc3RhdHVzID0gIkRJU0FCTEVEIiBpZiBzdGF0dXMgaXMgTm9uZSBvciBzdGF0
dXMgPT0gJ0Rpc2FibGVkJyBlbHNlICJTVVNQRU5ERUQiCiAgICAgICAgICAgIG1lc3NhZ2UgPSBm
J0VuYWJsZSB2ZXJzaW9uaW5nIGZvciBidWNrZXQgInthY3RpdmVfcGFuZWwuY3VycmVudF9idWNr
ZXR9Ij9cbihDdXJyZW50IHN0YXR1czoge2N1cnJlbnRfc3RhdHVzfSknCiAgICAgICAgICAgIGRp
YWxvZyA9IENvbmZpcm1EaWFsb2coJ0VuYWJsZSBWZXJzaW9uaW5nJywgbWVzc2FnZSwgW10sIGNh
bGxiYWNrKQogICAgICAgICAgICBzZWxmLnNob3dfZGlhbG9nKGRpYWxvZykKCiAgICBkZWYgZGVs
ZXRlX2l0ZW1zKHNlbGYpOgogICAgICAgIGFjdGl2ZV9wYW5lbCA9IHNlbGYuZ2V0X2FjdGl2ZV9w
YW5lbCgpCgogICAgICAgIGlmIGFjdGl2ZV9wYW5lbC5pc19yb290X21lbnUoKSBvciBhY3RpdmVf
cGFuZWwuaXNfZW5kcG9pbnRfbGlzdCgpOgogICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KCdD
YW5ub3QgZGVsZXRlIGZyb20gdGhpcyBsZXZlbCcpCiAgICAgICAgICAgIHJldHVybgoKICAgICAg
ICBzZWxlY3RlZF9pdGVtcyA9IGFjdGl2ZV9wYW5lbC5nZXRfc2VsZWN0ZWRfaXRlbXMoKQogICAg
ICAgIGlmIG5vdCBzZWxlY3RlZF9pdGVtczoKICAgICAgICAgICAgZm9jdXNlZCA9IGFjdGl2ZV9w
YW5lbC5nZXRfZm9jdXNlZF9pdGVtKCkKICAgICAgICAgICAgaWYgZm9jdXNlZCBhbmQgZm9jdXNl
ZFsndHlwZSddIGluICgnYnVja2V0JywgJ2ZzX2ZpbGUnLCAnczNfZmlsZScsICdmc19kaXInLCAn
czNfZGlyJyk6CiAgICAgICAgICAgICAgICBzZWxlY3RlZF9pdGVtcyA9IFtmb2N1c2VkXQoKICAg
ICAgICBpZiBub3Qgc2VsZWN0ZWRfaXRlbXM6CiAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQo
J05vIGl0ZW1zIHRvIGRlbGV0ZScpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBhbmFseXpl
ZCwgaXRlbXNfaW5mbywgdG90YWxfYnl0ZXMgPSBzZWxmLmFuYWx5emVfaXRlbXMoc2VsZWN0ZWRf
aXRlbXMsIGFjdGl2ZV9wYW5lbCkKICAgICAgICB0b3RhbF9maWxlcyA9IHN1bShsZW4oYVsnZmls
ZXMnXSkgZm9yIGEgaW4gYW5hbHl6ZWQpCgogICAgICAgIGRlZiBjYWxsYmFjayhjb25maXJtZWQp
OgogICAgICAgICAgICBzZWxmLmNsb3NlX2RpYWxvZygpCiAgICAgICAgICAgIGlmIGNvbmZpcm1l
ZDoKICAgICAgICAgICAgICAgIGN1cnJlbnRfaXRlbSA9IGFjdGl2ZV9wYW5lbC5nZXRfZm9jdXNl
ZF9pdGVtKCkKICAgICAgICAgICAgICAgIGZvY3VzX25hbWUgPSBjdXJyZW50X2l0ZW0uZ2V0KCdu
YW1lJykgaWYgY3VycmVudF9pdGVtIGVsc2UgTm9uZQoKICAgICAgICAgICAgICAgIGZvY3VzX2lu
ZGV4ID0gYWN0aXZlX3BhbmVsLmxpc3Rib3guZm9jdXNfcG9zaXRpb24KCiAgICAgICAgICAgICAg
ICBzZWxmLl9kb19kZWxldGVfd2l0aF9wcm9ncmVzcyhhbmFseXplZCwgYWN0aXZlX3BhbmVsLCBm
b2N1c19uYW1lLCB0b3RhbF9ieXRlcywgcmVzdG9yZV9pbmRleD1mb2N1c19pbmRleCkKCiAgICAg
ICAgbWVzc2FnZSA9IGYnRGVsZXRlIHtsZW4oc2VsZWN0ZWRfaXRlbXMpfSBpdGVtKHMpICh7dG90
YWxfZmlsZXN9IGZpbGUocykgdG90YWwpP1xuVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZSEn
CiAgICAgICAgZGlhbG9nID0gQ29uZmlybURpYWxvZygnQ29uZmlybSBEZWxldGUnLCBtZXNzYWdl
LCBpdGVtc19pbmZvLCBjYWxsYmFjaykKICAgICAgICBzZWxmLnNob3dfZGlhbG9nKGRpYWxvZykK
CiAgICBkZWYgX2RvX2RlbGV0ZV93aXRoX3Byb2dyZXNzKHNlbGYsIGFuYWx5emVkLCBwYW5lbCwg
Zm9jdXNfbmFtZSwgdG90YWxfYnl0ZXMsIHJlc3RvcmVfaW5kZXg9Tm9uZSk6CiAgICAgICAgIiIi
CiAgICAgICAg0JLRi9C/0L7Qu9C90Y/QtdGCINGD0LTQsNC70LXQvdC40LUg0LLRi9Cx0YDQsNC9
0L3Ri9GFINC+0LHRitC10LrRgtC+0LIgKNGE0LDQudC70L7Qsiwg0L/QsNC/0L7Quiwg0LLQtdGA
0YHQuNC5KSDQsiDRhNC+0L3QvtCy0L7QvCDQv9C+0YLQvtC60LUg0YEg0L7RgtC+0LHRgNCw0LbQ
tdC90LjQtdC8INC/0YDQvtCz0YDQtdGB0YHQsC4KCiAgICAgICAg0JDRgNCz0YPQvNC10L3RgtGL
OgogICAgICAgICAgICBhbmFseXplZCAobGlzdCk6INCh0L/QuNGB0L7QuiDQv9C+0LTQs9C+0YLQ
vtCy0LvQtdC90L3Ri9GFINC6INGD0LTQsNC70LXQvdC40Y4g0L7QsdGK0LXQutGC0L7Qsi4KICAg
ICAgICAgICAgcGFuZWwgKFBhbmVsV2lkZ2V0KTog0J/QsNC90LXQu9GMLCDQsiDQutC+0YLQvtGA
0L7QuSDQv9GA0L7QuNGB0YXQvtC00LjRgiDRg9C00LDQu9C10L3QuNC1LgogICAgICAgICAgICBm
b2N1c19uYW1lIChzdHIpOiDQmNC80Y8g0YTQsNC50LvQsCwg0L3QsCDQutC+0YLQvtGA0YvQuSDQ
vdGD0LbQvdC+INC/0LXRgNC10LLQtdGB0YLQuCDRhNC+0LrRg9GBINC/0L7RgdC70LUg0YPQtNCw
0LvQtdC90LjRjyDRgtC10LrRg9GJ0LXQs9C+ICjQvtCx0YvRh9C90L4g0YHQu9C10LTRg9GO0YnQ
uNC5INC40LvQuCDQv9GA0LXQtNGL0LTRg9GJ0LjQuSDRhNCw0LnQuykuCiAgICAgICAgICAgIHRv
dGFsX2J5dGVzIChpbnQpOiDQntCx0YnQuNC5INGA0LDQt9C80LXRgCDRg9C00LDQu9GP0LXQvNGL
0YUg0LTQsNC90L3Ri9GFICjQuNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0LTQu9GPINCy0LjQt9GD
0LDQu9C40LfQsNGG0LjQuCDQv9GA0L7Qs9GA0LXRgdGB0LAsINGF0L7RgtGPINGD0LTQsNC70LXQ
vdC40LUg0YfQsNGB0YLQviDQvtCz0YDQsNC90LjRh9C10L3QviBJT1BTLCDQsCDQvdC1INC60LDQ
vdCw0LvQvtC8KS4KICAgICAgICAgICAgcmVzdG9yZV9pbmRleCAoaW50LCBvcHRpb25hbCk6INCY
0L3QtNC10LrRgSDRgdGC0YDQvtC60Lgg0YHQv9C40YHQutCwINC00LvRjyDQstC+0YHRgdGC0LDQ
vdC+0LLQu9C10L3QuNGPINC/0L7Qt9C40YbQuNC4INC60YPRgNGB0L7RgNCwINC/0L7RgdC70LUg
0L7QsdC90L7QstC70LXQvdC40Y8g0L/QsNC90LXQu9C4LgogICAgICAgICIiIgogICAgICAgIHRv
dGFsX2ZpbGVzID0gc3VtKGxlbihhWydmaWxlcyddKSBmb3IgYSBpbiBhbmFseXplZCkKCiAgICAg
ICAgcHJvZ3Jlc3MgPSBQcm9ncmVzc0RpYWxvZygnRGVsZXRpbmcgZmlsZXMuLi4nLCBjYWxsYmFj
az1zZWxmLmNsb3NlX2RpYWxvZykKICAgICAgICBwcm9ncmVzcy5zZXRfdG90YWwodG90YWxfZmls
ZXMsIHRvdGFsX2J5dGVzKQogICAgICAgIHNlbGYuc2hvd19kaWFsb2cocHJvZ3Jlc3MpCgogICAg
ICAgIGRlZiBkZWxldGVfdGhyZWFkKCk6CiAgICAgICAgICAgIGZvciBpdGVtX2RhdGEgaW4gYW5h
bHl6ZWQ6CiAgICAgICAgICAgICAgICBpZiBwcm9ncmVzcy5jYW5jZWxsZWQ6CiAgICAgICAgICAg
ICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICAgICBpdGVtX3R5cGUgPSBpdGVtX2RhdGFbJ3R5
cGUnXQogICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW1fZGF0YVsnaXRlbSddCgogICAgICAgICAg
ICAgICAgaWYgaXRlbV90eXBlID09ICdidWNrZXQnOgogICAgICAgICAgICAgICAgICAgIGZvciBv
YmogaW4gaXRlbV9kYXRhWydmaWxlcyddOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBwcm9n
cmVzcy5jYW5jZWxsZWQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAg
ICAgICAgICAgICAgICAgICAgZmlsZV9zaXplID0gb2JqLmdldCgnU2l6ZScsIDApCiAgICAgICAg
ICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShvYmpbJ0tleSddLCBmaWxlX3NpemUpCiAg
ICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9vcC5kcmF3X3NjcmVlbigpCgogICAgICAgICAg
ICAgICAgICAgICAgICBpZiBwYW5lbC5zM19tYW5hZ2VyLmRlbGV0ZV9vYmplY3QoaXRlbVsnbmFt
ZSddLCBvYmpbJ0tleSddKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFk
ZF9zdWNjZXNzKCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHByb2dyZXNzLmFkZF9mYWlsdXJlKCkKICAgICAgICAgICAgICAgICAgICBw
YW5lbC5zM19tYW5hZ2VyLmRlbGV0ZV9idWNrZXQoaXRlbVsnbmFtZSddKQoKICAgICAgICAgICAg
ICAgIGVsaWYgaXRlbV90eXBlID09ICdzM19maWxlJzoKICAgICAgICAgICAgICAgICAgICBmaWxl
X3NpemUgPSBpdGVtLmdldCgnc2l6ZScsIDApCiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3Mu
dXBkYXRlKGl0ZW1bJ25hbWUnXSwgZmlsZV9zaXplKQogICAgICAgICAgICAgICAgICAgIHNlbGYu
bG9vcC5kcmF3X3NjcmVlbigpCgogICAgICAgICAgICAgICAgICAgIGlmIHBhbmVsLnMzX21hbmFn
ZXIuZGVsZXRlX29iamVjdChwYW5lbC5jdXJyZW50X2J1Y2tldCwgaXRlbVsna2V5J10pOgogICAg
ICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfc3VjY2VzcygpCiAgICAgICAgICAgICAg
ICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX2ZhaWx1cmUo
KQoKICAgICAgICAgICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdzM19kaXInOgogICAgICAgICAg
ICAgICAgICAgIGZvciBvYmogaW4gaXRlbV9kYXRhWydmaWxlcyddOgogICAgICAgICAgICAgICAg
ICAgICAgICBpZiBwcm9ncmVzcy5jYW5jZWxsZWQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBicmVhawoKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZV9zaXplID0gb2JqLmdldCgnU2l6
ZScsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShvYmpbJ0tleSdd
LCBmaWxlX3NpemUpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9vcC5kcmF3X3NjcmVl
bigpCgogICAgICAgICAgICAgICAgICAgICAgICBpZiBwYW5lbC5zM19tYW5hZ2VyLmRlbGV0ZV9v
YmplY3QocGFuZWwuY3VycmVudF9idWNrZXQsIG9ialsnS2V5J10pOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX3N1Y2Nlc3MoKQogICAgICAgICAgICAgICAgICAgICAg
ICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX2ZhaWx1cmUo
KQoKICAgICAgICAgICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdmc19maWxlJzoKICAgICAgICAg
ICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVfcGF0aCA9IG9zLnBh
dGguam9pbihwYW5lbC5mc19icm93c2VyLmN1cnJlbnRfcGF0aCwgaXRlbVsnbmFtZSddKQoKICAg
ICAgICAgICAgICAgICAgICAgICAgZmlsZV9zaXplID0gaXRlbS5nZXQoJ3NpemUnLCAwKQogICAg
ICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoaXRlbVsnbmFtZSddLCBmaWxlX3Np
emUpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9vcC5kcmF3X3NjcmVlbigpCgogICAg
ICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUoZmlsZV9wYXRoKQogICAgICAgICAgICAgICAg
ICAgICAgICBwcm9ncmVzcy5hZGRfc3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0
IE9TRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFkZF9mYWlsdXJlKCkK
CiAgICAgICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnZnNfZGlyJzoKICAgICAgICAgICAg
ICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIGRpcl9wYXRoID0gb3MucGF0aC5q
b2luKHBhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCBpdGVtWyduYW1lJ10pCgogICAgICAg
ICAgICAgICAgICAgICAgICBmb3IgZmlsZV9pbmZvIGluIGl0ZW1fZGF0YVsnZmlsZXMnXToKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHByb2dyZXNzLmNhbmNlbGxlZDoKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGZpbGVfc2l6ZSA9IGZpbGVfaW5mby5nZXQoJ3NpemUnLCAwKQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKGZpbGVfaW5mb1sncmVsX3BhdGgnXSwgZmlsZV9zaXpl
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLmRyYXdfc2NyZWVuKCkKCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzaHV0aWwucm10cmVlKGRpcl9wYXRoKQogICAgICAg
ICAgICAgICAgICAgICAgICBwcm9ncmVzcy5zdWNjZXNzX2NvdW50ICs9IGxlbihpdGVtX2RhdGFb
J2ZpbGVzJ10pCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICAg
ICAgICAgICAgICAgIHByb2dyZXNzLmZhaWxfY291bnQgKz0gbGVuKGl0ZW1fZGF0YVsnZmlsZXMn
XSkKCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAgICAgICBzZWxmLmxvb3AuZHJh
d19zY3JlZW4oKQoKICAgICAgICB0aHJlYWQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1kZWxl
dGVfdGhyZWFkKQogICAgICAgIHRocmVhZC5kYWVtb24gPSBUcnVlCiAgICAgICAgdGhyZWFkLnN0
YXJ0KCkKCiAgICAgICAgZGVmIGNoZWNrX3RocmVhZCgpOgogICAgICAgICAgICBpZiB0aHJlYWQu
aXNfYWxpdmUoKToKICAgICAgICAgICAgICAgIHNlbGYubG9vcC5zZXRfYWxhcm1faW4oMC4xLCBs
YW1iZGEgKmFyZ3M6IGNoZWNrX3RocmVhZCgpKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQoKICAgICAgICAgICAgICAgIHNwZWVkX3N0ciA9IHBy
b2dyZXNzLmdldF9zcGVlZF9zdHIoKQoKICAgICAgICAgICAgICAgICMg0KPRgdGC0LDQvdCw0LLQ
u9C40LLQsNC10Lwg0LbQtdC70LDQtdC80YvQuSDQuNC90LTQtdC60YEg0LIg0L/QsNC90LXQu9GM
CiAgICAgICAgICAgICAgICBpZiByZXN0b3JlX2luZGV4IGlzIG5vdCBOb25lOgogICAgICAgICAg
ICAgICAgICAgIHBhbmVsLnJlc3RvcmVfZm9jdXNfaW5kZXggPSByZXN0b3JlX2luZGV4CgogICAg
ICAgICAgICAgICAgIyDQl9Cw0L/Rg9GB0LrQsNC10Lwg0L7QsdC90L7QstC70LXQvdC40LUgKNC+
0L3QviDQvNC+0LbQtdGCINCx0YvRgtGMINCw0YHQuNC90YXRgNC+0L3QvdGL0LwpCiAgICAgICAg
ICAgICAgICBwYW5lbC5yZWZyZXNoKCkKCiAgICAgICAgICAgICAgICAjINCV0YHQu9C4INC+0LHQ
vdC+0LLQu9C10L3QuNC1INCx0YvQu9C+INGB0LjQvdGF0YDQvtC90L3Ri9C8IChGUyDQuNC70Lgg
0LHQsNC60LXRgtGLKSwg0LLQvtGB0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INGB0YDQsNC30YMK
ICAgICAgICAgICAgICAgICMgKNC00LvRjyDQsNGB0LjQvdGF0YDQvtC90L3QvtCz0L4gUzMg0Y3R
gtC+INGB0YDQsNCx0L7RgtCw0LXRgiDQv9C+0LfQttC1INCyIF9maW5hbGl6ZV9sb2FkaW5nKQog
ICAgICAgICAgICAgICAgaWYgbm90IGdldGF0dHIocGFuZWwsICdsb2FkaW5nX2luX3Byb2dyZXNz
JywgRmFsc2UpIGFuZCBsZW4ocGFuZWwud2Fsa2VyKSA+IDAgYW5kIHJlc3RvcmVfaW5kZXggaXMg
bm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAg
ICBuZXdfaWR4ID0gbWluKHJlc3RvcmVfaW5kZXgsIGxlbihwYW5lbC53YWxrZXIpIC0gMSkKICAg
ICAgICAgICAgICAgICAgICAgICAgcGFuZWwubGlzdGJveC5zZXRfZm9jdXMobmV3X2lkeCkKICAg
ICAgICAgICAgICAgICAgICAgICAgcGFuZWwucmVzdG9yZV9mb2N1c19pbmRleCA9IE5vbmUKICAg
ICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MKCiAg
ICAgICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KAogICAgICAgICAgICAgICAgICAgIGYnRGVs
ZXRlZDoge3Byb2dyZXNzLnN1Y2Nlc3NfY291bnR9IGZpbGUocyksIEZhaWxlZDoge3Byb2dyZXNz
LmZhaWxfY291bnR9IGZpbGUocyksICcKICAgICAgICAgICAgICAgICAgICBmJ1RvdGFsOiB7Zm9y
bWF0X3NpemUocHJvZ3Jlc3MucHJvY2Vzc2VkX2J5dGVzKX0sIFNwZWVkOiB7c3BlZWRfc3RyfScK
ICAgICAgICAgICAgICAgICkKCiAgICAgICAgc2VsZi5sb29wLnNldF9hbGFybV9pbigwLjEsIGxh
bWJkYSAqYXJnczogY2hlY2tfdGhyZWFkKCkpCgoKY2xhc3MgRmlsZUluZm9EaWFsb2codXJ3aWQu
V2lkZ2V0V3JhcCk6CiAgICAiIiLQlNC40LDQu9C+0LMg0LTQtdGC0LDQu9GM0L3QvtC5INC40L3R
hNC+0YDQvNCw0YbQuNC4INC+INGE0LDQudC70LUv0LHQsNC60LXRgtC1IiIiCgogICAgZGVmIF9f
aW5pdF9fKHNlbGYsIHRpdGxlLCBpbmZvX2RpY3QsIGNsb3NlX2NhbGxiYWNrKToKICAgICAgICBz
ZWxmLmNsb3NlX2NhbGxiYWNrID0gY2xvc2VfY2FsbGJhY2sKCiAgICAgICAgaXRlbXMgPSBbXQoK
ICAgICAgICBrZXlzX2Zvcl9jYWxjID0gW2sgZm9yIGsgaW4gaW5mb19kaWN0LmtleXMoKSBpZiBr
ICE9ICdVUkxfRlVMTCcgYW5kIG5vdCBrLnN0YXJ0c3dpdGgoJy0tLScpXQogICAgICAgIG1heF9r
ZXlfbGVuID0gbWF4KFtsZW4oaykgZm9yIGsgaW4ga2V5c19mb3JfY2FsY10pIGlmIGtleXNfZm9y
X2NhbGMgZWxzZSAwCgogICAgICAgIGZvciBrZXksIHZhbHVlIGluIGluZm9fZGljdC5pdGVtcygp
OgogICAgICAgICAgICBpZiBrZXkuc3RhcnRzd2l0aCgnLS0tJyk6CiAgICAgICAgICAgICAgICBp
dGVtcy5hcHBlbmQodXJ3aWQuRGl2aWRlcigpKQogICAgICAgICAgICAgICAgc2VwX3RleHQgPSB1
cndpZC5UZXh0KGtleS5yZXBsYWNlKCctJywgJycpLnN0cmlwKCksIGFsaWduPSdjZW50ZXInKQog
ICAgICAgICAgICAgICAgIyDQn9GA0LjQvdGD0LTQuNGC0LXQu9GM0L3QviDQt9Cw0LTQsNC10Lwg
0YTQvtC9CiAgICAgICAgICAgICAgICBpdGVtcy5hcHBlbmQodXJ3aWQuQXR0ck1hcChzZXBfdGV4
dCwgJ2luZm9fbmFtZScpKQogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgIGlm
IGtleSA9PSAnVVJMX0ZVTEwnOgogICAgICAgICAgICAgICAgaXRlbXMuYXBwZW5kKHVyd2lkLkRp
dmlkZXIoKSkKICAgICAgICAgICAgICAgIGl0ZW1zLmFwcGVuZCh1cndpZC5UZXh0KCgnaW5mb19u
YW1lJywgIlByZXNpZ25lZCBVUkwgKDFoKToiKSkpCiAgICAgICAgICAgICAgICBlZGl0ID0gdXJ3
aWQuRWRpdCgiIiwgc3RyKHZhbHVlKSkKICAgICAgICAgICAgICAgIGl0ZW1zLmFwcGVuZCh1cndp
ZC5BdHRyTWFwKGVkaXQsICdpbmZvX3ZhbHVlJykpCiAgICAgICAgICAgICAgICBjb250aW51ZQoK
ICAgICAgICAgICAga2V5X3N0ciA9IGYie2tleX06Ii5sanVzdChtYXhfa2V5X2xlbiArIDIpCiAg
ICAgICAgICAgIHZhbF9zdHIgPSBzdHIodmFsdWUpCgogICAgICAgICAgICB0ZXh0X3dpZGdldCA9
IHVyd2lkLlRleHQoWwogICAgICAgICAgICAgICAgKCdpbmZvX25hbWUnLCBrZXlfc3RyKSwKICAg
ICAgICAgICAgICAgICgnaW5mb192YWx1ZScsIHZhbF9zdHIpCiAgICAgICAgICAgIF0pCiAgICAg
ICAgICAgICMg0J7QsdC+0YDQsNGH0LjQstCw0LXQvCDQutCw0LbQtNGD0Y4g0YHRgtGA0L7QutGD
INCyICdkaWFsb2cnLCDRh9GC0L7QsdGLINC/0YDQvtCx0LXQu9GLINGC0L7QttC1INCx0YvQu9C4
INGB0LjQvdC40LzQuAogICAgICAgICAgICBpdGVtcy5hcHBlbmQodXJ3aWQuQXR0ck1hcCh0ZXh0
X3dpZGdldCwgJ2RpYWxvZ2Y0JykpCgogICAgICAgICMg0J7QsdC+0YDQsNGH0LjQstCw0LXQvCDR
gdCw0LwgTGlzdEJveCwg0YfRgtC+0LHRiyDQv9GD0YHRgtGL0LUg0LzQtdGB0YLQsCDQsdGL0LvQ
uCDRgdC40L3QuNC80LgKICAgICAgICBsaXN0Ym94ID0gdXJ3aWQuTGlzdEJveCh1cndpZC5TaW1w
bGVGb2N1c0xpc3RXYWxrZXIoaXRlbXMpKQogICAgICAgIGxpc3Rib3hfbWFwID0gdXJ3aWQuQXR0
ck1hcChsaXN0Ym94LCAnZGlhbG9nZjQnKQoKICAgICAgICBva19idXR0b24gPSB1cndpZC5CdXR0
b24oJ1sgT0sgXScpCiAgICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwob2tfYnV0dG9uLCAnY2xp
Y2snLCBzZWxmLm9uX29rKQoKICAgICAgICBidXR0b25zID0gdXJ3aWQuQ29sdW1ucyhbCiAgICAg
ICAgICAgICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgICAgICAoJ3BhY2sn
LCB1cndpZC5BdHRyTWFwKG9rX2J1dHRvbiwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uX2Zv
Y3VzJykpLAogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAg
ICBdLCBkaXZpZGVjaGFycz0wKQoKICAgICAgICAjINCe0LHQvtGA0LDRh9C40LLQsNC10Lwg0LrQ
vdC+0L/QutC4INCyINGB0YLQuNC70YwgZGlhbG9nLCDRh9GC0L7QsdGLINGE0L7QvSDQstC+0LrR
gNGD0LMg0L3QuNGFINCx0YvQuyDRgdC40L3QuNC8CiAgICAgICAgYnV0dG9uc19tYXAgPSB1cndp
ZC5BdHRyTWFwKGJ1dHRvbnMsICdkaWFsb2dmNCcpCgogICAgICAgIHBpbGUgPSB1cndpZC5QaWxl
KFsKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAgICAgKCd3
ZWlnaHQnLCAxLCBsaXN0Ym94X21hcCksICAjINCY0YHQv9C+0LvRjNC30YPQtdC8INC+0LHQtdGA
0L3Rg9GC0YvQuSBsaXN0Ym94CiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSks
CiAgICAgICAgICAgICgncGFjaycsIGJ1dHRvbnNfbWFwKSwgICMg0JjRgdC/0L7Qu9GM0LfRg9C1
0Lwg0L7QsdC10YDQvdGD0YLRi9C1INC60L3QvtC/0LrQuAogICAgICAgICAgICAoJ3BhY2snLCB1
cndpZC5EaXZpZGVyKCkpLAogICAgICAgIF0pCgogICAgICAgICMg0JfQsNC70LjQstCw0LXQvCBG
aWxsZXIg0YHRgtC40LvQtdC8IGRpYWxvZwogICAgICAgIGZpbGwgPSB1cndpZC5GaWxsZXIocGls
ZSwgdmFsaWduPSd0b3AnLCBoZWlnaHQ9KCdyZWxhdGl2ZScsIDk1KSkKICAgICAgICBmaWxsX21h
cCA9IHVyd2lkLkF0dHJNYXAoZmlsbCwgJ2RpYWxvZ2Y0JykKCiAgICAgICAgbGluZWJveCA9IHVy
d2lkLkxpbmVCb3goZmlsbF9tYXAsIHRpdGxlPXRpdGxlKQoKICAgICAgICAjINCk0LjQvdCw0LvR
jNC90LDRjyDQvtCx0LXRgNGC0LrQsCDRgNCw0LzQutC4CiAgICAgICAgc3VwZXIoKS5fX2luaXRf
Xyh1cndpZC5BdHRyTWFwKGxpbmVib3gsICdkaWFsb2dmNCcpKQoKICAgIGRlZiBvbl9vayhzZWxm
LCBidXR0b24pOgogICAgICAgIHNlbGYuY2xvc2VfY2FsbGJhY2soKQoKICAgIGRlZiBrZXlwcmVz
cyhzZWxmLCBzaXplLCBrZXkpOgogICAgICAgIGlmIGtleSBpbiAoJ2VzYycsICdlbnRlcicsICdm
NCcpOgogICAgICAgICAgICBzZWxmLm9uX29rKE5vbmUpCiAgICAgICAgICAgIHJldHVybiBOb25l
CiAgICAgICAgcmV0dXJuIHN1cGVyKCkua2V5cHJlc3Moc2l6ZSwga2V5KQoKCmlmIF9fbmFtZV9f
ID09ICdfX21haW5fXyc6CiAgICBwYXJzZXIgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcihkZXNj
cmlwdGlvbj1mJ1MzIENvbW1hbmRlciAtIFRVSSBGaWxlIE1hbmFnZXIgZm9yIFMzIDsgVmVyc2lv
biB7X19WRVJTSU9OX199JykKICAgIAogICAgIyDQoNC10LbQuNC8IDE6INCe0LHRi9GH0L3Ri9C5
INGE0LDQudC7ICjQv9C+INGD0LzQvtC70YfQsNC90LjRjikKICAgIHBhcnNlci5hZGRfYXJndW1l
bnQoJy1jJywgJy0tY29uZmlnJywgZGVmYXVsdD0nczNfY29uZmlnLmpzb24nLCAKICAgICAgICAg
ICAgICAgICAgICAgICAgaGVscD0nUGF0aCB0byBwbGFpbnRleHQgY29uZmlnIGZpbGUgKGRlZmF1
bHQ6IHMzX2NvbmZpZy5qc29uKScpCiAgICAKICAgICMg0KDQtdC20LjQvCAyOiDQl9Cw0YjQuNGE
0YDQvtCy0LDQvdC90YvQuSDRhNCw0LnQuwogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgnLWUnLCAn
LS1lbmNyeXB0ZWQtY29uZmlnJywgCiAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9J1BhdGgg
dG8gZW5jcnlwdGVkIGNvbmZpZyBmaWxlIChNb2RlIDIpLiBSZXF1aXJlcyBwYXNzd29yZC4nKQog
ICAgCiAgICAjINCg0LXQttC40LwgMzogVmF1bHQKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoJy0t
dmF1bHQtdXJsJywgCiAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9J1ZhdWx0IFVSTCAoZS5n
LiBodHRwOi8vMTI3LjAuMC4xOjgyMDApLiBBY3RpdmF0ZXMgTW9kZSAzLicpCiAgICBwYXJzZXIu
YWRkX2FyZ3VtZW50KCctLXZhdWx0LXBhdGgnLCAKICAgICAgICAgICAgICAgICAgICAgICAgaGVs
cD0nUGF0aCB0byBzZWNyZXQgaW4gVmF1bHQgKGUuZy4gc2VjcmV0L2RhdGEvczNjb21tYW5kZXIp
JykKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoJy0tdmF1bHQtdXNlcicsIAogICAgICAgICAgICAg
ICAgICAgICAgICBoZWxwPSdWYXVsdCB1c2VybmFtZSAod2lsbCBwcm9tcHQgaWYgbWlzc2luZykn
KQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgnLS12YXVsdC1wYXNzJywgCiAgICAgICAgICAgICAg
ICAgICAgICAgIGhlbHA9J1ZhdWx0IHBhc3N3b3JkICh3aWxsIHByb21wdCBpZiBtaXNzaW5nIC0g
SU5TRUNVUkUgaW4gaGlzdG9yeSknKQogICAgCiAgICBhcmdzID0gcGFyc2VyLnBhcnNlX2FyZ3Mo
KQoKICAgICMg0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0LrQvtC90YTQuNCz0LAg0YEg0LDR
gNCz0YPQvNC10L3RgtCw0LzQuAogICAgczNfY29uZmlnID0gUzNDb25maWcoYXJncykKCiAgICAj
INCX0LDQv9GD0YHQuiDQv9GA0LjQu9C+0LbQtdC90LjRjwogICAgYXBwID0gRHVhbFBhbmVBcHAo
czNfY29uZmlnKQogICAgYXBwLnJ1bigpCiAgICBwcmludChmJ1MzIENvbW1hbmRlciAtIFRVSSBG
aWxlIE1hbmFnZXIgZm9yIFMzIDsgVmVyc2lvbiB7X19WRVJTSU9OX199JykKAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAABzM19jb25maWcuanNvbgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAMDAwMDc3MAAwMDAwMDAwADAwMDE3MzQAMDAwMDAwMDA3MDAAMTUxMzA0MjE0NTAAMDEy
NjU0ACAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHVzdGFyICAA
cm9vdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB2Ym94c2YAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAHsKICAiZW5kcG9pbnRzIjogWwogICAgewogICAgICAibmFtZSI6
ICJMb2NhbCBDZXBoIiwKICAgICAgInVybCI6ICJodHRwOi8vbG9jYWxob3N0Ojc0ODAiLAogICAg
ICAiYWNjZXNzX2tleSI6ICJzM2FjY2VzcyIsCiAgICAgICJzZWNyZXRfa2V5IjogInMzc2VjcmV0
IgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiUkVtb3RlIENlcGgiLAogICAgICAidXJsIjog
Imh0dHA6Ly8xOTIuMTY4LjEuMjM6NzQ4MCIsCiAgICAgICJhY2Nlc3Nfa2V5IjogInMzYWNjZXNz
IiwKICAgICAgInNlY3JldF9rZXkiOiAiczNzZWNyZXQiCiAgICB9LAogICAgewogICAgICAibmFt
ZSI6ICJFcnJvciIsCiAgICAgICJ1cmwiOiAiaHR0cDovL2xvY2FsaG9zdDo3NDgxIiwKICAgICAg
ImFjY2Vzc19rZXkiOiAiczNhY2Nlc3MiLAogICAgICAic2VjcmV0X2tleSI6ICJzM3NlY3JldCIK
ICAgIH0KICBdCn0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAczNfY29uZmlnX2VuY3J5cHRvci5weQAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAADAwMDA3NzAAMDAwMDAwMAAwMDAxNzM0ADAwMDAwMDAzNzUyADE1MTMwNDIyNTE0ADAxNDQ1
NAAgMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB1c3RhciAgAHJv
b3QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdmJveHNmAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAjIS91c3IvYmluL2VudiBweXRob24zCmltcG9ydCBzeXMKaW1wb3J0
IGpzb24KaW1wb3J0IGJhc2U2NAppbXBvcnQgb3MKaW1wb3J0IGdldHBhc3MKZnJvbSBjcnlwdG9n
cmFwaHkuZmVybmV0IGltcG9ydCBGZXJuZXQKZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1p
dGl2ZXMgaW1wb3J0IGhhc2hlcwpmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5r
ZGYucGJrZGYyIGltcG9ydCBQQktERjJITUFDCmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNr
ZW5kcyBpbXBvcnQgZGVmYXVsdF9iYWNrZW5kCgpkZWYgZGVyaXZlX2tleShwYXNzd29yZCwgc2Fs
dCk6CiAgICAiIiLQk9C10L3QtdGA0LDRhtC40Y8g0LrQu9GO0YfQsCDQuNC3INC/0LDRgNC+0LvR
jyDQuCDRgdC+0LvQuCIiIgogICAga2RmID0gUEJLREYySE1BQygKICAgICAgICBhbGdvcml0aG09
aGFzaGVzLlNIQTI1NigpLAogICAgICAgIGxlbmd0aD0zMiwKICAgICAgICBzYWx0PXNhbHQsCiAg
ICAgICAgaXRlcmF0aW9ucz0xMDAwMDAsCiAgICAgICAgYmFja2VuZD1kZWZhdWx0X2JhY2tlbmQo
KSAKICAgICkKICAgIHJldHVybiBiYXNlNjQudXJsc2FmZV9iNjRlbmNvZGUoa2RmLmRlcml2ZShw
YXNzd29yZC5lbmNvZGUoKSkpCgpkZWYgZW5jcnlwdF9maWxlKGlucHV0X2ZpbGUsIG91dHB1dF9m
aWxlKToKICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhpbnB1dF9maWxlKToKICAgICAgICBwcmlu
dChmIkVycm9yOiBJbnB1dCBmaWxlICd7aW5wdXRfZmlsZX0nIG5vdCBmb3VuZC4iKQogICAgICAg
IHJldHVybgoKICAgIHRyeToKICAgICAgICB3aXRoIG9wZW4oaW5wdXRfZmlsZSwgJ3JiJykgYXMg
ZjoKICAgICAgICAgICAgZGF0YSA9IGYucmVhZCgpCiAgICAgICAgICAgICMg0J/RgNC+0LLQtdGA
0LrQsCDQstCw0LvQuNC00L3QvtGB0YLQuCBKU09OINC/0LXRgNC10LQg0YjQuNGE0YDQvtCy0LDQ
vdC40LXQvAogICAgICAgICAgICBqc29uLmxvYWRzKGRhdGEpCiAgICBleGNlcHQganNvbi5KU09O
RGVjb2RlRXJyb3I6CiAgICAgICAgcHJpbnQoIkVycm9yOiBJbnB1dCBmaWxlIGlzIG5vdCB2YWxp
ZCBKU09OLiIpCiAgICAgICAgcmV0dXJuCgogICAgcGFzc3dvcmQgPSBnZXRwYXNzLmdldHBhc3Mo
IkVudGVyIHBhc3N3b3JkIGZvciBlbmNyeXB0aW9uOiAiKQogICAgY29uZmlybSA9IGdldHBhc3Mu
Z2V0cGFzcygiQ29uZmlybSBwYXNzd29yZDogIikKICAgIAogICAgaWYgcGFzc3dvcmQgIT0gY29u
ZmlybToKICAgICAgICBwcmludCgiRXJyb3I6IFBhc3N3b3JkcyBkbyBub3QgbWF0Y2guIikKICAg
ICAgICByZXR1cm4KCiAgICAjINCT0LXQvdC10YDQuNGA0YPQtdC8INGB0LvRg9GH0LDQudC90YPR
jiDRgdC+0LvRjCAoMTYg0LHQsNC50YIpCiAgICBzYWx0ID0gb3MudXJhbmRvbSgxNikKICAgIGtl
eSA9IGRlcml2ZV9rZXkocGFzc3dvcmQsIHNhbHQpCiAgICBmID0gRmVybmV0KGtleSkKICAgIAog
ICAgZW5jcnlwdGVkX2RhdGEgPSBmLmVuY3J5cHQoZGF0YSkKCiAgICAjINCh0L7RhdGA0LDQvdGP
0LXQvDog0L/QtdGA0LLRi9C1IDE2INCx0LDQudGCIC0g0YHQvtC70YwsINC+0YHRgtCw0LvRjNC9
0L7QtSAtINC00LDQvdC90YvQtQogICAgd2l0aCBvcGVuKG91dHB1dF9maWxlLCAnd2InKSBhcyBm
OgogICAgICAgIGYud3JpdGUoc2FsdCArIGVuY3J5cHRlZF9kYXRhKQogICAgCiAgICBwcmludChm
IlN1Y2Nlc3MhIEVuY3J5cHRlZCBjb25maWcgc2F2ZWQgdG8gJ3tvdXRwdXRfZmlsZX0nIikKCmlm
IF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBpZiBsZW4oc3lzLmFyZ3YpICE9IDM6CiAgICAg
ICAgcHJpbnQoIlVzYWdlOiBweXRob24zIHMzX2NvbmZpZ19lbmNyeXB0b3IucHkgPGlucHV0X2pz
b24+IDxvdXRwdXRfZW5jPiIpCiAgICAgICAgcHJpbnQoIkV4YW1wbGU6IHB5dGhvbjMgczNfY29u
ZmlnX2VuY3J5cHRvci5weSBzM19jb25maWcuanNvbiBzM19jb25maWcuZW5jIikKICAgIGVsc2U6
CiAgICAgICAgZW5jcnlwdF9maWxlKHN5cy5hcmd2WzFdLCBzeXMuYXJndlsyXSkKAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAG1ha2VfYnVja2V0X2xpc3Quc2gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw
MDAwNzcwADAwMDAwMDAAMDAwMTczNAAwMDAwMDAwMTMwNwAxNTEzMTEzMjY3NgAwMTM3NjYAIDAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdXN0YXIgIAByb290AAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZib3hzZgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAIyEvdXNyL2Jpbi9lbnYgYmFzaApzZXQgLWV1byBwaXBlZmFpbAoKcmFkb3Nn
dy1hZG1pbiBidWNrZXQgbGlzdCAtLWZvcm1hdD1qc29uIHwKanEgLXIgJy5bXScgfAp3aGlsZSBJ
RlM9IHJlYWQgLXIgYnVja2V0OyBkbwogIHN0YXRzX2pzb249IiQocmFkb3Nndy1hZG1pbiBidWNr
ZXQgc3RhdHMgLS1idWNrZXQ9IiRidWNrZXQiIC0tZm9ybWF0PWpzb24pIgoKICBjcmVhdGVkX2lz
bz0iJChlY2hvICIkc3RhdHNfanNvbiIgfCBqcSAtciAnLmNyZWF0aW9uX3RpbWUgLy8gLmJ1Y2tl
dC5jcmVhdGlvbl90aW1lIC8vIGVtcHR5JykiCiAgaWYgW1sgLXogIiRjcmVhdGVkX2lzbyIgfHwg
IiRjcmVhdGVkX2lzbyIgPT0gIm51bGwiIF1dOyB0aGVuCiAgICAjINC10YHQu9C4INC90LUg0L3Q
sNGI0LvQuCBjcmVhdGlvbl90aW1lIOKAlCDQvNC+0LbQvdC+INCy0YvQstC10YHRgtC4IDAKICAg
IHByaW50ZiAnJXMgJXNcbicgIiRidWNrZXQiICIwIgogICAgY29udGludWUKICBmaQoKICAjIElT
Tzg2MDEgLT4gZXBvY2ggc2Vjb25kcwogIGNyZWF0ZWRfZXBvY2g9IiQoZGF0ZSAtdSAtZCAiJGNy
ZWF0ZWRfaXNvIiArJXMgMj4vZGV2L251bGwgfHwgdHJ1ZSkiCiAgaWYgW1sgLXogIiRjcmVhdGVk
X2Vwb2NoIiBdXTsgdGhlbgogICAgY3JlYXRlZF9lcG9jaD0iMCIKICBmaQoKICBwcmludGYgJyVz
ICVzXG4nICIkYnVja2V0IiAiJGNyZWF0ZWRfZXBvY2giCmRvbmUKAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=
