czMtY29tbWFuZGVyLXYxLjEwLjAucHkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAwMDA3NzAAMDAwMDAw
MAAwMDAxNzM0ADAwMDAwNzY2MzMxADE1MTM1NzQyNjE3ADAxMzcxNQAgMAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB1c3RhciAgAHJvb3QAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAdmJveHNmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAj
IS91c3IvYmluL2VudiBweXRob24zCiMgLSotIGNvZGluZzogdXRmLTggLSotCiIiIgrQlNCy0YPR
hdC/0LDQvdC10LvRjNC90YvQuSDRhNCw0LnQu9C+0LLRi9C5INC80LXQvdC10LTQttC10YAg0LTQ
u9GPIFMzIENlcGgg0YEg0L/QvtC00LTQtdGA0LbQutC+0Lkg0LzQvdC+0LbQtdGB0YLQstC10L3Q
vdGL0YUgZW5kcG9pbnRzCiIiIgoKaW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHJlCmltcG9y
dCBmbm1hdGNoCmltcG9ydCB1cndpZAppbXBvcnQgYm90bzMKaW1wb3J0IGJhc2U2NApmcm9tIGJv
dG9jb3JlLmV4Y2VwdGlvbnMgaW1wb3J0IENsaWVudEVycm9yCmZyb20gYm90b2NvcmUuY29uZmln
IGltcG9ydCBDb25maWcKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IHRlbXBm
aWxlCmltcG9ydCBzaHV0aWwKaW1wb3J0IGpzb24KaW1wb3J0IHRocmVhZGluZwppbXBvcnQgdGlt
ZQppbXBvcnQgcGxhdGZvcm0KCmltcG9ydCBhcmdwYXJzZQppbXBvcnQgZ2V0cGFzcwppbXBvcnQg
cmVxdWVzdHMgICMg0JTQu9GPIFZhdWx0ICjQvdGD0LbQtdC9IHBpcCBpbnN0YWxsIHJlcXVlc3Rz
LCDQvtCx0YvRh9C90L4g0LXRgdGC0Ywg0LLQtdC30LTQtSkKIyDQlNC70Y8g0YjQuNGE0YDQvtCy
0LDQvdC40Y8gKNC90YPQttC10L0gcGlwIGluc3RhbGwgY3J5cHRvZ3JhcGh5KQp0cnk6CiAgICBm
cm9tIGNyeXB0b2dyYXBoeS5mZXJuZXQgaW1wb3J0IEZlcm5ldAogICAgZnJvbSBjcnlwdG9ncmFw
aHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGhhc2hlcwogICAgZnJvbSBjcnlwdG9ncmFwaHku
aGF6bWF0LnByaW1pdGl2ZXMua2RmLnBia2RmMiBpbXBvcnQgUEJLREYySE1BQwogICAgZnJvbSBj
cnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzIGltcG9ydCBkZWZhdWx0X2JhY2tlbmQKICAgIEhB
U19DUllQVE8gPSBUcnVlCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIEhBU19DUllQVE8gPSBGYWxz
ZQppbXBvcnQgc29ja2V0CmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCB1cmxwYXJzZQojIGltcG9y
dCBmdW5jdG9vbHMKZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgT3JkZXJlZERpY3QKCl9fVkVSU0lP
Tl9fID0gIjEuMTAuMCIKX19BVVRIT1JfXyA9ICLQotCw0YDQsNGB0L7QsiDQlNC80LjRgtGA0LjQ
uSIKCgpjbGFzcyBCb29rbWFya3NEaWFsb2codXJ3aWQuV2lkZ2V0V3JhcCk6CiAgICBkZWYgX19p
bml0X18oc2VsZiwgYm9va21hcmtzLCBjYWxsYmFjaywgcmVtb3ZlX2NhbGxiYWNrPU5vbmUpOgog
ICAgICAgIHNlbGYuY2FsbGJhY2sgPSBjYWxsYmFjawogICAgICAgIHNlbGYucmVtb3ZlX2NhbGxi
YWNrID0gcmVtb3ZlX2NhbGxiYWNrCiAgICAgICAgc2VsZi5ib29rbWFya3MgPSBib29rbWFya3MK
CiAgICAgICAgc2VsZi5ib2R5ID0gdXJ3aWQuU2ltcGxlRm9jdXNMaXN0V2Fsa2VyKFtdKQogICAg
ICAgIHNlbGYuX3BvcHVsYXRlX2xpc3QoKQoKICAgICAgICBzZWxmLmxpc3Rib3ggPSB1cndpZC5M
aXN0Qm94KHNlbGYuYm9keSkKICAgICAgICBkb3duX3RleHQgPSB1cndpZC5UZXh0KCJFbnRlcjog
Y2hvb3NlIGJvb2ttYXJrIHwgZGVsIC0gcmVtb3ZlIGJvb2ttYXJrIHwgZXNjIC0gZXhpdCIpCgog
ICAgICAgIGNsb3NlX2J0biA9IHVyd2lkLkJ1dHRvbigiQ2xvc2UiKQogICAgICAgIHVyd2lkLmNv
bm5lY3Rfc2lnbmFsKGNsb3NlX2J0biwgJ2NsaWNrJywgc2VsZi5vbl9jYW5jZWwpCgogICAgICAg
ICMg0JrQvtC80L/QvtC90L7QstC60LAg0LrQvdC+0L/QvtC6CiAgICAgICAgYnV0dG9uc19jb2wg
PSB1cndpZC5Db2x1bW5zKFsKICAgICAgICAgICAgKCd3ZWlnaHQnLCAxLCB1cndpZC5UZXh0KCcn
KSksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAoY2xvc2VfYnRuLCAnYnV0dG9u
JywgZm9jdXNfbWFwPSdidXR0b25fZm9jdXMnKSksCiAgICAgICAgICAgICgnd2VpZ2h0JywgMSwg
dXJ3aWQuVGV4dCgnJykpLAogICAgICAgIF0sIGRpdmlkZWNoYXJzPTApCgogICAgICAgIGxheW91
dCA9IHVyd2lkLlBpbGUoWwogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHNlbGYubGlzdGJveCks
CiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgICAgICgncGFj
aycsIGJ1dHRvbnNfY29sKSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwK
ICAgICAgICAgICAgKCdwYWNrJywgZG93bl90ZXh0KSwKICAgICAgICBdKQoKICAgICAgICBjb250
ZW50X2JsdWUgPSB1cndpZC5BdHRyTWFwKGxheW91dCwgJ2JvZHknKQogICAgICAgIHNlbGYuZnJh
bWUgPSB1cndpZC5MaW5lQm94KGNvbnRlbnRfYmx1ZSwgdGl0bGU9IkJvb2ttYXJrcyIpCiAgICAg
ICAgc3VwZXIoKS5fX2luaXRfXyh1cndpZC5BdHRyTWFwKHNlbGYuZnJhbWUsICdib2R5JykpCgog
ICAgZGVmIF9wb3B1bGF0ZV9saXN0KHNlbGYpOgogICAgICAgIHNlbGYuYm9keS5jbGVhcigpCiAg
ICAgICAgZm9yIGJtIGluIHNlbGYuYm9va21hcmtzOgogICAgICAgICAgICBpZiBibVsndHlwZSdd
ID09ICdmcyc6CiAgICAgICAgICAgICAgICBkZXNjID0gZiJbRlNdIgogICAgICAgICAgICBlbHNl
OgogICAgICAgICAgICAgICAgZGVzYyA9IGYiW1MzXSIKCiAgICAgICAgICAgIGJ0bl9sYWJlbCA9
IGYie2Rlc2N9OiB7Ym1bJ25hbWUnXX0iCiAgICAgICAgICAgIGJ0biA9IHVyd2lkLkJ1dHRvbihi
dG5fbGFiZWwpCgogICAgICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChidG4sICdjbGljaycs
IGxhbWJkYSBiLCBkYXRhPWJtOiBzZWxmLm9uX2Jvb2ttYXJrX2NsaWNrKGRhdGEpKQogICAgICAg
ICAgICBzZWxmLmJvZHkuYXBwZW5kKHVyd2lkLkF0dHJNYXAoYnRuLCAnYm9keScsIGZvY3VzX21h
cD0nYnV0dG9uX2ZvY3VzJykpCgogICAgZGVmIG9uX2Jvb2ttYXJrX2NsaWNrKHNlbGYsIGJtX2Rh
dGEpOgogICAgICAgIHNlbGYuY2FsbGJhY2soYm1fZGF0YSkKCiAgICBkZWYgb25fY2FuY2VsKHNl
bGYsIGJ0bj1Ob25lKToKICAgICAgICBzZWxmLmNhbGxiYWNrKE5vbmUpCgogICAgZGVmIGtleXBy
ZXNzKHNlbGYsIHNpemUsIGtleSk6CiAgICAgICAgaWYga2V5ID09ICdkZWxldGUnOgogICAgICAg
ICAgICBwaWxlID0gc2VsZi5mcmFtZS5vcmlnaW5hbF93aWRnZXQub3JpZ2luYWxfd2lkZ2V0CiAg
ICAgICAgICAgIGlmIHBpbGUuZm9jdXNfcG9zaXRpb24gPT0gMDoKICAgICAgICAgICAgICAgIGZv
Y3VzX3dpZGdldCwgZm9jdXNfaWR4ID0gc2VsZi5saXN0Ym94LmdldF9mb2N1cygpCiAgICAgICAg
ICAgICAgICBpZiBmb2N1c193aWRnZXQgYW5kIHNlbGYucmVtb3ZlX2NhbGxiYWNrOgogICAgICAg
ICAgICAgICAgICAgIHNlbGYucmVtb3ZlX2NhbGxiYWNrKGZvY3VzX2lkeCkKICAgICAgICAgICAg
cmV0dXJuIE5vbmUKCiAgICAgICAgaWYga2V5ID09ICdlc2MnOgogICAgICAgICAgICBzZWxmLm9u
X2NhbmNlbCgpCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgcmV0dXJuIHN1cGVyKCku
a2V5cHJlc3Moc2l6ZSwga2V5KQoKCmNsYXNzIEJvb2ttYXJrc01hbmFnZXI6CiAgICBkZWYgX19p
bml0X18oc2VsZiwgZmlsZXBhdGg9ImJvb2ttYXJrcy5qc29uIik6CiAgICAgICAgc2VsZi5maWxl
cGF0aCA9IGZpbGVwYXRoCiAgICAgICAgc2VsZi5ib29rbWFya3MgPSBzZWxmLmxvYWQoKQoKICAg
IGRlZiBsb2FkKHNlbGYpOgogICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhzZWxmLmZpbGVw
YXRoKToKICAgICAgICAgICAgcmV0dXJuIFtdCiAgICAgICAgdHJ5OgogICAgICAgICAgICB3aXRo
IG9wZW4oc2VsZi5maWxlcGF0aCwgJ3InLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmOgogICAgICAg
ICAgICAgICAgcmV0dXJuIGpzb24ubG9hZChmKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAg
cmV0dXJuIFtdCgogICAgZGVmIHNhdmUoc2VsZik6CiAgICAgICAgd2l0aCBvcGVuKHNlbGYuZmls
ZXBhdGgsICd3JywgZW5jb2Rpbmc9J3V0Zi04JykgYXMgZjoKICAgICAgICAgICAganNvbi5kdW1w
KHNlbGYuYm9va21hcmtzLCBmLCBpbmRlbnQ9MikKCiAgICBkZWYgYWRkKHNlbGYsIG5hbWUsIHBh
bmVsX2luZm8pOgogICAgICAgICIiIgogICAgICAgIHBhbmVsX2luZm86IGRpY3Qg0YEg0LrQu9GO
0YfQsNC80LggJ3R5cGUnLCAncGF0aCcgKNC00LvRjyBmcyksCiAgICAgICAgICAgICAgICAgICAg
J2VuZHBvaW50JywgJ2J1Y2tldCcsICdwcmVmaXgnICjQtNC70Y8gczMpCiAgICAgICAgIiIiCiAg
ICAgICAgc2VsZi5ib29rbWFya3MuYXBwZW5kKHsKICAgICAgICAgICAgIm5hbWUiOiBuYW1lLAog
ICAgICAgICAgICAqKnBhbmVsX2luZm8KICAgICAgICB9KQogICAgICAgIHNlbGYuc2F2ZSgpCgog
ICAgZGVmIHJlbW92ZShzZWxmLCBpbmRleCk6CiAgICAgICAgaWYgMCA8PSBpbmRleCA8IGxlbihz
ZWxmLmJvb2ttYXJrcyk6CiAgICAgICAgICAgIHNlbGYuYm9va21hcmtzLnBvcChpbmRleCkKICAg
ICAgICAgICAgc2VsZi5zYXZlKCkKCmRlZiBjaGVja19zM19lbmRwb2ludF9jb25uZWN0aXZpdHko
ZW5kcG9pbnRfdXJsLCB0aW1lb3V0PTIpOgogICAgIiIiCiAgICDQkdGL0YHRgtGA0LDRjyDQv9GA
0L7QstC10YDQutCwINC00L7RgdGC0YPQv9C90L7RgdGC0LggUzMgZW5kcG9pbnQuCiAgICBBcmdz
OgogICAgICAgIGVuZHBvaW50X3VybDogVVJMINGN0L3QtNC/0L7QuNC90YLQsCAo0L3QsNC/0YDQ
uNC80LXRgCwgJ2h0dHA6Ly8xMC4wLjAuMTo3NDgwJykKICAgICAgICB0aW1lb3V0OiDRgtCw0LnQ
vNCw0YPRgiDQv9C+0LTQutC70Y7Rh9C10L3QuNGPINCyINGB0LXQutGD0L3QtNCw0YUKICAgIFJl
dHVybnM6CiAgICAgICAgdHVwbGU6IChzdWNjZXNzOiBib29sLCBlcnJvcl9tZXNzYWdlOiBzdHIg
b3IgTm9uZSkKICAgICIiIgogICAgdHJ5OgogICAgICAgIHBhcnNlZCA9IHVybHBhcnNlKGVuZHBv
aW50X3VybCkKICAgICAgICBob3N0ID0gcGFyc2VkLmhvc3RuYW1lCiAgICAgICAgcG9ydCA9IHBh
cnNlZC5wb3J0CgogICAgICAgICMg0J7Qv9GA0LXQtNC10LvRj9C10Lwg0L/QvtGA0YIg0L/QviDR
g9C80L7Qu9GH0LDQvdC40Y4KICAgICAgICBpZiBwb3J0IGlzIE5vbmU6CiAgICAgICAgICAgIHBv
cnQgPSA0NDMgaWYgcGFyc2VkLnNjaGVtZSA9PSAnaHR0cHMnIGVsc2UgODAKCiAgICAgICAgIyBU
Q1Ag0L/RgNC+0LLQtdGA0LrQsCDQv9C+0LTQutC70Y7Rh9C10L3QuNGPCiAgICAgICAgc29jayA9
IHNvY2tldC5zb2NrZXQoc29ja2V0LkFGX0lORVQsIHNvY2tldC5TT0NLX1NUUkVBTSkKICAgICAg
ICBzb2NrLnNldHRpbWVvdXQodGltZW91dCkKCiAgICAgICAgcmVzdWx0ID0gc29jay5jb25uZWN0
X2V4KChob3N0LCBwb3J0KSkKICAgICAgICBzb2NrLmNsb3NlKCkKCiAgICAgICAgaWYgcmVzdWx0
ID09IDA6CiAgICAgICAgICAgIHJldHVybiAoVHJ1ZSwgTm9uZSkKICAgICAgICBlbHNlOgogICAg
ICAgICAgICByZXR1cm4gKEZhbHNlLCBmIkNhbm5vdCBjb25uZWN0IHRvIHtob3N0fTp7cG9ydH0i
KQoKICAgIGV4Y2VwdCBzb2NrZXQuZ2FpZXJyb3I6CiAgICAgICAgcmV0dXJuIChGYWxzZSwgZiJD
YW5ub3QgcmVzb2x2ZSBob3N0bmFtZToge3BhcnNlZC5ob3N0bmFtZX0iKQogICAgZXhjZXB0IHNv
Y2tldC50aW1lb3V0OgogICAgICAgIHJldHVybiAoRmFsc2UsIGYiQ29ubmVjdGlvbiB0aW1lb3V0
IHRvIHtwYXJzZWQuaG9zdG5hbWV9Ontwb3J0fSIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6
CiAgICAgICAgcmV0dXJuIChGYWxzZSwgZiJDb25uZWN0aW9uIGVycm9yOiB7c3RyKGUpfSIpCgpk
ZWYgZ2V0X2ZvY3VzX2J1dHRvbih3KToKICAgICMg0KDQsNC30LLQvtGA0LDRh9C40LLQsNC10Lwg
0LTQviDRgtC10LvQsCAoUGlsZSkKICAgIGlmIGlzaW5zdGFuY2UodywgdXJ3aWQuQXR0ck1hcCk6
CiAgICAgICAgdyA9IHcub3JpZ2luYWxfd2lkZ2V0ICAjIExpbmVCb3gKICAgIGlmIGlzaW5zdGFu
Y2UodywgdXJ3aWQuTGluZUJveCk6CiAgICAgICAgdyA9IHcub3JpZ2luYWxfd2lkZ2V0ICAjIEZp
bGxlcgogICAgaWYgaXNpbnN0YW5jZSh3LCB1cndpZC5GaWxsZXIpOgogICAgICAgIHcgPSB3LmJv
ZHkgICMgUGlsZQoKICAgICMg0JXRgdC70Lgg0Y3RgtC+IFBpbGUg4oCUINC/0YDQvtCx0YPQtdC8
INC/0L7QvdGP0YLRjCwg0LPQtNC1INGE0L7QutGD0YEKICAgIGlmIGlzaW5zdGFuY2UodywgdXJ3
aWQuUGlsZSk6CiAgICAgICAgZm9jdXNfcmVzdWx0ID0gdy5nZXRfZm9jdXMoKQogICAgICAgICMg
0JIg0YDQsNC30L3Ri9GFINCy0LXRgNGB0LjRj9GFIHVyd2lkINGN0YLQviDQu9C40LHQviAod2lk
Z2V0LCBpbmRleCksINC70LjQsdC+INC/0YDQvtGB0YLQviB3aWRnZXQKICAgICAgICBpZiBpc2lu
c3RhbmNlKGZvY3VzX3Jlc3VsdCwgdHVwbGUpOgogICAgICAgICAgICBmb2N1c2VkX3dpZGdldCA9
IGZvY3VzX3Jlc3VsdFswXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGZvY3VzZWRfd2lkZ2V0
ID0gZm9jdXNfcmVzdWx0CgogICAgICAgICMg0JIg0YHRgtGA0L7QutC1INGBINC60L3QvtC/0LrQ
sNC80Lgg0YMg0L3QsNGBIENvbHVtbnMKICAgICAgICBpZiBpc2luc3RhbmNlKGZvY3VzZWRfd2lk
Z2V0LCB1cndpZC5Db2x1bW5zKToKICAgICAgICAgICAgY29sX2ZvY3VzID0gZm9jdXNlZF93aWRn
ZXQuZ2V0X2ZvY3VzKCkKICAgICAgICAgICAgIyDQkNC90LDQu9C+0LPQuNGH0L3Qvjog0LvQuNCx
0L4gKHdpZGdldCwgaW5kZXgpLCDQu9C40LHQviB3aWRnZXQKICAgICAgICAgICAgaWYgaXNpbnN0
YW5jZShjb2xfZm9jdXMsIHR1cGxlKToKICAgICAgICAgICAgICAgIGZvY3VzX3cgPSBjb2xfZm9j
dXNbMF0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGZvY3VzX3cgPSBjb2xfZm9j
dXMKCiAgICAgICAgICAgICMgZm9jdXNfdyDQvtCx0YvRh9C90L4gQXR0ck1hcChidXR0b24sICdi
dXR0b24nLCBmb2N1c19tYXA9Li4uKQogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGZvY3VzX3cs
IHVyd2lkLkF0dHJNYXApOgogICAgICAgICAgICAgICAgYnRuID0gZm9jdXNfdy5vcmlnaW5hbF93
aWRnZXQKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGJ0biA9IGZvY3VzX3cKICAg
ICAgICAgICAgcmV0dXJuIGJ0bgogICAgcmV0dXJuIE5vbmUKCgpjbGFzcyBTM0NvbmZpZzoKICAg
ICIiIgogICAg0KPQv9GA0LDQstC70LXQvdC40LUg0LrQvtC90YTQuNCz0YPRgNCw0YbQuNC10Lkg
UzMgZW5kcG9pbnRzLgogICAg0J/QvtC00LTQtdGA0LbQuNCy0LDQtdGCIDMg0YDQtdC20LjQvNCw
OgogICAgMS4gUGxhaW50ZXh0IEpTT04gKNGE0LDQudC7KQogICAgMi4gRW5jcnlwdGVkICjRhNCw
0LnQuyArINC/0LDRgNC+0LvRjCkKICAgIDMuIEhhc2hpQ29ycCBWYXVsdCAoQVBJKQogICAgIiIi
CiAgICBkZWYgX19pbml0X18oc2VsZiwgYXJncyk6CiAgICAgICAgc2VsZi5lbmRwb2ludHMgPSBb
XQogICAgICAgIHNlbGYuYXJncyA9IGFyZ3MKICAgICAgICBzZWxmLmxvYWRfY29uZmlnKCkKCiAg
ICBkZWYgX2V4aXRfZXJyb3Ioc2VsZiwgbWVzc2FnZSk6CiAgICAgICAgIiIi0JLRi9Cy0L7QtCDQ
vtGI0LjQsdC60Lgg0Lgg0LfQsNCy0LXRgNGI0LXQvdC40LUg0L/RgNC+0LPRgNCw0LzQvNGLIiIi
CiAgICAgICAgcHJpbnQoZiJcbkNSSVRJQ0FMIEVSUk9SOiB7bWVzc2FnZX0iKQogICAgICAgIHN5
cy5leGl0KDEpCgogICAgZGVmIGxvYWRfY29uZmlnKHNlbGYpOgogICAgICAgICIiItCc0LDRgNGI
0YDRg9GC0LjQt9Cw0YbQuNGPINC30LDQs9GA0YPQt9C60Lgg0LIg0LfQsNCy0LjRgdC40LzQvtGB
0YLQuCDQvtGCINCw0YDQs9GD0LzQtdC90YLQvtCyIiIiCiAgICAgICAgaWYgc2VsZi5hcmdzLnZh
dWx0X3VybDoKICAgICAgICAgICAgc2VsZi5fbG9hZF9mcm9tX3ZhdWx0KCkKICAgICAgICBlbGlm
IHNlbGYuYXJncy5lbmNyeXB0ZWRfY29uZmlnOgogICAgICAgICAgICBzZWxmLl9sb2FkX2Zyb21f
ZW5jcnlwdGVkX2ZpbGUoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX2xvYWRfZnJv
bV9wbGFpbl9maWxlKCkKCiAgICAjIC0tLSDQoNCV0JbQmNCcIDE6INCe0LHRi9GH0L3Ri9C5INGE
0LDQudC7IC0tLQogICAgZGVmIF9sb2FkX2Zyb21fcGxhaW5fZmlsZShzZWxmKToKICAgICAgICBj
b25maWdfZmlsZSA9IHNlbGYuYXJncy5jb25maWcKICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlz
dHMoY29uZmlnX2ZpbGUpOgogICAgICAgICAgICBzZWxmLl9leGl0X2Vycm9yKGYiQ29uZmlnIGZp
bGUgJ3tjb25maWdfZmlsZX0nIG5vdCBmb3VuZC5cbiIKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAiUnVuIHdpdGggZGVmYXVsdCBzZXR0aW5ncyBvciBjcmVhdGUgY29uZmlnIGZpbGUgbWFu
dWFsbHkuIikKICAgICAgICAKICAgICAgICB0cnk6CiAgICAgICAgICAgIHdpdGggb3Blbihjb25m
aWdfZmlsZSwgJ3InKSBhcyBmOgogICAgICAgICAgICAgICAgZGF0YSA9IGpzb24ubG9hZChmKQog
ICAgICAgICAgICAgICAgc2VsZi5lbmRwb2ludHMgPSBkYXRhLmdldCgnZW5kcG9pbnRzJywgW10p
CiAgICAgICAgZXhjZXB0IGpzb24uSlNPTkRlY29kZUVycm9yIGFzIGU6CiAgICAgICAgICAgIHNl
bGYuX2V4aXRfZXJyb3IoZiJTeW50YXggZXJyb3IgaW4gJ3tjb25maWdfZmlsZX0nOiB7ZX0iKQog
ICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5fZXhpdF9lcnJv
cihmIkNhbm5vdCByZWFkIGNvbmZpZyAne2NvbmZpZ19maWxlfSc6IHtlfSIpCgogICAgICAgIGlm
IG5vdCBzZWxmLmVuZHBvaW50czoKICAgICAgICAgICAgc2VsZi5fZXhpdF9lcnJvcigiQ29uZmln
IGZpbGUgaXMgZW1wdHkgb3IgaGFzIG5vICdlbmRwb2ludHMnIGxpc3QuIikKCiAgICAjIC0tLSDQ
oNCV0JbQmNCcIDI6INCX0LDRiNC40YTRgNC+0LLQsNC90L3Ri9C5INGE0LDQudC7IC0tLQogICAg
ZGVmIF9sb2FkX2Zyb21fZW5jcnlwdGVkX2ZpbGUoc2VsZik6CiAgICAgICAgaWYgbm90IEhBU19D
UllQVE86CiAgICAgICAgICAgIHNlbGYuX2V4aXRfZXJyb3IoIk1vZHVsZSAnY3J5cHRvZ3JhcGh5
JyBpcyBtaXNzaW5nLiBJbnN0YWxsIGl0OiBwaXAgaW5zdGFsbCBjcnlwdG9ncmFwaHkiKQogICAg
ICAgICAgICAKICAgICAgICBlbmNfZmlsZSA9IHNlbGYuYXJncy5lbmNyeXB0ZWRfY29uZmlnCiAg
ICAgICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKGVuY19maWxlKToKICAgICAgICAgICAgc2VsZi5f
ZXhpdF9lcnJvcihmIkVuY3J5cHRlZCBjb25maWcgJ3tlbmNfZmlsZX0nIG5vdCBmb3VuZC4iKQoK
ICAgICAgICB0cnk6CiAgICAgICAgICAgICMg0KfQuNGC0LDQtdC8INCS0KHQlSDQsdCw0LnRgtGL
CiAgICAgICAgICAgIHdpdGggb3BlbihlbmNfZmlsZSwgJ3JiJykgYXMgZjoKICAgICAgICAgICAg
ICAgIGZpbGVfY29udGVudCA9IGYucmVhZCgpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBs
ZW4oZmlsZV9jb250ZW50KSA8IDQwOiAgIyAxNiAoc2FsdCkgKyB+MjAgKG1pbiBmZXJuZXQgb3Zl
cmhlYWQpCiAgICAgICAgICAgICAgICBzZWxmLl9leGl0X2Vycm9yKCJFbmNyeXB0ZWQgZmlsZSBp
cyB0b28gc2hvcnQvY29ycnVwdGVkLiIpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgc2Fs
dCA9IGZpbGVfY29udGVudFs6MTZdCiAgICAgICAgICAgIGVuY3J5cHRlZF9kYXRhID0gZmlsZV9j
b250ZW50WzE2Ol0KICAgICAgICAgICAgCiAgICAgICAgICAgICMg0JLQkNCW0J3QnjogZ2V0cGFz
cyDQvNC+0LbQtdGCINCy0LXRgNC90YPRgtGMINGB0YLRgNC+0LrRgyDRgSDQv9GA0L7QsdC10LvQ
sNC80Lgg0LIg0LrQvtC90YbQtSDQvdCwINC90LXQutC+0YLQvtGA0YvRhSDRgtC10YDQvNC40L3Q
sNC70LDRhQogICAgICAgICAgICBwcmludChmIlJlYWRpbmcgZW5jcnlwdGVkIGNvbmZpZzoge2Vu
Y19maWxlfSIpCiAgICAgICAgICAgIHBhc3N3b3JkID0gZ2V0cGFzcy5nZXRwYXNzKCJFbnRlciBk
ZWNyeXB0aW9uIHBhc3N3b3JkOiAiKQogICAgICAgICAgICAKICAgICAgICAgICAgIyDQo9Cx0LjR
gNCw0LXQvCDQv9GA0L7QsdC10LvRjNC90YvQtSDRgdC40LzQstC+0LvRiyDRgtC+0LvRjNC60L4g
0LXRgdC70Lgg0Y3RgtC+INGB0LvRg9GH0LDQudC90L4g0L/QvtC/0LDQstGI0LjQuSBcciDQuNC7
0LggXG4sIAogICAgICAgICAgICAjINC90L4g0LTQu9GPINCx0LXQt9C+0L/QsNGB0L3QvtGB0YLQ
uCDQv9Cw0YDQvtC70Y8g0LvRg9GH0YjQtSDQsdGA0LDRgtGMINC60LDQuiDQtdGB0YLRjC4KICAg
ICAgICAgICAgIyDQldGB0LvQuCDQstGLINGB0L7Qt9C00LDQstCw0LvQuCDQv9Cw0YDQvtC70Ywg
0YEg0L/RgNC+0LHQtdC70L7QvCDQsiDQutC+0L3RhtC1IC0g0L7QvSDQstCw0LbQtdC9IQogICAg
ICAgICAgICAKICAgICAgICAgICAgIyDQk9C10L3QtdGA0LjRgNGD0LXQvCDQutC70Y7RhyAo0L/Q
sNGA0LDQvNC10YLRgNGLINCU0J7Qm9CW0J3QqyDRgdC+0LLQv9Cw0LTQsNGC0Ywg0YEgZW5jcnlw
dG9yLnB5KQogICAgICAgICAgICBrZGYgPSBQQktERjJITUFDKAogICAgICAgICAgICAgICAgYWxn
b3JpdGhtPWhhc2hlcy5TSEEyNTYoKSwKICAgICAgICAgICAgICAgIGxlbmd0aD0zMiwKICAgICAg
ICAgICAgICAgIHNhbHQ9c2FsdCwKICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnM9MTAwMDAwLAog
ICAgICAgICAgICAgICAgYmFja2VuZD1kZWZhdWx0X2JhY2tlbmQoKSAKICAgICAgICAgICAgICAg
ICMgYmFja2VuZCBkZWZhdWx0IGlzIE9LCiAgICAgICAgICAgICkKICAgICAgICAgICAga2V5ID0g
YmFzZTY0LnVybHNhZmVfYjY0ZW5jb2RlKGtkZi5kZXJpdmUocGFzc3dvcmQuZW5jb2RlKCd1dGYt
OCcpKSkKICAgICAgICAgICAgCiAgICAgICAgICAgIGYgPSBGZXJuZXQoa2V5KQogICAgICAgICAg
ICAKICAgICAgICAgICAgIyDQn9GL0YLQsNC10LzRgdGPINGA0LDRgdGI0LjRhNGA0L7QstCw0YLR
jAogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBkZWNyeXB0ZWRfZGF0YSA9IGYuZGVj
cnlwdChlbmNyeXB0ZWRfZGF0YSkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAg
ICAgICAgICAgICMgRmVybmV0INC60LjQtNCw0LXRgiBJbnZhbGlkVG9rZW4g0LXRgdC70Lgg0L/Q
sNGA0L7Qu9GMINC90LUg0L/QvtC00L7RiNC10LsKICAgICAgICAgICAgICAgIHNlbGYuX2V4aXRf
ZXJyb3IoIkRlY3J5cHRpb24gZmFpbGVkISBJbnZhbGlkIHBhc3N3b3JkIG9yIGNvcnJ1cHRlZCBm
aWxlLiIpCiAgICAgICAgICAgIAogICAgICAgICAgICAjINCU0LXQutC+0LTQuNGA0YPQtdC8IEpT
T04KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAganNvbl9zdHIgPSBkZWNyeXB0ZWRf
ZGF0YS5kZWNvZGUoJ3V0Zi04JykKICAgICAgICAgICAgICAgIGRhdGEgPSBqc29uLmxvYWRzKGpz
b25fc3RyKQogICAgICAgICAgICAgICAgc2VsZi5lbmRwb2ludHMgPSBkYXRhLmdldCgnZW5kcG9p
bnRzJywgW10pCiAgICAgICAgICAgIGV4Y2VwdCBqc29uLkpTT05EZWNvZGVFcnJvcjoKICAgICAg
ICAgICAgICAgIHNlbGYuX2V4aXRfZXJyb3IoIkRlY3J5cHRlZCBkYXRhIGlzIG5vdCB2YWxpZCBK
U09OLiBDaGVjayBzb3VyY2UgZmlsZSBpbnRlZ3JpdHkuIikKICAgICAgICAgICAgICAgIAogICAg
ICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgIyDQm9C+0LLQuNC8INC70Y7Q
sdGL0LUg0LTRgNGD0LPQuNC1INC90LXQvtC20LjQtNCw0L3QvdGL0LUg0L7RiNC40LHQutC4CiAg
ICAgICAgICAgIHNlbGYuX2V4aXRfZXJyb3IoZiJVbmV4cGVjdGVkIGVycm9yIGR1cmluZyBkZWNy
eXB0aW9uOiB7c3RyKGUpfSIpCgogICAgIyAtLS0g0KDQldCW0JjQnCAzOiBIYXNoaUNvcnAgVmF1
bHQgLS0tCiAgICBkZWYgX2xvYWRfZnJvbV92YXVsdChzZWxmKToKICAgICAgICB2YXVsdF91cmwg
PSBzZWxmLmFyZ3MudmF1bHRfdXJsLnJzdHJpcCgnLycpCiAgICAgICAgdmF1bHRfcGF0aCA9IHNl
bGYuYXJncy52YXVsdF9wYXRoCiAgICAgICAgdmF1bHRfdXNlciA9IHNlbGYuYXJncy52YXVsdF91
c2VyCgogICAgICAgIGlmIG5vdCB2YXVsdF91c2VyOgogICAgICAgICAgICBwcmludChmIkNvbm5l
Y3RpbmcgdG8gVmF1bHQ6IHt2YXVsdF91cmx9IikKICAgICAgICAgICAgdmF1bHRfdXNlciA9IGlu
cHV0KCJWYXVsdCBVc2VybmFtZTogIikuc3RyaXAoKQoKICAgICAgICB2YXVsdF9wYXNzID0gc2Vs
Zi5hcmdzLnZhdWx0X3Bhc3MKICAgICAgICBpZiBub3QgdmF1bHRfcGFzczoKICAgICAgICAgICAg
dmF1bHRfcGFzcyA9IGdldHBhc3MuZ2V0cGFzcygiVmF1bHQgUGFzc3dvcmQ6ICIpCgogICAgICAg
IHRyeToKICAgICAgICAgICAgIyAxLiDQkNCy0YLQvtGA0LjQt9Cw0YbQuNGPIChVc2VycGFzcyBh
dXRoIG1ldGhvZCkKICAgICAgICAgICAgbG9naW5fdXJsID0gZiJ7dmF1bHRfdXJsfS92MS9hdXRo
L3VzZXJwYXNzL2xvZ2luL3t2YXVsdF91c2VyfSIKICAgICAgICAgICAgcmVzcCA9IHJlcXVlc3Rz
LnBvc3QobG9naW5fdXJsLCBqc29uPXsicGFzc3dvcmQiOiB2YXVsdF9wYXNzfSwgdGltZW91dD01
KQoKICAgICAgICAgICAgaWYgcmVzcC5zdGF0dXNfY29kZSAhPSAyMDA6CiAgICAgICAgICAgICAg
ICBzZWxmLl9leGl0X2Vycm9yKGYiVmF1bHQgbG9naW4gZmFpbGVkOiB7cmVzcC50ZXh0fSIpCiAg
ICAgICAgICAgICAgICAKICAgICAgICAgICAgY2xpZW50X3Rva2VuID0gcmVzcC5qc29uKClbJ2F1
dGgnXVsnY2xpZW50X3Rva2VuJ10KICAgICAgICAgICAgCiAgICAgICAgICAgICMgMi4g0KfRgtC1
0L3QuNC1INGB0LXQutGA0LXRgtCwCiAgICAgICAgICAgICMg0J/QvtC00LTQtdGA0LbQutCwIEtW
IFZlcnNpb24gMiAo0L/Rg9GC0Ywg0LTQvtC70LbQtdC9INGB0L7QtNC10YDQttCw0YLRjCAvZGF0
YS8g0LjQu9C4INC80Ysg0YHQsNC80Lgg0LXQs9C+INC00L7QsdCw0LLQuNC8PykKICAgICAgICAg
ICAgIyDQlNC70Y8g0L/RgNC+0YHRgtC+0YLRiyDRgdGH0LjRgtCw0LXQvCwg0YfRgtC+INC/0L7Q
u9GM0LfQvtCy0LDRgtC10LvRjCDQtNCw0LXRgiDQv9C+0LvQvdGL0Lkg0L/Rg9GC0Ywg0LogQVBJ
LCAKICAgICAgICAgICAgIyDQvdC+INGH0LDRgdGC0L4g0LIgS1YgdjIg0L/Rg9GC0YwgJ3NlY3Jl
dC9teWNvbmYnINC/0YDQtdCy0YDQsNGJ0LDQtdGC0YHRjyDQsiAnc2VjcmV0L2RhdGEvbXljb25m
JwogICAgICAgICAgICAKICAgICAgICAgICAgcmVhZF91cmwgPSBmInt2YXVsdF91cmx9L3YxL3t2
YXVsdF9wYXRofSIKICAgICAgICAgICAgaGVhZGVycyA9IHsiWC1WYXVsdC1Ub2tlbiI6IGNsaWVu
dF90b2tlbn0KICAgICAgICAgICAgCiAgICAgICAgICAgIHJlc3AgPSByZXF1ZXN0cy5nZXQocmVh
ZF91cmwsIGhlYWRlcnM9aGVhZGVycywgdGltZW91dD01KQogICAgICAgICAgICAKICAgICAgICAg
ICAgaWYgcmVzcC5zdGF0dXNfY29kZSAhPSAyMDA6CiAgICAgICAgICAgICAgICBzZWxmLl9leGl0
X2Vycm9yKGYiQ2Fubm90IHJlYWQgc2VjcmV0ICd7dmF1bHRfcGF0aH0nOiB7cmVzcC5zdGF0dXNf
Y29kZX0ge3Jlc3AudGV4dH0iKQogICAgICAgICAgICAKICAgICAgICAgICAganNvbl9yZXNwID0g
cmVzcC5qc29uKCkKICAgICAgICAgICAgCiAgICAgICAgICAgICMg0J/Ri9GC0LDQtdC80YHRjyDQ
tNC+0YHRgtCw0YLRjCDQtNCw0L3QvdGL0LUuCiAgICAgICAgICAgICMgS1YgdjI6IGRhdGEgLT4g
ZGF0YSAtPiBrZXkKICAgICAgICAgICAgIyBLViB2MTogZGF0YSAtPiBrZXkKICAgICAgICAgICAg
CiAgICAgICAgICAgIHBheWxvYWQgPSB7fQogICAgICAgICAgICBpZiAnZGF0YScgaW4ganNvbl9y
ZXNwOgogICAgICAgICAgICAgICAgaW5uZXIgPSBqc29uX3Jlc3BbJ2RhdGEnXQogICAgICAgICAg
ICAgICAgaWYgJ2RhdGEnIGluIGlubmVyIGFuZCBpc2luc3RhbmNlKGlubmVyWydkYXRhJ10sIGRp
Y3QpOgogICAgICAgICAgICAgICAgICAgIHBheWxvYWQgPSBpbm5lclsnZGF0YSddICAjIEtWIHYy
IHN0cnVjdHVyZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwYXls
b2FkID0gaW5uZXIgICMgS1YgdjEgc3RydWN0dXJlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAg
ICAgICAgICBzZWxmLl9leGl0X2Vycm9yKCJWYXVsdCByZXNwb25zZSBmb3JtYXQgbm90IHJlY29n
bml6ZWQgKG5vICdkYXRhJyBmaWVsZCkuIikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAj
INCY0YnQtdC8INC60LvRjtGHICdzM19jb25maWdfanNvbicg0LjQu9C4INC/0LDRgNGB0LjQvCDQ
stC10YHRjCBwYXlsb2FkINC10YHQu9C4INGN0YLQviDRg9C20LUg0YHRgtGA0YPQutGC0YPRgNCw
CiAgICAgICAgICAgIGlmICdlbmRwb2ludHMnIGluIHBheWxvYWQ6CiAgICAgICAgICAgICAgICAj
INCh0YLRgNGD0LrRgtGD0YDQsCDQu9C10LbQuNGCINC/0YDRj9C80L4g0LIg0YHQtdC60YDQtdGC
0LUKICAgICAgICAgICAgICAgIHNlbGYuZW5kcG9pbnRzID0gcGF5bG9hZFsnZW5kcG9pbnRzJ10K
ICAgICAgICAgICAgZWxpZiAnY29udGVudCcgaW4gcGF5bG9hZDoKICAgICAgICAgICAgICAgICMg
0KHRgtGA0YPQutGC0YPRgNCwINC70LXQttC40YIg0LIg0L/QvtC70LUgJ2NvbnRlbnQnINGB0YLR
gNC+0LrQvtC5INC40LvQuCDQvtCx0YrQtdC60YLQvtC8CiAgICAgICAgICAgICAgICBjb250ZW50
ID0gcGF5bG9hZFsnY29udGVudCddCiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGNvbnRl
bnQsIHN0cik6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5lbmRwb2ludHMgPSBqc29uLmxvYWRz
KGNvbnRlbnQpLmdldCgnZW5kcG9pbnRzJywgW10pCiAgICAgICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgICAgIHNlbGYuZW5kcG9pbnRzID0gY29udGVudC5nZXQoJ2VuZHBvaW50cycs
IFtdKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIyDQn9C+0YHQu9C10LTQvdC4
0Lkg0YjQsNC90YEgLSDQvNC+0LbQtdGCINCy0LXRgdGMIHBheWxvYWQg0Lgg0LXRgdGC0Ywg0LrQ
vtC90YTQuNCzPwogICAgICAgICAgICAgICAgc2VsZi5lbmRwb2ludHMgPSBwYXlsb2FkLmdldCgn
ZW5kcG9pbnRzJywgW10pCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgaWYgbm90IHNlbGYu
ZW5kcG9pbnRzOgogICAgICAgICAgICAgICAgc2VsZi5fZXhpdF9lcnJvcihmIlNlY3JldCAne3Zh
dWx0X3BhdGh9JyByZWFkLCBidXQgbm8gJ2VuZHBvaW50cycgZm91bmQgaW5zaWRlLiIpCgogICAg
ICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLlJlcXVlc3RFeGNlcHRpb24gYXMgZToKICAg
ICAgICAgICAgc2VsZi5fZXhpdF9lcnJvcihmIk5ldHdvcmsgZXJyb3IgY29ubmVjdGluZyB0byBW
YXVsdDoge2V9IikKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNl
bGYuX2V4aXRfZXJyb3IoZiJWYXVsdCBlcnJvcjoge2V9IikKCiAgICBkZWYgc2F2ZV9jb25maWco
c2VsZik6CiAgICAgICAgIiIi0KHQvtGF0YDQsNC90LXQvdC40LUg0L7RgtC60LvRjtGH0LXQvdC+
INCyINCx0LXQt9C+0L/QsNGB0L3Ri9GFINGA0LXQttC40LzQsNGFIiIiCiAgICAgICAgaWYgc2Vs
Zi5hcmdzLnZhdWx0X3VybCBvciBzZWxmLmFyZ3MuZW5jcnlwdGVkX2NvbmZpZzoKICAgICAgICAg
ICAgIyDQkiDQt9Cw0YnQuNGJ0LXQvdC90YvRhSDRgNC10LbQuNC80LDRhSDQvNGLINC90LUg0YHQ
vtGF0YDQsNC90Y/QtdC8INC60L7QvdGE0LjQsyDQvtCx0YDQsNGC0L3QviDQvdCwINC00LjRgdC6
INCyIHBsYWluIHRleHQKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgCiAgICAgICAgIyDQm9C+
0LPQuNC60LAg0LTQu9GPIHBsYWluIHRleHQgKNC10YHQu9C4INC90YPQttC90L4pCiAgICAgICAg
cGFzcyAKCiAgICBkZWYgZ2V0X2VuZHBvaW50cyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5l
bmRwb2ludHMKCiAgICBkZWYgZ2V0X2VuZHBvaW50KHNlbGYsIG5hbWUpOgogICAgICAgIGZvciBl
cCBpbiBzZWxmLmVuZHBvaW50czoKICAgICAgICAgICAgaWYgZXBbJ25hbWUnXSA9PSBuYW1lOgog
ICAgICAgICAgICAgICAgcmV0dXJuIGVwCiAgICAgICAgcmV0dXJuIE5vbmUKCgpjbGFzcyBMUlVD
YWNoZToKICAgICIiItCf0YDQvtGB0YLQvtC5IExSVSDQutC10Ygg0LTQu9GPINGF0YDQsNC90LXQ
vdC40Y8g0YDQtdC30YPQu9GM0YLQsNGC0L7QsiDQt9Cw0L/RgNC+0YHQvtCyINC6IFMzIiIiCgog
ICAgZGVmIF9faW5pdF9fKHNlbGYsIG1heHNpemU9MTAwMCk6CiAgICAgICAgc2VsZi5jYWNoZSA9
IE9yZGVyZWREaWN0KCkKICAgICAgICBzZWxmLm1heHNpemUgPSBtYXhzaXplCgogICAgZGVmIGdl
dChzZWxmLCBrZXkpOgogICAgICAgIGlmIGtleSBub3QgaW4gc2VsZi5jYWNoZToKICAgICAgICAg
ICAgcmV0dXJuIE5vbmUKICAgICAgICBzZWxmLmNhY2hlLm1vdmVfdG9fZW5kKGtleSkKICAgICAg
ICByZXR1cm4gc2VsZi5jYWNoZVtrZXldCgogICAgZGVmIHB1dChzZWxmLCBrZXksIHZhbHVlKToK
ICAgICAgICBpZiBrZXkgaW4gc2VsZi5jYWNoZToKICAgICAgICAgICAgc2VsZi5jYWNoZS5tb3Zl
X3RvX2VuZChrZXkpCiAgICAgICAgc2VsZi5jYWNoZVtrZXldID0gdmFsdWUKICAgICAgICBpZiBs
ZW4oc2VsZi5jYWNoZSkgPiBzZWxmLm1heHNpemU6CiAgICAgICAgICAgIHNlbGYuY2FjaGUucG9w
aXRlbShsYXN0PUZhbHNlKQoKICAgIGRlZiBpbnZhbGlkYXRlKHNlbGYsIHBhdHRlcm49Tm9uZSk6
CiAgICAgICAgIiIi0JjQvdCy0LDQu9C40LTQsNGG0LjRjyDQutC10YjQsCDQv9C+INC/0LDRgtGC
0LXRgNC90YMiIiIKICAgICAgICBpZiBwYXR0ZXJuIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYu
Y2FjaGUuY2xlYXIoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGtleXNfdG9fcmVtb3ZlID0g
W2sgZm9yIGsgaW4gc2VsZi5jYWNoZS5rZXlzKCkgaWYgcGF0dGVybiBpbiBrXQogICAgICAgICAg
ICBmb3Iga2V5IGluIGtleXNfdG9fcmVtb3ZlOgogICAgICAgICAgICAgICAgZGVsIHNlbGYuY2Fj
aGVba2V5XQoKCmNsYXNzIFMzTWFuYWdlcjoKICAgICIiItCc0LXQvdC10LTQttC10YAg0LTQu9GP
INGA0LDQsdC+0YLRiyDRgSBTMyBDZXBoIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGVuZHBv
aW50X2NvbmZpZyk6CiAgICAgICAgc2VsZi5lbmRwb2ludF9uYW1lID0gZW5kcG9pbnRfY29uZmln
WyduYW1lJ10KICAgICAgICBzZWxmLmVuZHBvaW50X3VybCA9IGVuZHBvaW50X2NvbmZpZ1sndXJs
J10KICAgICAgICBzZWxmLmFjY2Vzc19rZXkgPSBlbmRwb2ludF9jb25maWdbJ2FjY2Vzc19rZXkn
XQogICAgICAgIHNlbGYuc2VjcmV0X2tleSA9IGVuZHBvaW50X2NvbmZpZ1snc2VjcmV0X2tleSdd
CgogICAgICAgIHNlbGYuc2VjcmV0X2tleSA9IGVuZHBvaW50X2NvbmZpZ1snc2VjcmV0X2tleSdd
CiAgICAgICAgIyDQodGC0YDQvtCz0LjQuSDRgdC/0LjRgdC+0LogKNC10YHQu9C4INC30LDQtNCw
0L0gLSBBUEkg0L3QtSDQstGL0LfRi9Cy0LDQtdC8KQogICAgICAgIHNlbGYuc3RhdGljX2J1Y2tl
dHMgPSBlbmRwb2ludF9jb25maWcuZ2V0KCdidWNrZXRzJywgW10pCiAgICAgICAgIyDQlNC+0L/Q
vtC70L3QuNGC0LXQu9GM0L3Ri9C5INGB0L/QuNGB0L7QuiAo0LTQvtCx0LDQstC70Y/QtdC8INC6
INGA0LXQt9GD0LvRjNGC0LDRgtCw0LwgQVBJKQogICAgICAgIHNlbGYuZXh0cmFfYnVja2V0cyA9
IGVuZHBvaW50X2NvbmZpZy5nZXQoJ2V4dHJhX2J1Y2tldHMnLCBbXSkKCiAgICAgICAgc2VsZi5p
c19jb25uZWN0ZWQgPSBGYWxzZQogICAgICAgIHNlbGYuY29ubmVjdGlvbl9lcnJvciA9IE5vbmUK
ICAgICAgICBzZWxmLnZlcnNpb25pbmdfc3RhdHVzX2NhY2hlID0ge30KICAgICAgICBzZWxmLnMz
X25lZWRzX3JlZnJlc2ggPSBUcnVlCgogICAgICAgIHNlbGYuYnVja2V0X2xpc3RfY2FjaGUgPSBO
b25lCiAgICAgICAgc2VsZi5idWNrZXRfbGlzdF9jYWNoZV90cyA9IE5vbmUKCiAgICAgICAgIyDQ
mtC10Ygg0LTQu9GPINGB0L/QuNGB0LrQvtCyINC+0LHRitC10LrRgtC+0LIKICAgICAgICBzZWxm
Lm9iamVjdF9jYWNoZSA9IExSVUNhY2hlKG1heHNpemU9MTAwMCkKICAgICAgICBzZWxmLmJ1Y2tl
dF9jYWNoZSA9IExSVUNhY2hlKG1heHNpemU9MTApCgogICAgICAgICMg0JHQq9Ch0KLQoNCQ0K8g
0J/QoNCe0JLQldCg0JrQkDog0LTQvtGB0YLRg9C/0LXQvSDQu9C4IGVuZHBvaW50INC/0LXRgNC1
0LQg0YHQvtC30LTQsNC90LjQtdC8INC60LvQuNC10L3RgtCwCiAgICAgICAgY2FuX2Nvbm5lY3Qs
IGVycm9yX21zZyA9IGNoZWNrX3MzX2VuZHBvaW50X2Nvbm5lY3Rpdml0eShzZWxmLmVuZHBvaW50
X3VybCwgdGltZW91dD0yKQoKICAgICAgICBjYV9idW5kbGUgPSBlbmRwb2ludF9jb25maWcuZ2V0
KCJjYV9idW5kbGUiKQoKICAgICAgICBpZiBub3QgY2FuX2Nvbm5lY3Q6CiAgICAgICAgICAgIHNl
bGYuczNfY2xpZW50ID0gTm9uZQogICAgICAgICAgICBzZWxmLmNvbm5lY3Rpb25fZXJyb3IgPSBl
cnJvcl9tc2cKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHRyeToKICAgICAgICAgICAgIyDQ
ndCw0YHRgtGA0L7QudC60LAg0LrQvtGA0L7RgtC60LjRhSDRgtCw0LnQvNCw0YPRgtC+0LIg0LTQ
u9GPIGJvdG8zCiAgICAgICAgICAgIGNvbmZpZyA9IENvbmZpZygKICAgICAgICAgICAgICAgIGNv
bm5lY3RfdGltZW91dD0zLAogICAgICAgICAgICAgICAgcmVhZF90aW1lb3V0PTEwLAogICAgICAg
ICAgICAgICAgcmV0cmllcz17J21heF9hdHRlbXB0cyc6IDF9ICAjINCi0L7Qu9GM0LrQviAxINC/
0L7Qv9GL0YLQutCwCiAgICAgICAgICAgICkKCiAgICAgICAgICAgIHNlbGYuczNfY2xpZW50ID0g
Ym90bzMuY2xpZW50KAogICAgICAgICAgICAgICAgJ3MzJywKICAgICAgICAgICAgICAgIGVuZHBv
aW50X3VybD1zZWxmLmVuZHBvaW50X3VybCwKICAgICAgICAgICAgICAgIGF3c19hY2Nlc3Nfa2V5
X2lkPXNlbGYuYWNjZXNzX2tleSwKICAgICAgICAgICAgICAgIGF3c19zZWNyZXRfYWNjZXNzX2tl
eT1zZWxmLnNlY3JldF9rZXksCiAgICAgICAgICAgICAgICBjb25maWc9Y29uZmlnLAogICAgICAg
ICAgICAgICAgdmVyaWZ5PWNhX2J1bmRsZSBpZiBjYV9idW5kbGUgZWxzZSBUcnVlLAogICAgICAg
ICAgICApCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLnMz
X2NsaWVudCA9IE5vbmUKICAgICAgICAgICAgc2VsZi5jb25uZWN0aW9uX2Vycm9yID0gc3RyKGUp
CgogICAgZGVmIF9yZWFkX2J1Y2tldF9zZWVkc19maWxlKHNlbGYsIGZpbGVwYXRoPSJzM19idWNr
ZXRzLnR4dCIpOgogICAgICAgICMg0KTQvtGA0LzQsNGCOiAiPGJ1Y2tldD4gPGVwb2NoPiIg0LjQ
u9C4INC/0YDQvtGB0YLQviAiPGJ1Y2tldD4iCiAgICAgICAgIyDQmtC+0LzQvNC10L3RgtCw0YDQ
uNC4OiDRgdGC0YDQvtC60LAg0L3QsNGH0LjQvdCw0LXRgtGB0Y8g0YEgJyMnCiAgICAgICAgcmVz
dWx0ID0ge30KICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhm
aWxlcGF0aCk6CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgICAgICAgIHdpdGgg
b3BlbihmaWxlcGF0aCwgInIiLCBlbmNvZGluZz0idXRmLTgiLCBlcnJvcnM9Imlnbm9yZSIpIGFz
IGY6CiAgICAgICAgICAgICAgICBmb3IgbGluZSBpbiBmOgogICAgICAgICAgICAgICAgICAgIHMg
PSBsaW5lLnN0cmlwKCkKICAgICAgICAgICAgICAgICAgICBpZiBub3QgcyBvciBzLnN0YXJ0c3dp
dGgoIiMiKToKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAg
ICAgICBwYXJ0cyA9IHMuc3BsaXQoKQogICAgICAgICAgICAgICAgICAgIG5hbWUgPSBwYXJ0c1sw
XQogICAgICAgICAgICAgICAgICAgIGVwb2NoID0gTm9uZQogICAgICAgICAgICAgICAgICAgIGlm
IGxlbihwYXJ0cykgPj0gMjoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZXBvY2ggPSBpbnQocGFydHNbMV0pCiAgICAgICAgICAgICAgICAg
ICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXBv
Y2ggPSBOb25lCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W25hbWVdID0gZXBvY2gKICAgICAg
ICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgICAgcmV0
dXJuIHJlc3VsdAoKICAgIGRlZiBfYnVja2V0X3JlYWRhYmxlKHNlbGYsIGJ1Y2tldG5hbWUpOgog
ICAgICAgICMg0JzQuNC90LjQvNCw0LvRjNC90LDRjyDQv9GA0L7QstC10YDQutCwICLQvNC+0LPR
gyDRh9C40YLQsNGC0Ywg0YHQvtC00LXRgNC20LjQvNC+0LUiOiBsaXN0X29iamVjdHNfdjIoTWF4
S2V5cz0xKQogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5zM19jbGllbnQubGlzdF9vYmpl
Y3RzX3YyKEJ1Y2tldD1idWNrZXRuYW1lLCBNYXhLZXlzPTEpCiAgICAgICAgICAgIHJldHVybiBU
cnVlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgog
ICAgZGVmIF9nZXRfYnVja2V0X293bmVyX3N0cihzZWxmLCBidWNrZXRuYW1lKToKICAgICAgICAj
INCf0YvRgtCw0LXQvNGB0Y8g0L/QvtC70YPRh9C40YLRjCBvd25lciAo0LzQvtC20LXRgiDRgtGA
0LXQsdC+0LLQsNGC0Ywg0LTQvtC/0L7Qu9C90LjRgtC10LvRjNC90YvRhSDQv9GA0LDQsikKICAg
ICAgICB0cnk6CiAgICAgICAgICAgIGFjbCA9IHNlbGYuczNfY2xpZW50LmdldF9idWNrZXRfYWNs
KEJ1Y2tldD1idWNrZXRuYW1lKQogICAgICAgICAgICBvd25lciA9IGFjbC5nZXQoIk93bmVyIiwg
e30pIGlmIGlzaW5zdGFuY2UoYWNsLCBkaWN0KSBlbHNlIHt9CiAgICAgICAgICAgICMg0J/Ri9GC
0LDQtdC80YHRjyDQstGL0YLQsNGJ0LjRgtGMINGH0YLQvi3RgtC+INGH0LXQu9C+0LLQtdC60L7R
h9C40YLQsNC10LzQvtC1CiAgICAgICAgICAgIGRuID0gb3duZXIuZ2V0KCJEaXNwbGF5TmFtZSIp
CiAgICAgICAgICAgIG9pZCA9IG93bmVyLmdldCgiSUQiKQogICAgICAgICAgICByZXR1cm4gZG4g
b3Igb2lkCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgcmV0dXJuIE5vbmUK
CiAgICBkZWYgbGlzdF9idWNrZXRzKHNlbGYsIGZvcmNlPUZhbHNlLCBzdGF0dXNfY2I9Tm9uZSk6
CiAgICAgICAgaWYgc2VsZi5zM19jbGllbnQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIFtd
CgogICAgICAgICMg0JXRgdC70Lgg0L3QtSBmb3JjZSDQuCDQtdGB0YLRjCDQutC10Ygg0Lgg0L3Q
tSDQvdGD0LbQtdC9INGA0LXRhNGA0LXRiCAtINC+0YLQtNCw0LXQvCDQutC10YgKICAgICAgICBp
ZiBub3QgZm9yY2UgYW5kIHNlbGYuYnVja2V0X2xpc3RfY2FjaGUgaXMgbm90IE5vbmUgYW5kIG5v
dCBzZWxmLnMzX25lZWRzX3JlZnJlc2g6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmJ1Y2tldF9s
aXN0X2NhY2hlCgogICAgICAgIGZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCgogICAgICAg
IGJ1Y2tldHMgPSBbXQoKICAgICAgICAjINCV0YHQu9C4INCyINC60L7QvdGE0LjQs9C1INGP0LLQ
vdC+INGD0LrQsNC30LDQvdGLINCx0LDQutC10YLRiywg0LjRgdC/0L7Qu9GM0LfRg9C10Lwg0LjR
hSDQuCDQndCVINC70LXQt9C10Lwg0LIgQVBJIGxpc3RfYnVja2V0cwogICAgICAgIGlmIHNlbGYu
c3RhdGljX2J1Y2tldHM6CiAgICAgICAgICAgICMg0KTQvtGA0LzQuNGA0YPQtdC8INGB0YLRgNGD
0LrRgtGD0YDRgywg0L/QvtGF0L7QttGD0Y4g0L3QsCDQvtGC0LLQtdGCIGJvdG8zCiAgICAgICAg
ICAgICMg0JzRiyDQvdC1INC30L3QsNC10LwgQ3JlYXRpb25EYXRlLCDRgdGC0LDQstC40Lwg0YLQ
tdC60YPRidC10LUg0LjQu9C4IE5vbmUKICAgICAgICAgICAgYnVja2V0cyA9IFt7J05hbWUnOiBu
YW1lLCAnQ3JlYXRpb25EYXRlJzogTm9uZX0gZm9yIG5hbWUgaW4gc2VsZi5zdGF0aWNfYnVja2V0
c10KICAgICAgICAgICAgc2VsZi5pc19jb25uZWN0ZWQgPSBUcnVlICAjINCh0YfQuNGC0LDQtdC8
INGH0YLQviDQv9C+0LTQutC70Y7Rh9C10L3Riywg0YDQsNC3INC60LvQuNC10L3RgiDRgdC+0LfQ
tNCw0L0KICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAg
ICAgICAgcmVzcCA9IHNlbGYuczNfY2xpZW50Lmxpc3RfYnVja2V0cygpCiAgICAgICAgICAgICAg
ICBzZWxmLmlzX2Nvbm5lY3RlZCA9IFRydWUKICAgICAgICAgICAgICAgIGJ1Y2tldHMgPSByZXNw
LmdldCgiQnVja2V0cyIsIFtdKSBpZiBpc2luc3RhbmNlKHJlc3AsIGRpY3QpIGVsc2UgW10KICAg
ICAgICAgICAgZXhjZXB0IChDbGllbnRFcnJvciwgRXhjZXB0aW9uKSBhcyBlOgogICAgICAgICAg
ICAgICAgc2VsZi5pc19jb25uZWN0ZWQgPSBGYWxzZQogICAgICAgICAgICAgICAgc2VsZi5jb25u
ZWN0aW9uX2Vycm9yID0gc3RyKGUpCiAgICAgICAgICAgICAgICBidWNrZXRzID0gW10KCiAgICAg
ICAgaWYgc2VsZi5leHRyYV9idWNrZXRzOgogICAgICAgICAgICAjINCh0L7Qt9C00LDQtdC8IHNl
dCDQuNC80LXQvSwg0YfRgtC+0LHRiyDQvdC1INC00L7QsdCw0LLQu9GP0YLRjCDQtNGD0LHQu9C4
0LrQsNGC0YssINC10YHQu9C4INCx0LDQutC10YIg0YPQttC1INC/0YDQuNGI0LXQuyDQuNC3IEFQ
SQogICAgICAgICAgICBleGlzdGluZ19uYW1lcyA9IHtiLmdldCgnTmFtZScpIGZvciBiIGluIGJ1
Y2tldHMgaWYgaXNpbnN0YW5jZShiLCBkaWN0KX0KCiAgICAgICAgICAgIGZvciBuYW1lIGluIHNl
bGYuZXh0cmFfYnVja2V0czoKICAgICAgICAgICAgICAgIGlmIG5hbWUgbm90IGluIGV4aXN0aW5n
X25hbWVzOgogICAgICAgICAgICAgICAgICAgICMg0JTQvtCx0LDQstC70Y/QtdC8ICLQuNGB0LrR
g9GB0YHRgtCy0LXQvdC90YPRjiIg0LfQsNC/0LjRgdGMLCDQutCw0Log0LHRg9C00YLQviDQvtC9
0LAg0L/RgNC40YjQu9CwINC+0YIgQVdTCiAgICAgICAgICAgICAgICAgICAgYnVja2V0cy5hcHBl
bmQoeydOYW1lJzogbmFtZSwgJ0NyZWF0aW9uRGF0ZSc6IE5vbmV9KQoKICAgICAgICBmb3IgYiBp
biBidWNrZXRzOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBuYW1lID0gYi5nZXQo
Ik5hbWUiKSBpZiBpc2luc3RhbmNlKGIsIGRpY3QpIGVsc2UgTm9uZQogICAgICAgICAgICAgICAg
aWYgbm90IG5hbWU6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAg
ICBpZiBzdGF0dXNfY2I6CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzX2NiKGYiR2V0IG93bmVy
OiB7bmFtZX0iKQoKICAgICAgICAgICAgICAgIG93bmVyID0gc2VsZi5fZ2V0X2J1Y2tldF9vd25l
cl9zdHIobmFtZSkKICAgICAgICAgICAgICAgIGlmIG93bmVyOgogICAgICAgICAgICAgICAgICAg
IGJbIl9Pd25lckhpbnQiXSA9IG93bmVyCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAg
ICAgICAgICAgICAgICBwYXNzCgogICAgICAgICMg0JjQvdC00LXQutGBINGD0LbQtSDQvdCw0LnQ
tNC10L3QvdGL0YUKICAgICAgICBleGlzdGluZyA9IHtiLmdldCgiTmFtZSIpIGZvciBiIGluIGJ1
Y2tldHMgaWYgaXNpbnN0YW5jZShiLCBkaWN0KX0KCiAgICAgICAgZm9yIGksIGIgaW4gZW51bWVy
YXRlKGJ1Y2tldHMsIDEpOgogICAgICAgICAgICBuYW1lID0gYi5nZXQoIk5hbWUiKQogICAgICAg
ICAgICBpZiBub3QgbmFtZToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlm
IHN0YXR1c19jYjoKICAgICAgICAgICAgICAgIHN0YXR1c19jYihmIlZlcnNpb25pbmc6IHtpfS97
bGVuKGJ1Y2tldHMpfSB7bmFtZX0iKQoKICAgICAgICAgICAgdnMgPSBzZWxmLmdldF92ZXJzaW9u
aW5nX3N0YXR1c19jYWNoZWQobmFtZSkgICMg0LfQsNC/0L7Qu9C90LjRgiBzZWxmLnZlcnNpb25p
bmdfc3RhdHVzX2NhY2hlCiAgICAgICAgICAgIGJbIl9WZXJzaW9uaW5nU3RhdHVzIl0gPSB2cwog
ICAgICAgICAgICBpZiB2cyA9PSAiRW5hYmxlZCI6CiAgICAgICAgICAgICAgICBiWyJfVmVyc2lv
bmluZ01hcmsiXSA9ICJWIgogICAgICAgICAgICBlbGlmIHZzID09ICJTdXNwZW5kZWQiOgogICAg
ICAgICAgICAgICAgYlsiX1ZlcnNpb25pbmdNYXJrIl0gPSAiUyIKICAgICAgICAgICAgZWxzZToK
ICAgICAgICAgICAgICAgIGJbIl9WZXJzaW9uaW5nTWFyayJdID0gIiAiCgogICAgICAgIHNlbGYu
YnVja2V0X2xpc3RfY2FjaGUgPSBidWNrZXRzCiAgICAgICAgc2VsZi5idWNrZXRfbGlzdF9jYWNo
ZV90cyA9IGRhdGV0aW1lLm5vdygpCiAgICAgICAgc2VsZi5zM19uZWVkc19yZWZyZXNoID0gRmFs
c2UKCiAgICAgICAgcmV0dXJuIGJ1Y2tldHMKCiAgICBkZWYgY3JlYXRlX2J1Y2tldChzZWxmLCBi
dWNrZXRfbmFtZSk6CiAgICAgICAgaWYgc2VsZi5zM19jbGllbnQgaXMgTm9uZToKICAgICAgICAg
ICAgcmV0dXJuIEZhbHNlCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnMzX2NsaWVudC5j
cmVhdGVfYnVja2V0KEJ1Y2tldD1idWNrZXRfbmFtZSkKICAgICAgICAgICAgcmV0dXJuIFRydWUK
ICAgICAgICBleGNlcHQgKENsaWVudEVycm9yLCBFeGNlcHRpb24pOgogICAgICAgICAgICByZXR1
cm4gRmFsc2UKCiAgICBkZWYgZGVsZXRlX2J1Y2tldChzZWxmLCBidWNrZXRfbmFtZSk6CiAgICAg
ICAgaWYgc2VsZi5zM19jbGllbnQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAg
ICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnMzX2NsaWVudC5kZWxldGVfYnVja2V0KEJ1Y2tl
dD1idWNrZXRfbmFtZSkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQgKENs
aWVudEVycm9yLCBFeGNlcHRpb24pOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYg
bGlzdF9vYmplY3RzKHNlbGYsIGJ1Y2tldF9uYW1lLCBwcmVmaXg9JycpOgogICAgICAgIGlmIHNl
bGYuczNfY2xpZW50IGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBbXSwgW10KICAgICAgICB0
cnk6CiAgICAgICAgICAgIHBhZ2luYXRvciA9IHNlbGYuczNfY2xpZW50LmdldF9wYWdpbmF0b3Io
J2xpc3Rfb2JqZWN0c192MicpCiAgICAgICAgICAgIHBhZ2VzID0gcGFnaW5hdG9yLnBhZ2luYXRl
KEJ1Y2tldD1idWNrZXRfbmFtZSwgUHJlZml4PXByZWZpeCwgRGVsaW1pdGVyPScvJykKCiAgICAg
ICAgICAgIGZvbGRlcnMgPSBbXQogICAgICAgICAgICBmaWxlcyA9IFtdCgogICAgICAgICAgICBm
b3IgcGFnZSBpbiBwYWdlczoKICAgICAgICAgICAgICAgIGlmICdDb21tb25QcmVmaXhlcycgaW4g
cGFnZToKICAgICAgICAgICAgICAgICAgICBmb3Igb2JqIGluIHBhZ2VbJ0NvbW1vblByZWZpeGVz
J106CiAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlcnMuYXBwZW5kKHsnS2V5Jzogb2JqWydQ
cmVmaXgnXX0pCgogICAgICAgICAgICAgICAgaWYgJ0NvbnRlbnRzJyBpbiBwYWdlOgogICAgICAg
ICAgICAgICAgICAgIGZvciBvYmogaW4gcGFnZVsnQ29udGVudHMnXToKICAgICAgICAgICAgICAg
ICAgICAgICAgaWYgbm90IG9ialsnS2V5J10uZW5kc3dpdGgoJy8nKSBhbmQgb2JqWydLZXknXSAh
PSBwcmVmaXg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlcy5hcHBlbmQob2JqKQoK
ICAgICAgICAgICAgcmV0dXJuIGZvbGRlcnMsIGZpbGVzCiAgICAgICAgZXhjZXB0IChDbGllbnRF
cnJvciwgRXhjZXB0aW9uKToKICAgICAgICAgICAgcmV0dXJuIFtdLCBbXQoKICAgIGRlZiBsaXN0
X2FsbF9vYmplY3RzKHNlbGYsIGJ1Y2tldF9uYW1lLCBwcmVmaXg9JycpOgogICAgICAgIGlmIHNl
bGYuczNfY2xpZW50IGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBbXQogICAgICAgIHRyeToK
ICAgICAgICAgICAgcGFnaW5hdG9yID0gc2VsZi5zM19jbGllbnQuZ2V0X3BhZ2luYXRvcignbGlz
dF9vYmplY3RzX3YyJykKICAgICAgICAgICAgcGFnZXMgPSBwYWdpbmF0b3IucGFnaW5hdGUoQnVj
a2V0PWJ1Y2tldF9uYW1lLCBQcmVmaXg9cHJlZml4KQoKICAgICAgICAgICAgb2JqZWN0cyA9IFtd
CiAgICAgICAgICAgIGZvciBwYWdlIGluIHBhZ2VzOgogICAgICAgICAgICAgICAgaWYgJ0NvbnRl
bnRzJyBpbiBwYWdlOgogICAgICAgICAgICAgICAgICAgIGZvciBvYmogaW4gcGFnZVsnQ29udGVu
dHMnXToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgb2JqWydLZXknXSAhPSBwcmVmaXg6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RzLmFwcGVuZChvYmopCgogICAgICAgICAg
ICByZXR1cm4gb2JqZWN0cwogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJyb3IsIEV4Y2VwdGlvbik6
CiAgICAgICAgICAgIHJldHVybiBbXQoKICAgIGRlZiBjb3VudF9vYmplY3RzKHNlbGYsIGJ1Y2tl
dF9uYW1lLCBwcmVmaXg9JycsIHByb2dyZXNzX2NiPU5vbmUsIGxvb3A9Tm9uZSk6CiAgICAgICAg
IiIi0JHRi9GB0YLRgNGL0Lkg0L/QvtC00YHRh9C10YIg0LrQvtC70LjRh9C10YHRgtCy0LAg0L7Q
sdGK0LXQutGC0L7QsiDQsdC10Lcg0LfQsNCz0YDRg9C30LrQuCDQtNCw0L3QvdGL0YUKCiAgICAg
ICAgQXJnczoKICAgICAgICAgICAgYnVja2V0X25hbWU6INC40LzRjyDQsdCw0LrQtdGC0LAKICAg
ICAgICAgICAgcHJlZml4OiDQv9GA0LXRhNC40LrRgSDQtNC70Y8g0YTQuNC70YzRgtGA0LDRhtC4
0LgKICAgICAgICAgICAgcHJvZ3Jlc3NfY2I6IGNhbGxiYWNrINGE0YPQvdC60YbQuNGPINC00LvR
jyDQvtCx0L3QvtCy0LvQtdC90LjRjyDRgtC10LrRgdGC0LAKICAgICAgICAgICAgbG9vcDogdXJ3
aWQgbWFpbiBsb29wINC00LvRjyDQv9GA0LjQvdGD0LTQuNGC0LXQu9GM0L3QvtC5INC+0YLRgNC4
0YHQvtCy0LrQuAogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYuczNfY2xpZW50IGlzIE5vbmU6
CiAgICAgICAgICAgIHJldHVybiBOb25lLCBOb25lCgogICAgICAgICMg0J/RgNC+0LLQtdGA0Y/Q
tdC8INC60LXRiAogICAgICAgIGNhY2hlX2tleSA9IGYiY291bnQ6e2J1Y2tldF9uYW1lfTp7cHJl
Zml4fSIKICAgICAgICBjYWNoZWQgPSBzZWxmLm9iamVjdF9jYWNoZS5nZXQoY2FjaGVfa2V5KQog
ICAgICAgIGlmIGNhY2hlZCBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmV0dXJuIGNhY2hlZAoK
ICAgICAgICB0cnk6CiAgICAgICAgICAgIHRvdGFsX29iamVjdHMgPSAwCiAgICAgICAgICAgIHRv
dGFsX3NpemUgPSAwCgogICAgICAgICAgICBwYWdpbmF0b3IgPSBzZWxmLnMzX2NsaWVudC5nZXRf
cGFnaW5hdG9yKCdsaXN0X29iamVjdHNfdjInKQogICAgICAgICAgICBwYWdlcyA9IHBhZ2luYXRv
ci5wYWdpbmF0ZShCdWNrZXQ9YnVja2V0X25hbWUsIFByZWZpeD1wcmVmaXgpCgogICAgICAgICAg
ICBmb3IgcGFnZSBpbiBwYWdlczoKICAgICAgICAgICAgICAgIGlmICdDb250ZW50cycgaW4gcGFn
ZToKICAgICAgICAgICAgICAgICAgICB0b3RhbF9vYmplY3RzICs9IGxlbihwYWdlWydDb250ZW50
cyddKQogICAgICAgICAgICAgICAgICAgIHRvdGFsX3NpemUgKz0gc3VtKG9iai5nZXQoJ1NpemUn
LCAwKSBmb3Igb2JqIGluIHBhZ2VbJ0NvbnRlbnRzJ10pCgogICAgICAgICAgICAgICAgICAgICMg
LS0tINCS0YHRgtCw0LLQutCwINC00LvRjyDQvtCx0L3QvtCy0LvQtdC90LjRjyBVSSAtLS0KICAg
ICAgICAgICAgICAgICAgICBpZiBwcm9ncmVzc19jYiBhbmQgbG9vcDoKICAgICAgICAgICAgICAg
ICAgICAgICAgIyAxLiDQntCx0L3QvtCy0LvRj9C10Lwg0YLQtdC60YHRggogICAgICAgICAgICAg
ICAgICAgICAgICBwcm9ncmVzc19jYih0b3RhbF9vYmplY3RzLCB0b3RhbF9zaXplKQogICAgICAg
ICAgICAgICAgICAgICAgICAjIDIuINCf0YDQuNC90YPQtNC40YLQtdC70YzQvdC+INGA0LjRgdGD
0LXQvCDRjdC60YDQsNC9CiAgICAgICAgICAgICAgICAgICAgICAgIGxvb3AuZHJhd19zY3JlZW4o
KQogICAgICAgICAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
CgogICAgICAgICAgICByZXN1bHQgPSAodG90YWxfb2JqZWN0cywgdG90YWxfc2l6ZSkKICAgICAg
ICAgICAgc2VsZi5vYmplY3RfY2FjaGUucHV0KGNhY2hlX2tleSwgcmVzdWx0KQogICAgICAgICAg
ICByZXR1cm4gcmVzdWx0CgogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJyb3IsIEV4Y2VwdGlvbik6
CiAgICAgICAgICAgIHJldHVybiBOb25lLCBOb25lCgogICAgZGVmIGxpc3Rfb2JqZWN0c19sYXp5
KHNlbGYsIGJ1Y2tldF9uYW1lLCBwcmVmaXg9JycsIHBhZ2Vfc2l6ZT0xMDAwLCB1c2VfdmVyc2lv
bmluZz1GYWxzZSk6CiAgICAgICAgIiIiCiAgICAgICAg0JPQtdC90LXRgNCw0YLQvtGAINC00LvR
jyDQu9C10L3QuNCy0L7QuSAo0L/QvtGB0YLRgNCw0L3QuNGH0L3QvtC5KSDQt9Cw0LPRgNGD0LfQ
utC4INC+0LHRitC10LrRgtC+0LIg0LjQtyBTMy4KICAgICAgICDQn9C+0LfQstC+0LvRj9C10YIg
0LjRgtC10YDQuNGA0L7QstCw0YLRjNGB0Y8g0L/QviDRgdC+0LTQtdGA0LbQuNC80L7QvNGDINCx
0LDQutC10YLQsCDQsdC10Lcg0LfQsNCz0YDRg9C30LrQuCDQstGB0LXQs9C+INGB0L/QuNGB0LrQ
sCDQsiDQv9Cw0LzRj9GC0YwuCgogICAgICAgINCQ0YDQs9GD0LzQtdC90YLRizoKICAgICAgICAg
ICAgYnVja2V0X25hbWUgKHN0cik6INCY0LzRjyBTMyDQsdCw0LrQtdGC0LAuCiAgICAgICAgICAg
IHByZWZpeCAoc3RyKTog0J/RgNC10YTQuNC60YEgKNCy0LjRgNGC0YPQsNC70YzQvdCw0Y8g0L/Q
sNC/0LrQsCkg0LTQu9GPINGE0LjQu9GM0YLRgNCw0YbQuNC4INC+0LHRitC10LrRgtC+0LIuCiAg
ICAgICAgICAgIHBhZ2Vfc2l6ZSAoaW50KTog0JrQvtC70LjRh9C10YHRgtCy0L4g0L7QsdGK0LXQ
utGC0L7QsiDQsiDQvtC00L3QvtC8INC30LDQv9GA0L7RgdC1INC6IEFQSSAoTWF4S2V5cykuCiAg
ICAgICAgICAgIHVzZV92ZXJzaW9uaW5nIChib29sKTog0JXRgdC70LggVHJ1ZSwg0LjRgdC/0L7Q
u9GM0LfRg9C10YIgQVBJIGxpc3Rfb2JqZWN0X3ZlcnNpb25zINC00LvRjyDQv9C+0LvRg9GH0LXQ
vdC40Y8g0LLRgdC10YUg0LLQtdGA0YHQuNC5INC+0LHRitC10LrRgtC+0LIuCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAg0JXRgdC70LggRmFsc2UsINC40YHQv9C+0LvRjNC30YPQ
tdGCINGB0YLQsNC90LTQsNGA0YLQvdGL0LkgbGlzdF9vYmplY3RzX3YyLgoKICAgICAgICDQktC+
0LfQstGA0LDRidCw0LXRgjoKICAgICAgICAgICAgR2VuZXJhdG9yOiDQmNGC0LXRgNCw0YLQvtGA
LCDQstC+0LfQstGA0LDRidCw0Y7RidC40Lkg0YHRgtGA0LDQvdC40YbRiyAo0L7RgtCy0LXRgtGL
IEFQSSkg0YEg0L7QsdGK0LXQutGC0LDQvNC4INC40LvQuCDQstC10YDRgdC40Y/QvNC4LgogICAg
ICAgICIiIgogICAgICAgIGlmIHNlbGYuczNfY2xpZW50IGlzIE5vbmU6CiAgICAgICAgICAgIHlp
ZWxkIFtdLCBbXQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgdHJ5OgogICAgICAgICAgICBp
ZiBub3QgdXNlX3ZlcnNpb25pbmc6CiAgICAgICAgICAgICAgICAjINCh0KLQkNCd0JTQkNCg0KLQ
ndCr0Jkg0KDQldCW0JjQnCAo0LHRi9GB0YLRgNGL0LksINCx0LXQtyDQstC10YDRgdC40LkpCiAg
ICAgICAgICAgICAgICBwYWdpbmF0b3IgPSBzZWxmLnMzX2NsaWVudC5nZXRfcGFnaW5hdG9yKCds
aXN0X29iamVjdHNfdjInKQogICAgICAgICAgICAgICAgcGFnZV9pdGVyYXRvciA9IHBhZ2luYXRv
ci5wYWdpbmF0ZSgKICAgICAgICAgICAgICAgICAgICBCdWNrZXQ9YnVja2V0X25hbWUsCiAgICAg
ICAgICAgICAgICAgICAgUHJlZml4PXByZWZpeCwKICAgICAgICAgICAgICAgICAgICBEZWxpbWl0
ZXI9Jy8nLAogICAgICAgICAgICAgICAgICAgIFBhZ2luYXRpb25Db25maWc9eydQYWdlU2l6ZSc6
IHBhZ2Vfc2l6ZX0KICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICBmb3IgcGFnZSBp
biBwYWdlX2l0ZXJhdG9yOgogICAgICAgICAgICAgICAgICAgIGZvbGRlcnMgPSBbXQogICAgICAg
ICAgICAgICAgICAgIGZpbGVzID0gW10KICAgICAgICAgICAgICAgICAgICBpZiAnQ29tbW9uUHJl
Zml4ZXMnIGluIHBhZ2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBvYmogaW4gcGFnZVsn
Q29tbW9uUHJlZml4ZXMnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlcnMuYXBw
ZW5kKHsnS2V5Jzogb2JqWydQcmVmaXgnXX0pCiAgICAgICAgICAgICAgICAgICAgaWYgJ0NvbnRl
bnRzJyBpbiBwYWdlOgogICAgICAgICAgICAgICAgICAgICAgICBmb3Igb2JqIGluIHBhZ2VbJ0Nv
bnRlbnRzJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3Qgb2JqWydLZXknXS5l
bmRzd2l0aCgnLycpIGFuZCBvYmpbJ0tleSddICE9IHByZWZpeDoKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAjINCU0LvRjyDRgdC+0LLQvNC10YHRgtC40LzQvtGB0YLQuCDRgdGC0LDQ
stC40LwgMSDQstC10YDRgdC40Y4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpb
J3ZlcnNpb25fY291bnQnXSA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxl
cy5hcHBlbmQob2JqKQogICAgICAgICAgICAgICAgICAgIHlpZWxkIGZvbGRlcnMsIGZpbGVzCgog
ICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIyDQoNCV0JbQmNCcINChINCf0J7QlNCh
0KfQldCi0J7QnCDQktCV0KDQodCY0JkgKNC80LXQtNC70LXQvdC90LXQtSwg0LDQs9GA0LXQs9Cw
0YbQuNGPINC00LDQvdC90YvRhSkKICAgICAgICAgICAgICAgIHBhZ2luYXRvciA9IHNlbGYuczNf
Y2xpZW50LmdldF9wYWdpbmF0b3IoJ2xpc3Rfb2JqZWN0X3ZlcnNpb25zJykKICAgICAgICAgICAg
ICAgIHBhZ2VfaXRlcmF0b3IgPSBwYWdpbmF0b3IucGFnaW5hdGUoCiAgICAgICAgICAgICAgICAg
ICAgQnVja2V0PWJ1Y2tldF9uYW1lLAogICAgICAgICAgICAgICAgICAgIFByZWZpeD1wcmVmaXgs
CiAgICAgICAgICAgICAgICAgICAgRGVsaW1pdGVyPScvJywKICAgICAgICAgICAgICAgICAgICBQ
YWdpbmF0aW9uQ29uZmlnPXsnUGFnZVNpemUnOiBwYWdlX3NpemV9CiAgICAgICAgICAgICAgICAp
CgogICAgICAgICAgICAgICAgZm9yIHBhZ2UgaW4gcGFnZV9pdGVyYXRvcjoKICAgICAgICAgICAg
ICAgICAgICBmb2xkZXJzID0gW10KICAgICAgICAgICAgICAgICAgICAjINCh0LvQvtCy0LDRgNGM
INC00LvRjyDQsNCz0YDQtdCz0LDRhtC40Lgg0LLQtdGA0YHQuNC5INC/0L4g0LrQu9GO0YfRgyDR
hNCw0LnQu9CwCiAgICAgICAgICAgICAgICAgICAgIyBLZXkgLT4ge09iakRpY3QsIGNvdW50fQog
ICAgICAgICAgICAgICAgICAgIGZpbGVzX21hcCA9IE9yZGVyZWREaWN0KCkKCiAgICAgICAgICAg
ICAgICAgICAgaWYgJ0NvbW1vblByZWZpeGVzJyBpbiBwYWdlOgogICAgICAgICAgICAgICAgICAg
ICAgICBmb3Igb2JqIGluIHBhZ2VbJ0NvbW1vblByZWZpeGVzJ106CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBmb2xkZXJzLmFwcGVuZCh7J0tleSc6IG9ialsnUHJlZml4J119KQoKICAgICAg
ICAgICAgICAgICAgICAjINCe0LHRgNCw0LHQsNGC0YvQstCw0LXQvCDQstC10YDRgdC40LggKFZl
cnNpb25zKQogICAgICAgICAgICAgICAgICAgIGlmICdWZXJzaW9ucycgaW4gcGFnZToKICAgICAg
ICAgICAgICAgICAgICAgICAgZm9yIHYgaW4gcGFnZVsnVmVyc2lvbnMnXToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGtleSA9IHZbJ0tleSddCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBpZiBrZXkgPT0gcHJlZml4IG9yIGtleS5lbmRzd2l0aCgnLycpOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYg
a2V5IG5vdCBpbiBmaWxlc19tYXA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyDQ
odC+0YXRgNCw0L3Rj9C10Lwg0L/QtdGA0LLRg9GOINCy0YHRgtGA0LXRh9C10L3QvdGD0Y4g0LLQ
tdGA0YHQuNGOINC60LDQuiAi0L7RgdC90L7QstC90YPRjiIg0LTQu9GPINC+0YLQvtCx0YDQsNC2
0LXQvdC40Y8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIChTMyDQvtCx0YvRh9C9
0L4g0L7RgtC00LDQtdGCINC/0L7RgdC70LXQtNC90Y7RjiDQstC10YDRgdC40Y4g0L/QtdGA0LLQ
vtC5LCDQtdGB0LvQuCDQvtC90LAg0LXRgdGC0YwpCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZmlsZXNfbWFwW2tleV0gPSB2LmNvcHkoKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGZpbGVzX21hcFtrZXldWyd2ZXJzaW9uX2NvdW50J10gPSAwCgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZmlsZXNfbWFwW2tleV1bJ3ZlcnNpb25fY291bnQnXSArPSAxCgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIyDQldGB0LvQuCDRgtC10LrRg9GJ0LDRjyDQstC10YDR
gdC40Y8g0L/QvtC80LXRh9C10L3QsCDQutCw0LogTGF0ZXN0LCDQvtCx0L3QvtCy0LvRj9C10Lwg
0LzQtdGC0LDQtNCw0L3QvdGL0LUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjINGH0YLQ
vtCx0Ysg0L7RgtC+0LHRgNCw0LbQsNGC0Ywg0LDQutGC0YPQsNC70YzQvdGL0Lkg0YDQsNC30LzQ
tdGAINC4INC00LDRgtGDCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2LmdldCgnSXNM
YXRlc3QnKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlc19tYXBba2V5XS51
cGRhdGUodikKCiAgICAgICAgICAgICAgICAgICAgIyDQn9GA0LXQstGA0LDRidCw0LXQvCDQutCw
0YDRgtGDINC+0LHRgNCw0YLQvdC+INCyINGB0L/QuNGB0L7QuiDRhNCw0LnQu9C+0LIKICAgICAg
ICAgICAgICAgICAgICBmaWxlcyA9IGxpc3QoZmlsZXNfbWFwLnZhbHVlcygpKQogICAgICAgICAg
ICAgICAgICAgIHlpZWxkIGZvbGRlcnMsIGZpbGVzCgogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJy
b3IsIEV4Y2VwdGlvbik6CiAgICAgICAgICAgIHlpZWxkIFtdLCBbXQoKICAgIGRlZiBpbnZhbGlk
YXRlX2NhY2hlKHNlbGYsIGJ1Y2tldF9uYW1lPU5vbmUsIHByZWZpeD1Ob25lKToKICAgICAgICAi
IiLQmNC90LLQsNC70LjQtNCw0YbQuNGPINC60LXRiNCwINC/0L7RgdC70LUg0L7Qv9C10YDQsNGG
0LjQuSDQuNC30LzQtdC90LXQvdC40Y8iIiIKICAgICAgICBpZiBidWNrZXRfbmFtZSBpcyBOb25l
OgogICAgICAgICAgICBzZWxmLm9iamVjdF9jYWNoZS5pbnZhbGlkYXRlKCkKICAgICAgICAgICAg
c2VsZi5idWNrZXRfY2FjaGUuaW52YWxpZGF0ZSgpCiAgICAgICAgICAgIHNlbGYudmVyc2lvbmlu
Z19zdGF0dXNfY2FjaGUuY2xlYXIoKSAgIyDQntGH0LjRgdGC0LjRgtGMINC60LXRiCDQstC10YDR
gdC40L7QvdC40YDQvtCy0LDQvdC40Y8KICAgICAgICBlbHNlOgogICAgICAgICAgICBwYXR0ZXJu
ID0gZiJ7YnVja2V0X25hbWV9OiIKICAgICAgICAgICAgaWYgcHJlZml4OgogICAgICAgICAgICAg
ICAgcGF0dGVybiArPSBwcmVmaXgKICAgICAgICAgICAgc2VsZi5vYmplY3RfY2FjaGUuaW52YWxp
ZGF0ZShwYXR0ZXJuKQogICAgICAgICAgICAjINCf0YDQuCDQuNC30LzQtdC90LXQvdC40Y/RhSDQ
siDQsdCw0LrQtdGC0LUgLSDRgdCx0YDQvtGB0LjRgtGMINC10LPQviDRgdGC0LDRgtGD0YEg0LLQ
tdGA0YHQuNC+0L3QuNGA0L7QstCw0L3QuNGPCiAgICAgICAgICAgIGlmIGJ1Y2tldF9uYW1lIGlu
IHNlbGYudmVyc2lvbmluZ19zdGF0dXNfY2FjaGU6CiAgICAgICAgICAgICAgICBkZWwgc2VsZi52
ZXJzaW9uaW5nX3N0YXR1c19jYWNoZVtidWNrZXRfbmFtZV0KCiAgICBkZWYgb2JqZWN0X2V4aXN0
cyhzZWxmLCBidWNrZXRfbmFtZSwga2V5KToKICAgICAgICAiIiLQn9GA0L7QstC10YDQuNGC0Ywg
0YHRg9GJ0LXRgdGC0LLQvtCy0LDQvdC40LUg0L7QsdGK0LXQutGC0LAg0Lgg0LLQtdGA0L3Rg9GC
0Ywg0LXQs9C+INC80LXRgtCw0LTQsNC90L3Ri9C1IiIiCiAgICAgICAgaWYgc2VsZi5zM19jbGll
bnQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICB0cnk6CiAgICAgICAg
ICAgIHJlc3BvbnNlID0gc2VsZi5zM19jbGllbnQuaGVhZF9vYmplY3QoQnVja2V0PWJ1Y2tldF9u
YW1lLCBLZXk9a2V5KQogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgJ1NpemUn
OiByZXNwb25zZVsnQ29udGVudExlbmd0aCddLAogICAgICAgICAgICAgICAgJ0xhc3RNb2RpZmll
ZCc6IHJlc3BvbnNlWydMYXN0TW9kaWZpZWQnXQogICAgICAgICAgICB9CiAgICAgICAgZXhjZXB0
OgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBsaXN0X29iamVjdF92ZXJzaW9ucyhz
ZWxmLCBidWNrZXRfbmFtZSwga2V5KToKICAgICAgICAiIiLQn9C+0LvRg9GH0LjRgtGMINGB0L/Q
uNGB0L7QuiDQstC10YDRgdC40Lkg0L7QsdGK0LXQutGC0LAiIiIKICAgICAgICBpZiBzZWxmLnMz
X2NsaWVudCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gW10KCiAgICAgICAgdmVyc2lvbmlu
Z19zdGF0dXMgPSBzZWxmLmdldF92ZXJzaW9uaW5nX3N0YXR1c19jYWNoZWQoYnVja2V0X25hbWUp
CgogICAgICAgICMg0JXRgdC70Lgg0LLQtdGA0YHQuNC+0L3QuNGA0L7QstCw0L3QuNC1INC90LjQ
utC+0LPQtNCwINC90LUg0LLQutC70Y7Rh9Cw0LvQvtGB0YwgLSDQvdC1INC30LDQv9GA0LDRiNC4
0LLQsNC10LwKICAgICAgICBpZiB2ZXJzaW9uaW5nX3N0YXR1cyBpcyBOb25lIG9yIHZlcnNpb25p
bmdfc3RhdHVzID09ICdEaXNhYmxlZCc6CiAgICAgICAgICAgIHJldHVybiBbXQoKICAgICAgICB0
cnk6CiAgICAgICAgICAgIHJlc3BvbnNlID0gc2VsZi5zM19jbGllbnQubGlzdF9vYmplY3RfdmVy
c2lvbnMoQnVja2V0PWJ1Y2tldF9uYW1lLCBQcmVmaXg9a2V5KQogICAgICAgICAgICB2ZXJzaW9u
cyA9IFtdCiAgICAgICAgICAgIGlmICdWZXJzaW9ucycgaW4gcmVzcG9uc2U6CiAgICAgICAgICAg
ICAgICBmb3IgdiBpbiByZXNwb25zZVsnVmVyc2lvbnMnXToKICAgICAgICAgICAgICAgICAgICBp
ZiB2WydLZXknXSA9PSBrZXk6CiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25zLmFwcGVu
ZCh2KQogICAgICAgICAgICByZXR1cm4gdmVyc2lvbnMKICAgICAgICBleGNlcHQgKENsaWVudEVy
cm9yLCBFeGNlcHRpb24pIGFzIGU6CiAgICAgICAgICAgIHNlbGYuY29ubmVjdGlvbl9lcnJvciA9
IGYibGlzdCB2ZXJzaW9uIGVycm9yOiB7c3RyKGUpfSIKICAgICAgICAgICAgcmV0dXJuIFtdCgog
ICAgZGVmIGRvd25sb2FkX29iamVjdChzZWxmLCBidWNrZXRfbmFtZSwga2V5LCBsb2NhbF9wYXRo
LCB2ZXJzaW9uX2lkPU5vbmUsIGNhbGxiYWNrPU5vbmUpOgogICAgICAgICIiIgogICAgICAgINCh
0LrQsNGH0LjQstCw0LXRgiDQvtCx0YrQtdC60YIg0LjQtyBTMyDQsiDQu9C+0LrQsNC70YzQvdGD
0Y4g0YTQsNC50LvQvtCy0YPRjiDRgdC40YHRgtC10LzRgy4KCiAgICAgICAg0JDRgNCz0YPQvNC1
0L3RgtGLOgogICAgICAgICAgICBidWNrZXRfbmFtZSAoc3RyKTog0JjQvNGPINCx0LDQutC10YLQ
sC3QuNGB0YLQvtGH0L3QuNC60LAuCiAgICAgICAgICAgIGtleSAoc3RyKTog0JrQu9GO0YcgKNC/
0YPRgtGMKSDQvtCx0YrQtdC60YLQsCDQsiBTMy4KICAgICAgICAgICAgbG9jYWxfcGF0aCAoc3Ry
KTog0J/QvtC70L3Ri9C5INC70L7QutCw0LvRjNC90YvQuSDQv9GD0YLRjCDQvdCw0LfQvdCw0YfQ
tdC90LjRjyAo0LLQutC70Y7Rh9Cw0Y8g0LjQvNGPINGE0LDQudC70LApLgogICAgICAgICAgICB2
ZXJzaW9uX2lkIChzdHIsIG9wdGlvbmFsKTogSUQg0LrQvtC90LrRgNC10YLQvdC+0Lkg0LLQtdGA
0YHQuNC4INC+0LHRitC10LrRgtCwINC00LvRjyDRgdC60LDRh9C40LLQsNC90LjRjy4g0JXRgdC7
0LggTm9uZSDigJQg0YHQutCw0YfQuNCy0LDQtdGC0YHRjyDQv9C+0YHQu9C10LTQvdGP0Y8gKNGC
0LXQutGD0YnQsNGPKSDQstC10YDRgdC40Y8uCiAgICAgICAgICAgIGNhbGxiYWNrIChjYWxsYWJs
ZSwgb3B0aW9uYWwpOiDQpNGD0L3QutGG0LjRjyDQvtCx0YDQsNGC0L3QvtCz0L4g0LLRi9C30L7Q
stCwINC00LvRjyDQvtGC0YHQu9C10LbQuNCy0LDQvdC40Y8g0L/RgNC+0LPRgNC10YHRgdCwICjQ
v9GA0LjQvdC40LzQsNC10YIg0LrQvtC70LjRh9C10YHRgtCy0L4g0LHQsNC50YIpLgoKICAgICAg
ICDQktC+0LfQstGA0LDRidCw0LXRgjoKICAgICAgICAgICAgYm9vbDogVHJ1ZSDQsiDRgdC70YPR
h9Cw0LUg0YPRgdC/0LXRiNC90L7Qs9C+INGB0LrQsNGH0LjQstCw0L3QuNGPLCDQuNC90LDRh9C1
IEZhbHNlLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYuczNfY2xpZW50IGlzIE5vbmU6CiAg
ICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIHRyeToKICAgICAgICAgICAgZXh0cmFfYXJn
cyA9IHt9CiAgICAgICAgICAgIGlmIHZlcnNpb25faWQ6CiAgICAgICAgICAgICAgICBleHRyYV9h
cmdzWydWZXJzaW9uSWQnXSA9IHZlcnNpb25faWQKICAgICAgICAgICAgc2VsZi5zM19jbGllbnQu
ZG93bmxvYWRfZmlsZShidWNrZXRfbmFtZSwga2V5LCBsb2NhbF9wYXRoLCBFeHRyYUFyZ3M9ZXh0
cmFfYXJncywgQ2FsbGJhY2s9Y2FsbGJhY2spCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAg
ICAgZXhjZXB0IChDbGllbnRFcnJvciwgRXhjZXB0aW9uKSBhcyBlOgogICAgICAgICAgICBzZWxm
LmNvbm5lY3Rpb25fZXJyb3IgPSBmIkRvd25sb2FkIGVycm9yOiB7c3RyKGUpfSIKICAgICAgICAg
ICAgcmV0dXJuIEZhbHNlCgogICAgIyDQntCR0J3QntCS0JvQldCd0JjQlSBTMyDRgtC+0LvRjNC6
0L4g0L/RgNC4INC40LfQvNC10L3QtdC90LjRj9GFCiAgICBkZWYgbWFya19zM19mb3JfcmVmcmVz
aChzZWxmKToKICAgICAgICAiIiLQntGC0LzQtdGC0LjRgtGMINGH0YLQviBTMyDQvdGD0LbQvdC+
INC+0LHQvdC+0LLQuNGC0YwiIiIKICAgICAgICBzZWxmLnMzX25lZWRzX3JlZnJlc2ggPSBUcnVl
CgogICAgZGVmIHVwbG9hZF9maWxlKHNlbGYsIGxvY2FsX3BhdGgsIGJ1Y2tldF9uYW1lLCBrZXkp
OgogICAgICAgIGlmIHNlbGYuczNfY2xpZW50IGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBG
YWxzZQogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5zM19jbGllbnQudXBsb2FkX2ZpbGUo
bG9jYWxfcGF0aCwgYnVja2V0X25hbWUsIGtleSkKICAgICAgICAgICAgc2VsZi5pbnZhbGlkYXRl
X2NhY2hlKGJ1Y2tldF9uYW1lKQogICAgICAgICAgICBzZWxmLm1hcmtfczNfZm9yX3JlZnJlc2go
KQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJyb3IsIEV4
Y2VwdGlvbikgYXMgZToKICAgICAgICAgICAgc2VsZi5jb25uZWN0aW9uX2Vycm9yID0gZiJVcGxv
YWQgZXJyb3I6IHtzdHIoZSl9IgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgY29w
eV9vYmplY3Qoc2VsZiwgc291cmNlX2J1Y2tldCwgc291cmNlX2tleSwgZGVzdF9idWNrZXQsIGRl
c3Rfa2V5LCB2ZXJzaW9uX2lkPU5vbmUpOgogICAgICAgICIiIgogICAgICAgINCS0YvQv9C+0LvQ
vdGP0LXRgiDQutC+0L/QuNGA0L7QstCw0L3QuNC1INC+0LHRitC10LrRgtCwINCy0L3Rg9GC0YDQ
uCBTMyAoU2VydmVyLXNpZGUgY29weSkg0LHQtdC3INGB0LrQsNGH0LjQstCw0L3QuNGPINC90LAg
0LvQvtC60LDQu9GM0L3Rg9GOINC80LDRiNC40L3Rgy4KCiAgICAgICAg0JDRgNCz0YPQvNC10L3R
gtGLOgogICAgICAgICAgICBzb3VyY2VfYnVja2V0IChzdHIpOiDQmNC80Y8g0LjRgdGF0L7QtNC9
0L7Qs9C+INCx0LDQutC10YLQsC4KICAgICAgICAgICAgc291cmNlX2tleSAoc3RyKTog0JrQu9GO
0Ycg0LjRgdGF0L7QtNC90L7Qs9C+INC+0LHRitC10LrRgtCwLgogICAgICAgICAgICBkZXN0X2J1
Y2tldCAoc3RyKTog0JjQvNGPINGG0LXQu9C10LLQvtCz0L4g0LHQsNC60LXRgtCwLgogICAgICAg
ICAgICBkZXN0X2tleSAoc3RyKTog0JrQu9GO0Ycg0YbQtdC70LXQstC+0LPQviDQvtCx0YrQtdC6
0YLQsC4KICAgICAgICAgICAgdmVyc2lvbl9pZCAoc3RyLCBvcHRpb25hbCk6IElEINC60L7QvdC6
0YDQtdGC0L3QvtC5INCy0LXRgNGB0LjQuCDQuNGB0YXQvtC00L3QvtCz0L4g0L7QsdGK0LXQutGC
0LAuINCV0YHQu9C4INGD0LrQsNC30LDQvSwg0LrQvtC/0LjRgNGD0LXRgtGB0Y8g0LjQvNC10L3Q
vdC+INGN0YLQsCDQstC10YDRgdC40Y8uCgogICAgICAgINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCOgog
ICAgICAgICAgICBib29sOiBUcnVlLCDQtdGB0LvQuCDQvtC/0LXRgNCw0YbQuNGPINC60L7Qv9C4
0YDQvtCy0LDQvdC40Y8g0L/RgNC+0YjQu9CwINGD0YHQv9C10YjQvdC+LCDQuNC90LDRh9C1IEZh
bHNlLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYuczNfY2xpZW50IGlzIE5vbmU6CiAgICAg
ICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIHRyeToKICAgICAgICAgICAgY29weV9zb3VyY2Ug
PSB7J0J1Y2tldCc6IHNvdXJjZV9idWNrZXQsICdLZXknOiBzb3VyY2Vfa2V5fQogICAgICAgICAg
ICBpZiB2ZXJzaW9uX2lkOgogICAgICAgICAgICAgICAgY29weV9zb3VyY2VbJ1ZlcnNpb25JZCdd
ID0gdmVyc2lvbl9pZAogICAgICAgICAgICBzZWxmLnMzX2NsaWVudC5jb3B5X29iamVjdChDb3B5
U291cmNlPWNvcHlfc291cmNlLCBCdWNrZXQ9ZGVzdF9idWNrZXQsIEtleT1kZXN0X2tleSkKICAg
ICAgICAgICAgc2VsZi5pbnZhbGlkYXRlX2NhY2hlKGRlc3RfYnVja2V0KQogICAgICAgICAgICBz
ZWxmLm1hcmtfczNfZm9yX3JlZnJlc2goKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAg
IGV4Y2VwdCAoQ2xpZW50RXJyb3IsIEV4Y2VwdGlvbikgYXMgZToKICAgICAgICAgICAgc2VsZi5j
b25uZWN0aW9uX2Vycm9yID0gZiJDb3B5IGVycm9yOiB7c3RyKGUpfSIKICAgICAgICAgICAgcmV0
dXJuIEZhbHNlCgogICAgZGVmIGRlbGV0ZV9vYmplY3Qoc2VsZiwgYnVja2V0X25hbWUsIGtleSwg
dmVyc2lvbl9pZD1Ob25lKToKICAgICAgICBpZiBzZWxmLnMzX2NsaWVudCBpcyBOb25lOgogICAg
ICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICB0cnk6CiAgICAgICAgICAgIGV4dHJhX2FyZ3Mg
PSB7fQogICAgICAgICAgICBpZiB2ZXJzaW9uX2lkOgogICAgICAgICAgICAgICAgZXh0cmFfYXJn
c1snVmVyc2lvbklkJ10gPSB2ZXJzaW9uX2lkCiAgICAgICAgICAgIHNlbGYuczNfY2xpZW50LmRl
bGV0ZV9vYmplY3QoQnVja2V0PWJ1Y2tldF9uYW1lLCBLZXk9a2V5LCAqKmV4dHJhX2FyZ3MpCiAg
ICAgICAgICAgIHNlbGYuaW52YWxpZGF0ZV9jYWNoZShidWNrZXRfbmFtZSkKICAgICAgICAgICAg
c2VsZi5tYXJrX3MzX2Zvcl9yZWZyZXNoKCkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAg
ICBleGNlcHQgKENsaWVudEVycm9yLCBFeGNlcHRpb24pIGFzIGU6CiAgICAgICAgICAgIHNlbGYu
Y29ubmVjdGlvbl9lcnJvciA9IGYiRGVsZXRlIGVycm9yOiB7c3RyKGUpfSIKICAgICAgICAgICAg
cmV0dXJuIEZhbHNlCgogICAgZGVmIGRlbGV0ZV9vbGRfdmVyc2lvbnMoc2VsZiwgYnVja2V0X25h
bWUsIGtleSk6CiAgICAgICAgIiIi0KPQtNCw0LvQuNGC0Ywg0LLRgdC1INCy0LXRgNGB0LjQuCDQ
utGA0L7QvNC1INC/0L7RgdC70LXQtNC90LXQuSIiIgogICAgICAgIGlmIHNlbGYuczNfY2xpZW50
IGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgdHJ5OgogICAgICAgICAgICB2
ZXJzaW9ucyA9IHNlbGYubGlzdF9vYmplY3RfdmVyc2lvbnMoYnVja2V0X25hbWUsIGtleSkKICAg
ICAgICAgICAgaWYgbGVuKHZlcnNpb25zKSA8PSAxOgogICAgICAgICAgICAgICAgcmV0dXJuIDAK
CiAgICAgICAgICAgIHZlcnNpb25zLnNvcnQoa2V5PWxhbWJkYSB4OiB4LmdldCgnTGFzdE1vZGlm
aWVkJywgZGF0ZXRpbWUubWluKSwgcmV2ZXJzZT1UcnVlKQoKICAgICAgICAgICAgZGVsZXRlZF9j
b3VudCA9IDAKICAgICAgICAgICAgZm9yIHZlcnNpb24gaW4gdmVyc2lvbnNbMTpdOgogICAgICAg
ICAgICAgICAgaWYgc2VsZi5kZWxldGVfb2JqZWN0KGJ1Y2tldF9uYW1lLCBrZXksIHZlcnNpb25b
J1ZlcnNpb25JZCddKToKICAgICAgICAgICAgICAgICAgICBkZWxldGVkX2NvdW50ICs9IDEKCiAg
ICAgICAgICAgIHNlbGYubWFya19zM19mb3JfcmVmcmVzaCgpCiAgICAgICAgICAgIHJldHVybiBk
ZWxldGVkX2NvdW50CiAgICAgICAgZXhjZXB0IChDbGllbnRFcnJvciwgRXhjZXB0aW9uKSBhcyBl
OgogICAgICAgICAgICBzZWxmLmNvbm5lY3Rpb25fZXJyb3IgPSBmIkRlbGV0ZSBvbGQgdmVyc2lv
biBlcnJvcjoge3N0cihlKX0iCiAgICAgICAgICAgIHJldHVybiAwCgogICAgZGVmIGVuYWJsZV92
ZXJzaW9uaW5nKHNlbGYsIGJ1Y2tldF9uYW1lKToKICAgICAgICAiIiLQktC60LvRjtGH0LjRgtGM
INCy0LXRgNGB0LjQvtC90LjRgNC+0LLQsNC90LjQtSDQtNC70Y8g0LHQsNC60LXRgtCwIiIiCiAg
ICAgICAgaWYgc2VsZi5zM19jbGllbnQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNl
CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnMzX2NsaWVudC5wdXRfYnVja2V0X3ZlcnNp
b25pbmcoCiAgICAgICAgICAgICAgICBCdWNrZXQ9YnVja2V0X25hbWUsCiAgICAgICAgICAgICAg
ICBWZXJzaW9uaW5nQ29uZmlndXJhdGlvbj17J1N0YXR1cyc6ICdFbmFibGVkJ30KICAgICAgICAg
ICAgKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJyb3Is
IEV4Y2VwdGlvbikgYXMgZToKICAgICAgICAgICAgc2VsZi5jb25uZWN0aW9uX2Vycm9yID0gZiJF
bmFibGUgVmVyc2lvbmluZyBlcnJvcjoge3N0cihlKX0iCiAgICAgICAgICAgIHJldHVybiBGYWxz
ZQoKICAgIGRlZiBkaXNhYmxlX3ZlcnNpb25pbmcoc2VsZiwgYnVja2V0X25hbWUpOgogICAgICAg
ICIiItCe0YLQutC70Y7Rh9C40YLRjCDQstC10YDRgdC40L7QvdC40YDQvtCy0LDQvdC40LUg0LTQ
u9GPINCx0LDQutC10YLQsCAo0YPRgdGC0LDQvdC+0LLQuNGC0Ywg0LIgU3VzcGVuZGVkKSIiIgog
ICAgICAgIGlmIHNlbGYuczNfY2xpZW50IGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBGYWxz
ZQogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5zM19jbGllbnQucHV0X2J1Y2tldF92ZXJz
aW9uaW5nKAogICAgICAgICAgICAgICAgQnVja2V0PWJ1Y2tldF9uYW1lLAogICAgICAgICAgICAg
ICAgVmVyc2lvbmluZ0NvbmZpZ3VyYXRpb249eydTdGF0dXMnOiAnU3VzcGVuZGVkJ30KICAgICAg
ICAgICAgKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGV4Y2VwdCAoQ2xpZW50RXJy
b3IsIEV4Y2VwdGlvbikgYXMgZToKICAgICAgICAgICAgc2VsZi5jb25uZWN0aW9uX2Vycm9yID0g
ZiJEaXNhYmxlIFZlc3JzaW9uaW5nIGVycm9yOiB7c3RyKGUpfSIKICAgICAgICAgICAgcmV0dXJu
IEZhbHNlCgogICAgZGVmIGdldF92ZXJzaW9uaW5nX3N0YXR1c19jYWNoZWQoc2VsZiwgYnVja2V0
X25hbWUpOgogICAgICAgICIiItCf0L7Qu9GD0YfQuNGC0Ywg0YHRgtCw0YLRg9GBINCy0LXRgNGB
0LjQvtC90LjRgNC+0LLQsNC90LjRjyDRgSDQutC10YjQuNGA0L7QstCw0L3QuNC10LwiIiIKICAg
ICAgICBpZiBidWNrZXRfbmFtZSBub3QgaW4gc2VsZi52ZXJzaW9uaW5nX3N0YXR1c19jYWNoZToK
ICAgICAgICAgICAgIyDQl9Cw0L/RgNCw0YjQuNCy0LDQtdC8INGC0L7Qu9GM0LrQviDQvtC00LjQ
vSDRgNCw0LcKICAgICAgICAgICAgc2VsZi52ZXJzaW9uaW5nX3N0YXR1c19jYWNoZVtidWNrZXRf
bmFtZV0gPSBzZWxmLmdldF92ZXJzaW9uaW5nX3N0YXR1cyhidWNrZXRfbmFtZSkKICAgICAgICBy
ZXR1cm4gc2VsZi52ZXJzaW9uaW5nX3N0YXR1c19jYWNoZVtidWNrZXRfbmFtZV0KCiAgICBkZWYg
Z2V0X3ZlcnNpb25pbmdfc3RhdHVzKHNlbGYsIGJ1Y2tldF9uYW1lKToKICAgICAgICAiIiLQn9C+
0LvRg9GH0LjRgtGMINGB0YLQsNGC0YPRgSDQstC10YDRgdC40L7QvdC40YDQvtCy0LDQvdC40Y8g
0LHQsNC60LXRgtCwIiIiCiAgICAgICAgaWYgc2VsZi5zM19jbGllbnQgaXMgTm9uZToKICAgICAg
ICAgICAgcmV0dXJuIE5vbmUKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJlc3BvbnNlID0gc2Vs
Zi5zM19jbGllbnQuZ2V0X2J1Y2tldF92ZXJzaW9uaW5nKEJ1Y2tldD1idWNrZXRfbmFtZSkKICAg
ICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmdldCgnU3RhdHVzJywgJ0Rpc2FibGVkJykKICAgICAg
ICBleGNlcHQgKENsaWVudEVycm9yLCBFeGNlcHRpb24pIGFzIGU6CiAgICAgICAgICAgIHNlbGYu
Y29ubmVjdGlvbl9lcnJvciA9IGYiR2V0IFZlciBTYXR1cyBlcnJvcjoge3N0cihlKX0iCiAgICAg
ICAgICAgIHJldHVybiBOb25lCgoKY2xhc3MgRmlsZVN5c3RlbUJyb3dzZXI6CiAgICAiIiLQkdGA
0LDRg9C30LXRgCDQu9C+0LrQsNC70YzQvdC+0Lkg0YTQsNC50LvQvtCy0L7QuSDRgdC40YHRgtC1
0LzRiyIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLmN1cnJlbnRfcGF0
aCA9IG9zLnBhdGguZXhwYW5kdXNlcignficpCgogICAgZGVmIGxpc3RfZGlyZWN0b3J5KHNlbGYp
OgogICAgICAgIHRyeToKICAgICAgICAgICAgaXRlbXMgPSBbXQogICAgICAgICAgICBpZiBzZWxm
LmN1cnJlbnRfcGF0aCAhPSAnLyc6CiAgICAgICAgICAgICAgICBpdGVtcy5hcHBlbmQoeyduYW1l
JzogJy4uJywgJ2lzX2Rpcic6IFRydWUsICdzaXplJzogMCwgJ210aW1lJzogTm9uZX0pCgogICAg
ICAgICAgICBmb3IgaXRlbSBpbiBzb3J0ZWQob3MubGlzdGRpcihzZWxmLmN1cnJlbnRfcGF0aCkp
OgogICAgICAgICAgICAgICAgZnVsbF9wYXRoID0gb3MucGF0aC5qb2luKHNlbGYuY3VycmVudF9w
YXRoLCBpdGVtKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHN0YXQg
PSBvcy5zdGF0KGZ1bGxfcGF0aCkKICAgICAgICAgICAgICAgICAgICBpc19kaXIgPSBvcy5wYXRo
LmlzZGlyKGZ1bGxfcGF0aCkKICAgICAgICAgICAgICAgICAgICBpdGVtcy5hcHBlbmQoewogICAg
ICAgICAgICAgICAgICAgICAgICAnbmFtZSc6IGl0ZW0sCiAgICAgICAgICAgICAgICAgICAgICAg
ICdpc19kaXInOiBpc19kaXIsCiAgICAgICAgICAgICAgICAgICAgICAgICdzaXplJzogMCBpZiBp
c19kaXIgZWxzZSBzdGF0LnN0X3NpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICdtdGltZSc6
IGRhdGV0aW1lLmZyb210aW1lc3RhbXAoc3RhdC5zdF9tdGltZSkKICAgICAgICAgICAgICAgICAg
ICB9KQogICAgICAgICAgICAgICAgZXhjZXB0IChQZXJtaXNzaW9uRXJyb3IsIE9TRXJyb3IpOgog
ICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICByZXR1cm4gaXRlbXMKICAg
ICAgICBleGNlcHQgKFBlcm1pc3Npb25FcnJvciwgT1NFcnJvcik6CiAgICAgICAgICAgIHJldHVy
biBbXQoKICAgIGRlZiBsaXN0X2FsbF9maWxlcyhzZWxmLCBwYXRoKToKICAgICAgICBhbGxfZmls
ZXMgPSBbXQogICAgICAgIHRyeToKICAgICAgICAgICAgZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGlu
IG9zLndhbGsocGF0aCk6CiAgICAgICAgICAgICAgICBmb3IgZmlsZSBpbiBmaWxlczoKICAgICAg
ICAgICAgICAgICAgICBmdWxsX3BhdGggPSBvcy5wYXRoLmpvaW4ocm9vdCwgZmlsZSkKICAgICAg
ICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXQgPSBvcy5zdGF0
KGZ1bGxfcGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgcmVsX3BhdGggPSBvcy5wYXRoLnJl
bHBhdGgoZnVsbF9wYXRoLCBwYXRoKQogICAgICAgICAgICAgICAgICAgICAgICBhbGxfZmlsZXMu
YXBwZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXRoJzogZnVsbF9wYXRoLAog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3JlbF9wYXRoJzogcmVsX3BhdGgsCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6IHN0YXQuc3Rfc2l6ZQogICAgICAgICAgICAgICAg
ICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCAoUGVybWlzc2lvbkVycm9yLCBP
U0Vycm9yKToKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICBleGNlcHQg
KFBlcm1pc3Npb25FcnJvciwgT1NFcnJvcik6CiAgICAgICAgICAgIHBhc3MKICAgICAgICByZXR1
cm4gYWxsX2ZpbGVzCgogICAgZGVmIGZpbGVfZXhpc3RzKHNlbGYsIGZpbGVfcGF0aCk6CiAgICAg
ICAgIiIi0J/RgNC+0LLQtdGA0LjRgtGMINGB0YPRidC10YHRgtCy0L7QstCw0L3QuNC1INGE0LDQ
udC70LAg0Lgg0LLQtdGA0L3Rg9GC0Ywg0LXQs9C+INC80LXRgtCw0LTQsNC90L3Ri9C1IiIiCiAg
ICAgICAgdHJ5OgogICAgICAgICAgICBpZiBvcy5wYXRoLmV4aXN0cyhmaWxlX3BhdGgpOgogICAg
ICAgICAgICAgICAgc3RhdCA9IG9zLnN0YXQoZmlsZV9wYXRoKQogICAgICAgICAgICAgICAgcmV0
dXJuIHsKICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6IHN0YXQuc3Rfc2l6ZSwKICAgICAgICAg
ICAgICAgICAgICAnbXRpbWUnOiBkYXRldGltZS5mcm9tdGltZXN0YW1wKHN0YXQuc3RfbXRpbWUp
CiAgICAgICAgICAgICAgICB9CiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCiAgICAg
ICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgY3JlYXRlX2RpcmVjdG9yeShzZWxmLCBkaXJfbmFtZSk6
CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmdWxsX3BhdGggPSBvcy5wYXRoLmpvaW4oc2VsZi5j
dXJyZW50X3BhdGgsIGRpcl9uYW1lKQogICAgICAgICAgICBvcy5tYWtlZGlycyhmdWxsX3BhdGgs
IGV4aXN0X29rPUZhbHNlKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGV4Y2VwdCBP
U0Vycm9yOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgaXNfYmluYXJ5X2ZpbGUoZmls
ZV9wYXRoKToKICAgIHRyeToKICAgICAgICB3aXRoIG9wZW4oZmlsZV9wYXRoLCAncmInKSBhcyBm
OgogICAgICAgICAgICBjaHVuayA9IGYucmVhZCgxMDI0KQogICAgICAgICAgICBpZiBiJ1x4MDAn
IGluIGNodW5rOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICAgICAgICAgIG5vbl9w
cmludGFibGUgPSBzdW0oMSBmb3IgYnl0ZSBpbiBjaHVuayBpZiBieXRlIDwgMzIgYW5kIGJ5dGUg
bm90IGluICg5LCAxMCwgMTMpKQogICAgICAgICAgICBpZiBsZW4oY2h1bmspID4gMCBhbmQgbm9u
X3ByaW50YWJsZSAvIGxlbihjaHVuaykgPiAwLjM6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1
ZQoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICBleGNlcHQ6CiAgICAgICAgcmV0dXJuIFRy
dWUKCgpkZWYgZm9ybWF0X3NpemUoc2l6ZSk6CiAgICBmb3IgdW5pdCBpbiBbJ0InLCAnS0InLCAn
TUInLCAnR0InLCAnVEInXToKICAgICAgICBpZiBzaXplIDwgMTAyNC4wOgogICAgICAgICAgICBy
ZXR1cm4gZid7c2l6ZTouMWZ9IHt1bml0fScKICAgICAgICBzaXplIC89IDEwMjQuMAogICAgcmV0
dXJuIGYne3NpemU6LjFmfSBQQicKCgpjbGFzcyBTY3JvbGxCYXIodXJ3aWQuV2lkZ2V0RGVjb3Jh
dGlvbik6CiAgICAiIiLQktC10YDRgtC40LrQsNC70YzQvdGL0Lkgc2Nyb2xsYmFyINC00LvRjyB1
cndpZCBMaXN0Qm94IiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHdpZGdldCk6CiAgICAgICAg
IiIiCiAgICAgICAgQXJnczoKICAgICAgICAgICAgd2lkZ2V0OiDQsdCw0LfQvtCy0YvQuSDQstC4
0LTQttC10YIgKNC+0LHRi9GH0L3QviBMaXN0Qm94KQogICAgICAgICIiIgogICAgICAgICMgc2Vs
Zi5fX3N1cGVyLl9faW5pdF9fKHdpZGdldCkKICAgICAgICBzdXBlcigpLl9faW5pdF9fKHdpZGdl
dCkKICAgICAgICBzZWxmLnNjcm9sbGJhcl93aWR0aCA9IDEKCiAgICBkZWYgcmVuZGVyKHNlbGYs
IHNpemUsIGZvY3VzPUZhbHNlKToKICAgICAgICBtYXhjb2wsIG1heHJvdyA9IHNpemUKCiAgICAg
ICAgIyDQktGL0YfQuNGB0LvRj9C10Lwg0YDQsNC30LzQtdGAINC00LvRjyDQvtGB0L3QvtCy0L3Q
vtCz0L4g0LLQuNC00LbQtdGC0LAKICAgICAgICBjb250ZW50X3dpZHRoID0gbWF4Y29sIC0gc2Vs
Zi5zY3JvbGxiYXJfd2lkdGgKICAgICAgICBpZiBjb250ZW50X3dpZHRoIDwgMToKICAgICAgICAg
ICAgY29udGVudF93aWR0aCA9IDEKCiAgICAgICAgIyDQoNC10L3QtNC10YDQuNC8INC+0YHQvdC+
0LLQvdC+0Lkg0LLQuNC00LbQtdGCINGBINC/0YDQsNCy0LjQu9GM0L3Ri9C8INGA0LDQt9C80LXR
gNC+0LwKICAgICAgICBjYW52YXMgPSBzZWxmLl9vcmlnaW5hbF93aWRnZXQucmVuZGVyKChjb250
ZW50X3dpZHRoLCBtYXhyb3cpLCBmb2N1cykKCiAgICAgICAgIyDQn9C+0LvRg9GH0LDQtdC8INC4
0L3RhNC+0YDQvNCw0YbQuNGOINC+INC/0L7Qt9C40YbQuNC4INGB0LrRgNC+0LvQu9CwCiAgICAg
ICAgaWYgaGFzYXR0cihzZWxmLl9vcmlnaW5hbF93aWRnZXQsICdib2R5Jyk6CiAgICAgICAgICAg
ICMg0JTQu9GPIExpc3RCb3gKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbWlkZGxl
LCB0b3AsIGJvdHRvbSA9IHNlbGYuX29yaWdpbmFsX3dpZGdldC5jYWxjdWxhdGVfdmlzaWJsZSgK
ICAgICAgICAgICAgICAgICAgICAoY29udGVudF93aWR0aCwgbWF4cm93KSwgZm9jdXMKICAgICAg
ICAgICAgICAgICkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgIyDQldGB0LvQ
uCBjYWxjdWxhdGVfdmlzaWJsZSDQvdC1INGA0LDQsdC+0YLQsNC10YIsINCy0L7Qt9Cy0YDQsNGJ
0LDQtdC8IGNhbnZhcyDQsdC10Lcgc2Nyb2xsYmFyCiAgICAgICAgICAgICAgICByZXR1cm4gY2Fu
dmFzCgogICAgICAgICAgICBpZiBtaWRkbGUgaXMgTm9uZToKICAgICAgICAgICAgICAgIHJldHVy
biBjYW52YXMKCiAgICAgICAgICAgICMg0J/QvtC70YPRh9Cw0LXQvCDQvtCx0YnQtdC1INC60L7Q
u9C40YfQtdGB0YLQstC+INGN0LvQtdC80LXQvdGC0L7QsgogICAgICAgICAgICB0cnk6CiAgICAg
ICAgICAgICAgICB0b3RhbF9yb3dzID0gbGVuKHNlbGYuX29yaWdpbmFsX3dpZGdldC5ib2R5KQog
ICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICB0b3RhbF9yb3dzID0gbWF4cm93Cgog
ICAgICAgICAgICBpZiB0b3RhbF9yb3dzID09IDA6CiAgICAgICAgICAgICAgICByZXR1cm4gY2Fu
dmFzCgogICAgICAgICAgICAjINCS0YvRh9C40YHQu9GP0LXQvCDQv9Cw0YDQsNC80LXRgtGA0Ysg
c2Nyb2xsYmFyCiAgICAgICAgICAgIHZpc2libGVfcm93cyA9IG1heHJvdwogICAgICAgICAgICBp
ZiB0b3RhbF9yb3dzIDw9IHZpc2libGVfcm93czoKICAgICAgICAgICAgICAgIHRodW1iX2hlaWdo
dCA9IG1heHJvdwogICAgICAgICAgICAgICAgdGh1bWJfdG9wID0gMAogICAgICAgICAgICBlbHNl
OgogICAgICAgICAgICAgICAgdGh1bWJfaGVpZ2h0ID0gbWF4KDEsIGludCh2aXNpYmxlX3Jvd3Mg
KiB2aXNpYmxlX3Jvd3MgLyB0b3RhbF9yb3dzKSkKICAgICAgICAgICAgICAgIHRyeToKICAgICAg
ICAgICAgICAgICAgICBmb2N1c19wb3NpdGlvbiA9IHNlbGYuX29yaWdpbmFsX3dpZGdldC5ib2R5
LmZvY3VzCiAgICAgICAgICAgICAgICAgICAgaWYgZm9jdXNfcG9zaXRpb24gaXMgTm9uZToKICAg
ICAgICAgICAgICAgICAgICAgICAgZm9jdXNfcG9zaXRpb24gPSAwCiAgICAgICAgICAgICAgICBl
eGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgZm9jdXNfcG9zaXRpb24gPSAwCgogICAgICAgICAg
ICAgICAgc2Nyb2xsYWJsZV9hcmVhID0gbWF4cm93IC0gdGh1bWJfaGVpZ2h0CiAgICAgICAgICAg
ICAgICBpZiB0b3RhbF9yb3dzID4gdmlzaWJsZV9yb3dzOgogICAgICAgICAgICAgICAgICAgIHNj
cm9sbF9yYXRpbyA9IGZvY3VzX3Bvc2l0aW9uIC8gKHRvdGFsX3Jvd3MgLSAxKSBpZiB0b3RhbF9y
b3dzID4gMSBlbHNlIDAKICAgICAgICAgICAgICAgICAgICB0aHVtYl90b3AgPSBpbnQoc2Nyb2xs
X3JhdGlvICogc2Nyb2xsYWJsZV9hcmVhKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgICAgICB0aHVtYl90b3AgPSAwCgogICAgICAgICAgICAjINCh0L7Qt9C00LDQtdC8IHNj
cm9sbGJhcgogICAgICAgICAgICBzY3JvbGxiYXJfY2FudmFzID0gc2VsZi5fY3JlYXRlX3Njcm9s
bGJhcihtYXhyb3csIHRodW1iX3RvcCwgdGh1bWJfaGVpZ2h0KQoKICAgICAgICAgICAgIyDQmNGB
0L/QvtC70YzQt9GD0LXQvCBDYW52YXNKb2luINC90L4g0YPQsdC10LbQtNCw0LXQvNGB0Y8g0YfR
gtC+INC+0LHRidCw0Y8g0YjQuNGA0LjQvdCwID0gbWF4Y29sCiAgICAgICAgICAgIGNvbWJpbmVk
ID0gdXJ3aWQuQ2FudmFzSm9pbihbCiAgICAgICAgICAgICAgICAoY2FudmFzLCBOb25lLCBGYWxz
ZSwgY29udGVudF93aWR0aCksCiAgICAgICAgICAgICAgICAoc2Nyb2xsYmFyX2NhbnZhcywgTm9u
ZSwgRmFsc2UsIHNlbGYuc2Nyb2xsYmFyX3dpZHRoKQogICAgICAgICAgICBdKQoKICAgICAgICAg
ICAgcmV0dXJuIGNvbWJpbmVkCgogICAgICAgIHJldHVybiBjYW52YXMKCiAgICBkZWYgX2NyZWF0
ZV9zY3JvbGxiYXIoc2VsZiwgaGVpZ2h0LCB0aHVtYl90b3AsIHRodW1iX2hlaWdodCk6CiAgICAg
ICAgIiIi0KHQvtC30LTQsNGC0YwgY2FudmFzINC00LvRjyBzY3JvbGxiYXIiIiIKICAgICAgICBw
YXJ0cyA9IFtdCgogICAgICAgICMg0JLQtdGA0YXQvdC40Lkg0YLRgNC10LoKICAgICAgICBpZiB0
aHVtYl90b3AgPiAwOgogICAgICAgICAgICB0cmFja190b3AgPSB1cndpZC5Tb2xpZENhbnZhcygn
4pSCJywgMSwgdGh1bWJfdG9wKQogICAgICAgICAgICB0cmFja190b3AgPSB1cndpZC5Db21wb3Np
dGVDYW52YXModHJhY2tfdG9wKQogICAgICAgICAgICB0cmFja190b3AuZmlsbF9hdHRyKCdzY3Jv
bGxiYXJfdHJhY2snKQogICAgICAgICAgICBwYXJ0cy5hcHBlbmQoKHRyYWNrX3RvcCwgTm9uZSwg
RmFsc2UpKQoKICAgICAgICAjINCf0L7Qu9C30YPQvdC+0LoKICAgICAgICBpZiB0aHVtYl9oZWln
aHQgPiAwOgogICAgICAgICAgICB0aHVtYiA9IHVyd2lkLlNvbGlkQ2FudmFzKCfilognLCAxLCB0
aHVtYl9oZWlnaHQpCiAgICAgICAgICAgIHRodW1iID0gdXJ3aWQuQ29tcG9zaXRlQ2FudmFzKHRo
dW1iKQogICAgICAgICAgICB0aHVtYi5maWxsX2F0dHIoJ3Njcm9sbGJhcl90aHVtYicpCiAgICAg
ICAgICAgIHBhcnRzLmFwcGVuZCgodGh1bWIsIE5vbmUsIEZhbHNlKSkKCiAgICAgICAgIyDQndC4
0LbQvdC40Lkg0YLRgNC10LoKICAgICAgICB0cmFja19ib3R0b21faGVpZ2h0ID0gaGVpZ2h0IC0g
dGh1bWJfdG9wIC0gdGh1bWJfaGVpZ2h0CiAgICAgICAgaWYgdHJhY2tfYm90dG9tX2hlaWdodCA+
IDA6CiAgICAgICAgICAgIHRyYWNrX2JvdHRvbSA9IHVyd2lkLlNvbGlkQ2FudmFzKCfilIInLCAx
LCB0cmFja19ib3R0b21faGVpZ2h0KQogICAgICAgICAgICB0cmFja19ib3R0b20gPSB1cndpZC5D
b21wb3NpdGVDYW52YXModHJhY2tfYm90dG9tKQogICAgICAgICAgICB0cmFja19ib3R0b20uZmls
bF9hdHRyKCdzY3JvbGxiYXJfdHJhY2snKQogICAgICAgICAgICBwYXJ0cy5hcHBlbmQoKHRyYWNr
X2JvdHRvbSwgTm9uZSwgRmFsc2UpKQoKICAgICAgICBpZiBub3QgcGFydHM6CiAgICAgICAgICAg
ICMg0JXRgdC70Lgg0L3QtdGCINGH0LDRgdGC0LXQuSwg0YHQvtC30LTQsNC10Lwg0L/Rg9GB0YLQ
vtC5IGNhbnZhcwogICAgICAgICAgICByZXR1cm4gdXJ3aWQuU29saWRDYW52YXMoJyAnLCAxLCBo
ZWlnaHQpCgogICAgICAgIHJldHVybiB1cndpZC5DYW52YXNDb21iaW5lKHBhcnRzKQoKICAgIGRl
ZiBzZWxlY3RhYmxlKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9vcmlnaW5hbF93aWRnZXQu
c2VsZWN0YWJsZSgpCgogICAgZGVmIGtleXByZXNzKHNlbGYsIHNpemUsIGtleSk6CiAgICAgICAg
bWF4Y29sLCBtYXhyb3cgPSBzaXplCiAgICAgICAgY29udGVudF93aWR0aCA9IG1heGNvbCAtIHNl
bGYuc2Nyb2xsYmFyX3dpZHRoCiAgICAgICAgaWYgY29udGVudF93aWR0aCA8IDE6CiAgICAgICAg
ICAgIGNvbnRlbnRfd2lkdGggPSAxCiAgICAgICAgcmV0dXJuIHNlbGYuX29yaWdpbmFsX3dpZGdl
dC5rZXlwcmVzcygoY29udGVudF93aWR0aCwgbWF4cm93KSwga2V5KQoKICAgIGRlZiBtb3VzZV9l
dmVudChzZWxmLCBzaXplLCBldmVudCwgYnV0dG9uLCBjb2wsIHJvdywgZm9jdXMpOgogICAgICAg
IG1heGNvbCwgbWF4cm93ID0gc2l6ZQogICAgICAgIGNvbnRlbnRfd2lkdGggPSBtYXhjb2wgLSBz
ZWxmLnNjcm9sbGJhcl93aWR0aAogICAgICAgIGlmIGNvbnRlbnRfd2lkdGggPCAxOgogICAgICAg
ICAgICBjb250ZW50X3dpZHRoID0gMQoKICAgICAgICBpZiBjb2wgPCBjb250ZW50X3dpZHRoOgog
ICAgICAgICAgICByZXR1cm4gc2VsZi5fb3JpZ2luYWxfd2lkZ2V0Lm1vdXNlX2V2ZW50KAogICAg
ICAgICAgICAgICAgKGNvbnRlbnRfd2lkdGgsIG1heHJvdyksIGV2ZW50LCBidXR0b24sIGNvbCwg
cm93LCBmb2N1cwogICAgICAgICAgICApCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKY2xhc3MgU2Vs
ZWN0YWJsZVRleHQodXJ3aWQuVGV4dCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgdGV4dCwgZGF0
YSwgcGFuZWwpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18odGV4dCkKICAgICAgICBzZWxmLmRh
dGEgPSBkYXRhCiAgICAgICAgc2VsZi5wYW5lbCA9IHBhbmVsCiAgICAgICAgc2VsZi5zZWxlY3Rl
ZCA9IEZhbHNlCgogICAgZGVmIHNlbGVjdGFibGUoc2VsZik6CiAgICAgICAgcmV0dXJuIFRydWUK
CiAgICBkZWYga2V5cHJlc3Moc2VsZiwgc2l6ZSwga2V5KToKICAgICAgICBpZiBrZXkgPT0gJ2Vu
dGVyJzoKICAgICAgICAgICAgc2VsZi5wYW5lbC5vbl9pdGVtX2FjdGl2YXRlZChzZWxmLmRhdGEp
CiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgZWxpZiBrZXkgPT0gJ2luc2VydCcgYW5k
IHNlbGYuZGF0YS5nZXQoJ2Nhbl9zZWxlY3QnKToKICAgICAgICAgICAgc2VsZi5zZWxlY3RlZCA9
IG5vdCBzZWxmLnNlbGVjdGVkCiAgICAgICAgICAgIHNlbGYucGFuZWwudXBkYXRlX2l0ZW1fZGlz
cGxheShzZWxmKQogICAgICAgICAgICByZXR1cm4gJ2Rvd24nCiAgICAgICAgZWxpZiBrZXkgPT0g
JyAnIGFuZCBzZWxmLmRhdGEuZ2V0KCdjYW5fc2VsZWN0Jyk6CiAgICAgICAgICAgIHNlbGYuc2Vs
ZWN0ZWQgPSBub3Qgc2VsZi5zZWxlY3RlZAogICAgICAgICAgICBzZWxmLnBhbmVsLnVwZGF0ZV9p
dGVtX2Rpc3BsYXkoc2VsZikKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICByZXR1cm4g
a2V5CgoKY2xhc3MgRmlsZVZpZXdlckRpYWxvZyh1cndpZC5XaWRnZXRXcmFwKToKICAgIGRlZiBf
X2luaXRfXyhzZWxmLCB0aXRsZSwgY29udGVudCwgY2FsbGJhY2spOgogICAgICAgIHNlbGYuY2Fs
bGJhY2sgPSBjYWxsYmFjawoKICAgICAgICB0ZXh0X3dpZGdldCA9IHVyd2lkLlRleHQoY29udGVu
dCkKICAgICAgICBsaXN0Ym94ID0gdXJ3aWQuTGlzdEJveCh1cndpZC5TaW1wbGVGb2N1c0xpc3RX
YWxrZXIoW3RleHRfd2lkZ2V0XSkpCgogICAgICAgIGNsb3NlX2J1dHRvbiA9IHVyd2lkLkJ1dHRv
bignQ2xvc2UgKEVTQyknKQogICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFsKGNsb3NlX2J1dHRv
biwgJ2NsaWNrJywgc2VsZi5vbl9jbG9zZSkKCiAgICAgICAgcGlsZSA9IHVyd2lkLlBpbGUoWwog
ICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLkxpbmVCb3gobGlzdGJveCwgdGl0bGUpKSwK
ICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcChjbG9zZV9idXR0b24sIE5vbmUsIGZv
Y3VzX21hcD0nc2VsZWN0ZWQnKSkKICAgICAgICBdKQoKICAgICAgICBzdXBlcigpLl9faW5pdF9f
KHVyd2lkLkF0dHJNYXAocGlsZSwgJ2RpYWxvZycpKQoKICAgIGRlZiBvbl9jbG9zZShzZWxmLCBi
dXR0b24pOgogICAgICAgIHNlbGYuY2FsbGJhY2soKQoKICAgIGRlZiBrZXlwcmVzcyhzZWxmLCBz
aXplLCBrZXkpOgogICAgICAgIGlmIGtleSA9PSAnZXNjJzoKICAgICAgICAgICAgc2VsZi5jYWxs
YmFjaygpCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgcmV0dXJuIHN1cGVyKCkua2V5
cHJlc3Moc2l6ZSwga2V5KQoKCmNsYXNzIFZlcnNpb25TZWxlY3REaWFsb2codXJ3aWQuV2lkZ2V0
V3JhcCk6CiAgICAiIiLQlNC40LDQu9C+0LMg0LLRi9Cx0L7RgNCwINCy0LXRgNGB0LjQuCDRhNCw
0LnQu9CwINC00LvRjyDQv9GA0L7RgdC80L7RgtGA0LAg0LjQu9C4INC00LXQudGB0YLQstC40Lki
IiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgZmlsZV9kYXRhLCB2ZXJzaW9ucywgY2FsbGJhY2sp
OgogICAgICAgIHNlbGYuY2FsbGJhY2sgPSBjYWxsYmFjawogICAgICAgIHNlbGYudmVyc2lvbnMg
PSB2ZXJzaW9ucwogICAgICAgIHNlbGYuZmlsZV9kYXRhID0gZmlsZV9kYXRhCgogICAgICAgICMg
0JPRgNGD0L/Qv9CwINGA0LDQtNC40L7QutC90L7Qv9C+0LoKICAgICAgICBzZWxmLnJhZGlvX2dy
b3VwID0gW10KICAgICAgICB2ZXJzaW9uX2l0ZW1zID0gW10KCiAgICAgICAgZm9yIGlkeCwgdiBp
biBlbnVtZXJhdGUodmVyc2lvbnMpOgogICAgICAgICAgICBpc19sYXRlc3QgPSB2LmdldCgnSXNM
YXRlc3QnLCBGYWxzZSkKICAgICAgICAgICAgbGF0ZXN0X21hcmsgPSAiW0xBVEVTVF0gIiBpZiBp
c19sYXRlc3QgZWxzZSAiICAgICAgICAgIgoKICAgICAgICAgICAgc2l6ZSA9IGZvcm1hdF9zaXpl
KHYuZ2V0KCdTaXplJywgMCkpCiAgICAgICAgICAgIG10aW1lID0gdi5nZXQoJ0xhc3RNb2RpZmll
ZCcpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpIGlmIHYuZ2V0KCdMYXN0TW9kaWZpZWQn
KSBlbHNlICdOL0EnCiAgICAgICAgICAgIHZlcnNpb25faWQgPSB2LmdldCgnVmVyc2lvbklkJywg
JycpWzoxMl0KCiAgICAgICAgICAgICMgbGFiZWwgPSBmIntsYXRlc3RfbWFya317dmVyc2lvbl9p
ZH0gIHtzaXplOj4xMH0gIHttdGltZX0iCiAgICAgICAgICAgICMg0JjRgdC/0L7Qu9GM0LfRg9C1
0Lwg0LzQvtC90L7RiNC40YDQuNC90L3Ri9C5INGI0YDQuNGE0YIg0LTQu9GPINGC0LDQsdC70LjR
htGLCiAgICAgICAgICAgIGxhYmVsID0gZiJ7bGF0ZXN0X21hcmt9IHt2ZXJzaW9uX2lkOjwxMn0g
e3NpemU6PjEwfSB7bXRpbWV9IgoKICAgICAgICAgICAgIyDQn9C10YDQstCw0Y8g0LLQtdGA0YHQ
uNGPINCy0YvQsdGA0LDQvdCwINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOCiAgICAgICAgICAgIHJi
ID0gdXJ3aWQuUmFkaW9CdXR0b24oc2VsZi5yYWRpb19ncm91cCwgbGFiZWwsIHN0YXRlPShpZHgg
PT0gMCkpCiAgICAgICAgICAgIHJiLnZlcnNpb25fZGF0YSA9IHYgICMg0KHQvtGF0YDQsNC90Y/Q
tdC8INC00LDQvdC90YvQtSDQstC10YDRgdC40Lgg0L/RgNGP0LzQviDQsiDQvtCx0YrQtdC60YIg
0LrQvdC+0L/QutC4CgogICAgICAgICAgICAjINCe0LHQvtGA0LDRh9C40LLQsNC10Lwg0LIgQXR0
ck1hcCDQtNC70Y8g0L/QvtC00YHQstC10YLQutC4CiAgICAgICAgICAgIHZlcnNpb25faXRlbXMu
YXBwZW5kKHVyd2lkLkF0dHJNYXAocmIsIE5vbmUsIGZvY3VzX21hcD0nc2VsZWN0ZWQnKSkKCiAg
ICAgICAgIyDQodC/0LjRgdC+0Log0LLQtdGA0YHQuNC5INCyIExpc3RCb3gKICAgICAgICBzZWxm
Lmxpc3Rib3ggPSB1cndpZC5MaXN0Qm94KHVyd2lkLlNpbXBsZUZvY3VzTGlzdFdhbGtlcih2ZXJz
aW9uX2l0ZW1zKSkKCiAgICAgICAgIyDQmtC90L7Qv9C60Lgg0LTQtdC50YHRgtCy0LjQuQogICAg
ICAgIHZpZXdfYnRuID0gdXJ3aWQuQnV0dG9uKCdbIFZpZXcgXScpCiAgICAgICAgZGVsX2J0biA9
IHVyd2lkLkJ1dHRvbignWyBEZWxldGUgXScpCiAgICAgICAgY29weV9idG4gPSB1cndpZC5CdXR0
b24oJ1sgQ29weSBdJykKICAgICAgICBtb3ZlX2J0biA9IHVyd2lkLkJ1dHRvbignWyBNb3ZlIF0n
KQogICAgICAgIGNhbmNlbF9idG4gPSB1cndpZC5CdXR0b24oJ1sgQ2FuY2VsIF0nKQogICAgICAg
IGRvd25fdGV4dCA9IHVyd2lkLlRleHQoIlVzZSBGMyB0byB2aWV3LCBGNSB0byBjb3B5LCBGNiB0
byBtb3ZlLCBGOCB0byBkZWxldGUgc2VsZWN0ZWQgdmVyc2lvbiIpCiAgICAgICAgCiAgICAgICAg
IyDQntCx0YDQsNCx0L7RgtGH0LjQuiDQvdCw0LbQsNGC0LjRjyDQvdCwINC60L3QvtC/0LrQuCDQ
tNC10LnRgdGC0LLQuNC5CiAgICAgICAgZGVmIG9uX2FjdGlvbihhY3Rpb24pOgogICAgICAgICAg
ICAjINCY0YnQtdC8INCy0YvQsdGA0LDQvdC90YPRjiDRgNCw0LTQuNC+0LrQvdC+0L/QutGDCiAg
ICAgICAgICAgIGZvciByYiBpbiBzZWxmLnJhZGlvX2dyb3VwOgogICAgICAgICAgICAgICAgaWYg
cmIuc3RhdGU6CiAgICAgICAgICAgICAgICAgICAgIyDQndCw0YjQu9C4IOKAlCDQstGL0LfRi9Cy
0LDQtdC8INC4INGB0YDQsNC30YMg0LLRi9GF0L7QtNC40Lwg0LjQtyDRhNGD0L3QutGG0LjQuAog
ICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmNhbGxiYWNrKGFjdGlvbiwgcmIudmVyc2lv
bl9kYXRhKQoKICAgICAgICAgICAgIyDQldGB0LvQuCDRhtC40LrQuyDQt9Cw0LrQvtC90YfQuNC7
0YHRjyDQuCDQvdC40YfQtdCz0L4g0L3QtSDQvdCw0YjQu9C4IOKAlCDQvtGC0LzQtdC90LAKICAg
ICAgICAgICAgc2VsZi5jYWxsYmFjaygnY2FuY2VsJywgTm9uZSkKCiAgICAgICAgIyDQn9GA0LjQ
stGP0LfRi9Cy0LDQtdC8INGB0LjQs9C90LDQu9GLCiAgICAgICAgdXJ3aWQuY29ubmVjdF9zaWdu
YWwodmlld19idG4sICdjbGljaycsIGxhbWJkYSBiOiBvbl9hY3Rpb24oJ3ZpZXcnKSkKICAgICAg
ICB1cndpZC5jb25uZWN0X3NpZ25hbChkZWxfYnRuLCAnY2xpY2snLCBsYW1iZGEgYjogb25fYWN0
aW9uKCdkZWxldGUnKSkKICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChjb3B5X2J0biwgJ2Ns
aWNrJywgbGFtYmRhIGI6IG9uX2FjdGlvbignY29weScpKQogICAgICAgIHVyd2lkLmNvbm5lY3Rf
c2lnbmFsKG1vdmVfYnRuLCAnY2xpY2snLCBsYW1iZGEgYjogb25fYWN0aW9uKCdtb3ZlJykpCiAg
ICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwoY2FuY2VsX2J0biwgJ2NsaWNrJywgbGFtYmRhIGI6
IHNlbGYuY2FsbGJhY2soJ2NhbmNlbCcsIE5vbmUpKQoKICAgICAgICAjINCa0L7QvNC/0L7QvdC+
0LLQutCwINC60L3QvtC/0L7QugogICAgICAgIGJ1dHRvbnNfY29sID0gdXJ3aWQuQ29sdW1ucyhb
CiAgICAgICAgICAgICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgICAgICAo
J3BhY2snLCB1cndpZC5BdHRyTWFwKHZpZXdfYnRuLCAnYnV0dG9uJywgZm9jdXNfbWFwPSdidXR0
b25fZm9jdXMnKSksCiAgICAgICAgICAgICgnZml4ZWQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAg
ICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAoY29weV9idG4sICdidXR0b24nLCBmb2N1
c19tYXA9J2J1dHRvbl9mb2N1cycpKSwKICAgICAgICAgICAgKCdmaXhlZCcsIDEsIHVyd2lkLlRl
eHQoJycpKSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcChtb3ZlX2J0biwgJ2J1
dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uX2ZvY3VzJykpLAogICAgICAgICAgICAoJ2ZpeGVkJywg
MSwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKGRl
bF9idG4sICdidXR0b24nLCBmb2N1c19tYXA9J2J1dHRvbl9mb2N1cycpKSwKICAgICAgICAgICAg
KCdmaXhlZCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQu
QXR0ck1hcChjYW5jZWxfYnRuLCAnYnV0dG9uJywgZm9jdXNfbWFwPSdidXR0b25fZm9jdXMnKSks
CiAgICAgICAgICAgICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgIF0sIGRp
dmlkZWNoYXJzPTApCgogICAgICAgIHBpbGUgPSB1cndpZC5QaWxlKFsKICAgICAgICAgICAgKCdw
YWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAgICAgKCd3ZWlnaHQnLCAxLCBzZWxmLmxp
c3Rib3gpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAg
ICAoJ3BhY2snLCBidXR0b25zX2NvbCksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlk
ZXIoKSksCiAgICAgICAgICAgICgncGFjaycsIGRvd25fdGV4dCksCiAgICAgICAgXSkKCiAgICAg
ICAgZmlsbCA9IHVyd2lkLkZpbGxlcihwaWxlLCB2YWxpZ249J3RvcCcsIGhlaWdodD0oJ3JlbGF0
aXZlJywgMTAwKSkKCiAgICAgICAgdGl0bGUgPSBmIlNlbGVjdCB2ZXJzaW9uIGZvciAne2ZpbGVf
ZGF0YVsnbmFtZSddfSciCiAgICAgICAgbGluZWJveCA9IHVyd2lkLkxpbmVCb3goZmlsbCwgdGl0
bGU9dGl0bGUpCgogICAgICAgIHN1cGVyKCkuX19pbml0X18odXJ3aWQuQXR0ck1hcChsaW5lYm94
LCAnZGlhbG9nJykpCgogICAgZGVmIGtleXByZXNzKHNlbGYsIHNpemUsIGtleSk6CiAgICAgICAg
aWYga2V5ID09ICdlc2MnOgogICAgICAgICAgICBzZWxmLmNhbGxiYWNrKCdjYW5jZWwnLCBOb25l
KQogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICMgRW50ZXIg0L/QviDRg9C80L7Qu9GH
0LDQvdC40Y4g0LTQtdC70LDQtdGCIFZpZXcg0LTQu9GPINCy0YvQsdGA0LDQvdC90L7QuSDQstC1
0YDRgdC40LgKICAgICAgICBmb3IgcmIgaW4gc2VsZi5yYWRpb19ncm91cDoKICAgICAgICAgICAg
aWYgcmIuc3RhdGU6CiAgICAgICAgICAgICAgICBpZiBrZXkgPT0gJ2VudGVyJzoKICAgICAgICAg
ICAgICAgICAgICBidG4gPSBnZXRfZm9jdXNfYnV0dG9uKHNlbGYuX3cpCiAgICAgICAgICAgICAg
ICAgICAgaWYgYnRuIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBpc2lu
c3RhbmNlKGJ0biwgdXJ3aWQuQnV0dG9uKSBhbmQgYnRuLmdldF9sYWJlbCgpID09ICdbIENhbmNl
bCBdJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgRW50ZXIg0L3QsCBDYW5jZWwgLT4g
0L7RgtC80LXQvdCwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrKCdj
YW5jZWwnLCBOb25lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAg
ICAgICAgICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShidG4sIHVyd2lkLkJ1dHRvbikgYW5k
IGJ0bi5nZXRfbGFiZWwoKSA9PSAnWyBEZWxldGUgXSc6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzZWxmLmNhbGxiYWNrKCdkZWxldGUnLCByYi52ZXJzaW9uX2RhdGEpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAgICAgICAgICAgICBpZiBp
c2luc3RhbmNlKGJ0biwgdXJ3aWQuQnV0dG9uKSBhbmQgYnRuLmdldF9sYWJlbCgpID09ICdbIE1v
dmUgXSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrKCdtb3ZlJywg
cmIudmVyc2lvbl9kYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUK
ICAgICAgICAgICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShidG4sIHVyd2lkLkJ1dHRvbikg
YW5kIGJ0bi5nZXRfbGFiZWwoKSA9PSAnWyBDb3B5IF0nOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc2VsZi5jYWxsYmFjaygnY29weScsIHJiLnZlcnNpb25fZGF0YSkKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxs
YmFjaygndmlldycsIHJiLnZlcnNpb25fZGF0YSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4g
Tm9uZQogICAgICAgICAgICAgICAgaWYga2V5ID09ICdmMyc6CiAgICAgICAgICAgICAgICAgICAg
c2VsZi5jYWxsYmFjaygndmlldycsIHJiLnZlcnNpb25fZGF0YSkKICAgICAgICAgICAgICAgICAg
ICByZXR1cm4gTm9uZQogICAgICAgICAgICAgICAgaWYga2V5ID09ICdmNSc6CiAgICAgICAgICAg
ICAgICAgICAgc2VsZi5jYWxsYmFjaygnY29weScsIHJiLnZlcnNpb25fZGF0YSkKICAgICAgICAg
ICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAgICAgaWYga2V5ID09ICdmNic6CiAg
ICAgICAgICAgICAgICAgICAgc2VsZi5jYWxsYmFjaygnbW92ZScsIHJiLnZlcnNpb25fZGF0YSkK
ICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAgICAgaWYga2V5ID09
ICdmOCc6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxsYmFjaygnZGVsZXRlJywgcmIudmVy
c2lvbl9kYXRhKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgcmV0dXJu
IHN1cGVyKCkua2V5cHJlc3Moc2l6ZSwga2V5KQoKCmNsYXNzIE92ZXJ3cml0ZURpYWxvZyh1cndp
ZC5XaWRnZXRXcmFwKToKICAgICIiItCU0LjQsNC70L7QsyDQv9C+0LTRgtCy0LXRgNC20LTQtdC9
0LjRjyDQv9C10YDQtdC30LDQv9C40YHQuCDRhNCw0LnQu9CwIiIiCgogICAgZGVmIF9faW5pdF9f
KHNlbGYsIGZpbGVuYW1lLCBzb3VyY2VfaW5mbywgZGVzdF9pbmZvLCBjYWxsYmFjaywgc2hvd192
ZXJzaW9uX29wdGlvbnM9RmFsc2UpOgogICAgICAgIHNlbGYuY2FsbGJhY2sgPSBjYWxsYmFjawoK
ICAgICAgICB0aXRsZV90ZXh0ID0gdXJ3aWQuVGV4dCgnRmlsZSBhbHJlYWR5IGV4aXN0cyEnLCBh
bGlnbj0nY2VudGVyJykKICAgICAgICBmaWxlX3RleHQgPSB1cndpZC5UZXh0KGYnRmlsZToge2Zp
bGVuYW1lfScpCgogICAgICAgIHNyY19zaXplID0gc291cmNlX2luZm8uZ2V0KCJzaXplIiwgMCkK
ICAgICAgICBkc3Rfc2l6ZSA9IGRlc3RfaW5mby5nZXQoInNpemUiLCAwKQoKICAgICAgICBzcmNf
bXRpbWUgPSBzb3VyY2VfaW5mby5nZXQoIm10aW1lIikKICAgICAgICBkc3RfbXRpbWUgPSBkZXN0
X2luZm8uZ2V0KCJtdGltZSIpCgogICAgICAgIHNyY190aW1lX3N0ciA9IHNyY19tdGltZS5zdHJm
dGltZSgiJVktJW0tJWQgJUg6JU06JVMiKSBpZiBzcmNfbXRpbWUgZWxzZSAiTi9BIgogICAgICAg
IGRzdF90aW1lX3N0ciA9IGRzdF9tdGltZS5zdHJmdGltZSgiJVktJW0tJWQgJUg6JU06JVMiKSBp
ZiBkc3RfbXRpbWUgZWxzZSAiTi9BIgoKICAgICAgICBzb3VyY2VfdGV4dCA9IHVyd2lkLlRleHQo
ZidTb3VyY2U6IHtmb3JtYXRfc2l6ZShzcmNfc2l6ZSl9IHwge3NyY190aW1lX3N0cn0nKQogICAg
ICAgIGRlc3RfdGV4dCA9IHVyd2lkLlRleHQoZidUYXJnZXQ6IHtmb3JtYXRfc2l6ZShkc3Rfc2l6
ZSl9IHwge2RzdF90aW1lX3N0cn0nKQoKICAgICAgICBidXR0b25zX2xpc3QgPSBbXQoKICAgICAg
ICBvdmVyd3JpdGVfYnV0dG9uID0gdXJ3aWQuQnV0dG9uKCdbIE92ZXJ3cml0ZSBdJykKICAgICAg
ICBhbGxfYnV0dG9uID0gdXJ3aWQuQnV0dG9uKCdbIEFsbCBdJykKICAgICAgICB1cndpZC5jb25u
ZWN0X3NpZ25hbChvdmVyd3JpdGVfYnV0dG9uLCAnY2xpY2snLCBsYW1iZGEgYjogc2VsZi5vbl9j
aG9pY2UoJ292ZXJ3cml0ZScpKQogICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFsKGFsbF9idXR0
b24sICdjbGljaycsIGxhbWJkYSBiOiBzZWxmLm9uX2Nob2ljZSgnYWxsJykpCiAgICAgICAgYnV0
dG9uc19saXN0LmV4dGVuZChbCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAob3Zl
cndyaXRlX2J1dHRvbiwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uX2ZvY3VzJykpLAogICAg
ICAgICAgICAoJ2ZpeGVkJywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgICAgICAoJ3BhY2sn
LCB1cndpZC5BdHRyTWFwKGFsbF9idXR0b24sICdidXR0b24nLCBmb2N1c19tYXA9J2J1dHRvbl9m
b2N1cycpKSwKICAgICAgICAgICAgKCdmaXhlZCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAg
ICBdKQoKICAgICAgICBpZiBzaG93X3ZlcnNpb25fb3B0aW9uczoKICAgICAgICAgICAgdmVyc2lv
bl9idXR0b24gPSB1cndpZC5CdXR0b24oJ1sgTmV3IFZlcnNpb24gXScpCiAgICAgICAgICAgIHZl
cnNpb25fYWxsX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBWZXJzaW9uIEFsbCBdJykKICAgICAg
ICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwodmVyc2lvbl9idXR0b24sICdjbGljaycsIGxhbWJk
YSBiOiBzZWxmLm9uX2Nob2ljZSgndmVyc2lvbicpKQogICAgICAgICAgICB1cndpZC5jb25uZWN0
X3NpZ25hbCh2ZXJzaW9uX2FsbF9idXR0b24sICdjbGljaycsIGxhbWJkYSBiOiBzZWxmLm9uX2No
b2ljZSgndmVyc2lvbl9hbGwnKSkKICAgICAgICAgICAgYnV0dG9uc19saXN0LmV4dGVuZChbCiAg
ICAgICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKHZlcnNpb25fYnV0dG9uLCAnYnV0
dG9uJywgZm9jdXNfbWFwPSdidXR0b25fZm9jdXMnKSksCiAgICAgICAgICAgICAgICAoJ2ZpeGVk
JywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0
ck1hcCh2ZXJzaW9uX2FsbF9idXR0b24sICdidXR0b24nLCBmb2N1c19tYXA9J2J1dHRvbl9mb2N1
cycpKSwKICAgICAgICAgICAgICAgICgnZml4ZWQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAg
ICAgICAgIF0pCgogICAgICAgIHNraXBfYnV0dG9uID0gdXJ3aWQuQnV0dG9uKCdbIFNraXAgXScp
CiAgICAgICAgc2tpcF9hbGxfYnV0dG9uID0gdXJ3aWQuQnV0dG9uKCdbIFNraXAgQWxsIF0nKQog
ICAgICAgIGNhbmNlbF9idXR0b24gPSB1cndpZC5CdXR0b24oJ1sgQ2FuY2VsIF0nKQogICAgICAg
IHVyd2lkLmNvbm5lY3Rfc2lnbmFsKHNraXBfYnV0dG9uLCAnY2xpY2snLCBsYW1iZGEgYjogc2Vs
Zi5vbl9jaG9pY2UoJ3NraXAnKSkKICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChza2lwX2Fs
bF9idXR0b24sICdjbGljaycsIGxhbWJkYSBiOiBzZWxmLm9uX2Nob2ljZSgnc2tpcF9hbGwnKSkK
ICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChjYW5jZWxfYnV0dG9uLCAnY2xpY2snLCBsYW1i
ZGEgYjogc2VsZi5vbl9jaG9pY2UoJ2NhbmNlbCcpKQogICAgICAgIGJ1dHRvbnNfbGlzdC5leHRl
bmQoWwogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKHNraXBfYnV0dG9uLCAnYnV0
dG9uJywgZm9jdXNfbWFwPSdidXR0b25fZm9jdXMnKSksCiAgICAgICAgICAgICgnZml4ZWQnLCAx
LCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAoc2tp
cF9hbGxfYnV0dG9uLCAnYnV0dG9uJywgZm9jdXNfbWFwPSdidXR0b25fZm9jdXMnKSksCiAgICAg
ICAgICAgICgnZml4ZWQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICgncGFjaycs
IHVyd2lkLkF0dHJNYXAoY2FuY2VsX2J1dHRvbiwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9u
X2ZvY3VzJykpLAogICAgICAgIF0pCgogICAgICAgIGJ1dHRvbnNfbGlzdC5pbnNlcnQoMCwgKCd3
ZWlnaHQnLCAxLCB1cndpZC5UZXh0KCcnKSkpCiAgICAgICAgYnV0dG9uc19saXN0LmFwcGVuZCgo
J3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSkKCiAgICAgICAgYnV0dG9ucyA9IHVyd2lkLkNv
bHVtbnMoYnV0dG9uc19saXN0LCBkaXZpZGVjaGFycz0wKQoKICAgICAgICBwaWxlID0gdXJ3aWQu
UGlsZShbCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgICAg
ICgncGFjaycsIHRpdGxlX3RleHQpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVy
KCkpLAogICAgICAgICAgICAoJ3BhY2snLCBmaWxlX3RleHQpLAogICAgICAgICAgICAoJ3BhY2sn
LCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAoJ3BhY2snLCBzb3VyY2VfdGV4dCksCiAg
ICAgICAgICAgICgncGFjaycsIGRlc3RfdGV4dCksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lk
LkRpdmlkZXIoKSksCiAgICAgICAgICAgICgncGFjaycsIGJ1dHRvbnMpLAogICAgICAgICAgICAo
J3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgIF0pCiAgICAgICAgZmlsbCA9IHVyd2lk
LkZpbGxlcihwaWxlLCB2YWxpZ249J3RvcCcpCiAgICAgICAgbGluZWJveCA9IHVyd2lkLkxpbmVC
b3goZmlsbCkKCiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyh1cndpZC5BdHRyTWFwKGxpbmVib3gs
ICdkaWFsb2cnKSkKCiAgICBkZWYgb25fY2hvaWNlKHNlbGYsIGNob2ljZSk6CiAgICAgICAgc2Vs
Zi5jYWxsYmFjayhjaG9pY2UpCgogICAgZGVmIGtleXByZXNzKHNlbGYsIHNpemUsIGtleSk6CiAg
ICAgICAgaWYga2V5ID09ICdlc2MnOgogICAgICAgICAgICBzZWxmLmNhbGxiYWNrKCdjYW5jZWwn
KQogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIHJldHVybiBzdXBlcigpLmtleXByZXNz
KHNpemUsIGtleSkKCgpjbGFzcyBQcm9ncmVzc0RpYWxvZyh1cndpZC5XaWRnZXRXcmFwKToKICAg
ICIiItCU0LjQsNC70L7QsyDQv9GA0L7Qs9GA0LXRgdGB0LAg0L7Qv9C10YDQsNGG0LjQuSDQsiDR
gdGC0LjQu9C1IE1DIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHRpdGxlLCBjYWxsYmFjaz1O
b25lKToKICAgICAgICBzZWxmLmNhbGxiYWNrID0gY2FsbGJhY2sKICAgICAgICBzZWxmLnRpdGxl
X3RleHQgPSB1cndpZC5UZXh0KHRpdGxlLCBhbGlnbj0nY2VudGVyJykKICAgICAgICBzZWxmLnBy
b2dyZXNzX3RleHQgPSB1cndpZC5UZXh0KCcnLCBhbGlnbj0nbGVmdCcpCiAgICAgICAgc2VsZi5m
aWxlX3RleHQgPSB1cndpZC5UZXh0KCcnLCBhbGlnbj0nbGVmdCcpCiAgICAgICAgc2VsZi5zdGF0
c190ZXh0ID0gdXJ3aWQuVGV4dCgnJywgYWxpZ249J2xlZnQnKQogICAgICAgIHNlbGYuYnl0ZXNf
dGV4dCA9IHVyd2lkLlRleHQoJycsIGFsaWduPSdsZWZ0JykKCiAgICAgICAgc2VsZi50b3RhbF9m
aWxlcyA9IDAKICAgICAgICBzZWxmLnByb2Nlc3NlZF9maWxlcyA9IDAKICAgICAgICBzZWxmLnN1
Y2Nlc3NfY291bnQgPSAwCiAgICAgICAgc2VsZi5mYWlsX2NvdW50ID0gMAogICAgICAgIHNlbGYu
Y3VycmVudF9maWxlID0gJycKICAgICAgICBzZWxmLnRvdGFsX2J5dGVzID0gMAogICAgICAgIHNl
bGYucHJvY2Vzc2VkX2J5dGVzID0gMAogICAgICAgIHNlbGYuc3RhcnRfdGltZSA9IHRpbWUudGlt
ZSgpCgogICAgICAgIHNraXBfYnV0dG9uID0gdXJ3aWQuQnV0dG9uKCdbIFNraXAgXScpCiAgICAg
ICAgY2FuY2VsX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBDYW5jZWwgXScpCgogICAgICAgIHNl
bGYuY2FuY2VsbGVkID0gRmFsc2UKCiAgICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwoc2tpcF9i
dXR0b24sICdjbGljaycsIGxhbWJkYSBiOiBOb25lKQogICAgICAgIHVyd2lkLmNvbm5lY3Rfc2ln
bmFsKGNhbmNlbF9idXR0b24sICdjbGljaycsIHNlbGYub25fY2FuY2VsKQoKICAgICAgICBidXR0
b25zID0gdXJ3aWQuQ29sdW1ucyhbCiAgICAgICAgICAgICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4
dCgnJykpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKHNraXBfYnV0dG9uLCAn
YnV0dG9uJywgZm9jdXNfbWFwPSdidXR0b25fZm9jdXMnKSksCiAgICAgICAgICAgICgnZml4ZWQn
LCAyLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAo
Y2FuY2VsX2J1dHRvbiwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uX2ZvY3VzJykpLAogICAg
ICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICBdLCBkaXZpZGVj
aGFycz0wKQoKICAgICAgICBwaWxlID0gdXJ3aWQuUGlsZShbCiAgICAgICAgICAgICgncGFjaycs
IHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgICAgICgncGFjaycsIHNlbGYudGl0bGVfdGV4dCks
CiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgICAgICgncGFj
aycsIHNlbGYucHJvZ3Jlc3NfdGV4dCksCiAgICAgICAgICAgICgncGFjaycsIHNlbGYuZmlsZV90
ZXh0KSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAgICAg
KCdwYWNrJywgc2VsZi5zdGF0c190ZXh0KSwKICAgICAgICAgICAgKCdwYWNrJywgc2VsZi5ieXRl
c190ZXh0KSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAg
ICAgKCdwYWNrJywgYnV0dG9ucyksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRpdmlkZXIo
KSksCiAgICAgICAgXSkKCiAgICAgICAgZmlsbCA9IHVyd2lkLkZpbGxlcihwaWxlLCB2YWxpZ249
J3RvcCcpCiAgICAgICAgbGluZWJveCA9IHVyd2lkLkxpbmVCb3goZmlsbCkKCiAgICAgICAgc3Vw
ZXIoKS5fX2luaXRfXyh1cndpZC5BdHRyTWFwKGxpbmVib3gsICdkaWFsb2cnKSkKCiAgICBkZWYg
b25fY2FuY2VsKHNlbGYsIGJ1dHRvbik6CiAgICAgICAgc2VsZi5jYW5jZWxsZWQgPSBUcnVlCiAg
ICAgICAgaWYgc2VsZi5jYWxsYmFjazoKICAgICAgICAgICAgc2VsZi5jYWxsYmFjaygpCgogICAg
ZGVmIGtleXByZXNzKHNlbGYsIHNpemUsIGtleSk6CiAgICAgICAgaWYga2V5ID09ICdlc2MnOgog
ICAgICAgICAgICBzZWxmLm9uX2NhbmNlbChOb25lKQogICAgICAgICAgICByZXR1cm4gTm9uZQog
ICAgICAgIHJldHVybiBzdXBlcigpLmtleXByZXNzKHNpemUsIGtleSkKCiAgICBkZWYgZ2V0X3Nw
ZWVkX3N0cihzZWxmKToKICAgICAgICAiIiLQn9C+0LvRg9GH0LjRgtGMINGB0YLRgNC+0LrRgyDR
gdC60L7RgNC+0YHRgtC4INC/0LXRgNC10LTQsNGH0LgiIiIKICAgICAgICBlbGFwc2VkID0gdGlt
ZS50aW1lKCkgLSBzZWxmLnN0YXJ0X3RpbWUKICAgICAgICBpZiBlbGFwc2VkID4gMDoKICAgICAg
ICAgICAgc3BlZWQgPSBzZWxmLnByb2Nlc3NlZF9ieXRlcyAvIGVsYXBzZWQKICAgICAgICAgICAg
cmV0dXJuIGYne2Zvcm1hdF9zaXplKHNwZWVkKX0vcycKICAgICAgICByZXR1cm4gJzAgQi9zJwoK
ICAgIGRlZiB1cGRhdGUoc2VsZiwgY3VycmVudF9maWxlPScnLCBmaWxlX3NpemU9MCk6CiAgICAg
ICAgaWYgY3VycmVudF9maWxlOgogICAgICAgICAgICBzZWxmLmN1cnJlbnRfZmlsZSA9IGN1cnJl
bnRfZmlsZQogICAgICAgICAgICBzZWxmLnByb2Nlc3NlZF9maWxlcyArPSAxCiAgICAgICAgICAg
IHNlbGYucHJvY2Vzc2VkX2J5dGVzICs9IGZpbGVfc2l6ZQoKICAgICAgICBpZiBzZWxmLnRvdGFs
X2ZpbGVzID4gMDoKICAgICAgICAgICAgcGVyY2VudCA9IGludCgoc2VsZi5wcm9jZXNzZWRfZmls
ZXMgLyBzZWxmLnRvdGFsX2ZpbGVzKSAqIDEwMCkKICAgICAgICAgICAgYmFyX3dpZHRoID0gNDAK
ICAgICAgICAgICAgZmlsbGVkID0gaW50KChzZWxmLnByb2Nlc3NlZF9maWxlcyAvIHNlbGYudG90
YWxfZmlsZXMpICogYmFyX3dpZHRoKQogICAgICAgICAgICBiYXIgPSAn4paIJyAqIGZpbGxlZCAr
ICfilpEnICogKGJhcl93aWR0aCAtIGZpbGxlZCkKICAgICAgICAgICAgc2VsZi5wcm9ncmVzc190
ZXh0LnNldF90ZXh0KGYnW3tiYXJ9XSB7cGVyY2VudH0lJykKCiAgICAgICAgaWYgc2VsZi5jdXJy
ZW50X2ZpbGU6CiAgICAgICAgICAgIGRpc3BsYXlfZmlsZSA9IHNlbGYuY3VycmVudF9maWxlCiAg
ICAgICAgICAgIGlmIGxlbihkaXNwbGF5X2ZpbGUpID4gNjA6CiAgICAgICAgICAgICAgICBkaXNw
bGF5X2ZpbGUgPSAnLi4uJyArIGRpc3BsYXlfZmlsZVstNTc6XQogICAgICAgICAgICBzZWxmLmZp
bGVfdGV4dC5zZXRfdGV4dChmJ0ZpbGU6IHtkaXNwbGF5X2ZpbGV9JykKCiAgICAgICAgc2VsZi5z
dGF0c190ZXh0LnNldF90ZXh0KAogICAgICAgICAgICBmJ1RvdGFsOiB7c2VsZi50b3RhbF9maWxl
c30gfCBQcm9jZXNzZWQ6IHtzZWxmLnByb2Nlc3NlZF9maWxlc30gfCAnCiAgICAgICAgICAgIGYn
U3VjY2Vzczoge3NlbGYuc3VjY2Vzc19jb3VudH0gfCBGYWlsZWQ6IHtzZWxmLmZhaWxfY291bnR9
JwogICAgICAgICkKCiAgICAgICAgaWYgc2VsZi50b3RhbF9ieXRlcyA+IDA6CiAgICAgICAgICAg
IGJ5dGVzX3BlcmNlbnQgPSBpbnQoKHNlbGYucHJvY2Vzc2VkX2J5dGVzIC8gc2VsZi50b3RhbF9i
eXRlcykgKiAxMDApIGlmIHNlbGYudG90YWxfYnl0ZXMgPiAwIGVsc2UgMAogICAgICAgICAgICBz
cGVlZF9zdHIgPSBzZWxmLmdldF9zcGVlZF9zdHIoKQogICAgICAgICAgICBzZWxmLmJ5dGVzX3Rl
eHQuc2V0X3RleHQoCiAgICAgICAgICAgICAgICBmJ0J5dGVzOiB7Zm9ybWF0X3NpemUoc2VsZi5w
cm9jZXNzZWRfYnl0ZXMpfSAvIHtmb3JtYXRfc2l6ZShzZWxmLnRvdGFsX2J5dGVzKX0gKHtieXRl
c19wZXJjZW50fSUpIHwgU3BlZWQ6IHtzcGVlZF9zdHJ9JwogICAgICAgICAgICApCgogICAgZGVm
IHNldF90b3RhbChzZWxmLCB0b3RhbF9maWxlcywgdG90YWxfYnl0ZXM9MCk6CiAgICAgICAgc2Vs
Zi50b3RhbF9maWxlcyA9IHRvdGFsX2ZpbGVzCiAgICAgICAgc2VsZi50b3RhbF9ieXRlcyA9IHRv
dGFsX2J5dGVzCiAgICAgICAgc2VsZi5zdGFydF90aW1lID0gdGltZS50aW1lKCkKICAgICAgICBz
ZWxmLnVwZGF0ZSgpCgogICAgZGVmIGFkZF9zdWNjZXNzKHNlbGYpOgogICAgICAgIHNlbGYuc3Vj
Y2Vzc19jb3VudCArPSAxCiAgICAgICAgc2VsZi51cGRhdGUoKQoKICAgIGRlZiBhZGRfZmFpbHVy
ZShzZWxmKToKICAgICAgICBzZWxmLmZhaWxfY291bnQgKz0gMQogICAgICAgIHNlbGYudXBkYXRl
KCkKCgpjbGFzcyBTb3J0RGlhbG9nKHVyd2lkLldpZGdldFdyYXApOgogICAgIiIi0JTQuNCw0LvQ
vtCzINCy0YvQsdC+0YDQsCDRgNC10LbQuNC80LAg0YHQvtGA0YLQuNGA0L7QstC60LgiIiIKCiAg
ICBkZWYgX19pbml0X18oc2VsZiwgY3VycmVudF9tb2RlLCBjdXJyZW50X3JldmVyc2UsIGNhbGxi
YWNrKToKICAgICAgICBzZWxmLmNhbGxiYWNrID0gY2FsbGJhY2sKICAgICAgICBzZWxmLmN1cnJl
bnRfbW9kZSA9IGN1cnJlbnRfbW9kZQogICAgICAgIHNlbGYuY3VycmVudF9yZXZlcnNlID0gY3Vy
cmVudF9yZXZlcnNlCgogICAgICAgICMg0KPQsdC40YDQsNC10LwgdGl0bGVfdGV4dCDQuNC3INC6
0L7QvdGC0LXQvdGC0LAsINC+0L0g0LHRg9C00LXRgiDQsiDRgNCw0LzQutC1CiAgICAgICAgIyB0
aXRsZV90ZXh0ID0gdXJ3aWQuVGV4dCgnU29ydCBieTonLCBhbGlnbj0nY2VudGVyJykKCiAgICAg
ICAgc2VsZi5yYWRpb19ncm91cCA9IFtdCiAgICAgICAgbW9kZXMgPSBbCiAgICAgICAgICAgICgn
bm9uZScsICdVbnNvcnRlZCcpLAogICAgICAgICAgICAoJ25hbWUnLCAnTmFtZScpLAogICAgICAg
ICAgICAoJ2V4dCcsICdFeHRlbnNpb24nKSwKICAgICAgICAgICAgKCdzaXplJywgJ1NpemUnKSwK
ICAgICAgICAgICAgKCd0aW1lJywgJ1RpbWUnKQogICAgICAgIF0KCiAgICAgICAgcmFkaW9fYnV0
dG9ucyA9IFtdCiAgICAgICAgZm9yIG1vZGUsIGxhYmVsIGluIG1vZGVzOgogICAgICAgICAgICBp
c19zZWxlY3RlZCA9IChtb2RlID09IGN1cnJlbnRfbW9kZSkKICAgICAgICAgICAgcmIgPSB1cndp
ZC5SYWRpb0J1dHRvbihzZWxmLnJhZGlvX2dyb3VwLCBsYWJlbCwgc3RhdGU9aXNfc2VsZWN0ZWQp
CiAgICAgICAgICAgIHJiLm1vZGUgPSBtb2RlCiAgICAgICAgICAgIHJhZGlvX2J1dHRvbnMuYXBw
ZW5kKHVyd2lkLkF0dHJNYXAocmIsIE5vbmUsIGZvY3VzX21hcD0nc2VsZWN0ZWQnKSkKCiAgICAg
ICAgc2VsZi5yZXZlcnNlX2NoZWNrYm94ID0gdXJ3aWQuQ2hlY2tCb3goIlJldmVyc2Ugb3JkZXIi
LCBzdGF0ZT1jdXJyZW50X3JldmVyc2UpCgogICAgICAgIG9rX2J1dHRvbiA9IHVyd2lkLkJ1dHRv
bignWyBPSyBdJykKICAgICAgICBjYW5jZWxfYnV0dG9uID0gdXJ3aWQuQnV0dG9uKCdbIENhbmNl
bCBdJykKCiAgICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwob2tfYnV0dG9uLCAnY2xpY2snLCBz
ZWxmLm9uX29rKQogICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFsKGNhbmNlbF9idXR0b24sICdj
bGljaycsIHNlbGYub25fY2FuY2VsKQoKICAgICAgICBidXR0b25zID0gdXJ3aWQuQ29sdW1ucyhb
CiAgICAgICAgICAgICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAgICAgICAgICAo
J3BhY2snLCB1cndpZC5BdHRyTWFwKG9rX2J1dHRvbiwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0
dG9uX2ZvY3VzJykpLAogICAgICAgICAgICAoJ2ZpeGVkJywgMiwgdXJ3aWQuVGV4dCgnJykpLAog
ICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKGNhbmNlbF9idXR0b24sICdidXR0b24n
LCBmb2N1c19tYXA9J2J1dHRvbl9mb2N1cycpKSwKICAgICAgICAgICAgKCd3ZWlnaHQnLCAxLCB1
cndpZC5UZXh0KCcnKSksCiAgICAgICAgXSwgZGl2aWRlY2hhcnM9MCkKCiAgICAgICAgY29udGVu
dCA9IFsKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAgICAg
IyAoJ3BhY2snLCB0aXRsZV90ZXh0KSwgIyDQo9C00LDQu9C10L3QvgogICAgICAgICAgICAjICgn
cGFjaycsIHVyd2lkLkRpdmlkZXIoKSksICMg0KPQtNCw0LvQtdC90L4KICAgICAgICBdCgogICAg
ICAgIGNvbnRlbnQuZXh0ZW5kKFsoJ3BhY2snLCByYikgZm9yIHJiIGluIHJhZGlvX2J1dHRvbnNd
KQoKICAgICAgICBjb250ZW50LmV4dGVuZChbCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkRp
dmlkZXIoKSksCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAoc2VsZi5yZXZlcnNl
X2NoZWNrYm94LCBOb25lLCBmb2N1c19tYXA9J3NlbGVjdGVkJykpLAogICAgICAgICAgICAoJ3Bh
Y2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAoJ3BhY2snLCBidXR0b25zKSwKICAg
ICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICBdKQoKICAgICAgICBw
aWxlID0gdXJ3aWQuUGlsZShjb250ZW50KQogICAgICAgIGZpbGwgPSB1cndpZC5GaWxsZXIocGls
ZSwgdmFsaWduPSd0b3AnKQoKICAgICAgICAjIEZJWDog0JfQsNCz0L7Qu9C+0LLQvtC6INC/0LXR
gNC10L3QtdGB0LXQvSDQsiB0aXRsZSDRgNCw0LzQutC4CiAgICAgICAgbGluZWJveCA9IHVyd2lk
LkxpbmVCb3goZmlsbCwgdGl0bGU9IlNvcnQgYnkiKQoKICAgICAgICBzdXBlcigpLl9faW5pdF9f
KHVyd2lkLkF0dHJNYXAobGluZWJveCwgJ2RpYWxvZycpKQoKICAgIGRlZiBvbl9vayhzZWxmLCBi
dXR0b24pOgogICAgICAgIHJldmVyc2UgPSBzZWxmLnJldmVyc2VfY2hlY2tib3guZ2V0X3N0YXRl
KCkKICAgICAgICBmb3IgcmIgaW4gc2VsZi5yYWRpb19ncm91cDoKICAgICAgICAgICAgaWYgcmIu
c3RhdGU6CiAgICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrKFRydWUsIHJiLm1vZGUsIHJldmVy
c2UpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICBzZWxmLmNhbGxiYWNrKEZhbHNlLCBO
b25lLCBGYWxzZSkKCiAgICBkZWYgb25fY2FuY2VsKHNlbGYsIGJ1dHRvbik6CiAgICAgICAgc2Vs
Zi5jYWxsYmFjayhGYWxzZSwgTm9uZSwgRmFsc2UpCgogICAgZGVmIGtleXByZXNzKHNlbGYsIHNp
emUsIGtleSk6CiAgICAgICAgaWYga2V5ID09ICdlbnRlcic6CiAgICAgICAgICAgIHNlbGYub25f
b2soTm9uZSkKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICBlbGlmIGtleSA9PSAnZXNj
JzoKICAgICAgICAgICAgc2VsZi5vbl9jYW5jZWwoTm9uZSkKICAgICAgICAgICAgcmV0dXJuIE5v
bmUKICAgICAgICByZXR1cm4gc3VwZXIoKS5rZXlwcmVzcyhzaXplLCBrZXkpCgoKY2xhc3MgQ29w
eU1vdmVEaWFsb2codXJ3aWQuV2lkZ2V0V3JhcCk6CiAgICAiIiLQlNC40LDQu9C+0LMg0LrQvtC/
0LjRgNC+0LLQsNC90LjRjy/Qv9C10YDQtdC80LXRidC10L3QuNGPINCyINGB0YLQuNC70LUgTUMi
IiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdGl0bGUsIHNvdXJjZV9kZXNjLCBkZXN0X3BhdGgs
IGNhbGxiYWNrKToKICAgICAgICBzZWxmLmNhbGxiYWNrID0gY2FsbGJhY2sKCiAgICAgICAgIyB0
aXRsZV90ZXh0ID0gdXJ3aWQuVGV4dCgoJ2RpYWxvZ190aXRsZScsIHRpdGxlKSwgYWxpZ249J2Nl
bnRlcicpCiAgICAgICAgc291cmNlX3RleHQgPSB1cndpZC5UZXh0KHNvdXJjZV9kZXNjKQogICAg
ICAgIHRvX3RleHQgPSB1cndpZC5UZXh0KCJUbzogIikKICAgICAgICBmcm9tX3RleHQgPSB1cndp
ZC5UZXh0KCJGcm9tOiAiKQogICAgICAgIHNlbGYuZGVzdF9lZGl0ID0gdXJ3aWQuRWRpdCgnJywg
ZGVzdF9wYXRoKQoKICAgICAgICBva19idXR0b24gPSB1cndpZC5CdXR0b24oJ1sgT0sgXScpCiAg
ICAgICAgY2FuY2VsX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBDYW5jZWwgXScpCgogICAgICAg
IHVyd2lkLmNvbm5lY3Rfc2lnbmFsKG9rX2J1dHRvbiwgJ2NsaWNrJywgc2VsZi5vbl9vaykKICAg
ICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChjYW5jZWxfYnV0dG9uLCAnY2xpY2snLCBzZWxmLm9u
X2NhbmNlbCkKCiAgICAgICAgYnV0dG9ucyA9IHVyd2lkLkNvbHVtbnMoWwogICAgICAgICAgICAo
J3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQu
QXR0ck1hcChva19idXR0b24sICdidXR0b24nLCBmb2N1c19tYXA9J2J1dHRvbl9mb2N1cycpKSwK
ICAgICAgICAgICAgKCdmaXhlZCcsIDIsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICAgICAgKCdw
YWNrJywgdXJ3aWQuQXR0ck1hcChjYW5jZWxfYnV0dG9uLCAnYnV0dG9uJywgZm9jdXNfbWFwPSdi
dXR0b25fZm9jdXMnKSksCiAgICAgICAgICAgICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4dCgnJykp
LAogICAgICAgIF0sIGRpdmlkZWNoYXJzPTApCgogICAgICAgIHBpbGUgPSB1cndpZC5QaWxlKFsK
ICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICAgICAgKCdwYWNr
JywgZnJvbV90ZXh0KSwKICAgICAgICAgICAgKCdwYWNrJywgc291cmNlX3RleHQpLAogICAgICAg
ICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAoJ3BhY2snLCB0b190
ZXh0KSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcChzZWxmLmRlc3RfZWRpdCwg
J2VkaXQnLCBmb2N1c19tYXA9J2VkaXRfZm9jdXMnKSksCiAgICAgICAgICAgICgncGFjaycsIHVy
d2lkLkRpdmlkZXIoKSksCiAgICAgICAgICAgICgncGFjaycsIGJ1dHRvbnMpLAogICAgICAgICAg
ICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgIF0pCgogICAgICAgIGZpbGwgPSB1
cndpZC5GaWxsZXIocGlsZSwgdmFsaWduPSd0b3AnKQogICAgICAgIGxpbmVib3ggPSB1cndpZC5M
aW5lQm94KGZpbGwsIHRpdGxlPXRpdGxlKQoKICAgICAgICBzdXBlcigpLl9faW5pdF9fKHVyd2lk
LkF0dHJNYXAobGluZWJveCwgJ2RpYWxvZycpKQoKICAgIGRlZiBrZXlwcmVzcyhzZWxmLCBzaXpl
LCBrZXkpOgogICAgICAgIGlmIGtleSA9PSAnZW50ZXInOgogICAgICAgICAgICBidG4gPSBnZXRf
Zm9jdXNfYnV0dG9uKHNlbGYuX3cpCiAgICAgICAgICAgIGlmIGJ0biBpcyBub3QgTm9uZToKICAg
ICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYnRuLCB1cndpZC5CdXR0b24pIGFuZCBidG4uZ2V0
X2xhYmVsKCkgPT0gJ1sgQ2FuY2VsIF0nOgogICAgICAgICAgICAgICAgICAgICMgRW50ZXIg0L3Q
sCBDYW5jZWwgLT4g0L7RgtC80LXQvdCwCiAgICAgICAgICAgICAgICAgICAgc2VsZi5vbl9jYW5j
ZWwoTm9uZSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAjINCS
0YHQtSDQvtGB0YLQsNC70YzQvdGL0LUg0YHQu9GD0YfQsNC4OiBFbnRlciAtPiBPSwogICAgICAg
ICAgICBzZWxmLm9uX29rKE5vbmUpCiAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgICAgIGVs
aWYga2V5ID09ICdlc2MnOgogICAgICAgICAgICBzZWxmLm9uX2NhbmNlbChOb25lKQogICAgICAg
ICAgICByZXR1cm4gTm9uZQoKICAgICAgICByZXR1cm4gc3VwZXIoKS5rZXlwcmVzcyhzaXplLCBr
ZXkpCgogICAgZGVmIG9uX29rKHNlbGYsIGJ1dHRvbik6CiAgICAgICAgZGVzdCA9IHNlbGYuZGVz
dF9lZGl0LmdldF9lZGl0X3RleHQoKQogICAgICAgIHNlbGYuY2FsbGJhY2soVHJ1ZSwgZGVzdCkK
CiAgICBkZWYgb25fY2FuY2VsKHNlbGYsIGJ1dHRvbik6CiAgICAgICAgc2VsZi5jYWxsYmFjayhG
YWxzZSwgTm9uZSkKCgpjbGFzcyBQYW5lbFdpZGdldCh1cndpZC5XaWRnZXRXcmFwKToKCiAgICBk
ZWYgX19pbml0X18oc2VsZiwgdGl0bGUsIHBhbmVsX3R5cGU9J2ZzJywgczNfY29uZmlnPU5vbmUs
IGFwcD1Ob25lKToKICAgICAgICBzZWxmLnRpdGxlID0gdGl0bGUKICAgICAgICBzZWxmLnBhbmVs
X3R5cGUgPSBwYW5lbF90eXBlCiAgICAgICAgc2VsZi5yZXN0b3JlX2ZvY3VzX2luZGV4ID0gTm9u
ZQogICAgICAgIHNlbGYuczNfY29uZmlnID0gczNfY29uZmlnCiAgICAgICAgc2VsZi5zM19tYW5h
Z2VyID0gTm9uZQogICAgICAgIHNlbGYuZnNfYnJvd3NlciA9IEZpbGVTeXN0ZW1Ccm93c2VyKCkg
aWYgcGFuZWxfdHlwZSA9PSAnZnMnIGVsc2UgTm9uZQogICAgICAgIHNlbGYuYXBwID0gYXBwCgog
ICAgICAgICMg0YTQuNC70YzRgtGAINC00LvRjyDRgdC/0LjRgdC60LAg0LHQsNC60LXRgtC+0LIg
KNC60L7Qs9C00LAgc2VsZi5jdXJyZW50X2J1Y2tldCBpcyBOb25lKQogICAgICAgIHNlbGYuYnVj
a2V0X2ZpbHRlcl9wYXR0ZXJuID0gTm9uZQogICAgICAgIHNlbGYuYnVja2V0X2ZpbHRlcl9tb2Rl
ID0gRmFsc2UKCiAgICAgICAgIyDRhNC40LvRjNGC0YAg0LTQu9GPINC+0LHRitC10LrRgtC+0LIg
0LLQvdGD0YLRgNC4INCx0LDQutC10YLQsCAo0LrQvtCz0LTQsCBzZWxmLmN1cnJlbnRfYnVja2V0
IGlzIG5vdCBOb25lKQogICAgICAgIHNlbGYub2JqZWN0X2ZpbHRlcl9wYXR0ZXJuID0gTm9uZQog
ICAgICAgIHNlbGYub2JqZWN0X2ZpbHRlcl9tb2RlID0gRmFsc2UKCiAgICAgICAgIyDQktC40LTQ
ttC10YIg0LLQstC+0LTQsCDRhNC40LvRjNGC0YDQsCAo0L/QvtGP0LLQu9GP0LXRgtGB0Y8g0LLQ
vdC40LfRgykKICAgICAgICBzZWxmLmZpbHRlcl9lZGl0ID0gdXJ3aWQuRWRpdChjYXB0aW9uPSIv
IikKICAgICAgICAjINCe0LHQvtGA0LDRh9C40LLQsNC10Lwg0LIg0YHRgtC40LvRjCAnc3RhdHVz
JyAo0LjQu9C4INC70Y7QsdC+0Lkg0LTRgNGD0LPQvtC5INC60L7QvdGC0YDQsNGB0YLQvdGL0Lkp
CiAgICAgICAgc2VsZi5maWx0ZXJfd2lkZ2V0ID0gdXJ3aWQuQXR0ck1hcChzZWxmLmZpbHRlcl9l
ZGl0LCAnc3RhdHVzJykKCiAgICAgICAgc2VsZi5jdXJyZW50X2VuZHBvaW50ID0gTm9uZQogICAg
ICAgIHNlbGYuY3VycmVudF9idWNrZXQgPSBOb25lCiAgICAgICAgc2VsZi5jdXJyZW50X3ByZWZp
eCA9ICcnCiAgICAgICAgc2VsZi5tb2RlID0gcGFuZWxfdHlwZQoKICAgICAgICAjINCd0LDRgdGC
0YDQvtC50LrQuCDRgdC+0YDRgtC40YDQvtCy0LrQuAogICAgICAgIHNlbGYuc29ydF9tb2RlID0g
J25hbWUnIGlmIHBhbmVsX3R5cGUgPT0gJ2ZzJyBlbHNlICdub25lJwogICAgICAgIHNlbGYuc29y
dF9yZXZlcnNlID0gRmFsc2UKCiAgICAgICAgc2VsZi53YWxrZXIgPSB1cndpZC5TaW1wbGVGb2N1
c0xpc3RXYWxrZXIoW10pCgogICAgICAgICMg0J/QvtC00LTQtdGA0LbQutCwINC70LXQvdC40LLQ
vtC5INC30LDQs9GA0YPQt9C60LgKICAgICAgICBzZWxmLmxvYWRpbmdfaW5fcHJvZ3Jlc3MgPSBG
YWxzZQogICAgICAgIHNlbGYubG9hZGluZ190aHJlYWQgPSBOb25lCiAgICAgICAgc2VsZi5sYXp5
X2dlbmVyYXRvciA9IE5vbmUKICAgICAgICBzZWxmLmxpc3Rib3ggPSB1cndpZC5MaXN0Qm94KHNl
bGYud2Fsa2VyKQoKICAgICAgICAjINCh0L7RhdGA0LDQvdGP0LXQvCDRgdGB0YvQu9C60YMg0L3Q
sCDQstC40LTQttC10YIg0YLQtdC60YHRgtCwLCDRh9GC0L7QsdGLINC80LXQvdGP0YLRjCDQtdCz
0L4g0L/QvtC30LbQtQogICAgICAgIHNlbGYuaGVhZGVyX3RleHQgPSB1cndpZC5UZXh0KHRpdGxl
LCBhbGlnbj0nY2VudGVyJykKICAgICAgICAjIGhlYWRlcl93aWRnZXQgPSB1cndpZC5BdHRyTWFw
KHNlbGYuaGVhZGVyX3RleHQsICdoZWFkZXInKQoKICAgICAgICAjINCf0YPRgtGMIChGUzogL2hv
bWUvdXNlciDQuNC70LggUzM6IC9jZXBoL2J1Y2tldC8pCiAgICAgICAgc2VsZi5wYXRoX3RleHQg
PSB1cndpZC5UZXh0KCcnKQogICAgICAgIHBhdGhfd2lkZ2V0ID0gdXJ3aWQuQXR0ck1hcChzZWxm
LnBhdGhfdGV4dCwgJ3BhdGgnKQoKICAgICAgICAjINCe0LHQvtGA0LDRh9C40LLQsNC10LwgbGlz
dGJveCDQsiBTY3JvbGxCYXIKICAgICAgICBzZWxmLnNjcm9sbGJhciA9IFNjcm9sbEJhcihzZWxm
Lmxpc3Rib3gpCgogICAgICAgICMg0KHQvtC30LTQsNC10LwgRnJhbWUg0L7RgtC00LXQu9GM0L3Q
viwg0YfRgtC+0LHRiyDRgdC+0YXRgNCw0L3QuNGC0Ywg0YHRgdGL0LvQutGDINC4INC80LXQvdGP
0YLRjCBmb290ZXIKICAgICAgICBzZWxmLmZyYW1lID0gdXJ3aWQuRnJhbWUoCiAgICAgICAgICAg
IHVyd2lkLkF0dHJNYXAoc2VsZi5zY3JvbGxiYXIsICdib2R5JyksCiAgICAgICAgICAgIGhlYWRl
cj1wYXRoX3dpZGdldCwKICAgICAgICAgICAgZm9vdGVyPU5vbmUgICMg0JjQt9C90LDRh9Cw0LvR
jNC90L4g0YTRg9GC0LXRgNCwINC90LXRgiAo0YTQuNC70YzRgtGAINGB0LrRgNGL0YIpCiAgICAg
ICAgKQoKICAgICAgICBzZWxmLmxpbmVib3ggPSB1cndpZC5MaW5lQm94KHNlbGYuZnJhbWUpCgog
ICAgICAgIHN1cGVyKCkuX19pbml0X18oc2VsZi5saW5lYm94KSAgIyDQntCx0L7RgNCw0YfQuNCy
0LDQtdC8INCyIExpbmVCb3ggKNC10YHQu9C4INC90YPQttC90L4pCgogICAgICAgIHNlbGYucmVm
cmVzaCgpCgogICAgZGVmIF9zeW5jX2ZpbHRlcl9mb290ZXJfZm9yX3ZpZXcoc2VsZik6CiAgICAg
ICAgIyDQn9C+0LrQsNC30LDRgtGMIGZvb3RlciDRgtC+0LvRjNC60L4g0LXRgdC70Lgg0LDQutGC
0LjQstC10L0g0YDQtdC20LjQvCDRhNC40LvRjNGC0YDQsCDQsiDRgtC10LrRg9GJ0LXQvCB2aWV3
CiAgICAgICAgaWYgc2VsZi5maWx0ZXJfbW9kZToKICAgICAgICAgICAgc2VsZi5mcmFtZS5mb290
ZXIgPSBzZWxmLmZpbHRlcl93aWRnZXQKICAgICAgICAgICAgc2VsZi5mcmFtZS5mb2N1c19wb3Np
dGlvbiA9ICdmb290ZXInCiAgICAgICAgICAgIHNlbGYuZmlsdGVyX2VkaXQuc2V0X2VkaXRfdGV4
dChzZWxmLmZpbHRlcl9wYXR0ZXJuIG9yICIiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNl
bGYuZnJhbWUuZm9vdGVyID0gTm9uZQogICAgICAgICAgICBzZWxmLmZyYW1lLmZvY3VzX3Bvc2l0
aW9uID0gJ2JvZHknCiAgICAgICAgICAgIHNlbGYuZmlsdGVyX2VkaXQuc2V0X2VkaXRfdGV4dCgi
IikKCiAgICBkZWYgX2lzX2J1Y2tldF9saXN0X3ZpZXcoc2VsZik6CiAgICAgICAgcmV0dXJuIHNl
bGYubW9kZSA9PSAnczMnIGFuZCBzZWxmLmN1cnJlbnRfZW5kcG9pbnQgaXMgbm90IE5vbmUgYW5k
IHNlbGYuY3VycmVudF9idWNrZXQgaXMgTm9uZQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGZpbHRl
cl9tb2RlKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmJ1Y2tldF9maWx0ZXJfbW9kZSBpZiBz
ZWxmLl9pc19idWNrZXRfbGlzdF92aWV3KCkgZWxzZSBzZWxmLm9iamVjdF9maWx0ZXJfbW9kZQoK
ICAgIEBmaWx0ZXJfbW9kZS5zZXR0ZXIKICAgIGRlZiBmaWx0ZXJfbW9kZShzZWxmLCB2YWx1ZSk6
CiAgICAgICAgaWYgc2VsZi5faXNfYnVja2V0X2xpc3RfdmlldygpOgogICAgICAgICAgICBzZWxm
LmJ1Y2tldF9maWx0ZXJfbW9kZSA9IGJvb2wodmFsdWUpCiAgICAgICAgZWxzZToKICAgICAgICAg
ICAgc2VsZi5vYmplY3RfZmlsdGVyX21vZGUgPSBib29sKHZhbHVlKQoKICAgIEBwcm9wZXJ0eQog
ICAgZGVmIGZpbHRlcl9wYXR0ZXJuKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmJ1Y2tldF9m
aWx0ZXJfcGF0dGVybiBpZiBzZWxmLl9pc19idWNrZXRfbGlzdF92aWV3KCkgZWxzZSBzZWxmLm9i
amVjdF9maWx0ZXJfcGF0dGVybgoKICAgIEBmaWx0ZXJfcGF0dGVybi5zZXR0ZXIKICAgIGRlZiBm
aWx0ZXJfcGF0dGVybihzZWxmLCB2YWx1ZSk6CiAgICAgICAgaWYgc2VsZi5faXNfYnVja2V0X2xp
c3RfdmlldygpOgogICAgICAgICAgICBzZWxmLmJ1Y2tldF9maWx0ZXJfcGF0dGVybiA9IHZhbHVl
CiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5vYmplY3RfZmlsdGVyX3BhdHRlcm4gPSB2
YWx1ZQoKICAgIGRlZiBfZ2V0X2FjdGl2ZV9maWx0ZXJfcGF0dGVybihzZWxmKToKICAgICAgICBy
ZXR1cm4gc2VsZi5idWNrZXRfZmlsdGVyX3BhdHRlcm4gaWYgc2VsZi5faXNfYnVja2V0X2xpc3Rf
dmlldygpIGVsc2Ugc2VsZi5vYmplY3RfZmlsdGVyX3BhdHRlcm4KCiAgICBkZWYgX3NldF9hY3Rp
dmVfZmlsdGVyX3BhdHRlcm4oc2VsZiwgdmFsdWUpOgogICAgICAgIGlmIHNlbGYuX2lzX2J1Y2tl
dF9saXN0X3ZpZXcoKToKICAgICAgICAgICAgc2VsZi5idWNrZXRfZmlsdGVyX3BhdHRlcm4gPSB2
YWx1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYub2JqZWN0X2ZpbHRlcl9wYXR0ZXJu
ID0gdmFsdWUKCiAgICBkZWYgX2dldF9hY3RpdmVfZmlsdGVyX21vZGUoc2VsZik6CiAgICAgICAg
cmV0dXJuIHNlbGYuYnVja2V0X2ZpbHRlcl9tb2RlIGlmIHNlbGYuX2lzX2J1Y2tldF9saXN0X3Zp
ZXcoKSBlbHNlIHNlbGYub2JqZWN0X2ZpbHRlcl9tb2RlCgogICAgZGVmIF9zZXRfYWN0aXZlX2Zp
bHRlcl9tb2RlKHNlbGYsIHZhbHVlKToKICAgICAgICBpZiBzZWxmLl9pc19idWNrZXRfbGlzdF92
aWV3KCk6CiAgICAgICAgICAgIHNlbGYuYnVja2V0X2ZpbHRlcl9tb2RlID0gdmFsdWUKICAgICAg
ICBlbHNlOgogICAgICAgICAgICBzZWxmLm9iamVjdF9maWx0ZXJfbW9kZSA9IHZhbHVlCgogICAg
ZGVmIHRvZ2dsZV9maWx0ZXJfbW9kZShzZWxmKToKICAgICAgICAiIiLQktC60LvRjtGH0LjRgtGM
L9Cy0YvQutC70Y7Rh9C40YLRjCDRgNC10LbQuNC8INCy0LLQvtC00LAg0YTQuNC70YzRgtGA0LAi
IiIKICAgICAgICBpZiBzZWxmLl9nZXRfYWN0aXZlX2ZpbHRlcl9tb2RlKCk6CiAgICAgICAgICAg
IHNlbGYuX3NldF9hY3RpdmVfZmlsdGVyX21vZGUoRmFsc2UpCiAgICAgICAgICAgIHNlbGYuZnJh
bWUuZm9jdXNfcG9zaXRpb24gPSAnYm9keScKICAgICAgICAgICAgaWYgbm90IHNlbGYuX2dldF9h
Y3RpdmVfZmlsdGVyX3BhdHRlcm4oKToKICAgICAgICAgICAgICAgIHNlbGYuZnJhbWUuZm9vdGVy
ID0gTm9uZQogICAgICAgICAgICBzZWxmLmZyYW1lLmZvb3RlciA9IE5vbmUKICAgICAgICBlbHNl
OgogICAgICAgICAgICBzZWxmLl9zZXRfYWN0aXZlX2ZpbHRlcl9tb2RlKFRydWUpCiAgICAgICAg
ICAgIHNlbGYuZnJhbWUuZm9vdGVyID0gc2VsZi5maWx0ZXJfd2lkZ2V0CiAgICAgICAgICAgIHNl
bGYuZnJhbWUuZm9jdXNfcG9zaXRpb24gPSAnZm9vdGVyJwoKICAgICAgICAgICAgIyDQv9GA0Lgg
0LLRhdC+0LTQtSDQsiDRgNC10LbQuNC8INGE0LjQu9GM0YLRgNCwINC/0L7QutCw0LfRi9Cy0LDQ
tdC8INGC0LXQutGD0YnQuNC5INGI0LDQsdC70L7QvSDQtNC70Y8g0Y3RgtC+0LPQviB2aWV3CiAg
ICAgICAgICAgIHAgPSBzZWxmLl9nZXRfYWN0aXZlX2ZpbHRlcl9wYXR0ZXJuKCkgb3IgIiIKICAg
ICAgICAgICAgc2VsZi5maWx0ZXJfZWRpdC5zZXRfZWRpdF90ZXh0KHApCgogICAgZGVmIGNsZWFy
X2ZpbHRlcihzZWxmKToKICAgICAgICAiIiLQn9C+0LvQvdC+0YHRgtGM0Y4g0YHQsdGA0L7RgdC4
0YLRjCDRhNC40LvRjNGC0YAiIiIKICAgICAgICBzZWxmLl9zZXRfYWN0aXZlX2ZpbHRlcl9wYXR0
ZXJuKCIiKQogICAgICAgIHNlbGYuZmlsdGVyX2VkaXQuc2V0X2VkaXRfdGV4dCgiIikKICAgICAg
ICBzZWxmLl9zZXRfYWN0aXZlX2ZpbHRlcl9tb2RlKEZhbHNlKQogICAgICAgIHNlbGYuZnJhbWUu
Zm9jdXNfcG9zaXRpb24gPSAnYm9keScKICAgICAgICBzZWxmLmZyYW1lLmZvb3RlciA9IE5vbmUK
ICAgICAgICBzZWxmLnJlZnJlc2goKQoKICAgICMgZGVmIHNob3dfZmlsdGVyX2RpYWxvZyhzZWxm
KToKICAgICMgICAgICIiItCS0YvQt9GL0LLQsNC10YLRgdGPINC/0L4g0L3QsNC20LDRgtC40Y4g
0LrQu9Cw0LLQuNGI0LggJy8nICIiIgogICAgIwogICAgIyAgICAgZGVmIGNhbGxiYWNrKHRleHQp
OgogICAgIyAgICAgICAgIHNlbGYuYXBwLmNsb3NlX2RpYWxvZygpCiAgICAjICAgICAgICAgIyDQ
m9C+0LPQuNC60LAg0YHQsdGA0L7RgdCwINC/0L4gIi8vIiDQuNC70Lgg0L/QviDQv9GD0YHRgtC+
0Lkg0YHRgtGA0L7QutC1CiAgICAjICAgICAgICAgaWYgbm90IHRleHQgb3IgdGV4dCA9PSAiLy8i
OgogICAgIyAgICAgICAgICAgICBzZWxmLmZpbHRlcl9wYXR0ZXJuID0gTm9uZQogICAgIyAgICAg
ICAgIGVsc2U6CiAgICAjICAgICAgICAgICAgIHNlbGYuZmlsdGVyX3BhdHRlcm4gPSB0ZXh0CiAg
ICAjCiAgICAjICAgICAgICAgIyDQn9C10YDQtdGA0LjRgdC+0LLRi9Cy0LDQtdC8INC/0LDQvdC1
0LvRjCDRgSDRg9GH0LXRgtC+0Lwg0L3QvtCy0L7Qs9C+INGE0LjQu9GM0YLRgNCwCiAgICAjICAg
ICAgICAgc2VsZi5yZWZyZXNoKCkKICAgICMKICAgICMgICAgICMg0JXRgdC70Lgg0YTQuNC70YzR
gtGAINGD0LbQtSDQtdGB0YLRjCwg0L/QvtC60LDQt9GL0LLQsNC10Lwg0LXQs9C+INCyINC/0L7Q
u9C1INCy0LLQvtC00LAKICAgICMgICAgIGRlZmF1bHRfdGV4dCA9IHNlbGYuZmlsdGVyX3BhdHRl
cm4gaWYgc2VsZi5maWx0ZXJfcGF0dGVybiBlbHNlICIiCiAgICAjCiAgICAjICAgICBkaWFsb2cg
PSBJbnB1dERpYWxvZygKICAgICMgICAgICAgICAiRmlsdGVyIiwKICAgICMgICAgICAgICAiRW50
ZXIgcGF0dGVybiAoLy8gdG8gcmVzZXQpOiIsCiAgICAjICAgICAgICAgbGFtYmRhIGNvbmZpcm1l
ZCwgdGV4dDogY2FsbGJhY2sodGV4dCkgaWYgY29uZmlybWVkIGVsc2Ugc2VsZi5hcHAuY2xvc2Vf
ZGlhbG9nKCksCiAgICAjICAgICAgICAgZGVmYXVsdF90ZXh0PWRlZmF1bHRfdGV4dAogICAgIyAg
ICAgKQogICAgIyAgICAgc2VsZi5hcHAuc2hvd19kaWFsb2coZGlhbG9nKQoKICAgIGRlZiBrZXlw
cmVzcyhzZWxmLCBzaXplLCBrZXkpOgogICAgICAgIGlmIG5vdCBzZWxmLmZpbHRlcl9tb2RlOgog
ICAgICAgICAgICAjIC0tLSDQntCR0KvQp9Cd0KvQmSDQoNCV0JbQmNCcICjQpNC+0LrRg9GBINC9
0LAg0YHQv9C40YHQutC1KSAtLS0KICAgICAgICAgICAgaWYga2V5ID09ICcvJzoKICAgICAgICAg
ICAgICAgIHNlbGYudG9nZ2xlX2ZpbHRlcl9tb2RlKCkKICAgICAgICAgICAgICAgIHJldHVybiBO
b25lCgogICAgICAgICAgICByZXN1bHQgPSBzdXBlcigpLmtleXByZXNzKHNpemUsIGtleSkKCiAg
ICAgICAgICAgICMg0JXRgdC70Lgg0L3QsNC20LDRgtCwINC60LvQsNCy0LjRiNCwINC90LDQstC4
0LPQsNGG0LjQuCDQuCDQstC60LvRjtGH0LXQvSBQcmV2aWV3IE1vZGUsINC+0LHQvdC+0LLQu9GP
0LXQvAogICAgICAgICAgICBpZiBzZWxmLmFwcC5wcmV2aWV3X21vZGUgYW5kIGtleSBpbiAoJ3Vw
JywgJ2Rvd24nLCAncGFnZSB1cCcsICdwYWdlIGRvd24nLCAnaG9tZScsICdlbmQnKToKICAgICAg
ICAgICAgICAgICMg0JLRi9C30YvQstCw0LXQvCDQvtCx0L3QvtCy0LvQtdC90LjQtSDRgSDQvdC1
0LHQvtC70YzRiNC+0Lkg0LfQsNC00LXRgNC20LrQvtC5IChkZWJvdW5jZSksINGH0YLQvtCx0Ysg
0L3QtSDQs9GA0YPQt9C40YLRjCDQv9GA0Lgg0LHRi9GB0YLRgNC+0Lkg0L/RgNC+0LrRgNGD0YLQ
utC1CiAgICAgICAgICAgICAgICAjINCd0L4g0LTQu9GPINC/0YDQvtGB0YLQvtGC0Ysg0LzQvtC2
0L3QviDRgdGA0LDQt9GDCiAgICAgICAgICAgICAgICBzZWxmLmFwcC51cGRhdGVfcHJldmlldygp
CgogICAgICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMg
LS0tINCg0JXQltCY0Jwg0JLQktCe0JTQkCDQpNCY0JvQrNCi0KDQkCAo0KTQvtC60YPRgSDQvdCw
IGZvb3RlcikgLS0tCgogICAgICAgICAgICAjINCS0YvRhdC+0LQg0LjQtyDRgNC10LbQuNC80LAg
KNGB0L7RhdGA0LDQvdC10L3QuNC1INGC0LXQutGD0YnQtdCz0L4g0YTQuNC70YzRgtGA0LApCiAg
ICAgICAgICAgIGlmIGtleSBpbiAoJ2VudGVyJywgJ2VzYycpOgogICAgICAgICAgICAgICAgc2Vs
Zi50b2dnbGVfZmlsdGVyX21vZGUoKQogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAg
ICAgICAgICMg0JLRi9GF0L7QtCDQv9C+INC/0L7QstGC0L7RgNC90L7QvNGDINC90LDQttCw0YLQ
uNGOICcvJyAo0LrQsNC6INCyIHZpbSDQv9C+0LjRgdC6KQogICAgICAgICAgICBpZiBrZXkgPT0g
Jy8nOgogICAgICAgICAgICAgICAgc2VsZi50b2dnbGVfZmlsdGVyX21vZGUoKQogICAgICAgICAg
ICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgICAgICMg0J/QtdGA0LXQtNCw0LXQvCDQvdCw0LbQ
sNGC0LjQtSDQsiDQv9C+0LvQtSDQstCy0L7QtNCwCiAgICAgICAgICAgICMg0J3QsNC8INC90YPQ
ttC90L4g0Y/QstC90L4g0LLRi9C30LLQsNGC0Ywga2V5cHJlc3Mg0YMgRWRpdCwg0YLQsNC6INC6
0LDQuiDQvNGLICLQv9C10YDQtdGF0LLQsNGC0LjQu9C4IiDRg9C/0YDQsNCy0LvQtdC90LjQtQog
ICAgICAgICAgICAjINCg0LDQt9C80LXRgCDRhNGD0YLQtdGA0LAgKDEg0YHRgtGA0L7QutCwKQog
ICAgICAgICAgICByZXMgPSBzZWxmLmZpbHRlcl9lZGl0LmtleXByZXNzKChzaXplWzBdLCksIGtl
eSkKCiAgICAgICAgICAgICMg0J/QvtGB0LvQtSDQvdCw0LbQsNGC0LjRjyDQv9GA0L7QstC10YDR
j9C10LwsINC40LfQvNC10L3QuNC70YHRjyDQu9C4INGC0LXQutGB0YIKICAgICAgICAgICAgIyBu
ZXdfdGV4dCA9IHNlbGYuZmlsdGVyX2VkaXQuZ2V0X2VkaXRfdGV4dCgpCiAgICAgICAgICAgICMg
aWYgbmV3X3RleHQgIT0gc2VsZi5maWx0ZXJfcGF0dGVybjoKICAgICAgICAgICAgIyAgICAgc2Vs
Zi5maWx0ZXJfcGF0dGVybiA9IG5ld190ZXh0CiAgICAgICAgICAgICMgICAgICMg0JLRi9C30YvQ
stCw0LXQvCByZWZyZXNoINC00LvRjyDQvtCx0L3QvtCy0LvQtdC90LjRjyDRgdC/0LjRgdC60LAg
0YTQsNC50LvQvtCyINGBINC90L7QstGL0Lwg0YTQuNC70YzRgtGA0L7QvAogICAgICAgICAgICAj
ICAgICBzZWxmLnJlZnJlc2goKQogICAgICAgICAgICBuZXdfdGV4dCA9IHNlbGYuZmlsdGVyX2Vk
aXQuZ2V0X2VkaXRfdGV4dCgpCiAgICAgICAgICAgIGlmIG5ld190ZXh0ICE9IChzZWxmLl9nZXRf
YWN0aXZlX2ZpbHRlcl9wYXR0ZXJuKCkgb3IgIiIpOgogICAgICAgICAgICAgICAgc2VsZi5fc2V0
X2FjdGl2ZV9maWx0ZXJfcGF0dGVybihuZXdfdGV4dCkKICAgICAgICAgICAgICAgIHNlbGYucmVm
cmVzaCgpCiAgICAgICAgICAgIHJldHVybiByZXMKCiAgICBkZWYgZ2V0X2N1cnJlbnRfZm9jdXNf
aW5mbyhzZWxmKToKICAgICAgICAiIiLQn9C+0LvRg9GH0LjRgtGMINC40L3RhNC+0YDQvNCw0YbQ
uNGOINC+INGC0LXQutGD0YnQtdC8INGE0L7QutGD0YHQtSDQtNC70Y8g0L/QvtGB0LvQtdC00YPR
jtGJ0LXQs9C+INCy0L7RgdGB0YLQsNC90L7QstC70LXQvdC40Y8iIiIKICAgICAgICB0cnk6CiAg
ICAgICAgICAgIGZvY3VzX3dpZGdldCwgZm9jdXNfcG9zID0gc2VsZi5saXN0Ym94LmdldF9mb2N1
cygpCiAgICAgICAgICAgIGlmIGZvY3VzX3dpZGdldDoKICAgICAgICAgICAgICAgIHcgPSBmb2N1
c193aWRnZXQub3JpZ2luYWxfd2lkZ2V0IGlmIGlzaW5zdGFuY2UoZm9jdXNfd2lkZ2V0LCB1cndp
ZC5BdHRyTWFwKSBlbHNlIGZvY3VzX3dpZGdldAogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5j
ZSh3LCBTZWxlY3RhYmxlVGV4dCk6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAg
ICAgICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJzogZm9jdXNfcG9zLAogICAgICAgICAgICAgICAg
ICAgICAgICAnbmFtZSc6IHcuZGF0YS5nZXQoJ25hbWUnKSwKICAgICAgICAgICAgICAgICAgICAg
ICAgJ2tleSc6IHcuZGF0YS5nZXQoJ2tleScpLAogICAgICAgICAgICAgICAgICAgICAgICAndHlw
ZSc6IHcuZGF0YS5nZXQoJ3R5cGUnKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICBleGNl
cHQ6CiAgICAgICAgICAgIHBhc3MKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiByZWZyZXNo
KHNlbGYsIGZvY3VzX29uPU5vbmUsIGZvY3VzX2luZm89Tm9uZSwgaXRlbV9kZWxldGVkPUZhbHNl
KToKICAgICAgICAiIiIKICAgICAgICDQntCx0L3QvtCy0LjRgtGMINGB0L7QtNC10YDQttC40LzQ
vtC1INC/0LDQvdC10LvQuC4KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgZm9jdXNfb24gKHN0
cik6INCY0LzRjyDRjdC70LXQvNC10L3RgtCwICjRhNCw0LnQu9CwL9C/0LDQv9C60Lgv0LHQsNC6
0LXRgtCwKSwg0L3QsCDQutC+0YLQvtGA0YvQuSDQvdGD0LbQvdC+INGD0YHRgtCw0L3QvtCy0LjR
gtGMINGE0L7QutGD0YEuCiAgICAgICAgICAgIGZvY3VzX2luZm8gKGRpY3QpOiDQodC70L7QstCw
0YDRjCDRgSDQuNC90YTQvtGA0LzQsNGG0LjQtdC5INC+INC/0YDQtdC00YvQtNGD0YnQtdC8INGE
0L7QutGD0YHQtSAo0LjQvdC00LXQutGBLCDQuNC80Y8sINC60LvRjtGHKS4KICAgICAgICAgICAg
aXRlbV9kZWxldGVkIChib29sKTog0KTQu9Cw0LMsINGD0LrQsNC30YvQstCw0Y7RidC40LksINGH
0YLQviDRgtC10LrRg9GJ0LjQuSDRjdC70LXQvNC10L3RgiDQsdGL0Lsg0YPQtNCw0LvQtdC9ICjQ
vdGD0LbQvdC+INGB0L7RhdGA0LDQvdC40YLRjCDQuNC90LTQtdC60YEpLgogICAgICAgICIiIgoK
ICAgICAgICAjIDEuINCb0L7Qs9C40LrQsCDRgdC+0YXRgNCw0L3QtdC90LjRjyDQv9Cw0YDQsNC8
0LXRgtGA0L7QsiDRhNC+0LrRg9GB0LAg0LTQu9GPINCQ0KHQmNCd0KXQoNCe0J3QndCe0Jkg0LfQ
sNCz0YDRg9C30LrQuCAoUzMpCiAgICAgICAgIyDQldGB0LvQuCDQvNGLINCyINGA0LXQttC40LzQ
tSBTMyDQuCDQstGL0LHRgNCw0L0g0Y3QvdC00L/QvtC40L3Rgiwg0LfQsNCz0YDRg9C30LrQsCAo
0LHQsNC60LXRgtC+0LIg0LjQu9C4INC+0LHRitC10LrRgtC+0LIpINCx0YPQtNC10YIg0LjQtNGC
0Lgg0LIg0YTQvtC90LUuCiAgICAgICAgIyDQn9C+0Y3RgtC+0LzRgyDQvNGLINC90LUg0LzQvtC2
0LXQvCDRg9GB0YLQsNC90L7QstC40YLRjCDRhNC+0LrRg9GBINGB0YDQsNC30YMg0LIg0LrQvtC9
0YbQtSDRhNGD0L3QutGG0LjQuCwg0L3Rg9C20L3QviDRgdC+0YXRgNCw0L3QuNGC0Ywg0LXQs9C+
INCyIHNlbGYuCiAgICAgICAgaXNfczNfYXN5bmMgPSAoc2VsZi5tb2RlID09ICdzMycgYW5kIHNl
bGYuY3VycmVudF9lbmRwb2ludCBpcyBub3QgTm9uZSkKCiAgICAgICAgaWYgaXNfczNfYXN5bmM6
CiAgICAgICAgICAgIGlmIGZvY3VzX29uOgogICAgICAgICAgICAgICAgIyDQodC+0YXRgNCw0L3R
j9C10Lwg0LjQvNGPINC00LvRjyDQstC+0YHRgdGC0LDQvdC+0LLQu9C10L3QuNGPINCyIF9maW5h
bGl6ZV9sb2FkaW5nCiAgICAgICAgICAgICAgICBzZWxmLl9wZW5kaW5nX2ZvY3VzX25hbWUgPSBm
b2N1c19vbgoKICAgICAgICAgICAgIyDQldGB0LvQuCDQv9C10YDQtdC00LDQvdCwINGB0LvQvtC2
0L3QsNGPINC40L3RhNC+INC+INGE0L7QutGD0YHQtQogICAgICAgICAgICBpZiBmb2N1c19pbmZv
OgogICAgICAgICAgICAgICAgIyDQldGB0LvQuCDRjdC70LXQvNC10L3RgiDRg9C00LDQu9C10L0s
INC/0YvRgtCw0LXQvNGB0Y8g0L7RgdGC0LDRgtGM0YHRjyDQvdCwINGC0L7QvCDQttC1INC40L3Q
tNC10LrRgdC1CiAgICAgICAgICAgICAgICAjINCV0YHQu9C4INC90LUg0YPQtNCw0LvQtdC9ICjQ
v9GA0L7RgdGC0L4gcmVmcmVzaCksINGC0L7QttC1INGB0L7RhdGA0LDQvdGP0LXQvCDQuNC90LTQ
tdC60YEg0LrQsNC6INC30LDQv9Cw0YHQvdC+0Lkg0LLQsNGA0LjQsNC90YIKICAgICAgICAgICAg
ICAgIHNlbGYucmVzdG9yZV9mb2N1c19pbmRleCA9IGZvY3VzX2luZm8uZ2V0KCdwb3NpdGlvbicp
CiAgICAgICAgICAgIGVsaWYgaXRlbV9kZWxldGVkOgogICAgICAgICAgICAgICAgIyDQldGB0LvQ
uCDQv9GA0L7RgdGC0L4g0YHQutCw0LfQsNC90L4g0YfRgtC+INGD0LTQsNC70LXQvSwg0L3QviBp
bmZvINC90LXRgiAo0YDQtdC00LrQviksINGB0L7RhdGA0LDQvdGP0LXQvCDRgtC10LrRg9GJ0LjQ
uT8KICAgICAgICAgICAgICAgICMg0J7QsdGL0YfQvdC+IGluZm8g0L/QtdGA0LXQtNCw0LXRgtGB
0Y8uINCV0YHQu9C4INC90LXRgiwg0L/QvtC70LDQs9Cw0LXQvNGB0Y8g0L3QsCDRgtC+INGH0YLQ
viDRg9C20LUg0LXRgdGC0Ywg0LIgcmVzdG9yZV9mb2N1c19pbmRleAogICAgICAgICAgICAgICAg
cGFzcwoKICAgICAgICAjIDIuINCe0YfQuNGB0YLQutCwINGB0L/QuNGB0LrQsCDQv9C10YDQtdC0
INC+0LHQvdC+0LLQu9C10L3QuNC10LwKICAgICAgICBzZWxmLndhbGtlci5jbGVhcigpCgogICAg
ICAgICMg0KHQsdGA0L7RgSDRhNC40LvRjNGC0YDQsCDQv9GA0Lgg0YHQvNC10L3QtSDQutC+0L3R
gtC10LrRgdGC0LA/ICjQntC/0YbQuNC+0L3QsNC70YzQvdC+KQogICAgICAgICMgc2VsZi5maWx0
ZXJfcGF0dGVybiA9ICIiCiAgICAgICAgIyBzZWxmLmZpbHRlcl9lZGl0LnNldF9lZGl0X3RleHQo
IiIpCgogICAgICAgICMgMy4g0JzQsNGA0YjRgNGD0YLQuNC30LDRhtC40Y8g0L7QsdC90L7QstC7
0LXQvdC40Y8g0L/QviDRgNC10LbQuNC80LDQvAogICAgICAgIGlmIHNlbGYubW9kZSA9PSAncm9v
dF9tZW51JzoKICAgICAgICAgICAgc2VsZi5fcmVmcmVzaF9yb290X21lbnUoKQogICAgICAgICAg
ICAjINCh0LjQvdGF0YDQvtC90L3QvtC1INCy0L7RgdGB0YLQsNC90L7QstC70LXQvdC40LUKICAg
ICAgICAgICAgaWYgZm9jdXNfaW5mbzoKICAgICAgICAgICAgICAgIHNlbGYucmVzdG9yZV9mb2N1
c19hZnRlcl9vcGVyYXRpb24oZm9jdXNfaW5mbywgaXRlbV9kZWxldGVkKQogICAgICAgICAgICBl
bGlmIGZvY3VzX29uOgogICAgICAgICAgICAgICAgc2VsZi5zZXRfZm9jdXNfb25faXRlbShmb2N1
c19vbikKCiAgICAgICAgZWxpZiBzZWxmLm1vZGUgPT0gJ3MzJzoKICAgICAgICAgICAgaWYgc2Vs
Zi5jdXJyZW50X2VuZHBvaW50IGlzIE5vbmU6CiAgICAgICAgICAgICAgICAjINCh0L/QuNGB0L7Q
uiDRjdC90LTQv9C+0LjQvdGC0L7QsiAo0L7QsdGL0YfQvdC+INGB0LjQvdGF0YDQvtC90L3QviDQ
uNC3INC60L7QvdGE0LjQs9CwKQogICAgICAgICAgICAgICAgc2VsZi5fcmVmcmVzaF9lbmRwb2lu
dHMoKQoKICAgICAgICAgICAgICAgIGlmIGZvY3VzX2luZm86CiAgICAgICAgICAgICAgICAgICAg
c2VsZi5yZXN0b3JlX2ZvY3VzX2FmdGVyX29wZXJhdGlvbihmb2N1c19pbmZvLCBpdGVtX2RlbGV0
ZWQpCiAgICAgICAgICAgICAgICBlbGlmIGZvY3VzX29uOgogICAgICAgICAgICAgICAgICAgIHNl
bGYuc2V0X2ZvY3VzX29uX2l0ZW0oZm9jdXNfb24pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAg
ICAgICAgICAjINCS0L3Rg9GC0YDQuCDRjdC90LTQv9C+0LjQvdGC0LA6INCh0L/QuNGB0L7QuiDQ
sdCw0LrQtdGC0L7QsiDQmNCb0Jgg0KHQv9C40YHQvtC6INC+0LHRitC10LrRgtC+0LIKICAgICAg
ICAgICAgICAgICMg0K3RgtC+INCy0YvQv9C+0LvQvdGP0LXRgtGB0Y8g0JDQodCY0J3QpdCg0J7Q
ndCd0J4g0YfQtdGA0LXQtyDQv9C+0YLQvtC6LgogICAgICAgICAgICAgICAgIyDQpNC+0LrRg9GB
INCx0YPQtNC10YIg0LLQvtGB0YHRgtCw0L3QvtCy0LvQtdC9INCyIF9maW5hbGl6ZV9sb2FkaW5n
INGBINC40YHQv9C+0LvRjNC30L7QstCw0L3QuNC10LwKICAgICAgICAgICAgICAgICMgX3BlbmRp
bmdfZm9jdXNfbmFtZSDQuNC70LggcmVzdG9yZV9mb2N1c19pbmRleAogICAgICAgICAgICAgICAg
c2VsZi5fcmVmcmVzaF9zMygpCiAgICAgICAgICAgICAgICBpZiBmb2N1c19pbmZvOgogICAgICAg
ICAgICAgICAgICAgIHNlbGYucmVzdG9yZV9mb2N1c19hZnRlcl9vcGVyYXRpb24oZm9jdXNfaW5m
bywgaXRlbV9kZWxldGVkKQogICAgICAgICAgICAgICAgZWxpZiBmb2N1c19vbjoKICAgICAgICAg
ICAgICAgICAgICBzZWxmLnNldF9mb2N1c19vbl9pdGVtKGZvY3VzX29uKQoKICAgICAgICBlbHNl
OiAgIyBtb2RlID09ICdmcycKICAgICAgICAgICAgc2VsZi5fcmVmcmVzaF9mcygpCiAgICAgICAg
ICAgICMg0KHQuNC90YXRgNC+0L3QvdC+0LUg0LLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90LjQtQog
ICAgICAgICAgICBpZiBmb2N1c19pbmZvOgogICAgICAgICAgICAgICAgc2VsZi5yZXN0b3JlX2Zv
Y3VzX2FmdGVyX29wZXJhdGlvbihmb2N1c19pbmZvLCBpdGVtX2RlbGV0ZWQpCiAgICAgICAgICAg
IGVsaWYgZm9jdXNfb246CiAgICAgICAgICAgICAgICBzZWxmLnNldF9mb2N1c19vbl9pdGVtKGZv
Y3VzX29uKQoKICAgIGRlZiBzaG93X2l0ZW1faW5mbyhzZWxmKToKICAgICAgICAiIiLQn9C+0LrQ
sNC30LDRgtGMINC40L3RhNC+0YDQvNCw0YbQuNGOINC+INGC0LXQutGD0YnQtdC8INGN0LvQtdC8
0LXQvdGC0LUgKEY0KSIiIgogICAgICAgIGl0ZW0gPSBzZWxmLmdldF9mb2N1c2VkX2l0ZW0oKQog
ICAgICAgIGlmIG5vdCBpdGVtOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaW5mbyA9IE9y
ZGVyZWREaWN0KCkKICAgICAgICB0aXRsZSA9ICJJbmZvIgoKICAgICAgICB0cnk6CiAgICAgICAg
ICAgIGlmIHNlbGYubW9kZSA9PSAnZnMnOgogICAgICAgICAgICAgICAgcGF0aCA9IGl0ZW0uZ2V0
KCdwYXRoJykgICMg0JXRgdC70Lgg0LXRgdGC0Ywg0L/QvtC70L3Ri9C5INC/0YPRgtGMCiAgICAg
ICAgICAgICAgICBpZiBub3QgcGF0aDoKICAgICAgICAgICAgICAgICAgICAjINCf0YvRgtCw0LXQ
vNGB0Y8g0LLQvtGB0YHRgtCw0L3QvtCy0LjRgtGMINC/0YPRgtGMCiAgICAgICAgICAgICAgICAg
ICAgbmFtZSA9IGl0ZW1bJ25hbWUnXQogICAgICAgICAgICAgICAgICAgIGlmIG5hbWUgPT0gJy4u
JzoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgcGF0
aCA9IG9zLnBhdGguam9pbihzZWxmLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCBuYW1lKQoKICAg
ICAgICAgICAgICAgIHRpdGxlID0gZiJGaWxlIEluZm86IHtpdGVtWyduYW1lJ119IgogICAgICAg
ICAgICAgICAgaW5mbyA9IHNlbGYuX2dldF9mc19pbmZvKHBhdGgpCgogICAgICAgICAgICBlbGlm
IHNlbGYubW9kZSA9PSAnczMnOgogICAgICAgICAgICAgICAgaXR5cGUgPSBpdGVtLmdldCgndHlw
ZScpCgogICAgICAgICAgICAgICAgaWYgaXR5cGUgPT0gJ2J1Y2tldCc6CiAgICAgICAgICAgICAg
ICAgICAgdGl0bGUgPSBmIkJ1Y2tldCBJbmZvOiB7aXRlbVsnbmFtZSddfSIKICAgICAgICAgICAg
ICAgICAgICBpbmZvID0gc2VsZi5fZ2V0X3MzX2J1Y2tldF9pbmZvKGl0ZW1bJ25hbWUnXSkKCiAg
ICAgICAgICAgICAgICBlbGlmIGl0eXBlIGluIFsnczNfZmlsZScsICdzM19kaXInXToKICAgICAg
ICAgICAgICAgICAgICAjINCU0LvRjyDRhNCw0LnQu9C+0LIg0Lgg0L/QsNC/0L7QugogICAgICAg
ICAgICAgICAgICAgIGtleSA9IGl0ZW1bJ2tleSddCiAgICAgICAgICAgICAgICAgICAgbmFtZSA9
IGl0ZW1bJ25hbWUnXQogICAgICAgICAgICAgICAgICAgIHRpdGxlID0gZiJPYmplY3QgSW5mbzog
e25hbWV9IgogICAgICAgICAgICAgICAgICAgIGluZm8gPSBzZWxmLl9nZXRfczNfb2JqZWN0X2lu
Zm8oc2VsZi5jdXJyZW50X2J1Y2tldCwga2V5LCBpdHlwZSkKCiAgICAgICAgZXhjZXB0IEV4Y2Vw
dGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmFwcC5zaG93X3Jlc3VsdChmIkVycm9yIGdldHRp
bmcgaW5mbzoge2V9IikKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIGluZm86CiAgICAg
ICAgICAgIGRpYWxvZyA9IEZpbGVJbmZvRGlhbG9nKHRpdGxlLCBpbmZvLCBzZWxmLmFwcC5jbG9z
ZV9kaWFsb2cpCiAgICAgICAgICAgIHNlbGYuYXBwLnNob3dfZGlhbG9nKGRpYWxvZywgd2lkdGg9
KCdyZWxhdGl2ZScsIDYwKSwgaGVpZ2h0PSgncmVsYXRpdmUnLCA3MCkpCgogICAgZGVmIF9nZXRf
ZnNfaW5mbyhzZWxmLCBwYXRoKToKICAgICAgICAiIiLQodCx0L7RgCDQuNC90YTQvtGA0LzQsNGG
0LjQuCDQviDQu9C+0LrQsNC70YzQvdC+0Lwg0YTQsNC50LvQtSIiIgogICAgICAgIGltcG9ydCBz
dGF0CiAgICAgICAgaW1wb3J0IHB3ZAogICAgICAgIGltcG9ydCBncnAKICAgICAgICBpbmZvID0g
T3JkZXJlZERpY3QoKQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHN0ID0gb3Muc3RhdChwYXRo
KQoKICAgICAgICAgICAgaW5mb1snTmFtZSddID0gb3MucGF0aC5iYXNlbmFtZShwYXRoKQogICAg
ICAgICAgICBpbmZvWydQYXRoJ10gPSBwYXRoCiAgICAgICAgICAgIGluZm9bJ1NpemUnXSA9IGZv
cm1hdF9zaXplKHN0LnN0X3NpemUpICsgZiIgKHtzdC5zdF9zaXplfSBieXRlcykiCgogICAgICAg
ICAgICAjINCi0LjQvyDRhNCw0LnQu9CwCiAgICAgICAgICAgIGlmIHN0YXQuU19JU0RJUihzdC5z
dF9tb2RlKToKICAgICAgICAgICAgICAgIHR5cGVfc3RyID0gIkRpcmVjdG9yeSIKICAgICAgICAg
ICAgZWxpZiBzdGF0LlNfSVNMTksoc3Quc3RfbW9kZSk6CiAgICAgICAgICAgICAgICB0eXBlX3N0
ciA9ICJTeW1saW5rIgogICAgICAgICAgICBlbGlmIHN0YXQuU19JU1JFRyhzdC5zdF9tb2RlKToK
ICAgICAgICAgICAgICAgIHR5cGVfc3RyID0gIlJlZ3VsYXIgRmlsZSIKICAgICAgICAgICAgZWxz
ZToKICAgICAgICAgICAgICAgIHR5cGVfc3RyID0gIk90aGVyIgogICAgICAgICAgICBpbmZvWydU
eXBlJ10gPSB0eXBlX3N0cgoKICAgICAgICAgICAgIyDQn9GA0LDQstCwINC00L7RgdGC0YPQv9Cw
CiAgICAgICAgICAgIGluZm9bJ01vZGUnXSA9IHN0YXQuZmlsZW1vZGUoc3Quc3RfbW9kZSkKICAg
ICAgICAgICAgaW5mb1snT2N0YWwnXSA9IG9jdChzdC5zdF9tb2RlKVstMzpdCgogICAgICAgICAg
ICAjINCS0LvQsNC00LXQu9C10YYv0JPRgNGD0L/Qv9CwCiAgICAgICAgICAgIHRyeToKICAgICAg
ICAgICAgICAgIG93bmVyID0gcHdkLmdldHB3dWlkKHN0LnN0X3VpZCkucHdfbmFtZQogICAgICAg
ICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBvd25lciA9IHN0cihzdC5zdF91aWQpCgogICAg
ICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBncm91cCA9IGdycC5nZXRncmdpZChzdC5zdF9n
aWQpLmdyX25hbWUKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgZ3JvdXAgPSBz
dHIoc3Quc3RfZ2lkKQoKICAgICAgICAgICAgaW5mb1snT3duZXInXSA9IGYie293bmVyfSAoe3N0
LnN0X3VpZH0pIgogICAgICAgICAgICBpbmZvWydHcm91cCddID0gZiJ7Z3JvdXB9ICh7c3Quc3Rf
Z2lkfSkiCgogICAgICAgICAgICAjINCS0YDQtdC80LXQvdC90YvQtSDQvNC10YLQutC4CiAgICAg
ICAgICAgIGluZm9bJ0FjY2VzcyddID0gZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChzdC5zdF9hdGlt
ZSkuc3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVTJykKICAgICAgICAgICAgaW5mb1snTW9kaWZ5
J10gPSBkYXRldGltZS5mcm9tdGltZXN0YW1wKHN0LnN0X210aW1lKS5zdHJmdGltZSgnJVktJW0t
JWQgJUg6JU06JVMnKQogICAgICAgICAgICBpbmZvWydDaGFuZ2UnXSA9IGRhdGV0aW1lLmZyb210
aW1lc3RhbXAoc3Quc3RfY3RpbWUpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpCgogICAg
ICAgICAgICAjINCi0LXRhdC90LjRh9C10YHQutCw0Y8g0LjQvdGE0LAKICAgICAgICAgICAgaW5m
b1snRGV2aWNlJ10gPSBzdC5zdF9kZXYKICAgICAgICAgICAgaW5mb1snSW5vZGUnXSA9IHN0LnN0
X2lubwogICAgICAgICAgICBpbmZvWydMaW5rcyddID0gc3Quc3RfbmxpbmsKCiAgICAgICAgZXhj
ZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBpbmZvWydFcnJvciddID0gc3RyKGUpCgog
ICAgICAgIHJldHVybiBpbmZvCgogICAgZGVmIF9nZXRfczNfYnVja2V0X2luZm8oc2VsZiwgYnVj
a2V0X25hbWUpOgogICAgICAgICIiItCf0L7Qu9C90LDRjyDQuNC90YTQvtGA0LzQsNGG0LjRjyDQ
viDQsdCw0LrQtdGC0LUiIiIKICAgICAgICBpbmZvID0gT3JkZXJlZERpY3QoKQogICAgICAgIGlu
Zm9bJ05hbWUnXSA9IGJ1Y2tldF9uYW1lCgogICAgICAgIGNsaWVudCA9IHNlbGYuczNfbWFuYWdl
ci5zM19jbGllbnQKCiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIDEuIFJlZ2lvbgogICAgICAg
ICAgICB0cnk6CiAgICAgICAgICAgICAgICBsb2MgPSBjbGllbnQuZ2V0X2J1Y2tldF9sb2NhdGlv
bihCdWNrZXQ9YnVja2V0X25hbWUpCiAgICAgICAgICAgICAgICByZWdpb24gPSBsb2MuZ2V0KCdM
b2NhdGlvbkNvbnN0cmFpbnQnKQogICAgICAgICAgICAgICAgaW5mb1snUmVnaW9uJ10gPSByZWdp
b24gaWYgcmVnaW9uIGVsc2UgJ3VzLWVhc3QtMScKICAgICAgICAgICAgZXhjZXB0OgogICAgICAg
ICAgICAgICAgaW5mb1snUmVnaW9uJ10gPSAnVW5rbm93bicKCiAgICAgICAgICAgICMgMi4gVmVy
c2lvbmluZwogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB2ZXIgPSBjbGllbnQuZ2V0
X2J1Y2tldF92ZXJzaW9uaW5nKEJ1Y2tldD1idWNrZXRfbmFtZSkKICAgICAgICAgICAgICAgIGlu
Zm9bJ1ZlcnNpb25pbmcnXSA9IHZlci5nZXQoJ1N0YXR1cycsICdEaXNhYmxlZCcpCiAgICAgICAg
ICAgICAgICBpZiAnTUZBRGVsZXRlJyBpbiB2ZXI6CiAgICAgICAgICAgICAgICAgICAgaW5mb1sn
TUZBIERlbGV0ZSddID0gdmVyWydNRkFEZWxldGUnXQogICAgICAgICAgICBleGNlcHQ6CiAgICAg
ICAgICAgICAgICBwYXNzCgogICAgICAgICAgICAjIDMuIEVuY3J5cHRpb24gKERlZmF1bHQpCiAg
ICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGVuYyA9IGNsaWVudC5nZXRfYnVja2V0X2Vu
Y3J5cHRpb24oQnVja2V0PWJ1Y2tldF9uYW1lKQogICAgICAgICAgICAgICAgcnVsZXMgPSBlbmMu
Z2V0KCdTZXJ2ZXJTaWRlRW5jcnlwdGlvbkNvbmZpZ3VyYXRpb24nLCB7fSkuZ2V0KCdSdWxlcycs
IFtdKQogICAgICAgICAgICAgICAgaWYgcnVsZXM6CiAgICAgICAgICAgICAgICAgICAgYWxnbyA9
IHJ1bGVzWzBdLmdldCgnQXBwbHlTZXJ2ZXJTaWRlRW5jcnlwdGlvbkJ5RGVmYXVsdCcsIHt9KS5n
ZXQoJ1NTRUFsZ29yaXRobScsICdOb25lJykKICAgICAgICAgICAgICAgICAgICBpbmZvWydEZWZh
dWx0IEVuYyddID0gYWxnbwogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBpbmZv
WydEZWZhdWx0IEVuYyddID0gJ05vbmUnCgogICAgICAgICAgICAjIDQuIExpZmVjeWNsZSBDb25m
aWd1cmF0aW9uCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGxjID0gY2xpZW50Lmdl
dF9idWNrZXRfbGlmZWN5Y2xlX2NvbmZpZ3VyYXRpb24oQnVja2V0PWJ1Y2tldF9uYW1lKQogICAg
ICAgICAgICAgICAgcnVsZXMgPSBsYy5nZXQoJ1J1bGVzJywgW10pCiAgICAgICAgICAgICAgICBp
bmZvWydMaWZlY3ljbGUnXSA9IGYie2xlbihydWxlcyl9IHJ1bGUocykgY29uZmlndXJlZCIKICAg
ICAgICAgICAgZXhjZXB0IENsaWVudEVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICAjINCn0LDR
gdGC0L4g0LLQvtC30LLRgNCw0YnQsNC10YIg0L7RiNC40LHQutGDLCDQtdGB0LvQuCDQv9GA0LDQ
stC40Lsg0L3QtdGCCiAgICAgICAgICAgICAgICBpZiAiTm9TdWNoTGlmZWN5Y2xlQ29uZmlndXJh
dGlvbiIgaW4gc3RyKGUpOgogICAgICAgICAgICAgICAgICAgIGluZm9bJ0xpZmVjeWNsZSddID0g
Ik5vbmUiCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGluZm9bJ0xp
ZmVjeWNsZSddID0gIkVycm9yL05vbmUiCgogICAgICAgICAgICAjIDUuIENPUlMKICAgICAgICAg
ICAgdHJ5OgogICAgICAgICAgICAgICAgY29ycyA9IGNsaWVudC5nZXRfYnVja2V0X2NvcnMoQnVj
a2V0PWJ1Y2tldF9uYW1lKQogICAgICAgICAgICAgICAgaW5mb1snQ09SUyddID0gIkNvbmZpZ3Vy
ZWQiCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIGluZm9bJ0NPUlMnXSA9ICJO
b25lIgoKICAgICAgICAgICAgIyA2LiBBQ0wgLyBPd25lcgogICAgICAgICAgICB0cnk6CiAgICAg
ICAgICAgICAgICBhY2wgPSBjbGllbnQuZ2V0X2J1Y2tldF9hY2woQnVja2V0PWJ1Y2tldF9uYW1l
KQogICAgICAgICAgICAgICAgb3duZXIgPSBhY2wuZ2V0KCdPd25lcicsIHt9KQogICAgICAgICAg
ICAgICAgaW5mb1snLS0tIEFjY2VzcyAtLS0nXSA9ICcnCiAgICAgICAgICAgICAgICBpbmZvWydP
d25lciddID0gb3duZXIuZ2V0KCdEaXNwbGF5TmFtZScsIG93bmVyLmdldCgnSUQnLCAnTi9BJykp
CiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgICMg
Ny4gVXNhZ2UgLyBRdW90YXMgKNCh0L/QtdGG0LjRhNC40YfQvdC+INC00LvRjyBDZXBoLCDRh9Cw
0YHRgtC+INC90LXQtNC+0YHRgtGD0L/QvdC+INGH0LXRgNC10Lcg0YHRgtCw0L3QtNCw0YDRgtC9
0YvQuSBBUEkpCiAgICAgICAgICAgICMg0JTQu9GPIENlcGgg0LzQvtC20L3QviDQv9C+0L/RgNC+
0LHQvtCy0LDRgtGMINC/0L7Qu9GD0YfQuNGC0Ywg0YfQtdGA0LXQtyBHZXRCdWNrZXRBY2NlbGVy
YXRlQ29uZmlndXJhdGlvbiDQuNC70Lgg0LTRgNGD0LPQuNC1INGF0LDQutC4LCAKICAgICAgICAg
ICAgIyDQvdC+INC90LDQtNC10LbQvdC10LUg0L/RgNC+0YHRgtC+INC/0YDQvtCy0LXRgNC40YLR
jCDQtNC+0YHRgtGD0L/QvdC+0YHRgtGMLgoKICAgICAgICAgICAgIyBQYXllcgogICAgICAgICAg
ICB0cnk6CiAgICAgICAgICAgICAgICBwYXkgPSBjbGllbnQuZ2V0X2J1Y2tldF9yZXF1ZXN0X3Bh
eW1lbnQoQnVja2V0PWJ1Y2tldF9uYW1lKQogICAgICAgICAgICAgICAgaW5mb1snUGF5ZXInXSA9
IHBheS5nZXQoJ1BheWVyJywgJ0J1Y2tldE93bmVyJykKICAgICAgICAgICAgZXhjZXB0OgogICAg
ICAgICAgICAgICAgcGFzcwoKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAg
ICAgIGluZm9bJ0Vycm9yJ10gPSBzdHIoZSkKCiAgICAgICAgcmV0dXJuIGluZm8KCiAgICBkZWYg
X2dldF9zM19vYmplY3RfaW5mbyhzZWxmLCBidWNrZXQsIGtleSwgaXR5cGUpOgogICAgICAgICIi
ItCf0L7Qu9C90LDRjyDQuNC90YTQvtGA0LzQsNGG0LjRjyDQvtCxINC+0LHRitC10LrRgtC1IFMz
IiIiCiAgICAgICAgaW5mbyA9IE9yZGVyZWREaWN0KCkKICAgICAgICBpbmZvWydOYW1lJ10gPSBr
ZXkuc3BsaXQoJy8nKVstMV0KICAgICAgICBpbmZvWydCdWNrZXQnXSA9IGJ1Y2tldAogICAgICAg
IGluZm9bJ0tleSddID0ga2V5CiAgICAgICAgaW5mb1snUzMgVVJJJ10gPSBmInMzOi8ve2J1Y2tl
dH0ve2tleX0iCgogICAgICAgIGlmIGl0eXBlID09ICdzM19kaXInOgogICAgICAgICAgICBpbmZv
WydUeXBlJ10gPSAiRm9sZGVyIChQcmVmaXgpIgogICAgICAgICAgICByZXR1cm4gaW5mbwoKICAg
ICAgICB0cnk6CiAgICAgICAgICAgIGNsaWVudCA9IHNlbGYuczNfbWFuYWdlci5zM19jbGllbnQK
ICAgICAgICAgICAgb2JqID0gY2xpZW50LmhlYWRfb2JqZWN0KEJ1Y2tldD1idWNrZXQsIEtleT1r
ZXkpCgogICAgICAgICAgICAjIC0tLSDQntGB0L3QvtCy0L3Ri9C1INGB0LLQvtC50YHRgtCy0LAg
LS0tCiAgICAgICAgICAgIGluZm9bJ1NpemUnXSA9IGZvcm1hdF9zaXplKG9iai5nZXQoJ0NvbnRl
bnRMZW5ndGgnLCAwKSkgKyBmIiAoe29iai5nZXQoJ0NvbnRlbnRMZW5ndGgnLCAwKX0pIgogICAg
ICAgICAgICBpbmZvWydMYXN0IE1vZCddID0gb2JqLmdldCgnTGFzdE1vZGlmaWVkJykuc3RyZnRp
bWUoJyVZLSVtLSVkICVIOiVNOiVTJykKICAgICAgICAgICAgaW5mb1snTUlNRSBUeXBlJ10gPSBv
YmouZ2V0KCdDb250ZW50VHlwZScsICdOL0EnKQogICAgICAgICAgICBpbmZvWydTdG9yYWdlJ10g
PSBvYmouZ2V0KCdTdG9yYWdlQ2xhc3MnLCAnU1RBTkRBUkQnKQogICAgICAgICAgICBpbmZvWydF
VGFnJ10gPSBvYmouZ2V0KCdFVGFnJywgJycpLnJlcGxhY2UoJyInLCAnJykKCiAgICAgICAgICAg
ICMgLS0tIFdlYiBIZWFkZXJzIC0tLQogICAgICAgICAgICB3ZWJfaGVhZGVycyA9IHt9CiAgICAg
ICAgICAgIGlmICdDYWNoZUNvbnRyb2wnIGluIG9iajoKICAgICAgICAgICAgICAgIHdlYl9oZWFk
ZXJzWydDYWNoZS1Db250cm9sJ10gPSBvYmpbJ0NhY2hlQ29udHJvbCddCiAgICAgICAgICAgIGlm
ICdDb250ZW50RW5jb2RpbmcnIGluIG9iajoKICAgICAgICAgICAgICAgIHdlYl9oZWFkZXJzWydD
b250ZW50LUVuY29kaW5nJ10gPSBvYmpbJ0NvbnRlbnRFbmNvZGluZyddCiAgICAgICAgICAgIGlm
ICdDb250ZW50RGlzcG9zaXRpb24nIGluIG9iajoKICAgICAgICAgICAgICAgIHdlYl9oZWFkZXJz
WydEaXNwb3NpdGlvbiddID0gb2JqWydDb250ZW50RGlzcG9zaXRpb24nXQogICAgICAgICAgICBp
ZiAnV2Vic2l0ZVJlZGlyZWN0TG9jYXRpb24nIGluIG9iajoKICAgICAgICAgICAgICAgIHdlYl9o
ZWFkZXJzWydSZWRpcmVjdCddID0gb2JqWydXZWJzaXRlUmVkaXJlY3RMb2NhdGlvbiddCgogICAg
ICAgICAgICBpZiB3ZWJfaGVhZGVyczoKICAgICAgICAgICAgICAgIGluZm9bJy0tLSBXZWIgSGVh
ZGVycyAtLS0nXSA9ICcnCiAgICAgICAgICAgICAgICBmb3IgaywgdiBpbiB3ZWJfaGVhZGVycy5p
dGVtcygpOgogICAgICAgICAgICAgICAgICAgIGluZm9ba10gPSB2CgogICAgICAgICAgICAjIC0t
LSBEYXRhIE1hbmFnZW1lbnQgKExpZmVjeWNsZSwgUmVwbGljYXRpb24sIFJlc3RvcmUpIC0tLQog
ICAgICAgICAgICBsaWZlY3ljbGVfaW5mbyA9IHt9CiAgICAgICAgICAgICMgaWYgJ0V4cGlyYXRp
b24nIGluIG9iajogbGlmZWN5Y2xlX2luZm9bJ0V4cGlyYXRpb24nXSA9IG9ialsnRXhwaXJhdGlv
biddCiAgICAgICAgICAgIGlmICdFeHBpcmF0aW9uJyBpbiBvYmo6CiAgICAgICAgICAgICAgICBs
aWZlY3ljbGVfaW5mb1snRXhwaXJhdGlvbiddID0gb2JqWydFeHBpcmF0aW9uJ10KICAgICAgICAg
ICAgZWxzZToKICAgICAgICAgICAgICAgICMgRklYOiDQldGB0LvQuCDQt9Cw0LPQvtC70L7QstC6
0LAg0L3QtdGCLCDQv9GA0L7QstC10YDQuNC8INC/0YDQsNCy0LjQu9CwINCy0YDRg9GH0L3Rg9GO
ICjQtNC70Y8g0LjQvdGE0L7RgNC80LjRgNC+0LLQsNC90LjRjykKICAgICAgICAgICAgICAgIHRy
eToKICAgICAgICAgICAgICAgICAgICBsYyA9IGNsaWVudC5nZXRfYnVja2V0X2xpZmVjeWNsZV9j
b25maWd1cmF0aW9uKEJ1Y2tldD1idWNrZXQpCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZF9y
dWxlcyA9IFtdCiAgICAgICAgICAgICAgICAgICAgZm9yIHJ1bGUgaW4gbGMuZ2V0KCdSdWxlcycs
IFtdKToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgcnVsZS5nZXQoJ1N0YXR1cycpID09ICdF
bmFibGVkJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCA9IHJ1bGUuZ2V0KCdG
aWx0ZXInLCB7fSkuZ2V0KCdQcmVmaXgnLCBydWxlLmdldCgnUHJlZml4JywgJycpKQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIyDQn9GA0L7QstC10YDRj9C10Lwg0YHQvtCy0L/QsNC00LXQ
vdC40LUg0L/RgNC10YTQuNC60YHQsAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYga2V5
LnN0YXJ0c3dpdGgocHJlZml4KToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxl
X2lkID0gcnVsZS5nZXQoJ0lEJywgJ1Vua25vd24nKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICMg0JzQvtC20L3QviDQtNC+0LHQsNCy0LjRgtGMINC00LXRgtCw0LvQuCAoRGF5cz0z
MCDQuCDRgi7QtC4pLCDQvdC+IElEINC00L7RgdGC0LDRgtC+0YfQvdC+INC00LvRjyDQv9C+0LTR
gdC60LDQt9C60LgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkX3J1bGVz
LmFwcGVuZChmIid7cnVsZV9pZH0nIikKCiAgICAgICAgICAgICAgICAgICAgaWYgbWF0Y2hlZF9y
dWxlczoKICAgICAgICAgICAgICAgICAgICAgICAgbGlmZWN5Y2xlX2luZm9bJ1BvdGVudGlhbCBS
dWxlJ10gPSBmInsnLCAnLmpvaW4obWF0Y2hlZF9ydWxlcyl9IChQZW5kaW5nIGFwcGxpY2F0aW9u
KSIKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICBwYXNzICAjINCf
0YDQsNCy0LjQuyDQvdC10YIg0LjQu9C4INC90LXRgiDQv9GA0LDQsgoKICAgICAgICAgICAgaWYg
J1JlcGxpY2F0aW9uU3RhdHVzJyBpbiBvYmo6CiAgICAgICAgICAgICAgICBsaWZlY3ljbGVfaW5m
b1snUmVwbGljYXRpb24nXSA9IG9ialsnUmVwbGljYXRpb25TdGF0dXMnXQogICAgICAgICAgICBp
ZiAnUmVzdG9yZScgaW4gb2JqOgogICAgICAgICAgICAgICAgbGlmZWN5Y2xlX2luZm9bJ1Jlc3Rv
cmUnXSA9IG9ialsnUmVzdG9yZSddCgogICAgICAgICAgICBpZiBsaWZlY3ljbGVfaW5mbzoKICAg
ICAgICAgICAgICAgIGluZm9bJy0tLSBMaWZlY3ljbGUgLS0tJ10gPSAnJwogICAgICAgICAgICAg
ICAgZm9yIGssIHYgaW4gbGlmZWN5Y2xlX2luZm8uaXRlbXMoKToKICAgICAgICAgICAgICAgICAg
ICBpbmZvW2tdID0gdgoKICAgICAgICAgICAgIyAtLS0gT2JqZWN0IExvY2sgJiBTZWN1cml0eSAt
LS0KICAgICAgICAgICAgc2VjdXJpdHlfaW5mbyA9IHt9CiAgICAgICAgICAgIGlmICdPYmplY3RM
b2NrTW9kZScgaW4gb2JqOgogICAgICAgICAgICAgICAgc2VjdXJpdHlfaW5mb1snTG9jayBNb2Rl
J10gPSBvYmpbJ09iamVjdExvY2tNb2RlJ10KICAgICAgICAgICAgaWYgJ09iamVjdExvY2tSZXRh
aW5VbnRpbERhdGUnIGluIG9iajoKICAgICAgICAgICAgICAgIHNlY3VyaXR5X2luZm9bJ1JldGFp
biBVbnRpbCddID0gc3RyKG9ialsnT2JqZWN0TG9ja1JldGFpblVudGlsRGF0ZSddKQogICAgICAg
ICAgICBpZiAnT2JqZWN0TG9ja0xlZ2FsSG9sZFN0YXR1cycgaW4gb2JqOgogICAgICAgICAgICAg
ICAgc2VjdXJpdHlfaW5mb1snTGVnYWwgSG9sZCddID0gb2JqWydPYmplY3RMb2NrTGVnYWxIb2xk
U3RhdHVzJ10KICAgICAgICAgICAgaWYgJ1NlcnZlclNpZGVFbmNyeXB0aW9uJyBpbiBvYmo6CiAg
ICAgICAgICAgICAgICBzZWN1cml0eV9pbmZvWydFbmNyeXB0aW9uJ10gPSBvYmpbJ1NlcnZlclNp
ZGVFbmNyeXB0aW9uJ10KICAgICAgICAgICAgaWYgJ1NTRUtNU0tleUlkJyBpbiBvYmo6CiAgICAg
ICAgICAgICAgICBzZWN1cml0eV9pbmZvWydLTVMgS2V5IElEJ10gPSBvYmpbJ1NTRUtNU0tleUlk
J10KCiAgICAgICAgICAgIGlmIHNlY3VyaXR5X2luZm86CiAgICAgICAgICAgICAgICBpbmZvWyct
LS0gU2VjdXJpdHkgLS0tJ10gPSAnJwogICAgICAgICAgICAgICAgZm9yIGssIHYgaW4gc2VjdXJp
dHlfaW5mby5pdGVtcygpOgogICAgICAgICAgICAgICAgICAgIGluZm9ba10gPSB2CgogICAgICAg
ICAgICAjIC0tLSBNZXRhZGF0YSAtLS0KICAgICAgICAgICAgaWYgJ01ldGFkYXRhJyBpbiBvYmog
YW5kIG9ialsnTWV0YWRhdGEnXToKICAgICAgICAgICAgICAgIGluZm9bJy0tLSBNZXRhZGF0YSAt
LS0nXSA9ICcnCiAgICAgICAgICAgICAgICBmb3IgaywgdiBpbiBvYmpbJ01ldGFkYXRhJ10uaXRl
bXMoKToKICAgICAgICAgICAgICAgICAgICBpbmZvW2YiTWV0YS17a30iXSA9IHYKCiAgICAgICAg
ICAgICMgLS0tIFRhZ3MgLS0tCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHRhZ3Nf
cmVzcCA9IGNsaWVudC5nZXRfb2JqZWN0X3RhZ2dpbmcoQnVja2V0PWJ1Y2tldCwgS2V5PWtleSkK
ICAgICAgICAgICAgICAgIHRhZ3MgPSB0YWdzX3Jlc3AuZ2V0KCdUYWdTZXQnLCBbXSkKICAgICAg
ICAgICAgICAgIGlmIHRhZ3M6CiAgICAgICAgICAgICAgICAgICAgaW5mb1snLS0tIFRhZ3MgLS0t
J10gPSAnJwogICAgICAgICAgICAgICAgICAgIGZvciB0YWcgaW4gdGFnczoKICAgICAgICAgICAg
ICAgICAgICAgICAgaW5mb1tmIlRhZzoge3RhZ1snS2V5J119Il0gPSB0YWdbJ1ZhbHVlJ10KICAg
ICAgICAgICAgZXhjZXB0IENsaWVudEVycm9yOgogICAgICAgICAgICAgICAgcGFzcwoKICAgICAg
ICAgICAgICAgICMgLS0tIEFDTCAtLS0KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAg
YWNsID0gY2xpZW50LmdldF9vYmplY3RfYWNsKEJ1Y2tldD1idWNrZXQsIEtleT1rZXkpCiAgICAg
ICAgICAgICAgICBvd25lciA9IGFjbC5nZXQoJ093bmVyJywge30pCiAgICAgICAgICAgICAgICBp
bmZvWyctLS0gUGVybWlzc2lvbnMgLS0tJ10gPSAnJwogICAgICAgICAgICAgICAgaW5mb1snT3du
ZXInXSA9IGYie293bmVyLmdldCgnRGlzcGxheU5hbWUnLCAnTi9BJyl9ICh7b3duZXIuZ2V0KCdJ
RCcsICdOL0EnKX0pIgoKICAgICAgICAgICAgICAgICMg0JrRgNCw0YLQutCw0Y8g0YHQstC+0LTQ
utCwINC/0YDQsNCyCiAgICAgICAgICAgICAgICBncmFudHMgPSBbXQogICAgICAgICAgICAgICAg
Zm9yIGcgaW4gYWNsLmdldCgnR3JhbnRzJywgW10pOgogICAgICAgICAgICAgICAgICAgIHBlcm0g
PSBnLmdldCgnUGVybWlzc2lvbicpCiAgICAgICAgICAgICAgICAgICAgZ3JhbnRlZSA9IGcuZ2V0
KCdHcmFudGVlJywge30pCiAgICAgICAgICAgICAgICAgICAgaWYgZ3JhbnRlZS5nZXQoJ1R5cGUn
KSA9PSAnR3JvdXAnOgogICAgICAgICAgICAgICAgICAgICAgICB3aG8gPSBncmFudGVlLmdldCgn
VVJJJywgJycpLnNwbGl0KCcvJylbLTFdCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAg
ICAgICAgICAgICAgICAgICAgd2hvID0gZ3JhbnRlZS5nZXQoJ0Rpc3BsYXlOYW1lJywgJ0lEPScg
KyBncmFudGVlLmdldCgnSUQnLCAnJylbOjRdKQogICAgICAgICAgICAgICAgICAgIGdyYW50cy5h
cHBlbmQoZiJ7d2hvfTp7cGVybX0iKQoKICAgICAgICAgICAgICAgIGlmIGdyYW50czoKICAgICAg
ICAgICAgICAgICAgICBpbmZvWydBQ0wnXSA9ICIsICIuam9pbihncmFudHNbOjNdKSAgIyDQn9C+
0LrQsNC30YvQstCw0LXQvCDQv9C10YDQstGL0LUgMyDQutC+0LzQv9Cw0LrRgtC90L4KICAgICAg
ICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgIyAtLS0gVmVy
c2lvbnMgLS0tCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHZlcnNpb25zID0gY2xp
ZW50Lmxpc3Rfb2JqZWN0X3ZlcnNpb25zKEJ1Y2tldD1idWNrZXQsIFByZWZpeD1rZXkpCiAgICAg
ICAgICAgICAgICBpZiAnVmVyc2lvbnMnIGluIHZlcnNpb25zOgogICAgICAgICAgICAgICAgICAg
IG9ial92ZXJzaW9ucyA9IFt2IGZvciB2IGluIHZlcnNpb25zWydWZXJzaW9ucyddIGlmIHZbJ0tl
eSddID09IGtleV0KICAgICAgICAgICAgICAgICAgICBpZiBsZW4ob2JqX3ZlcnNpb25zKSA+IDA6
CiAgICAgICAgICAgICAgICAgICAgICAgIGluZm9bJy0tLSBWZXJzaW9ucyAtLS0nXSA9ICcnCiAg
ICAgICAgICAgICAgICAgICAgICAgIGluZm9bJ0NvdW50J10gPSBsZW4ob2JqX3ZlcnNpb25zKQog
ICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBlbnVtZXJhdGUob2JqX3ZlcnNpb25z
Wzo1XSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWQgPSB2LmdldCgnVmVyc2lvbklk
JywgJ251bGwnKVs6OF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2N1ciA9ICIgKiIg
aWYgdi5nZXQoJ0lzTGF0ZXN0JykgZWxzZSAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZGF0ZSA9IHYuZ2V0KCdMYXN0TW9kaWZpZWQnKS5zdHJmdGltZSgnJW0tJWQgJUg6JU0nKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IGZvcm1hdF9zaXplKHYuZ2V0KCdTaXplJywg
MCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvW2YidntpICsgMX0iXSA9IGYie3Zp
ZDo8OH0ge2RhdGV9IHtzaXplfXtpc19jdXJ9IgogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAg
ICAgICAgICBwYXNzCgogICAgICAgICAgICAjIC0tLSBQcmVzaWduZWQgVVJMIC0tLQogICAgICAg
ICAgICB0cnk6CiAgICAgICAgICAgICAgICB1cmwgPSBjbGllbnQuZ2VuZXJhdGVfcHJlc2lnbmVk
X3VybCgnZ2V0X29iamVjdCcsIFBhcmFtcz17J0J1Y2tldCc6IGJ1Y2tldCwgJ0tleSc6IGtleX0s
IEV4cGlyZXNJbj0zNjAwKQogICAgICAgICAgICAgICAgaW5mb1snVVJMX0ZVTEwnXSA9IHVybCAg
IyDQmtC70Y7RhyDQtNC70Y8gRmlsZUluZm9EaWFsb2cKICAgICAgICAgICAgZXhjZXB0OgogICAg
ICAgICAgICAgICAgcGFzcwoKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAg
ICAgIGluZm9bJ0Vycm9yJ10gPSBzdHIoZSkKCiAgICAgICAgcmV0dXJuIGluZm8KCiAgICBkZWYg
Y29weV92ZXJzaW9uKHNlbGYsIGZpbGVfZGF0YSwgdmVyc2lvbl9kYXRhLCBtb3ZlPUZhbHNlLCBj
YWxsYmFjaz1Ob25lKToKICAgICAgICAiIiIKICAgICAgICDQmtC+0L/QuNGA0YPQtdGCINC40LvQ
uCDQv9C10YDQtdC80LXRidCw0LXRgiDQutC+0L3QutGA0LXRgtC90YPRjiDQstC10YDRgdC40Y4g
0YTQsNC50LvQsCDQsiDQvdC10LDQutGC0LjQstC90YPRjiAo0YbQtdC70LXQstGD0Y4pINC/0LDQ
vdC10LvRjC4KCiAgICAgICAg0JDRgNCz0YPQvNC10L3RgtGLOgogICAgICAgICAgICBmaWxlX2Rh
dGEgKGRpY3QpOiDQodC70L7QstCw0YDRjCDRgSDQtNCw0L3QvdGL0LzQuCDQvtGB0L3QvtCy0L3Q
vtCz0L4g0YTQsNC50LvQsCAo0YHQvtC00LXRgNC20LjRgiDQuNC80Y8sINGC0LjQvywg0LrQu9GO
0Ycg0Lgg0YIu0LQuKS4KICAgICAgICAgICAgdmVyc2lvbl9kYXRhIChkaWN0KTog0KHQu9C+0LLQ
sNGA0Ywg0YEg0LTQsNC90L3Ri9C80Lgg0LrQvtC90LrRgNC10YLQvdC+0Lkg0LLQtdGA0YHQuNC4
IChWZXJzaW9uSWQsIElzTGF0ZXN0LCBTaXplLCBMYXN0TW9kaWZpZWQpLgogICAgICAgICAgICBt
b3ZlIChib29sKTog0KDQtdC20LjQvCDQvtC/0LXRgNCw0YbQuNC4LgogICAgICAgICAgICAgICAg
ICAgICAgICAg0JXRgdC70LggVHJ1ZSDigJQg0LLRi9C/0L7Qu9C90Y/QtdGC0YHRjyDQv9C10YDQ
tdC80LXRidC10L3QuNC1ICjQutC+0L/QuNGA0L7QstCw0L3QuNC1ICsg0YPQtNCw0LvQtdC90LjQ
tSDQuNGB0YXQvtC00L3QvtC5INCy0LXRgNGB0LjQuCkuCiAgICAgICAgICAgICAgICAgICAgICAg
ICDQldGB0LvQuCBGYWxzZSAo0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4pIOKAlCDQvtCx0YvRh9C9
0L7QtSDQutC+0L/QuNGA0L7QstCw0L3QuNC1LgogICAgICAgICAgICBjYWxsYmFjayAoY2FsbGFi
bGUpOiDQpNGD0L3QutGG0LjRjyDQvtCx0YDQsNGC0L3QvtCz0L4g0LLRi9C30L7QstCwLCDQutC+
0YLQvtGA0LDRjyDQsdGD0LTQtdGCINCy0YvQv9C+0LvQvdC10L3QsCDQv9C+0YHQu9C1INC30LDQ
stC10YDRiNC10L3QuNGPCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgINC+0L/QtdGA
0LDRhtC40Lgg0LrQvtC/0LjRgNC+0LLQsNC90LjRjy/Qv9C10YDQtdC80LXRidC10L3QuNGPINC4
INC30LDQutGA0YvRgtC40Y8g0LTQuNCw0LvQvtCz0LAg0L/RgNC+0LPRgNC10YHRgdCwLgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICDQmNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0LTQ
u9GPINCy0L7RgdGB0YLQsNC90L7QstC70LXQvdC40Y8g0LTQuNCw0LvQvtCz0LAg0LLRi9Cx0L7R
gNCwINCy0LXRgNGB0LjQuS4KICAgICAgICAiIiIKICAgICAgICB0YXJnZXRfcGFuZWwgPSBzZWxm
LmFwcC5nZXRfaW5hY3RpdmVfcGFuZWwoKQoKICAgICAgICAjINCh0L7RhdGA0LDQvdGP0LXQvCDR
gtC10LrRg9GJ0LjQuSDRhNC+0LrRg9GBLCDRh9GC0L7QsdGLINCy0L7RgdGB0YLQsNC90L7QstC4
0YLRjCDQtdCz0L4sINC10YHQu9C4INC/0LDQvdC10LvRjCDQvtCx0L3QvtCy0LjRgtGB0Y8KICAg
ICAgICB0cnk6CiAgICAgICAgICAgIGN1cnJlbnRfaW5kZXggPSBzZWxmLmxpc3Rib3guZm9jdXNf
cG9zaXRpb24KICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIGN1cnJlbnRfaW5kZXggPSBOb25l
CgogICAgICAgIGl0ZW1fdG9fY29weSA9IGZpbGVfZGF0YS5jb3B5KCkKICAgICAgICBpdGVtX3Rv
X2NvcHlbJ1ZlcnNpb25JZCddID0gdmVyc2lvbl9kYXRhWydWZXJzaW9uSWQnXQogICAgICAgIGl0
ZW1fdG9fY29weVsnU2l6ZSddID0gdmVyc2lvbl9kYXRhWydTaXplJ10KCiAgICAgICAgaXRlbXMg
PSBbaXRlbV90b19jb3B5XQogICAgICAgIG9wZXJhdGlvbiA9ICJtb3ZlIiBpZiBtb3ZlIGVsc2Ug
ImNvcHkiCiAgICAgICAgdGl0bGUgPSAiTW92ZSBWZXJzaW9uIiBpZiBtb3ZlIGVsc2UgIkNvcHkg
VmVyc2lvbiIKCiAgICAgICAgaWYgdGFyZ2V0X3BhbmVsLm1vZGUgPT0gJ2ZzJzoKICAgICAgICAg
ICAgYmFzZV9wYXRoID0gdGFyZ2V0X3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoCiAgICAg
ICAgICAgIGRlc3RfcGF0aCA9IG9zLnBhdGguam9pbihiYXNlX3BhdGgsIGZpbGVfZGF0YVsnbmFt
ZSddKQogICAgICAgICAgICBkZXN0X2Rlc2MgPSBmIkZTOiB7ZGVzdF9wYXRofSIKICAgICAgICAg
ICAgIyDQkCDQstC+0YIg0LIg0LTQuNCw0LvQvtCzINC/0LXRgNC10LTQsNC10Lwg0LjQvNC10L3Q
vdC+INC/0YPRgtGMINC00LvRjyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPCiAgICAgICAg
ICAgIGVkaXRfcGF0aCA9IGRlc3RfcGF0aAogICAgICAgIGVsaWYgdGFyZ2V0X3BhbmVsLm1vZGUg
PT0gJ3MzJzoKICAgICAgICAgICAgaWYgbm90IHRhcmdldF9wYW5lbC5jdXJyZW50X2J1Y2tldDoK
ICAgICAgICAgICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KCJUYXJnZXQgcGFuZWwgaXMgbm90
IGluIGEgYnVja2V0IikKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBwcmVmaXgg
PSB0YXJnZXRfcGFuZWwuY3VycmVudF9wcmVmaXggaWYgdGFyZ2V0X3BhbmVsLmN1cnJlbnRfcHJl
Zml4IGVsc2UgIiIKCiAgICAgICAgICAgIGlmIHRhcmdldF9wYW5lbC5jdXJyZW50X2J1Y2tldDoK
ICAgICAgICAgICAgICAgIGVkaXRfcGF0aCA9IHByZWZpeCArIGZpbGVfZGF0YVsnbmFtZSddCiAg
ICAgICAgICAgICAgICBkZXN0X2Rlc2MgPSBmIlMzOiB7dGFyZ2V0X3BhbmVsLmN1cnJlbnRfYnVj
a2V0fS97ZWRpdF9wYXRofSIKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGVkaXRf
cGF0aCA9IGZpbGVfZGF0YVsnbmFtZSddCiAgICAgICAgICAgICAgICBkZXN0X2Rlc2MgPSBmIlMz
OiB7ZWRpdF9wYXRofSIKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmFwcC5zaG93X3Jl
c3VsdCgiSW52YWxpZCB0YXJnZXQiKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgZGVmIG9u
X2NvbmZpcm0oY29uZmlybWVkLCB0YXJnZXRfcGF0aF9mcm9tX2RpYWxvZyk6CiAgICAgICAgICAg
IHNlbGYuYXBwLmNsb3NlX2RpYWxvZygpCiAgICAgICAgICAgIGlmIGNvbmZpcm1lZDoKICAgICAg
ICAgICAgICAgIHRhcmdldF9wYXRoID0gdGFyZ2V0X3BhdGhfZnJvbV9kaWFsb2cgaWYgdGFyZ2V0
X3BhdGhfZnJvbV9kaWFsb2cgIT0gIiIgZWxzZSBlZGl0X3BhdGgKCiAgICAgICAgICAgICAgICBh
bmFseXplZF9pdGVtID0gewogICAgICAgICAgICAgICAgICAgICd0eXBlJzogZmlsZV9kYXRhWyd0
eXBlJ10sCiAgICAgICAgICAgICAgICAgICAgJ2l0ZW0nOiBpdGVtX3RvX2NvcHksCiAgICAgICAg
ICAgICAgICAgICAgJ2ZpbGVzJzogW2l0ZW1fdG9fY29weV0KICAgICAgICAgICAgICAgIH0KICAg
ICAgICAgICAgICAgIGFuYWx5emVkID0gW2FuYWx5emVkX2l0ZW1dCgogICAgICAgICAgICAgICAg
dG90YWxfYnl0ZXMgPSBpdGVtX3RvX2NvcHlbJ1NpemUnXQoKICAgICAgICAgICAgICAgIHNlbGYu
YXBwLm92ZXJ3cml0ZV9hbGwgPSBGYWxzZQogICAgICAgICAgICAgICAgc2VsZi5hcHAudmVyc2lv
bl9hbGwgPSBGYWxzZQogICAgICAgICAgICAgICAgc2VsZi5hcHAuc2tpcF9hbGwgPSBGYWxzZQoK
ICAgICAgICAgICAgICAgICMg0J/QtdGA0LXQtNCw0LXQvCByZXN0b3JlX2luZGV4INC4IGNhbGxi
YWNrIChvbl9jb21wbGV0ZSkKICAgICAgICAgICAgICAgIHNlbGYuYXBwLl9kb19jb3B5X3dpdGhf
cHJvZ3Jlc3MoCiAgICAgICAgICAgICAgICAgICAgYW5hbHl6ZWQsCiAgICAgICAgICAgICAgICAg
ICAgc2VsZiwKICAgICAgICAgICAgICAgICAgICB0YXJnZXRfcGFuZWwsCiAgICAgICAgICAgICAg
ICAgICAgdGFyZ2V0X3BhdGgsCiAgICAgICAgICAgICAgICAgICAgaXRlbV90b19jb3B5WyduYW1l
J10sCiAgICAgICAgICAgICAgICAgICAgaXNfbW92ZT1tb3ZlLAogICAgICAgICAgICAgICAgICAg
IHRvdGFsX2J5dGVzPXRvdGFsX2J5dGVzLAogICAgICAgICAgICAgICAgICAgIHJlc3RvcmVfaW5k
ZXg9Y3VycmVudF9pbmRleCwgICMg0JLQvtGB0YHRgtCw0L3QvtCy0LjRgiDQutGD0YDRgdC+0YAK
ICAgICAgICAgICAgICAgICAgICBvbl9jb21wbGV0ZT1jYWxsYmFjayAgIyDQktGL0LfQvtCy0LXR
giDQtNC40LDQu9C+0LMg0LLQtdGA0YHQuNC5INC/0L7RgdC70LUg0LfQsNCy0LXRgNGI0LXQvdC4
0Y8KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgIyDQldGB0LvQuCDQvtGC0LzQtdC90LAg
0LjQu9C4INC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNC1IC0g0LIg0LvRjtCx0L7QvCDRgdC70YPR
h9Cw0LUg0LLQvtC30LLRgNCw0YnQsNC10LzRgdGPLCDQtdGB0LvQuCDQtdGB0YLRjCBjYWxsYmFj
awogICAgICAgICAgICBpZiBjYWxsYmFjazoKICAgICAgICAgICAgICAgICMg0J3QtdCx0L7Qu9GM
0YjQsNGPINC30LDQtNC10YDQttC60LAsINGH0YLQvtCx0YsgVUkg0YPRgdC/0LXQuyDQvtGC0YDQ
sNCx0L7RgtCw0YLRjCDQt9Cw0LrRgNGL0YLQuNC1INC/0YDQtdC00YvQtNGD0YnQtdCz0L4g0LTQ
uNCw0LvQvtCz0LAKICAgICAgICAgICAgICAgIHNlbGYuYXBwLmxvb3Auc2V0X2FsYXJtX2luKDAu
MiwgbGFtYmRhICphOiBjYWxsYmFjaygpKQoKICAgICAgICB2ZXJzaW9uX2lkID0gdmVyc2lvbl9k
YXRhLmdldCgnVmVyc2lvbklkJywgJycpWzoxMl0KICAgICAgICBpc19sYXRlc3QgPSB2ZXJzaW9u
X2RhdGEuZ2V0KCdJc0xhdGVzdCcsIEZhbHNlKQogICAgICAgIGxhdGVzdF93YXJuID0gIiBbVEhJ
UyBJUyBUSEUgTEFURVNUIFZFUlNJT04hXSIgaWYgaXNfbGF0ZXN0IGVsc2UgIiIKICAgICAgICBz
aXplID0gc2VsZi5mb3JtYXRfc2l6ZSh2ZXJzaW9uX2RhdGEuZ2V0KCdTaXplJywgMCkpICAjIHNl
bGYuZm9ybWF0X3NpemUg0LjRgdC/0YDQsNCy0LjQuwogICAgICAgIG10aW1lID0gdmVyc2lvbl9k
YXRhLmdldCgnTGFzdE1vZGlmaWVkJywgJycpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycp
IGlmIHZlcnNpb25fZGF0YS5nZXQoCiAgICAgICAgICAgICdMYXN0TW9kaWZpZWQnKSBlbHNlICdO
L0EnCgogICAgICAgIGZyb21fZGVzYyA9IGYie2ZpbGVfZGF0YVsnbmFtZSddfSAoVmVyc2lvbiBJ
RDoge3ZlcnNpb25fZGF0YS5nZXQoJ1ZlcnNpb25JZCcsICcnKVs6MTBdfSAgU2l6ZToge3NpemV9
IE1vZGlmaWVkOiB7bXRpbWV9ICB7bGF0ZXN0X3dhcm59KSAiCiAgICAgICAgZGlhbG9nID0gQ29w
eU1vdmVEaWFsb2codGl0bGUsIGZyb21fZGVzYywgZWRpdF9wYXRoLCBvbl9jb25maXJtKQogICAg
ICAgIHNlbGYuYXBwLnNob3dfZGlhbG9nKGRpYWxvZykKCiAgICBkZWYgc2hvd19zb3J0X2RpYWxv
ZyhzZWxmKToKICAgICAgICAiIiLQn9C+0LrQsNC30LDRgtGMINC00LjQsNC70L7QsyDQstGL0LHQ
vtGA0LAg0YHQvtGA0YLQuNGA0L7QstC60LgiIiIKCiAgICAgICAgZGVmIGNhbGxiYWNrKGNvbmZp
cm1lZCwgbW9kZSwgcmV2ZXJzZSk6CiAgICAgICAgICAgIHNlbGYuYXBwLmNsb3NlX2RpYWxvZygp
CiAgICAgICAgICAgIGlmIGNvbmZpcm1lZCBhbmQgbW9kZToKICAgICAgICAgICAgICAgIHNlbGYu
c29ydF9tb2RlID0gbW9kZQogICAgICAgICAgICAgICAgc2VsZi5zb3J0X3JldmVyc2UgPSByZXZl
cnNlICAjINCh0L7RhdGA0LDQvdGP0LXQvCDQstGL0LHQvtGACgogICAgICAgICAgICAgICAgIyDQ
lNC70Y8gUzM6INC/0LXRgNC10YHQvtGA0YLQuNGA0L7QstGL0LLQsNC10Lwg0YLQvtC70YzQutC+
INC10YHQu9C4INC00LDQvdC90YvQtSDRg9C20LUg0LfQsNCz0YDRg9C20LXQvdGLCiAgICAgICAg
ICAgICAgICBpZiBzZWxmLm1vZGUgPT0gJ3MzJyBhbmQgbm90IHNlbGYubG9hZGluZ19pbl9wcm9n
cmVzczoKICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZXNvcnRfY3VycmVudF92aWV3KCkKICAg
ICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWZyZXNoKCkKCiAg
ICAgICAgICAgICAgICByZXZfbWFyayA9ICIgKFJldikiIGlmIHJldmVyc2UgZWxzZSAiIgogICAg
ICAgICAgICAgICAgc2VsZi5hcHAuc2hvd19yZXN1bHQoZidTb3J0IGJ5OiB7bW9kZX17cmV2X21h
cmt9JykKCiAgICAgICAgICAgICAgICBpZiBzZWxmLm1vZGUgPT0gJ3MzJzoKICAgICAgICAgICAg
ICAgICAgICBzZWxmLnVwZGF0ZV9oZWFkZXIoZidbUzMgTW9kZSAtIHtzZWxmLmN1cnJlbnRfZW5k
cG9pbnR9XSBTb3J0OiB7c2VsZi5zb3J0X21vZGV9e3Jldl9tYXJrfScpCgogICAgICAgICMg0J/Q
tdGA0LXQtNCw0LXQvCDRgtC10LrRg9GJ0LjQuSDRgNC10LbQuNC8INC4INGE0LvQsNCzIHJldmVy
c2UKICAgICAgICBkaWFsb2cgPSBTb3J0RGlhbG9nKHNlbGYuc29ydF9tb2RlLCBzZWxmLnNvcnRf
cmV2ZXJzZSwgY2FsbGJhY2spCiAgICAgICAgc2VsZi5hcHAuc2hvd19kaWFsb2coZGlhbG9nKQoK
ICAgIGRlZiBfcmVzb3J0X2N1cnJlbnRfdmlldyhzZWxmKToKICAgICAgICAiIiLQn9C10YDQtdGB
0L7RgNGC0LjRgNC+0LLQsNGC0Ywg0YLQtdC60YPRidC40Lkg0LLQuNC0INCx0LXQtyDQv9C10YDQ
tdC30LDQs9GA0YPQt9C60Lgg0LjQtyDRgdC10YLQuCIiIgogICAgICAgIGZvbGRlcnMgPSBbXQog
ICAgICAgIGZpbGVzID0gW10KCiAgICAgICAgIyAxLiDQmNC30LLQu9C10LrQsNC10Lwg0LTQsNC9
0L3Ri9C1INC40Lcg0YLQtdC60YPRidC40YUg0LLQuNC00LbQtdGC0L7QsiB3YWxrZXIKICAgICAg
ICBmb3Igd2lkZ2V0IGluIHNlbGYud2Fsa2VyOgogICAgICAgICAgICB3ID0gd2lkZ2V0Lm9yaWdp
bmFsX3dpZGdldCBpZiBpc2luc3RhbmNlKHdpZGdldCwgdXJ3aWQuQXR0ck1hcCkgZWxzZSB3aWRn
ZXQKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh3LCBTZWxlY3RhYmxlVGV4dCk6CiAgICAgICAg
ICAgICAgICBkYXRhID0gdy5kYXRhCiAgICAgICAgICAgICAgICBkdHlwZSA9IGRhdGEuZ2V0KCd0
eXBlJykKCiAgICAgICAgICAgICAgICAjIEZJWDog0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0L3QvtCy
0YvQtSDRgtC40L/RiyAnczNfZGlyJyDQuCAnczNfZmlsZScKICAgICAgICAgICAgICAgIGlmIGR0
eXBlID09ICdzM19kaXInOgogICAgICAgICAgICAgICAgICAgIGZvbGRlcnMuYXBwZW5kKHsnS2V5
JzogZGF0YVsna2V5J119KQogICAgICAgICAgICAgICAgZWxpZiBkdHlwZSA9PSAnczNfZmlsZSc6
CiAgICAgICAgICAgICAgICAgICAgIyDQktC+0YHRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0YHR
gtGA0YPQutGC0YPRgNGDLCDQutC+0YLQvtGA0YPRjiDQvtC20LjQtNCw0LXRgiBfY3JlYXRlX2Rp
c3BsYXlfaXRlbXMKICAgICAgICAgICAgICAgICAgICBmaWxlcy5hcHBlbmQoewogICAgICAgICAg
ICAgICAgICAgICAgICAnS2V5JzogZGF0YVsna2V5J10sCiAgICAgICAgICAgICAgICAgICAgICAg
ICdTaXplJzogZGF0YS5nZXQoJ3NpemUnLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ0xh
c3RNb2RpZmllZCc6IGRhdGEuZ2V0KCdtdGltZScpLAogICAgICAgICAgICAgICAgICAgICAgICAn
dmVyc2lvbl9jb3VudCc6IGRhdGEuZ2V0KCd2ZXJzaW9uX2NvdW50JywgMSkgICMg0KHQvtGF0YDQ
sNC90Y/QtdC8INC60L7Quy3QstC+INCy0LXRgNGB0LjQuQogICAgICAgICAgICAgICAgICAgIH0p
CgogICAgICAgICMgMi4g0J7Rh9C40YnQsNC10Lwgd2Fsa2VyLCDQvtGB0YLQsNCy0LvRj9GPINGC
0L7Qu9GM0LrQviDQvdCw0LLQuNCz0LDRhtC40Y4KICAgICAgICBrZWVwX2NvdW50ID0gMAogICAg
ICAgIGtlZXBfdHlwZXMgPSBbJ3RvX3Jvb3RfbWVudScsICdwYXJlbnQnLCAnczNfcGFyZW50Jywg
J3MzX2JhY2snXQoKICAgICAgICBmb3Igd2lkZ2V0IGluIHNlbGYud2Fsa2VyOgogICAgICAgICAg
ICB3ID0gd2lkZ2V0Lm9yaWdpbmFsX3dpZGdldCBpZiBpc2luc3RhbmNlKHdpZGdldCwgdXJ3aWQu
QXR0ck1hcCkgZWxzZSB3aWRnZXQKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh3LCBTZWxlY3Rh
YmxlVGV4dCk6CiAgICAgICAgICAgICAgICBpZiB3LmRhdGEuZ2V0KCd0eXBlJykgaW4ga2VlcF90
eXBlczoKICAgICAgICAgICAgICAgICAgICBrZWVwX2NvdW50ICs9IDEKICAgICAgICAgICAgICAg
IGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgZGVsIHNlbGYud2Fsa2Vy
W2tlZXBfY291bnQ6XQoKICAgICAgICAjIDMuINCf0LXRgNC10YHQvtC30LTQsNC10Lwg0LLQuNC0
0LbQtdGC0Ysg0YEg0YPRh9C10YLQvtC8INC90L7QstC+0Lkg0YHQvtGA0YLQuNGA0L7QstC60LgK
ICAgICAgICAjIHNlbGYuc29ydF9tb2RlINGD0LbQtSDQsdGL0Lsg0L7QsdC90L7QstC70LXQvSDQ
tNC40LDQu9C+0LPQvtC8INC/0LXRgNC10LQg0LLRi9C30L7QstC+0Lwg0Y3RgtC+0LPQviDQvNC1
0YLQvtC00LAKICAgICAgICBpdGVtcyA9IHNlbGYuX2NyZWF0ZV9kaXNwbGF5X2l0ZW1zKGZvbGRl
cnMsIGZpbGVzLCBkb19zb3J0PVRydWUpCgogICAgICAgIGZvciBpdGVtIGluIGl0ZW1zOgogICAg
ICAgICAgICBzZWxmLndhbGtlci5hcHBlbmQoaXRlbSkKCiAgICAgICAgIyA0LiDQntCx0L3QvtCy
0LvRj9C10Lwg0Y3QutGA0LDQvQogICAgICAgIGlmIHNlbGYuYXBwIGFuZCBoYXNhdHRyKHNlbGYu
YXBwLCAnbG9vcCcpIGFuZCBzZWxmLmFwcC5sb29wOgogICAgICAgICAgICBzZWxmLmFwcC5sb29w
LmRyYXdfc2NyZWVuKCkKCiAgICAjINCe0JHQndCe0JLQm9CV0J3QmNCVIFMzINGC0L7Qu9GM0LrQ
viDQv9GA0Lgg0LjQt9C80LXQvdC10L3QuNGP0YUKICAgIGRlZiBtYXJrX3MzX2Zvcl9yZWZyZXNo
KHNlbGYpOgogICAgICAgICIiItCe0YLQvNC10YLQuNGC0Ywg0YfRgtC+IFMzINC90YPQttC90L4g
0L7QsdC90L7QstC40YLRjCIiIgogICAgICAgIHNlbGYuczNfbmVlZHNfcmVmcmVzaCA9IFRydWUK
CiAgICBkZWYgc29ydF9pdGVtcyhzZWxmLCBpdGVtcyk6CiAgICAgICAgIiIi0KHQvtGA0YLQuNGA
0L7QstCw0YLRjCDRjdC70LXQvNC10L3RgtGLINGBINGD0YfQtdGC0L7QvCDRhNC70LDQs9CwIFJl
dmVyc2UiIiIKCiAgICAgICAgZGVmIGdldF90eXBlX3ByaW9yaXR5KGl0ZW0pOgogICAgICAgICAg
ICB0ID0gaXRlbS5nZXQoJ3R5cGUnLCAnJykKICAgICAgICAgICAgaWYgdCBpbiBbJ2ZvbGRlcics
ICdzM19kaXInLCAnZnNfZGlyJywgJ3BhcmVudCcsICdzM19wYXJlbnQnXToKICAgICAgICAgICAg
ICAgIHJldHVybiAwCiAgICAgICAgICAgIHJldHVybiAxCgogICAgICAgICMg0J/QvtC70YPRh9Cw
0LXQvCDRgdC/0LjRgdC60LgKICAgICAgICBkaXJzID0gW3ggZm9yIHggaW4gaXRlbXMgaWYgZ2V0
X3R5cGVfcHJpb3JpdHkoeCkgPT0gMF0KICAgICAgICBmaWxlcyA9IFt4IGZvciB4IGluIGl0ZW1z
IGlmIGdldF90eXBlX3ByaW9yaXR5KHgpID09IDFdCgogICAgICAgICMg0KTRg9C90LrRhtC40Y8t
0LrQu9GO0Ycg0LTQu9GPINGB0L7RgNGC0LjRgNC+0LLQutC4INGE0LDQudC70L7QsgogICAgICAg
IGtleV9mdW5jID0gTm9uZQogICAgICAgIHJldmVyc2VfZmlsZXMgPSBzZWxmLnNvcnRfcmV2ZXJz
ZQoKICAgICAgICBpZiBzZWxmLnNvcnRfbW9kZSA9PSAnbmFtZSc6CiAgICAgICAgICAgIGtleV9m
dW5jID0gbGFtYmRhIHg6IHguZ2V0KCduYW1lJywgeC5nZXQoJ2tleScsICcnKSkubG93ZXIoKQog
ICAgICAgICAgICAjINCU0LvRjyDQuNC80LXQvdC4IHJldmVyc2Ug0YDQsNCx0L7RgtCw0LXRgiAi
0LrQsNC6INC+0LbQuNC00LDQtdGC0YHRjyIgKFotQSkKCiAgICAgICAgZWxpZiBzZWxmLnNvcnRf
bW9kZSA9PSAnZXh0JzoKICAgICAgICAgICAgZGVmIGdldF9leHQoaXRlbSk6CiAgICAgICAgICAg
ICAgICBuYW1lID0gaXRlbS5nZXQoJ25hbWUnLCBpdGVtLmdldCgna2V5JywgJycpKQogICAgICAg
ICAgICAgICAgaWYgJy4nIGluIG5hbWU6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWUu
cnNwbGl0KCcuJywgMSlbMV0ubG93ZXIoKQogICAgICAgICAgICAgICAgcmV0dXJuICcnCgogICAg
ICAgICAgICBrZXlfZnVuYyA9IGdldF9leHQKCiAgICAgICAgZWxpZiBzZWxmLnNvcnRfbW9kZSA9
PSAnc2l6ZSc6CiAgICAgICAgICAgIGtleV9mdW5jID0gbGFtYmRhIHg6IHguZ2V0KCdzaXplJywg
eC5nZXQoJ1NpemUnLCAwKSkKICAgICAgICAgICAgIyDQn9C+INGD0LzQvtC70YfQsNC90LjRjiAo
cmV2ZXJzZT1GYWxzZSkgc2l6ZSDRgdC+0YDRgtC40YDRg9C10YIg0L/QviDRg9Cx0YvQstCw0L3Q
uNGOICjQsdC+0LvRjNGI0LjQtSDRgdCy0LXRgNGF0YMpPyAKICAgICAgICAgICAgIyDQntCx0YvR
h9C90L4g0LIg0YTQsNC50Lst0LzQtdC90LXQtNC20LXRgNCw0YUgc2l6ZSBhc2MgPSDQvNCw0LvQ
tdC90YzQutC40LUg0YHQstC10YDRhdGDLgogICAgICAgICAgICAjINCU0LDQstCw0LnRgtC1INGB
0LTQtdC70LDQtdC8INGB0YLQsNC90LTQsNGA0YLQvdC+OiBGYWxzZSA9IGFzYyAoMC4uOSksIFRy
dWUgPSBkZXNjICg5Li4wKQogICAgICAgICAgICAjINCd0J4g0LLRi9GI0LUg0LIg0LrQvtC00LUg
0LHRi9C70L4gZmlsZXMuc29ydCguLi4sIHJldmVyc2U9VHJ1ZSkg0LTQu9GPIHNpemUuCiAgICAg
ICAgICAgICMg0JfQvdCw0YfQuNGCLCDQtdGB0LvQuCBzb3J0X3JldmVyc2Ug0LLQutC70Y7Rh9C1
0L0sINC80Ysg0LTQvtC70LbQvdGLINC00LXQu9Cw0YLRjCByZXZlcnNlPUZhbHNlLgogICAgICAg
ICAgICByZXZlcnNlX2ZpbGVzID0gbm90IHNlbGYuc29ydF9yZXZlcnNlICAjINCY0L3QstC10YDR
gtC40YDRg9C10Lwg0LvQvtCz0LjQutGDINC00LvRjyBzaXplL3RpbWUKCiAgICAgICAgZWxpZiBz
ZWxmLnNvcnRfbW9kZSA9PSAndGltZSc6CiAgICAgICAgICAgIGtleV9mdW5jID0gbGFtYmRhIHg6
IHguZ2V0KCdtdGltZScsIHguZ2V0KCdMYXN0TW9kaWZpZWQnLCBkYXRldGltZS5taW4pKSBvciBk
YXRldGltZS5taW4KICAgICAgICAgICAgIyDQkNC90LDQu9C+0LPQuNGH0L3QviBzaXplOiDQv9C+
INGD0LzQvtC70YfQsNC90LjRjiDQvdC+0LLRi9C1INGB0LLQtdGA0YXRgyAoZGVzYyksIHJldmVy
c2UgLT4g0YHRgtCw0YDRi9C1INGB0LLQtdGA0YXRgyAoYXNjKQogICAgICAgICAgICByZXZlcnNl
X2ZpbGVzID0gbm90IHNlbGYuc29ydF9yZXZlcnNlCgogICAgICAgICMg0KHQvtGA0YLQuNGA0YPQ
tdC8INC/0LDQv9C60LggKNCy0YHQtdCz0LTQsCDQv9C+INC40LzQtdC90LgpCiAgICAgICAgIyDQ
n9Cw0L/QutC4INGC0L7QttC1INC80L7QttC90L4g0YDQtdCy0LXRgNGB0LjRgNC+0LLQsNGC0Yws
INC10YHQu9C4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDQstGL0LHRgNCw0LsgUmV2ZXJzZQog
ICAgICAgIGRpcnMuc29ydChrZXk9bGFtYmRhIHg6IHguZ2V0KCduYW1lJywgJycpLmxvd2VyKCks
IHJldmVyc2U9c2VsZi5zb3J0X3JldmVyc2UpCgogICAgICAgIGlmIGtleV9mdW5jOgogICAgICAg
ICAgICBmaWxlcy5zb3J0KGtleT1rZXlfZnVuYywgcmV2ZXJzZT1yZXZlcnNlX2ZpbGVzKQoKICAg
ICAgICAjINCU0LvRjyAnbm9uZScg0LLQvtC30LLRgNCw0YnQsNC10Lwg0LrQsNC6INC10YHRgtGM
CiAgICAgICAgaWYgc2VsZi5zb3J0X21vZGUgPT0gJ25vbmUnOgogICAgICAgICAgICByZXR1cm4g
aXRlbXMKCiAgICAgICAgcmV0dXJuIGRpcnMgKyBmaWxlcwoKICAgIGRlZiBpc19yb290X21lbnUo
c2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYubW9kZSA9PSAncm9vdF9tZW51JwoKICAgIGRlZiBp
c19lbmRwb2ludF9saXN0KHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLm1vZGUgPT0gJ3MzJyBh
bmQgc2VsZi5jdXJyZW50X2VuZHBvaW50IGlzIE5vbmUKCiAgICBkZWYgaXNfYnVja2V0X2xpc3Qo
c2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYubW9kZSA9PSAnczMnIGFuZCBzZWxmLmN1cnJlbnRf
ZW5kcG9pbnQgaXMgbm90IE5vbmUgYW5kIHNlbGYuY3VycmVudF9idWNrZXQgaXMgTm9uZQoKICAg
IGRlZiBpc19mc19yb290KHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLm1vZGUgPT0gJ2ZzJyBh
bmQgc2VsZi5mc19icm93c2VyLmN1cnJlbnRfcGF0aCA9PSAnLycKCiAgICBkZWYgZ2V0X2N1cnJl
bnRfcGF0aChzZWxmKToKICAgICAgICAiIiLQn9C+0LvRg9GH0LjRgtGMINGC0LXQutGD0YnQuNC5
INC/0YPRgtGMINC00LvRjyDQutC+0L/QuNGA0L7QstCw0L3QuNGPIiIiCiAgICAgICAgaWYgc2Vs
Zi5tb2RlID09ICdzMyc6CiAgICAgICAgICAgIGlmIHNlbGYuY3VycmVudF9idWNrZXQ6CiAgICAg
ICAgICAgICAgICByZXR1cm4gc2VsZi5jdXJyZW50X3ByZWZpeCBpZiBzZWxmLmN1cnJlbnRfcHJl
Zml4IGVsc2UgJycKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiAnJwog
ICAgICAgIGVsaWYgc2VsZi5tb2RlID09ICdmcyc6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmZz
X2Jyb3dzZXIuY3VycmVudF9wYXRoCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuICcn
CgogICAgZGVmIHVwZGF0ZV9oZWFkZXIoc2VsZiwgaW5mbyk6CiAgICAgICAgaWYgaW5mbzoKICAg
ICAgICAgICAgc2VsZi5saW5lYm94LnNldF90aXRsZShmIntzZWxmLnRpdGxlfSB7aW5mb30iKQog
ICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYubGluZWJveC5zZXRfdGl0bGUoc2VsZi50aXRs
ZSkKCiAgICBkZWYgc2V0X2ZvY3VzX29uX2l0ZW0oc2VsZiwgaXRlbV9uYW1lKToKICAgICAgICBm
b3IgaWR4LCB3aWRnZXQgaW4gZW51bWVyYXRlKHNlbGYud2Fsa2VyKToKICAgICAgICAgICAgdyA9
IHdpZGdldC5vcmlnaW5hbF93aWRnZXQKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh3LCBTZWxl
Y3RhYmxlVGV4dCk6CiAgICAgICAgICAgICAgICBkYXRhID0gdy5kYXRhCiAgICAgICAgICAgICAg
ICBpZiBkYXRhLmdldCgnbmFtZScpID09IGl0ZW1fbmFtZSBvciBkYXRhLmdldCgna2V5JywgJycp
LnJzdHJpcCgnLycpLnNwbGl0KCcvJylbLTFdID09IGl0ZW1fbmFtZToKICAgICAgICAgICAgICAg
ICAgICBzZWxmLmxpc3Rib3guc2V0X2ZvY3VzKGlkeCkKICAgICAgICAgICAgICAgICAgICByZXR1
cm4KCiAgICBkZWYgX3JlZnJlc2hfcm9vdF9tZW51KHNlbGYpOgogICAgICAgIHNlbGYudXBkYXRl
X2hlYWRlcignW1Jvb3QgTWVudV0nKQogICAgICAgIHNlbGYucGF0aF90ZXh0LnNldF90ZXh0KCdT
ZWxlY3Qgc291cmNlIHR5cGU6JykKCiAgICAgICAgbGFiZWwgPSAnW0ZTXSBMb2NhbCBGaWxlIFN5
c3RlbScKICAgICAgICBkYXRhID0geyd0eXBlJzogJ3Jvb3RfZnMnLCAnY2FuX3NlbGVjdCc6IEZh
bHNlfQogICAgICAgIHRleHQgPSBTZWxlY3RhYmxlVGV4dChmJyAge2xhYmVsfScsIGRhdGEsIHNl
bGYpCiAgICAgICAgc2VsZi53YWxrZXIuYXBwZW5kKHVyd2lkLkF0dHJNYXAodGV4dCwgTm9uZSwg
Zm9jdXNfbWFwPSdzZWxlY3RlZCcpKQoKICAgICAgICBzZWxmLndhbGtlci5hcHBlbmQodXJ3aWQu
RGl2aWRlcigpKQoKICAgICAgICBlbmRwb2ludHMgPSBzZWxmLnMzX2NvbmZpZy5nZXRfZW5kcG9p
bnRzKCkKICAgICAgICBmb3IgZXAgaW4gZW5kcG9pbnRzOgogICAgICAgICAgICBsYWJlbCA9IGYn
W1MzXSB7ZXBbIm5hbWUiXTozNX0ge2VwWyJ1cmwiXX0nCiAgICAgICAgICAgIGRhdGEgPSB7J3R5
cGUnOiAncm9vdF9lbmRwb2ludCcsICduYW1lJzogZXBbJ25hbWUnXSwgJ2NvbmZpZyc6IGVwLCAn
Y2FuX3NlbGVjdCc6IEZhbHNlfQogICAgICAgICAgICB0ZXh0ID0gU2VsZWN0YWJsZVRleHQoZicg
IHtsYWJlbH0nLCBkYXRhLCBzZWxmKQogICAgICAgICAgICBzZWxmLndhbGtlci5hcHBlbmQodXJ3
aWQuQXR0ck1hcCh0ZXh0LCBOb25lLCBmb2N1c19tYXA9J3NlbGVjdGVkJykpCgogICAgZGVmIHZp
ZXdfczNfZmlsZV92ZXJzaW9uKHNlbGYsIGZpbGVfZGF0YSwgdmVyc2lvbl9kYXRhPU5vbmUsIGNs
b3NlX2NhbGxiYWNrPU5vbmUpOgogICAgICAgICIiItCf0YDQvtGB0LzQvtGC0YAgUzMg0YTQsNC5
0LvQsCDRgSDRg9C60LDQt9Cw0L3QvdC+0Lkg0LLQtdGA0YHQuNC10LkiIiIKICAgICAgICB2ZXJz
aW9uX2lkID0gdmVyc2lvbl9kYXRhLmdldCgnVmVyc2lvbklkJykgaWYgdmVyc2lvbl9kYXRhIGVs
c2UgTm9uZQogICAgICAgIGZpbGVuYW1lID0gZmlsZV9kYXRhWyduYW1lJ10KCiAgICAgICAgaWYg
dmVyc2lvbl9pZDoKICAgICAgICAgICAgc2VsZi5hcHAuc2hvd19yZXN1bHQoZiJEb3dubG9hZGlu
ZyB7ZmlsZW5hbWV9ICh2ZXJzaW9uIHt2ZXJzaW9uX2lkWzo4XX0pLi4uIikKICAgICAgICBlbHNl
OgogICAgICAgICAgICBzZWxmLmFwcC5zaG93X3Jlc3VsdChmIkRvd25sb2FkaW5nIHtmaWxlbmFt
ZX0uLi4iKQoKICAgICAgICB3aXRoIHRlbXBmaWxlLk5hbWVkVGVtcG9yYXJ5RmlsZShkZWxldGU9
RmFsc2UpIGFzIHRtcDoKICAgICAgICAgICAgdG1wcGF0aCA9IHRtcC5uYW1lCgogICAgICAgICAg
ICBpZiBzZWxmLnMzX21hbmFnZXIuZG93bmxvYWRfb2JqZWN0KAogICAgICAgICAgICAgICAgICAg
IHNlbGYuY3VycmVudF9idWNrZXQsCiAgICAgICAgICAgICAgICAgICAgZmlsZV9kYXRhWydrZXkn
XSwKICAgICAgICAgICAgICAgICAgICB0bXBwYXRoLAogICAgICAgICAgICAgICAgICAgIHZlcnNp
b25faWQ9dmVyc2lvbl9pZCk6CiAgICAgICAgICAgICAgICBzZWxmLl92aWV3X2ZpbGUodG1wcGF0
aCwgZmlsZW5hbWUsIGNsb3NlX2NhbGxiYWNrPWNsb3NlX2NhbGxiYWNrKQogICAgICAgICAgICAg
ICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIG9zLnVubGluayh0bXBwYXRoKQogICAgICAgICAg
ICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgZWxzZToK
ICAgICAgICAgICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KGYiRmFpbGVkIHRvIGRvd25sb2Fk
IHtmaWxlbmFtZX0iKQoKICAgIGRlZiBzaG93X3ZlcnNpb25fc2VsZWN0X2RpYWxvZyhzZWxmLCBm
aWxlX2RhdGEsIHJlZnJlc2hfb25fZXhpdD1GYWxzZSk6CiAgICAgICAgIyDQn9C+0LvRg9GH0LDQ
tdC8INCw0LrRgtGD0LDQu9GM0L3Ri9C1INCy0LXRgNGB0LjQuAogICAgICAgIHZlcnNpb25zID0g
c2VsZi5zM19tYW5hZ2VyLmxpc3Rfb2JqZWN0X3ZlcnNpb25zKHNlbGYuY3VycmVudF9idWNrZXQs
IGZpbGVfZGF0YVsna2V5J10pCgogICAgICAgICMg0JXRgdC70Lgg0LLQtdGA0YHQuNC5INC90LXR
giAo0L3QsNC/0YDQuNC80LXRgCwg0L/QtdGA0LXQvNC10YHRgtC40LvQuCDQv9C+0YHQu9C10LTQ
vdGO0Y4pLCDQvtCx0L3QvtCy0LvRj9C10Lwg0L/QsNC90LXQu9GMINC4INCy0YvRhdC+0LTQuNC8
CiAgICAgICAgaWYgbm90IHZlcnNpb25zOgogICAgICAgICAgICAjINCV0YHQu9C4INGC0YDQtdCx
0L7QstCw0LvQvtGB0Ywg0L7QsdC90L7QstC70LXQvdC40LUg0LjQu9C4INCy0LXRgNGB0LjQuSDR
gdC+0LLRgdC10Lwg0L3QtdGCIC0+INC+0LHQvdC+0LLQu9GP0LXQvCDQv9Cw0L3QtdC70YwKICAg
ICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2VsZi5yZXN0b3JlX2ZvY3VzX2luZGV4ID0g
c2VsZi5saXN0Ym94LmZvY3VzX3Bvc2l0aW9uCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAg
ICAgICAgIHBhc3MKICAgICAgICAgICAgc2VsZi5yZWZyZXNoKCkKICAgICAgICAgICAgcmV0dXJu
CgogICAgICAgIGRlZiBjYWxsYmFjayhhY3Rpb24sIHZlcnNpb25fZGF0YSk6CiAgICAgICAgICAg
IGlmIGFjdGlvbiA9PSAnY2FuY2VsJzoKICAgICAgICAgICAgICAgIHNlbGYuYXBwLmNsb3NlX2Rp
YWxvZygpCiAgICAgICAgICAgICAgICAjINCV0YHQu9C4INCx0YvQu9C4INC+0L/QtdGA0LDRhtC4
0Lgg0L/QtdGA0LXQvNC10YnQtdC90LjRjyAobW92ZSksINC+0LHQvdC+0LLQu9GP0LXQvCDQv9Cw
0L3QtdC70Ywg0L/RgNC4INCy0YvRhdC+0LTQtQogICAgICAgICAgICAgICAgaWYgcmVmcmVzaF9v
bl9leGl0OgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAg
c2VsZi5yZXN0b3JlX2ZvY3VzX2luZGV4ID0gc2VsZi5saXN0Ym94LmZvY3VzX3Bvc2l0aW9uCiAg
ICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICAgICBwYXNzCiAg
ICAgICAgICAgICAgICAgICAgc2VsZi5yZWZyZXNoKCkKICAgICAgICAgICAgICAgIHJldHVybgoK
ICAgICAgICAgICAgaWYgYWN0aW9uID09ICd2aWV3JyBhbmQgdmVyc2lvbl9kYXRhOgogICAgICAg
ICAgICAgICAgc2VsZi5hcHAuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgICAgIHNlbGYudmll
d19zM19maWxlX3ZlcnNpb24oCiAgICAgICAgICAgICAgICAgICAgZmlsZV9kYXRhLAogICAgICAg
ICAgICAgICAgICAgIHZlcnNpb25fZGF0YSwKICAgICAgICAgICAgICAgICAgICBjbG9zZV9jYWxs
YmFjaz1sYW1iZGE6IHNlbGYuc2hvd192ZXJzaW9uX3NlbGVjdF9kaWFsb2coZmlsZV9kYXRhLCBy
ZWZyZXNoX29uX2V4aXQpCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVsaWYgYWN0aW9u
ID09ICdkZWxldGUnIGFuZCB2ZXJzaW9uX2RhdGE6CiAgICAgICAgICAgICAgICBzZWxmLmFwcC5j
bG9zZV9kaWFsb2coKQogICAgICAgICAgICAgICAgIyDQn9C10YDQtdC00LDQtdC8INGE0LvQsNCz
LCDRh9GC0L4g0L7QsdC90L7QstC70LXQvdC40LUg0YPQttC1INC90YPQttC90L4gKNGC0LDQuiDQ
utCw0Log0YPQtNCw0LvQtdC90LjQtSDQvNC10L3Rj9C10YIg0LrQvtC7LdCy0L4pCiAgICAgICAg
ICAgICAgICBzZWxmLmNvbmZpcm1fZGVsZXRlX3ZlcnNpb24oZmlsZV9kYXRhLAogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25fZGF0YSwKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoX3BlbmRpbmc9VHJ1ZSkK
CiAgICAgICAgICAgIGVsaWYgYWN0aW9uID09ICdjb3B5JyBhbmQgdmVyc2lvbl9kYXRhOgogICAg
ICAgICAgICAgICAgc2VsZi5hcHAuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgICAgICMg0JTQ
u9GPIENvcHkg0L7QsdC90L7QstC70LXQvdC40LUg0L/QsNC90LXQu9C4INC90LUg0YLRgNC10LHR
g9C10YLRgdGPLCDQvdC+INCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INGE0LvQsNCzINC60LDQuiDQsdGL
0LsKICAgICAgICAgICAgICAgIHNlbGYuY29weV92ZXJzaW9uKGZpbGVfZGF0YSwKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25fZGF0YSwKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIG1vdmU9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBjYWxsYmFjaz1sYW1iZGE6IHNlbGYuc2hvd192ZXJzaW9uX3NlbGVjdF9kaWFsb2coZmls
ZV9kYXRhLCByZWZyZXNoX29uX2V4aXQpKQoKICAgICAgICAgICAgZWxpZiBhY3Rpb24gPT0gJ21v
dmUnIGFuZCB2ZXJzaW9uX2RhdGE6CiAgICAgICAgICAgICAgICBzZWxmLmFwcC5jbG9zZV9kaWFs
b2coKQogICAgICAgICAgICAgICAgIyDQlNC70Y8gTW92ZSDQvtCx0L3QvtCy0LvQtdC90LjQtSDQ
v9C+0YLRgNC10LHRg9C10YLRgdGPICjRhNC70LDQsyBUcnVlKQogICAgICAgICAgICAgICAgc2Vs
Zi5jb3B5X3ZlcnNpb24oZmlsZV9kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdmVyc2lvbl9kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZT1U
cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s9bGFtYmRhOiBz
ZWxmLnNob3dfdmVyc2lvbl9zZWxlY3RfZGlhbG9nKGZpbGVfZGF0YSwgcmVmcmVzaF9vbl9leGl0
KSkKCiAgICAgICAgZGlhbG9nID0gVmVyc2lvblNlbGVjdERpYWxvZyhmaWxlX2RhdGEsIHZlcnNp
b25zLCBjYWxsYmFjaykKICAgICAgICBzZWxmLmFwcC5zaG93X2RpYWxvZyhkaWFsb2csIGhlaWdo
dD01MCkKCiAgICBkZWYgY29uZmlybV9kZWxldGVfdmVyc2lvbihzZWxmLCBmaWxlX2RhdGEsIHZl
cnNpb25fZGF0YSwgY2xvc2VfY2FsbGJhY2s9Tm9uZSwgcmVmcmVzaF9wZW5kaW5nPUZhbHNlKToK
ICAgICAgICAiIiIKICAgICAgICDQn9C+0LrQsNC30YvQstCw0LXRgiDQtNC40LDQu9C+0LMg0L/Q
vtC00YLQstC10YDQttC00LXQvdC40Y8g0YPQtNCw0LvQtdC90LjRjyDQutC+0L3QutGA0LXRgtC9
0L7QuSDQstC10YDRgdC40Lgg0YTQsNC50LvQsC4KCiAgICAgICAg0JDRgNCz0YPQvNC10L3RgtGL
OgogICAgICAgICAgICBmaWxlX2RhdGEgKGRpY3QpOiDQlNCw0L3QvdGL0LUg0L4g0YTQsNC50LvQ
tSAo0LjQvNGPLCDQutC70Y7RhyDQuCDRgi7QtC4pLgogICAgICAgICAgICB2ZXJzaW9uX2RhdGEg
KGRpY3QpOiDQlNCw0L3QvdGL0LUg0YPQtNCw0LvRj9C10LzQvtC5INCy0LXRgNGB0LjQuCAoSUQs
INGA0LDQt9C80LXRgCwg0LTQsNGC0LAg0LjQt9C80LXQvdC10L3QuNGPKS4KICAgICAgICAgICAg
Y2xvc2VfY2FsbGJhY2sgKGNhbGxhYmxlLCBvcHRpb25hbCk6INCk0YPQvdC60YbQuNGPLCDQstGL
0LfRi9Cy0LDQtdC80LDRjyDQv9GA0Lgg0LfQsNC60YDRi9GC0LjQuCDQtNC40LDQu9C+0LPQsCAo
0L3QtdC30LDQstC40YHQuNC80L4g0L7RgiDRgNC10LfRg9C70YzRgtCw0YLQsCkuCiAgICAgICAg
ICAgIHJlZnJlc2hfcGVuZGluZyAoYm9vbCk6INCk0LvQsNCzLCDRg9C60LDQt9GL0LLQsNGO0YnQ
uNC5LCDQvdGD0LbQvdC+INC70Lgg0L7QsdC90L7QstC70Y/RgtGMINGB0L/QuNGB0L7QuiDQstC1
0YDRgdC40Lkg0L/RgNC4INCy0L7Qt9Cy0YDQsNGC0LUg0LIg0L/RgNC10LTRi9C00YPRidC10LUg
0LzQtdC90Y4uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgINCf0LXRgNC10LTQ
sNC10YLRgdGPIFRydWUsINC10YHQu9C4INCyINGB0LXRgdGB0LjQuCDQtNC40LDQu9C+0LPQsCDR
g9C20LUg0LHRi9C70Lgg0YPQtNCw0LvQtdC90Ysg0LTRgNGD0LPQuNC1INCy0LXRgNGB0LjQuC4K
ICAgICAgICAiIiIKICAgICAgICBkZWYgY29uZmlybV9jYWxsYmFjayhjb25maXJtZWQpOgogICAg
ICAgICAgICBzZWxmLmFwcC5jbG9zZV9kaWFsb2coKQogICAgICAgICAgICBpZiBjb25maXJtZWQ6
CiAgICAgICAgICAgICAgICB2ZXJzaW9uX2lkX2Z1bGwgPSB2ZXJzaW9uX2RhdGEuZ2V0KCdWZXJz
aW9uSWQnKQogICAgICAgICAgICAgICAgaWYgc2VsZi5zM19tYW5hZ2VyLmRlbGV0ZV9vYmplY3Qo
CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudF9idWNrZXQsCiAgICAgICAgICAg
ICAgICAgICAgICAgIGZpbGVfZGF0YVsna2V5J10sCiAgICAgICAgICAgICAgICAgICAgICAgIHZl
cnNpb25faWQ9dmVyc2lvbl9pZF9mdWxsCiAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAg
ICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KGYiVmVyc2lvbiB7dmVyc2lvbl9kYXRhLmdldCgn
VmVyc2lvbklkJylbOjhdfSBkZWxldGVkIHN1Y2Nlc3NmdWxseSIpCiAgICAgICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KGYiRmFpbGVkIHRv
IGRlbGV0ZSB2ZXJzaW9uIikKICAgICAgICAgICAgICAgICMg0JLRgdC10LPQtNCwINCy0L7Qt9Cy
0YDQsNGJ0LDQtdC80YHRjyDQsiDQtNC40LDQu9C+0LMsINGB0YLQsNCy0LjQvCByZWZyZXNoX29u
X2V4aXQ9VHJ1ZSDRgi7Qui4g0YPQtNCw0LvQuNC70LgKICAgICAgICAgICAgICAgIHNlbGYuc2hv
d192ZXJzaW9uX3NlbGVjdF9kaWFsb2coZmlsZV9kYXRhLCByZWZyZXNoX29uX2V4aXQ9VHJ1ZSkK
ICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMg0JLQvtC30LLRgNCw0YnQsNC10LzR
gdGPINCyINC00LjQsNC70L7Qsywg0YHQvtGF0YDQsNC90Y/RjyDRgdGC0LDRgtGD0YEg0L3QtdC+
0LHRhdC+0LTQuNC80L7RgdGC0Lgg0L7QsdC90L7QstC70LXQvdC40Y8gKNC10YHQu9C4INCx0YvQ
uyDQtNC+INGN0YLQvtCz0L4pCiAgICAgICAgICAgICAgICBzZWxmLnNob3dfdmVyc2lvbl9zZWxl
Y3RfZGlhbG9nKGZpbGVfZGF0YSwgcmVmcmVzaF9vbl9leGl0PXJlZnJlc2hfcGVuZGluZykKCiAg
ICAgICAgdmVyc2lvbl9pZCA9IHZlcnNpb25fZGF0YS5nZXQoJ1ZlcnNpb25JZCcsICcnKVs6MTJd
CiAgICAgICAgaXNfbGF0ZXN0ID0gdmVyc2lvbl9kYXRhLmdldCgnSXNMYXRlc3QnLCBGYWxzZSkK
ICAgICAgICBsYXRlc3Rfd2FybiA9ICIgW1RISVMgSVMgVEhFIExBVEVTVCBWRVJTSU9OIV0iIGlm
IGlzX2xhdGVzdCBlbHNlICIiCiAgICAgICAgc2l6ZSA9IHNlbGYuZm9ybWF0X3NpemUodmVyc2lv
bl9kYXRhLmdldCgnU2l6ZScsIDApKSAgIyBzZWxmLmZvcm1hdF9zaXplINC40YHQv9GA0LDQstC4
0LsKICAgICAgICBtdGltZSA9IHZlcnNpb25fZGF0YS5nZXQoJ0xhc3RNb2RpZmllZCcsICcnKS5z
dHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKSBpZiB2ZXJzaW9uX2RhdGEuZ2V0KAogICAgICAg
ICAgICAnTGFzdE1vZGlmaWVkJykgZWxzZSAnTi9BJwoKICAgICAgICBtZXNzYWdlID0gZiJEZWxl
dGUgdmVyc2lvbiBvZiAne2ZpbGVfZGF0YVsnbmFtZSddfSc/e2xhdGVzdF93YXJufSIKICAgICAg
ICBpdGVtc19pbmZvID0gWwogICAgICAgICAgICBmIlZlcnNpb24gSUQ6IHt2ZXJzaW9uX2lkfSIs
CiAgICAgICAgICAgIGYiU2l6ZToge3NpemV9IiwKICAgICAgICAgICAgZiJNb2RpZmllZDoge210
aW1lfSIKICAgICAgICBdCiAgICAgICAgZGlhbG9nID0gQ29uZmlybURpYWxvZygiQ29uZmlybSBE
ZWxldGUgVmVyc2lvbiIsIG1lc3NhZ2UsIGl0ZW1zX2luZm8sIGNvbmZpcm1fY2FsbGJhY2spCiAg
ICAgICAgc2VsZi5hcHAuc2hvd19kaWFsb2coZGlhbG9nKQoKICAgIGRlZiBfcmVmcmVzaF9lbmRw
b2ludHMoc2VsZik6CiAgICAgICAgc2VsZi51cGRhdGVfaGVhZGVyKCdbUzMgTW9kZSAtIEVuZHBv
aW50c10nKQogICAgICAgIHNlbGYucGF0aF90ZXh0LnNldF90ZXh0KCdTMzogLycpCgogICAgICAg
IGRhdGEgPSB7J3R5cGUnOiAndG9fcm9vdF9tZW51JywgJ2Nhbl9zZWxlY3QnOiBGYWxzZX0KICAg
ICAgICB0ZXh0ID0gU2VsZWN0YWJsZVRleHQoJyAgWy4uXSBCYWNrIHRvIHJvb3QgbWVudScsIGRh
dGEsIHNlbGYpCiAgICAgICAgc2VsZi53YWxrZXIuYXBwZW5kKHVyd2lkLkF0dHJNYXAodGV4dCwg
Tm9uZSwgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKQoKICAgICAgICBlbmRwb2ludHMgPSBzZWxmLnMz
X2NvbmZpZy5nZXRfZW5kcG9pbnRzKCkKCiAgICAgICAgZm9yIGVwIGluIGVuZHBvaW50czoKICAg
ICAgICAgICAgbGFiZWwgPSBmJ1tFTkRQT0lOVF0ge2VwWyJuYW1lIl06MzV9IHtlcFsidXJsIl19
JwogICAgICAgICAgICBkYXRhID0geyd0eXBlJzogJ2VuZHBvaW50JywgJ25hbWUnOiBlcFsnbmFt
ZSddLCAnY29uZmlnJzogZXAsICdjYW5fc2VsZWN0JzogRmFsc2V9CiAgICAgICAgICAgIHRleHQg
PSBTZWxlY3RhYmxlVGV4dChmJyAge2xhYmVsfScsIGRhdGEsIHNlbGYpCiAgICAgICAgICAgIHNl
bGYud2Fsa2VyLmFwcGVuZCh1cndpZC5BdHRyTWFwKHRleHQsIE5vbmUsIGZvY3VzX21hcD0nc2Vs
ZWN0ZWQnKSkKCiAgICBkZWYgX3JlZnJlc2hfczNfb2JqZWN0c19sYXp5KHNlbGYpOgogICAgICAg
ICIiItCb0LXQvdC40LLQsNGPINC30LDQs9GA0YPQt9C60LAg0L7QsdGK0LXQutGC0L7QsiBTMyDR
gSDQv9C+0YHRgtC10L/QtdC90L3Ri9C8INC+0YLQvtCx0YDQsNC20LXQvdC40LXQvCIiIgogICAg
ICAgIHByZWZpeCA9IHNlbGYuY3VycmVudF9wcmVmaXgKCiAgICAgICAgIyDQktCQ0JbQndCeOiDQ
n9GA0LjQvdGD0LTQuNGC0LXQu9GM0L3QsNGPINC/0LXRgNC10YDQuNGB0L7QstC60LAKICAgICAg
ICBpZiBoYXNhdHRyKHNlbGYuYXBwLCAnbG9vcCcpIGFuZCBzZWxmLmFwcC5sb29wOgogICAgICAg
ICAgICBzZWxmLmFwcC5sb29wLmRyYXdfc2NyZWVuKCkKCiAgICAgICAgIyDQl9Cw0L/Rg9GB0LrQ
sNC10Lwg0YTQvtC90L7QstGD0Y4g0LfQsNCz0YDRg9C30LrRgwogICAgICAgIGlmIHNlbGYubG9h
ZGluZ190aHJlYWQgYW5kIHNlbGYubG9hZGluZ190aHJlYWQuaXNfYWxpdmUoKToKICAgICAgICAg
ICAgcmV0dXJuCgogICAgICAgIHNlbGYubG9hZGluZ19pbl9wcm9ncmVzcyA9IFRydWUKICAgICAg
ICBzZWxmLmxvYWRpbmdfdGhyZWFkID0gdGhyZWFkaW5nLlRocmVhZCgKICAgICAgICAgICAgdGFy
Z2V0PXNlbGYubG9hZF9zM19vYmplY3RzX2JhY2tncm91bmQsCiAgICAgICAgICAgIGFyZ3M9KHNl
bGYuY3VycmVudF9idWNrZXQsIHByZWZpeCksCiAgICAgICAgICAgIGRhZW1vbj1UcnVlCiAgICAg
ICAgKQogICAgICAgIHNlbGYubG9hZGluZ190aHJlYWQuc3RhcnQoKQoKICAgIGRlZiBsb2FkX3Mz
X29iamVjdHNfYmFja2dyb3VuZChzZWxmLCBidWNrZXRfbmFtZSwgcHJlZml4KToKICAgICAgICAi
IiLQpNC+0L3QvtCy0LDRjyDQt9Cw0LPRgNGD0LfQutCwINC+0LHRitC10LrRgtC+0LIg0YEg0L7Q
sdC90L7QstC70LXQvdC40LXQvCDRgdGC0LDRgtGD0YHQvdC+0Lkg0YHRgtGA0L7QutC4IiIiCiAg
ICAgICAgdHJ5OgogICAgICAgICAgICAjINCh0YDQsNC30YMg0L/QvtC60LDQt9GL0LLQsNC10Lwg
0YHRgtCw0YLRg9GBCiAgICAgICAgICAgIHNlbGYuYXBwLmxvb3Auc2V0X2FsYXJtX2luKDAsIGxh
bWJkYSBtLCB1OiBzZWxmLmFwcC5zaG93X3Jlc3VsdCgiTG9hZGluZy4uLiIpKQogICAgICAgICAg
ICBzZWxmLmFwcC53YWtldXAoKQoKICAgICAgICAgICAgdXNlX3ZlcnNpb25pbmcgPSBGYWxzZQog
ICAgICAgICAgICBpZiBzZWxmLnMzX21hbmFnZXI6CiAgICAgICAgICAgICAgICBzdGF0dXMgPSBz
ZWxmLnMzX21hbmFnZXIuZ2V0X3ZlcnNpb25pbmdfc3RhdHVzX2NhY2hlZChidWNrZXRfbmFtZSkK
ICAgICAgICAgICAgICAgIHVzZV92ZXJzaW9uaW5nID0gc3RhdHVzIGluIFsnRW5hYmxlZCcsICdT
dXNwZW5kZWQnXQoKICAgICAgICAgICAgYWxsX2ZvbGRlcnMgPSBbXQogICAgICAgICAgICBhbGxf
ZmlsZXMgPSBbXQoKICAgICAgICAgICAgZm9yIGZvbGRlcnMsIGZpbGVzIGluIHNlbGYuczNfbWFu
YWdlci5saXN0X29iamVjdHNfbGF6eShidWNrZXRfbmFtZSwgcHJlZml4LCBwYWdlX3NpemU9MTAw
MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB1c2VfdmVyc2lvbmluZz11c2VfdmVyc2lvbmluZyk6CiAgICAgICAgICAg
ICAgICBhbGxfZm9sZGVycy5leHRlbmQoZm9sZGVycykKICAgICAgICAgICAgICAgIGFsbF9maWxl
cy5leHRlbmQoZmlsZXMpCgogICAgICAgICAgICAgICAgY3VycmVudF9mb2xkZXJzID0gbGlzdChh
bGxfZm9sZGVycykKICAgICAgICAgICAgICAgIGN1cnJlbnRfZmlsZXMgPSBsaXN0KGFsbF9maWxl
cykKCiAgICAgICAgICAgICAgICAjINCe0LHQvdC+0LLQu9GP0LXQvCDRgdC/0LjRgdC+0Log0YTQ
sNC50LvQvtCyCiAgICAgICAgICAgICAgICBzZWxmLmFwcC5sb29wLnNldF9hbGFybV9pbigwLCBs
YW1iZGEgbSwgdTogc2VsZi5fdXBkYXRlX2Rpc3BsYXlfaW5jcmVtZW50YWwoY3VycmVudF9mb2xk
ZXJzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfZmlsZXMpKQoK
ICAgICAgICAgICAgICAgICMg0J7QsdC90L7QstC70Y/QtdC8INGB0YLQsNGC0YPRgdC90YPRjiDR
gdGC0YDQvtC60YM6INCW0LXQu9GC0YvQuSDQvdCwINGB0LjQvdC10LwgKNGB0YLQuNC70YwgJ3Jl
c3VsdCcg0LIgRHVhbFBhbmVBcHApCiAgICAgICAgICAgICAgICBjb3VudF9tc2cgPSBmIkxvYWRp
bmcuLi4ge2xlbihhbGxfZm9sZGVycykgKyBsZW4oYWxsX2ZpbGVzKX0gaXRlbXMiCiAgICAgICAg
ICAgICAgICBzZWxmLmFwcC5sb29wLnNldF9hbGFybV9pbigwLCBsYW1iZGEgbSwgdSwgbXNnPWNv
dW50X21zZzogc2VsZi5hcHAuc2hvd19yZXN1bHQobXNnKSkKCiAgICAgICAgICAgICAgICBzZWxm
LmFwcC53YWtldXAoKQoKICAgICAgICAgICAgIyDQpNC40L3QsNC70YzQvdC+0LUg0L7QsdC90L7Q
stC70LXQvdC40LUKICAgICAgICAgICAgc2VsZi5hcHAubG9vcC5zZXRfYWxhcm1faW4oMCwgbGFt
YmRhIG0sIHU6IHNlbGYuX2ZpbmFsaXplX2xvYWRpbmcoYWxsX2ZvbGRlcnMsIGFsbF9maWxlcykp
CiAgICAgICAgICAgIHNlbGYuYXBwLndha2V1cCgpCgogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24g
YXMgZToKICAgICAgICAgICAgZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHNlbGYuYXBw
Lmxvb3Auc2V0X2FsYXJtX2luKDAsIGxhbWJkYSBtLCB1LCBlcnI9ZXJyb3JfbXNnOgogICAgICAg
ICAgICBzZWxmLmFwcC5zaG93X3Jlc3VsdChmIkVycm9yIGxvYWRpbmcgb2JqZWN0czoge2Vycn0i
LCBpc19lcnJvcj1UcnVlKSkKICAgICAgICAgICAgc2VsZi5hcHAud2FrZXVwKCkKICAgICAgICBm
aW5hbGx5OgogICAgICAgICAgICBzZWxmLmxvYWRpbmdfaW5fcHJvZ3Jlc3MgPSBGYWxzZQoKICAg
IGRlZiBfdXBkYXRlX2Rpc3BsYXlfaW5jcmVtZW50YWwoc2VsZiwgZm9sZGVycywgZmlsZXMpOgog
ICAgICAgICIiItCY0L3QutGA0LXQvNC10L3RgtCw0LvRjNC90L7QtSDQvtCx0L3QvtCy0LvQtdC9
0LjQtSAo0LHQtdC3INCy0LjQtNC20LXRgtCwIGxvYWRpbmcg0LIg0YHQv9C40YHQutC1KSIiIgog
ICAgICAgICMg0KHQvtC30LTQsNC10Lwg0Y3Qu9C10LzQtdC90YLRiyAo0LHQtdC3INGB0L7RgNGC
0LjRgNC+0LLQutC4INC00LvRjyDRgdC60L7RgNC+0YHRgtC4INCy0L4g0LLRgNC10LzRjyDQt9Cw
0LPRgNGD0LfQutC4KQogICAgICAgICMg0KHQvtGA0YLQuNGA0L7QstC60LAg0LHRg9C00LXRgiDQ
v9GA0LjQvNC10L3QtdC90LAg0YLQvtC70YzQutC+INCyINC60L7QvdGG0LUsINCyIGZpbmFsaXpl
CiAgICAgICAgaXRlbXMgPSBzZWxmLl9jcmVhdGVfZGlzcGxheV9pdGVtcyhmb2xkZXJzLCBmaWxl
cywgZG9fc29ydD1GYWxzZSkKCiAgICAgICAgIyDQodC+0YXRgNCw0L3Rj9C10Lwg0L3QsNCy0LjQ
s9Cw0YbQuNGOIChbLi5dKQogICAgICAgIGtlZXBfY291bnQgPSAwCiAgICAgICAga2VlcF90eXBl
cyA9IFsndG9fcm9vdF9tZW51JywgJ3BhcmVudCcsICdzM19wYXJlbnQnLCAnczNfYmFjayddCgog
ICAgICAgIGZvciB3aWRnZXQgaW4gc2VsZi53YWxrZXI6CiAgICAgICAgICAgIHcgPSB3aWRnZXQu
b3JpZ2luYWxfd2lkZ2V0IGlmIGlzaW5zdGFuY2Uod2lkZ2V0LCB1cndpZC5BdHRyTWFwKSBlbHNl
IHdpZGdldAogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHcsIFNlbGVjdGFibGVUZXh0KToKICAg
ICAgICAgICAgICAgIGlmIHcuZGF0YS5nZXQoJ3R5cGUnKSBpbiBrZWVwX3R5cGVzOgogICAgICAg
ICAgICAgICAgICAgIGtlZXBfY291bnQgKz0gMQogICAgICAgICAgICAgICAgZWxzZToKICAgICAg
ICAgICAgICAgICAgICBicmVhawoKICAgICAgICAjINCX0LDQvNC10L3Rj9C10Lwg0YHRgtCw0YDR
i9C1INGE0LDQudC70Ysg0L3QvtCy0YvQvNC4CiAgICAgICAgZGVsIHNlbGYud2Fsa2VyW2tlZXBf
Y291bnQ6XQogICAgICAgIGZvciBpdGVtX3dpZGdldCBpbiBpdGVtczoKICAgICAgICAgICAgc2Vs
Zi53YWxrZXIuYXBwZW5kKGl0ZW1fd2lkZ2V0KQoKICAgICAgICAjINCS0L7RgdGB0YLQsNC90LDQ
stC70LjQstCw0LXQvCDRhNC+0LrRg9GBCiAgICAgICAgaWYgbGVuKHNlbGYud2Fsa2VyKSA+IDA6
CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICMg0KTQvtC60YPRgSDQvdCwINC/0LXR
gNCy0YvQuSDRjdC70LXQvNC10L3RgiDQv9C+0YHQu9C1IFsuLl0KICAgICAgICAgICAgICAgIGZv
Y3VzX3BvcyA9IG1pbihrZWVwX2NvdW50LCBsZW4oc2VsZi53YWxrZXIpIC0gMSkKICAgICAgICAg
ICAgICAgICMg0JXRgdC70Lgg0LrRg9GA0YHQvtGAINGD0LbQtSDQsdGL0Lsg0L3QuNC20LUsINC/
0YvRgtCw0LXQvNGB0Y8g0YHQvtGF0YDQsNC90LjRgtGMINC/0L7Qt9C40YbQuNGOICjQvtC/0YbQ
uNC+0L3QsNC70YzQvdC+LCDQvdC+INGB0LvQvtC20L3QviDQv9GA0Lgg0LjQvdC60YDQtdC80LXQ
vdGC0LUpCiAgICAgICAgICAgICAgICBzZWxmLmxpc3Rib3guc2V0X2ZvY3VzKGZvY3VzX3BvcykK
ICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICBpZiBzZWxm
LmFwcCBhbmQgaGFzYXR0cihzZWxmLmFwcCwgJ2xvb3AnKSBhbmQgc2VsZi5hcHAubG9vcDoKICAg
ICAgICAgICAgc2VsZi5hcHAubG9vcC5kcmF3X3NjcmVlbigpCgogICAgZGVmIF9maW5hbGl6ZV9s
b2FkaW5nKHNlbGYsIGZvbGRlcnMsIGZpbGVzKToKICAgICAgICAiIiLQl9Cw0LLQtdGA0YjQtdC9
0LjQtSDQt9Cw0LPRgNGD0LfQutC4IiIiCiAgICAgICAgc2VsZi5sb2FkaW5nX2luX3Byb2dyZXNz
ID0gRmFsc2UKCiAgICAgICAgIyDQpNC40L3QsNC70YzQvdCw0Y8g0L/QtdGA0LXRgdGC0YDQvtC5
0LrQsCDRgdC/0LjRgdC60LAuIAogICAgICAgICMg0JXRgdC70Lggc29ydF9tb2RlINC30LDQtNCw
0L0gKNC90LDQv9GA0LjQvNC10YAgJ3NpemUnKSwg0LfQtNC10YHRjCDQv9GA0L7QuNC30L7QudC0
0LXRgiDRgdC+0YDRgtC40YDQvtCy0LrQsC4KICAgICAgICBpZiBzZWxmLnNvcnRfbW9kZSAhPSAn
bm9uZSc6CiAgICAgICAgICAgIGl0ZW1zID0gc2VsZi5fY3JlYXRlX2Rpc3BsYXlfaXRlbXMoZm9s
ZGVycywgZmlsZXMsIGRvX3NvcnQ9VHJ1ZSkKCiAgICAgICAgICAgIGtlZXBfY291bnQgPSAwCiAg
ICAgICAgICAgIGtlZXBfdHlwZXMgPSBbJ3RvX3Jvb3RfbWVudScsICdwYXJlbnQnLCAnczNfcGFy
ZW50JywgJ3MzX2JhY2snXQogICAgICAgICAgICBmb3Igd2lkZ2V0IGluIHNlbGYud2Fsa2VyOgog
ICAgICAgICAgICAgICAgdyA9IHdpZGdldC5vcmlnaW5hbF93aWRnZXQgaWYgaXNpbnN0YW5jZSh3
aWRnZXQsIHVyd2lkLkF0dHJNYXApIGVsc2Ugd2lkZ2V0CiAgICAgICAgICAgICAgICBpZiBpc2lu
c3RhbmNlKHcsIFNlbGVjdGFibGVUZXh0KToKICAgICAgICAgICAgICAgICAgICBpZiB3LmRhdGEu
Z2V0KCd0eXBlJykgaW4ga2VlcF90eXBlczoKICAgICAgICAgICAgICAgICAgICAgICAga2VlcF9j
b3VudCArPSAxCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAg
ICAgYnJlYWsKCiAgICAgICAgICAgIGRlbCBzZWxmLndhbGtlcltrZWVwX2NvdW50Ol0KICAgICAg
ICAgICAgZm9yIGl0ZW1fd2lkZ2V0IGluIGl0ZW1zOgogICAgICAgICAgICAgICAgc2VsZi53YWxr
ZXIuYXBwZW5kKGl0ZW1fd2lkZ2V0KQoKICAgICAgICAjINCe0LHQvdC+0LLQu9GP0LXQvCDRgdGC
0LDRgtGD0YHQvdGD0Y4g0YHRgtGA0L7QutGDINGE0LjQvdCw0LvRjNC90YvQvCDRgdC+0L7QsdGJ
0LXQvdC40LXQvAogICAgICAgIHNvcnRfaW5mbyA9IGYiKHNvcnRlZCBieSB7c2VsZi5zb3J0X21v
ZGV9KSIgaWYgc2VsZi5zb3J0X21vZGUgIT0gJ25vbmUnIGVsc2UgIih1bnNvcnRlZCkiCiAgICAg
ICAgbXNnID0gZiJMb2FkZWQ6IHtsZW4oZm9sZGVycyl9IGZvbGRlcnMsIHtsZW4oZmlsZXMpfSBm
aWxlcyB7c29ydF9pbmZvfSIKICAgICAgICBzZWxmLmFwcC5zaG93X3Jlc3VsdChtc2cpCgogICAg
ICAgIGlmIGxlbihzZWxmLndhbGtlcikgPiAwOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAg
ICAgICAjIC0tLSDQndCe0JLQkNCvINCb0J7Qk9CY0JrQkCDQpNCe0JrQo9Ch0JjQoNCe0JLQmtCY
IC0tLQogICAgICAgICAgICAgICAgIyAxLiDQodC90LDRh9Cw0LvQsCDQv9GA0L7QstC10YDRj9C1
0LwsINC10YHRgtGMINC70Lgg0LfQsNC/0YDQvtGBINC90LAg0YTQvtC60YPRgSDQv9C+INC40LzQ
tdC90LggKNC00LvRjyDQvdCw0LLQuNCz0LDRhtC40LggIi4uIikKICAgICAgICAgICAgICAgIGZv
Y3VzX3NldCA9IEZhbHNlCiAgICAgICAgICAgICAgICB0YXJnZXRfbmFtZSA9IGdldGF0dHIoc2Vs
ZiwgJ19wZW5kaW5nX2ZvY3VzX25hbWUnLCBOb25lKQoKICAgICAgICAgICAgICAgIGlmIHRhcmdl
dF9uYW1lOgogICAgICAgICAgICAgICAgICAgIGZvciBpLCB3aWRnZXQgaW4gZW51bWVyYXRlKHNl
bGYud2Fsa2VyKToKICAgICAgICAgICAgICAgICAgICAgICAgdyA9IHdpZGdldC5vcmlnaW5hbF93
aWRnZXQgaWYgaXNpbnN0YW5jZSh3aWRnZXQsIHVyd2lkLkF0dHJNYXApIGVsc2Ugd2lkZ2V0CiAg
ICAgICAgICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UodywgU2VsZWN0YWJsZVRleHQpOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIyDQn9GA0L7QstC10YDRj9C10Lwg0YHQvtCy0L/Q
sNC00LXQvdC40LUg0LjQvNC10L3QuC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICMg0KMg
0L/QsNC/0L7QuiBTMyDQuNC80Y8g0LzQvtC20LXRgiDQsdGL0YLRjCDQsdC10Lcg0YHQu9GN0YjQ
sCDQsiDQtNCw0L3QvdGL0YUsINC90L4g0YEg0L3QuNC8INCyIEtleQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaWYgdy5kYXRhLmdldCgnbmFtZScpID09IHRhcmdldF9uYW1lOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGlzdGJveC5zZXRfZm9jdXMoaSkKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c19zZXQgPSBUcnVlCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAjINCh0LHRgNCw0YHR
i9Cy0LDQtdC8IHBlbmRpbmcgbmFtZQogICAgICAgICAgICAgICAgICAgIHNlbGYuX3BlbmRpbmdf
Zm9jdXNfbmFtZSA9IE5vbmUKCiAgICAgICAgICAgICAgICAjIDIuINCV0YHQu9C4INGE0L7QutGD
0YEg0L/QviDQuNC80LXQvdC4INC90LUg0YPRgdGC0LDQvdC+0LLQu9C10L0sINC/0YDQvtCx0YPQ
tdC8INC/0L4g0LjQvdC00LXQutGB0YMKICAgICAgICAgICAgICAgIGlmIG5vdCBmb2N1c19zZXQg
YW5kIHNlbGYucmVzdG9yZV9mb2N1c19pbmRleCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAg
ICAgICBuZXdfaWR4ID0gbWluKHNlbGYucmVzdG9yZV9mb2N1c19pbmRleCwgbGVuKHNlbGYud2Fs
a2VyKSAtIDEpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5saXN0Ym94LnNldF9mb2N1cyhuZXdf
aWR4KQogICAgICAgICAgICAgICAgICAgIHNlbGYucmVzdG9yZV9mb2N1c19pbmRleCA9IE5vbmUK
ICAgICAgICAgICAgICAgICAgICBmb2N1c19zZXQgPSBUcnVlCgogICAgICAgICAgICAgICAgIyAz
LiDQldGB0LvQuCDQvdC40YfQtdCz0L4g0L3QtSDQt9Cw0LTQsNC90L4sINGB0YLQsNCy0LjQvCDQ
vdCwIDAgKNC90L4g0LDQutC60YPRgNCw0YLQvdC+LCDRh9GC0L7QsdGLINC90LUg0YHQsdC40YLR
jCwg0LXRgdC70Lgg0YPQttC1INGB0YLQvtC40YIpCiAgICAgICAgICAgICAgICBpZiBub3QgZm9j
dXNfc2V0OgogICAgICAgICAgICAgICAgICAgICMg0JXRgdC70Lgg0LjQvdC00LXQutGBINC90LUg
0LHRi9C7INGD0YHRgtCw0L3QvtCy0LvQtdC9INGP0LLQvdC+LCBMaXN0Qm94INC80L7QttC10YIg
0YHQsNC8INC00LXRgNC20LDRgtGMINGB0YLQsNGA0YvQuSDRhNC+0LrRg9GBICjQtdGB0LvQuCDR
gdC/0LjRgdC+0Log0L3QtSDQv9C10YDQtdGB0L7Qt9C00LDQvSDQv9C+0LvQvdC+0YHRgtGM0Y4p
CiAgICAgICAgICAgICAgICAgICAgIyDQndC+INC10YHQu9C4INC80Ysg0LTQtdC70LDQu9C4IGRl
bC9hcHBlbmQsINGE0L7QutGD0YEg0LzQvtCzINGB0YrQtdGF0LDRgtGMLgogICAgICAgICAgICAg
ICAgICAgICMg0J7QsdGL0YfQvdC+INC/0YDQuCDQstGF0L7QtNC1INCyINC90L7QstGD0Y4g0L/Q
sNC/0LrRgyDQvNGLINGF0L7RgtC40LwgMCAo0LXRgdC70Lgg0Y3RgtC+INC90LUgcmVzdG9yZSkK
ICAgICAgICAgICAgICAgICAgICAjINCV0YHQu9C4IHJlc3RvcmVfZm9jdXNfaW5kZXgg0LHRi9C7
IE5vbmUsINC30L3QsNGH0LjRgiDRjdGC0L4g0LLRhdC+0LQg0LLQs9C70YPQsdGMIC0+IDAKICAg
ICAgICAgICAgICAgICAgICBzZWxmLmxpc3Rib3guc2V0X2ZvY3VzKDApCgogICAgICAgICAgICBl
eGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAjIHNlbGYuYXBwLnNob3dfcmVz
dWx0KGYiRm9jdXMgZXJyb3I6IHtlfSIsICJlcnJvciIpICMg0LTQu9GPINC+0YLQu9Cw0LTQutC4
CiAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgIGlmIHNlbGYuYXBwIGFuZCBoYXNhdHRyKHNl
bGYuYXBwLCAnbG9vcCcpIGFuZCBzZWxmLmFwcC5sb29wOgogICAgICAgICAgICBzZWxmLmFwcC5s
b29wLmRyYXdfc2NyZWVuKCkKCiAgICBkZWYgX2NyZWF0ZV9kaXNwbGF5X2l0ZW1zKHNlbGYsIGZv
bGRlcnMsIGZpbGVzLCBkb19zb3J0PVRydWUpOgogICAgICAgICIiItCh0L7Qt9C00LDRgtGMINCy
0LjQtNC20LXRgtGLINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC/0LDQv9C+0Log0Lgg
0YTQsNC50LvQvtCyIFMzIiIiCiAgICAgICAgaXRlbXMgPSBbXQogICAgICAgIGNvbWJpbmVkID0g
W10KCiAgICAgICAgIyDQn9GA0L7QstC10YDRj9C10Lwg0YHRgtCw0YLRg9GBINCy0LXRgNGB0LjQ
vtC90LjRgNC+0LLQsNC90LjRjyDQntCU0JjQnSDQoNCQ0Jcg0LTQu9GPINCx0LDQutC10YLQsAog
ICAgICAgICMgKNCe0YHRgtCw0LLQu9GP0LXQvCDQtNC70Y8g0L/QtdGA0LXQtNCw0YfQuCDQsiDR
gdCy0L7QudGB0YLQstCwINGE0LDQudC70LAsINC10YHQu9C4INC/0L7QvdCw0LTQvtCx0LjRgtGB
0Y8g0LvQvtCz0LjQutC1LCDQvdC+INC90LUg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8p
CiAgICAgICAgdmVyc2lvbmluZ19lbmFibGVkX2J1Y2tldCA9IEZhbHNlCiAgICAgICAgaWYgc2Vs
Zi5jdXJyZW50X2J1Y2tldCBhbmQgc2VsZi5zM19tYW5hZ2VyOgogICAgICAgICAgICB2cyA9IHNl
bGYuczNfbWFuYWdlci5nZXRfdmVyc2lvbmluZ19zdGF0dXNfY2FjaGVkKHNlbGYuY3VycmVudF9i
dWNrZXQpCiAgICAgICAgICAgIHZlcnNpb25pbmdfZW5hYmxlZF9idWNrZXQgPSB2cyBpbiBbJ0Vu
YWJsZWQnLCAnU3VzcGVuZGVkJ10KCiAgICAgICAgIyDQn9C+0LTQs9C+0YLQvtCy0LrQsCDRgdC/
0LjRgdC60LAg0L/QsNC/0L7QugogICAgICAgIGZvciBmb2xkZXIgaW4gZm9sZGVyczoKICAgICAg
ICAgICAga2V5ID0gZm9sZGVyWydLZXknXQogICAgICAgICAgICBmb2xkZXJfbmFtZSA9IGtleS5y
c3RyaXAoJy8nKS5zcGxpdCgnLycpWy0xXQogICAgICAgICAgICBjb21iaW5lZC5hcHBlbmQoewog
ICAgICAgICAgICAgICAgJ3R5cGUnOiAnczNfZGlyJywKICAgICAgICAgICAgICAgICduYW1lJzog
Zm9sZGVyX25hbWUsCiAgICAgICAgICAgICAgICAna2V5Jzoga2V5LAogICAgICAgICAgICAgICAg
J3NpemUnOiAwLAogICAgICAgICAgICAgICAgJ210aW1lJzogTm9uZQogICAgICAgICAgICB9KQoK
ICAgICAgICAjINCf0L7QtNCz0L7RgtC+0LLQutCwINGB0L/QuNGB0LrQsCDRhNCw0LnQu9C+0LIK
ICAgICAgICBmb3IgZmlsZSBpbiBmaWxlczoKICAgICAgICAgICAga2V5ID0gZmlsZVsnS2V5J10K
ICAgICAgICAgICAgZmlsZV9uYW1lID0ga2V5LnNwbGl0KCcvJylbLTFdCgogICAgICAgICAgICAj
INCf0L7Qu9GD0YfQsNC10Lwg0LrQvtC70LjRh9C10YHRgtCy0L4g0LLQtdGA0YHQuNC5ICjQtdGB
0LvQuCDQvtC90L4g0LHRi9C70L4g0L/QvtC00YHRh9C40YLQsNC90L4g0LIgbGlzdF9vYmplY3Rz
X2xhenkpCiAgICAgICAgICAgIHZfY291bnQgPSBmaWxlLmdldCgndmVyc2lvbl9jb3VudCcsIDEp
CgogICAgICAgICAgICBjb21iaW5lZC5hcHBlbmQoewogICAgICAgICAgICAgICAgJ3R5cGUnOiAn
czNfZmlsZScsCiAgICAgICAgICAgICAgICAnbmFtZSc6IGZpbGVfbmFtZSwKICAgICAgICAgICAg
ICAgICdrZXknOiBrZXksCiAgICAgICAgICAgICAgICAnc2l6ZSc6IGZpbGUuZ2V0KCdTaXplJywg
MCksCiAgICAgICAgICAgICAgICAnbXRpbWUnOiBmaWxlLmdldCgnTGFzdE1vZGlmaWVkJyksCiAg
ICAgICAgICAgICAgICAndmVyc2lvbl9jb3VudCc6IHZfY291bnQsCiAgICAgICAgICAgICAgICAn
dmVyc2lvbmluZ19lbmFibGVkJzogdmVyc2lvbmluZ19lbmFibGVkX2J1Y2tldAogICAgICAgICAg
ICB9KQoKICAgICAgICAjIC0tLSDQndCQ0KfQkNCb0J4g0JHQm9Ce0JrQkCDQpNCY0JvQrNCi0KDQ
kNCm0JjQmCAtLS0KICAgICAgICBpZiBzZWxmLmZpbHRlcl9wYXR0ZXJuOgogICAgICAgICAgICBm
aWx0ZXJlZF9jb21iaW5lZCA9IFtdCiAgICAgICAgICAgIHBhdHRlcm5fbG93ZXIgPSBzZWxmLmZp
bHRlcl9wYXR0ZXJuLmxvd2VyKCkKCiAgICAgICAgICAgIGZvciBpdGVtIGluIGNvbWJpbmVkOgog
ICAgICAgICAgICAgICAgIyDQktGB0LXQs9C00LAg0L7RgdGC0LDQstC70Y/QtdC8INGB0YHRi9C7
0LrRgyDQvdCwINGD0YDQvtCy0LXQvdGMINCy0YvRiNC1ICjQtdGB0LvQuCDQvtC90LAg0LHRg9C0
0LXRgiDQsiDRgdC/0LjRgdC60LUg0LrQsNC6INC/0LDQv9C60LApCiAgICAgICAgICAgICAgICBp
ZiBpdGVtWyduYW1lJ10gPT0gJy4uJzoKICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZF9jb21i
aW5lZC5hcHBlbmQoaXRlbSkKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAg
ICAgICAgICMg0KTQuNC70YzRgtGA0YPQtdC8INC/0L4g0LLRhdC+0LbQtNC10L3QuNGOINGB0YLR
gNC+0LrQuCAoY2FzZS1pbnNlbnNpdGl2ZSkKICAgICAgICAgICAgICAgIGlmIHBhdHRlcm5fbG93
ZXIgaW4gaXRlbVsnbmFtZSddLmxvd2VyKCk6CiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRf
Y29tYmluZWQuYXBwZW5kKGl0ZW0pCgogICAgICAgICAgICBjb21iaW5lZCA9IGZpbHRlcmVkX2Nv
bWJpbmVkCgogICAgICAgICAgICAjINCe0LHQvdC+0LLQu9GP0LXQvCDQt9Cw0LPQvtC70L7QstC+
0LosINGH0YLQvtCx0Ysg0LHRi9C70L4g0LLQuNC00L3Qviwg0YfRgtC+INGE0LjQu9GM0YLRgCDR
gNCw0LHQvtGC0LDQtdGCCiAgICAgICAgICAgICMgKNCe0L/RhtC40L7QvdCw0LvRjNC90L4sINC1
0YHQu9C4INGDINCy0LDRgSDQtdGB0YLRjCDQvNC10YLQvtC0IHVwZGF0ZV9oZWFkZXIpCiAgICAg
ICAgICAgIHNlbGYudXBkYXRlX2hlYWRlcihmIiBbRklMVEVSOiB7c2VsZi5maWx0ZXJfcGF0dGVy
bn1dIikKICAgICAgICAjIC0tLSDQmtCe0J3QldCmINCR0JvQntCa0JAg0KTQmNCb0KzQotCg0JDQ
ptCY0JggLS0tCgogICAgICAgICMg0KHQvtGA0YLQuNGA0L7QstC60LAKICAgICAgICBpZiBkb19z
b3J0IGFuZCBzZWxmLnNvcnRfbW9kZSAhPSAnbm9uZSc6CiAgICAgICAgICAgIGNvbWJpbmVkID0g
c2VsZi5zb3J0X2l0ZW1zKGNvbWJpbmVkKQoKICAgICAgICAjINCh0L7Qt9C00LDQvdC40LUg0LLQ
uNC00LbQtdGC0L7QsgogICAgICAgIGZvciBpdGVtIGluIGNvbWJpbmVkOgogICAgICAgICAgICBp
ZiBpdGVtWyd0eXBlJ10gPT0gJ3MzX2Rpcic6CiAgICAgICAgICAgICAgICBsYWJlbCA9IGYiL3tp
dGVtWyduYW1lJ119IgogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAg
ICAndHlwZSc6ICdzM19kaXInLAogICAgICAgICAgICAgICAgICAgICduYW1lJzogaXRlbVsnbmFt
ZSddLAogICAgICAgICAgICAgICAgICAgICdrZXknOiBpdGVtWydrZXknXSwKICAgICAgICAgICAg
ICAgICAgICAnY2FuX3NlbGVjdCc6IEZhbHNlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg
ICAgICBhdHRyID0gTm9uZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2l6ZV9z
dHIgPSBzZWxmLmZzX2Jyb3dzZXIuZm9ybWF0X3NpemUoaXRlbVsnc2l6ZSddKSBpZiBoYXNhdHRy
KHNlbGYuZnNfYnJvd3NlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybWF0X3NpemUnKSBl
bHNlIGZvcm1hdF9zaXplKAogICAgICAgICAgICAgICAgICAgIGl0ZW1bJ3NpemUnXSkKICAgICAg
ICAgICAgICAgIHRpbWVfc3RyID0gaXRlbVsnbXRpbWUnXS5zdHJmdGltZSgnJVktJW0tJWQgJUg6
JU0nKSBpZiBpdGVtWydtdGltZSddIGVsc2UgJycKCiAgICAgICAgICAgICAgICAjINCb0L7Qs9C4
0LrQsCDQvtGC0L7QsdGA0LDQttC10L3QuNGPINCy0LXRgNGB0LjQuTog0J/QntCa0JDQl9Cr0JLQ
kNCi0Kwg0KLQntCb0KzQmtCeINCV0KHQm9CYID4gMQogICAgICAgICAgICAgICAgdl9jb3VudCA9
IGl0ZW0uZ2V0KCd2ZXJzaW9uX2NvdW50JywgMSkKICAgICAgICAgICAgICAgIGlmIHZfY291bnQg
PiAxOgogICAgICAgICAgICAgICAgICAgIHZlcnNpb25faGludCA9IGYnIFt7dl9jb3VudH1dJwog
ICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uX2hpbnQgPSAn
JyAgIyBbdl0g0LHQvtC70YzRiNC1INC90LUg0L7RgtC+0LHRgNCw0LbQsNC10YLRgdGPCgogICAg
ICAgICAgICAgICAgIyBsYWJlbCA9IGYiIHtpdGVtWyduYW1lJ106NTB9IHtzaXplX3N0cjo+MTB9
IHt0aW1lX3N0cn17dmVyc2lvbl9oaW50fSIKICAgICAgICAgICAgICAgIG5hbWUgPSBpdGVtWyJu
YW1lIl0KICAgICAgICAgICAgICAgICMg0JXRgdC70Lgg0LjQvNGPINC00LvQuNC90L3QtdC1IDQw
LCDQsdC10YDQtdC8IDM5INGB0LjQvNCy0L7Qu9C+0LIg0Lgg0LTQvtCx0LDQstC70Y/QtdC8ICc+
Jywg0LjQvdCw0YfQtSDQvtGB0YLQsNCy0LvRj9C10Lwg0LrQsNC6INC10YHRgtGMCiAgICAgICAg
ICAgICAgICBkaXNwbGF5X25hbWUgPSBuYW1lIGlmIGxlbihuYW1lKSA8PSA1MCBlbHNlIG5hbWVb
OjQ5XSArICI+IgogICAgICAgICAgICAgICAgbGFiZWwgPSBmIiB7ZGlzcGxheV9uYW1lOjUwfSB7
c2l6ZV9zdHI6PjEwfSB7dGltZV9zdHJ9e3ZlcnNpb25faGludH0iCgogICAgICAgICAgICAgICAg
ZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdzM19maWxlJywKICAgICAgICAg
ICAgICAgICAgICAnbmFtZSc6IGl0ZW1bJ25hbWUnXSwKICAgICAgICAgICAgICAgICAgICAna2V5
JzogaXRlbVsna2V5J10sCiAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiBpdGVtWydzaXplJ10s
CiAgICAgICAgICAgICAgICAgICAgJ210aW1lJzogaXRlbVsnbXRpbWUnXSwKICAgICAgICAgICAg
ICAgICAgICAnY2FuX3NlbGVjdCc6IFRydWUsCiAgICAgICAgICAgICAgICAgICAgJ3ZlcnNpb25f
Y291bnQnOiB2X2NvdW50ICAjINCh0L7RhdGA0LDQvdGP0LXQvCDQutC+0Lst0LLQviDQstC10YDR
gdC40Lkg0LIg0L7QsdGK0LXQutGC0LUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg
IGF0dHIgPSAnZmlsZScKCiAgICAgICAgICAgIHRleHQgPSBTZWxlY3RhYmxlVGV4dChmJyAge2xh
YmVsfScsIGRhdGEsIHNlbGYpCiAgICAgICAgICAgIGl0ZW1zLmFwcGVuZCh1cndpZC5BdHRyTWFw
KHRleHQsIGF0dHIsIGZvY3VzX21hcD0nc2VsZWN0ZWQnKSkKCiAgICAgICAgcmV0dXJuIGl0ZW1z
CgogICAgZGVmIF9yZWZyZXNoX3MzKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY3VycmVudF9idWNr
ZXQgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi51cGRhdGVfaGVhZGVyKGYnW1MzIE1vZGUgLSB7
c2VsZi5jdXJyZW50X2VuZHBvaW50fV0gU29ydDoge3NlbGYuc29ydF9tb2RlfScpCiAgICAgICAg
ICAgIHNlbGYucGF0aF90ZXh0LnNldF90ZXh0KGYnUzM6IC97c2VsZi5jdXJyZW50X2VuZHBvaW50
fS8nKQoKICAgICAgICAgICAgZmlsdGVyX3BhdHRlcm4gPSBzZWxmLmJ1Y2tldF9maWx0ZXJfcGF0
dGVybgoKICAgICAgICAgICAgZGF0YSA9IHsndHlwZSc6ICd0b19yb290X21lbnUnLCAnY2FuX3Nl
bGVjdCc6IEZhbHNlfQogICAgICAgICAgICB0ZXh0ID0gU2VsZWN0YWJsZVRleHQoJyAgWy4uXSBC
YWNrIHRvIHJvb3QgbWVudScsIGRhdGEsIHNlbGYpCiAgICAgICAgICAgIHNlbGYud2Fsa2VyLmFw
cGVuZCh1cndpZC5BdHRyTWFwKHRleHQsIE5vbmUsIGZvY3VzX21hcD0nc2VsZWN0ZWQnKSkKCiAg
ICAgICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KCJMb2FkaW5nIGJ1Y2tldHMuLi4gKHRoaXMg
bWF5IHRha2UgYSB3aGlsZSkiKQogICAgICAgICAgICBzZWxmLmFwcC5sb29wLmRyYXdfc2NyZWVu
KCkKCiAgICAgICAgICAgIGJ1Y2tldHMgPSBzZWxmLnMzX21hbmFnZXIubGlzdF9idWNrZXRzKGZv
cmNlPUZhbHNlKQoKICAgICAgICAgICAgaWYgbm90IGJ1Y2tldHMgYW5kIHNlbGYuczNfbWFuYWdl
ci5jb25uZWN0aW9uX2Vycm9yOgogICAgICAgICAgICAgICAgZXJyb3JfbXNnID0gZidbRVJST1Jd
IENvbm5lY3Rpb24gZmFpbGVkOiB7c2VsZi5zM19tYW5hZ2VyLmNvbm5lY3Rpb25fZXJyb3JbOjYw
XX0nCiAgICAgICAgICAgICAgICBkYXRhID0geyd0eXBlJzogJ2Vycm9yJywgJ2Nhbl9zZWxlY3Qn
OiBGYWxzZX0KICAgICAgICAgICAgICAgIHRleHQgPSBTZWxlY3RhYmxlVGV4dChmJyAge2Vycm9y
X21zZ30nLCBkYXRhLCBzZWxmKQogICAgICAgICAgICAgICAgc2VsZi53YWxrZXIuYXBwZW5kKHVy
d2lkLkF0dHJNYXAodGV4dCwgJ2Vycm9yJykpCiAgICAgICAgICAgICAgICBzZWxmLmFwcC5zaG93
X3Jlc3VsdCgKICAgICAgICAgICAgICAgICAgICBmJ0Nhbm5vdCBjb25uZWN0IHRvIHtzZWxmLmN1
cnJlbnRfZW5kcG9pbnR9OiB7c2VsZi5zM19tYW5hZ2VyLmNvbm5lY3Rpb25fZXJyb3JbOjgwXX0n
KQogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICBzZWxmLmFwcC5zaG93X3Jlc3Vs
dCgiIikKICAgICAgICAgICAgc2VsZi5hcHAubG9vcC5kcmF3X3NjcmVlbigpCgogICAgICAgICAg
ICBidWNrZXRfaXRlbXMgPSBbXQogICAgICAgICAgICBmb3IgYnVja2V0IGluIGJ1Y2tldHM6Cgog
ICAgICAgICAgICAgICAgIyDQn9C+0LvRg9GH0LDQtdC8INGB0YLQsNGC0YPRgSDQstC10YDRgdC4
0L7QvdC40YDQvtCy0LDQvdC40Y8g0LTQu9GPINC60LDQttC00L7Qs9C+INCx0LDQutC10YLQsAog
ICAgICAgICAgICAgICAgdmVyc2lvbmluZ19zdGF0dXMgPSBidWNrZXQuZ2V0KCJfVmVyc2lvbmlu
Z1N0YXR1cyIpCiAgICAgICAgICAgICAgICB2ZXJzaW9uaW5nX21hcmsgPSBidWNrZXQuZ2V0KCJf
VmVyc2lvbmluZ01hcmsiLCAiIikKCiAgICAgICAgICAgICAgICBidWNrZXRfaXRlbXMuYXBwZW5k
KHsKICAgICAgICAgICAgICAgICAgICAnbmFtZSc6IGJ1Y2tldFsnTmFtZSddLAogICAgICAgICAg
ICAgICAgICAgICd0eXBlJzogJ2J1Y2tldCcsCiAgICAgICAgICAgICAgICAgICAgJ0NyZWF0aW9u
RGF0ZSc6IGJ1Y2tldC5nZXQoJ0NyZWF0aW9uRGF0ZScpLAogICAgICAgICAgICAgICAgICAgICdt
dGltZSc6IGJ1Y2tldC5nZXQoJ0NyZWF0aW9uRGF0ZScpLAogICAgICAgICAgICAgICAgICAgICdz
aXplJzogMCwKICAgICAgICAgICAgICAgICAgICAndmVyc2lvbmluZyc6IHZlcnNpb25pbmdfc3Rh
dHVzLAogICAgICAgICAgICAgICAgICAgICd2ZXJzaW9uaW5nX21hcmsnOiB2ZXJzaW9uaW5nX21h
cmssCiAgICAgICAgICAgICAgICAgICAgJ2Nhbl9zZWxlY3QnOiBUcnVlLAogICAgICAgICAgICAg
ICAgICAgICdvd25lcic6IGJ1Y2tldC5nZXQoIl9Pd25lckhpbnQiKQogICAgICAgICAgICAgICAg
fSkKCiAgICAgICAgICAgIGJ1Y2tldF9pdGVtcyA9IHNvcnRlZChidWNrZXRfaXRlbXMsIGtleT1s
YW1iZGEgYjogKGIuZ2V0KCJuYW1lIikgb3IgIiIpLmxvd2VyKCkpCgogICAgICAgICAgICBzZWxm
Ll9zeW5jX2ZpbHRlcl9mb290ZXJfZm9yX3ZpZXcoKQoKICAgICAgICAgICAgZmlsdGVyX3BhdHRl
cm4gPSBzZWxmLmJ1Y2tldF9maWx0ZXJfcGF0dGVybgoKICAgICAgICAgICAgaWYgZmlsdGVyX3Bh
dHRlcm46CiAgICAgICAgICAgICAgICBzZWxmLnVwZGF0ZV9oZWFkZXIoZiIgW0ZJTFRFUjoge3Nl
bGYuZmlsdGVyX3BhdHRlcm59XSIpCiAgICAgICAgICAgICAgICBwYXQgPSBmaWx0ZXJfcGF0dGVy
bgogICAgICAgICAgICAgICAgaWYgIioiIG5vdCBpbiBwYXQgYW5kICI/IiBub3QgaW4gcGF0Ogog
ICAgICAgICAgICAgICAgICAgIHBhdCA9IGYiKntwYXR9KiIKICAgICAgICAgICAgICAgIHRyeToK
ICAgICAgICAgICAgICAgICAgICByeCA9IHJlLmNvbXBpbGUoZm5tYXRjaC50cmFuc2xhdGUocGF0
KSwgcmUuSUdOT1JFQ0FTRSkKICAgICAgICAgICAgICAgICAgICBidWNrZXRfaXRlbXMgPSBbYiBm
b3IgYiBpbiBidWNrZXRfaXRlbXMgaWYgcngubWF0Y2goYi5nZXQoIm5hbWUiLCAiIikpXQogICAg
ICAgICAgICAgICAgZXhjZXB0IHJlLmVycm9yOgogICAgICAgICAgICAgICAgICAgIHNlbGYuYXBw
LnNob3dfcmVzdWx0KCJJbnZhbGlkIGJ1Y2tldCBmaWx0ZXIgcGF0dGVybiIsIHNldmVyaXR5PSJ3
YXJuaW5nIikKCiAgICAgICAgICAgIGZvciBidWNrZXQgaW4gYnVja2V0X2l0ZW1zOgogICAgICAg
ICAgICAgICAgY3JlYXRpb25fZGF0ZSA9IGJ1Y2tldC5nZXQoJ0NyZWF0aW9uRGF0ZScpCiAgICAg
ICAgICAgICAgICBkYXRlX3N0ciA9IGNyZWF0aW9uX2RhdGUuc3RyZnRpbWUoJyVZLSVtLSVkICVI
OiVNOiVTJykgaWYgY3JlYXRpb25fZGF0ZSBlbHNlICcgJyAqIDE5CgogICAgICAgICAgICAgICAg
IyBsYWJlbCA9IGYnW0JVQ0tFVF0ge2J1Y2tldFsibmFtZSJdOjQwfSB7ZGF0ZV9zdHJ9JwogICAg
ICAgICAgICAgICAgbGFiZWwgPSBmJyp7YnVja2V0WyJuYW1lIl06NDB9IHtkYXRlX3N0cn0ge2J1
Y2tldFsidmVyc2lvbmluZ19tYXJrIl19IFt7YnVja2V0WyJvd25lciJdfV0nCgogICAgICAgICAg
ICAgICAgZGF0YSA9IHsndHlwZSc6ICdidWNrZXQnLCAnbmFtZSc6IGJ1Y2tldFsnbmFtZSddLCAn
Y2FuX3NlbGVjdCc6IFRydWV9CiAgICAgICAgICAgICAgICB0ZXh0ID0gU2VsZWN0YWJsZVRleHQo
ZicgIHtsYWJlbH0nLCBkYXRhLCBzZWxmKQogICAgICAgICAgICAgICAgc2VsZi53YWxrZXIuYXBw
ZW5kKHVyd2lkLkF0dHJNYXAodGV4dCwgTm9uZSwgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKQogICAg
ICAgIGVsc2U6CiAgICAgICAgICAgICMg0KTRg9C90LrRhtC40Y8g0LTQu9GPINC+0LHQvdC+0LLQ
u9C10L3QuNGPINGC0LXQutGB0YLQsCDQv9GD0YLQuAogICAgICAgICAgICBkZWYgdXBkYXRlX3By
b2dyZXNzX3RleHQoY291bnQsIHNpemUpOgogICAgICAgICAgICAgICAgZGlzcGxheV9wcmVmaXgg
PSBzZWxmLmN1cnJlbnRfcHJlZml4CiAgICAgICAgICAgICAgICBjb3VudF9pbmZvID0gZicgW0Nv
dW50aW5nLi4uIHtjb3VudH0gb2JqZWN0cywge2Zvcm1hdF9zaXplKHNpemUpfV0nCiAgICAgICAg
ICAgICAgICBzZWxmLnBhdGhfdGV4dC5zZXRfdGV4dChmJ1MzOiAve3NlbGYuY3VycmVudF9lbmRw
b2ludH0ve3NlbGYuY3VycmVudF9idWNrZXR9L3tkaXNwbGF5X3ByZWZpeH17Y291bnRfaW5mb30n
KQoKICAgICAgICAgICAgIyDQodC90LDRh9Cw0LvQsCDRgdGH0LjRgtCw0LXQvCDQvtCx0YrQtdC6
0YLRiyAo0Y3RgtC+INCx0YvRgdGC0YDQviwg0YIu0LouINC00LDQvdC90YvQtSDQsdC10YDRg9GC
0YHRjyDQuNC3IGNhY2hlINC40LvQuCBIRUFEINC30LDQv9GA0L7RgdCwKQogICAgICAgICAgICAj
IHRvdGFsX2NvdW50LCB0b3RhbF9zaXplID0gc2VsZi5zM19tYW5hZ2VyLmNvdW50X29iamVjdHMo
c2VsZi5jdXJyZW50X2J1Y2tldCwgc2VsZi5jdXJyZW50X3ByZWZpeCkKICAgICAgICAgICAgdG90
YWxfY291bnQsIHRvdGFsX3NpemUgPSBzZWxmLnMzX21hbmFnZXIuY291bnRfb2JqZWN0cygKICAg
ICAgICAgICAgICAgIHNlbGYuY3VycmVudF9idWNrZXQsCiAgICAgICAgICAgICAgICBzZWxmLmN1
cnJlbnRfcHJlZml4LAogICAgICAgICAgICAgICAgcHJvZ3Jlc3NfY2I9dXBkYXRlX3Byb2dyZXNz
X3RleHQsCiAgICAgICAgICAgICAgICBsb29wPXNlbGYuYXBwLmxvb3AgICMg0J/QtdGA0LXQtNCw
0LXQvCDRgdGB0YvQu9C60YMg0L3QsCDQs9C70LDQstC90YvQuSDRhtC40LrQuyDQtNC70Y8gZHJh
d19zY3JlZW4oKQogICAgICAgICAgICApCgogICAgICAgICAgICAjIDIuINCb0L7Qs9C40LrQsCDR
gdCx0YDQvtGB0LAg0YHQvtGA0YLQuNGA0L7QstC60Lg6CiAgICAgICAgICAgICMg0JXRgdC70Lgg
0L7QsdGK0LXQutGC0L7QsiDQvNC90L7Qs9C+ICg+MTAwMCksINC/0YDQuNC90YPQtNC40YLQtdC7
0YzQvdC+INC+0YLQutC70Y7Rh9Cw0LXQvCDRgdC+0YDRgtC40YDQvtCy0LrRgyDQtNC70Y8g0YHQ
utC+0YDQvtGB0YLQuAogICAgICAgICAgICBpZiB0b3RhbF9jb3VudCBpcyBub3QgTm9uZSBhbmQg
dG90YWxfY291bnQgPiAxMDAwOgogICAgICAgICAgICAgICAgc2VsZi5zb3J0X21vZGUgPSAnbm9u
ZScKICAgICAgICAgICAgIyDQmNC90LDRh9C1IC0g0L7RgdGC0LDQstC70Y/QtdC8INGC0L7RgiDR
gNC10LbQuNC8LCDQutC+0YLQvtGA0YvQuSDQstGL0LHRgNCw0Lsg0L/QvtC70YzQt9C+0LLQsNGC
0LXQu9GMICjQvdCw0L/RgNC40LzQtdGALCAnc2l6ZScpCgogICAgICAgICAgICBzZWxmLnVwZGF0
ZV9oZWFkZXIoZidbUzMgTW9kZSAtIHtzZWxmLmN1cnJlbnRfZW5kcG9pbnR9XSBTb3J0OiB7c2Vs
Zi5zb3J0X21vZGV9JykKCiAgICAgICAgICAgICMg0KTQvtGA0LzQuNGA0YPQtdC8INC/0YPRgtGM
INCyINC30LDQs9C+0LvQvtCy0LrQtQogICAgICAgICAgICBkaXNwbGF5X3ByZWZpeCA9IHNlbGYu
Y3VycmVudF9wcmVmaXgKICAgICAgICAgICAgIyBpZiBzZWxmLmN1cnJlbnRfcHJlZml4IGVsc2Ug
Jy8nCgogICAgICAgICAgICBpZiB0b3RhbF9jb3VudCBpcyBub3QgTm9uZToKICAgICAgICAgICAg
ICAgIGNvdW50X2luZm8gPSBmJyBbe3RvdGFsX2NvdW50fSBvYmplY3RzLCB7Zm9ybWF0X3NpemUo
dG90YWxfc2l6ZSl9XScKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGNvdW50X2lu
Zm8gPSAnJwoKICAgICAgICAgICAgc2VsZi5wYXRoX3RleHQuc2V0X3RleHQoZidTMzogL3tzZWxm
LmN1cnJlbnRfZW5kcG9pbnR9L3tzZWxmLmN1cnJlbnRfYnVja2V0fS97ZGlzcGxheV9wcmVmaXh9
e2NvdW50X2luZm99JykKCiAgICAgICAgICAgICMgMy4g0JTQvtCx0LDQstC70Y/QtdC8INC90LDQ
stC40LPQsNGG0LjQvtC90L3Ri9C1INC60L3QvtC/0LrQuAogICAgICAgICAgICBkYXRhID0geyd0
eXBlJzogJ3BhcmVudCcsICdjYW5fc2VsZWN0JzogRmFsc2V9CiAgICAgICAgICAgIGlmIHNlbGYu
Y3VycmVudF9wcmVmaXg6CiAgICAgICAgICAgICAgICBkYXRhID0geyd0eXBlJzogJ3MzX3BhcmVu
dCcsICdjYW5fc2VsZWN0JzogRmFsc2V9CiAgICAgICAgICAgICAgICB0ZXh0ID0gU2VsZWN0YWJs
ZVRleHQoJyBbLi5dIFBhcmVudCcsIGRhdGEsIHNlbGYpCiAgICAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICAgICBkYXRhID0geyd0eXBlJzogJ3MzX2JhY2snLCAnY2FuX3NlbGVjdCc6IEZhbHNl
fQogICAgICAgICAgICAgICAgdGV4dCA9IFNlbGVjdGFibGVUZXh0KCcgWy4uXSBCYWNrIHRvIGJ1
Y2tldHMnLCBkYXRhLCBzZWxmKQoKICAgICAgICAgICAgc2VsZi53YWxrZXIuYXBwZW5kKHVyd2lk
LkF0dHJNYXAodGV4dCwgTm9uZSwgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKQoKICAgICAgICAgICAg
IyA0LiDQl9CQ0J/Qo9Ch0JrQkNCV0Jwg0JvQldCd0JjQktCj0K4g0JfQkNCT0KDQo9CX0JrQowog
ICAgICAgICAgICBzZWxmLl9yZWZyZXNoX3MzX29iamVjdHNfbGF6eSgpCgogICAgICAgICAgICBy
ZXR1cm4gICMg0JLRi9GF0L7QtCAtINC+0YHRgtCw0LvRjNC90L7QtSDQsiDRhNC+0L3QvtCy0L7Q
vCDQv9C+0YLQvtC60LUKCiAgICBkZWYgX3JlZnJlc2hfZnMoc2VsZik6CiAgICAgICAgc2VsZi51
cGRhdGVfaGVhZGVyKGYnW0ZTIE1vZGVdIFNvcnQ6IHtzZWxmLnNvcnRfbW9kZX0nKQoKICAgICAg
ICAjINCf0L7QtNGB0YfQuNGC0YvQstCw0LXQvCDQutC+0LvQuNGH0LXRgdGC0LLQviDRjdC70LXQ
vNC10L3RgtC+0LIg0LIg0YLQtdC60YPRidC10Lkg0LTQuNGA0LXQutGC0L7RgNC40LgKICAgICAg
ICBpdGVtcyA9IHNlbGYuZnNfYnJvd3Nlci5saXN0X2RpcmVjdG9yeSgpCiAgICAgICAgZGlyX2Nv
dW50ID0gc3VtKDEgZm9yIGl0ZW0gaW4gaXRlbXMgaWYgaXRlbS5nZXQoJ2lzX2RpcicsIEZhbHNl
KSBhbmQgaXRlbS5nZXQoJ25hbWUnKSAhPSAnLi4nKQogICAgICAgIGZpbGVfY291bnQgPSBzdW0o
MSBmb3IgaXRlbSBpbiBpdGVtcyBpZiBub3QgaXRlbS5nZXQoJ2lzX2RpcicsIEZhbHNlKSkKICAg
ICAgICBjb3VudF9pbmZvID0gZicgW3tkaXJfY291bnR9IGRpcnMsIHtmaWxlX2NvdW50fSBmaWxl
c10nCgogICAgICAgIHNlbGYucGF0aF90ZXh0LnNldF90ZXh0KGYnRlM6IHtzZWxmLmZzX2Jyb3dz
ZXIuY3VycmVudF9wYXRofXtjb3VudF9pbmZvfScpCgogICAgICAgIGlmIHNlbGYuaXNfZnNfcm9v
dCgpOgogICAgICAgICAgICBkYXRhID0geyd0eXBlJzogJ3RvX3Jvb3RfbWVudScsICdjYW5fc2Vs
ZWN0JzogRmFsc2V9CiAgICAgICAgICAgIHRleHQgPSBTZWxlY3RhYmxlVGV4dCgnICBbLi5dIEJh
Y2sgdG8gcm9vdCBtZW51JywgZGF0YSwgc2VsZikKICAgICAgICAgICAgc2VsZi53YWxrZXIuYXBw
ZW5kKHVyd2lkLkF0dHJNYXAodGV4dCwgTm9uZSwgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKQoKICAg
ICAgICBpdGVtcyA9IHNlbGYuZnNfYnJvd3Nlci5saXN0X2RpcmVjdG9yeSgpCgogICAgICAgIGRp
cnMgPSBbaXRlbSBmb3IgaXRlbSBpbiBpdGVtcyBpZiBpdGVtWydpc19kaXInXSBhbmQgaXRlbVsn
bmFtZSddICE9ICcuLiddCiAgICAgICAgZmlsZXMgPSBbaXRlbSBmb3IgaXRlbSBpbiBpdGVtcyBp
ZiBub3QgaXRlbVsnaXNfZGlyJ11dCiAgICAgICAgcGFyZW50ID0gW2l0ZW0gZm9yIGl0ZW0gaW4g
aXRlbXMgaWYgaXRlbVsnbmFtZSddID09ICcuLiddCgogICAgICAgIGRpcnMgPSBzZWxmLnNvcnRf
aXRlbXMoZGlycykKICAgICAgICBmaWxlcyA9IHNlbGYuc29ydF9pdGVtcyhmaWxlcykKCiAgICAg
ICAgZm9yIGl0ZW1fZGF0YSBpbiBwYXJlbnQ6CiAgICAgICAgICAgIGxhYmVsID0gJy8uLicKICAg
ICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICd0eXBlJzogJ2ZzX2RpcicsCiAgICAg
ICAgICAgICAgICAnbmFtZSc6IGl0ZW1fZGF0YVsnbmFtZSddLAogICAgICAgICAgICAgICAgJ3Np
emUnOiBpdGVtX2RhdGFbJ3NpemUnXSwKICAgICAgICAgICAgICAgICdjYW5fc2VsZWN0JzogRmFs
c2UKICAgICAgICAgICAgfQogICAgICAgICAgICB0ZXh0ID0gU2VsZWN0YWJsZVRleHQoZicgIHts
YWJlbH0nLCBkYXRhLCBzZWxmKQogICAgICAgICAgICBzZWxmLndhbGtlci5hcHBlbmQodXJ3aWQu
QXR0ck1hcCh0ZXh0LCBOb25lLCBmb2N1c19tYXA9J3NlbGVjdGVkJykpCgogICAgICAgIGZvciBp
dGVtX2RhdGEgaW4gZGlyczoKICAgICAgICAgICAgbXRpbWUgPSBpdGVtX2RhdGFbJ210aW1lJ10u
c3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVTJykgaWYgaXRlbV9kYXRhWydtdGltZSddIGVsc2Ug
JyAnICogMTkKICAgICAgICAgICAgIyBsYWJlbCA9IGYnW0RJUiBdIHtpdGVtX2RhdGFbIm5hbWUi
XTo0MH0gIDxESVI+ICAgICAgICAgICB7bXRpbWV9JwogICAgICAgICAgICAjIGxhYmVsID0gZicv
e2l0ZW1fZGF0YVsibmFtZSJdOjQwfSAgICAgICAgICAgIHttdGltZX0nCiAgICAgICAgICAgIG5h
bWUgPSBpdGVtX2RhdGFbIm5hbWUiXQogICAgICAgICAgICAjINCV0YHQu9C4INC40LzRjyDQtNC7
0LjQvdC90LXQtSA0MCwg0LHQtdGA0LXQvCAzOSDRgdC40LzQstC+0LvQvtCyINC4INC00L7QsdCw
0LLQu9GP0LXQvCAnPicsINC40L3QsNGH0LUg0L7RgdGC0LDQstC70Y/QtdC8INC60LDQuiDQtdGB
0YLRjAogICAgICAgICAgICBkaXNwbGF5X25hbWUgPSBuYW1lIGlmIGxlbihuYW1lKSA8PSA0MCBl
bHNlIG5hbWVbOjM5XSArICI+IgogICAgICAgICAgICBsYWJlbCA9IGYnL3tkaXNwbGF5X25hbWU6
NDB9ICAgICAgICAgICAge210aW1lfScKCiAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAg
ICAgICAndHlwZSc6ICdmc19kaXInLAogICAgICAgICAgICAgICAgJ25hbWUnOiBpdGVtX2RhdGFb
J25hbWUnXSwKICAgICAgICAgICAgICAgICdzaXplJzogaXRlbV9kYXRhWydzaXplJ10sCiAgICAg
ICAgICAgICAgICAnbXRpbWUnOiBpdGVtX2RhdGFbJ210aW1lJ10sCiAgICAgICAgICAgICAgICAn
Y2FuX3NlbGVjdCc6IFRydWUKICAgICAgICAgICAgfQogICAgICAgICAgICB0ZXh0ID0gU2VsZWN0
YWJsZVRleHQoZicgIHtsYWJlbH0nLCBkYXRhLCBzZWxmKQogICAgICAgICAgICAjIHNlbGYud2Fs
a2VyLmFwcGVuZCh1cndpZC5BdHRyTWFwKHRleHQsIE5vbmUsIGZvY3VzX21hcD0nc2VsZWN0ZWQn
KSkKICAgICAgICAgICAgc2VsZi53YWxrZXIuYXBwZW5kKHVyd2lkLkF0dHJNYXAodGV4dCwgJ2Jv
ZHknLCBmb2N1c19tYXA9J3NlbGVjdGVkJykpCgogICAgICAgIGZvciBpdGVtX2RhdGEgaW4gZmls
ZXM6CiAgICAgICAgICAgIG10aW1lID0gaXRlbV9kYXRhWydtdGltZSddLnN0cmZ0aW1lKCclWS0l
bS0lZCAlSDolTTolUycpIGlmIGl0ZW1fZGF0YVsnbXRpbWUnXSBlbHNlICcgJyAqIDE5CiAgICAg
ICAgICAgICMgbGFiZWwgPSBmJ1tGSUxFXSB7aXRlbV9kYXRhWyJuYW1lIl06NDB9IHtzZWxmLmZv
cm1hdF9zaXplKGl0ZW1fZGF0YVsic2l6ZSJdKTo+MTB9ICAgICAgICAge210aW1lfScKICAgICAg
ICAgICAgIyBsYWJlbCA9IGYnIHtpdGVtX2RhdGFbIm5hbWUiXTo0MH0ge3NlbGYuZm9ybWF0X3Np
emUoaXRlbV9kYXRhWyJzaXplIl0pOj4xMH0ge210aW1lfScKICAgICAgICAgICAgbmFtZSA9IGl0
ZW1fZGF0YVsibmFtZSJdCiAgICAgICAgICAgICMg0JXRgdC70Lgg0LjQvNGPINC00LvQuNC90L3Q
tdC1IDQwLCDQsdC10YDQtdC8IDM5INGB0LjQvNCy0L7Qu9C+0LIg0Lgg0LTQvtCx0LDQstC70Y/Q
tdC8ICc+Jywg0LjQvdCw0YfQtSDQvtGB0YLQsNCy0LvRj9C10Lwg0LrQsNC6INC10YHRgtGMCiAg
ICAgICAgICAgIGRpc3BsYXlfbmFtZSA9IG5hbWUgaWYgbGVuKG5hbWUpIDw9IDQwIGVsc2UgbmFt
ZVs6MzldICsgIj4iCiAgICAgICAgICAgIGxhYmVsID0gZicge2Rpc3BsYXlfbmFtZTo0MH0ge3Nl
bGYuZm9ybWF0X3NpemUoaXRlbV9kYXRhWyJzaXplIl0pOj4xMH0ge210aW1lfScKCiAgICAgICAg
ICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAndHlwZSc6ICdmc19maWxlJywKICAgICAgICAg
ICAgICAgICduYW1lJzogaXRlbV9kYXRhWyduYW1lJ10sCiAgICAgICAgICAgICAgICAnc2l6ZSc6
IGl0ZW1fZGF0YVsnc2l6ZSddLAogICAgICAgICAgICAgICAgJ210aW1lJzogaXRlbV9kYXRhWydt
dGltZSddLAogICAgICAgICAgICAgICAgJ2Nhbl9zZWxlY3QnOiBUcnVlCiAgICAgICAgICAgIH0K
ICAgICAgICAgICAgdGV4dCA9IFNlbGVjdGFibGVUZXh0KGYnICB7bGFiZWx9JywgZGF0YSwgc2Vs
ZikKICAgICAgICAgICAgIyBzZWxmLndhbGtlci5hcHBlbmQodXJ3aWQuQXR0ck1hcCh0ZXh0LCBO
b25lLCBmb2N1c19tYXA9J3NlbGVjdGVkJykpCiAgICAgICAgICAgIHNlbGYud2Fsa2VyLmFwcGVu
ZCh1cndpZC5BdHRyTWFwKHRleHQsICdmaWxlJywgZm9jdXNfbWFwPSdzZWxlY3RlZCcpKQoKICAg
IGRlZiBmb3JtYXRfc2l6ZShzZWxmLCBzaXplKToKICAgICAgICBmb3IgdW5pdCBpbiBbJ0IgICcs
ICdLQiAnLCAnTUIgJywgJ0dCICddOgogICAgICAgICAgICBpZiBzaXplIDwgMTAyNC4wOgogICAg
ICAgICAgICAgICAgcmV0dXJuIGYne3NpemU6LjFmfXt1bml0fScKICAgICAgICAgICAgc2l6ZSAv
PSAxMDI0LjAKICAgICAgICByZXR1cm4gZid7c2l6ZTouMWZ9VEInCgogICAgZGVmIG9uX2l0ZW1f
YWN0aXZhdGVkKHNlbGYsIGRhdGEpOgogICAgICAgIGl0ZW1fdHlwZSA9IGRhdGEuZ2V0KCd0eXBl
JykKCiAgICAgICAgaWYgaXRlbV90eXBlID09ICd0b19yb290X21lbnUnOgogICAgICAgICAgICBz
ZWxmLm1vZGUgPSAncm9vdF9tZW51JwogICAgICAgICAgICBzZWxmLmN1cnJlbnRfZW5kcG9pbnQg
PSBOb25lCiAgICAgICAgICAgIHNlbGYuY3VycmVudF9idWNrZXQgPSBOb25lCiAgICAgICAgICAg
IHNlbGYuY3VycmVudF9wcmVmaXggPSAnJwogICAgICAgICAgICBzZWxmLnMzX21hbmFnZXIgPSBO
b25lCiAgICAgICAgICAgIHNlbGYucmVmcmVzaCgpCgogICAgICAgIGVsaWYgaXRlbV90eXBlID09
ICdyb290X2ZzJzoKICAgICAgICAgICAgc2VsZi5tb2RlID0gJ2ZzJwogICAgICAgICAgICBpZiBz
ZWxmLmZzX2Jyb3dzZXIgaXMgTm9uZToKICAgICAgICAgICAgICAgIHNlbGYuZnNfYnJvd3NlciA9
IEZpbGVTeXN0ZW1Ccm93c2VyKCkKICAgICAgICAgICAgIyBGSVg6INCU0LvRjyDRhNCw0LnQu9C+
0LLQvtC5INGB0LjRgdGC0LXQvNGLINGB0L7RgNGC0LjRgNC+0LLQutCwINC/0L4g0YPQvNC+0LvR
h9Cw0L3QuNGOIC0gTmFtZQogICAgICAgICAgICBzZWxmLnNvcnRfbW9kZSA9ICduYW1lJwogICAg
ICAgICAgICBzZWxmLnJlZnJlc2goKQoKICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAncm9vdF9l
bmRwb2ludCc6CiAgICAgICAgICAgIHNlbGYubW9kZSA9ICdzMycKICAgICAgICAgICAgc2VsZi5j
dXJyZW50X2VuZHBvaW50ID0gZGF0YVsnbmFtZSddCiAgICAgICAgICAgIGVuZHBvaW50X2NvbmZp
ZyA9IGRhdGFbJ2NvbmZpZyddCiAgICAgICAgICAgIHNlbGYuczNfbWFuYWdlciA9IFMzTWFuYWdl
cihlbmRwb2ludF9jb25maWcpCiAgICAgICAgICAgIHNlbGYuY3VycmVudF9idWNrZXQgPSBOb25l
CiAgICAgICAgICAgIHNlbGYuY3VycmVudF9wcmVmaXggPSAnJwogICAgICAgICAgICAjIEZJWDog
0JTQu9GPIFMzINC+0YLQutC70Y7Rh9Cw0LXQvCDRgdC+0YDRgtC40YDQvtCy0LrRgyDQv9C+INGD
0LzQvtC70YfQsNC90LjRjiAo0LPRgNGD0LfQuNC8INC60LDQuiDQtdGB0YLRjCkKICAgICAgICAg
ICAgc2VsZi5zb3J0X21vZGUgPSAnbm9uZScKICAgICAgICAgICAgc2VsZi5yZWZyZXNoKCkKCiAg
ICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ2VuZHBvaW50JzoKICAgICAgICAgICAgc2VsZi5jdXJy
ZW50X2VuZHBvaW50ID0gZGF0YVsnbmFtZSddCiAgICAgICAgICAgIGVuZHBvaW50X2NvbmZpZyA9
IGRhdGFbJ2NvbmZpZyddCiAgICAgICAgICAgIHNlbGYuczNfbWFuYWdlciA9IFMzTWFuYWdlcihl
bmRwb2ludF9jb25maWcpCiAgICAgICAgICAgIHNlbGYuY3VycmVudF9idWNrZXQgPSBOb25lCiAg
ICAgICAgICAgIHNlbGYuY3VycmVudF9wcmVmaXggPSAnJwogICAgICAgICAgICBzZWxmLnNvcnRf
bW9kZSA9ICdub25lJyAgIyBGSVg6INCi0L4g0LbQtSDRgdCw0LzQvtC1INC00LvRjyDQv9GA0Y/Q
vNC+0LPQviDQstGL0LHQvtGA0LAg0Y3QvdC00L/QvtC40L3RgtCwCiAgICAgICAgICAgIHNlbGYu
cmVmcmVzaCgpCgogICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdidWNrZXQnOgogICAgICAgICAg
ICBzZWxmLmN1cnJlbnRfYnVja2V0ID0gZGF0YVsnbmFtZSddCiAgICAgICAgICAgIHNlbGYuY3Vy
cmVudF9wcmVmaXggPSAnJwogICAgICAgICAgICBzZWxmLnJlZnJlc2goKQoKICAgICAgICBlbGlm
IGl0ZW1fdHlwZSA9PSAnczNfYmFjayc6CiAgICAgICAgICAgIGZvY3VzX2J1Y2tldCA9IHNlbGYu
Y3VycmVudF9idWNrZXQKICAgICAgICAgICAgc2VsZi5jdXJyZW50X2J1Y2tldCA9IE5vbmUKICAg
ICAgICAgICAgc2VsZi5jdXJyZW50X3ByZWZpeCA9ICcnCiAgICAgICAgICAgIHNlbGYucmVmcmVz
aChmb2N1c19vbj1mb2N1c19idWNrZXQpCgogICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdzM19w
YXJlbnQnOgogICAgICAgICAgICBpZiBzZWxmLmN1cnJlbnRfcHJlZml4OgogICAgICAgICAgICAg
ICAgIyBwYXJ0cyA9IHNlbGYuY3VycmVudF9wcmVmaXgucnN0cmlwKCcvJykuc3BsaXQoJy8nKQog
ICAgICAgICAgICAgICAgIyBmb2N1c19vbiA9IHBhcnRzWy0xXQogICAgICAgICAgICAgICAgIyBz
ZWxmLmN1cnJlbnRfcHJlZml4ID0gJy8nLmpvaW4ocGFydHNbOi0xXSkgKyAnLycgaWYgbGVuKHBh
cnRzKSA+IDEgZWxzZSAnJwogICAgICAgICAgICAgICAgIyBzZWxmLnJlZnJlc2goZm9jdXNfb249
Zm9jdXNfb24pCiAgICAgICAgICAgICAgICAjIGN1cnJlbnRfcHJlZml4INC+0LHRi9GH0L3QviDQ
t9Cw0LrQsNC90YfQuNCy0LDQtdGC0YHRjyDQvdCwICcvJywg0L3QsNC/0YDQuNC80LXRgCAnZm9s
ZGVyMS9mb2xkZXIyLycKICAgICAgICAgICAgICAgICMgcnN0cmlwKCcvJykgLT4gJ2ZvbGRlcjEv
Zm9sZGVyMicKICAgICAgICAgICAgICAgICMgc3BsaXQoJy8nKSAtPiBbJ2ZvbGRlcjEnLCAnZm9s
ZGVyMiddCiAgICAgICAgICAgICAgICBwYXJ0cyA9IHNlbGYuY3VycmVudF9wcmVmaXgucnN0cmlw
KCcvJykuc3BsaXQoJy8nKQoKICAgICAgICAgICAgICAgIGlmIGxlbihwYXJ0cykgPiAwOgogICAg
ICAgICAgICAgICAgICAgICMg0JjQvNGPINC/0LDQv9C60LgsINC40Lcg0LrQvtGC0L7RgNC+0Lkg
0LzRiyDQstGL0YXQvtC00LjQvCAo0L3QsCDQvdC10ZEg0L3QsNC00L4g0L/QvtGB0YLQsNCy0LjR
gtGMINGE0L7QutGD0YEpCiAgICAgICAgICAgICAgICAgICAgZm9jdXNfb24gPSBwYXJ0c1stMV0g
ICMgJ2ZvbGRlcjInCgogICAgICAgICAgICAgICAgICAgICMg0J3QvtCy0YvQuSDQv9GA0LXRhNC4
0LrRgSAo0YDQvtC00LjRgtC10LvRjNGB0LrQuNC5KQogICAgICAgICAgICAgICAgICAgIGlmIGxl
bihwYXJ0cykgPiAxOgogICAgICAgICAgICAgICAgICAgICAgICAjIEpvaW4g0LLRgdC10YUg0YfQ
sNGB0YLQtdC5INC60YDQvtC80LUg0L/QvtGB0LvQtdC00L3QtdC5ICsgJy8nCiAgICAgICAgICAg
ICAgICAgICAgICAgIHNlbGYuY3VycmVudF9wcmVmaXggPSAnLycuam9pbihwYXJ0c1s6LTFdKSAr
ICcvJwogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICMg
0JXRgdC70Lgg0LHRi9C70LAg0L7QtNC90LAg0L/QsNC/0LrQsCwg0YHRgtCw0L3QvtCy0LjQvNGB
0Y8g0LIg0LrQvtGA0LXQvdGMINCx0LDQutC10YLQsAogICAgICAgICAgICAgICAgICAgICAgICBz
ZWxmLmN1cnJlbnRfcHJlZml4ID0gJycKCiAgICAgICAgICAgICAgICAgICAgIyDQntCR0J3QntCS
0JvQldCd0JjQlTog0J/QtdGA0LXQtNCw0LXQvCBmb2N1c19vbiDQsiByZWZyZXNoCiAgICAgICAg
ICAgICAgICAgICAgIyDQktCw0LbQvdC+OiDQuNC80Y8g0L/QsNC/0LrQuCDQsiDRgdC/0LjRgdC6
0LUg0L7QsdGL0YfQvdC+INC+0YLQvtCx0YDQsNC20LDQtdGC0YHRjyDQsdC10Lcg0YHQu9GN0YjQ
tdC5INC40LvQuCDRgSDQvdC40LzQuCwKICAgICAgICAgICAgICAgICAgICAjINCyINC30LDQstC4
0YHQuNC80L7RgdGC0Lgg0L7RgiDRgtC+0LPQviwg0LrQsNC6IGNyZWF0ZV9kaXNwbGF5X2l0ZW1z
INGE0L7RgNC80LjRgNGD0LXRgiDQuNC80LXQvdCwLgogICAgICAgICAgICAgICAgICAgICMg0J7Q
sdGL0YfQvdC+INGN0YLQviDQv9GA0L7RgdGC0L4g0LjQvNGPINC/0LDQv9C60LguCiAgICAgICAg
ICAgICAgICAgICAgc2VsZi5yZWZyZXNoKGZvY3VzX29uPWZvY3VzX29uKQogICAgICAgICAgICAg
ICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAjINCV0YHQu9C4IHBhcnRzINC/0YPRgdGCLCDQ
t9C90LDRh9C40YIg0LzRiyDQsiDQutC+0YDQvdC1ICjRgdGC0YDQsNC90L3QviDQtNC70Y8gczNf
cGFyZW50LCDQvdC+INCx0YvQstCw0LXRgikKICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnJl
bnRfcHJlZml4ID0gJycKICAgICAgICAgICAgICAgICAgICBzZWxmLnJlZnJlc2goKQoKICAgICAg
ICBlbGlmIGl0ZW1fdHlwZSA9PSAnczNfZGlyJzoKICAgICAgICAgICAgc2VsZi5jdXJyZW50X3By
ZWZpeCA9IGRhdGFbJ2tleSddCiAgICAgICAgICAgIHNlbGYucmVmcmVzaCgpCgogICAgICAgIGVs
aWYgaXRlbV90eXBlID09ICdzM19maWxlJzoKICAgICAgICAgICAgaWYgZGF0YS5nZXQoJ3ZlcnNp
b25fY291bnQnLCAxKSA+IDE6CiAgICAgICAgICAgICAgICBzZWxmLnNob3dfdmVyc2lvbnMoZGF0
YSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYudmlld19pdGVtKCkKCiAg
ICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ2ZzX2Rpcic6CiAgICAgICAgICAgIGlmIGRhdGFbJ25h
bWUnXSA9PSAnLi4nOgogICAgICAgICAgICAgICAgZm9jdXNfb24gPSBvcy5wYXRoLmJhc2VuYW1l
KHNlbGYuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgpCiAgICAgICAgICAgICAgICBzZWxmLmZzX2Jy
b3dzZXIuY3VycmVudF9wYXRoID0gb3MucGF0aC5kaXJuYW1lKHNlbGYuZnNfYnJvd3Nlci5jdXJy
ZW50X3BhdGgpCiAgICAgICAgICAgICAgICBzZWxmLnJlZnJlc2goZm9jdXNfb249Zm9jdXNfb24p
CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmZzX2Jyb3dzZXIuY3VycmVu
dF9wYXRoID0gb3MucGF0aC5qb2luKHNlbGYuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIGRhdGFb
J25hbWUnXSkKICAgICAgICAgICAgICAgIHNlbGYucmVmcmVzaCgpCgogICAgICAgIGVsaWYgaXRl
bV90eXBlID09ICdmc19maWxlJzoKICAgICAgICAgICAgc2VsZi52aWV3X2l0ZW0oKQoKICAgIGRl
ZiBzaG93X3ZlcnNpb25zKHNlbGYsIGZpbGVfZGF0YSk6CiAgICAgICAgdmVyc2lvbnMgPSBzZWxm
LnMzX21hbmFnZXIubGlzdF9vYmplY3RfdmVyc2lvbnMoc2VsZi5jdXJyZW50X2J1Y2tldCwgZmls
ZV9kYXRhWydrZXknXSkKICAgICAgICBpZiBub3QgdmVyc2lvbnM6CiAgICAgICAgICAgIHNlbGYu
YXBwLnNob3dfcmVzdWx0KCdObyB2ZXJzaW9ucyBmb3VuZCcpCiAgICAgICAgICAgIHJldHVybgoK
ICAgICAgICB2ZXJzaW9uX2xpbmVzID0gW2YiVmVyc2lvbnMgb2Y6IHtmaWxlX2RhdGFbJ25hbWUn
XX1cbiJdCiAgICAgICAgZm9yIGlkeCwgdiBpbiBlbnVtZXJhdGUodmVyc2lvbnMpOgogICAgICAg
ICAgICBpc19sYXRlc3QgPSB2LmdldCgnSXNMYXRlc3QnLCBGYWxzZSkKICAgICAgICAgICAgbGF0
ZXN0X21hcmsgPSAnW0xBVEVTVF0gJyBpZiBpc19sYXRlc3QgZWxzZSAnICAgICAgICAnCiAgICAg
ICAgICAgIHNpemUgPSBzZWxmLmZvcm1hdF9zaXplKHYuZ2V0KCdTaXplJywgMCkpCiAgICAgICAg
ICAgIG10aW1lID0gdi5nZXQoJ0xhc3RNb2RpZmllZCcsICcnKS5zdHJmdGltZSgnJVktJW0tJWQg
JUg6JU06JVMnKSBpZiB2LmdldCgnTGFzdE1vZGlmaWVkJykgZWxzZSAnJwogICAgICAgICAgICB2
ZXJzaW9uX2lkID0gdi5nZXQoJ1ZlcnNpb25JZCcsICcnKVs6MTJdCiAgICAgICAgICAgIHZlcnNp
b25fbGluZXMuYXBwZW5kKGYie2lkeCArIDF9LiB7bGF0ZXN0X21hcmt9e3ZlcnNpb25faWR9IHtz
aXplOj4xMH0ge210aW1lfSIpCgogICAgICAgIGNvbnRlbnQgPSAnXG4nLmpvaW4odmVyc2lvbl9s
aW5lcykKICAgICAgICBjb250ZW50ICs9ICdcblxuVXNlIEYzIHRvIHZpZXcsIEY1IHRvIGNvcHks
IEY4IHRvIGRlbGV0ZSBzZWxlY3RlZCB2ZXJzaW9uJwoKICAgICAgICB2aWV3ZXIgPSBGaWxlVmll
d2VyRGlhbG9nKGYnVmVyc2lvbnM6IHtmaWxlX2RhdGFbIm5hbWUiXX0nLCBjb250ZW50LCBzZWxm
LmFwcC5jbG9zZV9kaWFsb2cpCiAgICAgICAgc2VsZi5hcHAuc2hvd19kaWFsb2codmlld2VyKQoK
ICAgIGRlZiBzZWxlY3RfYnlfcGF0dGVybihzZWxmLCBwYXR0ZXJuLCBzZWxlY3Q9VHJ1ZSk6CiAg
ICAgICAgIiIi0JLRi9Cx0YDQsNGC0Ywv0YHQvdGP0YLRjCDQstGL0LHQvtGAINGN0LvQtdC80LXQ
vdGC0L7QsiDQv9C+IGdsb2IgcGF0dGVybiAo0YLQvtC70YzQutC+INGE0LDQudC70YspIiIiCiAg
ICAgICAgdHJ5OgogICAgICAgICAgICByZWdleF9wYXR0ZXJuID0gZm5tYXRjaC50cmFuc2xhdGUo
cGF0dGVybikKICAgICAgICAgICAgcmVnZXggPSByZS5jb21waWxlKHJlZ2V4X3BhdHRlcm4sIHJl
LklHTk9SRUNBU0UpCiAgICAgICAgICAgIGNvdW50ID0gMAoKICAgICAgICAgICAgZm9yIHdpZGdl
dCBpbiBzZWxmLndhbGtlcjoKICAgICAgICAgICAgICAgIHcgPSB3aWRnZXQub3JpZ2luYWxfd2lk
Z2V0CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHcsIFNlbGVjdGFibGVUZXh0KSBhbmQg
dy5kYXRhLmdldCgnY2FuX3NlbGVjdCcpOgogICAgICAgICAgICAgICAgICAgIGl0ZW1fdHlwZSA9
IHcuZGF0YS5nZXQoJ3R5cGUnKQogICAgICAgICAgICAgICAgICAgIGlmIGl0ZW1fdHlwZSBpbiAo
J2ZzX2ZpbGUnLCAnczNfZmlsZScpOgogICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gdy5k
YXRhLmdldCgnbmFtZScsICcnKQogICAgICAgICAgICAgICAgICAgICAgICBpZiByZWdleC5tYXRj
aChuYW1lKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcuc2VsZWN0ZWQgPSBzZWxlY3QK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlX2l0ZW1fZGlzcGxheSh3KQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gMQoKICAgICAgICAgICAgYWN0aW9u
ID0gJ1NlbGVjdGVkJyBpZiBzZWxlY3QgZWxzZSAnVW5zZWxlY3RlZCcKICAgICAgICAgICAgc2Vs
Zi5hcHAuc2hvd19yZXN1bHQoZid7YWN0aW9ufSB7Y291bnR9IGZpbGVzJykKICAgICAgICBleGNl
cHQgcmUuZXJyb3I6CiAgICAgICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KCdJbnZhbGlkIHBh
dHRlcm4nKQoKICAgIGRlZiBpbnZlcnRfc2VsZWN0aW9uKHNlbGYpOgogICAgICAgICIiItCY0L3Q
stC10YDRgtC40YDQvtCy0LDRgtGMINCy0YvQsdC+0YAgKNGC0L7Qu9GM0LrQviDRhNCw0LnQu9GL
KSIiIgogICAgICAgIGNvdW50ID0gMAogICAgICAgIGZvciB3aWRnZXQgaW4gc2VsZi53YWxrZXI6
CiAgICAgICAgICAgIHcgPSB3aWRnZXQub3JpZ2luYWxfd2lkZ2V0CiAgICAgICAgICAgIGlmIGlz
aW5zdGFuY2UodywgU2VsZWN0YWJsZVRleHQpIGFuZCB3LmRhdGEuZ2V0KCdjYW5fc2VsZWN0Jyk6
CiAgICAgICAgICAgICAgICBpdGVtX3R5cGUgPSB3LmRhdGEuZ2V0KCd0eXBlJykKICAgICAgICAg
ICAgICAgIGlmIGl0ZW1fdHlwZSBpbiAoJ2ZzX2ZpbGUnLCAnczNfZmlsZScpOgogICAgICAgICAg
ICAgICAgICAgIHcuc2VsZWN0ZWQgPSBub3Qgdy5zZWxlY3RlZAogICAgICAgICAgICAgICAgICAg
IHNlbGYudXBkYXRlX2l0ZW1fZGlzcGxheSh3KQogICAgICAgICAgICAgICAgICAgIGlmIHcuc2Vs
ZWN0ZWQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ICs9IDEKCiAgICAgICAgc2VsZi5h
cHAuc2hvd19yZXN1bHQoZidTZWxlY3RlZCB7Y291bnR9IGZpbGVzJykKCiAgICBkZWYgdXBkYXRl
X2l0ZW1fZGlzcGxheShzZWxmLCB0ZXh0X3dpZGdldCk6CiAgICAgICAgaWYgdGV4dF93aWRnZXQu
c2VsZWN0ZWQ6CiAgICAgICAgICAgIHRleHRfd2lkZ2V0LnNldF90ZXh0KCcqICcgKyB0ZXh0X3dp
ZGdldC5nZXRfdGV4dCgpWzBdWzI6XSkKICAgICAgICBlbHNlOgogICAgICAgICAgICB0ZXh0X3dp
ZGdldC5zZXRfdGV4dCgnICAnICsgdGV4dF93aWRnZXQuZ2V0X3RleHQoKVswXVsyOl0pCgogICAg
ZGVmIGdldF9zZWxlY3RlZF9pdGVtcyhzZWxmKToKICAgICAgICBzZWxlY3RlZCA9IFtdCiAgICAg
ICAgZm9yIHdpZGdldCBpbiBzZWxmLndhbGtlcjoKICAgICAgICAgICAgdyA9IHdpZGdldC5vcmln
aW5hbF93aWRnZXQKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh3LCBTZWxlY3RhYmxlVGV4dCkg
YW5kIHcuc2VsZWN0ZWQ6CiAgICAgICAgICAgICAgICBzZWxlY3RlZC5hcHBlbmQody5kYXRhKQog
ICAgICAgIHJldHVybiBzZWxlY3RlZAoKICAgIGRlZiBnZXRfZm9jdXNlZF9pdGVtKHNlbGYpOgog
ICAgICAgIHRyeToKICAgICAgICAgICAgZm9jdXNfd2lkZ2V0LCBwb3MgPSBzZWxmLmxpc3Rib3gu
Z2V0X2ZvY3VzKCkKICAgICAgICAgICAgaWYgbm90IGZvY3VzX3dpZGdldDoKICAgICAgICAgICAg
ICAgIHJldHVybiBOb25lCgogICAgICAgICAgICAjINCg0LDQt9Cy0L7RgNCw0YfQuNCy0LDQtdC8
IEF0dHJNYXAg0LXRgdC70Lgg0LXRgdGC0YwKICAgICAgICAgICAgdyA9IGZvY3VzX3dpZGdldAog
ICAgICAgICAgICBpZiBpc2luc3RhbmNlKHcsIHVyd2lkLkF0dHJNYXApOgogICAgICAgICAgICAg
ICAgdyA9IHcub3JpZ2luYWxfd2lkZ2V0CgogICAgICAgICAgICAjINCf0YDQvtCy0LXRgNGP0LXQ
vCwg0LXRgdGC0Ywg0LvQuCDRgyDQstC40LTQttC10YLQsCDQsNGC0YDQuNCx0YPRgiBkYXRhIChT
ZWxlY3RhYmxlVGV4dCkKICAgICAgICAgICAgIyDQkiDRgNC10LbQuNC80LUg0L/RgNC10LLRjNGO
INGC0LDQvCDQu9C10LbQuNGCIHVyd2lkLlRleHQg0LHQtdC3IGRhdGEKICAgICAgICAgICAgaWYg
aXNpbnN0YW5jZSh3LCBTZWxlY3RhYmxlVGV4dCkgYW5kIGhhc2F0dHIodywgJ2RhdGEnKToKICAg
ICAgICAgICAgICAgIHJldHVybiB3LmRhdGEKCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAg
ICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgdmll
d19pdGVtKHNlbGYpOgogICAgICAgIGZvY3VzZWQgPSBzZWxmLmdldF9mb2N1c2VkX2l0ZW0oKQog
ICAgICAgIGlmIG5vdCBmb2N1c2VkOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaXRlbV90
eXBlID0gZm9jdXNlZFsndHlwZSddCgogICAgICAgIGlmIGl0ZW1fdHlwZSA9PSAnZnNfZmlsZSc6
CiAgICAgICAgICAgIGZpbGVfcGF0aCA9IG9zLnBhdGguam9pbihzZWxmLmZzX2Jyb3dzZXIuY3Vy
cmVudF9wYXRoLCBmb2N1c2VkWyduYW1lJ10pCiAgICAgICAgICAgIHNlbGYuX3ZpZXdfZmlsZShm
aWxlX3BhdGgsIGZvY3VzZWRbJ25hbWUnXSkKCiAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ3Mz
X2ZpbGUnOgogICAgICAgICAgICAjINCf0YDQvtCy0LXRgNGP0LXQvCDQutC+0LvQuNGH0LXRgdGC
0LLQviDQstC10YDRgdC40LkKICAgICAgICAgICAgaWYgZm9jdXNlZC5nZXQoJ3ZlcnNpb25fY291
bnQnLCAxKSA+IDE6CiAgICAgICAgICAgICAgICAjINCf0L7QutCw0LfRi9Cy0LDQtdC8INC00LjQ
sNC70L7QsyDQstGL0LHQvtGA0LAg0LLQtdGA0YHQuNC4CiAgICAgICAgICAgICAgICBzZWxmLnNo
b3dfdmVyc2lvbl9zZWxlY3RfZGlhbG9nKGZvY3VzZWQpCiAgICAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICAgICAjINCf0YDQvtGB0LzQsNGC0YDQuNCy0LDQtdC8INC10LTQuNC90YHRgtCy0LXQ
vdC90YPRjiDQstC10YDRgdC40Y4KICAgICAgICAgICAgICAgIHNlbGYudmlld19zM19maWxlX3Zl
cnNpb24oZm9jdXNlZCkKCiAgICAgICAgZWxpZiBpdGVtX3R5cGUgaW4gKCdmc19kaXInLCAnczNf
ZGlyJywgJ2J1Y2tldCcpOgogICAgICAgICAgICBzZWxmLl9jYWxjdWxhdGVfc2l6ZShmb2N1c2Vk
KQoKICAgIGRlZiBfdmlld19maWxlKHNlbGYsIGZpbGVfcGF0aCwgdGl0bGUsIGNsb3NlX2NhbGxi
YWNrPU5vbmUpOgogICAgICAgIHRyeToKICAgICAgICAgICAgY29udGVudCA9ICIiCgogICAgICAg
ICAgICAjINCf0YDQvtCy0LXRgNGP0LXQvCDQvdCwINCx0LjQvdCw0YDQvdC+0YHRgtGMCiAgICAg
ICAgICAgIGlmIGlzX2JpbmFyeV9maWxlKGZpbGVfcGF0aCk6CiAgICAgICAgICAgICAgICAjINCn
0LjRgtCw0LXQvCDQsiDQsdC40L3QsNGA0L3QvtC8INGA0LXQttC40LzQtSDQtNC70Y8gSEVYINC/
0YDQvtGB0LzQvtGC0YDQsAogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAg
IGZpbGVfc2l6ZSA9IG9zLnBhdGguZ2V0c2l6ZShmaWxlX3BhdGgpCiAgICAgICAgICAgICAgICAg
ICAgY29udGVudCA9IGYiW0JpbmFyeSBmaWxlOiB7dGl0bGV9XVxuRmlsZSBzaXplOiB7ZmlsZV9z
aXplfSBieXRlc1xuXG4iCgogICAgICAgICAgICAgICAgICAgICMg0KfQuNGC0LDQtdC8INC90LDR
h9Cw0LvQviDRhNCw0LnQu9CwICjQvdCw0L/RgNC40LzQtdGALCDQv9C10YDQstGL0LUgNEtCINC0
0LvRjyDQv9GA0L7RgdC80L7RgtGA0LApCiAgICAgICAgICAgICAgICAgICAgcmVhZF9saW1pdCA9
IDQwOTYKICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4oZmlsZV9wYXRoLCAncmInKSBhcyBm
OgogICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gZi5yZWFkKHJlYWRfbGltaXQpCiAgICAg
ICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gc2VsZi5hcHAuZm9ybWF0X2hleF9jb250ZW50
KGRhdGEpCgogICAgICAgICAgICAgICAgICAgIGlmIGZpbGVfc2l6ZSA+IHJlYWRfbGltaXQ6CiAg
ICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gIlxuXG5bLi4uIEJpbmFyeSBjb250ZW50
IHRydW5jYXRlZCAuLi5dIgoKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToK
ICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gZiJFcnJvciByZWFkaW5nIGJpbmFyeSBmaWxl
OiB7c3RyKGUpfSIKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMg0KLQtdC60YHR
gtC+0LLRi9C5INGA0LXQttC40LwgKNC60LDQuiDQsdGL0LvQvikKICAgICAgICAgICAgICAgIHRy
eToKICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4oZmlsZV9wYXRoLCAncicsIGVuY29kaW5n
PSd1dGYtOCcsIGVycm9ycz0ncmVwbGFjZScpIGFzIGY6CiAgICAgICAgICAgICAgICAgICAgICAg
IGNvbnRlbnQgPSBmLnJlYWQoNTAwMDApCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbihj
b250ZW50KSA9PSA1MDAwMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0g
IlxuXG5bLi4uIEZpbGUgdHJ1bmNhdGVkIC4uLl0iCiAgICAgICAgICAgICAgICBleGNlcHQgRXhj
ZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGYiRXJyb3IgcmVhZGlu
ZyBmaWxlOiB7c3RyKGUpfSIKCiAgICAgICAgICAgIGRlZiBvbl92aWV3ZXJfY2xvc2UoKToKICAg
ICAgICAgICAgICAgIHNlbGYuYXBwLmNsb3NlX2RpYWxvZygpCiAgICAgICAgICAgICAgICBpZiBj
bG9zZV9jYWxsYmFjazoKICAgICAgICAgICAgICAgICAgICBjbG9zZV9jYWxsYmFjaygpCgogICAg
ICAgICAgICAjINCY0YHQv9C+0LvRjNC30YPQtdC8INC80L7QvdC+0YjQuNGA0LjQvdC90YvQuSDR
iNGA0LjRhNGCICjQvtCx0YvRh9C90L4g0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4g0LIg0YLQtdGA
0LzQuNC90LDQu9C1KQogICAgICAgICAgICB2aWV3ZXIgPSBGaWxlVmlld2VyRGlhbG9nKGYnVmll
dzoge3RpdGxlfScsIGNvbnRlbnQsIG9uX3ZpZXdlcl9jbG9zZSkKICAgICAgICAgICAgc2VsZi5h
cHAuc2hvd19kaWFsb2codmlld2VyLCBoZWlnaHQ9KCdyZWxhdGl2ZScsIDgwKSkKCiAgICAgICAg
ZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmFwcC5zaG93X3Jlc3VsdChm
J0Vycm9yIHZpZXdpbmcgZmlsZToge3N0cihlKX0nKQoKICAgIGRlZiBfY2FsY3VsYXRlX3NpemUo
c2VsZiwgaXRlbSk6CiAgICAgICAgIiIi0J/QvtC00YHRh9C10YIg0YDQsNC30LzQtdGA0LAg0LTQ
uNGA0LXQutGC0L7RgNC40Lgv0LHQsNC60LXRgtCwL9C/0YHQtdCy0LTQvtC00LjRgNC10LrRgtC+
0YDQuNC4IiIiCiAgICAgICAgaXRlbV90eXBlID0gaXRlbVsndHlwZSddCgogICAgICAgIGRlZiBj
YWxjdWxhdGVfaW5fdGhyZWFkKCk6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHRv
dGFsX3NpemUgPSAwCiAgICAgICAgICAgICAgICBmaWxlX2NvdW50ID0gMAoKICAgICAgICAgICAg
ICAgIGlmIGl0ZW1fdHlwZSA9PSAnZnNfZGlyJzoKICAgICAgICAgICAgICAgICAgICBkaXJfcGF0
aCA9IG9zLnBhdGguam9pbihzZWxmLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCBpdGVtWyduYW1l
J10pCiAgICAgICAgICAgICAgICAgICAgZmlsZXMgPSBzZWxmLmZzX2Jyb3dzZXIubGlzdF9hbGxf
ZmlsZXMoZGlyX3BhdGgpCiAgICAgICAgICAgICAgICAgICAgZmlsZV9jb3VudCA9IGxlbihmaWxl
cykKICAgICAgICAgICAgICAgICAgICB0b3RhbF9zaXplID0gc3VtKGZbJ3NpemUnXSBmb3IgZiBp
biBmaWxlcykKCiAgICAgICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnczNfZGlyJzoKICAg
ICAgICAgICAgICAgICAgICBvYmplY3RzID0gc2VsZi5zM19tYW5hZ2VyLmxpc3RfYWxsX29iamVj
dHMoc2VsZi5jdXJyZW50X2J1Y2tldCwgaXRlbVsna2V5J10pCiAgICAgICAgICAgICAgICAgICAg
ZmlsZV9jb3VudCA9IGxlbihvYmplY3RzKQogICAgICAgICAgICAgICAgICAgIHRvdGFsX3NpemUg
PSBzdW0ob2JqLmdldCgnU2l6ZScsIDApIGZvciBvYmogaW4gb2JqZWN0cykKCiAgICAgICAgICAg
ICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnYnVja2V0JzoKICAgICAgICAgICAgICAgICAgICBvYmpl
Y3RzID0gc2VsZi5zM19tYW5hZ2VyLmxpc3RfYWxsX29iamVjdHMoaXRlbVsnbmFtZSddLCAnJykK
ICAgICAgICAgICAgICAgICAgICBmaWxlX2NvdW50ID0gbGVuKG9iamVjdHMpCiAgICAgICAgICAg
ICAgICAgICAgdG90YWxfc2l6ZSA9IHN1bShvYmouZ2V0KCdTaXplJywgMCkgZm9yIG9iaiBpbiBv
YmplY3RzKQoKICAgICAgICAgICAgICAgIHNlbGYuYXBwLmxvb3AuZHJhd19zY3JlZW4oKQogICAg
ICAgICAgICAgICAgcmVzdWx0X21zZyA9IGYnU2l6ZToge2Zvcm1hdF9zaXplKHRvdGFsX3NpemUp
fSAoe2ZpbGVfY291bnR9IGZpbGVzKScKCiAgICAgICAgICAgICAgICAjINCe0LHQvdC+0LLQu9GP
0LXQvCBVSSDQuCDQv9GA0LjQvdGD0LTQuNGC0LXQu9GM0L3QviDRgNC40YHRg9C10Lwg0Y3QutGA
0LDQvQogICAgICAgICAgICAgICAgZGVmIHVwZGF0ZV9yZXN1bHQobG9vcCwgdXNlcl9kYXRhKToK
ICAgICAgICAgICAgICAgICAgICBzZWxmLmFwcC5zaG93X3Jlc3VsdChyZXN1bHRfbXNnKQogICAg
ICAgICAgICAgICAgICAgIHNlbGYuYXBwLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICAgICAg
ICAgIHNlbGYuYXBwLmxvb3Auc2V0X2FsYXJtX2luKDAsIHVwZGF0ZV9yZXN1bHQpCgogICAgICAg
ICAgICAgICAgIyDQk9Cb0JDQktCd0J7QlTog0JHRg9C00LjQvCDQvtGB0L3QvtCy0L3QvtC5INGG
0LjQutC7IQogICAgICAgICAgICAgICAgc2VsZi5hcHAud2FrZV91cCgpCgogICAgICAgICAgICBl
eGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBkZWYgc2hvd19lcnJvcihsb29w
PU5vbmUsIHVzZXJfZGF0YT1Ob25lKToKICAgICAgICAgICAgICAgICAgICBzZWxmLmFwcC5zaG93
X3Jlc3VsdChmJ0Vycm9yIGNhbGN1bGF0aW5nIHNpemU6IHtzdHIoZSl9JykKICAgICAgICAgICAg
ICAgICAgICAjIHNlbGYuYXBwLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICAgICAgICAgIHNl
bGYuYXBwLmxvb3Auc2V0X2FsYXJtX2luKDAsIHNob3dfZXJyb3IpCiAgICAgICAgICAgICAgICBz
ZWxmLmFwcC53YWtlX3VwKCkgICMg0JHRg9C00LjQvCDRhtC40LrQuyDQuCDQv9GA0Lgg0L7RiNC4
0LHQutC1CgogICAgICAgIHNlbGYuYXBwLnNob3dfcmVzdWx0KCdDYWxjdWxhdGluZyBzaXplLi4u
JykKICAgICAgICB0aHJlYWQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jYWxjdWxhdGVfaW5f
dGhyZWFkKQogICAgICAgIHRocmVhZC5kYWVtb24gPSBUcnVlCiAgICAgICAgdGhyZWFkLnN0YXJ0
KCkKCgpjbGFzcyBJbnB1dERpYWxvZyh1cndpZC5XaWRnZXRXcmFwKToKICAgIGRlZiBfX2luaXRf
XyhzZWxmLCB0aXRsZSwgcHJvbXB0LCBjYWxsYmFjaywgZGVmYXVsdF90ZXh0PScnKToKICAgICAg
ICBzZWxmLmNhbGxiYWNrID0gY2FsbGJhY2sKICAgICAgICBzZWxmLmVkaXQgPSB1cndpZC5FZGl0
KHByb21wdCwgZGVmYXVsdF90ZXh0KQoKICAgICAgICBva19idXR0b24gPSB1cndpZC5CdXR0b24o
J1sgT0sgXScpCiAgICAgICAgY2FuY2VsX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBDYW5jZWwg
XScpCgogICAgICAgIHVyd2lkLmNvbm5lY3Rfc2lnbmFsKG9rX2J1dHRvbiwgJ2NsaWNrJywgc2Vs
Zi5vbl9vaykKICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChjYW5jZWxfYnV0dG9uLCAnY2xp
Y2snLCBzZWxmLm9uX2NhbmNlbCkKCiAgICAgICAgYnV0dG9ucyA9IHVyd2lkLkNvbHVtbnMoWwog
ICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICAgICAgKCdw
YWNrJywgdXJ3aWQuQXR0ck1hcChva19idXR0b24sICdidXR0b24nLCBmb2N1c19tYXA9J2J1dHRv
bmZvY3VzJykpLAogICAgICAgICAgICAoJ2ZpeGVkJywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAg
ICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKGNhbmNlbF9idXR0b24sICdidXR0b24nLCBm
b2N1c19tYXA9J2J1dHRvbmZvY3VzJykpLAogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lk
LlRleHQoJycpKSwKICAgICAgICBdLCBkaXZpZGVjaGFycz0wKQoKICAgICAgICBjb250ZW50ID0g
WwogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAoJ3Bh
Y2snLCBzZWxmLmVkaXQpLAogICAgICAgIF0KCiAgICAgICAgY29udGVudC5leHRlbmQoWwogICAg
ICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgICAgICAoJ3BhY2snLCBi
dXR0b25zKSwKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuRGl2aWRlcigpKSwKICAgICAgICBd
KQoKICAgICAgICBwaWxlID0gdXJ3aWQuUGlsZShjb250ZW50KQoKICAgICAgICBmaWxsID0gdXJ3
aWQuRmlsbGVyKHBpbGUpCiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyh1cndpZC5BdHRyTWFwKHVy
d2lkLkxpbmVCb3goZmlsbCwgdGl0bGU9dGl0bGUpLCAnZGlhbG9nJykpCgogICAgZGVmIGtleXBy
ZXNzKHNlbGYsIHNpemUsIGtleSk6CiAgICAgICAgaWYga2V5ID09ICdlbnRlcic6CiAgICAgICAg
ICAgIGJ0biA9IGdldF9mb2N1c19idXR0b24oc2VsZi5fdykKICAgICAgICAgICAgaWYgYnRuIGlz
IG5vdCBOb25lOgogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShidG4sIHVyd2lkLkJ1dHRv
bikgYW5kIGJ0bi5nZXRfbGFiZWwoKSA9PSAnWyBDYW5jZWwgXSc6CiAgICAgICAgICAgICAgICAg
ICAgIyBFbnRlciDQvdCwIENhbmNlbCAtPiDQvtGC0LzQtdC90LAKICAgICAgICAgICAgICAgICAg
ICBzZWxmLm9uX2NhbmNlbChOb25lKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAg
ICAgICAgICAgICMg0JLRgdC1INC+0YHRgtCw0LvRjNC90YvQtSDRgdC70YPRh9Cw0Lg6IEVudGVy
IC0+IE9LCiAgICAgICAgICAgIHNlbGYub25fb2soTm9uZSkKICAgICAgICAgICAgcmV0dXJuIE5v
bmUKICAgICAgICBlbGlmIGtleSA9PSAnZXNjJzoKICAgICAgICAgICAgc2VsZi5vbl9jYW5jZWwo
Tm9uZSkKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICByZXR1cm4gc3VwZXIoKS5rZXlw
cmVzcyhzaXplLCBrZXkpCgogICAgZGVmIG9uX29rKHNlbGYsIGJ1dHRvbik6CiAgICAgICAgdGV4
dCA9IHNlbGYuZWRpdC5nZXRfZWRpdF90ZXh0KCkKICAgICAgICBpZiB0ZXh0LnN0cmlwKCk6CiAg
ICAgICAgICAgIHNlbGYuY2FsbGJhY2soVHJ1ZSwgdGV4dC5zdHJpcCgpKQoKICAgIGRlZiBvbl9j
YW5jZWwoc2VsZiwgYnV0dG9uKToKICAgICAgICBzZWxmLmNhbGxiYWNrKEZhbHNlLCBOb25lKQoK
CmNsYXNzIENvbmZpcm1EaWFsb2codXJ3aWQuV2lkZ2V0V3JhcCk6CiAgICBkZWYgX19pbml0X18o
c2VsZiwgdGl0bGUsIG1lc3NhZ2UsIGl0ZW1zX2luZm8sIGNhbGxiYWNrLCBmb2N1c195ZXM9RmFs
c2UpOgogICAgICAgIHNlbGYuY2FsbGJhY2sgPSBjYWxsYmFjawogICAgICAgIHNlbGYuZm9jdXNf
eWVzID0gZm9jdXNfeWVzCgogICAgICAgIHllc19idXR0b24gPSB1cndpZC5CdXR0b24oJ1sgWWVz
IF0nKQogICAgICAgIG5vX2J1dHRvbiA9IHVyd2lkLkJ1dHRvbignWyBObyBdJykKCiAgICAgICAg
dXJ3aWQuY29ubmVjdF9zaWduYWwoeWVzX2J1dHRvbiwgJ2NsaWNrJywgc2VsZi5vbl95ZXMpCiAg
ICAgICAgdXJ3aWQuY29ubmVjdF9zaWduYWwobm9fYnV0dG9uLCAnY2xpY2snLCBzZWxmLm9uX25v
KQoKICAgICAgICBpZiBmb2N1c195ZXM6CiAgICAgICAgICAgIGJ1dHRvbnMgPSB1cndpZC5Db2x1
bW5zKFsKICAgICAgICAgICAgICAgICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4dCgnJykpLAogICAg
ICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcCh5ZXNfYnV0dG9uLCAnYnV0dG9uJywg
Zm9jdXNfbWFwPSdidXR0b25mb2N1cycpKSwKICAgICAgICAgICAgICAgICgnZml4ZWQnLCAxLCB1
cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKG5v
X2J1dHRvbiwgJ2J1dHRvbicsIGZvY3VzX21hcD0nYnV0dG9uZm9jdXMnKSksCiAgICAgICAgICAg
ICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAgICAgICAgXSwgZGl2aWRl
Y2hhcnM9MCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBidXR0b25zID0gdXJ3aWQuQ29sdW1u
cyhbCiAgICAgICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHVyd2lkLlRleHQoJycpKSwKICAgICAg
ICAgICAgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAobm9fYnV0dG9uLCAnYnV0dG9uJywgZm9j
dXNfbWFwPSdidXR0b25mb2N1cycpKSwKICAgICAgICAgICAgICAgICgnZml4ZWQnLCAxLCB1cndp
ZC5UZXh0KCcnKSksCiAgICAgICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKHllc19i
dXR0b24sICdidXR0b24nLCBmb2N1c19tYXA9J2J1dHRvbmZvY3VzJykpLAogICAgICAgICAgICAg
ICAgKCd3ZWlnaHQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAgICAgIF0sIGRpdmlkZWNo
YXJzPTApCgogICAgICAgIGNvbnRlbnQgPSBbCiAgICAgICAgICAgICgncGFjaycsIHVyd2lkLlRl
eHQobWVzc2FnZSkpLAogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAg
ICAgIF0KCiAgICAgICAgaWYgaXRlbXNfaW5mbzoKICAgICAgICAgICAgY29udGVudC5hcHBlbmQo
KCdwYWNrJywgdXJ3aWQuVGV4dCgiSXRlbXM6IiwgYWxpZ249J2xlZnQnKSkpCiAgICAgICAgICAg
IG1heF9kaXNwbGF5ID0gMTAKCiAgICAgICAgICAgIGZvciBpdGVtX2luZm8gaW4gaXRlbXNfaW5m
b1s6bWF4X2Rpc3BsYXldOgogICAgICAgICAgICAgICAgY29udGVudC5hcHBlbmQoKCdwYWNrJywg
dXJ3aWQuVGV4dChmIiAge2l0ZW1faW5mb30iKSkpCgogICAgICAgICAgICBpZiBsZW4oaXRlbXNf
aW5mbykgPiBtYXhfZGlzcGxheToKICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kKCgncGFj
aycsIHVyd2lkLlRleHQoZiIgIC4uLiBhbmQge2xlbihpdGVtc19pbmZvKSAtIG1heF9kaXNwbGF5
fSBtb3JlIikpKQoKICAgICAgICAgICAgY29udGVudC5hcHBlbmQoKCdwYWNrJywgdXJ3aWQuRGl2
aWRlcigpKSkKICAgICAgICBjb250ZW50LmV4dGVuZChbCiAgICAgICAgICAgICgncGFjaycsIHVy
d2lkLkRpdmlkZXIoKSksCiAgICAgICAgICAgICgncGFjaycsIGJ1dHRvbnMpLAogICAgICAgICAg
ICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAgICAgIF0pCgogICAgICAgIHBpbGUgPSB1
cndpZC5QaWxlKGNvbnRlbnQpCgogICAgICAgIGZpbGwgPSB1cndpZC5GaWxsZXIocGlsZSwgdmFs
aWduPSd0b3AnKQogICAgICAgICMgc3VwZXIoKS5fX2luaXRfXyh1cndpZC5BdHRyTWFwKHVyd2lk
LkxpbmVCb3goZmlsbCksICdkaWFsb2cnKSkKICAgICAgICBzdXBlcigpLl9faW5pdF9fKHVyd2lk
LkF0dHJNYXAodXJ3aWQuTGluZUJveChmaWxsLCB0aXRsZT10aXRsZSksICdkaWFsb2cnKSkKCiAg
ICBkZWYga2V5cHJlc3Moc2VsZiwgc2l6ZSwga2V5KToKICAgICAgICBpZiBrZXkgPT0gJ2VudGVy
JzoKICAgICAgICAgICAgYnRuID0gZ2V0X2ZvY3VzX2J1dHRvbihzZWxmLl93KQogICAgICAgICAg
ICBpZiBidG4gaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGJ0biwg
dXJ3aWQuQnV0dG9uKSBhbmQgYnRuLmdldF9sYWJlbCgpID09ICdbIFllcyBdJzoKICAgICAgICAg
ICAgICAgICAgICBzZWxmLm9uX3llcyhOb25lKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBO
b25lCiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGJ0biwgdXJ3aWQuQnV0dG9uKSBhbmQg
YnRuLmdldF9sYWJlbCgpID09ICdbIE5vIF0nOgogICAgICAgICAgICAgICAgICAgIHNlbGYub25f
bm8oTm9uZSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAjINCS
0YHQtSDQvtGB0YLQsNC70YzQvdGL0LUg0YHQu9GD0YfQsNC4OiBFbnRlciAtPiBObwogICAgICAg
ICAgICBzZWxmLm9uX25vKE5vbmUpCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgZWxp
ZiBrZXkgPT0gJ2VzYyc6CiAgICAgICAgICAgIHNlbGYub25fbm8oTm9uZSkKICAgICAgICAgICAg
cmV0dXJuIE5vbmUKICAgICAgICByZXR1cm4gc3VwZXIoKS5rZXlwcmVzcyhzaXplLCBrZXkpCgog
ICAgZGVmIG9uX3llcyhzZWxmLCBidXR0b24pOgogICAgICAgIHNlbGYuY2FsbGJhY2soVHJ1ZSkK
CiAgICBkZWYgb25fbm8oc2VsZiwgYnV0dG9uKToKICAgICAgICBzZWxmLmNhbGxiYWNrKEZhbHNl
KQoKCmNsYXNzIER1YWxQYW5lQXBwOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHMzX2NvbmZpZyk6
CiAgICAgICAgc2VsZi5zM19jb25maWcgPSBzM19jb25maWcKICAgICAgICBzZWxmLmJvb2ttYXJr
c19tYW5hZ2VyID0gQm9va21hcmtzTWFuYWdlcigpICAjIDwtLS0g0JjQvdC40YbQuNCw0LvQuNC3
0LDRhtC40Y8KCiAgICAgICAgc2VsZi5wcmV2aWV3X21vZGUgPSBGYWxzZQogICAgICAgIHNlbGYu
cHJldmlld19jYWNoZSA9IHt9ICMg0JrQtdGIINC00LvRjyDQstC10YDRgdC40LkgUzMge2tleTog
W3ZlcnNpb25zXX0KICAgICAgICBzZWxmLnByZXZpZXdfdmVyc2lvbl9pbmRleCA9IDAKCiAgICAg
ICAgc2VsZi5sZWZ0X3BhbmVsID0gUGFuZWxXaWRnZXQoJycsIHBhbmVsX3R5cGU9J3Jvb3RfbWVu
dScsIHMzX2NvbmZpZz1zM19jb25maWcsIGFwcD1zZWxmKQogICAgICAgIHNlbGYucmlnaHRfcGFu
ZWwgPSBQYW5lbFdpZGdldCgnJywgcGFuZWxfdHlwZT0ncm9vdF9tZW51JywgczNfY29uZmlnPXMz
X2NvbmZpZywgYXBwPXNlbGYpCgogICAgICAgIHNlbGYuY29sdW1ucyA9IHVyd2lkLkNvbHVtbnMo
WwogICAgICAgICAgICAoJ3dlaWdodCcsIDEsIHNlbGYubGVmdF9wYW5lbCksCiAgICAgICAgICAg
ICgnd2VpZ2h0JywgMSwgc2VsZi5yaWdodF9wYW5lbCkKICAgICAgICBdLCBkaXZpZGVjaGFycz0x
LCBmb2N1c19jb2x1bW49MCkKCiAgICAgICAgc2VsZi5ob3RrZXlfdGV4dCA9IHVyd2lkLlRleHQo
CiAgICAgICAgICAgICdGMjpzb3J0IHwgRjM6dmlldyB8IEY0OmluZm8gfCBGNTpjb3B5IHwgRjY6
bW92ZSB8IEY3Om1rZGlyIHwgRjg6ZGVsIHwgRjk6cHVyZ2UgfCBGMTA6cXVpdGUgfCBGMTE6dmVy
c2lvbmluZyB8IC86ZmlsdGVyIHxJTlM6c2VsIHwgKzpzZWxlY3QgfCAtOnVuc2VsIHwgKjppbnZl
cnQgfCBDdHJsK1Y6UXVpY2sgVmlldyB8IEN0cmwrQjpzYXZlIGJtIHwgQWx0K0I6bG9hZCBibScK
ICAgICAgICApCiAgICAgICAgc2VsZi5yZXN1bHRfdGV4dCA9IHVyd2lkLlRleHQoJycpCgogICAg
ICAgICMg0KHQvtC30LTQsNC10LwgQXR0ck1hcCDQuCDRgdC+0YXRgNCw0L3Rj9C10Lwg0YHRgdGL
0LvQutGDINCyIHNlbGYucmVzdWx0X21hcAogICAgICAgIHNlbGYucmVzdWx0X21hcCA9IHVyd2lk
LkF0dHJNYXAoc2VsZi5yZXN1bHRfdGV4dCwgJ3Jlc3VsdCcpCgogICAgICAgICMg0JjRgdC/0L7Q
u9GM0LfRg9C10Lwg0YHQvtGF0YDQsNC90LXQvdC90YPRjiDQv9C10YDQtdC80LXQvdC90YPRjiDQ
v9GA0Lgg0YHQvtC30LTQsNC90LjQuCBQaWxlCiAgICAgICAgc3RhdHVzX2NvbnRlbnQgPSB1cndp
ZC5QaWxlKFsKICAgICAgICAgICAgKCdwYWNrJywgc2VsZi5yZXN1bHRfbWFwKSwKICAgICAgICAg
ICAgKCdwYWNrJywgdXJ3aWQuQXR0ck1hcChzZWxmLmhvdGtleV90ZXh0LCAnc3RhdHVzJykpCiAg
ICAgICAgXSkKCiAgICAgICAgIyBzdGF0dXNfY29udGVudCA9IHVyd2lkLlBpbGUoWwogICAgICAg
ICMgICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAoc2VsZi5yZXN1bHRfdGV4dCwgJ3Jlc3VsdCcp
KSwKICAgICAgICAjICAgICAoJ3BhY2snLCB1cndpZC5BdHRyTWFwKHNlbGYuaG90a2V5X3RleHQs
ICdzdGF0dXMnKSkKICAgICAgICAjIF0pCgogICAgICAgIHNlbGYuZnJhbWUgPSB1cndpZC5GcmFt
ZSgKICAgICAgICAgICAgdXJ3aWQuQXR0ck1hcChzZWxmLmNvbHVtbnMsICdib2R5JyksCiAgICAg
ICAgICAgIGZvb3Rlcj1zdGF0dXNfY29udGVudAogICAgICAgICkKCiAgICAgICAgc2VsZi5tYWlu
X3dpZGdldCA9IHNlbGYuZnJhbWUKCiAgICAgICAgc2VsZi5wYWxldHRlID0gWwogICAgICAgICAg
ICAoJ2hlYWRlcicsICdibGFjaycsICdsaWdodCBjeWFuJywgJ2JvbGQnKSwKICAgICAgICAgICAg
KCdwYXRoJywgJ3doaXRlJywgJ2RhcmsgY3lhbicpLAogICAgICAgICAgICAoJ21vZGUnLCAnYmxh
Y2snLCAnbGlnaHQgY3lhbicpLAogICAgICAgICAgICAoJ2JvZHknLCAnd2hpdGUnLCAnZGFyayBi
bHVlJyksCiAgICAgICAgICAgICgnZmlsZScsICdsaWdodCBncmF5JywgJ2RhcmsgYmx1ZScpLAog
ICAgICAgICAgICAoJ3NlbGVjdGVkJywgJ2JsYWNrJywgJ2xpZ2h0IGN5YW4nKSwKICAgICAgICAg
ICAgKCdzdGF0dXMnLCAnYmxhY2snLCAnbGlnaHQgY3lhbicpLAogICAgICAgICAgICAoJ3Jlc3Vs
dCcsICd5ZWxsb3cnLCAnZGFyayBibHVlJyksICAjINCe0LHRi9GH0L3Ri9C5CiAgICAgICAgICAg
ICgncmVzdWx0X2Vycm9yJywgJ3doaXRlJywgJ2RhcmsgcmVkJyksICAjINCe0YjQuNCx0LrQsAog
ICAgICAgICAgICAoJ3Jlc3VsdF93YXJuJywgJ2JsYWNrJywgJ3llbGxvdycpLCAgIyDQn9GA0LXQ
tNGD0L/RgNC10LbQtNC10L3QuNC1CiAgICAgICAgICAgICgnZGlhbG9nJywgJ2JsYWNrJywgJ2xp
Z2h0IGdyYXknKSwKICAgICAgICAgICAgKCdkaWFsb2dmNCcsICd3aGl0ZScsICdkYXJrIGJsdWUn
KSwKICAgICAgICAgICAgKCdkaWFsb2dfdGl0bGUnLCAnYmxhY2snLCAnbGlnaHQgY3lhbicpLAog
ICAgICAgICAgICAoJ2VkaXQnLCAnYmxhY2snLCAnbGlnaHQgY3lhbicpLAogICAgICAgICAgICAo
J2VkaXRfZm9jdXMnLCAnd2hpdGUnLCAnZGFyayBjeWFuJyksCiAgICAgICAgICAgICgnYnV0dG9u
JywgJ2JsYWNrJywgJ2xpZ2h0IGdyYXknKSwKICAgICAgICAgICAgKCdidXR0b25fZm9jdXMnLCAn
d2hpdGUnLCAnZGFyayBjeWFuJyksCiAgICAgICAgICAgICgnZXJyb3InLCAnbGlnaHQgcmVkJywg
J2RhcmsgYmx1ZScpLAogICAgICAgICAgICAoJ2luZm9fbmFtZScsICd5ZWxsb3cnLCAnZGFyayBi
bHVlJyksCiAgICAgICAgICAgICgnaW5mb192YWx1ZScsICd3aGl0ZScsICdkYXJrIGJsdWUnKSwK
ICAgICAgICBdCgogICAgICAgICMg0J/QtdGA0LXQvNC10L3QvdCw0Y8g0LTQu9GPINGA0LXQttC4
0LzQsCAi0L/QtdGA0LXQt9Cw0L/QuNGB0LDRgtGMINCy0YHQtSIKICAgICAgICBzZWxmLm92ZXJ3
cml0ZV9hbGwgPSBGYWxzZQogICAgICAgIHNlbGYudmVyc2lvbl9hbGwgPSBGYWxzZQogICAgICAg
IHNlbGYuc2tpcF9hbGwgPSBGYWxzZQogICAgICAgIGlmIHBsYXRmb3JtLnN5c3RlbSgpICE9ICdX
aW5kb3dzJzoKICAgICAgICAgICAgc2VsZi5waXBlX3IsIHNlbGYucGlwZV93ID0gb3MucGlwZSgp
CiAgICAgICAgICAgIHNlbGYudXNlX3BpcGUgPSBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAg
ICAgc2VsZi51c2VfcGlwZSA9IEZhbHNlCgogICAgZGVmIHdha2V1cChzZWxmKToKICAgICAgICAi
IiLQn9GA0LjQvdGD0LTQuNGC0LXQu9GM0L3QviDRgNCw0LfQsdGD0LTQuNGC0YwgTWFpbkxvb3Ag
0LjQtyDQtNGA0YPQs9C+0LPQviDQv9C+0YLQvtC60LAiIiIKICAgICAgICBpZiBzZWxmLnVzZV9w
aXBlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBvcy53cml0ZShzZWxmLnBpcGVf
dywgYichJykKICAgICAgICAgICAgZXhjZXB0IChPU0Vycm9yLCBBdHRyaWJ1dGVFcnJvcik6CiAg
ICAgICAgICAgICAgICBwYXNzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBGYWxsYmFjayDQ
tNC70Y8gV2luZG93cyDQuNC70Lgg0LXRgdC70LggcGlwZSDQvdC1INC90LDRgdGC0YDQvtC10L0K
ICAgICAgICAgICAgIyDQrdGC0L4g0LzQtdC90LXQtSDRjdGE0YTQtdC60YLQuNCy0L3Qviwg0L3Q
viDQu9GD0YfRiNC1LCDRh9C10Lwg0L3QuNGH0LXQs9C+CiAgICAgICAgICAgIHBhc3MKCiAgICBk
ZWYgcnVuKHNlbGYpOgogICAgICAgICMg0KHQvtC30LTQsNC10Lwg0Y3QutGA0LDQvSDRgSDRj9Cy
0L3QvtC5INC/0L7QtNC00LXRgNC20LrQvtC5IFVURi04CiAgICAgICAgc2NyZWVuID0gdXJ3aWQu
cmF3X2Rpc3BsYXkuU2NyZWVuKCkKICAgICAgICBzY3JlZW4uc2V0X3Rlcm1pbmFsX3Byb3BlcnRp
ZXMoY29sb3JzPTI1NikKCiAgICAgICAgdXJ3aWQuc2V0X2VuY29kaW5nKCd1dGYtOCcpCgogICAg
ICAgIHNlbGYubG9vcCA9IHVyd2lkLk1haW5Mb29wKAogICAgICAgICAgICBzZWxmLm1haW5fd2lk
Z2V0LAogICAgICAgICAgICBwYWxldHRlPXNlbGYucGFsZXR0ZSwKICAgICAgICAgICAgdW5oYW5k
bGVkX2lucHV0PXNlbGYuaGFuZGxlX2lucHV0LAogICAgICAgICAgICBzY3JlZW49c2NyZWVuCiAg
ICAgICAgKQogICAgICAgIGlmIHBsYXRmb3JtLnN5c3RlbSgpID09ICdXaW5kb3dzJzoKICAgICAg
ICAgICAgIyDQktC60LvRjtGH0LDQtdC8ICLRgdC10YDQtNGG0LXQsdC40LXQvdC40LUiINC00LvR
jyBXaW5kb3dzLCDRh9GC0L7QsdGLINC40L3RgtC10YDRhNC10LnRgSDQvdC1INC30LDQstC40YHQ
sNC7CiAgICAgICAgICAgIHNlbGYubG9vcC5zZXRfYWxhcm1faW4oMC4xLCBzZWxmLl93aW5kb3dz
X2hlYXJ0YmVhdCkKICAgICAgICAjINCf0YvRgtCw0LXQvNGB0Y8g0LjRgdC/0L7Qu9GM0LfQvtCy
0LDRgtGMINC/0LDQudC/ICjQtNC70Y8gTGludXgpLCDQvdC+INC40LPQvdC+0YDQuNGA0YPQtdC8
INC+0YjQuNCx0LrQuCDQvdCwIFdpbmRvd3MKICAgICAgICBpZiBzZWxmLnVzZV9waXBlOgogICAg
ICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzZWxmLmxvb3Aud2F0Y2hfZmlsZShzZWxmLnBp
cGVfciwgc2VsZi5sb29wX3dha2V1cF9jYWxsYmFjaykKICAgICAgICAgICAgZXhjZXB0IEV4Y2Vw
dGlvbjoKICAgICAgICAgICAgICAgIHBhc3MgICMg0J3QsCBXaW5kb3dzIHdhdGNoX2ZpbGUg0LTQ
u9GPINC/0LDQudC/0L7QsiDQvdC1INGA0LDQsdC+0YLQsNC10YIsINGB0YDQsNCx0L7RgtCw0LXR
giBoZWFydGJlYXQKCiAgICAgICAgc2VsZi5sb29wLnJ1bigpCgogICAgZGVmIGNvbmZpcm1fZXhp
dChzZWxmKToKICAgICAgICAiIiLQn9C+0LrQsNC30YvQstCw0LXRgiDQtNC40LDQu9C+0LMg0L/Q
vtC00YLQstC10YDQttC00LXQvdC40Y8g0LLRi9GF0L7QtNCwINC40Lcg0L/RgNC+0LPRgNCw0LzQ
vNGLLiIiIgogICAgICAgIGRlZiBjYWxsYmFjayhjb25maXJtZWQpOgogICAgICAgICAgICBzZWxm
LmNsb3NlX2RpYWxvZygpCiAgICAgICAgICAgIGlmIGNvbmZpcm1lZDoKICAgICAgICAgICAgICAg
IHJhaXNlIHVyd2lkLkV4aXRNYWluTG9vcCgpCgogICAgICAgIGRpYWxvZyA9IENvbmZpcm1EaWFs
b2coCiAgICAgICAgICAgICJRdWl0IiwKICAgICAgICAgICAgIkRvIHlvdSByZWFsbHkgd2FudCB0
byBxdWl0PyIsCiAgICAgICAgICAgIFtdLAogICAgICAgICAgICBjYWxsYmFjaywKICAgICAgICAg
ICAgZm9jdXNfeWVzPVRydWUKICAgICAgICApCiAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhkaWFs
b2csIHdpZHRoPSgncmVsYXRpdmUnLCA0MCksIGhlaWdodD0oJ3JlbGF0aXZlJywgMTApKQoKICAg
IGRlZiB0b2dnbGVfcHJldmlld19tb2RlKHNlbGYpOgogICAgICAgIHNlbGYucHJldmlld19tb2Rl
ID0gbm90IHNlbGYucHJldmlld19tb2RlCiAgICAgICAgaWYgc2VsZi5wcmV2aWV3X21vZGU6CiAg
ICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoIlByZXZpZXcgTW9kZTogT04iKQogICAgICAgICAg
ICBzZWxmLnVwZGF0ZV9wcmV2aWV3KCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLnNo
b3dfcmVzdWx0KCJQcmV2aWV3IE1vZGU6IE9GRiIpCiAgICAgICAgICAgICMg0J7Rh9C40YnQsNC1
0Lwg0L3QtdCw0LrRgtC40LLQvdGD0Y4g0L/QsNC90LXQu9GMICjQuNC70Lgg0LLQvtGB0YHRgtCw
0L3QsNCy0LvQuNCy0LDQtdC8INC10ZEg0YHQvtGB0YLQvtGP0L3QuNC1PykKICAgICAgICAgICAg
IyDQntCx0YvRh9C90L4gUXVpY2tMb29rINC/0YDQvtGB0YLQviDQv9C10YDQtdC60YDRi9Cy0LDQ
tdGCINC90LXQsNC60YLQuNCy0L3Rg9GOINC/0LDQvdC10LvRjCDQuNC70Lgg0LjRgdC/0L7Qu9GM
0LfRg9C10YIg0LXRkS4KICAgICAgICAgICAgIyDQldGB0LvQuCDQvNGLINC40YHQv9C+0LvRjNC3
0YPQtdC8INC90LXQsNC60YLQuNCy0L3Rg9GOINC/0LDQvdC10LvRjCwg0L3QsNC8INC90YPQttC9
0L4g0LXQtSAi0LfQsNC80L7RgNC+0LfQuNGC0YwiINC40LvQuCDQstGA0LXQvNC10L3QvdC+INC3
0LDQvNC10L3QuNGC0Ywg0LrQvtC90YLQtdC90YIuCgogICAgICAgICAgICAjINCf0YDQvtGB0YLQ
tdC50YjQuNC5INCy0LDRgNC40LDQvdGCOiDQstC10YDQvdGD0YLRjCDQvdC10LDQutGC0LjQstC9
0YPRjiDQv9Cw0L3QtdC70Ywg0LIg0L3QvtGA0LzQsNC70YzQvdGL0Lkg0YDQtdC20LjQvCAo0L7Q
sdC90L7QstC40YLRjCkKICAgICAgICAgICAgaW5hY3RpdmUgPSBzZWxmLmdldF9pbmFjdGl2ZV9w
YW5lbCgpCiAgICAgICAgICAgIGluYWN0aXZlLnJlZnJlc2goKSAgIyDQktC+0YHRgdGC0LDQvdC+
0LLQuNGCINGB0L/QuNGB0L7QuiDRhNCw0LnQu9C+0LIKCiAgICBkZWYgdXBkYXRlX3ByZXZpZXco
c2VsZik6CiAgICAgICAgaWYgbm90IHNlbGYucHJldmlld19tb2RlOgogICAgICAgICAgICByZXR1
cm4KCiAgICAgICAgYWN0aXZlX3BhbmVsID0gc2VsZi5nZXRfYWN0aXZlX3BhbmVsKCkKICAgICAg
ICBpbmFjdGl2ZV9wYW5lbCA9IHNlbGYuZ2V0X2luYWN0aXZlX3BhbmVsKCkKCiAgICAgICAgaXRl
bSA9IGFjdGl2ZV9wYW5lbC5nZXRfZm9jdXNlZF9pdGVtKCkKICAgICAgICBpZiBub3QgaXRlbToK
ICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgbm90IGl0ZW0gb3IgaXRlbVsndHlwZSddIG5v
dCBpbiAoJ2ZzX2ZpbGUnLCAnczNfZmlsZScpOgogICAgICAgICAgICBzZWxmLl9zaG93X3ByZXZp
ZXdfdGV4dChpbmFjdGl2ZV9wYW5lbCwgIiIsIHRpdGxlPSJQcmV2aWV3IikKICAgICAgICAgICAg
cmV0dXJuCgogICAgICAgIHRyeToKICAgICAgICAgICAgc2l6ZSA9IGludChpdGVtLmdldCgnc2l6
ZScsIDApKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgc2l6ZSA9IDAKCiAgICAgICAgaWYg
c2l6ZSA+IDEwMjQgKiAxMDA6CiAgICAgICAgICAgIHNlbGYuX3Nob3dfcHJldmlld190ZXh0KGlu
YWN0aXZlX3BhbmVsLCAiRmlsZSB0b28gbGFyZ2UgZm9yIHByZXZpZXciLCB0aXRsZT0iUHJldmll
dyIpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBjb250ZW50ID0gIiIKICAgICAgICBpbmZv
X3RleHQgPSBmIlBSRVZJRVc6IHtpdGVtWyduYW1lJ119IgogICAgICAgIGxvY2FsX3BhdGggPSBO
b25lCiAgICAgICAgdGVtcF9maWxlX3BhdGggPSBOb25lCgogICAgICAgIHRyeToKICAgICAgICAg
ICAgIyAxLiDQn9C+0LvRg9GH0LDQtdC8INC/0YPRgtGMINC6INGE0LDQudC70YMKICAgICAgICAg
ICAgaWYgaXRlbVsndHlwZSddID09ICdmc19maWxlJzoKICAgICAgICAgICAgICAgIGxvY2FsX3Bh
dGggPSBvcy5wYXRoLmpvaW4oYWN0aXZlX3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCBp
dGVtWyduYW1lJ10pCgogICAgICAgICAgICBlbGlmIGl0ZW1bJ3R5cGUnXSA9PSAnczNfZmlsZSc6
CiAgICAgICAgICAgICAgICBpbXBvcnQgdGVtcGZpbGUKICAgICAgICAgICAgICAgICMg0KHQvtC3
0LTQsNC10Lwg0LLRgNC10LzQtdC90L3Ri9C5INGE0LDQudC7CiAgICAgICAgICAgICAgICBmZCwg
dGVtcF9maWxlX3BhdGggPSB0ZW1wZmlsZS5ta3N0ZW1wKCkKICAgICAgICAgICAgICAgIG9zLmNs
b3NlKGZkKQoKICAgICAgICAgICAgICAgIGFjdGl2ZV9wYW5lbC5zM19tYW5hZ2VyLmRvd25sb2Fk
X29iamVjdCgKICAgICAgICAgICAgICAgICAgICBhY3RpdmVfcGFuZWwuY3VycmVudF9idWNrZXQs
CiAgICAgICAgICAgICAgICAgICAgaXRlbVsna2V5J10sCiAgICAgICAgICAgICAgICAgICAgdGVt
cF9maWxlX3BhdGgKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGxvY2FsX3BhdGgg
PSB0ZW1wX2ZpbGVfcGF0aAogICAgICAgICAgICAgICAgaW5mb190ZXh0ID0gZiJQUkVWSUVXIChT
Myk6IHtpdGVtWyduYW1lJ119IgoKICAgICAgICAgICAgIyAyLiDQp9C40YLQsNC10Lwg0LrQvtC9
0YLQtdC90YIKICAgICAgICAgICAgaWYgbG9jYWxfcGF0aCBhbmQgb3MucGF0aC5leGlzdHMobG9j
YWxfcGF0aCk6CiAgICAgICAgICAgICAgICAjINCf0YDQvtCy0LXRgNGP0LXQvCDQvdCwINCx0LjQ
vdCw0YDQvdC+0YHRgtGMICjRhNGD0L3QutGG0LjRjyDQs9C70L7QsdCw0LvRjNC90LDRjyDQuNC7
0Lgg0LzQtdGC0L7QtNCwINC60LvQsNGB0YHQsCkKICAgICAgICAgICAgICAgIGlmIGlzX2JpbmFy
eV9maWxlKGxvY2FsX3BhdGgpOgogICAgICAgICAgICAgICAgICAgIHdpdGggb3Blbihsb2NhbF9w
YXRoLCAncmInKSBhcyBmOgogICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gZi5yZWFkKDIw
NDgpCiAgICAgICAgICAgICAgICAgICAgICAgICMg0JLQq9CX0J7QkiDQpNCj0J3QmtCm0JjQmCDQ
pNCe0KDQnNCQ0KLQmNCg0J7QktCQ0J3QmNCvCiAgICAgICAgICAgICAgICAgICAgICAgICMg0JXR
gdC70LggZm9ybWF0X2hleF9jb250ZW50INGN0YLQviDQvNC10YLQvtC0INC60LvQsNGB0YHQsCBE
dWFsUGFuZUFwcDoKICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IHNlbGYuZm9ybWF0
X2hleF9jb250ZW50KGRhdGEpCgogICAgICAgICAgICAgICAgICAgICAgICBpZiBzaXplID4gMjA0
ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gIlxuLi4uIFRydW5jYXRl
ZCAuLi4iCiAgICAgICAgICAgICAgICAgICAgaW5mb190ZXh0ICs9ICIgW0hFWF0iCiAgICAgICAg
ICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMg0KLQtdC60YHRgtC+0LLRi9C5INGA
0LXQttC40LwKICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4obG9jYWxfcGF0aCwgJ3InLCBl
bmNvZGluZz0ndXRmLTgnLCBlcnJvcnM9J3JlcGxhY2UnKSBhcyBmOgogICAgICAgICAgICAgICAg
ICAgICAgICBjb250ZW50ID0gZi5yZWFkKDIwMDApCgogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24g
YXMgZToKICAgICAgICAgICAgY29udGVudCA9IGYiRXJyb3IgZ2VuZXJhdGluZyBwcmV2aWV3OiB7
ZX0iCgogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICMg0KPQtNCw0LvRj9C10Lwg0LLRgNC1
0LzQtdC90L3Ri9C5INGE0LDQudC7CiAgICAgICAgICAgIGlmIHRlbXBfZmlsZV9wYXRoIGFuZCBv
cy5wYXRoLmV4aXN0cyh0ZW1wX2ZpbGVfcGF0aCk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAg
ICAgICAgICAgICAgICAgb3MudW5saW5rKHRlbXBfZmlsZV9wYXRoKQogICAgICAgICAgICAgICAg
ZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgc2VsZi5fc2hvd19wcmV2
aWV3X3RleHQoaW5hY3RpdmVfcGFuZWwsIGNvbnRlbnQsIHRpdGxlPWluZm9fdGV4dCkKCiAgICBk
ZWYgZm9ybWF0X2hleF9jb250ZW50KHNlbGYsIGRhdGEsIG9mZnNldD0wKToKICAgICAgICAiIiLQ
pNC+0YDQvNCw0YLQuNGA0YPQtdGCINCx0LDQudGC0Ysg0LIgaGV4LdCy0LjQtCAo0LrQsNC6INCy
IG1jKSIiIgogICAgICAgIGxpbmVzID0gW10KICAgICAgICBmb3IgaSBpbiByYW5nZSgwLCBsZW4o
ZGF0YSksIDE2KToKICAgICAgICAgICAgY2h1bmsgPSBkYXRhW2k6aSArIDE2XQoKICAgICAgICAg
ICAgIyAxLiDQodC80LXRidC10L3QuNC1CiAgICAgICAgICAgIGxpbmVfb2Zmc2V0ID0gZiJ7b2Zm
c2V0ICsgaTowOFh9IgoKICAgICAgICAgICAgIyAyLiBIRVgg0YfQsNGB0YLRjCAo0LPRgNGD0L/Q
v9Cw0LzQuCDQv9C+IDQg0LHQsNC50YLQsCwg0LrQsNC6INCyINC/0YDQuNC80LXRgNC1KQogICAg
ICAgICAgICBoZXhfcGFydHMgPSBbXQogICAgICAgICAgICBmb3IgaiBpbiByYW5nZSgwLCBsZW4o
Y2h1bmspLCA0KToKICAgICAgICAgICAgICAgIGdyb3VwID0gY2h1bmtbajpqICsgNF0KICAgICAg
ICAgICAgICAgIGhleF9ncm91cCA9ICIgIi5qb2luKGYie2I6MDJYfSIgZm9yIGIgaW4gZ3JvdXAp
CiAgICAgICAgICAgICAgICBoZXhfcGFydHMuYXBwZW5kKGhleF9ncm91cCkKCiAgICAgICAgICAg
ICMg0KHQvtCx0LjRgNCw0LXQvCBoZXgg0YHRgtGA0L7QutGDINC4INC00L7Qv9C+0LvQvdGP0LXQ
vCDQv9GA0L7QsdC10LvQsNC80Lgg0LTQviDRhNC40LrRgdC40YDQvtCy0LDQvdC90L7QuSDRiNC4
0YDQuNC90YsgKDQg0LPRgNGD0L/Qv9GLINC/0L4gfjExINGB0LjQvNCy0L7Qu9C+0LIgKyDQvtGC
0YHRgtGD0L/RiykKICAgICAgICAgICAgIyAxNiDQsdCw0LnRgiA9IDQg0LPRgNGD0L/Qv9GLLiDQ
lNC70LjQvdCwINC/0L7Qu9C90L7QuSDRgdGC0YDQvtC60Lg6IDExKjQgKyAzKjIgKNC/0YDQvtCx
0LXQu9GLKSA9IDUwPwogICAgICAgICAgICAjINCf0YDQvtGJ0LUg0LjRgdC/0L7Qu9GM0LfQvtCy
0LDRgtGMINGE0LjQutGB0LjRgNC+0LLQsNC90L3Ri9C5INC+0YLRgdGC0YPQvy4KICAgICAgICAg
ICAgaGV4X3N0ciA9ICIgICIuam9pbihoZXhfcGFydHMpCgogICAgICAgICAgICAjIDMuIEFTQ0lJ
INGH0LDRgdGC0YwKICAgICAgICAgICAgYXNjaWlfc3RyID0gIiIKICAgICAgICAgICAgZm9yIGIg
aW4gY2h1bms6CiAgICAgICAgICAgICAgICBpZiAzMiA8PSBiIDw9IDEyNjogICMg0J/QtdGH0LDR
gtC90YvQtSDRgdC40LzQstC+0LvRiwogICAgICAgICAgICAgICAgICAgIGFzY2lpX3N0ciArPSBj
aHIoYikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYXNjaWlfc3Ry
ICs9ICIuIgoKICAgICAgICAgICAgIyDQpNC+0YDQvNC40YDRg9C10Lwg0YHRgtGA0L7QutGDOiBP
ZmZzZXQgIEhleCAgQXNjaWkKICAgICAgICAgICAgIyA8NDkg0LPQsNGA0LDQvdGC0LjRgNGD0LXR
giDQstGL0YDQsNCy0L3QuNCy0LDQvdC40LUsINC10YHQu9C4INGB0YLRgNC+0LrQsCDQutC+0YDQ
vtGH0LUgMTYg0LHQsNC50YIKICAgICAgICAgICAgbGluZXMuYXBwZW5kKGYie2xpbmVfb2Zmc2V0
fSB7aGV4X3N0cjo8NDl9IHthc2NpaV9zdHJ9IikKCiAgICAgICAgcmV0dXJuICJcbiIuam9pbihs
aW5lcykKCiAgICBkZWYgX3Nob3dfcHJldmlld190ZXh0KHNlbGYsIHBhbmVsLCB0ZXh0LCB0aXRs
ZT0iUHJldmlldyIpOgogICAgICAgICMg0JfQsNC80LXQvdGP0LXQvCDRgdC+0LTQtdGA0LbQuNC8
0L7QtSDQv9Cw0L3QtdC70Lgg0L3QsCDRgtC10LrRgdGCCiAgICAgICAgIyDQnNGLINC90LUg0YXQ
vtGC0LjQvCDQu9C+0LzQsNGC0YwgUGFuZWxXaWRnZXQsINC/0L7RjdGC0L7QvNGDINC/0YDQvtGB
0YLQviDQv9C+0LTQvNC10L3QuNC8INGB0L/QuNGB0L7QuiDQvdCwIFRleHRXaWRnZXQKICAgICAg
ICAjINCd0L4gUGFuZWxXaWRnZXQg0L7QttC40LTQsNC10YIgTGlzdEJveC4KCiAgICAgICAgIyDQ
odC+0LfQtNCw0LXQvCDQstGA0LXQvNC10L3QvdGL0Lkgd2Fsa2VyINGBINC+0LTQvdC40Lwg0Y3Q
u9C10LzQtdC90YLQvtC8IFRleHQKICAgICAgICBwcmV2aWV3X3dpZGdldCA9IHVyd2lkLlRleHQo
dGV4dCkKICAgICAgICAjINCe0LHQvtGA0LDRh9C40LLQsNC10Lwg0LIgTGlzdEJveCwg0YfRgtC+
0LHRiyBQYW5lbFdpZGdldCDQvdC1INGD0L/QsNC7INC/0YDQuCDRgNC10YHQsNC50LfQtSDQuNC7
0Lgg0YTQvtC60YPRgdC1CiAgICAgICAgcGFuZWwud2Fsa2VyLmNsZWFyKCkKICAgICAgICBwYW5l
bC53YWxrZXIuYXBwZW5kKHByZXZpZXdfd2lkZ2V0KQogICAgICAgIHBhbmVsLmhlYWRlcl90ZXh0
LnNldF90ZXh0KHRpdGxlKQoKICAgICAgICBwYW5lbC5wYXRoX3RleHQuc2V0X3RleHQoIiIpICAj
INCe0YfQuNGJ0LDQtdC8INC/0YPRgtGMLCDRh9GC0L7QsdGLINC90LUg0YHQsdC40LLQsNC70L4K
CiAgICBkZWYgYWRkX2N1cnJlbnRfdG9fYm9va21hcmtzKHNlbGYpOgogICAgICAgIGlmIHNlbGYu
bG9vcC53aWRnZXQgIT0gc2VsZi5tYWluX3dpZGdldDoKICAgICAgICAgICAgcmV0dXJuCgogICAg
ICAgIHBhbmVsID0gc2VsZi5nZXRfYWN0aXZlX3BhbmVsKCkKCiAgICAgICAgYm9va21hcmtfZGF0
YSA9IHt9CiAgICAgICAgZGVmYXVsdF9uYW1lID0gIiIKCiAgICAgICAgaWYgcGFuZWwubW9kZSA9
PSAnZnMnOgogICAgICAgICAgICBwYXRoID0gcGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgK
ICAgICAgICAgICAgYm9va21hcmtfZGF0YSA9IHsndHlwZSc6ICdmcycsICdwYXRoJzogcGF0aH0K
ICAgICAgICAgICAgIyBkZWZhdWx0X25hbWUgPSBvcy5wYXRoLmJhc2VuYW1lKHBhdGgpIG9yIHBh
dGgKICAgICAgICAgICAgZGVmYXVsdF9uYW1lID0gcGF0aAogICAgICAgIGVsaWYgcGFuZWwubW9k
ZSA9PSAnczMnOgogICAgICAgICAgICBpZiBub3QgcGFuZWwuY3VycmVudF9lbmRwb2ludDoKICAg
ICAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoIkNhbm5vdCBib29rbWFyayByb290IGxpc3Qi
LCAiZXJyb3IiKQogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICBib29rbWFya19k
YXRhID0gewogICAgICAgICAgICAgICAgJ3R5cGUnOiAnczMnLAogICAgICAgICAgICAgICAgJ2Vu
ZHBvaW50JzogcGFuZWwuY3VycmVudF9lbmRwb2ludCwgICMg0JjQvNGPINGN0L3QtNC/0L7QuNC9
0YLQsAogICAgICAgICAgICAgICAgJ2J1Y2tldCc6IHBhbmVsLmN1cnJlbnRfYnVja2V0LAogICAg
ICAgICAgICAgICAgJ3ByZWZpeCc6IHBhbmVsLmN1cnJlbnRfcHJlZml4CiAgICAgICAgICAgIH0K
ICAgICAgICAgICAgIyDQpNC+0YDQvNC40YDRg9C10Lwg0LrRgNCw0YHQuNCy0L7QtSDQuNC80Y8K
ICAgICAgICAgICAgaWYgcGFuZWwuY3VycmVudF9idWNrZXQ6CiAgICAgICAgICAgICAgICBkZWZh
dWx0X25hbWUgPSBmIlt7cGFuZWwuY3VycmVudF9lbmRwb2ludH1dIC97cGFuZWwuY3VycmVudF9i
dWNrZXR9IgogICAgICAgICAgICAgICAgaWYgcGFuZWwuY3VycmVudF9wcmVmaXg6CiAgICAgICAg
ICAgICAgICAgICAgZGVmYXVsdF9uYW1lICs9IGYiL3twYW5lbC5jdXJyZW50X3ByZWZpeH0iCiAg
ICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBkZWZhdWx0X25hbWUgPSBmIlt7cGFuZWwu
Y3VycmVudF9lbmRwb2ludH1dIgoKICAgICAgICBkZWYgb25fY29uZmlybShjb25maXJtZWQsIG5h
bWUpOgogICAgICAgICAgICBzZWxmLmNsb3NlX2RpYWxvZygpCiAgICAgICAgICAgIGlmIGNvbmZp
cm1lZCBhbmQgbmFtZToKICAgICAgICAgICAgICAgIHNlbGYuYm9va21hcmtzX21hbmFnZXIuYWRk
KG5hbWUsIGJvb2ttYXJrX2RhdGEpCiAgICAgICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KGYi
Qm9va21hcmsgJ3tuYW1lfScgYWRkZWQiKQoKICAgICAgICBkaWFsb2cgPSBJbnB1dERpYWxvZygi
QWRkIEJvb2ttYXJrIiwgIk5hbWU6Iiwgb25fY29uZmlybSwgZGVmYXVsdF90ZXh0PWRlZmF1bHRf
bmFtZSkKICAgICAgICBzZWxmLnNob3dfZGlhbG9nKGRpYWxvZykKCiAgICBkZWYgc2hvd19ib29r
bWFya3NfZGlhbG9nKHNlbGYpOgogICAgICAgIGlmIHNlbGYubG9vcC53aWRnZXQgIT0gc2VsZi5t
YWluX3dpZGdldDoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICMg0J/QvtC70YPRh9Cw0LXQ
vCDQsNC60YLRg9Cw0LvRjNC90YvQuSDRgdC/0LjRgdC+0LogKNC+0L0g0LzQvtC20LXRgiDQvNC1
0L3Rj9GC0YzRgdGPKQogICAgICAgIGJvb2ttYXJrcyA9IHNlbGYuYm9va21hcmtzX21hbmFnZXIu
Ym9va21hcmtzCiAgICAgICAgaWYgbm90IGJvb2ttYXJrczoKICAgICAgICAgICAgc2VsZi5zaG93
X3Jlc3VsdCgiTm8gYm9va21hcmtzIGZvdW5kIiwgIndhcm5pbmciKQogICAgICAgICAgICByZXR1
cm4KCiAgICAgICAgZGVmIHNlbGVjdF9jYWxsYmFjayhibV9kYXRhKToKICAgICAgICAgICAgc2Vs
Zi5jbG9zZV9kaWFsb2coKQogICAgICAgICAgICBpZiBibV9kYXRhOgogICAgICAgICAgICAgICAg
c2VsZi5qdW1wX3RvX2Jvb2ttYXJrKGJtX2RhdGEpCgogICAgICAgIGRlZiByZW1vdmVfaGFuZGxl
cihpbmRleCk6CiAgICAgICAgICAgICMgMS4g0JfQsNC/0L7QvNC40L3QsNC10LwsINC60LDQutGD
0Y4g0LfQsNC60LvQsNC00LrRgyDRg9C00LDQu9GP0LXQvAogICAgICAgICAgICBibV90b19kZWxl
dGUgPSBib29rbWFya3NbaW5kZXhdCgogICAgICAgICAgICAjIDIuINCe0L/RgNC10LTQtdC70Y/Q
tdC8INGE0YPQvdC60YbQuNGOINC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNGPCiAgICAgICAgICAg
IGRlZiBjb25maXJtX2NhbGxiYWNrKGNvbmZpcm1lZCk6CiAgICAgICAgICAgICAgICBzZWxmLmNs
b3NlX2RpYWxvZygpICAjINCX0LDQutGA0YvQstCw0LXQvCBDb25maXJtRGlhbG9nCgogICAgICAg
ICAgICAgICAgaWYgY29uZmlybWVkOgogICAgICAgICAgICAgICAgICAgIHNlbGYuYm9va21hcmtz
X21hbmFnZXIucmVtb3ZlKGluZGV4KQogICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1
bHQoZiJCb29rbWFyayAne2JtX3RvX2RlbGV0ZVsnbmFtZSddfScgZGVsZXRlZCIpCgogICAgICAg
ICAgICAgICAgIyAzLiDQkiDQm9Cu0JHQntCcINCh0JvQo9Cn0JDQlSDRgdC90L7QstCwINC+0YLQ
utGA0YvQstCw0LXQvCDQtNC40LDQu9C+0LMg0LfQsNC60LvQsNC00L7QugogICAgICAgICAgICAg
ICAgIyAo0YfRgtC+0LHRiyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LzQvtCzINC/0YDQvtC0
0L7Qu9C20LjRgtGMINGA0LDQsdC+0YLRgyDQuNC70Lgg0YPQstC40LTQtdGC0Ywg0L7QsdC90L7Q
stC70LXQvdC90YvQuSDRgdC/0LjRgdC+0LopCiAgICAgICAgICAgICAgICAjINCY0YHQv9C+0LvR
jNC30YPQtdC8IGFsYXJtLCDRh9GC0L7QsdGLINC00LDRgtGMIFVJINC+0YLQtNC+0YXQvdGD0YLR
jCAo0L7Qv9GG0LjQvtC90LDQu9GM0L3Qviwg0L3QviDQvdCw0LTQtdC20L3QtdC1KQogICAgICAg
ICAgICAgICAgc2VsZi5sb29wLnNldF9hbGFybV9pbigwLCBsYW1iZGEgKmE6IHNlbGYuc2hvd19i
b29rbWFya3NfZGlhbG9nKCkpCgogICAgICAgICAgICAjIDMuINCX0LDQutGA0YvQstCw0LXQvCDR
gtC10LrRg9GJ0LjQuSDQtNC40LDQu9C+0LMg0LfQsNC60LvQsNC00L7QugogICAgICAgICAgICBz
ZWxmLmNsb3NlX2RpYWxvZygpCgogICAgICAgICAgICAjIDQuINCf0L7QutCw0LfRi9Cy0LDQtdC8
INC00LjQsNC70L7QsyDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjRjwogICAgICAgICAgICBjb25m
aXJtX2RsZyA9IENvbmZpcm1EaWFsb2coCiAgICAgICAgICAgICAgICAiRGVsZXRlIEJvb2ttYXJr
IiwKICAgICAgICAgICAgICAgIGYiRGVsZXRlIGJvb2ttYXJrICd7Ym1fdG9fZGVsZXRlWyduYW1l
J119Jz8iLAogICAgICAgICAgICAgICAgW10sCiAgICAgICAgICAgICAgICBjb25maXJtX2NhbGxi
YWNrLAogICAgICAgICAgICAgICAgZm9jdXNfeWVzPUZhbHNlICAjINCR0LXQt9C+0L/QsNGB0L3Q
vjog0YTQvtC60YPRgSDQvdCwIE5vCiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZi5zaG93
X2RpYWxvZyhjb25maXJtX2RsZykKCiAgICAgICAgIyDQodC+0LfQtNCw0LXQvCDQuCDQv9C+0LrQ
sNC30YvQstCw0LXQvCDQtNC40LDQu9C+0LMKICAgICAgICBkaWFsb2cgPSBCb29rbWFya3NEaWFs
b2coYm9va21hcmtzLCBzZWxlY3RfY2FsbGJhY2ssIHJlbW92ZV9jYWxsYmFjaz1yZW1vdmVfaGFu
ZGxlcikKICAgICAgICBzZWxmLnNob3dfZGlhbG9nKGRpYWxvZywgd2lkdGg9KCdyZWxhdGl2ZScs
IDcwKSwgaGVpZ2h0PSgncmVsYXRpdmUnLCA2MCkpCgogICAgZGVmIGp1bXBfdG9fYm9va21hcmso
c2VsZiwgYm1fZGF0YSk6CiAgICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQogICAgICAgIHBhbmVs
ID0gc2VsZi5nZXRfYWN0aXZlX3BhbmVsKCkKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiBi
bV9kYXRhWyd0eXBlJ10gPT0gJ2ZzJzoKCiAgICAgICAgICAgICAgICAjINCY0L3QuNGG0LjQsNC7
0LjQt9C40YDRg9C10LwgZnNfYnJvd3Nlciwg0LXRgdC70Lgg0LXQs9C+INC90LXRggogICAgICAg
ICAgICAgICAgaWYgcGFuZWwuZnNfYnJvd3NlciBpcyBOb25lOgogICAgICAgICAgICAgICAgICAg
ICMg0KPQsdC10LTQuNGC0LXRgdGMLCDRh9GC0L4g0LrQu9Cw0YHRgSBGaWxlU3lzdGVtQnJvd3Nl
ciDQuNC80L/QvtGA0YLQuNGA0L7QstCw0L0g0LjQu9C4INC00L7RgdGC0YPQv9C10L0KICAgICAg
ICAgICAgICAgICAgICBwYW5lbC5mc19icm93c2VyID0gRmlsZVN5c3RlbUJyb3dzZXIoKQoKICAg
ICAgICAgICAgICAgIHBhbmVsLm1vZGUgPSAnZnMnCiAgICAgICAgICAgICAgICAjINCf0YDQvtCy
0LXRgNC60LAg0YHRg9GJ0LXRgdGC0LLQvtCy0LDQvdC40Y8g0L/Rg9GC0LgKICAgICAgICAgICAg
ICAgIGlmIG9zLnBhdGguZXhpc3RzKGJtX2RhdGFbJ3BhdGgnXSk6CiAgICAgICAgICAgICAgICAg
ICAgIyDQodCx0YDQsNGB0YvQstCw0LXQvCBTMyDRgdC/0LXRhtC40YTQuNGH0L3Ri9C1INC/0L7Q
u9GPINC00LvRjyDRh9C40YHRgtC+0YLRiyAo0L7Qv9GG0LjQvtC90LDQu9GM0L3QvikKICAgICAg
ICAgICAgICAgICAgICBwYW5lbC5jdXJyZW50X2J1Y2tldCA9IE5vbmUKICAgICAgICAgICAgICAg
ICAgICBwYW5lbC5jdXJyZW50X3ByZWZpeCA9ICIiCiAgICAgICAgICAgICAgICAgICAgcGFuZWwu
ZnNfYnJvd3Nlci5jdXJyZW50X3BhdGggPSBibV9kYXRhWydwYXRoJ10KICAgICAgICAgICAgICAg
ICAgICBwYW5lbC5yZWZyZXNoKCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAg
ICAgICAgc2VsZi5zaG93X3Jlc3VsdChmIlBhdGggbm90IGZvdW5kOiB7Ym1fZGF0YVsncGF0aCdd
fSIsICJlcnJvciIpCgogICAgICAgICAgICBlbGlmIGJtX2RhdGFbJ3R5cGUnXSA9PSAnczMnOgog
ICAgICAgICAgICAgICAgIyDQn9GA0L7QstC10YDRj9C10LwsINC10YHRgtGMINC70Lgg0YLQsNC6
0L7QuSDRjdC90LTQv9C+0LjQvdGCINCyINGC0LXQutGD0YnQtdC8INC60L7QvdGE0LjQs9C1CiAg
ICAgICAgICAgICAgICBlcF9jb25maWcgPSBzZWxmLnMzX2NvbmZpZy5nZXRfZW5kcG9pbnQoYm1f
ZGF0YVsnZW5kcG9pbnQnXSkKICAgICAgICAgICAgICAgIGlmIG5vdCBlcF9jb25maWc6CiAgICAg
ICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdChmIkVuZHBvaW50ICd7Ym1fZGF0YVsnZW5k
cG9pbnQnXX0nIG5vdCBmb3VuZCBpbiBjb25maWciLCAiZXJyb3IiKQogICAgICAgICAgICAgICAg
ICAgIHJldHVybgoKICAgICAgICAgICAgICAgIHBhbmVsLm1vZGUgPSAnczMnCiAgICAgICAgICAg
ICAgICBwYW5lbC5jdXJyZW50X2VuZHBvaW50ID0gYm1fZGF0YVsnZW5kcG9pbnQnXQogICAgICAg
ICAgICAgICAgcGFuZWwuZW5kcG9pbnRfY29uZmlnID0gZXBfY29uZmlnCiAgICAgICAgICAgICAg
ICAjINCY0L3QuNGG0LjQsNC70LjQt9C40YDRg9C10Lwg0LzQtdC90LXQtNC20LXRgCwg0LXRgdC7
0Lgg0YHQvNC10L3QuNC70YHRjyDRjdC90LTQv9C+0LjQvdGCCiAgICAgICAgICAgICAgICBwYW5l
bC5zM19tYW5hZ2VyID0gUzNNYW5hZ2VyKGVwX2NvbmZpZykKCiAgICAgICAgICAgICAgICBwYW5l
bC5jdXJyZW50X2J1Y2tldCA9IGJtX2RhdGEuZ2V0KCdidWNrZXQnKQogICAgICAgICAgICAgICAg
cGFuZWwuY3VycmVudF9wcmVmaXggPSBibV9kYXRhLmdldCgncHJlZml4JywgJycpCgogICAgICAg
ICAgICAgICAgcGFuZWwucmVmcmVzaCgpCgogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToK
ICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdChmIkVycm9yIGp1bXBpbmcgdG8gYm9va21hcms6
IHtzdHIoZSl9IiwgImVycm9yIikKCiAgICBkZWYgX3dpbmRvd3NfaGVhcnRiZWF0KHNlbGYsIGxv
b3A9Tm9uZSwgdXNlcl9kYXRhPU5vbmUpOgogICAgICAgICIiItCf0LXRgNC40L7QtNC40YfQtdGB
0LrQvtC1INC+0LHQvdC+0LLQu9C10L3QuNC1INGN0LrRgNCw0L3QsCDQtNC70Y8gV2luZG93cyIi
IgogICAgICAgIHNlbGYubG9vcC5kcmF3X3NjcmVlbigpCiAgICAgICAgIyDQn9C10YDQtdC30LDQ
v9GD0YHQutCw0LXQvCDRgtCw0LnQvNC10YAg0LrQsNC20LTRi9C1IDAuMSDRgdC10LrRg9C90LTR
iwogICAgICAgIHNlbGYubG9vcC5zZXRfYWxhcm1faW4oMC4xLCBzZWxmLl93aW5kb3dzX2hlYXJ0
YmVhdCkKCiAgICBkZWYgbG9vcF93YWtldXBfY2FsbGJhY2soc2VsZik6CiAgICAgICAgIiIiQ2Fs
bGJhY2sg0LTQu9GPINC/0YDQvtCx0YPQttC00LXQvdC40Y8gZXZlbnQgbG9vcCDRh9C10YDQtdC3
IHBpcGUiIiIKICAgICAgICBvcy5yZWFkKHNlbGYucGlwZV9yLCAxKQoKICAgIGRlZiB3YWtlX3Vw
KHNlbGYpOgogICAgICAgICIiItCc0LXRgtC+0LQg0LTQu9GPINCy0YvQt9C+0LLQsCDQuNC3INC0
0YDRg9Cz0LjRhSDQv9C+0YLQvtC60L7QsiIiIgogICAgICAgIGlmIHNlbGYudXNlX3BpcGU6CiAg
ICAgICAgICAgIG9zLndyaXRlKHNlbGYucGlwZV93LCBiJyEnKQogICAgICAgIGVsc2U6CiAgICAg
ICAgICAgIHNlbGYubG9vcC5zZXRfYWxhcm1faW4oMCwgbGFtYmRhIGxvb3AsIGRhdGE6IE5vbmUp
CgogICAgZGVmIGhhbmRsZV9pbnB1dChzZWxmLCBrZXkpOgogICAgICAgIGlmIGtleSBpbiAoJ3En
LCAnUScsICfQuScsICfQmScpOgogICAgICAgICAgICByYWlzZSB1cndpZC5FeGl0TWFpbkxvb3Ao
KQogICAgICAgIGVsaWYga2V5ID09ICdmMTAnOgogICAgICAgICAgICBzZWxmLmNvbmZpcm1fZXhp
dCgpCiAgICAgICAgZWxpZiBrZXkgPT0gJ3RhYic6CiAgICAgICAgICAgIGN1cnJlbnRfZm9jdXMg
PSBzZWxmLmNvbHVtbnMuZm9jdXNfcG9zaXRpb24KICAgICAgICAgICAgc2VsZi5jb2x1bW5zLmZv
Y3VzX3Bvc2l0aW9uID0gMSAtIGN1cnJlbnRfZm9jdXMKICAgICAgICBlbGlmIGtleSA9PSAnZjMn
OgogICAgICAgICAgICBhY3RpdmVfcGFuZWwgPSBzZWxmLmdldF9hY3RpdmVfcGFuZWwoKQogICAg
ICAgICAgICBhY3RpdmVfcGFuZWwudmlld19pdGVtKCkKICAgICAgICBlbGlmIGtleSA9PSAnZjQn
OgogICAgICAgICAgICBhY3RpdmVfcGFuZWwgPSBzZWxmLmdldF9hY3RpdmVfcGFuZWwoKQogICAg
ICAgICAgICBpZiBhY3RpdmVfcGFuZWw6CiAgICAgICAgICAgICAgICBhY3RpdmVfcGFuZWwuc2hv
d19pdGVtX2luZm8oKQogICAgICAgIGVsaWYga2V5ID09ICdmNSc6CiAgICAgICAgICAgIHNlbGYu
Y29weV9pdGVtcygpCiAgICAgICAgZWxpZiBrZXkgPT0gJ2Y2JzoKICAgICAgICAgICAgc2VsZi5t
b3ZlX2l0ZW1zKCkKICAgICAgICBlbGlmIGtleSA9PSAnZjcnOgogICAgICAgICAgICBzZWxmLmNy
ZWF0ZV9kaXJlY3RvcnkoKQogICAgICAgIGVsaWYga2V5ID09ICdmOCc6CiAgICAgICAgICAgIHNl
bGYuZGVsZXRlX2l0ZW1zKCkKICAgICAgICBlbGlmIGtleSA9PSAnZjknOgogICAgICAgICAgICBz
ZWxmLmRlbGV0ZV9vbGRfdmVyc2lvbnMoKQogICAgICAgIGVsaWYga2V5ID09ICdmMic6CiAgICAg
ICAgICAgIGFjdGl2ZV9wYW5lbCA9IHNlbGYuZ2V0X2FjdGl2ZV9wYW5lbCgpCiAgICAgICAgICAg
IGFjdGl2ZV9wYW5lbC5zaG93X3NvcnRfZGlhbG9nKCkKICAgICAgICBlbGlmIGtleSA9PSAnZjEx
JzoKICAgICAgICAgICAgc2VsZi50b2dnbGVfdmVyc2lvbmluZygpCiAgICAgICAgZWxpZiBrZXkg
PT0gJysnOgogICAgICAgICAgICBzZWxmLnNlbGVjdF9ieV9wYXR0ZXJuKCkKICAgICAgICBlbGlm
IGtleSA9PSAnLSc6CiAgICAgICAgICAgIHNlbGYudW5zZWxlY3RfYnlfcGF0dGVybigpCiAgICAg
ICAgZWxpZiBrZXkgPT0gJyonOgogICAgICAgICAgICBhY3RpdmVfcGFuZWwgPSBzZWxmLmdldF9h
Y3RpdmVfcGFuZWwoKQogICAgICAgICAgICBhY3RpdmVfcGFuZWwuaW52ZXJ0X3NlbGVjdGlvbigp
CiAgICAgICAgZWxpZiBrZXkgPT0gJ2N0cmwgdic6CiAgICAgICAgICAgIHNlbGYudG9nZ2xlX3By
ZXZpZXdfbW9kZSgpCiAgICAgICAgIyDQlNC+0LHQsNCy0LvQtdC90LjQtSDQt9Cw0LrQu9Cw0LTQ
utC4IChDdHJsK2IpCiAgICAgICAgZWxpZiBrZXkgPT0gJ2N0cmwgYic6CiAgICAgICAgICAgIHNl
bGYuYWRkX2N1cnJlbnRfdG9fYm9va21hcmtzKCkKICAgICAgICAjINCf0YDQvtGB0LzQvtGC0YAg
0LfQsNC60LvQsNC00L7QuiAoQWx0K2IpCiAgICAgICAgZWxpZiBrZXkgPT0gJ21ldGEgYic6CiAg
ICAgICAgICAgIHNlbGYuc2hvd19ib29rbWFya3NfZGlhbG9nKCkKICAgICAgICBpZiBzZWxmLnBy
ZXZpZXdfbW9kZToKICAgICAgICAgICAgaWYga2V5ID09ICcrJzoKICAgICAgICAgICAgICAgIHNl
bGYuY2hhbmdlX3ByZXZpZXdfdmVyc2lvbigxKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAg
ICAgICAgIGVsaWYga2V5ID09ICctJzoKICAgICAgICAgICAgICAgIHNlbGYuY2hhbmdlX3ByZXZp
ZXdfdmVyc2lvbigtMSkKICAgICAgICAgICAgICAgIHJldHVybgoKICAgIGRlZiBjaGFuZ2VfcHJl
dmlld192ZXJzaW9uKHNlbGYsIGRlbHRhKToKICAgICAgICAjINCb0L7Qs9C40LrQsCDRgdC80LXQ
vdGLINC40L3QtNC10LrRgdCwINC4INCy0YvQt9C+0LLQsCB1cGRhdGVfcHJldmlldygpCiAgICAg
ICAgIyDQotGA0LXQsdGD0LXRgiDRhdGA0LDQvdC10L3QuNGPINGC0LXQutGD0YnQtdCz0L4g0YHQ
v9C40YHQutCwINCy0LXRgNGB0LjQuSDQsiBzZWxmLmN1cnJlbnRfcHJldmlld192ZXJzaW9ucwog
ICAgICAgIHBhc3MKCiAgICBkZWYgc2VsZWN0X2J5X3BhdHRlcm4oc2VsZik6CiAgICAgICAgZGVm
IGNhbGxiYWNrKGNvbmZpcm1lZCwgcGF0dGVybik6CiAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlh
bG9nKCkKICAgICAgICAgICAgaWYgY29uZmlybWVkOgogICAgICAgICAgICAgICAgYWN0aXZlX3Bh
bmVsID0gc2VsZi5nZXRfYWN0aXZlX3BhbmVsKCkKICAgICAgICAgICAgICAgIGFjdGl2ZV9wYW5l
bC5zZWxlY3RfYnlfcGF0dGVybihwYXR0ZXJuLCBzZWxlY3Q9VHJ1ZSkKCiAgICAgICAgZGlhbG9n
ID0gSW5wdXREaWFsb2coJ1NlbGVjdCBmaWxlcyBieSBwYXR0ZXJuJywgJ1BhdHRlcm46ICcsIGNh
bGxiYWNrLCBkZWZhdWx0X3RleHQ9JyonKQogICAgICAgIHNlbGYuc2hvd19kaWFsb2coZGlhbG9n
KQoKICAgIGRlZiB1bnNlbGVjdF9ieV9wYXR0ZXJuKHNlbGYpOgogICAgICAgIGRlZiBjYWxsYmFj
ayhjb25maXJtZWQsIHBhdHRlcm4pOgogICAgICAgICAgICBzZWxmLmNsb3NlX2RpYWxvZygpCiAg
ICAgICAgICAgIGlmIGNvbmZpcm1lZDoKICAgICAgICAgICAgICAgIGFjdGl2ZV9wYW5lbCA9IHNl
bGYuZ2V0X2FjdGl2ZV9wYW5lbCgpCiAgICAgICAgICAgICAgICBhY3RpdmVfcGFuZWwuc2VsZWN0
X2J5X3BhdHRlcm4ocGF0dGVybiwgc2VsZWN0PUZhbHNlKQoKICAgICAgICBkaWFsb2cgPSBJbnB1
dERpYWxvZygnVW5zZWxlY3QgZmlsZXMgYnkgcGF0dGVybicsICdQYXR0ZXJuOiAnLCBjYWxsYmFj
aywgZGVmYXVsdF90ZXh0PScqJykKICAgICAgICBzZWxmLnNob3dfZGlhbG9nKGRpYWxvZykKCiAg
ICBkZWYgZGVsZXRlX29sZF92ZXJzaW9ucyhzZWxmKToKICAgICAgICBhY3RpdmVfcGFuZWwgPSBz
ZWxmLmdldF9hY3RpdmVfcGFuZWwoKQoKICAgICAgICBpZiBhY3RpdmVfcGFuZWwubW9kZSAhPSAn
czMnIG9yIG5vdCBhY3RpdmVfcGFuZWwuY3VycmVudF9idWNrZXQ6CiAgICAgICAgICAgIHNlbGYu
c2hvd19yZXN1bHQoJ1RoaXMgZnVuY3Rpb24gd29ya3Mgb25seSB3aXRoIFMzIG9iamVjdHMnKQog
ICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc2VsZWN0ZWRfaXRlbXMgPSBhY3RpdmVfcGFuZWwu
Z2V0X3NlbGVjdGVkX2l0ZW1zKCkKICAgICAgICBpZiBub3Qgc2VsZWN0ZWRfaXRlbXM6CiAgICAg
ICAgICAgIGZvY3VzZWQgPSBhY3RpdmVfcGFuZWwuZ2V0X2ZvY3VzZWRfaXRlbSgpCiAgICAgICAg
ICAgIGlmIGZvY3VzZWQgYW5kIGZvY3VzZWRbJ3R5cGUnXSA9PSAnczNfZmlsZSc6CiAgICAgICAg
ICAgICAgICBzZWxlY3RlZF9pdGVtcyA9IFtmb2N1c2VkXQoKICAgICAgICBpZiBub3Qgc2VsZWN0
ZWRfaXRlbXM6CiAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoJ05vIGl0ZW1zIHNlbGVjdGVk
JykKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHZlcnNpb25lZF9pdGVtcyA9IFtdCiAgICAg
ICAgZm9yIGl0ZW0gaW4gc2VsZWN0ZWRfaXRlbXM6CiAgICAgICAgICAgIGlmIGl0ZW1bJ3R5cGUn
XSA9PSAnczNfZmlsZScgYW5kIGl0ZW0uZ2V0KCd2ZXJzaW9uX2NvdW50JywgMSkgPiAxOgogICAg
ICAgICAgICAgICAgdmVyc2lvbmVkX2l0ZW1zLmFwcGVuZChpdGVtKQoKICAgICAgICBpZiBub3Qg
dmVyc2lvbmVkX2l0ZW1zOgogICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KCdObyB2ZXJzaW9u
ZWQgZmlsZXMgc2VsZWN0ZWQnKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaXRlbXNfaW5m
byA9IFtmIntpdGVtWyduYW1lJ119ICh7aXRlbVsndmVyc2lvbl9jb3VudCddfSB2ZXJzaW9ucyki
IGZvciBpdGVtIGluIHZlcnNpb25lZF9pdGVtc10KCiAgICAgICAgZGVmIGNhbGxiYWNrKGNvbmZp
cm1lZCk6CiAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgaWYgY29u
ZmlybWVkOgogICAgICAgICAgICAgICAgZm9jdXNfaW5kZXggPSBhY3RpdmVfcGFuZWwubGlzdGJv
eC5mb2N1c19wb3NpdGlvbgoKICAgICAgICAgICAgICAgIHByb2dyZXNzID0gUHJvZ3Jlc3NEaWFs
b2coJ0RlbGV0aW5nIG9sZCB2ZXJzaW9ucy4uLicsIGNhbGxiYWNrPXNlbGYuY2xvc2VfZGlhbG9n
KQogICAgICAgICAgICAgICAgcHJvZ3Jlc3Muc2V0X3RvdGFsKGxlbih2ZXJzaW9uZWRfaXRlbXMp
KQogICAgICAgICAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhwcm9ncmVzcykKCiAgICAgICAgICAg
ICAgICBkZWYgZGVsZXRlX3RocmVhZCgpOgogICAgICAgICAgICAgICAgICAgIGZvciBpdGVtIGlu
IHZlcnNpb25lZF9pdGVtczoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgcHJvZ3Jlc3MuY2Fu
Y2VsbGVkOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICAg
ICAgICAgICAgIHNlbGYubG9vcC5kcmF3X3NjcmVlbigpCiAgICAgICAgICAgICAgICAgICAgICAg
IHByb2dyZXNzLnVwZGF0ZShpdGVtWyduYW1lJ10pCgogICAgICAgICAgICAgICAgICAgICAgICBk
ZWxldGVkID0gYWN0aXZlX3BhbmVsLnMzX21hbmFnZXIuZGVsZXRlX29sZF92ZXJzaW9ucygKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9wYW5lbC5jdXJyZW50X2J1Y2tldCwKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1bJ2tleSddCiAgICAgICAgICAgICAgICAgICAg
ICAgICkKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRlbGV0ZWQgPiAwOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX3N1Y2Nlc3MoKQogICAgICAgICAgICAgICAg
ICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX2Zh
aWx1cmUoKQoKICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICAgICAg
ICAgICAgICBzZWxmLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICAgICAgICAgIHRocmVhZCA9
IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWRlbGV0ZV90aHJlYWQpCiAgICAgICAgICAgICAgICB0
aHJlYWQuZGFlbW9uID0gVHJ1ZQogICAgICAgICAgICAgICAgdGhyZWFkLnN0YXJ0KCkKCiAgICAg
ICAgICAgICAgICBkZWYgY2hlY2tfdGhyZWFkKCk6CiAgICAgICAgICAgICAgICAgICAgaWYgdGhy
ZWFkLmlzX2FsaXZlKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9vcC5zZXRfYWxh
cm1faW4oMC4xLCBsYW1iZGEgKmFyZ3M6IGNoZWNrX3RocmVhZCgpKQogICAgICAgICAgICAgICAg
ICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAg
ICAgICAgICAgICAgICAgICAgICAgaWYgZm9jdXNfaW5kZXggaXMgbm90IE5vbmU6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBhY3RpdmVfcGFuZWwucmVzdG9yZV9mb2N1c19pbmRleCA9IGZv
Y3VzX2luZGV4CgogICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVfcGFuZWwucmVmcmVzaCgp
CgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KAogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZidEZWxldGVkIG9sZCB2ZXJzaW9uczoge3Byb2dyZXNzLnN1Y2Nlc3Nf
Y291bnR9LCBGYWlsZWQ6IHtwcm9ncmVzcy5mYWlsX2NvdW50fScpCgogICAgICAgICAgICAgICAg
c2VsZi5sb29wLnNldF9hbGFybV9pbigwLjEsIGxhbWJkYSAqYXJnczogY2hlY2tfdGhyZWFkKCkp
CgogICAgICAgIG1lc3NhZ2UgPSBmJ0RlbGV0ZSBvbGQgdmVyc2lvbnMgb2Yge2xlbih2ZXJzaW9u
ZWRfaXRlbXMpfSBmaWxlKHMpP1xuVGhpcyB3aWxsIGtlZXAgb25seSB0aGUgbGF0ZXN0IHZlcnNp
b24hJwogICAgICAgIGRpYWxvZyA9IENvbmZpcm1EaWFsb2coJ0NvbmZpcm0gRGVsZXRlIE9sZCBW
ZXJzaW9ucycsIG1lc3NhZ2UsIGl0ZW1zX2luZm8sIGNhbGxiYWNrKQogICAgICAgIHNlbGYuc2hv
d19kaWFsb2coZGlhbG9nKQoKICAgICMg0JTQvtCx0LDQstC70Y/QtdC8INCw0YDQs9GD0LzQtdC9
0YLRiyB3aWR0aCDQuCBoZWlnaHQg0YEg0LTQtdGE0L7Qu9GC0L3Ri9C80Lgg0LfQvdCw0YfQtdC9
0LjRj9C80LgKICAgIGRlZiBzaG93X2RpYWxvZyhzZWxmLCBkaWFsb2csIHdpZHRoPSgncmVsYXRp
dmUnLCA3MCksIGhlaWdodD0oJ3JlbGF0aXZlJywgMjApKToKICAgICAgICBvdmVybGF5ID0gdXJ3
aWQuT3ZlcmxheSgKICAgICAgICAgICAgZGlhbG9nLAogICAgICAgICAgICBzZWxmLmZyYW1lLAog
ICAgICAgICAgICBhbGlnbj0nY2VudGVyJywKICAgICAgICAgICAgd2lkdGg9d2lkdGgsCiAgICAg
ICAgICAgIHZhbGlnbj0nbWlkZGxlJywKICAgICAgICAgICAgaGVpZ2h0PWhlaWdodAogICAgICAg
ICkKICAgICAgICBzZWxmLmxvb3Aud2lkZ2V0ID0gb3ZlcmxheQoKICAgIGRlZiBjbG9zZV9kaWFs
b2coc2VsZik6CiAgICAgICAgc2VsZi5sb29wLndpZGdldCA9IHNlbGYubWFpbl93aWRnZXQKCiAg
ICAjIGRlZiBzaG93X3Jlc3VsdChzZWxmLCBtZXNzYWdlKToKICAgICMgICAgIHNlbGYucmVzdWx0
X3RleHQuc2V0X3RleHQobWVzc2FnZSkKCiAgICBkZWYgc2hvd19yZXN1bHQoc2VsZiwgbWVzc2Fn
ZSwgc2V2ZXJpdHk9J2luZm8nKToKICAgICAgICAiIiIKICAgICAgICBzZXZlcml0eTogJ2luZm8n
IChkZWZhdWx0KSwgJ2Vycm9yJywgJ3dhcm5pbmcnCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5y
ZXN1bHRfdGV4dC5zZXRfdGV4dChtZXNzYWdlKQoKICAgICAgICAjINCh0LvQvtCy0LDRgNGMINGB
0L7QvtGC0LLQtdGC0YHRgtCy0LjRjyDRgtC40L/QvtCyINGB0L7QvtCx0YnQtdC90LjQuSDQuCDR
gdGC0LjQu9C10Lkg0L/QsNC70LjRgtGA0YsKICAgICAgICBzdHlsZV9tYXAgPSB7CiAgICAgICAg
ICAgICdpbmZvJzogJ3Jlc3VsdCcsCiAgICAgICAgICAgICdlcnJvcic6ICdyZXN1bHRfZXJyb3In
LAogICAgICAgICAgICAnd2FybmluZyc6ICdyZXN1bHRfd2FybicKICAgICAgICB9CgogICAgICAg
IHRhcmdldF9zdHlsZSA9IHN0eWxlX21hcC5nZXQoc2V2ZXJpdHksICdyZXN1bHQnKQoKICAgICAg
ICAjIHtOb25lOiB0YXJnZXRfc3R5bGV9INC+0LfQvdCw0YfQsNC10YIgItC/0YDQuNC80LXQvdC4
0YLRjCDRjdGC0L7RgiDRgdGC0LjQu9GMINC60L4g0LLRgdC10LzRgyDRgdC+0LTQtdGA0LbQuNC8
0L7QvNGDLAogICAgICAgICMg0YMg0LrQvtGC0L7RgNC+0LPQviDQvdC10YIg0YHQstC+0LXQs9C+
INC20LXRgdGC0LrQviDQt9Cw0LTQsNC90L3QvtCz0L4g0YHRgtC40LvRjyIKICAgICAgICBzZWxm
LnJlc3VsdF9tYXAuc2V0X2F0dHJfbWFwKHtOb25lOiB0YXJnZXRfc3R5bGV9KQoKICAgIGRlZiBn
ZXRfYWN0aXZlX3BhbmVsKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmxlZnRfcGFuZWwgaWYg
c2VsZi5jb2x1bW5zLmZvY3VzX3Bvc2l0aW9uID09IDAgZWxzZSBzZWxmLnJpZ2h0X3BhbmVsCgog
ICAgZGVmIGdldF9pbmFjdGl2ZV9wYW5lbChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5yaWdo
dF9wYW5lbCBpZiBzZWxmLmNvbHVtbnMuZm9jdXNfcG9zaXRpb24gPT0gMCBlbHNlIHNlbGYubGVm
dF9wYW5lbAoKICAgIGRlZiBjcmVhdGVfZGlyZWN0b3J5KHNlbGYpOgogICAgICAgIGFjdGl2ZV9w
YW5lbCA9IHNlbGYuZ2V0X2FjdGl2ZV9wYW5lbCgpCgogICAgICAgIGlmIGFjdGl2ZV9wYW5lbC5p
c19yb290X21lbnUoKToKICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdCgnU2VsZWN0IEZTIG9y
IFMzIGVuZHBvaW50IGZpcnN0JykKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIGFjdGl2
ZV9wYW5lbC5tb2RlID09ICdzMyc6CiAgICAgICAgICAgIGlmIGFjdGl2ZV9wYW5lbC5pc19idWNr
ZXRfbGlzdCgpOgogICAgICAgICAgICAgICAgZGVmIGNhbGxiYWNrKGNvbmZpcm1lZCwgYnVja2V0
X25hbWUpOgogICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAg
ICAgICAgICAgICBpZiBjb25maXJtZWQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFjdGl2
ZV9wYW5lbC5zM19tYW5hZ2VyLmNyZWF0ZV9idWNrZXQoYnVja2V0X25hbWUpOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdChmJ0NyZWF0ZWQgYnVja2V0OiB7YnVj
a2V0X25hbWV9JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9wYW5lbC5yZWZy
ZXNoKGZvY3VzX29uPWJ1Y2tldF9uYW1lKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdChmJ0ZhaWxlZCB0byBj
cmVhdGUgYnVja2V0OiB7YnVja2V0X25hbWV9JykKCiAgICAgICAgICAgICAgICBkaWFsb2cgPSBJ
bnB1dERpYWxvZygnQ3JlYXRlIE5ldyBCdWNrZXQnLCAnQnVja2V0IG5hbWU6ICcsIGNhbGxiYWNr
KQogICAgICAgICAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhkaWFsb2cpCiAgICAgICAgICAgIGVs
aWYgYWN0aXZlX3BhbmVsLmlzX2VuZHBvaW50X2xpc3QoKToKICAgICAgICAgICAgICAgIHNlbGYu
c2hvd19yZXN1bHQoJ0Nhbm5vdCBjcmVhdGUgZGlyZWN0b3J5IGF0IGVuZHBvaW50IGxldmVsJykK
ICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoJ0Nhbm5v
dCBjcmVhdGUgZGlyZWN0b3J5IGluIFMzICh1c2UgcHJlZml4IHdoZW4gY29weWluZyknKQogICAg
ICAgIGVsc2U6CiAgICAgICAgICAgIGRlZiBjYWxsYmFjayhjb25maXJtZWQsIGRpcl9uYW1lKToK
ICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgICAgIGlmIGNv
bmZpcm1lZDoKICAgICAgICAgICAgICAgICAgICBpZiBhY3RpdmVfcGFuZWwuZnNfYnJvd3Nlci5j
cmVhdGVfZGlyZWN0b3J5KGRpcl9uYW1lKToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5z
aG93X3Jlc3VsdChmJ0NyZWF0ZWQgZGlyZWN0b3J5OiB7ZGlyX25hbWV9JykKICAgICAgICAgICAg
ICAgICAgICAgICAgYWN0aXZlX3BhbmVsLnJlZnJlc2goZm9jdXNfb249ZGlyX25hbWUpCiAgICAg
ICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jl
c3VsdChmJ0ZhaWxlZCB0byBjcmVhdGUgZGlyZWN0b3J5OiB7ZGlyX25hbWV9JykKCiAgICAgICAg
ICAgIGRpYWxvZyA9IElucHV0RGlhbG9nKCdDcmVhdGUgTmV3IERpcmVjdG9yeScsICdEaXJlY3Rv
cnkgbmFtZTogJywgY2FsbGJhY2spCiAgICAgICAgICAgIHNlbGYuc2hvd19kaWFsb2coZGlhbG9n
KQoKICAgIGRlZiBhbmFseXplX2l0ZW1zKHNlbGYsIGl0ZW1zLCBzb3VyY2VfcGFuZWwpOgogICAg
ICAgIGFuYWx5emVkID0gW10KICAgICAgICBpdGVtc19pbmZvID0gW10KICAgICAgICB0b3RhbF9i
eXRlcyA9IDAKCiAgICAgICAgZm9yIGl0ZW0gaW4gaXRlbXM6CiAgICAgICAgICAgIGl0ZW1fdHlw
ZSA9IGl0ZW1bJ3R5cGUnXQoKICAgICAgICAgICAgaWYgaXRlbV90eXBlID09ICdmc19maWxlJzoK
ICAgICAgICAgICAgICAgIGFuYWx5emVkLmFwcGVuZCh7J3R5cGUnOiAnZnNfZmlsZScsICdpdGVt
JzogaXRlbSwgJ2ZpbGVzJzogW2l0ZW1dfSkKICAgICAgICAgICAgICAgICMgaXRlbXNfaW5mby5h
cHBlbmQoZiJbRklMRV0ge2l0ZW1bJ25hbWUnXX0iKQogICAgICAgICAgICAgICAgaXRlbXNfaW5m
by5hcHBlbmQoZiIge2l0ZW1bJ25hbWUnXX0iKQogICAgICAgICAgICAgICAgdG90YWxfYnl0ZXMg
Kz0gaXRlbS5nZXQoJ3NpemUnLCAwKQoKICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ2Zz
X2Rpcic6CiAgICAgICAgICAgICAgICBkaXJfcGF0aCA9IG9zLnBhdGguam9pbihzb3VyY2VfcGFu
ZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIGl0ZW1bJ25hbWUnXSkKICAgICAgICAgICAgICAg
IGFsbF9maWxlcyA9IHNvdXJjZV9wYW5lbC5mc19icm93c2VyLmxpc3RfYWxsX2ZpbGVzKGRpcl9w
YXRoKQogICAgICAgICAgICAgICAgYW5hbHl6ZWQuYXBwZW5kKHsndHlwZSc6ICdmc19kaXInLCAn
aXRlbSc6IGl0ZW0sICdmaWxlcyc6IGFsbF9maWxlcywgJ2Rpcl9wYXRoJzogZGlyX3BhdGh9KQog
ICAgICAgICAgICAgICAgIyBpdGVtc19pbmZvLmFwcGVuZChmIltESVIgXSB7aXRlbVsnbmFtZSdd
fSAoe2xlbihhbGxfZmlsZXMpfSBmaWxlcykiKQogICAgICAgICAgICAgICAgaXRlbXNfaW5mby5h
cHBlbmQoZiIve2l0ZW1bJ25hbWUnXX0gKHtsZW4oYWxsX2ZpbGVzKX0gZmlsZXMpIikKICAgICAg
ICAgICAgICAgIHRvdGFsX2J5dGVzICs9IHN1bShmWydzaXplJ10gZm9yIGYgaW4gYWxsX2ZpbGVz
KQoKICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ3MzX2ZpbGUnOgogICAgICAgICAgICAg
ICAgYW5hbHl6ZWQuYXBwZW5kKHsndHlwZSc6ICdzM19maWxlJywgJ2l0ZW0nOiBpdGVtLCAnZmls
ZXMnOiBbaXRlbV19KQogICAgICAgICAgICAgICAgIyBpdGVtc19pbmZvLmFwcGVuZChmIltGSUxF
XSB7aXRlbVsnbmFtZSddfSIpCiAgICAgICAgICAgICAgICBpdGVtc19pbmZvLmFwcGVuZChmIiB7
aXRlbVsnbmFtZSddfSIpCiAgICAgICAgICAgICAgICB0b3RhbF9ieXRlcyArPSBpdGVtLmdldCgn
c2l6ZScsIDApCgogICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnczNfZGlyJzoKICAgICAg
ICAgICAgICAgIGFsbF9vYmplY3RzID0gc291cmNlX3BhbmVsLnMzX21hbmFnZXIubGlzdF9hbGxf
b2JqZWN0cyhzb3VyY2VfcGFuZWwuY3VycmVudF9idWNrZXQsIGl0ZW1bJ2tleSddKQogICAgICAg
ICAgICAgICAgYW5hbHl6ZWQuYXBwZW5kKHsndHlwZSc6ICdzM19kaXInLCAnaXRlbSc6IGl0ZW0s
ICdmaWxlcyc6IGFsbF9vYmplY3RzfSkKICAgICAgICAgICAgICAgICMgaXRlbXNfaW5mby5hcHBl
bmQoZiJbRElSIF0ge2l0ZW1bJ25hbWUnXX0gKHtsZW4oYWxsX29iamVjdHMpfSBvYmplY3RzKSIp
CiAgICAgICAgICAgICAgICBpdGVtc19pbmZvLmFwcGVuZChmIi97aXRlbVsnbmFtZSddfSAoe2xl
bihhbGxfb2JqZWN0cyl9IG9iamVjdHMpIikKICAgICAgICAgICAgICAgIHRvdGFsX2J5dGVzICs9
IHN1bShvYmouZ2V0KCdTaXplJywgMCkgZm9yIG9iaiBpbiBhbGxfb2JqZWN0cykKCiAgICAgICAg
ICAgIGVsaWYgaXRlbV90eXBlID09ICdidWNrZXQnOgogICAgICAgICAgICAgICAgYWxsX29iamVj
dHMgPSBzb3VyY2VfcGFuZWwuczNfbWFuYWdlci5saXN0X2FsbF9vYmplY3RzKGl0ZW1bJ25hbWUn
XSwgJycpCiAgICAgICAgICAgICAgICBhbmFseXplZC5hcHBlbmQoeyd0eXBlJzogJ2J1Y2tldCcs
ICdpdGVtJzogaXRlbSwgJ2ZpbGVzJzogYWxsX29iamVjdHN9KQogICAgICAgICAgICAgICAgaXRl
bXNfaW5mby5hcHBlbmQoZiIqe2l0ZW1bJ25hbWUnXX0gKHtsZW4oYWxsX29iamVjdHMpfSBvYmpl
Y3RzKSIpCiAgICAgICAgICAgICAgICB0b3RhbF9ieXRlcyArPSBzdW0ob2JqLmdldCgnU2l6ZScs
IDApIGZvciBvYmogaW4gYWxsX29iamVjdHMpCgogICAgICAgIHJldHVybiBhbmFseXplZCwgaXRl
bXNfaW5mbywgdG90YWxfYnl0ZXMKCiAgICBkZWYgY29weV9pdGVtcyhzZWxmKToKICAgICAgICBz
b3VyY2VfcGFuZWwgPSBzZWxmLmdldF9hY3RpdmVfcGFuZWwoKQogICAgICAgIGRlc3RfcGFuZWwg
PSBzZWxmLmdldF9pbmFjdGl2ZV9wYW5lbCgpCgogICAgICAgIGlmIHNvdXJjZV9wYW5lbC5pc19y
b290X21lbnUoKSBvciBzb3VyY2VfcGFuZWwuaXNfZW5kcG9pbnRfbGlzdCgpOgogICAgICAgICAg
ICBzZWxmLnNob3dfcmVzdWx0KCdDYW5ub3QgY29weSBmcm9tIHRoaXMgbGV2ZWwnKQogICAgICAg
ICAgICByZXR1cm4KCiAgICAgICAgaWYgZGVzdF9wYW5lbC5pc19yb290X21lbnUoKSBvciBkZXN0
X3BhbmVsLmlzX2VuZHBvaW50X2xpc3QoKToKICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdCgn
U2VsZWN0IGRlc3RpbmF0aW9uIGZpcnN0JykKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNl
bGVjdGVkX2l0ZW1zID0gc291cmNlX3BhbmVsLmdldF9zZWxlY3RlZF9pdGVtcygpCiAgICAgICAg
aWYgbm90IHNlbGVjdGVkX2l0ZW1zOgogICAgICAgICAgICBmb2N1c2VkID0gc291cmNlX3BhbmVs
LmdldF9mb2N1c2VkX2l0ZW0oKQogICAgICAgICAgICBpZiBmb2N1c2VkIGFuZCBmb2N1c2VkWyd0
eXBlJ10gaW4gKCdmc19maWxlJywgJ3MzX2ZpbGUnLCAnZnNfZGlyJywgJ3MzX2RpcicsICdidWNr
ZXQnKToKICAgICAgICAgICAgICAgIHNlbGVjdGVkX2l0ZW1zID0gW2ZvY3VzZWRdCgogICAgICAg
IGlmIG5vdCBzZWxlY3RlZF9pdGVtczoKICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdCgnTm8g
aXRlbXMgdG8gY29weScpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpZiBkZXN0X3BhbmVs
LmlzX2J1Y2tldF9saXN0KCk6CiAgICAgICAgICAgIGhhc19maWxlcyA9IGFueShpdGVtWyd0eXBl
J10gaW4gKCdmc19maWxlJywgJ3MzX2ZpbGUnKSBmb3IgaXRlbSBpbiBzZWxlY3RlZF9pdGVtcykK
ICAgICAgICAgICAgaWYgaGFzX2ZpbGVzOgogICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3Vs
dCgnQ2Fubm90IGNvcHkgZmlsZXMgZGlyZWN0bHkgdG8gYnVja2V0IGxpc3QhJykKICAgICAgICAg
ICAgICAgIHJldHVybgogICAgICAgIGZvY3VzX2luZGV4ID0gc291cmNlX3BhbmVsLmxpc3Rib3gu
Zm9jdXNfcG9zaXRpb24KICAgICAgICBhbmFseXplZCwgaXRlbXNfaW5mbywgdG90YWxfYnl0ZXMg
PSBzZWxmLmFuYWx5emVfaXRlbXMoc2VsZWN0ZWRfaXRlbXMsIHNvdXJjZV9wYW5lbCkKICAgICAg
ICBzZWxmLl9zaG93X2NvcHlfZGlhbG9nKGFuYWx5emVkLCBzb3VyY2VfcGFuZWwsIGRlc3RfcGFu
ZWwsIGlzX21vdmU9RmFsc2UsIHRvdGFsX2J5dGVzPXRvdGFsX2J5dGVzLCByZXN0b3JlX2luZGV4
PWZvY3VzX2luZGV4KQoKICAgIGRlZiBtb3ZlX2l0ZW1zKHNlbGYpOgogICAgICAgIHNvdXJjZV9w
YW5lbCA9IHNlbGYuZ2V0X2FjdGl2ZV9wYW5lbCgpCiAgICAgICAgZGVzdF9wYW5lbCA9IHNlbGYu
Z2V0X2luYWN0aXZlX3BhbmVsKCkKCiAgICAgICAgaWYgc291cmNlX3BhbmVsLmlzX3Jvb3RfbWVu
dSgpIG9yIHNvdXJjZV9wYW5lbC5pc19lbmRwb2ludF9saXN0KCk6CiAgICAgICAgICAgIHNlbGYu
c2hvd19yZXN1bHQoJ0Nhbm5vdCBtb3ZlIGZyb20gdGhpcyBsZXZlbCcpCiAgICAgICAgICAgIHJl
dHVybgoKICAgICAgICBpZiBkZXN0X3BhbmVsLmlzX3Jvb3RfbWVudSgpIG9yIGRlc3RfcGFuZWwu
aXNfZW5kcG9pbnRfbGlzdCgpOgogICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KCdTZWxlY3Qg
ZGVzdGluYXRpb24gZmlyc3QnKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc2VsZWN0ZWRf
aXRlbXMgPSBzb3VyY2VfcGFuZWwuZ2V0X3NlbGVjdGVkX2l0ZW1zKCkKICAgICAgICBpZiBub3Qg
c2VsZWN0ZWRfaXRlbXM6CiAgICAgICAgICAgIGZvY3VzZWQgPSBzb3VyY2VfcGFuZWwuZ2V0X2Zv
Y3VzZWRfaXRlbSgpCiAgICAgICAgICAgIGlmIGZvY3VzZWQgYW5kIGZvY3VzZWRbJ3R5cGUnXSBp
biAoJ2ZzX2ZpbGUnLCAnczNfZmlsZScsICdmc19kaXInLCAnczNfZGlyJywgJ2J1Y2tldCcpOgog
ICAgICAgICAgICAgICAgc2VsZWN0ZWRfaXRlbXMgPSBbZm9jdXNlZF0KCiAgICAgICAgaWYgbm90
IHNlbGVjdGVkX2l0ZW1zOgogICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KCdObyBpdGVtcyB0
byBtb3ZlJykKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIGRlc3RfcGFuZWwuaXNfYnVj
a2V0X2xpc3QoKToKICAgICAgICAgICAgaGFzX2ZpbGVzID0gYW55KGl0ZW1bJ3R5cGUnXSBpbiAo
J2ZzX2ZpbGUnLCAnczNfZmlsZScpIGZvciBpdGVtIGluIHNlbGVjdGVkX2l0ZW1zKQogICAgICAg
ICAgICBpZiBoYXNfZmlsZXM6CiAgICAgICAgICAgICAgICBzZWxmLnNob3dfcmVzdWx0KCdDYW5u
b3QgbW92ZSBmaWxlcyBkaXJlY3RseSB0byBidWNrZXQgbGlzdCEnKQogICAgICAgICAgICAgICAg
cmV0dXJuCiAgICAgICAgZm9jdXNfaW5kZXggPSBzb3VyY2VfcGFuZWwubGlzdGJveC5mb2N1c19w
b3NpdGlvbgogICAgICAgIGFuYWx5emVkLCBpdGVtc19pbmZvLCB0b3RhbF9ieXRlcyA9IHNlbGYu
YW5hbHl6ZV9pdGVtcyhzZWxlY3RlZF9pdGVtcywgc291cmNlX3BhbmVsKQogICAgICAgIHNlbGYu
X3Nob3dfY29weV9kaWFsb2coYW5hbHl6ZWQsIHNvdXJjZV9wYW5lbCwgZGVzdF9wYW5lbCwgaXNf
bW92ZT1UcnVlLCB0b3RhbF9ieXRlcz10b3RhbF9ieXRlcywgcmVzdG9yZV9pbmRleD1mb2N1c19p
bmRleCkKCiAgICBkZWYgX3Nob3dfY29weV9kaWFsb2coc2VsZiwgYW5hbHl6ZWQsIHNvdXJjZV9w
YW5lbCwgZGVzdF9wYW5lbCwgaXNfbW92ZT1GYWxzZSwgdG90YWxfYnl0ZXM9MCwgcmVzdG9yZV9p
bmRleD1Ob25lKToKICAgICAgICAiIiIKICAgICAgICDQntGC0L7QsdGA0LDQttCw0LXRgiDQtNC4
0LDQu9C+0LPQvtCy0L7QtSDQvtC60L3QviDQtNC70Y8g0L/QvtC00YLQstC10YDQttC00LXQvdC4
0Y8g0L/Rg9GC0Lgg0L3QsNC30L3QsNGH0LXQvdC40Y8g0L/QtdGA0LXQtCDQvtC/0LXRgNCw0YbQ
uNC10Lkg0LrQvtC/0LjRgNC+0LLQsNC90LjRjyDQuNC70Lgg0L/QtdGA0LXQvNC10YnQtdC90LjR
jy4KCiAgICAgICAg0JDRgNCz0YPQvNC10L3RgtGLOgogICAgICAgICAgICBhbmFseXplZCAobGlz
dCk6INCh0L/QuNGB0L7QuiDQv9GA0L7QsNC90LDQu9C40LfQuNGA0L7QstCw0L3QvdGL0YUg0Y3Q
u9C10LzQtdC90YLQvtCyICjRhNCw0LnQu9C+0LIv0L/QsNC/0L7Quikg0LTQu9GPINC+0LHRgNCw
0LHQvtGC0LrQuC4KICAgICAgICAgICAgc291cmNlX3BhbmVsIChQYW5lbFdpZGdldCk6INCf0LDQ
vdC10LvRjC3QuNGB0YLQvtGH0L3QuNC6LCDQvtGC0LrRg9C00LAg0LjQvdC40YbQuNC40YDQvtCy
0LDQvdCwINC+0L/QtdGA0LDRhtC40Y8uCiAgICAgICAgICAgIGRlc3RfcGFuZWwgKFBhbmVsV2lk
Z2V0KTog0J/QsNC90LXQu9GMLdC90LDQt9C90LDRh9C10L3QuNC1ICh0YXJnZXQpLgogICAgICAg
ICAgICBpc19tb3ZlIChib29sKTog0KTQu9Cw0LMg0YDQtdC20LjQvNCwINC/0LXRgNC10LzQtdGJ
0LXQvdC40Y8uINCV0YHQu9C4IFRydWUg4oCUINC00LDQvdC90YvQtSDQsdGD0LTRg9GCINGD0LTQ
sNC70LXQvdGLINC40Lcg0LjRgdGC0L7Rh9C90LjQutCwINC/0L7RgdC70LUg0LrQvtC/0LjRgNC+
0LLQsNC90LjRjy4KICAgICAgICAgICAgdG90YWxfYnl0ZXMgKGludCk6INCe0LHRidC40Lkg0YDQ
sNC30LzQtdGAINC00LDQvdC90YvRhSDQtNC70Y8g0L/QtdGA0LXQtNCw0YfQuCDQsiDQv9GA0L7Q
s9GA0LXRgdGBLdCx0LDRgC4KICAgICAgICAgICAgcmVzdG9yZV9pbmRleCAoaW50LCBvcHRpb25h
bCk6INCY0L3QtNC10LrRgSDRgdGC0YDQvtC60Lgg0LTQu9GPINCy0L7RgdGB0YLQsNC90L7QstC7
0LXQvdC40Y8g0YTQvtC60YPRgdCwINCyINC40YHRhdC+0LTQvdC+0Lkg0L/QsNC90LXQu9C4INC/
0L7RgdC70LUg0LfQsNCy0LXRgNGI0LXQvdC40Y8gKNC40YHQv9C+0LvRjNC30YPQtdGC0YHRjyDQ
tNC70Y8g0LLQtdGA0YHQuNC5KS4KICAgICAgICAiIiIKICAgICAgICBvcGVyYXRpb24gPSAnTW92
ZScgaWYgaXNfbW92ZSBlbHNlICdDb3B5JwoKICAgICAgICBpZiBsZW4oYW5hbHl6ZWQpID09IDE6
CiAgICAgICAgICAgIGl0ZW0gPSBhbmFseXplZFswXVsnaXRlbSddCiAgICAgICAgICAgICMgc291
cmNlX2Rlc2MgPSBmJ3tvcGVyYXRpb259ICJ7aXRlbVsibmFtZSJdfSInCiAgICAgICAgICAgIHNv
dXJjZV9kZXNjID0gZicie2l0ZW1bIm5hbWUiXX0iJwogICAgICAgIGVsc2U6CiAgICAgICAgICAg
ICMgc291cmNlX2Rlc2MgPSBmJ3tvcGVyYXRpb259IHtsZW4oYW5hbHl6ZWQpfSBpdGVtcycKICAg
ICAgICAgICAgc291cmNlX2Rlc2MgPSBmJ3tsZW4oYW5hbHl6ZWQpfSBpdGVtcycKCiAgICAgICAg
aWYgbGVuKGFuYWx5emVkKSA9PSAxOgogICAgICAgICAgICBpdGVtID0gYW5hbHl6ZWRbMF1bJ2l0
ZW0nXQogICAgICAgICAgICBpZiBkZXN0X3BhbmVsLmlzX2J1Y2tldF9saXN0KCk6CiAgICAgICAg
ICAgICAgICBkZXN0X3BhdGggPSBpdGVtWyduYW1lJ10ubG93ZXIoKS5yZXBsYWNlKCdfJywgJy0n
KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZGVzdF9iYXNlID0gZGVzdF9wYW5l
bC5nZXRfY3VycmVudF9wYXRoKCkKICAgICAgICAgICAgICAgIGlmIGRlc3RfYmFzZToKICAgICAg
ICAgICAgICAgICAgICBkZXN0X3BhdGggPSBkZXN0X2Jhc2UucnN0cmlwKCcvJykgKyAnLycgKyBp
dGVtWyduYW1lJ10KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZGVz
dF9wYXRoID0gaXRlbVsnbmFtZSddCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGVzdF9wYXRo
ID0gZGVzdF9wYW5lbC5nZXRfY3VycmVudF9wYXRoKCkKCiAgICAgICAgZGVmIGNhbGxiYWNrKGNv
bmZpcm1lZCwgdGFyZ2V0X25hbWUpOgogICAgICAgICAgICBzZWxmLmNsb3NlX2RpYWxvZygpCiAg
ICAgICAgICAgIGlmIG5vdCBjb25maXJtZWQ6CiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAg
ICAgICAgIGlmIG5vdCB0YXJnZXRfbmFtZToKICAgICAgICAgICAgICAgIHRhcmdldF9uYW1lID0g
ZGVzdF9wYW5lbC5nZXRfY3VycmVudF9wYXRoKCkKCiAgICAgICAgICAgIGN1cnJlbnRfaXRlbSA9
IHNvdXJjZV9wYW5lbC5nZXRfZm9jdXNlZF9pdGVtKCkKICAgICAgICAgICAgZm9jdXNfbmFtZSA9
IGN1cnJlbnRfaXRlbS5nZXQoJ25hbWUnKSBpZiBjdXJyZW50X2l0ZW0gZWxzZSBOb25lCgogICAg
ICAgICAgICAjINCh0LHRgNC+0YEg0YTQu9Cw0LPQsCAi0L/QtdGA0LXQt9Cw0L/QuNGB0LDRgtGM
INCy0YHQtSIKICAgICAgICAgICAgc2VsZi5vdmVyd3JpdGVfYWxsID0gRmFsc2UKICAgICAgICAg
ICAgc2VsZi52ZXJzaW9uX2FsbCA9IEZhbHNlCiAgICAgICAgICAgIHNlbGYuc2tpcF9hbGwgPSBG
YWxzZQoKICAgICAgICAgICAgc2VsZi5fZG9fY29weV93aXRoX3Byb2dyZXNzKGFuYWx5emVkLCBz
b3VyY2VfcGFuZWwsIGRlc3RfcGFuZWwsIHRhcmdldF9uYW1lLCBmb2N1c19uYW1lLCBpc19tb3Zl
PWlzX21vdmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbF9i
eXRlcz10b3RhbF9ieXRlcywgcmVzdG9yZV9pbmRleD1yZXN0b3JlX2luZGV4KQoKICAgICAgICBk
aWFsb2cgPSBDb3B5TW92ZURpYWxvZyhvcGVyYXRpb24sIHNvdXJjZV9kZXNjLCBkZXN0X3BhdGgs
IGNhbGxiYWNrKQogICAgICAgIHNlbGYuc2hvd19kaWFsb2coZGlhbG9nKQoKICAgIGRlZiBfY2hl
Y2tfb3ZlcndyaXRlKHNlbGYsIGZpbGVuYW1lLCBzb3VyY2VfaW5mbywgZGVzdF9pbmZvLCBjYWxs
YmFjaywgaXNfczNfZGVzdD1GYWxzZSk6CiAgICAgICAgIiIi0J/QvtC60LDQt9Cw0YLRjCDQtNC4
0LDQu9C+0LMg0L/QvtC00YLQstC10YDQttC00LXQvdC40Y8g0L/QtdGA0LXQt9Cw0L/QuNGB0Lgi
IiIKICAgICAgICBkaWFsb2cgPSBPdmVyd3JpdGVEaWFsb2coZmlsZW5hbWUsIHNvdXJjZV9pbmZv
LCBkZXN0X2luZm8sIGNhbGxiYWNrLCBzaG93X3ZlcnNpb25fb3B0aW9ucz1pc19zM19kZXN0KQog
ICAgICAgIHNlbGYuc2hvd19kaWFsb2coZGlhbG9nKQoKICAgIGRlZiBfZG9fY29weV93aXRoX3By
b2dyZXNzKHNlbGYsIGFuYWx5emVkLCBzb3VyY2VfcGFuZWwsIGRlc3RfcGFuZWwsIHRhcmdldF9u
YW1lLCBmb2N1c19uYW1lLCBpc19tb3ZlPUZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgdG90YWxfYnl0ZXM9MCwgcmVzdG9yZV9pbmRleD1Ob25lLCBvbl9jb21wbGV0ZT1Ob25l
KToKICAgICAgICAiIiIKICAgICAgICDQktGL0L/QvtC70L3Rj9C10YIg0LrQvtC/0LjRgNC+0LLQ
sNC90LjQtSDQuNC70Lgg0L/QtdGA0LXQvNC10YnQtdC90LjQtSDRhNCw0LnQu9C+0LIv0LLQtdGA
0YHQuNC5INCyINGE0L7QvdC+0LLQvtC8INC/0L7RgtC+0LrQtSDRgSDQvtGC0L7QsdGA0LDQttC1
0L3QuNC10Lwg0LzQvtC00LDQu9GM0L3QvtCz0L4g0L7QutC90LAg0L/RgNC+0LPRgNC10YHRgdCw
LgoKICAgICAgICDQkNGA0LPRg9C80LXQvdGC0Ys6CiAgICAgICAgICAgIGFuYWx5emVkIChsaXN0
KTog0KHQv9C40YHQvtC6INGB0YLRgNGD0LrRgtGD0YAg0LTQsNC90L3Ri9GFICjRhNCw0LnQu9C+
0LIv0L/QsNC/0L7QuiksINC/0L7QtNCz0L7RgtC+0LLQu9C10L3QvdGL0YUg0LTQu9GPINC60L7Q
v9C40YDQvtCy0LDQvdC40Y8uCiAgICAgICAgICAgIHNvdXJjZV9wYW5lbCAoUGFuZWxXaWRnZXQp
OiDQkNC60YLQuNCy0L3QsNGPINC/0LDQvdC10LvRjCAo0LjRgdGC0L7Rh9C90LjQuiksINC+0YLQ
utGD0LTQsCDQsdC10YDRg9GC0YHRjyDRhNCw0LnQu9GLLgogICAgICAgICAgICBkZXN0X3BhbmVs
IChQYW5lbFdpZGdldCk6INCd0LXQsNC60YLQuNCy0L3QsNGPINC/0LDQvdC10LvRjCAo0L3QsNC3
0L3QsNGH0LXQvdC40LUpLCDQutGD0LTQsCDQutC+0L/QuNGA0YPRjtGC0YHRjyDQtNCw0L3QvdGL
0LUuCiAgICAgICAgICAgIHRhcmdldF9uYW1lIChzdHIpOiDQndC+0LLQvtC1INC40LzRjyDQtNC7
0Y8g0YbQtdC70LXQstC+0LPQviDQvtCx0YrQtdC60YLQsCAo0LjRgdC/0L7Qu9GM0LfRg9C10YLR
gdGPINC/0YDQuCDQv9C10YDQtdC40LzQtdC90L7QstCw0L3QuNC4L9C60L7Qv9C40YDQvtCy0LDQ
vdC40Lgg0L7QtNC90L7Qs9C+INGE0LDQudC70LApINC40LvQuCDQv9GA0LXRhNC40LrRgS4KICAg
ICAgICAgICAgZm9jdXNfbmFtZSAoc3RyKTog0JjQvNGPINGE0LDQudC70LAg0LIg0LjRgdGF0L7Q
tNC90L7QuSDQv9Cw0L3QtdC70LgsINC90LAg0LrQvtGC0L7RgNGL0Lkg0YHQu9C10LTRg9C10YIg
0YPRgdGC0LDQvdC+0LLQuNGC0Ywg0LrRg9GA0YHQvtGAINC/0L7RgdC70LUg0LfQsNCy0LXRgNGI
0LXQvdC40Y8g0L7Qv9C10YDQsNGG0LjQuCAo0LXRgdC70LggcmVzdG9yZV9pbmRleCDQvdC1INC3
0LDQtNCw0L0pLgogICAgICAgICAgICBpc19tb3ZlIChib29sKTog0KTQu9Cw0LMg0L7Qv9C10YDQ
sNGG0LjQuCDQv9C10YDQtdC80LXRidC10L3QuNGPLiDQldGB0LvQuCBUcnVlLCDQv9C+0YHQu9C1
INGD0YHQv9C10YjQvdC+0LPQviDQutC+0L/QuNGA0L7QstCw0L3QuNGPINC40YHRhdC+0LTQvdGL
0LUg0L7QsdGK0LXQutGC0Ysg0YPQtNCw0LvRj9GO0YLRgdGPLgogICAgICAgICAgICB0b3RhbF9i
eXRlcyAoaW50KTog0J7QsdGJ0LjQuSDQvtCx0YrQtdC8INC00LDQvdC90YvRhSDQsiDQsdCw0LnR
gtCw0YUg0LTQu9GPINC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNC4INGI0LrQsNC70Ysg0L/RgNC+
0LPRgNC10YHRgdCwLgogICAgICAgICAgICByZXN0b3JlX2luZGV4IChpbnQpOiDQmNC90LTQtdC6
0YEg0L/QvtC30LjRhtC40Lgg0LrRg9GA0YHQvtGA0LAg0LIg0LjRgdGF0L7QtNC90L7QuSDQv9Cw
0L3QtdC70LgsINC60L7RgtC+0YDRi9C5INC90YPQttC90L4g0LbQtdGB0YLQutC+INCy0L7RgdGB
0YLQsNC90L7QstC40YLRjCDQv9C+0YHQu9C1IHJlZnJlc2goKSAo0L/QvtC70LXQt9C90L4g0LTQ
u9GPINCy0LXRgNGB0LjQuSkuCiAgICAgICAgICAgIG9uX2NvbXBsZXRlIChjYWxsYWJsZSk6INCk
0YPQvdC60YbQuNGPINC+0LHRgNCw0YLQvdC+0LPQviDQstGL0LfQvtCy0LAsINC60L7RgtC+0YDQ
sNGPINCy0YvQv9C+0LvQvdGP0LXRgtGB0Y8g0L/QvtGB0LvQtSDQt9Cw0LrRgNGL0YLQuNGPINC+
0LrQvdCwINC/0YDQvtCz0YDQtdGB0YHQsCAo0L3QsNC/0YDQuNC80LXRgCwg0LTQu9GPINC/0LXR
gNC10L7RgtC60YDRi9GC0LjRjyDQtNC40LDQu9C+0LPQsCDQstC10YDRgdC40LkpLgogICAgICAg
ICIiIgoKICAgICAgICB0b3RhbF9maWxlcyA9IHN1bShsZW4oYVsnZmlsZXMnXSkgZm9yIGEgaW4g
YW5hbHl6ZWQpCgogICAgICAgIG9wZXJhdGlvbiA9ICdNb3ZpbmcnIGlmIGlzX21vdmUgZWxzZSAn
Q29weWluZycKICAgICAgICBwcm9ncmVzcyA9IFByb2dyZXNzRGlhbG9nKGYne29wZXJhdGlvbn0g
ZmlsZXMuLi4nLCBjYWxsYmFjaz1zZWxmLmNsb3NlX2RpYWxvZykKICAgICAgICBwcm9ncmVzcy5z
ZXRfdG90YWwodG90YWxfZmlsZXMsIHRvdGFsX2J5dGVzKQogICAgICAgIHNlbGYuc2hvd19kaWFs
b2cocHJvZ3Jlc3MpCgogICAgICAgIGl0ZW1zX3RvX2RlbGV0ZSA9IFtdCiAgICAgICAgdXNlcl9j
aG9pY2UgPSB7J3ZhbHVlJzogTm9uZX0KICAgICAgICBjaG9pY2VfZXZlbnQgPSB0aHJlYWRpbmcu
RXZlbnQoKQoKICAgICAgICBkZWYgY29weV90aHJlYWQoKToKICAgICAgICAgICAgZm9yIGl0ZW1f
ZGF0YSBpbiBhbmFseXplZDoKICAgICAgICAgICAgICAgIGlmIHByb2dyZXNzLmNhbmNlbGxlZDoK
ICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgICAgIGl0ZW1fdHlwZSA9IGl0
ZW1fZGF0YVsndHlwZSddCiAgICAgICAgICAgICAgICBpdGVtID0gaXRlbV9kYXRhWydpdGVtJ10K
CiAgICAgICAgICAgICAgICAjIEZTINGE0LDQudC7IC0+IFMzCiAgICAgICAgICAgICAgICBpZiBp
dGVtX3R5cGUgPT0gJ2ZzX2ZpbGUnIGFuZCBkZXN0X3BhbmVsLm1vZGUgPT0gJ3MzJyBhbmQgZGVz
dF9wYW5lbC5jdXJyZW50X2J1Y2tldDoKICAgICAgICAgICAgICAgICAgICBzb3VyY2VfcGF0aCA9
IG9zLnBhdGguam9pbihzb3VyY2VfcGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIGl0ZW1b
J25hbWUnXSkKCiAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGFuYWx5emVkKSA9PSAxOgogICAg
ICAgICAgICAgICAgICAgICAgICBkZXN0X2tleSA9IHRhcmdldF9uYW1lIGlmIHRhcmdldF9uYW1l
IGVsc2UgaXRlbVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAg
ICAgICAgICAgICAgaWYgdGFyZ2V0X25hbWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBk
ZXN0X2tleSA9IHRhcmdldF9uYW1lLnJzdHJpcCgnLycpICsgJy8nICsgaXRlbVsnbmFtZSddCiAg
ICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBk
ZXN0X2tleSA9IGl0ZW1bJ25hbWUnXQoKICAgICAgICAgICAgICAgICAgICAjINCf0YDQvtCy0LXR
gNC60LAg0YHRg9GJ0LXRgdGC0LLQvtCy0LDQvdC40Y8KICAgICAgICAgICAgICAgICAgICBpZiBu
b3Qgc2VsZi5vdmVyd3JpdGVfYWxsIGFuZCBub3Qgc2VsZi52ZXJzaW9uX2FsbCBhbmQgbm90IHNl
bGYuc2tpcF9hbGw6CiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gZGVzdF9wYW5l
bC5zM19tYW5hZ2VyLm9iamVjdF9leGlzdHMoZGVzdF9wYW5lbC5jdXJyZW50X2J1Y2tldCwgZGVz
dF9rZXkpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGV4aXN0aW5nOgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc291cmNlX2luZm8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2luZm8gPSB7CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiBleGlzdGluZy5nZXQoJ1NpemUnLCAwKSwKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbXRpbWUnOiBleGlzdGluZy5nZXQoJ0xhc3RN
b2RpZmllZCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZGVmIHNob3dfb3ZlcndyaXRlX2RpYWxvZygpOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGRlZiBvbl9jaG9pY2UoY2hvaWNlKToKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPSBjaG9pY2UKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LnNldCgpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhwcm9ncmVzcykKCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2hlY2tfb3ZlcndyaXRlKGl0ZW1bJ25h
bWUnXSwgc291cmNlX2luZm8sIGRlc3RfaW5mbywgb25fY2hvaWNlLCBpc19zM19kZXN0PVRydWUp
CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLnNldF9hbGFybV9pbigwLCBs
YW1iZGEgKmFyZ3M6IHNob3dfb3ZlcndyaXRlX2RpYWxvZygpKQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgY2hvaWNlX2V2ZW50LndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
Y2hvaWNlX2V2ZW50LmNsZWFyKCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB1c2Vy
X2Nob2ljZVsndmFsdWUnXSA9PSAnY2FuY2VsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBwcm9ncmVzcy5jYW5jZWxsZWQgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2Vb
J3ZhbHVlJ10gPT0gJ2FsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5v
dmVyd3JpdGVfYWxsID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2Vy
X2Nob2ljZVsndmFsdWUnXSA9PSAndmVyc2lvbl9hbGwnOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHNlbGYudmVyc2lvbl9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdza2lwJzoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoaXRlbVsnbmFtZSddLCAwKQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdza2lwX2FsbCc6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgc2VsZi5za2lwX2FsbCA9IFRydWUKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoaXRlbVsnbmFtZSddLCAwKQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICd2ZXJzaW9uJzoKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBwYXNzICAjINCf0YDQvtGB0YLQviDQt9Cw0LPRgNGD0LbQsNC1
0LwsIFMzINGB0L7Qt9C00LDRgdGCINCy0LXRgNGB0LjRjgoKICAgICAgICAgICAgICAgICAgICBp
ZiBzZWxmLnNraXBfYWxsOgogICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUo
aXRlbVsnbmFtZSddLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAg
ICAgICAgICAgICAgICBmaWxlX3NpemUgPSBpdGVtLmdldCgnc2l6ZScsIDApCiAgICAgICAgICAg
ICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKGl0ZW1bJ25hbWUnXSwgZmlsZV9zaXplKQogICAgICAg
ICAgICAgICAgICAgIHNlbGYubG9vcC5kcmF3X3NjcmVlbigpCgogICAgICAgICAgICAgICAgICAg
IGlmIGRlc3RfcGFuZWwuczNfbWFuYWdlci51cGxvYWRfZmlsZShzb3VyY2VfcGF0aCwgZGVzdF9w
YW5lbC5jdXJyZW50X2J1Y2tldCwgZGVzdF9rZXkpOgogICAgICAgICAgICAgICAgICAgICAgICBw
cm9ncmVzcy5hZGRfc3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzX21vdmU6
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtc190b19kZWxldGUuYXBwZW5kKGl0ZW1f
ZGF0YSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBw
cm9ncmVzcy5hZGRfZmFpbHVyZSgpCgogICAgICAgICAgICAgICAgIyBGUyDQtNC40YDQtdC60YLQ
vtGA0LjRjyAtPiBTMwogICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ2ZzX2Rpcicg
YW5kIGRlc3RfcGFuZWwubW9kZSA9PSAnczMnIGFuZCBkZXN0X3BhbmVsLmN1cnJlbnRfYnVja2V0
OgogICAgICAgICAgICAgICAgICAgIGFsbF9zdWNjZXNzID0gVHJ1ZQogICAgICAgICAgICAgICAg
ICAgIGZvciBmaWxlX2luZm8gaW4gaXRlbV9kYXRhWydmaWxlcyddOgogICAgICAgICAgICAgICAg
ICAgICAgICBpZiBwcm9ncmVzcy5jYW5jZWxsZWQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBicmVhawoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGFuYWx5emVkKSA9PSAxOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0X25hbWU6CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZGVzdF9rZXkgPSB0YXJnZXRfbmFtZS5yc3RyaXAoJy8nKSArICcv
JyArIGZpbGVfaW5mb1sncmVsX3BhdGgnXS5yZXBsYWNlKG9zLnNlcCwgJy8nKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBk
ZXN0X2tleSA9IGZpbGVfaW5mb1sncmVsX3BhdGgnXS5yZXBsYWNlKG9zLnNlcCwgJy8nKQogICAg
ICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYg
dGFyZ2V0X25hbWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9rZXkgPSB0
YXJnZXRfbmFtZS5yc3RyaXAoJy8nKSArICcvJyArIGl0ZW1bJ25hbWUnXSArICcvJyArIGZpbGVf
aW5mb1sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3JlbF9wYXRoJ10ucmVw
bGFjZShvcy5zZXAsICcvJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9rZXkgPSBpdGVtWyduYW1lJ10gKyAnLycg
KyBmaWxlX2luZm9bJ3JlbF9wYXRoJ10ucmVwbGFjZShvcy5zZXAsICcvJykKCiAgICAgICAgICAg
ICAgICAgICAgICAgICMg0J/RgNC+0LLQtdGA0LrQsCDRgdGD0YnQtdGB0YLQstC+0LLQsNC90LjR
jyDQtNC70Y8g0YTQsNC50LvQvtCyINCyINC00LjRgNC10LrRgtC+0YDQuNC4CiAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIG5vdCBzZWxmLm92ZXJ3cml0ZV9hbGwgYW5kIG5vdCBzZWxmLnZlcnNp
b25fYWxsIGFuZCBub3Qgc2VsZi5za2lwX2FsbDoKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGV4aXN0aW5nID0gZGVzdF9wYW5lbC5zM19tYW5hZ2VyLm9iamVjdF9leGlzdHMoZGVzdF9wYW5l
bC5jdXJyZW50X2J1Y2tldCwgZGVzdF9rZXkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBp
ZiBleGlzdGluZzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXQgPSBvcy5zdGF0KGZpbGVfaW5mb1sncGF0
aCddKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfaW5mbyA9IHsK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplJzogc3RhdC5zdF9z
aXplLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ210aW1lJzogZGF0
ZXRpbWUuZnJvbXRpbWVzdGFtcChzdGF0LnN0X210aW1lKQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3Rf
aW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplJzog
ZXhpc3RpbmcuZ2V0KCdTaXplJywgMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAnbXRpbWUnOiBleGlzdGluZy5nZXQoJ0xhc3RNb2RpZmllZCcpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGRlZiBzaG93X292ZXJ3cml0ZV9kaWFsb2coKToKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGRlZiBvbl9jaG9pY2UoY2hvaWNlKToKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2Nob2ljZVsndmFsdWUnXSA9IGNob2lj
ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVu
dC5zZXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYu
Y2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzZWxmLnNob3dfZGlhbG9nKHByb2dyZXNzKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHNlbGYuX2NoZWNrX292ZXJ3cml0ZShmaWxlX2luZm9bJ3JlbF9wYXRoJ10s
IHNvdXJjZV9pbmZvLCBkZXN0X2luZm8sIG9uX2Nob2ljZSwKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zM19kZXN0PVRydWUp
CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvb3Auc2V0X2FsYXJt
X2luKDAsIGxhbWJkYSAqYXJnczogc2hvd19vdmVyd3JpdGVfZGlhbG9nKCkpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC53YWl0KCkKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LmNsZWFyKCkKCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdjYW5j
ZWwnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuY2Fu
Y2VsbGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJl
YWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsn
dmFsdWUnXSA9PSAnYWxsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHNlbGYub3ZlcndyaXRlX2FsbCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAndmVyc2lvbl9hbGwnOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi52ZXJzaW9uX2FsbCA9IFRydWUK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFs
dWUnXSA9PSAnc2tpcCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBw
cm9ncmVzcy51cGRhdGUoZmlsZV9pbmZvWydyZWxfcGF0aCddLCAwKQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnc2tpcF9hbGwnOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5za2lwX2FsbCA9IFRydWUK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShm
aWxlX2luZm9bJ3JlbF9wYXRoJ10sIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgICAg
ICAgICAgICAgaWYgc2VsZi5za2lwX2FsbDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBy
b2dyZXNzLnVwZGF0ZShmaWxlX2luZm9bJ3JlbF9wYXRoJ10sIDApCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZV9zaXplID0g
ZmlsZV9pbmZvLmdldCgnc2l6ZScsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNz
LnVwZGF0ZShmaWxlX2luZm9bJ3JlbF9wYXRoJ10sIGZpbGVfc2l6ZSkKICAgICAgICAgICAgICAg
ICAgICAgICAgc2VsZi5sb29wLmRyYXdfc2NyZWVuKCkKCiAgICAgICAgICAgICAgICAgICAgICAg
IGlmIGRlc3RfcGFuZWwuczNfbWFuYWdlci51cGxvYWRfZmlsZShmaWxlX2luZm9bJ3BhdGgnXSwg
ZGVzdF9wYW5lbC5jdXJyZW50X2J1Y2tldCwgZGVzdF9rZXkpOgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgcHJvZ3Jlc3MuYWRkX3N1Y2Nlc3MoKQogICAgICAgICAgICAgICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX2ZhaWx1cmUoKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsX3N1Y2Nlc3MgPSBGYWxzZQoKICAgICAgICAg
ICAgICAgICAgICBpZiBhbGxfc3VjY2VzcyBhbmQgaXNfbW92ZToKICAgICAgICAgICAgICAgICAg
ICAgICAgaXRlbXNfdG9fZGVsZXRlLmFwcGVuZChpdGVtX2RhdGEpCgogICAgICAgICAgICAgICAg
IyBTMyDRhNCw0LnQuyAtPiBGUwogICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ3Mz
X2ZpbGUnIGFuZCBkZXN0X3BhbmVsLm1vZGUgPT0gJ2ZzJzoKICAgICAgICAgICAgICAgICAgICBp
ZiBsZW4oYW5hbHl6ZWQpID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9zLnBhdGgu
aXNhYnModGFyZ2V0X25hbWUpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9wYXRo
ID0gdGFyZ2V0X25hbWUKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGRlc3RfcGF0aCA9IG9zLnBhdGguam9pbihkZXN0X3BhbmVsLmZzX2Jy
b3dzZXIuY3VycmVudF9wYXRoLCB0YXJnZXRfbmFtZSkKICAgICAgICAgICAgICAgICAgICBlbHNl
OgogICAgICAgICAgICAgICAgICAgICAgICBpZiB0YXJnZXRfbmFtZToKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGJhc2VfZGlyID0gb3MucGF0aC5qb2luKGRlc3RfcGFuZWwuZnNfYnJvd3Nl
ci5jdXJyZW50X3BhdGgsIHRhcmdldF9uYW1lKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNl
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZV9kaXIgPSBkZXN0X3BhbmVsLmZzX2Jy
b3dzZXIuY3VycmVudF9wYXRoCiAgICAgICAgICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKGJh
c2VfZGlyLCBleGlzdF9vaz1UcnVlKQogICAgICAgICAgICAgICAgICAgICAgICBkZXN0X3BhdGgg
PSBvcy5wYXRoLmpvaW4oYmFzZV9kaXIsIGl0ZW1bJ25hbWUnXSkKCiAgICAgICAgICAgICAgICAg
ICAgIyDQn9GA0L7QstC10YDQutCwINGB0YPRidC10YHRgtCy0L7QstCw0L3QuNGPCiAgICAgICAg
ICAgICAgICAgICAgaWYgbm90IHNlbGYub3ZlcndyaXRlX2FsbCBhbmQgbm90IHNlbGYuc2tpcF9h
bGw6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKGRlc3RfcGF0aCk6
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfaW5mbyA9IHsKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6IGl0ZW0uZ2V0KCdzaXplJywgMCksCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgJ210aW1lJzogaXRlbS5nZXQoJ210aW1lJykKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAjICdzaXplJzogaXRlbVsnc2l6ZSddLAogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICMgJ210aW1lJzogaXRlbVsnbXRpbWUnXQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3Rp
bmdfc3RhdCA9IG9zLnN0YXQoZGVzdF9wYXRoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZGVzdF9pbmZvID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplJzogZXhp
c3Rpbmdfc3RhdC5zdF9zaXplLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtdGlt
ZSc6IGRhdGV0aW1lLmZyb210aW1lc3RhbXAoZXhpc3Rpbmdfc3RhdC5zdF9tdGltZSkKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYg
c2hvd19vdmVyd3JpdGVfZGlhbG9nKCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZGVmIG9uX2Nob2ljZShjaG9pY2UpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1c2VyX2Nob2ljZVsndmFsdWUnXSA9IGNob2ljZQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBjaG9pY2VfZXZlbnQuc2V0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzZWxmLnNob3dfZGlhbG9nKHByb2dyZXNzKQoKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzZWxmLl9jaGVja19vdmVyd3JpdGUoaXRlbVsnbmFtZSddLCBzb3VyY2VfaW5m
bywgZGVzdF9pbmZvLCBvbl9jaG9pY2UsIGlzX3MzX2Rlc3Q9RmFsc2UpCgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc2VsZi5sb29wLnNldF9hbGFybV9pbigwLCBsYW1iZGEgKmFyZ3M6IHNo
b3dfb3ZlcndyaXRlX2RpYWxvZygpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNl
X2V2ZW50LndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LmNs
ZWFyKCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB1c2VyX2Nob2ljZVsndmFsdWUn
XSA9PSAnY2FuY2VsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5j
YW5jZWxsZWQgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ2Fs
bCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vdmVyd3JpdGVfYWxsID0g
VHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUn
XSA9PSAnc2tpcCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBk
YXRlKGl0ZW1bJ25hbWUnXSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250
aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUn
XSA9PSAnc2tpcF9hbGwnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2tp
cF9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBk
YXRlKGl0ZW1bJ25hbWUnXSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250
aW51ZQoKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnNraXBfYWxsOgogICAgICAgICAgICAg
ICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoaXRlbVsnbmFtZSddLCAwKQogICAgICAgICAgICAg
ICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICBvcy5tYWtlZGlycyhvcy5w
YXRoLmRpcm5hbWUoZGVzdF9wYXRoKSwgZXhpc3Rfb2s9VHJ1ZSkKCiAgICAgICAgICAgICAgICAg
ICAgZmlsZV9zaXplID0gaXRlbS5nZXQoJ3NpemUnLCAwKQogICAgICAgICAgICAgICAgICAgIHBy
b2dyZXNzLnVwZGF0ZShpdGVtWyduYW1lJ10sIGZpbGVfc2l6ZSkKICAgICAgICAgICAgICAgICAg
ICBzZWxmLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICAgICAgICAgICAgICBpZiBzb3VyY2Vf
cGFuZWwuczNfbWFuYWdlci5kb3dubG9hZF9vYmplY3Qoc291cmNlX3BhbmVsLmN1cnJlbnRfYnVj
a2V0LCBpdGVtWydrZXknXSwgZGVzdF9wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uX2lkPWl0ZW0uZ2V0KCdW
ZXJzaW9uSWQnKSk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFkZF9zdWNjZXNz
KCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaXNfbW92ZToKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGl0ZW1zX3RvX2RlbGV0ZS5hcHBlbmQoaXRlbV9kYXRhKQogICAgICAgICAgICAg
ICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFkZF9mYWlsdXJl
KCkKCiAgICAgICAgICAgICAgICAjIFMzINC00LjRgNC10LrRgtC+0YDQuNGPIC0+IEZTCiAgICAg
ICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnczNfZGlyJyBhbmQgZGVzdF9wYW5lbC5tb2Rl
ID09ICdmcyc6CiAgICAgICAgICAgICAgICAgICAgYWxsX3N1Y2Nlc3MgPSBUcnVlCiAgICAgICAg
ICAgICAgICAgICAgZm9yIG9iaiBpbiBpdGVtX2RhdGFbJ2ZpbGVzJ106CiAgICAgICAgICAgICAg
ICAgICAgICAgIGlmIHByb2dyZXNzLmNhbmNlbGxlZDoKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGJyZWFrCgogICAgICAgICAgICAgICAgICAgICAgICByZWxfa2V5ID0gb2JqWydLZXknXVts
ZW4oaXRlbVsna2V5J10pOl0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbihhbmFseXpl
ZCkgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRhcmdldF9uYW1lOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RfcGF0aCA9IG9zLnBhdGguam9pbihkZXN0
X3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCB0YXJnZXRfbmFtZSwKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsX2tleS5yZXBs
YWNlKCcvJywgb3Muc2VwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9wYXRoID0gb3MucGF0aC5qb2luKGRlc3Rf
cGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbF9rZXkucmVwbGFjZSgnLycsIG9zLnNl
cCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBpZiB0YXJnZXRfbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0
X3BhdGggPSBvcy5wYXRoLmpvaW4oZGVzdF9wYW5lbC5mc19icm93c2VyLmN1cnJlbnRfcGF0aCwg
dGFyZ2V0X25hbWUsIGl0ZW1bJ25hbWUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsX2tleS5yZXBsYWNlKCcvJywgb3Muc2VwKSkK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZGVzdF9wYXRoID0gb3MucGF0aC5qb2luKGRlc3RfcGFuZWwuZnNfYnJvd3Nlci5j
dXJyZW50X3BhdGgsIGl0ZW1bJ25hbWUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsX2tleS5yZXBsYWNlKCcvJywgb3Muc2VwKSkK
CiAgICAgICAgICAgICAgICAgICAgICAgICMg0J/RgNC+0LLQtdGA0LrQsCDRgdGD0YnQtdGB0YLQ
stC+0LLQsNC90LjRjwogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc2VsZi5vdmVyd3Jp
dGVfYWxsIGFuZCBub3Qgc2VsZi5za2lwX2FsbDoKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGlmIG9zLnBhdGguZXhpc3RzKGRlc3RfcGF0aCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc291cmNlX2luZm8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICdzaXplJzogb2JqLmdldCgnU2l6ZScsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAnbXRpbWUnOiBvYmouZ2V0KCdMYXN0TW9kaWZpZWQnLCBkYXRldGltZS5ub3coKSkK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZXhpc3Rpbmdfc3RhdCA9IG9zLnN0YXQoZGVzdF9wYXRoKQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGRlc3RfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgJ3NpemUnOiBleGlzdGluZ19zdGF0LnN0X3NpemUsCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICdtdGltZSc6IGRhdGV0aW1lLmZyb210aW1lc3RhbXAoZXhp
c3Rpbmdfc3RhdC5zdF9tdGltZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Cgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBzaG93X292ZXJ3cml0ZV9kaWFsb2co
KToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG9uX2Nob2ljZShjaG9p
Y2UpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9jaG9pY2Vb
J3ZhbHVlJ10gPSBjaG9pY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGNob2ljZV9ldmVudC5zZXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2VsZi5jbG9zZV9kaWFsb2coKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc2VsZi5zaG93X2RpYWxvZyhwcm9ncmVzcykKCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHNlbGYuX2NoZWNrX292ZXJ3cml0ZShyZWxfa2V5LCBzb3VyY2VfaW5mbywg
ZGVzdF9pbmZvLCBvbl9jaG9pY2UsIGlzX3MzX2Rlc3Q9RmFsc2UpCgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYubG9vcC5zZXRfYWxhcm1faW4oMCwgbGFtYmRhICphcmdzOiBz
aG93X292ZXJ3cml0ZV9kaWFsb2coKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
aG9pY2VfZXZlbnQud2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNl
X2V2ZW50LmNsZWFyKCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdXNlcl9j
aG9pY2VbJ3ZhbHVlJ10gPT0gJ2NhbmNlbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHByb2dyZXNzLmNhbmNlbGxlZCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIHVz
ZXJfY2hvaWNlWyd2YWx1ZSddID09ICdhbGwnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzZWxmLm92ZXJ3cml0ZV9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnc2tpcCc6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShyZWxfa2V5LCAwKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXBfYWxsJzoK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5za2lwX2FsbCA9IFRydWUK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKHJlbF9r
ZXksIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAg
ICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnNraXBfYWxsOgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKHJlbF9rZXksIDApCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgb3MubWFrZWRpcnMob3Mu
cGF0aC5kaXJuYW1lKGRlc3RfcGF0aCksIGV4aXN0X29rPVRydWUpCgogICAgICAgICAgICAgICAg
ICAgICAgICBmaWxlX3NpemUgPSBvYmouZ2V0KCdTaXplJywgMCkKICAgICAgICAgICAgICAgICAg
ICAgICAgcHJvZ3Jlc3MudXBkYXRlKHJlbF9rZXksIGZpbGVfc2l6ZSkKICAgICAgICAgICAgICAg
ICAgICAgICAgc2VsZi5sb29wLmRyYXdfc2NyZWVuKCkKCiAgICAgICAgICAgICAgICAgICAgICAg
IGlmIHNvdXJjZV9wYW5lbC5zM19tYW5hZ2VyLmRvd25sb2FkX29iamVjdChzb3VyY2VfcGFuZWwu
Y3VycmVudF9idWNrZXQsIG9ialsnS2V5J10sIGRlc3RfcGF0aCk6CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBwcm9ncmVzcy5hZGRfc3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgICAg
IGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfZmFpbHVyZSgp
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxfc3VjY2VzcyA9IEZhbHNlCgogICAgICAg
ICAgICAgICAgICAgIGlmIGFsbF9zdWNjZXNzIGFuZCBpc19tb3ZlOgogICAgICAgICAgICAgICAg
ICAgICAgICBpdGVtc190b19kZWxldGUuYXBwZW5kKGl0ZW1fZGF0YSkKCiAgICAgICAgICAgICAg
ICAjIFMzINGE0LDQudC7IC0+IFMzCiAgICAgICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAn
czNfZmlsZScgYW5kIGRlc3RfcGFuZWwubW9kZSA9PSAnczMnIGFuZCBkZXN0X3BhbmVsLmN1cnJl
bnRfYnVja2V0OgogICAgICAgICAgICAgICAgICAgIGlmIGxlbihhbmFseXplZCkgPT0gMToKICAg
ICAgICAgICAgICAgICAgICAgICAgZGVzdF9rZXkgPSB0YXJnZXRfbmFtZSBpZiB0YXJnZXRfbmFt
ZSBlbHNlIGl0ZW1bJ25hbWUnXQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIHRhcmdldF9uYW1lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZGVzdF9rZXkgPSB0YXJnZXRfbmFtZS5yc3RyaXAoJy8nKSArICcvJyArIGl0ZW1bJ25hbWUnXQog
ICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZGVzdF9rZXkgPSBpdGVtWyduYW1lJ10KCiAgICAgICAgICAgICAgICAgICAgIyDQn9GA0L7QstC1
0YDQutCwINGB0YPRidC10YHRgtCy0L7QstCw0L3QuNGPCiAgICAgICAgICAgICAgICAgICAgaWYg
bm90IHNlbGYub3ZlcndyaXRlX2FsbCBhbmQgbm90IHNlbGYudmVyc2lvbl9hbGwgYW5kIG5vdCBz
ZWxmLnNraXBfYWxsOgogICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZyA9IGRlc3RfcGFu
ZWwuczNfbWFuYWdlci5vYmplY3RfZXhpc3RzKGRlc3RfcGFuZWwuY3VycmVudF9idWNrZXQsIGRl
c3Rfa2V5KQogICAgICAgICAgICAgICAgICAgICAgICBpZiBleGlzdGluZzoKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHNvdXJjZV9pbmZvID0gewogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICdzaXplJzogaXRlbS5nZXQoJ3NpemUnLCAwKSwKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAnbXRpbWUnOiBpdGVtLmdldCgnbXRpbWUnLCBkYXRldGltZS5ub3coKSkKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRl
c3RfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6IGV4aXN0
aW5nLmdldCgnU2l6ZScsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtdGlt
ZSc6IGV4aXN0aW5nLmdldCgnTGFzdE1vZGlmaWVkJykKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgc2hvd19vdmVyd3JpdGVfZGlh
bG9nKCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG9uX2Nob2ljZShjaG9p
Y2UpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2Nob2ljZVsndmFs
dWUnXSA9IGNob2ljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2Vf
ZXZlbnQuc2V0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9z
ZV9kaWFsb2coKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3df
ZGlhbG9nKHByb2dyZXNzKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9j
aGVja19vdmVyd3JpdGUoaXRlbVsnbmFtZSddLCBzb3VyY2VfaW5mbywgZGVzdF9pbmZvLCBvbl9j
aG9pY2UsIGlzX3MzX2Rlc3Q9VHJ1ZSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxm
Lmxvb3Auc2V0X2FsYXJtX2luKDAsIGxhbWJkYSAqYXJnczogc2hvd19vdmVyd3JpdGVfZGlhbG9n
KCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQud2FpdCgpCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQuY2xlYXIoKQoKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdjYW5jZWwnOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmNhbmNlbGxlZCA9IFRydWUKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnYWxsJzoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzZWxmLm92ZXJ3cml0ZV9hbGwgPSBUcnVlCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICd2ZXJzaW9uX2FsbCc6
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi52ZXJzaW9uX2FsbCA9IFRydWUK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0g
J3NraXAnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShp
dGVtWyduYW1lJ10sIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0g
J3NraXBfYWxsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNraXBfYWxs
ID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShp
dGVtWyduYW1lJ10sIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUK
CiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5za2lwX2FsbDoKICAgICAgICAgICAgICAgICAg
ICAgICAgcHJvZ3Jlc3MudXBkYXRlKGl0ZW1bJ25hbWUnXSwgMCkKICAgICAgICAgICAgICAgICAg
ICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgZmlsZV9zaXplID0gaXRlbS5nZXQo
J3NpemUnLCAwKQogICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShpdGVtWyduYW1l
J10sIGZpbGVfc2l6ZSkKICAgICAgICAgICAgICAgICAgICBzZWxmLmxvb3AuZHJhd19zY3JlZW4o
KQoKICAgICAgICAgICAgICAgICAgICBpZiBzb3VyY2VfcGFuZWwuczNfbWFuYWdlci5jb3B5X29i
amVjdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9wYW5lbC5jdXJyZW50X2J1
Y2tldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1bJ2tleSddLAogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZGVzdF9wYW5lbC5jdXJyZW50X2J1Y2tldCwKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGRlc3Rfa2V5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVy
c2lvbl9pZD1pdGVtLmdldCgnVmVyc2lvbklkJykKICAgICAgICAgICAgICAgICAgICApOgogICAg
ICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfc3VjY2VzcygpCiAgICAgICAgICAgICAg
ICAgICAgICAgIGlmIGlzX21vdmU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtc190
b19kZWxldGUuYXBwZW5kKGl0ZW1fZGF0YSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfZmFpbHVyZSgpCgogICAgICAgICAgICAg
ICAgIyBTMyDQtNC40YDQtdC60YLQvtGA0LjRjyAtPiBTMwogICAgICAgICAgICAgICAgZWxpZiBp
dGVtX3R5cGUgPT0gJ3MzX2RpcicgYW5kIGRlc3RfcGFuZWwubW9kZSA9PSAnczMnIGFuZCBkZXN0
X3BhbmVsLmN1cnJlbnRfYnVja2V0OgogICAgICAgICAgICAgICAgICAgIGFsbF9zdWNjZXNzID0g
VHJ1ZQogICAgICAgICAgICAgICAgICAgIGZvciBvYmogaW4gaXRlbV9kYXRhWydmaWxlcyddOgog
ICAgICAgICAgICAgICAgICAgICAgICBpZiBwcm9ncmVzcy5jYW5jZWxsZWQ6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgICAgICAgICAgICAgcmVsX2tleSA9
IG9ialsnS2V5J11bbGVuKGl0ZW1bJ2tleSddKTpdCgogICAgICAgICAgICAgICAgICAgICAgICBp
ZiBsZW4oYW5hbHl6ZWQpID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0YXJn
ZXRfbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2tleSA9IHRhcmdl
dF9uYW1lLnJzdHJpcCgnLycpICsgJy8nICsgcmVsX2tleQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2tleSA9IHJl
bF9rZXkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGlmIHRhcmdldF9uYW1lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRl
c3Rfa2V5ID0gdGFyZ2V0X25hbWUucnN0cmlwKCcvJykgKyAnLycgKyBpdGVtWyduYW1lJ10gKyAn
LycgKyByZWxfa2V5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGRlc3Rfa2V5ID0gaXRlbVsnbmFtZSddICsgJy8nICsgcmVs
X2tleQoKICAgICAgICAgICAgICAgICAgICAgICAgIyDQn9GA0L7QstC10YDQutCwINGB0YPRidC1
0YHRgtCy0L7QstCw0L3QuNGPCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLm92
ZXJ3cml0ZV9hbGwgYW5kIG5vdCBzZWxmLnZlcnNpb25fYWxsIGFuZCBub3Qgc2VsZi5za2lwX2Fs
bDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gZGVzdF9wYW5lbC5zM19t
YW5hZ2VyLm9iamVjdF9leGlzdHMoZGVzdF9wYW5lbC5jdXJyZW50X2J1Y2tldCwgZGVzdF9rZXkp
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBleGlzdGluZzoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzb3VyY2VfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgJ3NpemUnOiBvYmouZ2V0KCdTaXplJywgMCksCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICdtdGltZSc6IG9iai5nZXQoJ0xhc3RNb2RpZmllZCcsIGRhdGV0
aW1lLm5vdygpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBkZXN0X2luZm8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICdzaXplJzogZXhpc3RpbmcuZ2V0KCdTaXplJywgMCksCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICdtdGltZSc6IGV4aXN0aW5nLmdldCgnTGFzdE1vZGlm
aWVkJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGRlZiBzaG93X292ZXJ3cml0ZV9kaWFsb2coKToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG9uX2Nob2ljZShjaG9pY2UpOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPSBjaG9p
Y2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC5z
ZXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZV9k
aWFsb2coKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93
X2RpYWxvZyhwcm9ncmVzcykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNl
bGYuX2NoZWNrX292ZXJ3cml0ZShyZWxfa2V5LCBzb3VyY2VfaW5mbywgZGVzdF9pbmZvLCBvbl9j
aG9pY2UsIGlzX3MzX2Rlc3Q9VHJ1ZSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
c2VsZi5sb29wLnNldF9hbGFybV9pbigwLCBsYW1iZGEgKmFyZ3M6IHNob3dfb3ZlcndyaXRlX2Rp
YWxvZygpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC53YWl0
KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQuY2xlYXIoKQoK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9
PSAnY2FuY2VsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3Mu
Y2FuY2VsbGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVh
awogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVl
J10gPT0gJ2FsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3Zl
cndyaXRlX2FsbCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIHVz
ZXJfY2hvaWNlWyd2YWx1ZSddID09ICd2ZXJzaW9uX2FsbCc6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYudmVyc2lvbl9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZWxpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9PSAnc2tpcCc6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShyZWxfa2V5LCAw
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXBf
YWxsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5za2lwX2FsbCA9
IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRl
KHJlbF9rZXksIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVl
CgogICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnNraXBfYWxsOgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKHJlbF9rZXksIDApCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZV9zaXpl
ID0gb2JqLmdldCgnU2l6ZScsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVw
ZGF0ZShyZWxfa2V5LCBmaWxlX3NpemUpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9v
cC5kcmF3X3NjcmVlbigpCgogICAgICAgICAgICAgICAgICAgICAgICBpZiBzb3VyY2VfcGFuZWwu
czNfbWFuYWdlci5jb3B5X29iamVjdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
b3VyY2VfcGFuZWwuY3VycmVudF9idWNrZXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgb2JqWydLZXknXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X3BhbmVs
LmN1cnJlbnRfYnVja2V0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3Rfa2V5
CiAgICAgICAgICAgICAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBw
cm9ncmVzcy5hZGRfc3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfZmFpbHVyZSgpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBhbGxfc3VjY2VzcyA9IEZhbHNlCgogICAgICAgICAgICAgICAgICAg
IGlmIGFsbF9zdWNjZXNzIGFuZCBpc19tb3ZlOgogICAgICAgICAgICAgICAgICAgICAgICBpdGVt
c190b19kZWxldGUuYXBwZW5kKGl0ZW1fZGF0YSkKCiAgICAgICAgICAgICAgICAjIEZTINGE0LDQ
udC7IC0+IEZTCiAgICAgICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAnZnNfZmlsZScgYW5k
IGRlc3RfcGFuZWwubW9kZSA9PSAnZnMnOgogICAgICAgICAgICAgICAgICAgIHNvdXJjZV9wYXRo
ID0gb3MucGF0aC5qb2luKHNvdXJjZV9wYW5lbC5mc19icm93c2VyLmN1cnJlbnRfcGF0aCwgaXRl
bVsnbmFtZSddKQoKICAgICAgICAgICAgICAgICAgICBpZiBsZW4oYW5hbHl6ZWQpID09IDE6CiAg
ICAgICAgICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguaXNhYnModGFyZ2V0X25hbWUpOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9wYXRoID0gdGFyZ2V0X25hbWUKICAgICAgICAg
ICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RfcGF0
aCA9IG9zLnBhdGguam9pbihkZXN0X3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCB0YXJn
ZXRfbmFtZSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAg
ICBpZiB0YXJnZXRfbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VfZGlyID0g
b3MucGF0aC5qb2luKGRlc3RfcGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIHRhcmdldF9u
YW1lKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgYmFzZV9kaXIgPSBkZXN0X3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoCiAgICAg
ICAgICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKGJhc2VfZGlyLCBleGlzdF9vaz1UcnVlKQog
ICAgICAgICAgICAgICAgICAgICAgICBkZXN0X3BhdGggPSBvcy5wYXRoLmpvaW4oYmFzZV9kaXIs
IGl0ZW1bJ25hbWUnXSkKCiAgICAgICAgICAgICAgICAgICAgIyDQn9GA0L7QstC10YDQutCwINGB
0YPRidC10YHRgtCy0L7QstCw0L3QuNGPCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNlbGYu
b3ZlcndyaXRlX2FsbCBhbmQgbm90IHNlbGYuc2tpcF9hbGw6CiAgICAgICAgICAgICAgICAgICAg
ICAgIGlmIG9zLnBhdGguZXhpc3RzKGRlc3RfcGF0aCk6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzb3VyY2VfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6
ZSc6IGl0ZW0uZ2V0KCdzaXplJywgMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
J210aW1lJzogaXRlbS5nZXQoJ210aW1lJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0K
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nX3N0YXQgPSBvcy5zdGF0KGRlc3Rf
cGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RfaW5mbyA9IHsKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6IGV4aXN0aW5nX3N0YXQuc3Rfc2l6ZSwKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbXRpbWUnOiBkYXRldGltZS5mcm9tdGltZXN0
YW1wKGV4aXN0aW5nX3N0YXQuc3RfbXRpbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9
CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHNob3dfb3ZlcndyaXRlX2RpYWxvZygp
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBvbl9jaG9pY2UoY2hvaWNlKToK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10g
PSBjaG9pY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50
LnNldCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlh
bG9nKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X2RpYWxv
Zyhwcm9ncmVzcykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2hlY2tf
b3ZlcndyaXRlKGl0ZW1bJ25hbWUnXSwgc291cmNlX2luZm8sIGRlc3RfaW5mbywgb25fY2hvaWNl
LCBpc19zM19kZXN0PUZhbHNlKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9v
cC5zZXRfYWxhcm1faW4oMCwgbGFtYmRhICphcmdzOiBzaG93X292ZXJ3cml0ZV9kaWFsb2coKSkK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC53YWl0KCkKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC5jbGVhcigpCgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ2NhbmNlbCc6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuY2FuY2VsbGVkID0gVHJ1ZQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdhbGwnOgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHNlbGYub3ZlcndyaXRlX2FsbCA9IFRydWUKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXAnOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShpdGVtWyduYW1lJ10sIDApCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXBfYWxsJzoKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNraXBfYWxsID0gVHJ1ZQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShpdGVtWyduYW1lJ10sIDApCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAg
ICAgaWYgc2VsZi5za2lwX2FsbDoKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBk
YXRlKGl0ZW1bJ25hbWUnXSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAg
ICAgICAgICAgICAgICAgICAgb3MubWFrZWRpcnMob3MucGF0aC5kaXJuYW1lKGRlc3RfcGF0aCks
IGV4aXN0X29rPVRydWUpCgogICAgICAgICAgICAgICAgICAgIGZpbGVfc2l6ZSA9IGl0ZW0uZ2V0
KCdzaXplJywgMCkKICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoaXRlbVsnbmFt
ZSddLCBmaWxlX3NpemUpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLmRyYXdfc2NyZWVu
KCkKCiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBzaHV0
aWwuY29weTIoc291cmNlX3BhdGgsIGRlc3RfcGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAg
cHJvZ3Jlc3MuYWRkX3N1Y2Nlc3MoKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBpc19tb3Zl
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNfdG9fZGVsZXRlLmFwcGVuZChpdGVt
X2RhdGEpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IChJT0Vycm9yLCBPU0Vycm9yKToKICAg
ICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX2ZhaWx1cmUoKQoKICAgICAgICAgICAg
ICAgICMgRlMg0LTQuNGA0LXQutGC0L7RgNC40Y8gLT4gRlMKICAgICAgICAgICAgICAgIGVsaWYg
aXRlbV90eXBlID09ICdmc19kaXInIGFuZCBkZXN0X3BhbmVsLm1vZGUgPT0gJ2ZzJzoKICAgICAg
ICAgICAgICAgICAgICBzb3VyY2VfZGlyID0gb3MucGF0aC5qb2luKHNvdXJjZV9wYW5lbC5mc19i
cm93c2VyLmN1cnJlbnRfcGF0aCwgaXRlbVsnbmFtZSddKQoKICAgICAgICAgICAgICAgICAgICBp
ZiBsZW4oYW5hbHl6ZWQpID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRhcmdldF9u
YW1lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9kaXIgPSBvcy5wYXRoLmpvaW4o
ZGVzdF9wYW5lbC5mc19icm93c2VyLmN1cnJlbnRfcGF0aCwgdGFyZ2V0X25hbWUpCiAgICAgICAg
ICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2Rp
ciA9IG9zLnBhdGguam9pbihkZXN0X3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCBpdGVt
WyduYW1lJ10pCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAg
ICAgaWYgdGFyZ2V0X25hbWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2RpciA9
IG9zLnBhdGguam9pbihkZXN0X3BhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCB0YXJnZXRf
bmFtZSwgaXRlbVsnbmFtZSddKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZGVzdF9kaXIgPSBvcy5wYXRoLmpvaW4oZGVzdF9wYW5lbC5m
c19icm93c2VyLmN1cnJlbnRfcGF0aCwgaXRlbVsnbmFtZSddKQoKICAgICAgICAgICAgICAgICAg
ICBhbGxfc3VjY2VzcyA9IFRydWUKICAgICAgICAgICAgICAgICAgICBmb3IgZmlsZV9pbmZvIGlu
IGl0ZW1fZGF0YVsnZmlsZXMnXToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgcHJvZ3Jlc3Mu
Y2FuY2VsbGVkOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAg
ICAgICAgICAgICAgIGRlc3RfcGF0aCA9IG9zLnBhdGguam9pbihkZXN0X2RpciwgZmlsZV9pbmZv
WydyZWxfcGF0aCddKQoKICAgICAgICAgICAgICAgICAgICAgICAgIyDQn9GA0L7QstC10YDQutCw
INGB0YPRidC10YHRgtCy0L7QstCw0L3QuNGPCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5v
dCBzZWxmLm92ZXJ3cml0ZV9hbGwgYW5kIG5vdCBzZWxmLnNraXBfYWxsOgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgaWYgb3MucGF0aC5leGlzdHMoZGVzdF9wYXRoKToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHN0YXQgPSBvcy5zdGF0KGZpbGVfaW5mb1sncGF0aCddKQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzb3VyY2VfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICdzaXplJzogc3RhdC5zdF9zaXplLAogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgJ210aW1lJzogZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChzdGF0
LnN0X210aW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nX3N0YXQgPSBvcy5zdGF0KGRlc3Rf
cGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9pbmZvID0gewog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiBleGlzdGluZ19z
dGF0LnN0X3NpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbXRp
bWUnOiBkYXRldGltZS5mcm9tdGltZXN0YW1wKGV4aXN0aW5nX3N0YXQuc3RfbXRpbWUpCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGRlZiBzaG93X292ZXJ3cml0ZV9kaWFsb2coKToKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBvbl9jaG9pY2UoY2hvaWNlKToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2Nob2ljZVsndmFsdWUnXSA9
IGNob2ljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2lj
ZV9ldmVudC5zZXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzZWxmLnNob3dfZGlhbG9nKHByb2dyZXNzKQoKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHNlbGYuX2NoZWNrX292ZXJ3cml0ZShmaWxlX2luZm9bJ3JlbF9w
YXRoJ10sIHNvdXJjZV9pbmZvLCBkZXN0X2luZm8sIG9uX2Nob2ljZSwKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zM19kZXN0
PUZhbHNlKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLnNl
dF9hbGFybV9pbigwLCBsYW1iZGEgKmFyZ3M6IHNob3dfb3ZlcndyaXRlX2RpYWxvZygpKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQud2FpdCgpCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC5jbGVhcigpCgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB1c2VyX2Nob2ljZVsndmFsdWUnXSA9
PSAnY2FuY2VsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dy
ZXNzLmNhbmNlbGxlZCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9j
aG9pY2VbJ3ZhbHVlJ10gPT0gJ2FsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzZWxmLm92ZXJ3cml0ZV9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXAnOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKGZpbGVfaW5m
b1sncmVsX3BhdGgnXSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgdXNlcl9j
aG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXBfYWxsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHNlbGYuc2tpcF9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoZmlsZV9pbmZvWydyZWxfcGF0aCddLCAw
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuc2tpcF9h
bGw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoZmlsZV9pbmZv
WydyZWxfcGF0aCddLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAg
ICAgICAgICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKG9zLnBhdGguZGlybmFtZShkZXN0X3Bh
dGgpLCBleGlzdF9vaz1UcnVlKQoKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZV9zaXplID0g
ZmlsZV9pbmZvLmdldCgnc2l6ZScsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNz
LnVwZGF0ZShmaWxlX2luZm9bJ3JlbF9wYXRoJ10sIGZpbGVfc2l6ZSkKICAgICAgICAgICAgICAg
ICAgICAgICAgc2VsZi5sb29wLmRyYXdfc2NyZWVuKCkKCiAgICAgICAgICAgICAgICAgICAgICAg
IHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5MihmaWxlX2luZm9b
J3BhdGgnXSwgZGVzdF9wYXRoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3Mu
YWRkX3N1Y2Nlc3MoKQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgKElPRXJyb3IsIE9T
RXJyb3IpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX2ZhaWx1cmUo
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsX3N1Y2Nlc3MgPSBGYWxzZQoKICAgICAg
ICAgICAgICAgICAgICBpZiBhbGxfc3VjY2VzcyBhbmQgaXNfbW92ZToKICAgICAgICAgICAgICAg
ICAgICAgICAgaXRlbXNfdG9fZGVsZXRlLmFwcGVuZChpdGVtX2RhdGEpCgogICAgICAgICAgICAg
ICAgIyDQkdCw0LrQtdGCIC0+IFMzCiAgICAgICAgICAgICAgICBlbGlmIGl0ZW1fdHlwZSA9PSAn
YnVja2V0JyBhbmQgZGVzdF9wYW5lbC5tb2RlID09ICdzMycgYW5kIGRlc3RfcGFuZWwuY3VycmVu
dF9idWNrZXQ6CiAgICAgICAgICAgICAgICAgICAgYWxsX3N1Y2Nlc3MgPSBUcnVlCiAgICAgICAg
ICAgICAgICAgICAgZm9yIG9iaiBpbiBpdGVtX2RhdGFbJ2ZpbGVzJ106CiAgICAgICAgICAgICAg
ICAgICAgICAgIGlmIHByb2dyZXNzLmNhbmNlbGxlZDoKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGJyZWFrCgogICAgICAgICAgICAgICAgICAgICAgICBpZiBsZW4oYW5hbHl6ZWQpID09IDE6
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0YXJnZXRfbmFtZToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBkZXN0X2tleSA9IHRhcmdldF9uYW1lLnJzdHJpcCgnLycpICsg
Jy8nICsgb2JqWydLZXknXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2tleSA9IG9ialsnS2V5J10KICAgICAgICAg
ICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRhcmdl
dF9uYW1lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3Rfa2V5ID0gdGFyZ2V0
X25hbWUucnN0cmlwKCcvJykgKyAnLycgKyBpdGVtWyduYW1lJ10gKyAnLycgKyBvYmpbJ0tleSdd
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGRlc3Rfa2V5ID0gaXRlbVsnbmFtZSddICsgJy8nICsgb2JqWydLZXknXQoKICAg
ICAgICAgICAgICAgICAgICAgICAgIyDQn9GA0L7QstC10YDQutCwINGB0YPRidC10YHRgtCy0L7Q
stCw0L3QuNGPCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLm92ZXJ3cml0ZV9h
bGwgYW5kIG5vdCBzZWxmLnZlcnNpb25fYWxsIGFuZCBub3Qgc2VsZi5za2lwX2FsbDoKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gZGVzdF9wYW5lbC5zM19tYW5hZ2VyLm9i
amVjdF9leGlzdHMoZGVzdF9wYW5lbC5jdXJyZW50X2J1Y2tldCwgZGVzdF9rZXkpCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBpZiBleGlzdGluZzoKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzb3VyY2VfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgJ3NpemUnOiBvYmouZ2V0KCdTaXplJywgMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICdtdGltZSc6IG9iai5nZXQoJ0xhc3RNb2RpZmllZCcsIGRhdGV0aW1lLm5vdygp
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBkZXN0X2luZm8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICdzaXplJzogZXhpc3RpbmcuZ2V0KCdTaXplJywgMCksCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICdtdGltZSc6IGV4aXN0aW5nLmdldCgnTGFzdE1vZGlmaWVkJykKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGRlZiBzaG93X292ZXJ3cml0ZV9kaWFsb2coKToKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZGVmIG9uX2Nob2ljZShjaG9pY2UpOgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPSBjaG9pY2UKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZV9ldmVudC5zZXQoKQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZV9kaWFsb2coKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhw
cm9ncmVzcykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NoZWNr
X292ZXJ3cml0ZShvYmpbJ0tleSddLCBzb3VyY2VfaW5mbywgZGVzdF9pbmZvLCBvbl9jaG9pY2Us
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBpc19zM19kZXN0PVRydWUpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYu
bG9vcC5zZXRfYWxhcm1faW4oMCwgbGFtYmRhICphcmdzOiBzaG93X292ZXJ3cml0ZV9kaWFsb2co
KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VfZXZlbnQud2FpdCgpCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlX2V2ZW50LmNsZWFyKCkKCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ2Nh
bmNlbCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmNhbmNl
bGxlZCA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09
ICdhbGwnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm92ZXJ3cml0
ZV9hbGwgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiB1c2VyX2No
b2ljZVsndmFsdWUnXSA9PSAndmVyc2lvbl9hbGwnOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzZWxmLnZlcnNpb25fYWxsID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGVsaWYgdXNlcl9jaG9pY2VbJ3ZhbHVlJ10gPT0gJ3NraXAnOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUob2JqWydLZXknXSwgMCkK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBlbGlmIHVzZXJfY2hvaWNlWyd2YWx1ZSddID09ICdza2lwX2Fs
bCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2tpcF9hbGwgPSBU
cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShv
YmpbJ0tleSddLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51
ZQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5za2lwX2FsbDoKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShvYmpbJ0tleSddLCAwKQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVf
c2l6ZSA9IG9iai5nZXQoJ1NpemUnLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVz
cy51cGRhdGUob2JqWydLZXknXSwgZmlsZV9zaXplKQogICAgICAgICAgICAgICAgICAgICAgICBz
ZWxmLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc291cmNl
X3BhbmVsLnMzX21hbmFnZXIuY29weV9vYmplY3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgaXRlbVsnbmFtZSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialsn
S2V5J10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdF9wYW5lbC5jdXJyZW50
X2J1Y2tldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0X2tleQogICAgICAg
ICAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3Mu
YWRkX3N1Y2Nlc3MoKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX2ZhaWx1cmUoKQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgYWxsX3N1Y2Nlc3MgPSBGYWxzZQoKICAgICAgICAgICAgICAgICAgICBpZiBhbGxf
c3VjY2VzcyBhbmQgaXNfbW92ZToKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNfdG9fZGVs
ZXRlLmFwcGVuZChpdGVtX2RhdGEpCgogICAgICAgICAgICAjINCj0LTQsNC70Y/QtdC8INGD0YHQ
v9C10YjQvdC+INC/0LXRgNC10LzQtdGJ0LXQvdC90YvQtSDRjdC70LXQvNC10L3RgtGLCiAgICAg
ICAgICAgIGlmIGlzX21vdmU6CiAgICAgICAgICAgICAgICBmb3IgaXRlbV9kYXRhIGluIGl0ZW1z
X3RvX2RlbGV0ZToKICAgICAgICAgICAgICAgICAgICBpdGVtX3R5cGUgPSBpdGVtX2RhdGFbJ3R5
cGUnXQogICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtX2RhdGFbJ2l0ZW0nXQoKICAgICAg
ICAgICAgICAgICAgICBpZiBpdGVtX3R5cGUgPT0gJ2ZzX2ZpbGUnOgogICAgICAgICAgICAgICAg
ICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfcGF0aCA9IG9z
LnBhdGguam9pbihzb3VyY2VfcGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIGl0ZW1bJ25h
bWUnXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzb3VyY2VfcGF0aCkK
ICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBwYXNzCgogICAgICAgICAgICAgICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdm
c19kaXInOgogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBkaXJfcGF0aCA9IG9zLnBhdGguam9pbihzb3VyY2VfcGFuZWwuZnNfYnJvd3Nlci5j
dXJyZW50X3BhdGgsIGl0ZW1bJ25hbWUnXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNo
dXRpbC5ybXRyZWUoZGlyX3BhdGgpCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBPU0Vy
cm9yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgICAgICAg
ICBlbGlmIGl0ZW1fdHlwZSA9PSAnczNfZmlsZSc6CiAgICAgICAgICAgICAgICAgICAgICAgIHZl
cnNpb25faWQgPSBpdGVtLmdldCgnVmVyc2lvbklkJykKICAgICAgICAgICAgICAgICAgICAgICAg
c291cmNlX3BhbmVsLnMzX21hbmFnZXIuZGVsZXRlX29iamVjdChzb3VyY2VfcGFuZWwuY3VycmVu
dF9idWNrZXQsIGl0ZW1bJ2tleSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25faWQ9dmVyc2lvbl9pZCkKCiAgICAg
ICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ3MzX2Rpcic6CiAgICAgICAgICAgICAg
ICAgICAgICAgIGZvciBvYmogaW4gaXRlbV9kYXRhWydmaWxlcyddOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc291cmNlX3BhbmVsLnMzX21hbmFnZXIuZGVsZXRlX29iamVjdChzb3VyY2Vf
cGFuZWwuY3VycmVudF9idWNrZXQsIG9ialsnS2V5J10pCgogICAgICAgICAgICAgICAgICAgIGVs
aWYgaXRlbV90eXBlID09ICdidWNrZXQnOgogICAgICAgICAgICAgICAgICAgICAgICBmb3Igb2Jq
IGluIGl0ZW1fZGF0YVsnZmlsZXMnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJj
ZV9wYW5lbC5zM19tYW5hZ2VyLmRlbGV0ZV9vYmplY3QoaXRlbVsnbmFtZSddLCBvYmpbJ0tleSdd
KQogICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfcGFuZWwuczNfbWFuYWdlci5kZWxldGVf
YnVja2V0KGl0ZW1bJ25hbWUnXSkKCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQogICAgICAg
ICAgICBzZWxmLmxvb3AuZHJhd19zY3JlZW4oKQoKICAgICAgICB0aHJlYWQgPSB0aHJlYWRpbmcu
VGhyZWFkKHRhcmdldD1jb3B5X3RocmVhZCkKICAgICAgICB0aHJlYWQuZGFlbW9uID0gVHJ1ZQog
ICAgICAgIHRocmVhZC5zdGFydCgpCgogICAgICAgIGRlZiBjaGVja190aHJlYWQoKToKICAgICAg
ICAgICAgaWYgdGhyZWFkLmlzX2FsaXZlKCk6CiAgICAgICAgICAgICAgICBzZWxmLmxvb3Auc2V0
X2FsYXJtX2luKDAuMSwgbGFtYmRhICphcmdzOiBjaGVja190aHJlYWQoKSkKICAgICAgICAgICAg
ZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKCiAgICAgICAgICAgICAg
ICAjINCe0LHQvdC+0LLQu9GP0LXQvCDRhtC10LvQtdCy0YPRjiDQv9Cw0L3QtdC70YwKICAgICAg
ICAgICAgICAgIGRlc3RfcGFuZWwucmVmcmVzaCgpCgogICAgICAgICAgICAgICAgaWYgcmVzdG9y
ZV9pbmRleCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBzb3VyY2VfcGFuZWwucmVz
dG9yZV9mb2N1c19pbmRleCA9IHJlc3RvcmVfaW5kZXgKCiAgICAgICAgICAgICAgICBpZiBvbl9j
b21wbGV0ZToKICAgICAgICAgICAgICAgICAgICAjINCS0JDQltCd0J46INCS0YvQt9GL0LLQsNC1
0LwgY2FsbGJhY2sg0YfQtdGA0LXQtyDRgtCw0LnQvNC10YAsINGH0YLQvtCx0Ysg0YDQsNC30L7R
gNCy0LDRgtGMINGG0LXQv9C+0YfQutGDINGB0L7QsdGL0YLQuNC5IFVJCiAgICAgICAgICAgICAg
ICAgICAgIyDQrdGC0L4g0L/RgNC10LTQvtGC0LLRgNCw0YnQsNC10YIg0LzQs9C90L7QstC10L3Q
vdC+0LUg0LfQsNC60YDRi9GC0LjQtSDQvdC+0LLQvtCz0L4g0LTQuNCw0LvQvtCz0LAKICAgICAg
ICAgICAgICAgICAgICBzZWxmLmxvb3Auc2V0X2FsYXJtX2luKDAsIGxhbWJkYSAqYXJnczogb25f
Y29tcGxldGUoKSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgIyDQ
odGC0LDQvdC00LDRgNGC0L3QvtC1INC/0L7QstC10LTQtdC90LjQtTog0L7QsdC90L7QstC70Y/Q
tdC8INC40YHRhdC+0LTQvdGD0Y4g0L/QsNC90LXQu9GMCiAgICAgICAgICAgICAgICAgICAgaWYg
cmVzdG9yZV9pbmRleCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgc291cmNl
X3BhbmVsLnJlc3RvcmVfZm9jdXNfaW5kZXggPSByZXN0b3JlX2luZGV4CgogICAgICAgICAgICAg
ICAgICAgIGlmIGZvY3VzX25hbWU6CiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9wYW5l
bC5yZWZyZXNoKGZvY3VzX29uPWZvY3VzX25hbWUpCiAgICAgICAgICAgICAgICAgICAgZWxzZToK
ICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlX3BhbmVsLnJlZnJlc2goKQoKICAgICAgICAg
ICAgICAgICAgICAjINCV0YHQu9C4INC+0LHQvdC+0LLQu9C10L3QuNC1INCx0YvQu9C+INGB0LjQ
vdGF0YDQvtC90L3Ri9C8IChGUyksINCy0L7RgdGB0YLQsNC90LDQstC70LjQstCw0LXQvCDQuNC9
0LTQtdC60YEg0LLRgNGD0YfQvdGD0Y4g0L/RgNGP0LzQviDQt9C00LXRgdGMCiAgICAgICAgICAg
ICAgICAgICAgaWYgbm90IGdldGF0dHIoc291cmNlX3BhbmVsLCAnbG9hZGluZ19pbl9wcm9ncmVz
cycsIEZhbHNlKSBhbmQgbGVuKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlX3Bh
bmVsLndhbGtlcikgPiAwIGFuZCByZXN0b3JlX2luZGV4IGlzIG5vdCBOb25lOgogICAgICAgICAg
ICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdfaWR4ID0g
bWluKHJlc3RvcmVfaW5kZXgsIGxlbihzb3VyY2VfcGFuZWwud2Fsa2VyKSAtIDEpCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzb3VyY2VfcGFuZWwubGlzdGJveC5zZXRfZm9jdXMobmV3X2lk
eCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9wYW5lbC5yZXN0b3JlX2ZvY3Vz
X2luZGV4ID0gTm9uZQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAgICAgICAgb3BlcmF0aW9uID0gJ01vdmVk
JyBpZiBpc19tb3ZlIGVsc2UgJ0NvcGllZCcKICAgICAgICAgICAgICAgIHNwZWVkX3N0ciA9IHBy
b2dyZXNzLmdldF9zcGVlZF9zdHIoKQogICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdCgK
ICAgICAgICAgICAgICAgICAgICBmJ3tvcGVyYXRpb259OiB7cHJvZ3Jlc3Muc3VjY2Vzc19jb3Vu
dH0gZmlsZShzKSwgRmFpbGVkOiB7cHJvZ3Jlc3MuZmFpbF9jb3VudH0gZmlsZShzKSwgJwogICAg
ICAgICAgICAgICAgICAgIGYnVG90YWw6IHtmb3JtYXRfc2l6ZShwcm9ncmVzcy5wcm9jZXNzZWRf
Ynl0ZXMpfSwgU3BlZWQ6IHtzcGVlZF9zdHJ9JwogICAgICAgICAgICAgICAgKQoKICAgICAgICBz
ZWxmLmxvb3Auc2V0X2FsYXJtX2luKDAuMSwgbGFtYmRhICphcmdzOiBjaGVja190aHJlYWQoKSkK
CiAgICBkZWYgdG9nZ2xlX3ZlcnNpb25pbmcoc2VsZik6CiAgICAgICAgYWN0aXZlX3BhbmVsID0g
c2VsZi5nZXRfYWN0aXZlX3BhbmVsKCkKCiAgICAgICAgaWYgYWN0aXZlX3BhbmVsLm1vZGUgIT0g
J3MzJyBvciBub3QgYWN0aXZlX3BhbmVsLmN1cnJlbnRfYnVja2V0OgogICAgICAgICAgICBzZWxm
LnNob3dfcmVzdWx0KCdUaGlzIGZ1bmN0aW9uIHdvcmtzIG9ubHkgd2l0aCBTMyBidWNrZXRzJywg
J3dhcm5pbmcnKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc3RhdHVzID0gYWN0aXZlX3Bh
bmVsLnMzX21hbmFnZXIuZ2V0X3ZlcnNpb25pbmdfc3RhdHVzKGFjdGl2ZV9wYW5lbC5jdXJyZW50
X2J1Y2tldCkKCiAgICAgICAgaWYgc3RhdHVzID09ICdFbmFibGVkJzoKICAgICAgICAgICAgIyDQ
ktC10YDRgdC40L7QvdC40YDQvtCy0LDQvdC40LUg0LLQutC70Y7Rh9C10L3QviAtINC/0YDQtdC0
0LvQsNCz0LDQtdC8INC+0YLQutC70Y7Rh9C40YLRjAogICAgICAgICAgICBkZWYgY2FsbGJhY2so
Y29uZmlybWVkKToKICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAg
ICAgICAgIGlmIGNvbmZpcm1lZDoKICAgICAgICAgICAgICAgICAgICBpZiBhY3RpdmVfcGFuZWwu
czNfbWFuYWdlci5kaXNhYmxlX3ZlcnNpb25pbmcoYWN0aXZlX3BhbmVsLmN1cnJlbnRfYnVja2V0
KToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93X3Jlc3VsdChmJ1ZlcnNpb25pbmcg
U1VTUEVOREVEIGZvciBidWNrZXQgInthY3RpdmVfcGFuZWwuY3VycmVudF9idWNrZXR9IicpCiAg
ICAgICAgICAgICAgICAgICAgICAgICMgYWN0aXZlX3BhbmVsLnJlZnJlc2goKQogICAgICAgICAg
ICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQo
ZidGYWlsZWQgdG8gc3VzcGVuZCB2ZXJzaW9uaW5nJywnZXJyb3InKQoKICAgICAgICAgICAgbWVz
c2FnZSA9IGYnU3VzcGVuZCB2ZXJzaW9uaW5nIGZvciBidWNrZXQgInthY3RpdmVfcGFuZWwuY3Vy
cmVudF9idWNrZXR9Ij9cbihFeGlzdGluZyB2ZXJzaW9ucyB3aWxsIGJlIHByZXNlcnZlZCknCiAg
ICAgICAgICAgIGRpYWxvZyA9IENvbmZpcm1EaWFsb2coJ1N1c3BlbmQgVmVyc2lvbmluZycsIG1l
c3NhZ2UsIFtdLCBjYWxsYmFjaykKICAgICAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhkaWFsb2cp
CiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyDQktC10YDRgdC40L7QvdC40YDQvtCy0LDQvdC4
0LUg0L7RgtC60LvRjtGH0LXQvdC+IC0g0L/RgNC10LTQu9Cw0LPQsNC10Lwg0LLQutC70Y7Rh9C4
0YLRjAogICAgICAgICAgICBkZWYgY2FsbGJhY2soY29uZmlybWVkKToKICAgICAgICAgICAgICAg
IHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAgICAgIGlmIGNvbmZpcm1lZDoKICAgICAg
ICAgICAgICAgICAgICBpZiBhY3RpdmVfcGFuZWwuczNfbWFuYWdlci5lbmFibGVfdmVyc2lvbmlu
ZyhhY3RpdmVfcGFuZWwuY3VycmVudF9idWNrZXQpOgogICAgICAgICAgICAgICAgICAgICAgICBz
ZWxmLnNob3dfcmVzdWx0KGYnVmVyc2lvbmluZyBFTkFCTEVEIGZvciBidWNrZXQgInthY3RpdmVf
cGFuZWwuY3VycmVudF9idWNrZXR9IicpCiAgICAgICAgICAgICAgICAgICAgICAgICMgYWN0aXZl
X3BhbmVsLnJlZnJlc2goKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAg
ICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoZidGYWlsZWQgdG8gZW5hYmxlIHZlcnNpb25pbmcn
KQoKICAgICAgICAgICAgY3VycmVudF9zdGF0dXMgPSAiRElTQUJMRUQiIGlmIHN0YXR1cyBpcyBO
b25lIG9yIHN0YXR1cyA9PSAnRGlzYWJsZWQnIGVsc2UgIlNVU1BFTkRFRCIKICAgICAgICAgICAg
bWVzc2FnZSA9IGYnRW5hYmxlIHZlcnNpb25pbmcgZm9yIGJ1Y2tldCAie2FjdGl2ZV9wYW5lbC5j
dXJyZW50X2J1Y2tldH0iP1xuKEN1cnJlbnQgc3RhdHVzOiB7Y3VycmVudF9zdGF0dXN9KScKICAg
ICAgICAgICAgZGlhbG9nID0gQ29uZmlybURpYWxvZygnRW5hYmxlIFZlcnNpb25pbmcnLCBtZXNz
YWdlLCBbXSwgY2FsbGJhY2spCiAgICAgICAgICAgIHNlbGYuc2hvd19kaWFsb2coZGlhbG9nKQoK
ICAgIGRlZiBkZWxldGVfaXRlbXMoc2VsZik6CiAgICAgICAgYWN0aXZlX3BhbmVsID0gc2VsZi5n
ZXRfYWN0aXZlX3BhbmVsKCkKCiAgICAgICAgaWYgYWN0aXZlX3BhbmVsLmlzX3Jvb3RfbWVudSgp
IG9yIGFjdGl2ZV9wYW5lbC5pc19lbmRwb2ludF9saXN0KCk6CiAgICAgICAgICAgIHNlbGYuc2hv
d19yZXN1bHQoJ0Nhbm5vdCBkZWxldGUgZnJvbSB0aGlzIGxldmVsJykKICAgICAgICAgICAgcmV0
dXJuCgogICAgICAgIHNlbGVjdGVkX2l0ZW1zID0gYWN0aXZlX3BhbmVsLmdldF9zZWxlY3RlZF9p
dGVtcygpCiAgICAgICAgaWYgbm90IHNlbGVjdGVkX2l0ZW1zOgogICAgICAgICAgICBmb2N1c2Vk
ID0gYWN0aXZlX3BhbmVsLmdldF9mb2N1c2VkX2l0ZW0oKQogICAgICAgICAgICBpZiBmb2N1c2Vk
IGFuZCBmb2N1c2VkWyd0eXBlJ10gaW4gKCdidWNrZXQnLCAnZnNfZmlsZScsICdzM19maWxlJywg
J2ZzX2RpcicsICdzM19kaXInKToKICAgICAgICAgICAgICAgIHNlbGVjdGVkX2l0ZW1zID0gW2Zv
Y3VzZWRdCgogICAgICAgIGlmIG5vdCBzZWxlY3RlZF9pdGVtczoKICAgICAgICAgICAgc2VsZi5z
aG93X3Jlc3VsdCgnTm8gaXRlbXMgdG8gZGVsZXRlJykKICAgICAgICAgICAgcmV0dXJuCgogICAg
ICAgIGFuYWx5emVkLCBpdGVtc19pbmZvLCB0b3RhbF9ieXRlcyA9IHNlbGYuYW5hbHl6ZV9pdGVt
cyhzZWxlY3RlZF9pdGVtcywgYWN0aXZlX3BhbmVsKQogICAgICAgIHRvdGFsX2ZpbGVzID0gc3Vt
KGxlbihhWydmaWxlcyddKSBmb3IgYSBpbiBhbmFseXplZCkKCiAgICAgICAgZGVmIGNhbGxiYWNr
KGNvbmZpcm1lZCk6CiAgICAgICAgICAgIHNlbGYuY2xvc2VfZGlhbG9nKCkKICAgICAgICAgICAg
aWYgY29uZmlybWVkOgogICAgICAgICAgICAgICAgY3VycmVudF9pdGVtID0gYWN0aXZlX3BhbmVs
LmdldF9mb2N1c2VkX2l0ZW0oKQogICAgICAgICAgICAgICAgZm9jdXNfbmFtZSA9IGN1cnJlbnRf
aXRlbS5nZXQoJ25hbWUnKSBpZiBjdXJyZW50X2l0ZW0gZWxzZSBOb25lCgogICAgICAgICAgICAg
ICAgZm9jdXNfaW5kZXggPSBhY3RpdmVfcGFuZWwubGlzdGJveC5mb2N1c19wb3NpdGlvbgoKICAg
ICAgICAgICAgICAgIHNlbGYuX2RvX2RlbGV0ZV93aXRoX3Byb2dyZXNzKGFuYWx5emVkLCBhY3Rp
dmVfcGFuZWwsIGZvY3VzX25hbWUsIHRvdGFsX2J5dGVzLCByZXN0b3JlX2luZGV4PWZvY3VzX2lu
ZGV4KQoKICAgICAgICBtZXNzYWdlID0gZidEZWxldGUge2xlbihzZWxlY3RlZF9pdGVtcyl9IGl0
ZW0ocykgKHt0b3RhbF9maWxlc30gZmlsZShzKSB0b3RhbCk/XG5UaGlzIGFjdGlvbiBjYW5ub3Qg
YmUgdW5kb25lIScKICAgICAgICBkaWFsb2cgPSBDb25maXJtRGlhbG9nKCdDb25maXJtIERlbGV0
ZScsIG1lc3NhZ2UsIGl0ZW1zX2luZm8sIGNhbGxiYWNrKQogICAgICAgIHNlbGYuc2hvd19kaWFs
b2coZGlhbG9nKQoKICAgIGRlZiBfZG9fZGVsZXRlX3dpdGhfcHJvZ3Jlc3Moc2VsZiwgYW5hbHl6
ZWQsIHBhbmVsLCBmb2N1c19uYW1lLCB0b3RhbF9ieXRlcywgcmVzdG9yZV9pbmRleD1Ob25lKToK
ICAgICAgICAiIiIKICAgICAgICDQktGL0L/QvtC70L3Rj9C10YIg0YPQtNCw0LvQtdC90LjQtSDQ
stGL0LHRgNCw0L3QvdGL0YUg0L7QsdGK0LXQutGC0L7QsiAo0YTQsNC50LvQvtCyLCDQv9Cw0L/Q
vtC6LCDQstC10YDRgdC40LkpINCyINGE0L7QvdC+0LLQvtC8INC/0L7RgtC+0LrQtSDRgSDQvtGC
0L7QsdGA0LDQttC10L3QuNC10Lwg0L/RgNC+0LPRgNC10YHRgdCwLgoKICAgICAgICDQkNGA0LPR
g9C80LXQvdGC0Ys6CiAgICAgICAgICAgIGFuYWx5emVkIChsaXN0KTog0KHQv9C40YHQvtC6INC/
0L7QtNCz0L7RgtC+0LLQu9C10L3QvdGL0YUg0Log0YPQtNCw0LvQtdC90LjRjiDQvtCx0YrQtdC6
0YLQvtCyLgogICAgICAgICAgICBwYW5lbCAoUGFuZWxXaWRnZXQpOiDQn9Cw0L3QtdC70YwsINCy
INC60L7RgtC+0YDQvtC5INC/0YDQvtC40YHRhdC+0LTQuNGCINGD0LTQsNC70LXQvdC40LUuCiAg
ICAgICAgICAgIGZvY3VzX25hbWUgKHN0cik6INCY0LzRjyDRhNCw0LnQu9CwLCDQvdCwINC60L7R
gtC+0YDRi9C5INC90YPQttC90L4g0L/QtdGA0LXQstC10YHRgtC4INGE0L7QutGD0YEg0L/QvtGB
0LvQtSDRg9C00LDQu9C10L3QuNGPINGC0LXQutGD0YnQtdCz0L4gKNC+0LHRi9GH0L3QviDRgdC7
0LXQtNGD0Y7RidC40Lkg0LjQu9C4INC/0YDQtdC00YvQtNGD0YnQuNC5INGE0LDQudC7KS4KICAg
ICAgICAgICAgdG90YWxfYnl0ZXMgKGludCk6INCe0LHRidC40Lkg0YDQsNC30LzQtdGAINGD0LTQ
sNC70Y/QtdC80YvRhSDQtNCw0L3QvdGL0YUgKNC40YHQv9C+0LvRjNC30YPQtdGC0YHRjyDQtNC7
0Y8g0LLQuNC30YPQsNC70LjQt9Cw0YbQuNC4INC/0YDQvtCz0YDQtdGB0YHQsCwg0YXQvtGC0Y8g
0YPQtNCw0LvQtdC90LjQtSDRh9Cw0YHRgtC+INC+0LPRgNCw0L3QuNGH0LXQvdC+IElPUFMsINCw
INC90LUg0LrQsNC90LDQu9C+0LwpLgogICAgICAgICAgICByZXN0b3JlX2luZGV4IChpbnQsIG9w
dGlvbmFsKTog0JjQvdC00LXQutGBINGB0YLRgNC+0LrQuCDRgdC/0LjRgdC60LAg0LTQu9GPINCy
0L7RgdGB0YLQsNC90L7QstC70LXQvdC40Y8g0L/QvtC30LjRhtC40Lgg0LrRg9GA0YHQvtGA0LAg
0L/QvtGB0LvQtSDQvtCx0L3QvtCy0LvQtdC90LjRjyDQv9Cw0L3QtdC70LguCiAgICAgICAgIiIi
CiAgICAgICAgdG90YWxfZmlsZXMgPSBzdW0obGVuKGFbJ2ZpbGVzJ10pIGZvciBhIGluIGFuYWx5
emVkKQoKICAgICAgICBwcm9ncmVzcyA9IFByb2dyZXNzRGlhbG9nKCdEZWxldGluZyBmaWxlcy4u
LicsIGNhbGxiYWNrPXNlbGYuY2xvc2VfZGlhbG9nKQogICAgICAgIHByb2dyZXNzLnNldF90b3Rh
bCh0b3RhbF9maWxlcywgdG90YWxfYnl0ZXMpCiAgICAgICAgc2VsZi5zaG93X2RpYWxvZyhwcm9n
cmVzcykKCiAgICAgICAgZGVmIGRlbGV0ZV90aHJlYWQoKToKICAgICAgICAgICAgZm9yIGl0ZW1f
ZGF0YSBpbiBhbmFseXplZDoKICAgICAgICAgICAgICAgIGlmIHByb2dyZXNzLmNhbmNlbGxlZDoK
ICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgICAgIGl0ZW1fdHlwZSA9IGl0
ZW1fZGF0YVsndHlwZSddCiAgICAgICAgICAgICAgICBpdGVtID0gaXRlbV9kYXRhWydpdGVtJ10K
CiAgICAgICAgICAgICAgICBpZiBpdGVtX3R5cGUgPT0gJ2J1Y2tldCc6CiAgICAgICAgICAgICAg
ICAgICAgZm9yIG9iaiBpbiBpdGVtX2RhdGFbJ2ZpbGVzJ106CiAgICAgICAgICAgICAgICAgICAg
ICAgIGlmIHByb2dyZXNzLmNhbmNlbGxlZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJy
ZWFrCgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemUgPSBvYmouZ2V0KCdTaXplJywg
MCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKG9ialsnS2V5J10sIGZp
bGVfc2l6ZSkKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLmRyYXdfc2NyZWVuKCkK
CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBhbmVsLnMzX21hbmFnZXIuZGVsZXRlX29iamVj
dChpdGVtWyduYW1lJ10sIG9ialsnS2V5J10pOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
cHJvZ3Jlc3MuYWRkX3N1Y2Nlc3MoKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRkX2ZhaWx1cmUoKQogICAgICAgICAg
ICAgICAgICAgIHBhbmVsLnMzX21hbmFnZXIuZGVsZXRlX2J1Y2tldChpdGVtWyduYW1lJ10pCgog
ICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ3MzX2ZpbGUnOgogICAgICAgICAgICAg
ICAgICAgIGZpbGVfc2l6ZSA9IGl0ZW0uZ2V0KCdzaXplJywgMCkKICAgICAgICAgICAgICAgICAg
ICBwcm9ncmVzcy51cGRhdGUoaXRlbVsnbmFtZSddLCBmaWxlX3NpemUpCiAgICAgICAgICAgICAg
ICAgICAgc2VsZi5sb29wLmRyYXdfc2NyZWVuKCkKCiAgICAgICAgICAgICAgICAgICAgaWYgcGFu
ZWwuczNfbWFuYWdlci5kZWxldGVfb2JqZWN0KHBhbmVsLmN1cnJlbnRfYnVja2V0LCBpdGVtWydr
ZXknXSk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFkZF9zdWNjZXNzKCkKICAg
ICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5h
ZGRfZmFpbHVyZSgpCgogICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ3MzX2Rpcic6
CiAgICAgICAgICAgICAgICAgICAgZm9yIG9iaiBpbiBpdGVtX2RhdGFbJ2ZpbGVzJ106CiAgICAg
ICAgICAgICAgICAgICAgICAgIGlmIHByb2dyZXNzLmNhbmNlbGxlZDoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemUgPSBv
YmouZ2V0KCdTaXplJywgMCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRl
KG9ialsnS2V5J10sIGZpbGVfc2l6ZSkKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29w
LmRyYXdfc2NyZWVuKCkKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBhbmVsLnMzX21hbmFn
ZXIuZGVsZXRlX29iamVjdChwYW5lbC5jdXJyZW50X2J1Y2tldCwgb2JqWydLZXknXSk6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZGRfc3VjY2VzcygpCiAgICAgICAgICAg
ICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5h
ZGRfZmFpbHVyZSgpCgogICAgICAgICAgICAgICAgZWxpZiBpdGVtX3R5cGUgPT0gJ2ZzX2ZpbGUn
OgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZV9w
YXRoID0gb3MucGF0aC5qb2luKHBhbmVsLmZzX2Jyb3dzZXIuY3VycmVudF9wYXRoLCBpdGVtWydu
YW1lJ10pCgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemUgPSBpdGVtLmdldCgnc2l6
ZScsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShpdGVtWyduYW1l
J10sIGZpbGVfc2l6ZSkKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wLmRyYXdfc2Ny
ZWVuKCkKCiAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShmaWxlX3BhdGgpCiAgICAg
ICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFkZF9zdWNjZXNzKCkKICAgICAgICAgICAgICAg
ICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWRk
X2ZhaWx1cmUoKQoKICAgICAgICAgICAgICAgIGVsaWYgaXRlbV90eXBlID09ICdmc19kaXInOgog
ICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgZGlyX3BhdGgg
PSBvcy5wYXRoLmpvaW4ocGFuZWwuZnNfYnJvd3Nlci5jdXJyZW50X3BhdGgsIGl0ZW1bJ25hbWUn
XSkKCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBmaWxlX2luZm8gaW4gaXRlbV9kYXRhWydm
aWxlcyddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcHJvZ3Jlc3MuY2FuY2VsbGVk
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZmlsZV9zaXplID0gZmlsZV9pbmZvLmdldCgnc2l6ZScsIDApCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoZmlsZV9pbmZvWydyZWxfcGF0aCdd
LCBmaWxlX3NpemUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvb3AuZHJhd19z
Y3JlZW4oKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNodXRpbC5ybXRyZWUoZGlyX3Bh
dGgpCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnN1Y2Nlc3NfY291bnQgKz0gbGVu
KGl0ZW1fZGF0YVsnZmlsZXMnXSkKICAgICAgICAgICAgICAgICAgICBleGNlcHQgT1NFcnJvcjoK
ICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuZmFpbF9jb3VudCArPSBsZW4oaXRlbV9k
YXRhWydmaWxlcyddKQoKICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgIHNl
bGYubG9vcC5kcmF3X3NjcmVlbigpCgogICAgICAgIHRocmVhZCA9IHRocmVhZGluZy5UaHJlYWQo
dGFyZ2V0PWRlbGV0ZV90aHJlYWQpCiAgICAgICAgdGhyZWFkLmRhZW1vbiA9IFRydWUKICAgICAg
ICB0aHJlYWQuc3RhcnQoKQoKICAgICAgICBkZWYgY2hlY2tfdGhyZWFkKCk6CiAgICAgICAgICAg
IGlmIHRocmVhZC5pc19hbGl2ZSgpOgogICAgICAgICAgICAgICAgc2VsZi5sb29wLnNldF9hbGFy
bV9pbigwLjEsIGxhbWJkYSAqYXJnczogY2hlY2tfdGhyZWFkKCkpCiAgICAgICAgICAgIGVsc2U6
CiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlX2RpYWxvZygpCgogICAgICAgICAgICAgICAgc3Bl
ZWRfc3RyID0gcHJvZ3Jlc3MuZ2V0X3NwZWVkX3N0cigpCgogICAgICAgICAgICAgICAgIyDQo9GB
0YLQsNC90LDQstC70LjQstCw0LXQvCDQttC10LvQsNC10LzRi9C5INC40L3QtNC10LrRgSDQsiDQ
v9Cw0L3QtdC70YwKICAgICAgICAgICAgICAgIGlmIHJlc3RvcmVfaW5kZXggaXMgbm90IE5vbmU6
CiAgICAgICAgICAgICAgICAgICAgcGFuZWwucmVzdG9yZV9mb2N1c19pbmRleCA9IHJlc3RvcmVf
aW5kZXgKCiAgICAgICAgICAgICAgICAjINCX0LDQv9GD0YHQutCw0LXQvCDQvtCx0L3QvtCy0LvQ
tdC90LjQtSAo0L7QvdC+INC80L7QttC10YIg0LHRi9GC0Ywg0LDRgdC40L3RhdGA0L7QvdC90YvQ
vCkKICAgICAgICAgICAgICAgIHBhbmVsLnJlZnJlc2goKQoKICAgICAgICAgICAgICAgICMg0JXR
gdC70Lgg0L7QsdC90L7QstC70LXQvdC40LUg0LHRi9C70L4g0YHQuNC90YXRgNC+0L3QvdGL0Lwg
KEZTINC40LvQuCDQsdCw0LrQtdGC0YspLCDQstC+0YHRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg
0YHRgNCw0LfRgwogICAgICAgICAgICAgICAgIyAo0LTQu9GPINCw0YHQuNC90YXRgNC+0L3QvdC+
0LPQviBTMyDRjdGC0L4g0YHRgNCw0LHQvtGC0LDQtdGCINC/0L7Qt9C20LUg0LIgX2ZpbmFsaXpl
X2xvYWRpbmcpCiAgICAgICAgICAgICAgICBpZiBub3QgZ2V0YXR0cihwYW5lbCwgJ2xvYWRpbmdf
aW5fcHJvZ3Jlc3MnLCBGYWxzZSkgYW5kIGxlbihwYW5lbC53YWxrZXIpID4gMCBhbmQgcmVzdG9y
ZV9pbmRleCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAg
ICAgICAgICAgICAgIG5ld19pZHggPSBtaW4ocmVzdG9yZV9pbmRleCwgbGVuKHBhbmVsLndhbGtl
cikgLSAxKQogICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC5saXN0Ym94LnNldF9mb2N1cyhu
ZXdfaWR4KQogICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC5yZXN0b3JlX2ZvY3VzX2luZGV4
ID0gTm9uZQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAg
ICAgcGFzcwoKICAgICAgICAgICAgICAgIHNlbGYuc2hvd19yZXN1bHQoCiAgICAgICAgICAgICAg
ICAgICAgZidEZWxldGVkOiB7cHJvZ3Jlc3Muc3VjY2Vzc19jb3VudH0gZmlsZShzKSwgRmFpbGVk
OiB7cHJvZ3Jlc3MuZmFpbF9jb3VudH0gZmlsZShzKSwgJwogICAgICAgICAgICAgICAgICAgIGYn
VG90YWw6IHtmb3JtYXRfc2l6ZShwcm9ncmVzcy5wcm9jZXNzZWRfYnl0ZXMpfSwgU3BlZWQ6IHtz
cGVlZF9zdHJ9JwogICAgICAgICAgICAgICAgKQoKICAgICAgICBzZWxmLmxvb3Auc2V0X2FsYXJt
X2luKDAuMSwgbGFtYmRhICphcmdzOiBjaGVja190aHJlYWQoKSkKCgpjbGFzcyBGaWxlSW5mb0Rp
YWxvZyh1cndpZC5XaWRnZXRXcmFwKToKICAgICIiItCU0LjQsNC70L7QsyDQtNC10YLQsNC70YzQ
vdC+0Lkg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0YTQsNC50LvQtS/QsdCw0LrQtdGC0LUiIiIK
CiAgICBkZWYgX19pbml0X18oc2VsZiwgdGl0bGUsIGluZm9fZGljdCwgY2xvc2VfY2FsbGJhY2sp
OgogICAgICAgIHNlbGYuY2xvc2VfY2FsbGJhY2sgPSBjbG9zZV9jYWxsYmFjawoKICAgICAgICBp
dGVtcyA9IFtdCgogICAgICAgIGtleXNfZm9yX2NhbGMgPSBbayBmb3IgayBpbiBpbmZvX2RpY3Qu
a2V5cygpIGlmIGsgIT0gJ1VSTF9GVUxMJyBhbmQgbm90IGsuc3RhcnRzd2l0aCgnLS0tJyldCiAg
ICAgICAgbWF4X2tleV9sZW4gPSBtYXgoW2xlbihrKSBmb3IgayBpbiBrZXlzX2Zvcl9jYWxjXSkg
aWYga2V5c19mb3JfY2FsYyBlbHNlIDAKCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gaW5mb19k
aWN0Lml0ZW1zKCk6CiAgICAgICAgICAgIGlmIGtleS5zdGFydHN3aXRoKCctLS0nKToKICAgICAg
ICAgICAgICAgIGl0ZW1zLmFwcGVuZCh1cndpZC5EaXZpZGVyKCkpCiAgICAgICAgICAgICAgICBz
ZXBfdGV4dCA9IHVyd2lkLlRleHQoa2V5LnJlcGxhY2UoJy0nLCAnJykuc3RyaXAoKSwgYWxpZ249
J2NlbnRlcicpCiAgICAgICAgICAgICAgICAjINCf0YDQuNC90YPQtNC40YLQtdC70YzQvdC+INC3
0LDQtNCw0LXQvCDRhNC+0L0KICAgICAgICAgICAgICAgIGl0ZW1zLmFwcGVuZCh1cndpZC5BdHRy
TWFwKHNlcF90ZXh0LCAnaW5mb19uYW1lJykpCiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAg
ICAgICAgICAgaWYga2V5ID09ICdVUkxfRlVMTCc6CiAgICAgICAgICAgICAgICBpdGVtcy5hcHBl
bmQodXJ3aWQuRGl2aWRlcigpKQogICAgICAgICAgICAgICAgaXRlbXMuYXBwZW5kKHVyd2lkLlRl
eHQoKCdpbmZvX25hbWUnLCAiUHJlc2lnbmVkIFVSTCAoMWgpOiIpKSkKICAgICAgICAgICAgICAg
IGVkaXQgPSB1cndpZC5FZGl0KCIiLCBzdHIodmFsdWUpKQogICAgICAgICAgICAgICAgaXRlbXMu
YXBwZW5kKHVyd2lkLkF0dHJNYXAoZWRpdCwgJ2luZm9fdmFsdWUnKSkKICAgICAgICAgICAgICAg
IGNvbnRpbnVlCgogICAgICAgICAgICBrZXlfc3RyID0gZiJ7a2V5fToiLmxqdXN0KG1heF9rZXlf
bGVuICsgMikKICAgICAgICAgICAgdmFsX3N0ciA9IHN0cih2YWx1ZSkKCiAgICAgICAgICAgIHRl
eHRfd2lkZ2V0ID0gdXJ3aWQuVGV4dChbCiAgICAgICAgICAgICAgICAoJ2luZm9fbmFtZScsIGtl
eV9zdHIpLAogICAgICAgICAgICAgICAgKCdpbmZvX3ZhbHVlJywgdmFsX3N0cikKICAgICAgICAg
ICAgXSkKICAgICAgICAgICAgIyDQntCx0L7RgNCw0YfQuNCy0LDQtdC8INC60LDQttC00YPRjiDR
gdGC0YDQvtC60YMg0LIgJ2RpYWxvZycsINGH0YLQvtCx0Ysg0L/RgNC+0LHQtdC70Ysg0YLQvtC2
0LUg0LHRi9C70Lgg0YHQuNC90LjQvNC4CiAgICAgICAgICAgIGl0ZW1zLmFwcGVuZCh1cndpZC5B
dHRyTWFwKHRleHRfd2lkZ2V0LCAnZGlhbG9nZjQnKSkKCiAgICAgICAgIyDQntCx0L7RgNCw0YfQ
uNCy0LDQtdC8INGB0LDQvCBMaXN0Qm94LCDRh9GC0L7QsdGLINC/0YPRgdGC0YvQtSDQvNC10YHR
gtCwINCx0YvQu9C4INGB0LjQvdC40LzQuAogICAgICAgIGxpc3Rib3ggPSB1cndpZC5MaXN0Qm94
KHVyd2lkLlNpbXBsZUZvY3VzTGlzdFdhbGtlcihpdGVtcykpCiAgICAgICAgbGlzdGJveF9tYXAg
PSB1cndpZC5BdHRyTWFwKGxpc3Rib3gsICdkaWFsb2dmNCcpCgogICAgICAgIG9rX2J1dHRvbiA9
IHVyd2lkLkJ1dHRvbignWyBPSyBdJykKICAgICAgICB1cndpZC5jb25uZWN0X3NpZ25hbChva19i
dXR0b24sICdjbGljaycsIHNlbGYub25fb2spCgogICAgICAgIGJ1dHRvbnMgPSB1cndpZC5Db2x1
bW5zKFsKICAgICAgICAgICAgKCd3ZWlnaHQnLCAxLCB1cndpZC5UZXh0KCcnKSksCiAgICAgICAg
ICAgICgncGFjaycsIHVyd2lkLkF0dHJNYXAob2tfYnV0dG9uLCAnYnV0dG9uJywgZm9jdXNfbWFw
PSdidXR0b25fZm9jdXMnKSksCiAgICAgICAgICAgICgnd2VpZ2h0JywgMSwgdXJ3aWQuVGV4dCgn
JykpLAogICAgICAgIF0sIGRpdmlkZWNoYXJzPTApCgogICAgICAgICMg0J7QsdC+0YDQsNGH0LjQ
stCw0LXQvCDQutC90L7Qv9C60Lgg0LIg0YHRgtC40LvRjCBkaWFsb2csINGH0YLQvtCx0Ysg0YTQ
vtC9INCy0L7QutGA0YPQsyDQvdC40YUg0LHRi9C7INGB0LjQvdC40LwKICAgICAgICBidXR0b25z
X21hcCA9IHVyd2lkLkF0dHJNYXAoYnV0dG9ucywgJ2RpYWxvZ2Y0JykKCiAgICAgICAgcGlsZSA9
IHVyd2lkLlBpbGUoWwogICAgICAgICAgICAoJ3BhY2snLCB1cndpZC5EaXZpZGVyKCkpLAogICAg
ICAgICAgICAoJ3dlaWdodCcsIDEsIGxpc3Rib3hfbWFwKSwgICMg0JjRgdC/0L7Qu9GM0LfRg9C1
0Lwg0L7QsdC10YDQvdGD0YLRi9C5IGxpc3Rib3gKICAgICAgICAgICAgKCdwYWNrJywgdXJ3aWQu
RGl2aWRlcigpKSwKICAgICAgICAgICAgKCdwYWNrJywgYnV0dG9uc19tYXApLCAgIyDQmNGB0L/Q
vtC70YzQt9GD0LXQvCDQvtCx0LXRgNC90YPRgtGL0LUg0LrQvdC+0L/QutC4CiAgICAgICAgICAg
ICgncGFjaycsIHVyd2lkLkRpdmlkZXIoKSksCiAgICAgICAgXSkKCiAgICAgICAgIyDQl9Cw0LvQ
uNCy0LDQtdC8IEZpbGxlciDRgdGC0LjQu9C10LwgZGlhbG9nCiAgICAgICAgZmlsbCA9IHVyd2lk
LkZpbGxlcihwaWxlLCB2YWxpZ249J3RvcCcsIGhlaWdodD0oJ3JlbGF0aXZlJywgOTUpKQogICAg
ICAgIGZpbGxfbWFwID0gdXJ3aWQuQXR0ck1hcChmaWxsLCAnZGlhbG9nZjQnKQoKICAgICAgICBs
aW5lYm94ID0gdXJ3aWQuTGluZUJveChmaWxsX21hcCwgdGl0bGU9dGl0bGUpCgogICAgICAgICMg
0KTQuNC90LDQu9GM0L3QsNGPINC+0LHQtdGA0YLQutCwINGA0LDQvNC60LgKICAgICAgICBzdXBl
cigpLl9faW5pdF9fKHVyd2lkLkF0dHJNYXAobGluZWJveCwgJ2RpYWxvZ2Y0JykpCgogICAgZGVm
IG9uX29rKHNlbGYsIGJ1dHRvbik6CiAgICAgICAgc2VsZi5jbG9zZV9jYWxsYmFjaygpCgogICAg
ZGVmIGtleXByZXNzKHNlbGYsIHNpemUsIGtleSk6CiAgICAgICAgaWYga2V5IGluICgnZXNjJywg
J2VudGVyJywgJ2Y0Jyk6CiAgICAgICAgICAgIHNlbGYub25fb2soTm9uZSkKICAgICAgICAgICAg
cmV0dXJuIE5vbmUKICAgICAgICByZXR1cm4gc3VwZXIoKS5rZXlwcmVzcyhzaXplLCBrZXkpCgoK
aWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIHBhcnNlciA9IGFyZ3BhcnNlLkFyZ3VtZW50
UGFyc2VyKGRlc2NyaXB0aW9uPWYnUzMgQ29tbWFuZGVyIC0gVFVJIEZpbGUgTWFuYWdlciBmb3Ig
UzMgOyBWZXJzaW9uIHtfX1ZFUlNJT05fX30nKQogICAgCiAgICAjINCg0LXQttC40LwgMTog0J7Q
sdGL0YfQvdGL0Lkg0YTQsNC50LsgKNC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOKQogICAgcGFyc2Vy
LmFkZF9hcmd1bWVudCgnLWMnLCAnLS1jb25maWcnLCBkZWZhdWx0PSdzM19jb25maWcuanNvbics
IAogICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSdQYXRoIHRvIHBsYWludGV4dCBjb25maWcg
ZmlsZSAoZGVmYXVsdDogczNfY29uZmlnLmpzb24pJykKICAgIAogICAgIyDQoNC10LbQuNC8IDI6
INCX0LDRiNC40YTRgNC+0LLQsNC90L3Ri9C5INGE0LDQudC7CiAgICBwYXJzZXIuYWRkX2FyZ3Vt
ZW50KCctZScsICctLWVuY3J5cHRlZC1jb25maWcnLCAKICAgICAgICAgICAgICAgICAgICAgICAg
aGVscD0nUGF0aCB0byBlbmNyeXB0ZWQgY29uZmlnIGZpbGUgKE1vZGUgMikuIFJlcXVpcmVzIHBh
c3N3b3JkLicpCiAgICAKICAgICMg0KDQtdC20LjQvCAzOiBWYXVsdAogICAgcGFyc2VyLmFkZF9h
cmd1bWVudCgnLS12YXVsdC11cmwnLCAKICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0nVmF1
bHQgVVJMIChlLmcuIGh0dHA6Ly8xMjcuMC4wLjE6ODIwMCkuIEFjdGl2YXRlcyBNb2RlIDMuJykK
ICAgIHBhcnNlci5hZGRfYXJndW1lbnQoJy0tdmF1bHQtcGF0aCcsIAogICAgICAgICAgICAgICAg
ICAgICAgICBoZWxwPSdQYXRoIHRvIHNlY3JldCBpbiBWYXVsdCAoZS5nLiBzZWNyZXQvZGF0YS9z
M2NvbW1hbmRlciknKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgnLS12YXVsdC11c2VyJywgCiAg
ICAgICAgICAgICAgICAgICAgICAgIGhlbHA9J1ZhdWx0IHVzZXJuYW1lICh3aWxsIHByb21wdCBp
ZiBtaXNzaW5nKScpCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KCctLXZhdWx0LXBhc3MnLCAKICAg
ICAgICAgICAgICAgICAgICAgICAgaGVscD0nVmF1bHQgcGFzc3dvcmQgKHdpbGwgcHJvbXB0IGlm
IG1pc3NpbmcgLSBJTlNFQ1VSRSBpbiBoaXN0b3J5KScpCiAgICAKICAgIGFyZ3MgPSBwYXJzZXIu
cGFyc2VfYXJncygpCgogICAgIyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQutC+0L3RhNC4
0LPQsCDRgSDQsNGA0LPRg9C80LXQvdGC0LDQvNC4CiAgICBzM19jb25maWcgPSBTM0NvbmZpZyhh
cmdzKQoKICAgICMg0JfQsNC/0YPRgdC6INC/0YDQuNC70L7QttC10L3QuNGPCiAgICBhcHAgPSBE
dWFsUGFuZUFwcChzM19jb25maWcpCiAgICBhcHAucnVuKCkKICAgIHByaW50KGYnUzMgQ29tbWFu
ZGVyIC0gVFVJIEZpbGUgTWFuYWdlciBmb3IgUzMgOyBWZXJzaW9uIHtfX1ZFUlNJT05fX30nKQoA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAczNfY29uZmlnLmpzb24AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAwMDA3
NzAAMDAwMDAwMAAwMDAxNzM0ADAwMDAwMDAxMTI1ADE1MTM1NzQyMzQ3ADAxMjY3NgAgMAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB1c3RhciAgAHJvb3QAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAdmJveHNmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAB7CiAgImVuZHBvaW50cyI6IFsKICAgIHsKICAgICAgIm5hbWUiOiAiTG9jYWwgQ2Vw
aCIsCiAgICAgICJ1cmwiOiAiaHR0cDovL2xvY2FsaG9zdDo3NDgwIiwKICAgICAgImFjY2Vzc19r
ZXkiOiAiczNhY2Nlc3MiLAogICAgICAic2VjcmV0X2tleSI6ICJzM3NlY3JldCIsCiAgICAgICJl
eHRyYV9idWNrZXRzIjogWyAKICAgICAgICAiYmFja2V0LXRlc3R1c2VyMiIsIAogICAgICAgICJi
YWNrZXQtdGVzdHVzZXIxIiAKICAgICBdCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJSRW1v
dGUgQ2VwaCIsCiAgICAgICJ1cmwiOiAiaHR0cDovLzE5Mi4xNjguMS4yMzo3NDgwIiwKICAgICAg
ImFjY2Vzc19rZXkiOiAiczNhY2Nlc3MiLAogICAgICAic2VjcmV0X2tleSI6ICJzM3NlY3JldCIs
CiAgICAgICJidWNrZXRzIjogWwogICAgICAgICJpaWkiLAogICAgICAgICJxcXFxIgogICAgIF0K
CiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJFcnJvciIsCiAgICAgICJ1cmwiOiAiaHR0cDov
L2xvY2FsaG9zdDo3NDgxIiwKICAgICAgImFjY2Vzc19rZXkiOiAiczNhY2Nlc3MiLAogICAgICAi
c2VjcmV0X2tleSI6ICJzM3NlY3JldCIKICAgIH0KICBdCn0AAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAY29uZmlnX2VuY3J5cHRvci5weQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAwMDA3NzAA
MDAwMDAwMAAwMDAxNzM0ADAwMDAwMDAzNzUyADE1MTMwNDIyNTE0ADAxNDA0NwAgMAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB1c3RhciAgAHJvb3QAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAdmJveHNmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAjIS91c3IvYmluL2VudiBweXRob24zCmltcG9ydCBzeXMKaW1wb3J0IGpzb24KaW1wb3J0
IGJhc2U2NAppbXBvcnQgb3MKaW1wb3J0IGdldHBhc3MKZnJvbSBjcnlwdG9ncmFwaHkuZmVybmV0
IGltcG9ydCBGZXJuZXQKZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0
IGhhc2hlcwpmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5rZGYucGJrZGYyIGlt
cG9ydCBQQktERjJITUFDCmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcyBpbXBvcnQg
ZGVmYXVsdF9iYWNrZW5kCgpkZWYgZGVyaXZlX2tleShwYXNzd29yZCwgc2FsdCk6CiAgICAiIiLQ
k9C10L3QtdGA0LDRhtC40Y8g0LrQu9GO0YfQsCDQuNC3INC/0LDRgNC+0LvRjyDQuCDRgdC+0LvQ
uCIiIgogICAga2RmID0gUEJLREYySE1BQygKICAgICAgICBhbGdvcml0aG09aGFzaGVzLlNIQTI1
NigpLAogICAgICAgIGxlbmd0aD0zMiwKICAgICAgICBzYWx0PXNhbHQsCiAgICAgICAgaXRlcmF0
aW9ucz0xMDAwMDAsCiAgICAgICAgYmFja2VuZD1kZWZhdWx0X2JhY2tlbmQoKSAKICAgICkKICAg
IHJldHVybiBiYXNlNjQudXJsc2FmZV9iNjRlbmNvZGUoa2RmLmRlcml2ZShwYXNzd29yZC5lbmNv
ZGUoKSkpCgpkZWYgZW5jcnlwdF9maWxlKGlucHV0X2ZpbGUsIG91dHB1dF9maWxlKToKICAgIGlm
IG5vdCBvcy5wYXRoLmV4aXN0cyhpbnB1dF9maWxlKToKICAgICAgICBwcmludChmIkVycm9yOiBJ
bnB1dCBmaWxlICd7aW5wdXRfZmlsZX0nIG5vdCBmb3VuZC4iKQogICAgICAgIHJldHVybgoKICAg
IHRyeToKICAgICAgICB3aXRoIG9wZW4oaW5wdXRfZmlsZSwgJ3JiJykgYXMgZjoKICAgICAgICAg
ICAgZGF0YSA9IGYucmVhZCgpCiAgICAgICAgICAgICMg0J/RgNC+0LLQtdGA0LrQsCDQstCw0LvQ
uNC00L3QvtGB0YLQuCBKU09OINC/0LXRgNC10LQg0YjQuNGE0YDQvtCy0LDQvdC40LXQvAogICAg
ICAgICAgICBqc29uLmxvYWRzKGRhdGEpCiAgICBleGNlcHQganNvbi5KU09ORGVjb2RlRXJyb3I6
CiAgICAgICAgcHJpbnQoIkVycm9yOiBJbnB1dCBmaWxlIGlzIG5vdCB2YWxpZCBKU09OLiIpCiAg
ICAgICAgcmV0dXJuCgogICAgcGFzc3dvcmQgPSBnZXRwYXNzLmdldHBhc3MoIkVudGVyIHBhc3N3
b3JkIGZvciBlbmNyeXB0aW9uOiAiKQogICAgY29uZmlybSA9IGdldHBhc3MuZ2V0cGFzcygiQ29u
ZmlybSBwYXNzd29yZDogIikKICAgIAogICAgaWYgcGFzc3dvcmQgIT0gY29uZmlybToKICAgICAg
ICBwcmludCgiRXJyb3I6IFBhc3N3b3JkcyBkbyBub3QgbWF0Y2guIikKICAgICAgICByZXR1cm4K
CiAgICAjINCT0LXQvdC10YDQuNGA0YPQtdC8INGB0LvRg9GH0LDQudC90YPRjiDRgdC+0LvRjCAo
MTYg0LHQsNC50YIpCiAgICBzYWx0ID0gb3MudXJhbmRvbSgxNikKICAgIGtleSA9IGRlcml2ZV9r
ZXkocGFzc3dvcmQsIHNhbHQpCiAgICBmID0gRmVybmV0KGtleSkKICAgIAogICAgZW5jcnlwdGVk
X2RhdGEgPSBmLmVuY3J5cHQoZGF0YSkKCiAgICAjINCh0L7RhdGA0LDQvdGP0LXQvDog0L/QtdGA
0LLRi9C1IDE2INCx0LDQudGCIC0g0YHQvtC70YwsINC+0YHRgtCw0LvRjNC90L7QtSAtINC00LDQ
vdC90YvQtQogICAgd2l0aCBvcGVuKG91dHB1dF9maWxlLCAnd2InKSBhcyBmOgogICAgICAgIGYu
d3JpdGUoc2FsdCArIGVuY3J5cHRlZF9kYXRhKQogICAgCiAgICBwcmludChmIlN1Y2Nlc3MhIEVu
Y3J5cHRlZCBjb25maWcgc2F2ZWQgdG8gJ3tvdXRwdXRfZmlsZX0nIikKCmlmIF9fbmFtZV9fID09
ICJfX21haW5fXyI6CiAgICBpZiBsZW4oc3lzLmFyZ3YpICE9IDM6CiAgICAgICAgcHJpbnQoIlVz
YWdlOiBweXRob24zIHMzX2NvbmZpZ19lbmNyeXB0b3IucHkgPGlucHV0X2pzb24+IDxvdXRwdXRf
ZW5jPiIpCiAgICAgICAgcHJpbnQoIkV4YW1wbGU6IHB5dGhvbjMgczNfY29uZmlnX2VuY3J5cHRv
ci5weSBzM19jb25maWcuanNvbiBzM19jb25maWcuZW5jIikKICAgIGVsc2U6CiAgICAgICAgZW5j
cnlwdF9maWxlKHN5cy5hcmd2WzFdLCBzeXMuYXJndlsyXSkKAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=
