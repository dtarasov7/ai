Настроена связка server1(nginx) -> LoadBalancer ->FW -> Server2 (nginx - расположены статические файлы)
На Server1 подается большая тестовая нагрузка. (в логах - 125000 записей за 10 минут)
По логам nginx на server1 видно что некоторые запросы выполняются очень долго - до 7 секунд (Переменная $upstream_response_time). При этом запрашиваются и отдаются небольшие файлы ( как пример - favicon.ico). Это подтверждается и статистикой на ПО, которое создает нагрузку.
По логам nginx на server2 видно , что запросы приходят без задержек, выполняются быстро (милисекунды) (переменая $request_time)
Вопрос: Если запросы приходят на server2 быстро, обрабатываются быстро, то почему у некоторых запросов ответ на server1 приходит с задержкой ? При этом без большой нагрузки одиночные запросы выполняются быстро.
